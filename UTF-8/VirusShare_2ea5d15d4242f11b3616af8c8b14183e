webpackJsonp([2,8],[function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?d(e,t,n):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return l(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function u(e,t){if(l(t),e=o(e,t<0?0:0|g(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function f(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=f(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),a.alloc(+e)}function v(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(i){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===l)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var d=!0,f=0;f<l;f++)if(o(e,c+f)!==o(t,f)){d=!1;break}if(d)return c}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function k(e,t,n,r){return K(V(t,e.length-n),e,n,r)}function C(e,t,n,r){return K(W(t),e,n,r)}function S(e,t,n,r){return C(e,t,n,r)}function E(e,t,n,r){return K(Y(t),e,n,r)}function $(e,t,n,r){return K(G(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,c,u,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(a=d));break;case 3:l=e[i+1],c=e[i+2],128===(192&l)&&128===(192&c)&&(d=(15&o)<<12|(63&l)<<6|63&c,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,d>65535&&d<1114112&&(a=d))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return D(r)}function D(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=H(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function z(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return J.toByteArray(z(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var J=n(47),Z=n(60),Q=n(33);t.Buffer=a,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return c(null,e,t,n)},a.allocUnsafe=function(e){return u(null,e)},a.allocUnsafeSlow=function(e){return u(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):_.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,l=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),Z.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),Z.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),Z.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),Z.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:V(new a(e,r).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(8))},function(e,t,n){var r,i;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(e,t,n){t=t||ue;var r,i=t.createElement("script");if(i.text=e,n)for(r in Ce)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?me[ve.call(e)]||"object":typeof e}function l(e){var t=!!e&&"length"in e&&e.length,n=s(e);return!xe(e)&&!ke(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function u(e,t,n){return xe(t)?Ee.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Ee.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Ee.grep(e,function(e){return ge.call(t,e)>-1!==n}):Ee.filter(t,e,n)}function d(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function f(e){var t={};return Ee.each(e.match(je)||[],function(e,n){t[n]=!0}),t}function h(e){return e}function p(e){throw e}function g(e,t,n,r){var i;try{e&&xe(i=e.promise)?i.call(e).done(t).fail(n):e&&xe(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function m(){ue.removeEventListener("DOMContentLoaded",m),n.removeEventListener("load",m),Ee.ready()}function v(e,t){return t.toUpperCase()}function _(e){return e.replace(ze,"ms-").replace(qe,v)}function y(){this.expando=Ee.expando+y.uid++}function b(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ge.test(e)?JSON.parse(e):e)}function w(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ye,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=b(n)}catch(e){}We.set(e,t,n)}else n=void 0;return n}function x(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return Ee.css(e,t,"")},l=s(),c=n&&n[3]||(Ee.cssNumber[t]?"":"px"),u=(Ee.cssNumber[t]||"px"!==c&&+l)&&Xe.exec(Ee.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)Ee.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,Ee.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}function k(e){var t,n=e.ownerDocument,r=e.nodeName,i=et[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=Ee.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),et[r]=i,i)}function C(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=Ve.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Ze(r)&&(i[o]=k(r))):"none"!==n&&(i[o]="none",Ve.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function S(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&c(e,t)?Ee.merge([e],n):n}function E(e,t){for(var n=0,r=e.length;n<r;n++)Ve.set(e[n],"globalEval",!t||Ve.get(t[n],"globalEval"))}function $(e,t,n,r,i){for(var o,a,l,c,u,d,f=t.createDocumentFragment(),h=[],p=0,g=e.length;p<g;p++)if(o=e[p],o||0===o)if("object"===s(o))Ee.merge(h,o.nodeType?[o]:o);else if(ot.test(o)){for(a=a||f.appendChild(t.createElement("div")),l=(nt.exec(o)||["",""])[1].toLowerCase(),c=it[l]||it._default,a.innerHTML=c[1]+Ee.htmlPrefilter(o)+c[2],d=c[0];d--;)a=a.lastChild;Ee.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",p=0;o=h[p++];)if(r&&Ee.inArray(o,r)>-1)i&&i.push(o);else if(u=Ee.contains(o.ownerDocument,o),a=S(f.appendChild(o),"script"),u&&E(a),n)for(d=0;o=a[d++];)rt.test(o.type||"")&&n.push(o);return f}function T(){return!0}function A(){return!1}function D(){try{return ue.activeElement}catch(e){}}function O(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)O(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=A;else if(!i)return e;return 1===o&&(a=i,i=function(e){return Ee().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Ee.guid++)),e.each(function(){Ee.event.add(this,t,i,r,n)})}function P(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")?Ee(e).children("tbody")[0]||e:e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function I(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function M(e,t){var n,r,i,o,a,s,l,c;if(1===t.nodeType){if(Ve.hasData(e)&&(o=Ve.access(e),a=Ve.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;n<r;n++)Ee.event.add(t,i,c[i][n])}We.hasData(e)&&(s=We.access(e),l=Ee.extend({},s),We.set(t,l))}}function L(e,t){var n=t.nodeName.toLowerCase();"input"===n&&tt.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function N(e,t,n,r){t=he.apply([],t);var i,o,s,l,c,u,d=0,f=e.length,h=f-1,p=t[0],g=xe(p);if(g||f>1&&"string"==typeof p&&!we.checkClone&&ft.test(p))return e.each(function(i){var o=e.eq(i);g&&(t[0]=p.call(this,i,o.html())),N(o,t,n,r)});if(f&&(i=$(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=Ee.map(S(i,"script"),R),l=s.length;d<f;d++)c=i,d!==h&&(c=Ee.clone(c,!0,!0),l&&Ee.merge(s,S(c,"script"))),n.call(e[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,Ee.map(s,I),d=0;d<l;d++)c=s[d],rt.test(c.type||"")&&!Ve.access(c,"globalEval")&&Ee.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?Ee._evalUrl&&Ee._evalUrl(c.src):a(c.textContent.replace(ht,""),u,c))}return e}function j(e,t,n){for(var r,i=t?Ee.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||Ee.cleanData(S(r)),r.parentNode&&(n&&Ee.contains(r.ownerDocument,r)&&E(S(r,"script")),r.parentNode.removeChild(r));return e}function F(e,t,n){var r,i,o,a,s=e.style;return n=n||gt(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||Ee.contains(e.ownerDocument,e)||(a=Ee.style(e,t)),!we.pixelBoxStyles()&&pt.test(a)&&mt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function B(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function U(e){if(e in xt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=wt.length;n--;)if(e=wt[n]+t,e in xt)return e}function z(e){var t=Ee.cssProps[e];return t||(t=Ee.cssProps[e]=U(e)||e),t}function q(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function H(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=Ee.css(e,n+Je[a],!0,i)),r?("content"===n&&(l-=Ee.css(e,"padding"+Je[a],!0,i)),"margin"!==n&&(l-=Ee.css(e,"border"+Je[a]+"Width",!0,i))):(l+=Ee.css(e,"padding"+Je[a],!0,i),"padding"!==n?l+=Ee.css(e,"border"+Je[a]+"Width",!0,i):s+=Ee.css(e,"border"+Je[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function V(e,t,n){var r=gt(e),i=F(e,t,r),o="border-box"===Ee.css(e,"boxSizing",!1,r),a=o;if(pt.test(i)){if(!n)return i;i="auto"}return a=a&&(we.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===Ee.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),i=parseFloat(i)||0,i+H(e,t,n||(o?"border":"content"),a,r,i)+"px"}function W(e,t,n,r,i){return new W.prototype.init(e,t,n,r,i)}function G(){Ct&&(ue.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(G):n.setTimeout(G,Ee.fx.interval),Ee.fx.tick())}function Y(){return n.setTimeout(function(){kt=void 0}),kt=Date.now()}function K(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Je[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function X(e,t,n){for(var r,i=(Q.tweeners[t]||[]).concat(Q.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function J(e,t,n){var r,i,o,a,s,l,c,u,d="width"in t||"height"in t,f=this,h={},p=e.style,g=e.nodeType&&Ze(e),m=Ve.get(e,"fxshow");n.queue||(a=Ee._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Ee.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],St.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||Ee.style(e,r)}if(l=!Ee.isEmptyObject(t),l||!Ee.isEmptyObject(h)){d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=m&&m.display,null==c&&(c=Ve.get(e,"display")),u=Ee.css(e,"display"),"none"===u&&(c?u=c:(C([e],!0),c=e.style.display||c,u=Ee.css(e,"display"),C([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===Ee.css(e,"float")&&(l||(f.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(r in h)l||(m?"hidden"in m&&(g=m.hidden):m=Ve.access(e,"fxshow",{display:c}),o&&(m.hidden=!g),g&&C([e],!0),f.done(function(){g||C([e]),Ve.remove(e,"fxshow");for(r in h)Ee.style(e,r,h[r])})),l=X(g?m[r]:0,r,f),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}}function Z(e,t){var n,r,i,o,a;for(n in e)if(r=_(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=Ee.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Q(e,t,n){var r,i,o=0,a=Q.prefilters.length,s=Ee.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=kt||Y(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,l=c.tweens.length;a<l;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),o<1&&l?n:(l||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:Ee.extend({},t),opts:Ee.extend(!0,{specialEasing:{},easing:Ee.easing._default},n),originalProperties:t,originalOptions:n,startTime:kt||Y(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Ee.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(Z(u,c.opts.specialEasing);o<a;o++)if(r=Q.prefilters[o].call(c,e,u,c.opts))return xe(r.stop)&&(Ee._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return Ee.map(u,X,c),xe(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Ee.fx.timer(Ee.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function ee(e){var t=e.match(je)||[];return t.join(" ")}function te(e){return e.getAttribute&&e.getAttribute("class")||""}function ne(e){return Array.isArray(e)?e:"string"==typeof e?e.match(je)||[]:[]}function re(e,t,n,r){var i;if(Array.isArray(t))Ee.each(t,function(t,i){n||Nt.test(e)?r(e,i):re(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==s(t))r(e,t);else for(i in t)re(e+"["+i+"]",t[i],n,r)}function ie(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(je)||[];if(xe(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function oe(e,t,n,r){function i(s){var l;return o[s]=!0,Ee.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},a=e===Kt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function ae(e,t){var n,r,i=Ee.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Ee.extend(!0,e,r),e}function se(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function le(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var ce=[],ue=n.document,de=Object.getPrototypeOf,fe=ce.slice,he=ce.concat,pe=ce.push,ge=ce.indexOf,me={},ve=me.toString,_e=me.hasOwnProperty,ye=_e.toString,be=ye.call(Object),we={},xe=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},ke=function(e){return null!=e&&e===e.window},Ce={type:!0,src:!0,noModule:!0},Se="3.3.1",Ee=function(e,t){return new Ee.fn.init(e,t)},$e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Ee.fn=Ee.prototype={jquery:Se,constructor:Ee,length:0,toArray:function(){return fe.call(this)},get:function(e){return null==e?fe.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Ee.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Ee.each(this,e)},map:function(e){return this.pushStack(Ee.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(fe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:pe,sort:ce.sort,splice:ce.splice},Ee.extend=Ee.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||xe(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(c&&r&&(Ee.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&Ee.isPlainObject(n)?n:{},a[t]=Ee.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},Ee.extend({expando:"jQuery"+(Se+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ve.call(e))&&(!(t=de(e))||(n=_e.call(t,"constructor")&&t.constructor,"function"==typeof n&&ye.call(n)===be))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){a(e)},each:function(e,t){var n,r=0;if(l(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace($e,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(l(Object(e))?Ee.merge(n,"string"==typeof e?[e]:e):pe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ge.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,a=[];if(l(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&a.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&a.push(i);return he.apply([],a)},guid:1,support:we}),"function"==typeof Symbol&&(Ee.fn[Symbol.iterator]=ce[Symbol.iterator]),Ee.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){me["[object "+t+"]"]=t.toLowerCase()});var Te=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,n,r){var i,o,a,s,l,c,u,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:U)!==R&&P(t),t=t||R,M)){if(11!==p&&(l=ve.exec(e)))if(i=l[1]){if(9===p){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&F(t,a)&&a.id===i)return n.push(a),n}else{if(l[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(x.qsa&&!W[e+" "]&&(!L||!L.test(e))){if(1!==p)f=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(we,xe):t.setAttribute("id",s=B),c=E(e),o=c.length;o--;)c[o]="#"+s+" "+h(c[o]);u=c.join(","),f=_e.test(e)&&d(t.parentNode)||t}if(u)try{return Z.apply(n,f.querySelectorAll(u)),n}catch(e){}finally{s===B&&t.removeAttribute("id")}}}return T(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=R.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)k.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=q++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,d,f=[z,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(d=t[B]||(t[B]={}),u=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===z&&c[1]===s)return f[2]=c[2];if(u[o]=f,f[2]=e(t,n,l))return!0}return!1}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function _(e,t,n,i,o,a){return i&&!i[B]&&(i=_(i)),o&&!o[B]&&(o=_(o,a)),r(function(r,a,s,l){var c,u,d,f=[],h=[],p=a.length,g=r||m(t||"*",s.nodeType?[s]:s,[]),_=!e||!r&&t?g:v(g,f,e,s,l),y=n?o||(r?e:p||i)?[]:a:_;if(n&&n(_,y,s,l),i)for(c=v(y,h),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[h[u]]=!(_[h[u]]=d));if(r){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(_[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?ee(r,d):f[u])>-1&&(r[c]=!(a[c]=d))}}else y=v(y===a?y.splice(p,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function y(e){for(var t,n,r,i=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return ee(t,e)>-1},a,!0),u=[function(e,n,r){var i=!o&&(r||n!==A)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s<i;s++)if(n=k.relative[e[s].type])u=[p(g(u),n)];else{if(n=k.filter[e[s].type].apply(null,e[s].matches),n[B]){for(r=++s;r<i&&!k.relative[e[r].type];r++);return _(s>1&&g(u),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<r&&y(e.slice(s,r)),r<i&&y(e=e.slice(r)),r<i&&h(e))}u.push(n)}return g(u)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,c){var u,d,f,h=0,p="0",g=r&&[],m=[],_=A,y=r||o&&k.find.TAG("*",c),b=z+=null==_?1:Math.random()||.1,w=y.length;for(c&&(A=a===R||a||c);p!==w&&null!=(u=y[p]);p++){if(o&&u){for(d=0,a||u.ownerDocument===R||(P(u),s=!M);f=e[d++];)if(f(u,a||R,s)){l.push(u);break}c&&(z=b)}i&&((u=!f&&u)&&h--,r&&g.push(u))}if(h+=p,i&&p!==h){for(d=0;f=n[d++];)f(g,m,a,s);if(r){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=X.call(l));m=v(m)}Z.apply(l,m),c&&!r&&m.length>0&&h+n.length>1&&t.uniqueSort(l)}return c&&(z=b,A=_),g};return i?r(a):a}var w,x,k,C,S,E,$,T,A,D,O,P,R,I,M,L,N,j,F,B="sizzle"+1*new Date,U=e.document,z=0,q=0,H=n(),V=n(),W=n(),G=function(e,t){return e===t&&(O=!0),0},Y={}.hasOwnProperty,K=[],X=K.pop,J=K.push,Z=K.push,Q=K.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),fe=new RegExp("^"+re+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,ye=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ke=function(){P()},Ce=p(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(K=Q.call(U.childNodes),U.childNodes),K[U.childNodes.length].nodeType}catch(e){Z={apply:K.length?function(e,t){J.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},P=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==R&&9===r.nodeType&&r.documentElement?(R=r,I=R.documentElement,M=!S(R),U!==R&&(n=R.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(R.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(R.getElementsByClassName),x.getById=i(function(e){return I.appendChild(e).id=B,!R.getElementsByName||!R.getElementsByName(B).length}),x.getById?(k.filter.ID=function(e){var t=e.replace(ye,be);return function(e){return e.getAttribute("id")===t}},k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n=t.getElementById(e);return n?[n]:[]}}):(k.filter.ID=function(e){var t=e.replace(ye,be);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),k.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},k.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&M)return t.getElementsByClassName(e)},N=[],L=[],(x.qsa=me.test(R.querySelectorAll))&&(i(function(e){I.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||L.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=R.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),I.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=me.test(j=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(e){x.disconnectedMatch=j.call(e,"*"),j.call(e,"[s!='']:x"),N.push("!=",oe)}),L=L.length&&new RegExp(L.join("|")),N=N.length&&new RegExp(N.join("|")),t=me.test(I.compareDocumentPosition),F=t||me.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===R||e.ownerDocument===U&&F(U,e)?-1:t===R||t.ownerDocument===U&&F(U,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!i||!o)return e===R?-1:t===R?1:i?-1:o?1:D?ee(D,e)-ee(D,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===U?-1:l[r]===U?1:0},R):R},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==R&&P(e),n=n.replace(ue,"='$1']"),x.matchesSelector&&M&&!W[n+" "]&&(!N||!N.test(n))&&(!L||!L.test(n)))try{var r=j.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&P(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&P(e);var n=k.attrHandle[t.toLowerCase()],r=n&&Y.call(k.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==r?r:x.attributes||!M?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(we,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!x.detectDuplicates,D=!x.sortStable&&e.slice(0),e.sort(G),O){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},k=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,h,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),_=!l&&!s,y=!1;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&_){for(f=m,d=f[B]||(f[B]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),c=u[e]||[],h=c[0]===z&&c[1],y=h&&c[2],f=h&&m.childNodes[h];f=++h&&f&&f[g]||(y=h=0)||p.pop();)if(1===f.nodeType&&++y&&f===t){u[e]=[z,h,y];break}}else if(_&&(f=t,d=f[B]||(f[B]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),c=u[e]||[],h=c[0]===z&&c[1],y=h),y===!1)for(;(f=++h&&f&&f[g]||(y=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++y||(_&&(d=f[B]||(f[B]={}),u=d[f.uniqueID]||(d[f.uniqueID]={}),u[e]=[z,y]),f!==t)););return y-=i,y===r||y%r===0&&y/r>=0}}},PSEUDO:function(e,n){var i,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=$(e.replace(se,"$1"));return i[B]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ye,be),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,be).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=l(w);return f.prototype=k.filters=k.pseudos,k.setFilters=new f,E=t.tokenize=function(e,n){var r,i,o,a,s,l,c,u=V[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=k.preFilter;s;){r&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in k.filter)!(i=he[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},$=t.compile=function(e,t){var n,r=[],i=[],o=W[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[B]?r.push(o):i.push(o);o=W(e,b(i,r)),o.selector=e}return o},T=t.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,u=!r&&E(e=c.selector||e);if(n=n||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&M&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(ye,be),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!k.relative[s=a.type]);)if((l=k.find[s])&&(r=l(a.matches[0].replace(ye,be),_e.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&h(o),!e)return Z.apply(n,r),n;break}}return(c||$(e,u))(r,t,!M,n,!t||_e.test(e)&&d(t.parentNode)||t),n},x.sortStable=B.split("").sort(G).join("")===B,x.detectDuplicates=!!O,P(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(R.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);Ee.find=Te,Ee.expr=Te.selectors,Ee.expr[":"]=Ee.expr.pseudos,Ee.uniqueSort=Ee.unique=Te.uniqueSort,Ee.text=Te.getText,Ee.isXMLDoc=Te.isXML,Ee.contains=Te.contains,Ee.escapeSelector=Te.escape;var Ae=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Ee(e).is(n))break;r.push(e)}return r},De=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Oe=Ee.expr.match.needsContext,Pe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Ee.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Ee.find.matchesSelector(r,e)?[r]:[]:Ee.find.matches(e,Ee.grep(t,function(e){return 1===e.nodeType}))},Ee.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(Ee(e).filter(function(){for(t=0;t<r;t++)if(Ee.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Ee.find(e,i[t],n);return r>1?Ee.uniqueSort(n):n},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&Oe.test(e)?Ee(e):e||[],!1).length}});var Re,Ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Me=Ee.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Re,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ie.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Ee?t[0]:t,Ee.merge(this,Ee.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:ue,!0)),Pe.test(r[1])&&Ee.isPlainObject(t))for(r in t)xe(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=ue.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):xe(e)?void 0!==n.ready?n.ready(e):e(Ee):Ee.makeArray(e,this)};Me.prototype=Ee.fn,Re=Ee(ue);var Le=/^(?:parents|prev(?:Until|All))/,Ne={children:!0,contents:!0,next:!0,prev:!0};Ee.fn.extend({has:function(e){var t=Ee(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Ee.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&Ee(e);if(!Oe.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Ee.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Ee.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ge.call(Ee(e),this[0]):ge.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Ee.uniqueSort(Ee.merge(this.get(),Ee(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Ee.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ae(e,"parentNode")},parentsUntil:function(e,t,n){return Ae(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return Ae(e,"nextSibling")},prevAll:function(e){return Ae(e,"previousSibling")},nextUntil:function(e,t,n){return Ae(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ae(e,"previousSibling",n)},siblings:function(e){return De((e.parentNode||{}).firstChild,e)},children:function(e){return De(e.firstChild)},contents:function(e){return c(e,"iframe")?e.contentDocument:(c(e,"template")&&(e=e.content||e),Ee.merge([],e.childNodes))}},function(e,t){Ee.fn[e]=function(n,r){var i=Ee.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Ee.filter(r,i)),this.length>1&&(Ne[e]||Ee.uniqueSort(i),Le.test(e)&&i.reverse()),this.pushStack(i)}});var je=/[^\x20\t\r\n\f]+/g;Ee.Callbacks=function(e){e="string"==typeof e?f(e):Ee.extend({},e);var t,n,r,i,o=[],a=[],l=-1,c=function(){for(i=i||e.once,r=t=!0;a.length;l=-1)for(n=a.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(l=o.length-1,a.push(n)),function t(n){Ee.each(n,function(n,r){xe(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==s(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return Ee.each(arguments,function(e,t){for(var n;(n=Ee.inArray(t,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(e){return e?Ee.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},Ee.extend({Deferred:function(e){var t=[["notify","progress",Ee.Callbacks("memory"),Ee.Callbacks("memory"),2],["resolve","done",Ee.Callbacks("once memory"),Ee.Callbacks("once memory"),0,"resolved"],["reject","fail",Ee.Callbacks("once memory"),Ee.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return Ee.Deferred(function(n){Ee.each(t,function(t,r){var i=xe(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&xe(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){function o(e,t,r,i){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<a)){if(n=r.apply(s,l),n===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,xe(c)?i?c.call(n,o(a,t,h,i),o(a,t,p,i)):(a++,c.call(n,o(a,t,h,i),o(a,t,p,i),o(a,t,h,t.notifyWith))):(r!==h&&(s=void 0,l=[n]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(n){Ee.Deferred.exceptionHook&&Ee.Deferred.exceptionHook(n,u.stackTrace),e+1>=a&&(r!==p&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(Ee.Deferred.getStackHook&&(u.stackTrace=Ee.Deferred.getStackHook()),n.setTimeout(u))}}var a=0;return Ee.Deferred(function(n){t[0][3].add(o(0,n,xe(i)?i:h,n.notifyWith)),t[1][3].add(o(0,n,xe(e)?e:h)),t[2][3].add(o(0,n,xe(r)?r:p))}).promise()},promise:function(e){return null!=e?Ee.extend(e,i):i}},o={};return Ee.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=fe.call(arguments),o=Ee.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?fe.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(g(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||xe(i[n]&&i[n].then)))return o.then();for(;n--;)g(i[n],a(n),o.reject);return o.promise()}});var Fe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Ee.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Fe.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Ee.readyException=function(e){n.setTimeout(function(){throw e})};var Be=Ee.Deferred();Ee.fn.ready=function(e){return Be.then(e).catch(function(e){Ee.readyException(e)}),this},Ee.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--Ee.readyWait:Ee.isReady)||(Ee.isReady=!0,e!==!0&&--Ee.readyWait>0||Be.resolveWith(ue,[Ee]))}}),Ee.ready.then=Be.then,"complete"===ue.readyState||"loading"!==ue.readyState&&!ue.documentElement.doScroll?n.setTimeout(Ee.ready):(ue.addEventListener("DOMContentLoaded",m),n.addEventListener("load",m));var Ue=function(e,t,n,r,i,o,a){var l=0,c=e.length,u=null==n;if("object"===s(n)){i=!0;for(l in n)Ue(e,t,l,n[l],!0,o,a)}else if(void 0!==r&&(i=!0,xe(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(Ee(e),n)})),t))for(;l<c;l++)t(e[l],n,a?r:r.call(e[l],l,t(e[l],n)));return i?e:u?t.call(e):c?t(e[0],n):o},ze=/^-ms-/,qe=/-([a-z])/g,He=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};y.uid=1,y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},He(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[_(t)]=n;else for(r in t)i[_(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(_):(t=_(t),t=t in r?[t]:t.match(je)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Ee.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Ee.isEmptyObject(t)}};var Ve=new y,We=new y,Ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ye=/[A-Z]/g;Ee.extend({hasData:function(e){return We.hasData(e)||Ve.hasData(e)},data:function(e,t,n){return We.access(e,t,n)},removeData:function(e,t){We.remove(e,t)},_data:function(e,t,n){return Ve.access(e,t,n)},_removeData:function(e,t){Ve.remove(e,t)}}),Ee.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=We.get(o),1===o.nodeType&&!Ve.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=_(r.slice(5)),w(o,r,i[r])));Ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){We.set(this,e)}):Ue(this,function(t){var n;if(o&&void 0===t){if(n=We.get(o,e),void 0!==n)return n;if(n=w(o,e),void 0!==n)return n}else this.each(function(){We.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){We.remove(this,e)})}}),Ee.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Ve.get(e,t),n&&(!r||Array.isArray(n)?r=Ve.access(e,t,Ee.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Ee.queue(e,t),r=n.length,i=n.shift(),o=Ee._queueHooks(e,t),a=function(){Ee.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ve.get(e,n)||Ve.access(e,n,{empty:Ee.Callbacks("once memory").add(function(){Ve.remove(e,[t+"queue",n])})})}}),Ee.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Ee.queue(this[0],e):void 0===t?this:this.each(function(){var n=Ee.queue(this,e,t);Ee._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Ee.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Ee.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Ee.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Ve.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xe=new RegExp("^(?:([+-])=|)("+Ke+")([a-z%]*)$","i"),Je=["Top","Right","Bottom","Left"],Ze=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Ee.contains(e.ownerDocument,e)&&"none"===Ee.css(e,"display")},Qe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},et={};Ee.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ze(this)?Ee(this).show():Ee(this).hide()})}});var tt=/^(?:checkbox|radio)$/i,nt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,rt=/^$|^module$|\/(?:java|ecma)script/i,it={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};it.optgroup=it.option,it.tbody=it.tfoot=it.colgroup=it.caption=it.thead,it.th=it.td;var ot=/<|&#?\w+;/;!function(){var e=ue.createDocumentFragment(),t=e.appendChild(ue.createElement("div")),n=ue.createElement("input");n.setAttribute("type","radio"),
n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),we.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",we.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var at=ue.documentElement,st=/^key/,lt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ct=/^([^.]*)(?:\.(.+)|)/;Ee.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,h,p,g,m=Ve.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&Ee.find.matchesSelector(at,i),n.guid||(n.guid=Ee.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return"undefined"!=typeof Ee&&Ee.event.triggered!==t.type?Ee.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(je)||[""],c=t.length;c--;)s=ct.exec(t[c])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(d=Ee.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=Ee.event.special[h]||{},u=Ee.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Ee.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=l[h])||(f=l[h]=[],f.delegateCount=0,d.setup&&d.setup.call(e,r,p,a)!==!1||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),Ee.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,h,p,g,m=Ve.hasData(e)&&Ve.get(e);if(m&&(l=m.events)){for(t=(t||"").match(je)||[""],c=t.length;c--;)if(s=ct.exec(t[c])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(d=Ee.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,f=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&d.teardown.call(e,p,m.handle)!==!1||Ee.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)Ee.event.remove(e,h+t[c],n,r,!0);Ee.isEmptyObject(l)&&Ve.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=Ee.event.fix(e),l=new Array(arguments.length),c=(Ve.get(this,"events")||{})[s.type]||[],u=Ee.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,s)!==!1){for(a=Ee.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,r=((Ee.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(o=[],a={},n=0;n<l;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?Ee(i,this).index(c)>-1:Ee.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Ee.Event.prototype,e,{enumerable:!0,configurable:!0,get:xe(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Ee.expando]?e:new Ee.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==D()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===D()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(e){return c(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Ee.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Ee.Event=function(e,t){return this instanceof Ee.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?T:A,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Ee.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),void(this[Ee.expando]=!0)):new Ee.Event(e,t)},Ee.Event.prototype={constructor:Ee.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Ee.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&st.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&lt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Ee.event.addProp),Ee.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Ee.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Ee.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Ee.fn.extend({on:function(e,t,n,r){return O(this,e,t,n,r)},one:function(e,t,n,r){return O(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Ee(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=A),this.each(function(){Ee.event.remove(this,e,n,t)})}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,dt=/<script|<style|<link/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Ee.extend({htmlPrefilter:function(e){return e.replace(ut,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=Ee.contains(e.ownerDocument,e);if(!(we.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Ee.isXMLDoc(e)))for(a=S(s),o=S(e),r=0,i=o.length;r<i;r++)L(o[r],a[r]);if(t)if(n)for(o=o||S(e),a=a||S(s),r=0,i=o.length;r<i;r++)M(o[r],a[r]);else M(e,s);return a=S(s,"script"),a.length>0&&E(a,!l&&S(e,"script")),s},cleanData:function(e){for(var t,n,r,i=Ee.event.special,o=0;void 0!==(n=e[o]);o++)if(He(n)){if(t=n[Ve.expando]){if(t.events)for(r in t.events)i[r]?Ee.event.remove(n,r):Ee.removeEvent(n,r,t.handle);n[Ve.expando]=void 0}n[We.expando]&&(n[We.expando]=void 0)}}}),Ee.fn.extend({detach:function(e){return j(this,e,!0)},remove:function(e){return j(this,e)},text:function(e){return Ue(this,function(e){return void 0===e?Ee.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=P(this,e);t.appendChild(e)}})},prepend:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=P(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Ee.cleanData(S(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Ee.clone(this,e,t)})},html:function(e){return Ue(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!dt.test(e)&&!it[(nt.exec(e)||["",""])[1].toLowerCase()]){e=Ee.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Ee.cleanData(S(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return N(this,arguments,function(t){var n=this.parentNode;Ee.inArray(this,e)<0&&(Ee.cleanData(S(this)),n&&n.replaceChild(t,this))},e)}}),Ee.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Ee.fn[e]=function(e){for(var n,r=[],i=Ee(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),Ee(i[a])[t](n),pe.apply(r,n.get());return this.pushStack(r)}});var pt=new RegExp("^("+Ke+")(?!px)[a-z%]+$","i"),gt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},mt=new RegExp(Je.join("|"),"i");!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,s=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=36===c.offsetWidth||"absolute",at.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,l=ue.createElement("div"),c=ue.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",we.clearCloneStyle="content-box"===c.style.backgroundClip,Ee.extend(we,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),o}}))}();var vt=/^(none|table(?!-c[ea]).+)/,_t=/^--/,yt={position:"absolute",visibility:"hidden",display:"block"},bt={letterSpacing:"0",fontWeight:"400"},wt=["Webkit","Moz","ms"],xt=ue.createElement("div").style;Ee.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=F(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=_(t),l=_t.test(t),c=e.style;return l||(t=z(s)),a=Ee.cssHooks[t]||Ee.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t]:(o=typeof n,"string"===o&&(i=Xe.exec(n))&&i[1]&&(n=x(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(Ee.cssNumber[s]?"":"px")),we.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,a,s=_(t),l=_t.test(t);return l||(t=z(s)),a=Ee.cssHooks[t]||Ee.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=F(e,t,r)),"normal"===i&&t in bt&&(i=bt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),Ee.each(["height","width"],function(e,t){Ee.cssHooks[t]={get:function(e,n,r){if(n)return!vt.test(Ee.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?V(e,t,r):Qe(e,yt,function(){return V(e,t,r)})},set:function(e,n,r){var i,o=gt(e),a="border-box"===Ee.css(e,"boxSizing",!1,o),s=r&&H(e,t,r,a,o);return a&&we.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-H(e,t,"border",!1,o)-.5)),s&&(i=Xe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=Ee.css(e,t)),q(e,n,s)}}}),Ee.cssHooks.marginLeft=B(we.reliableMarginLeft,function(e,t){if(t)return(parseFloat(F(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Ee.each({margin:"",padding:"",border:"Width"},function(e,t){Ee.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Je[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(Ee.cssHooks[e+t].set=q)}),Ee.fn.extend({css:function(e,t){return Ue(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=gt(e),i=t.length;a<i;a++)o[t[a]]=Ee.css(e,t[a],!1,r);return o}return void 0!==n?Ee.style(e,t,n):Ee.css(e,t)},e,t,arguments.length>1)}}),Ee.Tween=W,W.prototype={constructor:W,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||Ee.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Ee.cssNumber[n]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,n=W.propHooks[this.prop];return this.options.duration?this.pos=t=Ee.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Ee.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Ee.fx.step[e.prop]?Ee.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Ee.cssProps[e.prop]]&&!Ee.cssHooks[e.prop]?e.elem[e.prop]=e.now:Ee.style(e.elem,e.prop,e.now+e.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Ee.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Ee.fx=W.prototype.init,Ee.fx.step={};var kt,Ct,St=/^(?:toggle|show|hide)$/,Et=/queueHooks$/;Ee.Animation=Ee.extend(Q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return x(n.elem,e,Xe.exec(t),n),n}]},tweener:function(e,t){xe(e)?(t=e,e=["*"]):e=e.match(je);for(var n,r=0,i=e.length;r<i;r++)n=e[r],Q.tweeners[n]=Q.tweeners[n]||[],Q.tweeners[n].unshift(t)},prefilters:[J],prefilter:function(e,t){t?Q.prefilters.unshift(e):Q.prefilters.push(e)}}),Ee.speed=function(e,t,n){var r=e&&"object"==typeof e?Ee.extend({},e):{complete:n||!n&&t||xe(e)&&e,duration:e,easing:n&&t||t&&!xe(t)&&t};return Ee.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Ee.fx.speeds?r.duration=Ee.fx.speeds[r.duration]:r.duration=Ee.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){xe(r.old)&&r.old.call(this),r.queue&&Ee.dequeue(this,r.queue)},r},Ee.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ze).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Ee.isEmptyObject(e),o=Ee.speed(t,n,r),a=function(){var t=Q(this,Ee.extend({},e),o);(i||Ve.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Ee.timers,a=Ve.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Et.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Ee.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Ee.timers,a=r?r.length:0;for(n.finish=!0,Ee.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Ee.each(["toggle","show","hide"],function(e,t){var n=Ee.fn[t];Ee.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(K(t,!0),e,r,i)}}),Ee.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Ee.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Ee.timers=[],Ee.fx.tick=function(){var e,t=0,n=Ee.timers;for(kt=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Ee.fx.stop(),kt=void 0},Ee.fx.timer=function(e){Ee.timers.push(e),Ee.fx.start()},Ee.fx.interval=13,Ee.fx.start=function(){Ct||(Ct=!0,G())},Ee.fx.stop=function(){Ct=null},Ee.fx.speeds={slow:600,fast:200,_default:400},Ee.fn.delay=function(e,t){return e=Ee.fx?Ee.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=ue.createElement("input"),t=ue.createElement("select"),n=t.appendChild(ue.createElement("option"));e.type="checkbox",we.checkOn=""!==e.value,we.optSelected=n.selected,e=ue.createElement("input"),e.value="t",e.type="radio",we.radioValue="t"===e.value}();var $t,Tt=Ee.expr.attrHandle;Ee.fn.extend({attr:function(e,t){return Ue(this,Ee.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Ee.removeAttr(this,e)})}}),Ee.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?Ee.prop(e,t,n):(1===o&&Ee.isXMLDoc(e)||(i=Ee.attrHooks[t.toLowerCase()]||(Ee.expr.match.bool.test(t)?$t:void 0)),void 0!==n?null===n?void Ee.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Ee.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!we.radioValue&&"radio"===t&&c(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(je);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),$t={set:function(e,t,n){return t===!1?Ee.removeAttr(e,n):e.setAttribute(n,n),n}},Ee.each(Ee.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||Ee.find.attr;Tt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=Tt[a],Tt[a]=i,i=null!=n(e,t,r)?a:null,Tt[a]=o),i}});var At=/^(?:input|select|textarea|button)$/i,Dt=/^(?:a|area)$/i;Ee.fn.extend({prop:function(e,t){return Ue(this,Ee.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Ee.propFix[e]||e]})}}),Ee.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Ee.isXMLDoc(e)||(t=Ee.propFix[t]||t,i=Ee.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Ee.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),we.optSelected||(Ee.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Ee.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Ee.propFix[this.toLowerCase()]=this}),Ee.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(xe(e))return this.each(function(t){Ee(this).addClass(e.call(this,t,te(this)))});if(t=ne(e),t.length)for(;n=this[l++];)if(i=te(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=ee(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(xe(e))return this.each(function(t){Ee(this).removeClass(e.call(this,t,te(this)))});if(!arguments.length)return this.attr("class","");if(t=ne(e),t.length)for(;n=this[l++];)if(i=te(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=ee(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):xe(e)?this.each(function(n){Ee(this).toggleClass(e.call(this,n,te(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=Ee(this),a=ne(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=te(this),t&&Ve.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ve.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ee(te(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ot=/\r/g;Ee.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=xe(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Ee(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Ee.map(i,function(e){return null==e?"":e+""})),t=Ee.valHooks[this.type]||Ee.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Ee.valHooks[i.type]||Ee.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Ot,""):null==n?"":n)}}}),Ee.extend({valHooks:{option:{get:function(e){var t=Ee.find.attr(e,"value");return null!=t?t:ee(Ee.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(t=Ee(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Ee.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Ee.inArray(Ee.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Ee.each(["radio","checkbox"],function(){Ee.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Ee.inArray(Ee(e).val(),t)>-1}},we.checkOn||(Ee.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),we.focusin="onfocusin"in n;var Pt=/^(?:focusinfocus|focusoutblur)$/,Rt=function(e){e.stopPropagation()};Ee.extend(Ee.event,{trigger:function(e,t,r,i){var o,a,s,l,c,u,d,f,h=[r||ue],p=_e.call(e,"type")?e.type:e,g=_e.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=r=r||ue,3!==r.nodeType&&8!==r.nodeType&&!Pt.test(p+Ee.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[Ee.expando]?e:new Ee.Event(p,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:Ee.makeArray(t,[e]),d=Ee.event.special[p]||{},i||!d.trigger||d.trigger.apply(r,t)!==!1)){if(!i&&!d.noBubble&&!ke(r)){for(l=d.delegateType||p,Pt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||ue)&&h.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)f=a,e.type=o>1?l:d.bindType||p,u=(Ve.get(a,"events")||{})[e.type]&&Ve.get(a,"handle"),u&&u.apply(a,t),u=c&&a[c],u&&u.apply&&He(a)&&(e.result=u.apply(a,t),e.result===!1&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),t)!==!1||!He(r)||c&&xe(r[p])&&!ke(r)&&(s=r[c],s&&(r[c]=null),Ee.event.triggered=p,e.isPropagationStopped()&&f.addEventListener(p,Rt),r[p](),e.isPropagationStopped()&&f.removeEventListener(p,Rt),Ee.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=Ee.extend(new Ee.Event,n,{type:e,isSimulated:!0});Ee.event.trigger(r,null,t)}}),Ee.fn.extend({trigger:function(e,t){return this.each(function(){Ee.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Ee.event.trigger(e,t,n,!0)}}),we.focusin||Ee.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Ee.event.simulate(t,e.target,Ee.event.fix(e))};Ee.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Ve.access(r,t);i||r.addEventListener(e,n,!0),Ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ve.access(r,t)-1;i?Ve.access(r,t,i):(r.removeEventListener(e,n,!0),Ve.remove(r,t))}}});var It=n.location,Mt=Date.now(),Lt=/\?/;Ee.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Ee.error("Invalid XML: "+e),t};var Nt=/\[\]$/,jt=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;Ee.param=function(e,t){var n,r=[],i=function(e,t){var n=xe(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!Ee.isPlainObject(e))Ee.each(e,function(){i(this.name,this.value)});else for(n in e)re(n,e[n],t,i);return r.join("&")},Ee.fn.extend({serialize:function(){return Ee.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Ee.prop(this,"elements");return e?Ee.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Ee(this).is(":disabled")&&Bt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=Ee(this).val();return null==n?null:Array.isArray(n)?Ee.map(n,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}}):{name:t.name,value:n.replace(jt,"\r\n")}}).get()}});var Ut=/%20/g,zt=/#.*$/,qt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,Gt=/^\/\//,Yt={},Kt={},Xt="*/".concat("*"),Jt=ue.createElement("a");Jt.href=It.href,Ee.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It.href,type:"GET",isLocal:Vt.test(It.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Ee.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ae(ae(e,Ee.ajaxSettings),t):ae(Ee.ajaxSettings,e)},ajaxPrefilter:ie(Yt),ajaxTransport:ie(Kt),ajax:function(e,t){function r(e,t,r,s){var c,f,h,b,w,x=t;u||(u=!0,l&&n.clearTimeout(l),i=void 0,a=s||"",k.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(b=se(p,k,r)),b=le(p,b,k,c),c?(p.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(Ee.lastModified[o]=w),w=k.getResponseHeader("etag"),w&&(Ee.etag[o]=w)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=b.state,f=b.data,h=b.error,c=!h)):(h=x,!e&&x||(x="error",e<0&&(e=0))),k.status=e,k.statusText=(t||x)+"",c?v.resolveWith(g,[f,x,k]):v.rejectWith(g,[k,x,h]),k.statusCode(y),y=void 0,d&&m.trigger(c?"ajaxSuccess":"ajaxError",[k,p,c?f:h]),_.fireWith(g,[k,x]),d&&(m.trigger("ajaxComplete",[k,p]),--Ee.active||Ee.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,l,c,u,d,f,h,p=Ee.ajaxSetup({},t),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?Ee(g):Ee.event,v=Ee.Deferred(),_=Ee.Callbacks("once memory"),y=p.statusCode||{},b={},w={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ht.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||x;return i&&i.abort(t),r(0,t),this}};if(v.promise(k),p.url=((e||p.url||It.href)+"").replace(Gt,It.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(je)||[""],null==p.crossDomain){c=ue.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Jt.protocol+"//"+Jt.host!=c.protocol+"//"+c.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Ee.param(p.data,p.traditional)),oe(Yt,p,t,k),u)return k;d=Ee.event&&p.global,d&&0===Ee.active++&&Ee.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Wt.test(p.type),o=p.url.replace(zt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ut,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Lt.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(o=o.replace(qt,"$1"),h=(Lt.test(o)?"&":"?")+"_="+Mt++ +h),p.url=o+h),p.ifModified&&(Ee.lastModified[o]&&k.setRequestHeader("If-Modified-Since",Ee.lastModified[o]),Ee.etag[o]&&k.setRequestHeader("If-None-Match",Ee.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Xt+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)k.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(g,k,p)===!1||u))return k.abort();if(x="abort",_.add(p.complete),k.done(p.success),k.fail(p.error),i=oe(Kt,p,t,k)){if(k.readyState=1,d&&m.trigger("ajaxSend",[k,p]),u)return k;p.async&&p.timeout>0&&(l=n.setTimeout(function(){k.abort("timeout")},p.timeout));try{u=!1,i.send(b,r)}catch(e){if(u)throw e;r(-1,e)}}else r(-1,"No Transport");return k},getJSON:function(e,t,n){return Ee.get(e,t,n,"json")},getScript:function(e,t){return Ee.get(e,void 0,t,"script")}}),Ee.each(["get","post"],function(e,t){Ee[t]=function(e,n,r,i){return xe(n)&&(i=i||r,r=n,n=void 0),Ee.ajax(Ee.extend({url:e,type:t,dataType:i,data:n,success:r},Ee.isPlainObject(e)&&e))}}),Ee._evalUrl=function(e){return Ee.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Ee.fn.extend({wrapAll:function(e){var t;return this[0]&&(xe(e)&&(e=e.call(this[0])),t=Ee(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return xe(e)?this.each(function(t){Ee(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Ee(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=xe(e);return this.each(function(n){Ee(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Ee(this).replaceWith(this.childNodes)}),this}}),Ee.expr.pseudos.hidden=function(e){return!Ee.expr.pseudos.visible(e)},Ee.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Ee.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=Ee.ajaxSettings.xhr();we.cors=!!Qt&&"withCredentials"in Qt,we.ajax=Qt=!!Qt,Ee.ajaxTransport(function(e){var t,r;if(we.cors||Qt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),
e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Ee.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Ee.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Ee.globalEval(e),e}}}),Ee.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Ee.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Ee("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),ue.head.appendChild(t[0])},abort:function(){n&&n()}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;Ee.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||Ee.expando+"_"+Mt++;return this[e]=!0,e}}),Ee.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=e.jsonp!==!1&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=xe(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(tn,"$1"+i):e.jsonp!==!1&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||Ee.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?Ee(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,en.push(i)),a&&xe(o)&&o(a[0]),a=o=void 0}),"script"}),we.createHTMLDocument=function(){var e=ue.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Ee.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(we.createHTMLDocument?(t=ue.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=ue.location.href,t.head.appendChild(r)):t=ue),i=Pe.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=$([e],t,o),o&&o.length&&Ee(o).remove(),Ee.merge([],i.childNodes))},Ee.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ee(e.slice(s)),e=e.slice(0,s)),xe(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Ee.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Ee("<div>").append(Ee.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Ee.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Ee.fn[t]=function(e){return this.on(t,e)}}),Ee.expr.pseudos.animated=function(e){return Ee.grep(Ee.timers,function(t){return e===t.elem}).length},Ee.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c,u=Ee.css(e,"position"),d=Ee(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=Ee.css(e,"top"),l=Ee.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),xe(t)&&(t=t.call(e,n,Ee.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},Ee.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Ee.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===Ee.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Ee.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=Ee(e).offset(),i.top+=Ee.css(e,"borderTopWidth",!0),i.left+=Ee.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Ee.css(r,"marginTop",!0),left:t.left-i.left-Ee.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Ee.css(e,"position");)e=e.offsetParent;return e||at})}}),Ee.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Ee.fn[e]=function(r){return Ue(this,function(e,r,i){var o;return ke(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),Ee.each(["top","left"],function(e,t){Ee.cssHooks[t]=B(we.pixelPosition,function(e,n){if(n)return n=F(e,t),pt.test(n)?Ee(e).position()[t]+"px":n})}),Ee.each({Height:"height",Width:"width"},function(e,t){Ee.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Ee.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ue(this,function(t,n,i){var o;return ke(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?Ee.css(t,n,s):Ee.style(t,n,i,s)},t,a?i:void 0,a)}})}),Ee.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Ee.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Ee.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Ee.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),Ee.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),xe(e))return r=fe.call(arguments,2),i=function(){return e.apply(t||this,r.concat(fe.call(arguments)))},i.guid=e.guid=e.guid||Ee.guid++,i},Ee.holdReady=function(e){e?Ee.readyWait++:Ee.ready(!0)},Ee.isArray=Array.isArray,Ee.parseJSON=JSON.parse,Ee.nodeName=c,Ee.isFunction=xe,Ee.isWindow=ke,Ee.camelCase=_,Ee.type=s,Ee.now=Date.now,Ee.isNumeric=function(e){var t=Ee.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},r=[],i=function(){return Ee}.apply(t,r),!(void 0!==i&&(e.exports=i));var nn=n.jQuery,rn=n.$;return Ee.noConflict=function(e){return n.$===Ee&&(n.$=rn),e&&n.jQuery===Ee&&(n.jQuery=nn),Ee},o||(n.jQuery=n.$=Ee),Ee})},function(e,t,n){(function(e,r,i){var o;(function(){function i(e,t){return e.set(t[0],t[1]),e}function a(e,t){return e.add(t),e}function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function u(e,t){for(var n=null==e?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function d(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function f(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function h(e,t){var n=null==e?0:e.length;return!!n&&C(e,t,0)>-1}function p(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function g(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function m(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function v(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function _(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){return e.split("")}function w(e){return e.match(qt)||[]}function x(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function k(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function C(e,t,n){return t===t?J(e,t,n):k(e,E,n)}function S(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function E(e){return e!==e}function $(e,t){var n=null==e?0:e.length;return n?P(e,t)/n:Ne}function T(e){return function(t){return null==t?ie:t[e]}}function A(e){return function(t){return null==e?ie:e[t]}}function D(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function P(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ie&&(n=n===ie?o:n+o)}return n}function R(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function I(e,t){return g(t,function(t){return[t,e[t]]})}function M(e){return function(t){return e(t)}}function L(e,t){return g(t,function(t){return e[t]})}function N(e,t){return e.has(t)}function j(e,t){for(var n=-1,r=e.length;++n<r&&C(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length;n--&&C(t,e[n],0)>-1;);return n}function B(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function U(e){return"\\"+nr[e]}function z(e,t){return null==e?ie:e[t]}function q(e){return Gn.test(e)}function H(e){return Yn.test(e)}function V(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function G(e,t){return function(n){return e(t(n))}}function Y(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==de||(e[n]=de,o[i++]=n)}return o}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function X(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function J(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Z(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function Q(e){return q(e)?te(e):yr(e)}function ee(e){return q(e)?ne(e):b(e)}function te(e){for(var t=Vn.lastIndex=0;Vn.test(e);)++t;return t}function ne(e){return e.match(Vn)||[]}function re(e){return e.match(Wn)||[]}var ie,oe="4.17.4",ae=200,se="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",le="Expected a function",ce="__lodash_hash_undefined__",ue=500,de="__lodash_placeholder__",fe=1,he=2,pe=4,ge=1,me=2,ve=1,_e=2,ye=4,be=8,we=16,xe=32,ke=64,Ce=128,Se=256,Ee=512,$e=30,Te="...",Ae=800,De=16,Oe=1,Pe=2,Re=3,Ie=1/0,Me=9007199254740991,Le=1.7976931348623157e308,Ne=NaN,je=4294967295,Fe=je-1,Be=je>>>1,Ue=[["ary",Ce],["bind",ve],["bindKey",_e],["curry",be],["curryRight",we],["flip",Ee],["partial",xe],["partialRight",ke],["rearg",Se]],ze="[object Arguments]",qe="[object Array]",He="[object AsyncFunction]",Ve="[object Boolean]",We="[object Date]",Ge="[object DOMException]",Ye="[object Error]",Ke="[object Function]",Xe="[object GeneratorFunction]",Je="[object Map]",Ze="[object Number]",Qe="[object Null]",et="[object Object]",tt="[object Promise]",nt="[object Proxy]",rt="[object RegExp]",it="[object Set]",ot="[object String]",at="[object Symbol]",st="[object Undefined]",lt="[object WeakMap]",ct="[object WeakSet]",ut="[object ArrayBuffer]",dt="[object DataView]",ft="[object Float32Array]",ht="[object Float64Array]",pt="[object Int8Array]",gt="[object Int16Array]",mt="[object Int32Array]",vt="[object Uint8Array]",_t="[object Uint8ClampedArray]",yt="[object Uint16Array]",bt="[object Uint32Array]",wt=/\b__p \+= '';/g,xt=/\b(__p \+=) '' \+/g,kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Et=RegExp(Ct.source),$t=RegExp(St.source),Tt=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Dt=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Rt=/^\./,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Mt.source),Nt=/^\s+|\s+$/g,jt=/^\s+/,Ft=/\s+$/,Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,zt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ht=/\\(\\)?/g,Vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Kt=/^\[object .+?Constructor\]$/,Xt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,en=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",an=nn+rn+on,sn="\\u2700-\\u27bf",ln="a-z\\xdf-\\xf6\\xf8-\\xff",cn="\\xac\\xb1\\xd7\\xf7",un="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dn="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",gn=cn+un+dn+fn,mn="['â]",vn="["+tn+"]",_n="["+gn+"]",yn="["+an+"]",bn="\\d+",wn="["+sn+"]",xn="["+ln+"]",kn="[^"+tn+gn+bn+sn+ln+hn+"]",Cn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+yn+"|"+Cn+")",En="[^"+tn+"]",$n="(?:\\ud83c[\\udde6-\\uddff]){2}",Tn="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+hn+"]",Dn="\\u200d",On="(?:"+xn+"|"+kn+")",Pn="(?:"+An+"|"+kn+")",Rn="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",In="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",Mn=Sn+"?",Ln="["+pn+"]?",Nn="(?:"+Dn+"(?:"+[En,$n,Tn].join("|")+")"+Ln+Mn+")*",jn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Bn=Ln+Mn+Nn,Un="(?:"+[wn,$n,Tn].join("|")+")"+Bn,zn="(?:"+[En+yn+"?",yn,$n,Tn,vn].join("|")+")",qn=RegExp(mn,"g"),Hn=RegExp(yn,"g"),Vn=RegExp(Cn+"(?="+Cn+")|"+zn+Bn,"g"),Wn=RegExp([An+"?"+xn+"+"+Rn+"(?="+[_n,An,"$"].join("|")+")",Pn+"+"+In+"(?="+[_n,An+On,"$"].join("|")+")",An+"?"+On+"+"+Rn,An+"+"+In,Fn,jn,bn,Un].join("|"),"g"),Gn=RegExp("["+Dn+tn+an+pn+"]"),Yn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xn=-1,Jn={};Jn[ft]=Jn[ht]=Jn[pt]=Jn[gt]=Jn[mt]=Jn[vt]=Jn[_t]=Jn[yt]=Jn[bt]=!0,Jn[ze]=Jn[qe]=Jn[ut]=Jn[Ve]=Jn[dt]=Jn[We]=Jn[Ye]=Jn[Ke]=Jn[Je]=Jn[Ze]=Jn[et]=Jn[rt]=Jn[it]=Jn[ot]=Jn[lt]=!1;var Zn={};Zn[ze]=Zn[qe]=Zn[ut]=Zn[dt]=Zn[Ve]=Zn[We]=Zn[ft]=Zn[ht]=Zn[pt]=Zn[gt]=Zn[mt]=Zn[Je]=Zn[Ze]=Zn[et]=Zn[rt]=Zn[it]=Zn[ot]=Zn[at]=Zn[vt]=Zn[_t]=Zn[yt]=Zn[bt]=!0,Zn[Ye]=Zn[Ke]=Zn[lt]=!1;var Qn={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"},er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof e&&e&&e.Object===Object&&e,ar="object"==typeof self&&self&&self.Object===Object&&self,sr=or||ar||Function("return this")(),lr="object"==typeof t&&t&&!t.nodeType&&t,cr=lr&&"object"==typeof r&&r&&!r.nodeType&&r,ur=cr&&cr.exports===lr,dr=ur&&or.process,fr=function(){try{return dr&&dr.binding&&dr.binding("util")}catch(e){}}(),hr=fr&&fr.isArrayBuffer,pr=fr&&fr.isDate,gr=fr&&fr.isMap,mr=fr&&fr.isRegExp,vr=fr&&fr.isSet,_r=fr&&fr.isTypedArray,yr=T("length"),br=A(Qn),wr=A(er),xr=A(tr),kr=function e(t){function n(e){if(cl(e)&&!wf(e)&&!(e instanceof b)){if(e instanceof o)return e;if(bu.call(e,"__wrapped__"))return aa(e)}return new o(e)}function r(){}function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ie}function b(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=je,this.__views__=[]}function A(){var e=new b(this.__wrapped__);return e.__actions__=Bi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bi(this.__views__),e}function J(){if(this.__filtered__){var e=new b(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function te(){var e=this.__wrapped__.value(),t=this.__dir__,n=wf(e),r=t<0,i=n?e.length:0,o=Do(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,d=u.length,f=0,h=Xu(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return wi(e,this.__actions__);var p=[];e:for(;l--&&f<h;){c+=t;for(var g=-1,m=e[c];++g<d;){var v=u[g],_=v.iteratee,y=v.type,b=_(m);if(y==Pe)m=b;else if(!b){if(y==Oe)continue e;break e}}p[f++]=m}return p}function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qt(){this.__data__=ad?ad(null):{},this.size=0}function tn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function nn(e){var t=this.__data__;if(ad){var n=t[e];return n===ce?ie:n}return bu.call(t,e)?t[e]:ie}function rn(e){var t=this.__data__;return ad?t[e]!==ie:bu.call(t,e)}function on(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ad&&t===ie?ce:t,this}function an(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sn(){this.__data__=[],this.size=0}function ln(e){var t=this.__data__,n=Rn(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Iu.call(t,n,1),--this.size,!0}function cn(e){var t=this.__data__,n=Rn(t,e);return n<0?ie:t[n][1]}function un(e){return Rn(this.__data__,e)>-1}function dn(e,t){var n=this.__data__,r=Rn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hn(){this.size=0,this.__data__={hash:new ne,map:new(nd||an),string:new ne}}function pn(e){var t=Eo(this,e).delete(e);return this.size-=t?1:0,t}function gn(e){return Eo(this,e).get(e)}function mn(e){return Eo(this,e).has(e)}function vn(e,t){var n=Eo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function _n(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new fn;++t<n;)this.add(e[t])}function yn(e){return this.__data__.set(e,ce),this}function bn(e){return this.__data__.has(e)}function wn(e){var t=this.__data__=new an(e);this.size=t.size}function xn(){this.__data__=new an,this.size=0}function kn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Cn(e){return this.__data__.get(e)}function Sn(e){return this.__data__.has(e)}function En(e,t){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!nd||r.length<ae-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new fn(r)}return n.set(e,t),this.size=n.size,this}function $n(e,t){var n=wf(e),r=!n&&bf(e),i=!n&&!r&&kf(e),o=!n&&!r&&!i&&Tf(e),a=n||r||i||o,s=a?R(e.length,hu):[],l=s.length;for(var c in e)!t&&!bu.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jo(c,l))||s.push(c);return s}function Tn(e){var t=e.length;return t?e[ni(0,t-1)]:ie}function An(e,t){return na(Bi(e),Fn(t,0,e.length))}function Dn(e){return na(Bi(e))}function On(e,t,n){(n===ie||Ks(e[t],n))&&(n!==ie||t in e)||Nn(e,t,n)}function Pn(e,t,n){var r=e[t];bu.call(e,t)&&Ks(r,n)&&(n!==ie||t in e)||Nn(e,t,n)}function Rn(e,t){for(var n=e.length;n--;)if(Ks(e[n][0],t))return n;return-1}function In(e,t,n,r){return _d(e,function(e,i,o){t(r,e,n(e),o)}),r}function Mn(e,t){return e&&Ui(t,Hl(t),e)}function Ln(e,t){return e&&Ui(t,Vl(t),e)}function Nn(e,t,n){"__proto__"==t&&ju?ju(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function jn(e,t){for(var n=-1,r=t.length,i=au(r),o=null==e;++n<r;)i[n]=o?ie:Ul(e,t[n]);return i}function Fn(e,t,n){return e===e&&(n!==ie&&(e=e<=n?e:n),t!==ie&&(e=e>=t?e:t)),e}function Bn(e,t,n,r,i,o){var a,s=t&fe,l=t&he,u=t&pe;if(n&&(a=i?n(e,r,i,o):n(e)),a!==ie)return a;if(!ll(e))return e;var d=wf(e);if(d){if(a=Ro(e),!s)return Bi(e,a)}else{var f=Dd(e),h=f==Ke||f==Xe;if(kf(e))return Ti(e,s);if(f==et||f==ze||h&&!i){if(a=l||h?{}:Io(e),!s)return l?qi(e,Ln(a,e)):zi(e,Mn(a,e))}else{if(!Zn[f])return i?e:{};a=Mo(e,f,Bn,s)}}o||(o=new wn);var p=o.get(e);if(p)return p;o.set(e,a);var g=u?l?xo:wo:l?Vl:Hl,m=d?ie:g(e);return c(m||e,function(r,i){m&&(i=r,r=e[i]),Pn(a,i,Bn(r,t,n,i,e,o))}),a}function Un(e){var t=Hl(e);return function(n){return zn(n,e,t)}}function zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=du(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===ie&&!(i in e)||!o(a))return!1}return!0}function Vn(e,t,n){if("function"!=typeof e)throw new pu(le);return Rd(function(){e.apply(ie,n)},t)}function Wn(e,t,n,r){var i=-1,o=h,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=g(t,M(n))),r?(o=p,a=!1):t.length>=ae&&(o=N,a=!1,t=new _n(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d===d){for(var f=c;f--;)if(t[f]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}function Gn(e,t){var n=!0;return _d(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Yn(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===ie?a===a&&!bl(a):n(a,s)))var s=a,l=o}return l}function Qn(e,t,n,r){var i=e.length;for(n=El(n),n<0&&(n=-n>i?0:i+n),r=r===ie||r>i?i:El(r),r<0&&(r+=i),r=n>r?0:$l(r);n<r;)e[n++]=t;return e}function er(e,t){var n=[];return _d(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function tr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=No),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?tr(s,t-1,n,r,i):m(i,s):r||(i[i.length]=s)}return i}function nr(e,t){return e&&bd(e,t,Hl)}function or(e,t){return e&&wd(e,t,Hl)}function ar(e,t){return f(t,function(t){return ol(e[t])})}function lr(e,t){t=Ei(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[ra(t[n++])];return n&&n==r?e:ie}function cr(e,t,n){var r=t(e);return wf(e)?r:m(r,n(e))}function dr(e){return null==e?e===ie?st:Qe:Nu&&Nu in du(e)?Ao(e):Xo(e)}function fr(e,t){return e>t}function yr(e,t){return null!=e&&bu.call(e,t)}function kr(e,t){return null!=e&&t in du(e)}function Sr(e,t,n){return e>=Xu(t,n)&&e<Ku(t,n)}function Er(e,t,n){for(var r=n?p:h,i=e[0].length,o=e.length,a=o,s=au(o),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=g(u,M(t))),l=Xu(u.length,l),s[a]=!n&&(t||i>=120&&u.length>=120)?new _n(a&&u):ie}u=e[0];var d=-1,f=s[0];e:for(;++d<i&&c.length<l;){var m=u[d],v=t?t(m):m;if(m=n||0!==m?m:0,!(f?N(f,v):r(c,v,n))){for(a=o;--a;){var _=s[a];if(!(_?N(_,v):r(e[a],v,n)))continue e}f&&f.push(v),c.push(m)}}return c}function $r(e,t,n,r){return nr(e,function(e,i,o){t(r,n(e),i,o)}),r}function Tr(e,t,n){t=Ei(t,e),e=Zo(e,t);var r=null==e?e:e[ra(Sa(t))];return null==r?ie:s(r,e,n)}function Ar(e){return cl(e)&&dr(e)==ze}function Dr(e){return cl(e)&&dr(e)==ut}function Or(e){return cl(e)&&dr(e)==We}function Pr(e,t,n,r,i){return e===t||(null==e||null==t||!cl(e)&&!cl(t)?e!==e&&t!==t:Rr(e,t,n,r,Pr,i))}function Rr(e,t,n,r,i,o){var a=wf(e),s=wf(t),l=a?qe:Dd(e),c=s?qe:Dd(t);l=l==ze?et:l,c=c==ze?et:c;var u=l==et,d=c==et,f=l==c;if(f&&kf(e)){if(!kf(t))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new wn),a||Tf(e)?vo(e,t,n,r,i,o):_o(e,t,l,n,r,i,o);if(!(n&ge)){var h=u&&bu.call(e,"__wrapped__"),p=d&&bu.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return o||(o=new wn),i(g,m,n,r,o)}}return!!f&&(o||(o=new wn),yo(e,t,n,r,i,o))}function Ir(e){return cl(e)&&Dd(e)==Je}function Mr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=du(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(c===ie&&!(l in e))return!1}else{var d=new wn;if(r)var f=r(c,u,l,e,t,d);if(!(f===ie?Pr(u,c,ge|me,r,d):f))return!1}}return!0}function Lr(e){if(!ll(e)||qo(e))return!1;var t=ol(e)?Eu:Kt;return t.test(ia(e))}function Nr(e){return cl(e)&&dr(e)==rt}function jr(e){return cl(e)&&Dd(e)==it}function Fr(e){return cl(e)&&sl(e.length)&&!!Jn[dr(e)]}function Br(e){return"function"==typeof e?e:null==e?Ic:"object"==typeof e?wf(e)?Wr(e[0],e[1]):Vr(e):zc(e)}function Ur(e){if(!Ho(e))return Yu(e);var t=[];for(var n in du(e))bu.call(e,n)&&"constructor"!=n&&t.push(n);return t}function zr(e){if(!ll(e))return Ko(e);var t=Ho(e),n=[];for(var r in e)("constructor"!=r||!t&&bu.call(e,r))&&n.push(r);return n}function qr(e,t){return e<t}function Hr(e,t){var n=-1,r=Xs(e)?au(e.length):[];return _d(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Vr(e){var t=$o(e);return 1==t.length&&t[0][2]?Wo(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function Wr(e,t){return Bo(e)&&Vo(t)?Wo(ra(e),t):function(n){var r=Ul(n,e);return r===ie&&r===t?ql(n,e):Pr(t,r,ge|me)}}function Gr(e,t,n,r,i){e!==t&&bd(t,function(o,a){if(ll(o))i||(i=new wn),Yr(e,t,a,n,Gr,r,i);else{var s=r?r(e[a],o,a+"",e,t,i):ie;s===ie&&(s=o),On(e,a,s)}},Vl)}function Yr(e,t,n,r,i,o,a){var s=e[n],l=t[n],c=a.get(l);if(c)return void On(e,n,c);var u=o?o(s,l,n+"",e,t,a):ie,d=u===ie;if(d){var f=wf(l),h=!f&&kf(l),p=!f&&!h&&Tf(l);u=l,f||h||p?wf(s)?u=s:Js(s)?u=Bi(s):h?(d=!1,u=Ti(l,!0)):p?(d=!1,u=Mi(l,!0)):u=[]:vl(l)||bf(l)?(u=s,bf(s)?u=Al(s):(!ll(s)||r&&ol(s))&&(u=Io(l))):d=!1}d&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),On(e,n,u)}function Kr(e,t){var n=e.length;if(n)return t+=t<0?n:0,jo(t,n)?e[t]:ie}function Xr(e,t,n){var r=-1;t=g(t.length?t:[Ic],M(So()));var i=Hr(e,function(e,n,i){var o=g(t,function(t){return t(e)});return{criteria:o,index:++r,value:e}});return O(i,function(e,t){return Ni(e,t,n)})}function Jr(e,t){return Zr(e,t,function(t,n){return ql(e,n)})}function Zr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=lr(e,a);n(s,a)&&li(o,Ei(a,e),s)}return o}function Qr(e){return function(t){return lr(t,e)}}function ei(e,t,n,r){var i=r?S:C,o=-1,a=t.length,s=e;for(e===t&&(t=Bi(t)),n&&(s=g(e,M(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Iu.call(s,l,1),Iu.call(e,l,1);return e}function ti(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;jo(i)?Iu.call(e,i,1):_i(e,i)}}return e}function ni(e,t){return e+qu(Qu()*(t-e+1))}function ri(e,t,n,r){for(var i=-1,o=Ku(zu((t-e)/(n||1)),0),a=au(o);o--;)a[r?o:++i]=e,e+=n;return a}function ii(e,t){var n="";if(!e||t<1||t>Me)return n;do t%2&&(n+=e),t=qu(t/2),t&&(e+=e);while(t);return n}function oi(e,t){return Id(Jo(e,t,Ic),e+"")}function ai(e){return Tn(rc(e))}function si(e,t){var n=rc(e);return na(n,Fn(t,0,n.length))}function li(e,t,n,r){if(!ll(e))return e;t=Ei(t,e);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var l=ra(t[i]),c=n;if(i!=a){var u=s[l];c=r?r(u,l,s):ie,c===ie&&(c=ll(u)?u:jo(t[i+1])?[]:{})}Pn(s,l,c),s=s[l]}return e}function ci(e){return na(rc(e))}function ui(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=au(i);++r<i;)o[r]=e[r+t];return o}function di(e,t){var n;return _d(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function fi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Be){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!bl(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return hi(e,t,Ic,n)}function hi(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,l=bl(t),c=t===ie;i<o;){var u=qu((i+o)/2),d=n(e[u]),f=d!==ie,h=null===d,p=d===d,g=bl(d);if(a)var m=r||p;else m=c?p&&(r||f):s?p&&f&&(r||!h):l?p&&f&&!h&&(r||!g):!h&&!g&&(r?d<=t:d<t);m?i=u+1:o=u}return Xu(o,Fe)}function pi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ks(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function gi(e){return"number"==typeof e?e:bl(e)?Ne:+e}function mi(e){if("string"==typeof e)return e;if(wf(e))return g(e,mi)+"";if(bl(e))return md?md.call(e):"";var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function vi(e,t,n){var r=-1,i=h,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=p;else if(o>=ae){var c=t?null:Ed(e);if(c)return K(c);a=!1,i=N,l=new _n}else l=t?[]:s;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function _i(e,t){return t=Ei(t,e),e=Zo(e,t),null==e||delete e[ra(Sa(t))]}function yi(e,t,n,r){return li(e,t,n(lr(e,t)),r)}function bi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ui(e,r?0:o,r?o+1:i):ui(e,r?o+1:0,r?i:o)}function wi(e,t){var n=e;return n instanceof b&&(n=n.value()),v(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},n)}function xi(e,t,n){var r=e.length;if(r<2)return r?vi(e[0]):[];for(var i=-1,o=au(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=Wn(o[i]||a,e[s],t,n));return vi(tr(o,1),t,n)}function ki(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:ie;n(a,e[r],s)}return a}function Ci(e){return Js(e)?e:[]}function Si(e){return"function"==typeof e?e:Ic}function Ei(e,t){return wf(e)?e:Bo(e,t)?[e]:Md(Ol(e))}function $i(e,t,n){var r=e.length;return n=n===ie?r:n,!t&&n>=r?e:ui(e,t,n)}function Ti(e,t){if(t)return e.slice();var n=e.length,r=Du?Du(n):new e.constructor(n);return e.copy(r),r}function Ai(e){var t=new e.constructor(e.byteLength);return new Au(t).set(new Au(e)),t}function Di(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Oi(e,t,n){var r=t?n(W(e),fe):W(e);return v(r,i,new e.constructor)}function Pi(e){var t=new e.constructor(e.source,Wt.exec(e));return t.lastIndex=e.lastIndex,t}function Ri(e,t,n){var r=t?n(K(e),fe):K(e);return v(r,a,new e.constructor)}function Ii(e){return gd?du(gd.call(e)):{}}function Mi(e,t){var n=t?Ai(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Li(e,t){if(e!==t){var n=e!==ie,r=null===e,i=e===e,o=bl(e),a=t!==ie,s=null===t,l=t===t,c=bl(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1;
}return 0}function Ni(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=Li(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*("desc"==c?-1:1)}}return e.index-t.index}function ji(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,c=Ku(o-a,0),u=au(l+c),d=!r;++s<l;)u[s]=t[s];for(;++i<a;)(d||i<o)&&(u[n[i]]=e[i]);for(;c--;)u[s++]=e[i++];return u}function Fi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,c=t.length,u=Ku(o-s,0),d=au(u+c),f=!r;++i<u;)d[i]=e[i];for(var h=i;++l<c;)d[h+l]=t[l];for(;++a<s;)(f||i<o)&&(d[h+n[a]]=e[i++]);return d}function Bi(e,t){var n=-1,r=e.length;for(t||(t=au(r));++n<r;)t[n]=e[n];return t}function Ui(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):ie;l===ie&&(l=e[s]),i?Nn(n,s,l):Pn(n,s,l)}return n}function zi(e,t){return Ui(e,Td(e),t)}function qi(e,t){return Ui(e,Ad(e),t)}function Hi(e,t){return function(n,r){var i=wf(n)?l:In,o=t?t():{};return i(n,e,So(r,2),o)}}function Vi(e){return oi(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ie,a=i>2?n[2]:ie;for(o=e.length>3&&"function"==typeof o?(i--,o):ie,a&&Fo(n[0],n[1],a)&&(o=i<3?ie:o,i=1),t=du(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function Wi(e,t){return function(n,r){if(null==n)return n;if(!Xs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=du(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Gi(e){return function(t,n,r){for(var i=-1,o=du(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(n(o[l],l,o)===!1)break}return t}}function Yi(e,t,n){function r(){var t=this&&this!==sr&&this instanceof r?o:e;return t.apply(i?n:this,arguments)}var i=t&ve,o=Ji(e);return r}function Ki(e){return function(t){t=Ol(t);var n=q(t)?ee(t):ie,r=n?n[0]:t.charAt(0),i=n?$i(n,1).join(""):t.slice(1);return r[e]()+i}}function Xi(e){return function(t){return v(Ac(cc(t).replace(qn,"")),e,"")}}function Ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=vd(e.prototype),r=e.apply(n,t);return ll(r)?r:n}}function Zi(e,t,n){function r(){for(var o=arguments.length,a=au(o),l=o,c=Co(r);l--;)a[l]=arguments[l];var u=o<3&&a[0]!==c&&a[o-1]!==c?[]:Y(a,c);if(o-=u.length,o<n)return co(e,t,to,r.placeholder,ie,a,u,ie,ie,n-o);var d=this&&this!==sr&&this instanceof r?i:e;return s(d,this,a)}var i=Ji(e);return r}function Qi(e){return function(t,n,r){var i=du(t);if(!Xs(t)){var o=So(n,3);t=Hl(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:ie}}function eo(e){return bo(function(t){var n=t.length,r=n,i=o.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new pu(le);if(i&&!s&&"wrapper"==ko(a))var s=new o([],!0)}for(r=s?r:n;++r<n;){a=t[r];var l=ko(a),c="wrapper"==l?$d(a):ie;s=c&&zo(c[0])&&c[1]==(Ce|be|xe|Se)&&!c[4].length&&1==c[9]?s[ko(c[0])].apply(s,c[3]):1==a.length&&zo(a)?s[l]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&wf(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function to(e,t,n,r,i,o,a,s,l,c){function u(){for(var v=arguments.length,_=au(v),y=v;y--;)_[y]=arguments[y];if(p)var b=Co(u),w=B(_,b);if(r&&(_=ji(_,r,i,p)),o&&(_=Fi(_,o,a,p)),v-=w,p&&v<c){var x=Y(_,b);return co(e,t,to,u.placeholder,n,_,x,s,l,c-v)}var k=f?n:this,C=h?k[e]:e;return v=_.length,s?_=Qo(_,s):g&&v>1&&_.reverse(),d&&l<v&&(_.length=l),this&&this!==sr&&this instanceof u&&(C=m||Ji(C)),C.apply(k,_)}var d=t&Ce,f=t&ve,h=t&_e,p=t&(be|we),g=t&Ee,m=h?ie:Ji(e);return u}function no(e,t){return function(n,r){return $r(n,e,t(r),{})}}function ro(e,t){return function(n,r){var i;if(n===ie&&r===ie)return t;if(n!==ie&&(i=n),r!==ie){if(i===ie)return r;"string"==typeof n||"string"==typeof r?(n=mi(n),r=mi(r)):(n=gi(n),r=gi(r)),i=e(n,r)}return i}}function io(e){return bo(function(t){return t=g(t,M(So())),oi(function(n){var r=this;return e(t,function(e){return s(e,r,n)})})})}function oo(e,t){t=t===ie?" ":mi(t);var n=t.length;if(n<2)return n?ii(t,e):t;var r=ii(t,zu(e/Q(t)));return q(t)?$i(ee(r),0,e).join(""):r.slice(0,e)}function ao(e,t,n,r){function i(){for(var t=-1,l=arguments.length,c=-1,u=r.length,d=au(u+l),f=this&&this!==sr&&this instanceof i?a:e;++c<u;)d[c]=r[c];for(;l--;)d[c++]=arguments[++t];return s(f,o?n:this,d)}var o=t&ve,a=Ji(e);return i}function so(e){return function(t,n,r){return r&&"number"!=typeof r&&Fo(t,n,r)&&(n=r=ie),t=Sl(t),n===ie?(n=t,t=0):n=Sl(n),r=r===ie?t<n?1:-1:Sl(r),ri(t,n,r,e)}}function lo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Tl(t),n=Tl(n)),e(t,n)}}function co(e,t,n,r,i,o,a,s,l,c){var u=t&be,d=u?a:ie,f=u?ie:a,h=u?o:ie,p=u?ie:o;t|=u?xe:ke,t&=~(u?ke:xe),t&ye||(t&=~(ve|_e));var g=[e,t,i,h,d,p,f,s,l,c],m=n.apply(ie,g);return zo(e)&&Pd(m,g),m.placeholder=r,ea(m,e,t)}function uo(e){var t=uu[e];return function(e,n){if(e=Tl(e),n=null==n?0:Xu(El(n),292)){var r=(Ol(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(Ol(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function fo(e){return function(t){var n=Dd(t);return n==Je?W(t):n==it?X(t):I(t,e(t))}}function ho(e,t,n,r,i,o,a,s){var l=t&_e;if(!l&&"function"!=typeof e)throw new pu(le);var c=r?r.length:0;if(c||(t&=~(xe|ke),r=i=ie),a=a===ie?a:Ku(El(a),0),s=s===ie?s:El(s),c-=i?i.length:0,t&ke){var u=r,d=i;r=i=ie}var f=l?ie:$d(e),h=[e,t,n,r,i,u,d,o,a,s];if(f&&Yo(h,f),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===ie?l?0:e.length:Ku(h[9]-c,0),!s&&t&(be|we)&&(t&=~(be|we)),t&&t!=ve)p=t==be||t==we?Zi(e,t,s):t!=xe&&t!=(ve|xe)||i.length?to.apply(ie,h):ao(e,t,n,r);else var p=Yi(e,t,n);var g=f?xd:Pd;return ea(g(p,h),e,t)}function po(e,t,n,r){return e===ie||Ks(e,vu[n])&&!bu.call(r,n)?t:e}function go(e,t,n,r,i,o){return ll(e)&&ll(t)&&(o.set(t,e),Gr(e,t,ie,go,o),o.delete(t)),e}function mo(e){return vl(e)?ie:e}function vo(e,t,n,r,i,o){var a=n&ge,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,d=!0,f=n&me?new _n:ie;for(o.set(e,t),o.set(t,e);++u<s;){var h=e[u],p=t[u];if(r)var g=a?r(p,h,u,t,e,o):r(h,p,u,e,t,o);if(g!==ie){if(g)continue;d=!1;break}if(f){if(!y(t,function(e,t){if(!N(f,t)&&(h===e||i(h,e,n,r,o)))return f.push(t)})){d=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function _o(e,t,n,r,i,o,a){switch(n){case dt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!o(new Au(e),new Au(t)));case Ve:case We:case Ze:return Ks(+e,+t);case Ye:return e.name==t.name&&e.message==t.message;case rt:case ot:return e==t+"";case Je:var s=W;case it:var l=r&ge;if(s||(s=K),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=me,a.set(e,t);var u=vo(s(e),s(t),r,i,o,a);return a.delete(e),u;case at:if(gd)return gd.call(e)==gd.call(t)}return!1}function yo(e,t,n,r,i,o){var a=n&ge,s=wo(e),l=s.length,c=wo(t),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=s[d];if(!(a?f in t:bu.call(t,f)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var g=a;++d<l;){f=s[d];var m=e[f],v=t[f];if(r)var _=a?r(v,m,f,t,e,o):r(m,v,f,e,t,o);if(!(_===ie?m===v||i(m,v,n,r,o):_)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(e),o.delete(t),p}function bo(e){return Id(Jo(e,ie,va),e+"")}function wo(e){return cr(e,Hl,Td)}function xo(e){return cr(e,Vl,Ad)}function ko(e){for(var t=e.name+"",n=ld[t],r=bu.call(ld,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Co(e){var t=bu.call(n,"placeholder")?n:e;return t.placeholder}function So(){var e=n.iteratee||Mc;return e=e===Mc?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function Eo(e,t){var n=e.__data__;return Uo(t)?n["string"==typeof t?"string":"hash"]:n.map}function $o(e){for(var t=Hl(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Vo(i)]}return t}function To(e,t){var n=z(e,t);return Lr(n)?n:ie}function Ao(e){var t=bu.call(e,Nu),n=e[Nu];try{e[Nu]=ie;var r=!0}catch(e){}var i=ku.call(e);return r&&(t?e[Nu]=n:delete e[Nu]),i}function Do(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Xu(t,e+a);break;case"takeRight":e=Ku(e,t-a)}}return{start:e,end:t}}function Oo(e){var t=e.match(Ut);return t?t[1].split(zt):[]}function Po(e,t,n){t=Ei(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=ra(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=null==e?0:e.length,!!i&&sl(i)&&jo(a,i)&&(wf(e)||bf(e)))}function Ro(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&bu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Io(e){return"function"!=typeof e.constructor||Ho(e)?{}:vd(Ou(e))}function Mo(e,t,n,r){var i=e.constructor;switch(t){case ut:return Ai(e);case Ve:case We:return new i(+e);case dt:return Di(e,r);case ft:case ht:case pt:case gt:case mt:case vt:case _t:case yt:case bt:return Mi(e,r);case Je:return Oi(e,r,n);case Ze:case ot:return new i(e);case rt:return Pi(e);case it:return Ri(e,r,n);case at:return Ii(e)}}function Lo(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Bt,"{\n/* [wrapped with "+t+"] */\n")}function No(e){return wf(e)||bf(e)||!!(Mu&&e&&e[Mu])}function jo(e,t){return t=null==t?Me:t,!!t&&("number"==typeof e||Jt.test(e))&&e>-1&&e%1==0&&e<t}function Fo(e,t,n){if(!ll(n))return!1;var r=typeof t;return!!("number"==r?Xs(n)&&jo(t,n.length):"string"==r&&t in n)&&Ks(n[t],e)}function Bo(e,t){if(wf(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!bl(e))||(Pt.test(e)||!Ot.test(e)||null!=t&&e in du(t))}function Uo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function zo(e){var t=ko(e),r=n[t];if("function"!=typeof r||!(t in b.prototype))return!1;if(e===r)return!0;var i=$d(r);return!!i&&e===i[0]}function qo(e){return!!xu&&xu in e}function Ho(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||vu;return e===n}function Vo(e){return e===e&&!ll(e)}function Wo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ie||e in du(n)))}}function Go(e){var t=Ms(e,function(e){return n.size===ue&&n.clear(),e}),n=t.cache;return t}function Yo(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ve|_e|Ce),a=r==Ce&&n==be||r==Ce&&n==Se&&e[7].length<=t[8]||r==(Ce|Se)&&t[7].length<=t[8]&&n==be;if(!o&&!a)return e;r&ve&&(e[2]=t[2],i|=n&ve?0:ye);var s=t[3];if(s){var l=e[3];e[3]=l?ji(l,s,t[4]):s,e[4]=l?Y(e[3],de):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Fi(l,s,t[6]):s,e[6]=l?Y(e[5],de):t[6]),s=t[7],s&&(e[7]=s),r&Ce&&(e[8]=null==e[8]?t[8]:Xu(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Ko(e){var t=[];if(null!=e)for(var n in du(e))t.push(n);return t}function Xo(e){return ku.call(e)}function Jo(e,t,n){return t=Ku(t===ie?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ku(r.length-t,0),a=au(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=au(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),s(e,this,l)}}function Zo(e,t){return t.length<2?e:lr(e,ui(t,0,-1))}function Qo(e,t){for(var n=e.length,r=Xu(t.length,n),i=Bi(e);r--;){var o=t[r];e[r]=jo(o,n)?i[o]:ie}return e}function ea(e,t,n){var r=t+"";return Id(e,Lo(r,oa(Oo(r),n)))}function ta(e){var t=0,n=0;return function(){var r=Ju(),i=De-(r-n);if(n=r,i>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(ie,arguments)}}function na(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ie?r:t;++n<t;){var o=ni(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function ra(e){if("string"==typeof e||bl(e))return e;var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function ia(e){if(null!=e){try{return yu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function oa(e,t){return c(Ue,function(n){var r="_."+n[0];t&n[1]&&!h(e,r)&&e.push(r)}),e.sort()}function aa(e){if(e instanceof b)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=Bi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function sa(e,t,n){t=(n?Fo(e,t,n):t===ie)?1:Ku(El(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=au(zu(r/t));i<r;)a[o++]=ui(e,i,i+=t);return a}function la(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function ca(){var e=arguments.length;if(!e)return[];for(var t=au(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return m(wf(n)?Bi(n):[n],tr(t,1))}function ua(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:El(t),ui(e,t<0?0:t,r)):[]}function da(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:El(t),t=r-t,ui(e,0,t<0?0:t)):[]}function fa(e,t){return e&&e.length?bi(e,So(t,3),!0,!0):[]}function ha(e,t){return e&&e.length?bi(e,So(t,3),!0):[]}function pa(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Fo(e,t,n)&&(n=0,r=i),Qn(e,t,n,r)):[]}function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:El(n);return i<0&&(i=Ku(r+i,0)),k(e,So(t,3),i)}function ma(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ie&&(i=El(n),i=n<0?Ku(r+i,0):Xu(i,r-1)),k(e,So(t,3),i,!0)}function va(e){var t=null==e?0:e.length;return t?tr(e,1):[]}function _a(e){var t=null==e?0:e.length;return t?tr(e,Ie):[]}function ya(e,t){var n=null==e?0:e.length;return n?(t=t===ie?1:El(t),tr(e,t)):[]}function ba(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function wa(e){return e&&e.length?e[0]:ie}function xa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:El(n);return i<0&&(i=Ku(r+i,0)),C(e,t,i)}function ka(e){var t=null==e?0:e.length;return t?ui(e,0,-1):[]}function Ca(e,t){return null==e?"":Gu.call(e,t)}function Sa(e){var t=null==e?0:e.length;return t?e[t-1]:ie}function Ea(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ie&&(i=El(n),i=i<0?Ku(r+i,0):Xu(i,r-1)),t===t?Z(e,t,i):k(e,E,i,!0)}function $a(e,t){return e&&e.length?Kr(e,El(t)):ie}function Ta(e,t){return e&&e.length&&t&&t.length?ei(e,t):e}function Aa(e,t,n){return e&&e.length&&t&&t.length?ei(e,t,So(n,2)):e}function Da(e,t,n){return e&&e.length&&t&&t.length?ei(e,t,ie,n):e}function Oa(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=So(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return ti(e,i),n}function Pa(e){return null==e?e:ed.call(e)}function Ra(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Fo(e,t,n)?(t=0,n=r):(t=null==t?0:El(t),n=n===ie?r:El(n)),ui(e,t,n)):[]}function Ia(e,t){return fi(e,t)}function Ma(e,t,n){return hi(e,t,So(n,2))}function La(e,t){var n=null==e?0:e.length;if(n){var r=fi(e,t);if(r<n&&Ks(e[r],t))return r}return-1}function Na(e,t){return fi(e,t,!0)}function ja(e,t,n){return hi(e,t,So(n,2),!0)}function Fa(e,t){var n=null==e?0:e.length;if(n){var r=fi(e,t,!0)-1;if(Ks(e[r],t))return r}return-1}function Ba(e){return e&&e.length?pi(e):[]}function Ua(e,t){return e&&e.length?pi(e,So(t,2)):[]}function za(e){var t=null==e?0:e.length;return t?ui(e,1,t):[]}function qa(e,t,n){return e&&e.length?(t=n||t===ie?1:El(t),ui(e,0,t<0?0:t)):[]}function Ha(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:El(t),t=r-t,ui(e,t<0?0:t,r)):[]}function Va(e,t){return e&&e.length?bi(e,So(t,3),!1,!0):[]}function Wa(e,t){return e&&e.length?bi(e,So(t,3)):[]}function Ga(e){return e&&e.length?vi(e):[]}function Ya(e,t){return e&&e.length?vi(e,So(t,2)):[]}function Ka(e,t){return t="function"==typeof t?t:ie,e&&e.length?vi(e,ie,t):[]}function Xa(e){if(!e||!e.length)return[];var t=0;return e=f(e,function(e){if(Js(e))return t=Ku(e.length,t),!0}),R(t,function(t){return g(e,T(t))})}function Ja(e,t){if(!e||!e.length)return[];var n=Xa(e);return null==t?n:g(n,function(e){return s(t,ie,e)})}function Za(e,t){return ki(e||[],t||[],Pn)}function Qa(e,t){return ki(e||[],t||[],li)}function es(e){var t=n(e);return t.__chain__=!0,t}function ts(e,t){return t(e),e}function ns(e,t){return t(e)}function rs(){return es(this)}function is(){return new o(this.value(),this.__chain__)}function os(){this.__values__===ie&&(this.__values__=Cl(this.value()));var e=this.__index__>=this.__values__.length,t=e?ie:this.__values__[this.__index__++];return{done:e,value:t}}function as(){return this}function ss(e){for(var t,n=this;n instanceof r;){var i=aa(n);i.__index__=0,i.__values__=ie,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function ls(){var e=this.__wrapped__;if(e instanceof b){var t=e;return this.__actions__.length&&(t=new b(this)),t=t.reverse(),t.__actions__.push({func:ns,args:[Pa],thisArg:ie}),new o(t,this.__chain__)}return this.thru(Pa)}function cs(){return wi(this.__wrapped__,this.__actions__)}function us(e,t,n){var r=wf(e)?d:Gn;return n&&Fo(e,t,n)&&(t=ie),r(e,So(t,3))}function ds(e,t){var n=wf(e)?f:er;return n(e,So(t,3))}function fs(e,t){return tr(_s(e,t),1)}function hs(e,t){return tr(_s(e,t),Ie)}function ps(e,t,n){return n=n===ie?1:El(n),tr(_s(e,t),n)}function gs(e,t){var n=wf(e)?c:_d;return n(e,So(t,3))}function ms(e,t){var n=wf(e)?u:yd;return n(e,So(t,3))}function vs(e,t,n,r){e=Xs(e)?e:rc(e),n=n&&!r?El(n):0;var i=e.length;return n<0&&(n=Ku(i+n,0)),yl(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&C(e,t,n)>-1}function _s(e,t){var n=wf(e)?g:Hr;return n(e,So(t,3))}function ys(e,t,n,r){return null==e?[]:(wf(t)||(t=null==t?[]:[t]),n=r?ie:n,wf(n)||(n=null==n?[]:[n]),Xr(e,t,n))}function bs(e,t,n){var r=wf(e)?v:D,i=arguments.length<3;return r(e,So(t,4),n,i,_d)}function ws(e,t,n){var r=wf(e)?_:D,i=arguments.length<3;return r(e,So(t,4),n,i,yd)}function xs(e,t){var n=wf(e)?f:er;return n(e,Ls(So(t,3)))}function ks(e){var t=wf(e)?Tn:ai;return t(e)}function Cs(e,t,n){t=(n?Fo(e,t,n):t===ie)?1:El(t);var r=wf(e)?An:si;return r(e,t)}function Ss(e){var t=wf(e)?Dn:ci;return t(e)}function Es(e){if(null==e)return 0;if(Xs(e))return yl(e)?Q(e):e.length;var t=Dd(e);return t==Je||t==it?e.size:Ur(e).length}function $s(e,t,n){var r=wf(e)?y:di;return n&&Fo(e,t,n)&&(t=ie),r(e,So(t,3))}function Ts(e,t){if("function"!=typeof t)throw new pu(le);return e=El(e),function(){if(--e<1)return t.apply(this,arguments)}}function As(e,t,n){return t=n?ie:t,t=e&&null==t?e.length:t,ho(e,Ce,ie,ie,ie,ie,t)}function Ds(e,t){var n;if("function"!=typeof t)throw new pu(le);return e=El(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ie),n}}function Os(e,t,n){t=n?ie:t;var r=ho(e,be,ie,ie,ie,ie,ie,t);return r.placeholder=Os.placeholder,r}function Ps(e,t,n){t=n?ie:t;var r=ho(e,we,ie,ie,ie,ie,ie,t);return r.placeholder=Ps.placeholder,r}function Rs(e,t,n){function r(t){var n=f,r=h;return f=h=ie,_=t,g=e.apply(r,n)}function i(e){return _=e,m=Rd(s,t),y?r(e):g}function o(e){var n=e-v,r=e-_,i=t-n;return b?Xu(i,p-r):i}function a(e){var n=e-v,r=e-_;return v===ie||n>=t||n<0||b&&r>=p}function s(){var e=cf();return a(e)?l(e):void(m=Rd(s,o(e)))}function l(e){return m=ie,w&&f?r(e):(f=h=ie,g)}function c(){m!==ie&&Sd(m),_=0,f=v=h=m=ie}function u(){return m===ie?g:l(cf())}function d(){var e=cf(),n=a(e);if(f=arguments,h=this,v=e,n){if(m===ie)return i(v);if(b)return m=Rd(s,t),r(v)}return m===ie&&(m=Rd(s,t)),g}var f,h,p,g,m,v,_=0,y=!1,b=!1,w=!0;if("function"!=typeof e)throw new pu(le);return t=Tl(t)||0,ll(n)&&(y=!!n.leading,b="maxWait"in n,p=b?Ku(Tl(n.maxWait)||0,t):p,w="trailing"in n?!!n.trailing:w),d.cancel=c,d.flush=u,d}function Is(e){return ho(e,Ee)}function Ms(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new pu(le);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ms.Cache||fn),n}function Ls(e){if("function"!=typeof e)throw new pu(le);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ns(e){return Ds(2,e)}function js(e,t){if("function"!=typeof e)throw new pu(le);return t=t===ie?t:El(t),oi(e,t)}function Fs(e,t){if("function"!=typeof e)throw new pu(le);return t=null==t?0:Ku(El(t),0),oi(function(n){var r=n[t],i=$i(n,0,t);return r&&m(i,r),s(e,this,i)})}function Bs(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new pu(le);return ll(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rs(e,t,{leading:r,maxWait:t,trailing:i})}function Us(e){return As(e,1)}function zs(e,t){return gf(Si(t),e)}function qs(){if(!arguments.length)return[];var e=arguments[0];return wf(e)?e:[e]}function Hs(e){return Bn(e,pe)}function Vs(e,t){return t="function"==typeof t?t:ie,Bn(e,pe,t)}function Ws(e){return Bn(e,fe|pe)}function Gs(e,t){return t="function"==typeof t?t:ie,Bn(e,fe|pe,t)}function Ys(e,t){return null==t||zn(e,t,Hl(t))}function Ks(e,t){return e===t||e!==e&&t!==t}function Xs(e){return null!=e&&sl(e.length)&&!ol(e)}function Js(e){return cl(e)&&Xs(e)}function Zs(e){return e===!0||e===!1||cl(e)&&dr(e)==Ve}function Qs(e){return cl(e)&&1===e.nodeType&&!vl(e)}function el(e){if(null==e)return!0;if(Xs(e)&&(wf(e)||"string"==typeof e||"function"==typeof e.splice||kf(e)||Tf(e)||bf(e)))return!e.length;var t=Dd(e);if(t==Je||t==it)return!e.size;if(Ho(e))return!Ur(e).length;for(var n in e)if(bu.call(e,n))return!1;return!0}function tl(e,t){return Pr(e,t)}function nl(e,t,n){n="function"==typeof n?n:ie;var r=n?n(e,t):ie;return r===ie?Pr(e,t,ie,n):!!r}function rl(e){if(!cl(e))return!1;var t=dr(e);return t==Ye||t==Ge||"string"==typeof e.message&&"string"==typeof e.name&&!vl(e)}function il(e){return"number"==typeof e&&Wu(e)}function ol(e){if(!ll(e))return!1;var t=dr(e);return t==Ke||t==Xe||t==He||t==nt}function al(e){return"number"==typeof e&&e==El(e)}function sl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Me}function ll(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function cl(e){return null!=e&&"object"==typeof e}function ul(e,t){return e===t||Mr(e,t,$o(t))}function dl(e,t,n){return n="function"==typeof n?n:ie,Mr(e,t,$o(t),n)}function fl(e){return ml(e)&&e!=+e}function hl(e){if(Od(e))throw new lu(se);return Lr(e)}function pl(e){return null===e}function gl(e){return null==e}function ml(e){return"number"==typeof e||cl(e)&&dr(e)==Ze}function vl(e){if(!cl(e)||dr(e)!=et)return!1;var t=Ou(e);if(null===t)return!0;var n=bu.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&yu.call(n)==Cu}function _l(e){return al(e)&&e>=-Me&&e<=Me}function yl(e){return"string"==typeof e||!wf(e)&&cl(e)&&dr(e)==ot}function bl(e){return"symbol"==typeof e||cl(e)&&dr(e)==at}function wl(e){return e===ie}function xl(e){return cl(e)&&Dd(e)==lt}function kl(e){return cl(e)&&dr(e)==ct}function Cl(e){if(!e)return[];if(Xs(e))return yl(e)?ee(e):Bi(e);if(Lu&&e[Lu])return V(e[Lu]());var t=Dd(e),n=t==Je?W:t==it?K:rc;return n(e)}function Sl(e){if(!e)return 0===e?e:0;if(e=Tl(e),e===Ie||e===-Ie){var t=e<0?-1:1;return t*Le}return e===e?e:0}function El(e){var t=Sl(e),n=t%1;return t===t?n?t-n:t:0}function $l(e){return e?Fn(El(e),0,je):0}function Tl(e){if("number"==typeof e)return e;if(bl(e))return Ne;if(ll(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ll(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Nt,"");var n=Yt.test(e);return n||Xt.test(e)?ir(e.slice(2),n?2:8):Gt.test(e)?Ne:+e}function Al(e){return Ui(e,Vl(e))}function Dl(e){return e?Fn(El(e),-Me,Me):0===e?e:0}function Ol(e){return null==e?"":mi(e)}function Pl(e,t){var n=vd(e);return null==t?n:Mn(n,t)}function Rl(e,t){return x(e,So(t,3),nr)}function Il(e,t){return x(e,So(t,3),or)}function Ml(e,t){return null==e?e:bd(e,So(t,3),Vl)}function Ll(e,t){return null==e?e:wd(e,So(t,3),Vl)}function Nl(e,t){return e&&nr(e,So(t,3))}function jl(e,t){return e&&or(e,So(t,3))}function Fl(e){return null==e?[]:ar(e,Hl(e))}function Bl(e){return null==e?[]:ar(e,Vl(e))}function Ul(e,t,n){var r=null==e?ie:lr(e,t);return r===ie?n:r}function zl(e,t){return null!=e&&Po(e,t,yr)}function ql(e,t){return null!=e&&Po(e,t,kr)}function Hl(e){return Xs(e)?$n(e):Ur(e)}function Vl(e){return Xs(e)?$n(e,!0):zr(e)}function Wl(e,t){var n={};return t=So(t,3),nr(e,function(e,r,i){Nn(n,t(e,r,i),e)}),n}function Gl(e,t){var n={};return t=So(t,3),nr(e,function(e,r,i){Nn(n,r,t(e,r,i))}),n}function Yl(e,t){return Kl(e,Ls(So(t)))}function Kl(e,t){if(null==e)return{};var n=g(xo(e),function(e){return[e]});return t=So(t),Zr(e,n,function(e,n){return t(e,n[0])})}function Xl(e,t,n){t=Ei(t,e);var r=-1,i=t.length;for(i||(i=1,e=ie);++r<i;){var o=null==e?ie:e[ra(t[r])];o===ie&&(r=i,o=n),e=ol(o)?o.call(e):o}return e}function Jl(e,t,n){return null==e?e:li(e,t,n)}function Zl(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:li(e,t,n,r)}function Ql(e,t,n){var r=wf(e),i=r||kf(e)||Tf(e);if(t=So(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ll(e)&&ol(o)?vd(Ou(e)):{}}return(i?c:nr)(e,function(e,r,i){return t(n,e,r,i)}),n}function ec(e,t){return null==e||_i(e,t)}function tc(e,t,n){return null==e?e:yi(e,t,Si(n))}function nc(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:yi(e,t,Si(n),r)}function rc(e){return null==e?[]:L(e,Hl(e))}function ic(e){return null==e?[]:L(e,Vl(e))}function oc(e,t,n){return n===ie&&(n=t,t=ie),n!==ie&&(n=Tl(n),n=n===n?n:0),t!==ie&&(t=Tl(t),t=t===t?t:0),Fn(Tl(e),t,n)}function ac(e,t,n){return t=Sl(t),n===ie?(n=t,t=0):n=Sl(n),e=Tl(e),Sr(e,t,n)}function sc(e,t,n){if(n&&"boolean"!=typeof n&&Fo(e,t,n)&&(t=n=ie),n===ie&&("boolean"==typeof t?(n=t,t=ie):"boolean"==typeof e&&(n=e,e=ie)),e===ie&&t===ie?(e=0,t=1):(e=Sl(e),t===ie?(t=e,e=0):t=Sl(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Qu();return Xu(e+i*(t-e+rr("1e-"+((i+"").length-1))),t)}return ni(e,t)}function lc(e){return eh(Ol(e).toLowerCase())}function cc(e){return e=Ol(e),e&&e.replace(Zt,br).replace(Hn,"")}function uc(e,t,n){e=Ol(e),t=mi(t);var r=e.length;n=n===ie?r:Fn(El(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function dc(e){return e=Ol(e),e&&$t.test(e)?e.replace(St,wr):e}function fc(e){return e=Ol(e),e&&Lt.test(e)?e.replace(Mt,"\\$&"):e}function hc(e,t,n){e=Ol(e),t=El(t);var r=t?Q(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return oo(qu(i),n)+e+oo(zu(i),n)}function pc(e,t,n){e=Ol(e),t=El(t);var r=t?Q(e):0;return t&&r<t?e+oo(t-r,n):e}function gc(e,t,n){e=Ol(e),t=El(t);var r=t?Q(e):0;return t&&r<t?oo(t-r,n)+e:e}function mc(e,t,n){return n||null==t?t=0:t&&(t=+t),Zu(Ol(e).replace(jt,""),t||0)}function vc(e,t,n){return t=(n?Fo(e,t,n):t===ie)?1:El(t),ii(Ol(e),t)}function _c(){var e=arguments,t=Ol(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function yc(e,t,n){return n&&"number"!=typeof n&&Fo(e,t,n)&&(t=n=ie),(n=n===ie?je:n>>>0)?(e=Ol(e),e&&("string"==typeof t||null!=t&&!Ef(t))&&(t=mi(t),!t&&q(e))?$i(ee(e),0,n):e.split(t,n)):[]}function bc(e,t,n){return e=Ol(e),n=null==n?0:Fn(El(n),0,e.length),t=mi(t),e.slice(n,n+t.length)==t}function wc(e,t,r){var i=n.templateSettings;r&&Fo(e,t,r)&&(t=ie),e=Ol(e),t=Rf({},t,i,po);var o,a,s=Rf({},t.imports,i.imports,po),l=Hl(s),c=L(s,l),u=0,d=t.interpolate||Qt,f="__p += '",h=fu((t.escape||Qt).source+"|"+d.source+"|"+(d===Dt?Vt:Qt).source+"|"+(t.evaluate||Qt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Xn+"]")+"\n";e.replace(h,function(t,n,r,i,s,l){return r||(r=i),f+=e.slice(u,l).replace(en,U),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),f+="';\n";var g=t.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(wt,""):f).replace(xt,"$1").replace(kt,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=th(function(){return cu(l,p+"return "+f).apply(ie,c)});if(m.source=f,rl(m))throw m;return m}function xc(e){return Ol(e).toLowerCase()}function kc(e){return Ol(e).toUpperCase()}function Cc(e,t,n){if(e=Ol(e),e&&(n||t===ie))return e.replace(Nt,"");if(!e||!(t=mi(t)))return e;var r=ee(e),i=ee(t),o=j(r,i),a=F(r,i)+1;return $i(r,o,a).join("")}function Sc(e,t,n){if(e=Ol(e),e&&(n||t===ie))return e.replace(Ft,"");if(!e||!(t=mi(t)))return e;var r=ee(e),i=F(r,ee(t))+1;return $i(r,0,i).join("")}function Ec(e,t,n){if(e=Ol(e),e&&(n||t===ie))return e.replace(jt,"");if(!e||!(t=mi(t)))return e;var r=ee(e),i=j(r,ee(t));return $i(r,i).join("")}function $c(e,t){var n=$e,r=Te;if(ll(t)){var i="separator"in t?t.separator:i;n="length"in t?El(t.length):n,r="omission"in t?mi(t.omission):r}e=Ol(e);var o=e.length;if(q(e)){var a=ee(e);o=a.length}if(n>=o)return e;var s=n-Q(r);if(s<1)return r;var l=a?$i(a,0,s).join(""):e.slice(0,s);if(i===ie)return l+r;if(a&&(s+=l.length-s),Ef(i)){if(e.slice(s).search(i)){var c,u=l;for(i.global||(i=fu(i.source,Ol(Wt.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var d=c.index;l=l.slice(0,d===ie?s:d)}}else if(e.indexOf(mi(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r}function Tc(e){return e=Ol(e),e&&Et.test(e)?e.replace(Ct,xr):e}function Ac(e,t,n){return e=Ol(e),t=n?ie:t,t===ie?H(e)?re(e):w(e):e.match(t)||[]}function Dc(e){var t=null==e?0:e.length,n=So();return e=t?g(e,function(e){if("function"!=typeof e[1])throw new pu(le);return[n(e[0]),e[1]]}):[],oi(function(n){for(var r=-1;++r<t;){var i=e[r];if(s(i[0],this,n))return s(i[1],this,n)}})}function Oc(e){return Un(Bn(e,fe))}function Pc(e){return function(){return e}}function Rc(e,t){return null==e||e!==e?t:e}function Ic(e){return e}function Mc(e){return Br("function"==typeof e?e:Bn(e,fe))}function Lc(e){return Vr(Bn(e,fe))}function Nc(e,t){return Wr(e,Bn(t,fe))}function jc(e,t,n){var r=Hl(t),i=ar(t,r);null!=n||ll(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ar(t,Hl(t)));var o=!(ll(n)&&"chain"in n&&!n.chain),a=ol(e);return c(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Bi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,m([this.value()],arguments))})}),e}function Fc(){return sr._===this&&(sr._=Su),this}function Bc(){}function Uc(e){return e=El(e),oi(function(t){return Kr(t,e)})}function zc(e){return Bo(e)?T(ra(e)):Qr(e)}function qc(e){return function(t){return null==e?ie:lr(e,t)}}function Hc(){return[]}function Vc(){return!1}function Wc(){return{}}function Gc(){return""}function Yc(){return!0}function Kc(e,t){if(e=El(e),e<1||e>Me)return[];var n=je,r=Xu(e,je);t=So(t),e-=je;for(var i=R(r,t);++n<e;)t(n);return i}function Xc(e){return wf(e)?g(e,ra):bl(e)?[e]:Bi(Md(Ol(e)))}function Jc(e){var t=++wu;return Ol(e)+t}function Zc(e){return e&&e.length?Yn(e,Ic,fr):ie}function Qc(e,t){return e&&e.length?Yn(e,So(t,2),fr):ie}function eu(e){return $(e,Ic)}function tu(e,t){return $(e,So(t,2))}function nu(e){return e&&e.length?Yn(e,Ic,qr):ie}function ru(e,t){return e&&e.length?Yn(e,So(t,2),qr):ie}function iu(e){return e&&e.length?P(e,Ic):0}function ou(e,t){return e&&e.length?P(e,So(t,2)):0}t=null==t?sr:Cr.defaults(sr.Object(),t,Cr.pick(sr,Kn));var au=t.Array,su=t.Date,lu=t.Error,cu=t.Function,uu=t.Math,du=t.Object,fu=t.RegExp,hu=t.String,pu=t.TypeError,gu=au.prototype,mu=cu.prototype,vu=du.prototype,_u=t["__core-js_shared__"],yu=mu.toString,bu=vu.hasOwnProperty,wu=0,xu=function(){var e=/[^.]+$/.exec(_u&&_u.keys&&_u.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ku=vu.toString,Cu=yu.call(du),Su=sr._,Eu=fu("^"+yu.call(bu).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$u=ur?t.Buffer:ie,Tu=t.Symbol,Au=t.Uint8Array,Du=$u?$u.allocUnsafe:ie,Ou=G(du.getPrototypeOf,du),Pu=du.create,Ru=vu.propertyIsEnumerable,Iu=gu.splice,Mu=Tu?Tu.isConcatSpreadable:ie,Lu=Tu?Tu.iterator:ie,Nu=Tu?Tu.toStringTag:ie,ju=function(){
try{var e=To(du,"defineProperty");return e({},"",{}),e}catch(e){}}(),Fu=t.clearTimeout!==sr.clearTimeout&&t.clearTimeout,Bu=su&&su.now!==sr.Date.now&&su.now,Uu=t.setTimeout!==sr.setTimeout&&t.setTimeout,zu=uu.ceil,qu=uu.floor,Hu=du.getOwnPropertySymbols,Vu=$u?$u.isBuffer:ie,Wu=t.isFinite,Gu=gu.join,Yu=G(du.keys,du),Ku=uu.max,Xu=uu.min,Ju=su.now,Zu=t.parseInt,Qu=uu.random,ed=gu.reverse,td=To(t,"DataView"),nd=To(t,"Map"),rd=To(t,"Promise"),id=To(t,"Set"),od=To(t,"WeakMap"),ad=To(du,"create"),sd=od&&new od,ld={},cd=ia(td),ud=ia(nd),dd=ia(rd),fd=ia(id),hd=ia(od),pd=Tu?Tu.prototype:ie,gd=pd?pd.valueOf:ie,md=pd?pd.toString:ie,vd=function(){function e(){}return function(t){if(!ll(t))return{};if(Pu)return Pu(t);e.prototype=t;var n=new e;return e.prototype=ie,n}}();n.templateSettings={escape:Tt,evaluate:At,interpolate:Dt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,o.prototype=vd(r.prototype),o.prototype.constructor=o,b.prototype=vd(r.prototype),b.prototype.constructor=b,ne.prototype.clear=qt,ne.prototype.delete=tn,ne.prototype.get=nn,ne.prototype.has=rn,ne.prototype.set=on,an.prototype.clear=sn,an.prototype.delete=ln,an.prototype.get=cn,an.prototype.has=un,an.prototype.set=dn,fn.prototype.clear=hn,fn.prototype.delete=pn,fn.prototype.get=gn,fn.prototype.has=mn,fn.prototype.set=vn,_n.prototype.add=_n.prototype.push=yn,_n.prototype.has=bn,wn.prototype.clear=xn,wn.prototype.delete=kn,wn.prototype.get=Cn,wn.prototype.has=Sn,wn.prototype.set=En;var _d=Wi(nr),yd=Wi(or,!0),bd=Gi(),wd=Gi(!0),xd=sd?function(e,t){return sd.set(e,t),e}:Ic,kd=ju?function(e,t){return ju(e,"toString",{configurable:!0,enumerable:!1,value:Pc(t),writable:!0})}:Ic,Cd=oi,Sd=Fu||function(e){return sr.clearTimeout(e)},Ed=id&&1/K(new id([,-0]))[1]==Ie?function(e){return new id(e)}:Bc,$d=sd?function(e){return sd.get(e)}:Bc,Td=Hu?function(e){return null==e?[]:(e=du(e),f(Hu(e),function(t){return Ru.call(e,t)}))}:Hc,Ad=Hu?function(e){for(var t=[];e;)m(t,Td(e)),e=Ou(e);return t}:Hc,Dd=dr;(td&&Dd(new td(new ArrayBuffer(1)))!=dt||nd&&Dd(new nd)!=Je||rd&&Dd(rd.resolve())!=tt||id&&Dd(new id)!=it||od&&Dd(new od)!=lt)&&(Dd=function(e){var t=dr(e),n=t==et?e.constructor:ie,r=n?ia(n):"";if(r)switch(r){case cd:return dt;case ud:return Je;case dd:return tt;case fd:return it;case hd:return lt}return t});var Od=_u?ol:Vc,Pd=ta(xd),Rd=Uu||function(e,t){return sr.setTimeout(e,t)},Id=ta(kd),Md=Go(function(e){var t=[];return Rt.test(e)&&t.push(""),e.replace(It,function(e,n,r,i){t.push(r?i.replace(Ht,"$1"):n||e)}),t}),Ld=oi(function(e,t){return Js(e)?Wn(e,tr(t,1,Js,!0)):[]}),Nd=oi(function(e,t){var n=Sa(t);return Js(n)&&(n=ie),Js(e)?Wn(e,tr(t,1,Js,!0),So(n,2)):[]}),jd=oi(function(e,t){var n=Sa(t);return Js(n)&&(n=ie),Js(e)?Wn(e,tr(t,1,Js,!0),ie,n):[]}),Fd=oi(function(e){var t=g(e,Ci);return t.length&&t[0]===e[0]?Er(t):[]}),Bd=oi(function(e){var t=Sa(e),n=g(e,Ci);return t===Sa(n)?t=ie:n.pop(),n.length&&n[0]===e[0]?Er(n,So(t,2)):[]}),Ud=oi(function(e){var t=Sa(e),n=g(e,Ci);return t="function"==typeof t?t:ie,t&&n.pop(),n.length&&n[0]===e[0]?Er(n,ie,t):[]}),zd=oi(Ta),qd=bo(function(e,t){var n=null==e?0:e.length,r=jn(e,t);return ti(e,g(t,function(e){return jo(e,n)?+e:e}).sort(Li)),r}),Hd=oi(function(e){return vi(tr(e,1,Js,!0))}),Vd=oi(function(e){var t=Sa(e);return Js(t)&&(t=ie),vi(tr(e,1,Js,!0),So(t,2))}),Wd=oi(function(e){var t=Sa(e);return t="function"==typeof t?t:ie,vi(tr(e,1,Js,!0),ie,t)}),Gd=oi(function(e,t){return Js(e)?Wn(e,t):[]}),Yd=oi(function(e){return xi(f(e,Js))}),Kd=oi(function(e){var t=Sa(e);return Js(t)&&(t=ie),xi(f(e,Js),So(t,2))}),Xd=oi(function(e){var t=Sa(e);return t="function"==typeof t?t:ie,xi(f(e,Js),ie,t)}),Jd=oi(Xa),Zd=oi(function(e){var t=e.length,n=t>1?e[t-1]:ie;return n="function"==typeof n?(e.pop(),n):ie,Ja(e,n)}),Qd=bo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof b&&jo(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:ns,args:[i],thisArg:ie}),new o(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ie),e})):this.thru(i)}),ef=Hi(function(e,t,n){bu.call(e,n)?++e[n]:Nn(e,n,1)}),tf=Qi(ga),nf=Qi(ma),rf=Hi(function(e,t,n){bu.call(e,n)?e[n].push(t):Nn(e,n,[t])}),of=oi(function(e,t,n){var r=-1,i="function"==typeof t,o=Xs(e)?au(e.length):[];return _d(e,function(e){o[++r]=i?s(t,e,n):Tr(e,t,n)}),o}),af=Hi(function(e,t,n){Nn(e,n,t)}),sf=Hi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),lf=oi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Fo(e,t[0],t[1])?t=[]:n>2&&Fo(t[0],t[1],t[2])&&(t=[t[0]]),Xr(e,tr(t,1),[])}),cf=Bu||function(){return sr.Date.now()},uf=oi(function(e,t,n){var r=ve;if(n.length){var i=Y(n,Co(uf));r|=xe}return ho(e,r,t,n,i)}),df=oi(function(e,t,n){var r=ve|_e;if(n.length){var i=Y(n,Co(df));r|=xe}return ho(t,r,e,n,i)}),ff=oi(function(e,t){return Vn(e,1,t)}),hf=oi(function(e,t,n){return Vn(e,Tl(t)||0,n)});Ms.Cache=fn;var pf=Cd(function(e,t){t=1==t.length&&wf(t[0])?g(t[0],M(So())):g(tr(t,1),M(So()));var n=t.length;return oi(function(r){for(var i=-1,o=Xu(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return s(e,this,r)})}),gf=oi(function(e,t){var n=Y(t,Co(gf));return ho(e,xe,ie,t,n)}),mf=oi(function(e,t){var n=Y(t,Co(mf));return ho(e,ke,ie,t,n)}),vf=bo(function(e,t){return ho(e,Se,ie,ie,ie,t)}),_f=lo(fr),yf=lo(function(e,t){return e>=t}),bf=Ar(function(){return arguments}())?Ar:function(e){return cl(e)&&bu.call(e,"callee")&&!Ru.call(e,"callee")},wf=au.isArray,xf=hr?M(hr):Dr,kf=Vu||Vc,Cf=pr?M(pr):Or,Sf=gr?M(gr):Ir,Ef=mr?M(mr):Nr,$f=vr?M(vr):jr,Tf=_r?M(_r):Fr,Af=lo(qr),Df=lo(function(e,t){return e<=t}),Of=Vi(function(e,t){if(Ho(t)||Xs(t))return void Ui(t,Hl(t),e);for(var n in t)bu.call(t,n)&&Pn(e,n,t[n])}),Pf=Vi(function(e,t){Ui(t,Vl(t),e)}),Rf=Vi(function(e,t,n,r){Ui(t,Vl(t),e,r)}),If=Vi(function(e,t,n,r){Ui(t,Hl(t),e,r)}),Mf=bo(jn),Lf=oi(function(e){return e.push(ie,po),s(Rf,ie,e)}),Nf=oi(function(e){return e.push(ie,go),s(zf,ie,e)}),jf=no(function(e,t,n){e[t]=n},Pc(Ic)),Ff=no(function(e,t,n){bu.call(e,t)?e[t].push(n):e[t]=[n]},So),Bf=oi(Tr),Uf=Vi(function(e,t,n){Gr(e,t,n)}),zf=Vi(function(e,t,n,r){Gr(e,t,n,r)}),qf=bo(function(e,t){var n={};if(null==e)return n;var r=!1;t=g(t,function(t){return t=Ei(t,e),r||(r=t.length>1),t}),Ui(e,xo(e),n),r&&(n=Bn(n,fe|he|pe,mo));for(var i=t.length;i--;)_i(n,t[i]);return n}),Hf=bo(function(e,t){return null==e?{}:Jr(e,t)}),Vf=fo(Hl),Wf=fo(Vl),Gf=Xi(function(e,t,n){return t=t.toLowerCase(),e+(n?lc(t):t)}),Yf=Xi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Kf=Xi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Xf=Ki("toLowerCase"),Jf=Xi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Zf=Xi(function(e,t,n){return e+(n?" ":"")+eh(t)}),Qf=Xi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),eh=Ki("toUpperCase"),th=oi(function(e,t){try{return s(e,ie,t)}catch(e){return rl(e)?e:new lu(e)}}),nh=bo(function(e,t){return c(t,function(t){t=ra(t),Nn(e,t,uf(e[t],e))}),e}),rh=eo(),ih=eo(!0),oh=oi(function(e,t){return function(n){return Tr(n,e,t)}}),ah=oi(function(e,t){return function(n){return Tr(e,n,t)}}),sh=io(g),lh=io(d),ch=io(y),uh=so(),dh=so(!0),fh=ro(function(e,t){return e+t},0),hh=uo("ceil"),ph=ro(function(e,t){return e/t},1),gh=uo("floor"),mh=ro(function(e,t){return e*t},1),vh=uo("round"),_h=ro(function(e,t){return e-t},0);return n.after=Ts,n.ary=As,n.assign=Of,n.assignIn=Pf,n.assignInWith=Rf,n.assignWith=If,n.at=Mf,n.before=Ds,n.bind=uf,n.bindAll=nh,n.bindKey=df,n.castArray=qs,n.chain=es,n.chunk=sa,n.compact=la,n.concat=ca,n.cond=Dc,n.conforms=Oc,n.constant=Pc,n.countBy=ef,n.create=Pl,n.curry=Os,n.curryRight=Ps,n.debounce=Rs,n.defaults=Lf,n.defaultsDeep=Nf,n.defer=ff,n.delay=hf,n.difference=Ld,n.differenceBy=Nd,n.differenceWith=jd,n.drop=ua,n.dropRight=da,n.dropRightWhile=fa,n.dropWhile=ha,n.fill=pa,n.filter=ds,n.flatMap=fs,n.flatMapDeep=hs,n.flatMapDepth=ps,n.flatten=va,n.flattenDeep=_a,n.flattenDepth=ya,n.flip=Is,n.flow=rh,n.flowRight=ih,n.fromPairs=ba,n.functions=Fl,n.functionsIn=Bl,n.groupBy=rf,n.initial=ka,n.intersection=Fd,n.intersectionBy=Bd,n.intersectionWith=Ud,n.invert=jf,n.invertBy=Ff,n.invokeMap=of,n.iteratee=Mc,n.keyBy=af,n.keys=Hl,n.keysIn=Vl,n.map=_s,n.mapKeys=Wl,n.mapValues=Gl,n.matches=Lc,n.matchesProperty=Nc,n.memoize=Ms,n.merge=Uf,n.mergeWith=zf,n.method=oh,n.methodOf=ah,n.mixin=jc,n.negate=Ls,n.nthArg=Uc,n.omit=qf,n.omitBy=Yl,n.once=Ns,n.orderBy=ys,n.over=sh,n.overArgs=pf,n.overEvery=lh,n.overSome=ch,n.partial=gf,n.partialRight=mf,n.partition=sf,n.pick=Hf,n.pickBy=Kl,n.property=zc,n.propertyOf=qc,n.pull=zd,n.pullAll=Ta,n.pullAllBy=Aa,n.pullAllWith=Da,n.pullAt=qd,n.range=uh,n.rangeRight=dh,n.rearg=vf,n.reject=xs,n.remove=Oa,n.rest=js,n.reverse=Pa,n.sampleSize=Cs,n.set=Jl,n.setWith=Zl,n.shuffle=Ss,n.slice=Ra,n.sortBy=lf,n.sortedUniq=Ba,n.sortedUniqBy=Ua,n.split=yc,n.spread=Fs,n.tail=za,n.take=qa,n.takeRight=Ha,n.takeRightWhile=Va,n.takeWhile=Wa,n.tap=ts,n.throttle=Bs,n.thru=ns,n.toArray=Cl,n.toPairs=Vf,n.toPairsIn=Wf,n.toPath=Xc,n.toPlainObject=Al,n.transform=Ql,n.unary=Us,n.union=Hd,n.unionBy=Vd,n.unionWith=Wd,n.uniq=Ga,n.uniqBy=Ya,n.uniqWith=Ka,n.unset=ec,n.unzip=Xa,n.unzipWith=Ja,n.update=tc,n.updateWith=nc,n.values=rc,n.valuesIn=ic,n.without=Gd,n.words=Ac,n.wrap=zs,n.xor=Yd,n.xorBy=Kd,n.xorWith=Xd,n.zip=Jd,n.zipObject=Za,n.zipObjectDeep=Qa,n.zipWith=Zd,n.entries=Vf,n.entriesIn=Wf,n.extend=Pf,n.extendWith=Rf,jc(n,n),n.add=fh,n.attempt=th,n.camelCase=Gf,n.capitalize=lc,n.ceil=hh,n.clamp=oc,n.clone=Hs,n.cloneDeep=Ws,n.cloneDeepWith=Gs,n.cloneWith=Vs,n.conformsTo=Ys,n.deburr=cc,n.defaultTo=Rc,n.divide=ph,n.endsWith=uc,n.eq=Ks,n.escape=dc,n.escapeRegExp=fc,n.every=us,n.find=tf,n.findIndex=ga,n.findKey=Rl,n.findLast=nf,n.findLastIndex=ma,n.findLastKey=Il,n.floor=gh,n.forEach=gs,n.forEachRight=ms,n.forIn=Ml,n.forInRight=Ll,n.forOwn=Nl,n.forOwnRight=jl,n.get=Ul,n.gt=_f,n.gte=yf,n.has=zl,n.hasIn=ql,n.head=wa,n.identity=Ic,n.includes=vs,n.indexOf=xa,n.inRange=ac,n.invoke=Bf,n.isArguments=bf,n.isArray=wf,n.isArrayBuffer=xf,n.isArrayLike=Xs,n.isArrayLikeObject=Js,n.isBoolean=Zs,n.isBuffer=kf,n.isDate=Cf,n.isElement=Qs,n.isEmpty=el,n.isEqual=tl,n.isEqualWith=nl,n.isError=rl,n.isFinite=il,n.isFunction=ol,n.isInteger=al,n.isLength=sl,n.isMap=Sf,n.isMatch=ul,n.isMatchWith=dl,n.isNaN=fl,n.isNative=hl,n.isNil=gl,n.isNull=pl,n.isNumber=ml,n.isObject=ll,n.isObjectLike=cl,n.isPlainObject=vl,n.isRegExp=Ef,n.isSafeInteger=_l,n.isSet=$f,n.isString=yl,n.isSymbol=bl,n.isTypedArray=Tf,n.isUndefined=wl,n.isWeakMap=xl,n.isWeakSet=kl,n.join=Ca,n.kebabCase=Yf,n.last=Sa,n.lastIndexOf=Ea,n.lowerCase=Kf,n.lowerFirst=Xf,n.lt=Af,n.lte=Df,n.max=Zc,n.maxBy=Qc,n.mean=eu,n.meanBy=tu,n.min=nu,n.minBy=ru,n.stubArray=Hc,n.stubFalse=Vc,n.stubObject=Wc,n.stubString=Gc,n.stubTrue=Yc,n.multiply=mh,n.nth=$a,n.noConflict=Fc,n.noop=Bc,n.now=cf,n.pad=hc,n.padEnd=pc,n.padStart=gc,n.parseInt=mc,n.random=sc,n.reduce=bs,n.reduceRight=ws,n.repeat=vc,n.replace=_c,n.result=Xl,n.round=vh,n.runInContext=e,n.sample=ks,n.size=Es,n.snakeCase=Jf,n.some=$s,n.sortedIndex=Ia,n.sortedIndexBy=Ma,n.sortedIndexOf=La,n.sortedLastIndex=Na,n.sortedLastIndexBy=ja,n.sortedLastIndexOf=Fa,n.startCase=Zf,n.startsWith=bc,n.subtract=_h,n.sum=iu,n.sumBy=ou,n.template=wc,n.times=Kc,n.toFinite=Sl,n.toInteger=El,n.toLength=$l,n.toLower=xc,n.toNumber=Tl,n.toSafeInteger=Dl,n.toString=Ol,n.toUpper=kc,n.trim=Cc,n.trimEnd=Sc,n.trimStart=Ec,n.truncate=$c,n.unescape=Tc,n.uniqueId=Jc,n.upperCase=Qf,n.upperFirst=eh,n.each=gs,n.eachRight=ms,n.first=wa,jc(n,function(){var e={};return nr(n,function(t,r){bu.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION=oe,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),c(["drop","take"],function(e,t){b.prototype[e]=function(n){n=n===ie?1:Ku(El(n),0);var r=this.__filtered__&&!t?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Xu(n,r.__takeCount__):r.__views__.push({size:Xu(n,je),type:e+(r.__dir__<0?"Right":"")}),r},b.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Oe||n==Re;b.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:So(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),c(["head","last"],function(e,t){var n="take"+(t?"Right":"");b.prototype[e]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");b.prototype[e]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Ic)},b.prototype.find=function(e){return this.filter(e).head()},b.prototype.findLast=function(e){return this.reverse().find(e)},b.prototype.invokeMap=oi(function(e,t){return"function"==typeof e?new b(this):this.map(function(n){return Tr(n,e,t)})}),b.prototype.reject=function(e){return this.filter(Ls(So(e)))},b.prototype.slice=function(e,t){e=El(e);var n=this;return n.__filtered__&&(e>0||t<0)?new b(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ie&&(t=El(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},b.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},b.prototype.toArray=function(){return this.take(je)},nr(b.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=n[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,l=i?[1]:arguments,c=t instanceof b,u=l[0],d=c||wf(t),f=function(e){var t=a.apply(n,m([e],l));return i&&h?t[0]:t};d&&r&&"function"==typeof u&&1!=u.length&&(c=d=!1);var h=this.__chain__,p=!!this.__actions__.length,g=s&&!h,v=c&&!p;if(!s&&d){t=v?t:new b(this);var _=e.apply(t,l);return _.__actions__.push({func:ns,args:[f],thisArg:ie}),new o(_,h)}return g&&v?e.apply(this,l):(_=this.thru(f),g?i?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var t=gu[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(wf(n)?n:[],e)}return this[r](function(n){return t.apply(wf(n)?n:[],e)})}}),nr(b.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"",o=ld[i]||(ld[i]=[]);o.push({name:t,func:r})}}),ld[to(ie,_e).name]=[{name:"wrapper",func:ie}],b.prototype.clone=A,b.prototype.reverse=J,b.prototype.value=te,n.prototype.at=Qd,n.prototype.chain=rs,n.prototype.commit=is,n.prototype.next=os,n.prototype.plant=ss,n.prototype.reverse=ls,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=cs,n.prototype.first=n.prototype.head,Lu&&(n.prototype[Lu]=as),n},Cr=kr();sr._=Cr,o=function(){return Cr}.call(t,n,t,r),!(o!==ie&&(r.exports=o))}).call(this)}).call(t,n(8),n(41)(e),n(2))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){!function(e){e.noop=function(){}}("object"==typeof e&&"object"==typeof e.exports?e.exports:window)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],g=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||g||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return this instanceof r?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var s=n(20),l=n(9);l.inherits=n(3);var c=n(35),u=n(23);l.inherits(r,c);for(var d=a(u.prototype),f=0;f<d.length;f++){var h=d[f];r.prototype[h]||(r.prototype[h]=u.prototype[h])}},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(10).EventEmitter,o=n(3);o(r,i),r.Readable=n(70),r.Writable=n(72),r.Duplex=n(67),r.Transform=n(71),r.PassThrough=n(69),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function a(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return"[object RegExp]"===m(e)}function d(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===m(e)}function h(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=l,t.isUndefined=c,t.isRegExp=u,t.isObject=d,t.isDate=f,t.isError=h,t.isFunction=p,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(0).Buffer)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,l=0;l<i;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){var r,i;!function(o,a){r=o,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}(function(){function e(e,t){var n=typeof e[t];return n==_||!(n!=v||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=v||!e[t])}function n(e,t){return typeof e[t]!=y}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&C(e,k)&&E(e,x)}function o(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function a(t){typeof console!=y&&e(console,"log")}function s(e,t){A&&t?alert(e):a(e)}function l(e){O.initialized=!0,O.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,O.config.alertOnFail)}function c(e){s("Rangy warning: "+e,O.config.alertOnWarn)}function u(e){return e.message||e.description||String(e)}function d(){if(A&&!O.initialized){var t,n=!1,r=!1;e(document,"createRange")&&(t=document.createRange(),C(t,w)&&E(t,b)&&(n=!0));var s=o(document);if(!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),i(t)&&(r=!0)),!n&&!r)return void l("Neither Range nor TextRange are available");O.initialized=!0,O.features={implementsDomRange:n,implementsTextRange:r};var c,d;for(var f in T)(c=T[f])instanceof h&&c.init(c,O);for(var p=0,g=I.length;p<g;++p)try{I[p](O)}catch(e){d="Rangy init listener threw an exception. Continuing. Detail: "+u(e),a(d)}}}function f(e){e=e||window,d();for(var t=0,n=M.length;t<n;++t)M[t](e)}function h(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function p(e,t,n){var r=new h(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(O,t),t.supported=!0}catch(t){var r="Module '"+e+"' failed to load: "+u(t);a(r),t.stack&&a(t.stack)}}});return T[e]=r,r}function g(){}function m(){}var v="object",_="function",y="undefined",b=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],w=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],x=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],k=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],C=r(e),S=r(t),E=r(n),$=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)},T={},A=typeof window!=y&&typeof document!=y,D={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:C,areHostObjects:S,areHostProperties:E,isTextRange:i,getBody:o,forEach:$},O={version:"notable-alpha-1.3",initialized:!1,isBrowser:A,supported:!0,util:D,features:{},modules:T,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==y||rangyAutoInitialize}};O.fail=l,O.warn=c;var P;({}).hasOwnProperty?(D.extend=P=function(e,t,n){var r,i;for(var o in t)t.hasOwnProperty(o)&&(r=e[o],i=t[o],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&P(r,i,!0),e[o]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},D.createOptions=function(e,t){var n={};return P(n,t),e&&P(n,e),n}):l("hasOwnProperty not supported"),A||l("Rangy can only run in a browser"),function(){var e;if(A){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),D.toArray=e}();var R;A&&(e(document,"addEventListener")?R=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?R=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),D.addListener=R);var I=[];O.init=d,O.addInitListener=function(e){O.initialized?e(O):I.push(e)};var M=[];O.addShimListener=function(e){M.push(e)},A&&(O.shim=O.createMissingNativeApi=f),h.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;r<i;++r){if(t=n[r],e=T[t],!(e&&e instanceof h))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){O.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){O.warn("DEPRECATED: "+e+" in module "+this.name+"is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},O.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=p(e,n,t);O.initialized&&O.supported&&r.init()},O.createCoreModule=function(e,t,n){p(e,t,n)},O.RangePrototype=g,O.rangePrototype=new g,O.selectionPrototype=new m,O.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==O||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function i(e){for(var t=0;e=e.previousSibling;)++t;return t}function o(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function a(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(L(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t){return s(e,t,!0)}function c(e,t,n){for(var r,i=n?e:e.parentNode;i;){if(r=i.parentNode,r===t)return i;i=r}return null}function u(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function f(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function h(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),f(r,e),n)for(var o,a=0;o=n[a++];)o.node==e&&o.offset>t?(o.node=r,o.offset-=t):o.node==e.parentNode&&o.offset>i(e)&&++o.offset;return r}function p(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=O)return e.ownerDocument;if(typeof e.document!=O)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function g(e){var n=p(e);if(typeof n.defaultView!=O)return n.defaultView;if(typeof n.parentWindow!=O)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=O)return e.contentDocument;if(typeof e.contentWindow!=O)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){if(typeof e.contentWindow!=O)return e.contentWindow;if(typeof e.contentDocument!=O)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function _(e){return e&&P.isHostMethod(e,"setTimeout")&&P.isHostObject(e,"document")}function y(e,t,n){var r;if(e?P.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):p(e):_(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function b(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,r,o){var s,l,u,d,f;if(e==r)return n===o?0:n<o?-1:1;if(s=c(r,e,!0))return n<=i(s)?-1:1;if(s=c(e,r,!0))return i(s)<o?-1:1;if(l=a(e,r),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(u=e===l?l:c(e,l,!0),d=r===l?l:c(r,l,!0),u===d)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(f=l.firstChild;f;){if(f===u)return-1;if(f===d)return 1;f=f.nextSibling}}function x(e){var t;try{return t=e.parentNode,!1}catch(e){return!0}}function k(e){if(!e)return"[No node]";if(N&&x(e))return"[Broken node]";if(u(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+i(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function C(e){for(var t,n=p(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function S(e,t,n){var r=R(e),i=e.createElement("div");i.contentEditable=""+!!n,t&&(i.innerHTML=t);var o=r.firstChild;return o?r.insertBefore(i,o):r.appendChild(i),i}function E(e){return e.parentNode.removeChild(e)}function $(e){this.root=e,this._next=e}function T(e){return new $(e)}function A(e,t){this.node=e,this.offset=t}function D(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var O="undefined",P=e.util,R=P.getBody;P.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),P.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var I=document.createElement("div");
P.areHostMethods(I,["insertBefore","appendChild","cloneNode"]||!P.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),P.isHostProperty(I,"innerHTML")||t.fail("Element is missing innerHTML property");var M=document.createTextNode("test");P.areHostMethods(M,["splitText","deleteData","insertData","appendData","cloneNode"]||!P.areHostObjects(I,["previousSibling","nextSibling","childNodes","parentNode"])||!P.areHostProperties(M,["data"]))||t.fail("Incomplete Text Node implementation");var L=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},N=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",N=x(n),e.features.crashyTextNodes=N}();var j;typeof window.getComputedStyle!=O?j=function(e,t){return g(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=O?j=function(e,t){return e.currentStyle[t]}:t.fail("No means of obtaining computed style properties found"),$.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+k(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},D.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},D.prototype.toString=function(){return this.message},e.dom={arrayContains:L,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:o,getCommonAncestor:a,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:d,insertAfter:f,splitDataNode:h,getDocument:p,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:R,isWindow:_,getContentDocument:y,getRootContainer:b,comparePoints:w,isBrokenNode:x,inspectNode:k,getComputedStyleProperty:j,createTestElement:S,removeNode:E,fragmentFromNodeChildren:C,createIterator:T,DomPosition:A},e.DOMException=D}),O.createCoreModule("DomRange",["DomUtil"],function(e,t){function n(e,t){return 3!=e.nodeType&&(U(e,t.startContainer)||U(e,t.endContainer))}function r(e){return e.document||z(e.startContainer)}function i(e){return new N(e.parentNode,B(e))}function o(e){return new N(e.parentNode,B(e)+1)}function a(e,t,n){var r=11==e.nodeType?e.firstChild:e;return F(t)?n==t.length?M.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:H(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function s(e,t,n){if(S(e),S(t),r(t)!=r(e))throw new j("WRONG_DOCUMENT_ERR");var i=q(e.startContainer,e.startOffset,t.endContainer,t.endOffset),o=q(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?i<=0&&o>=0:i<0&&o>0}function l(e){for(var t,n,i,o=r(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(i=e.getSubtreeIterator(),n.appendChild(l(i)),i.detach()),10==n.nodeType)throw new j("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function c(e,t,n){var r,i;n=n||{stop:!1};for(var o,a;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1)return void(n.stop=!0);if(a=e.getSubtreeIterator(),c(a,t,n),a.detach(),n.stop)return}else for(r=M.createIterator(o);i=r.next();)if(t(i)===!1)return void(n.stop=!0)}function u(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),u(t),t.detach()):e.remove()}function d(e){for(var t,n,i=r(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(d(n)),n.detach()):e.remove(),10==t.nodeType)throw new j("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function f(e,t,n){var r,i=!(!t||!t.length),o=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var a=[];return c(new p(e,!1),function(t){if((!i||r.test(t.nodeType))&&(!o||n(t))){var s=e.startContainer;if(t!=s||!F(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&F(l)&&0==e.endOffset||a.push(t)}}}),a}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+M.inspectNode(e.startContainer)+":"+e.startOffset+", "+M.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&F(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||F(this.sc)?V(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||F(this.ec)?V(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function g(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,G(e,r))return i;i=i.parentNode}return null}}function m(e,t){if(ie(e,t))throw new j("INVALID_NODE_TYPE_ERR")}function v(e,t){if(!G(t,e.nodeType))throw new j("INVALID_NODE_TYPE_ERR")}function _(e,t){if(t<0||t>(F(e)?e.length:e.childNodes.length))throw new j("INDEX_SIZE_ERR")}function y(e,t){if(ne(e,!0)!==ne(t,!0))throw new j("WRONG_DOCUMENT_ERR")}function b(e){if(re(e,!0))throw new j("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new j(t)}function x(e){return K&&M.isBrokenNode(e)||!G(Z,e.nodeType)&&!ne(e,!0)}function k(e,t){return t<=(F(e)?e.length:e.childNodes.length)}function C(e){return!!e.startContainer&&!!e.endContainer&&!x(e.startContainer)&&!x(e.endContainer)&&k(e.startContainer,e.startOffset)&&k(e.endContainer,e.endOffset)}function S(e){if(!C(e))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function E(e,t){S(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=n===i;F(i)&&o>0&&o<i.length&&H(i,o,t),F(n)&&r>0&&r<n.length&&(n=H(n,r,t),a?(o-=r,i=n):i==n.parentNode&&o>=B(n)&&o++,r=0),e.setStartAndEnd(n,r,i,o)}function $(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function T(e){e.START_TO_START=ce,e.START_TO_END=ue,e.END_TO_END=de,e.END_TO_START=fe,e.NODE_BEFORE=he,e.NODE_AFTER=pe,e.NODE_BEFORE_AND_AFTER=ge,e.NODE_INSIDE=me}function A(e){T(e),T(e.prototype)}function D(e,t){return function(){S(this);var n,r,i=this.startContainer,a=this.startOffset,s=this.commonAncestorContainer,l=new p(this,!0);i!==s&&(n=V(i,s,!0),r=o(n),i=r.node,a=r.offset),c(l,b),l.reset();var u=e(l);return l.detach(),t(this,i,a,i,a),u}}function O(t,r){function a(e,t){return function(n){v(n,J),v(Y(n),Z);var r=(e?i:o)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var i=e.endContainer,o=e.endOffset;t===e.startContainer&&n===e.startOffset||(Y(t)==Y(i)&&1!=q(t,n,i,o)||(i=t,o=n),r(e,t,n,i,o))}function l(e,t,n){var i=e.startContainer,o=e.startOffset;t===e.endContainer&&n===e.endOffset||(Y(t)==Y(i)&&q(t,n,i,o)!=-1||(i=t,o=n),r(e,i,o,t,n))}var c=function(){};c.prototype=e.rangePrototype,t.prototype=new c,L.extend(t.prototype,{setStart:function(e,t){m(e,!0),_(e,t),s(this,e,t)},setEnd:function(e,t){m(e,!0),_(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,o=n;switch(e.length){case 3:o=e[2];break;case 4:i=e[2],o=e[3]}r(this,t,n,i,o)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){S(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),r(this,e,0,e,W(e))},selectNode:function(e){m(e,!1),v(e,J);var t=i(e),n=o(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:D(d,r),deleteContents:D(u,r),canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new p(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},splitBoundaries:function(){E(this)},splitBoundariesPreservingPositions:function(e){E(this,e)},normalizeBoundaries:function(){S(this);var e,t=this.startContainer,n=this.startOffset,i=this.endContainer,o=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),X(t))},s=function(e){var r=e.previousSibling;if(r&&r.nodeType==e.nodeType){t=e;var a=e.length;if(n=r.length,e.insertData(0,r.data),X(r),t==i)o+=n,i=t;else if(i==e.parentNode){var s=B(e);o==s?(i=e,o=a):o>s&&o--}}},l=!0;if(F(i))o==i.length?a(i):0==o&&(e=i.previousSibling,e&&e.nodeType==i.nodeType&&(o=e.length,t==i&&(l=!1),e.appendData(i.data),X(i),i=e));else{if(o>0){var c=i.childNodes[o-1];c&&F(c)&&a(c)}l=!this.collapsed}if(l){if(F(t))0==n?s(t):n==t.length&&(e=t.nextSibling,e&&e.nodeType==t.nodeType&&(i==e&&(i=t,o+=t.length),t.appendData(e.data),X(e)));else if(n<t.childNodes.length){var u=t.childNodes[n];u&&F(u)&&s(u)}}else t=i,n=o;r(this,t,n,i,o)},collapseToPoint:function(e,t){m(e,!0),_(e,t),this.setStartAndEnd(e,t)}}),A(t)}function P(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:M.getCommonAncestor(e.startContainer,e.endContainer)}function R(e,t,n,r,i){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,e.document=M.getDocument(t),P(e)}function I(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,P(this)}var M=e.dom,L=e.util,N=M.DomPosition,j=e.DOMException,F=M.isCharacterDataNode,B=M.getNodeIndex,U=M.isOrIsAncestorOf,z=M.getDocument,q=M.comparePoints,H=M.splitDataNode,V=M.getClosestAncestorIn,W=M.getNodeLength,G=M.arrayContains,Y=M.getRootContainer,K=e.features.crashyTextNodes,X=M.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,F(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!F(n)||n!==this.sc&&n!==this.ec?n.parentNode&&X(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return n(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse(!1);else{e=new I(r(this.range));var t=this._current,n=t,i=0,o=t,a=W(t);U(t,this.sc)&&(n=this.sc,i=this.so),U(t,this.ec)&&(o=this.ec,a=this.eo),R(e,n,i,o,a)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var J=[1,3,4,5,7,8,10],Z=[2,9,11],Q=[5,6,10,12],ee=[1,3,4,5,7,8,10,11],te=[1,3,4,5,7,8],ne=g([9,11]),re=g(Q),ie=g([6,10,12]),oe=document.createElement("style"),ae=!1;try{oe.innerHTML="<b>x</b>",ae=3==oe.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=ae;var se=ae?function(e){var t=this.startContainer,n=z(t);if(!t)throw new j("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:F(t)&&(r=M.parentElement(t)),r=null===r||"HTML"==r.nodeName&&M.isHtmlNamespace(z(r).documentElement)&&M.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,M.fragmentFromNodeChildren(r)}:function(e){var t=r(this),n=t.createElement("body");return n.innerHTML=e,M.fragmentFromNodeChildren(n)},le=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ce=0,ue=1,de=2,fe=3,he=0,pe=1,ge=2,me=3;L.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){S(this),y(this.startContainer,t.startContainer);var n,r,i,o,a=e==fe||e==ce?"start":"end",s=e==ue||e==ce?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],i=t[s+"Container"],o=t[s+"Offset"],q(n,r,i,o)},insertNode:function(e){if(S(this),v(e,ee),b(this.startContainer),U(e,this.startContainer))throw new j("HIERARCHY_REQUEST_ERR");var t=a(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){S(this);var e,t;if(this.collapsed)return r(this).createDocumentFragment();if(this.startContainer===this.endContainer&&F(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=r(this).createDocumentFragment(),t.appendChild(e),t;var n=new p(this,!0);return e=l(n),n.detach(),e},canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new p(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},surroundContents:function(e){if(v(e,te),!this.canSurroundContents())throw new j("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);a(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new I(r(this)),n=le.length;n--;)e=le[n],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&F(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return c(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=B(e);if(!t)throw new j("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return r<0?i>0?ge:he:i>0?pe:me},comparePoint:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),q(e,t,this.startContainer,this.startOffset)<0?-1:q(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:se,toHtml:function(){return $(this)},intersectsNode:function(e,t){if(S(this),w(e,"NOT_FOUND_ERR"),z(e)!==r(this))return!1;var n=e.parentNode,i=B(e);w(n,"NOT_FOUND_ERR");var o=q(n,i,this.endContainer,this.endOffset),a=q(n,i+1,this.startContainer,this.startOffset);return t?o<=0&&a>=0:o<0&&a>0},isPointInRange:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),q(e,t,this.startContainer,this.startOffset)>=0&&q(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return s(this,e,!1)},intersectsOrTouchesRange:function(e){return s(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=q(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=q(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return t==-1&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return q(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset),1==q(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new j("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,W(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return S(this),f(this,e,t)},getDocument:function(){return r(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var n=r(this),i=e.createRange(n);t=t||M.getBody(n),i.selectNodeContents(t);var o=this.intersection(i),a=0,s=0;return o&&(i.setEnd(o.startContainer,o.startOffset),a=i.toString().length,s=a+o.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,o,a,s=[t],l=!1,c=!1;!c&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!l&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),l=!0),l&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),c=!0),n=i;else for(a=r.childNodes,o=a.length;o--;)s.push(a[o])},getName:function(){return"DomRange"},equals:function(e){return I.rangesEqual(this,e)},isValid:function(){return C(this)},inspect:function(){return h(this)},detach:function(){}}),O(I,R),L.extend(I,{rangeProperties:le,RangeIterator:p,copyComparisonConstants:A,createPrototypeRange:O,inspect:h,toHtml:$,getRangeDocument:r,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=I}),O.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,i=e.dom,o=e.util,a=i.DomPosition,s=e.DomRange,l=i.getBody,c=i.getContentDocument,u=i.isCharacterDataNode;if(e.features.implementsDomRange&&!function(){function r(e){for(var t,n=f.length;n--;)t=f[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function a(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(o||a||s)&&(e.setEnd(r,i),e.setStart(t,n))}var u,d,f=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},s.createPrototypeRange(n,a),u=n.prototype,u.selectNode=function(e){this.nativeRange.selectNode(e),r(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},u.collapse=function(e){this.nativeRange.collapse(e),r(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){r(this)},u.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");l(document).appendChild(h);var p=document.createRange();p.setStart(h,0),p.setEnd(h,0);try{p.setStart(h,1),u.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},u.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},d=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(e){u.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},u.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},d=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}u.setStartBefore=d("setStartBefore","setEndBefore"),u.setStartAfter=d("setStartAfter","setEndAfter"),u.setEndBefore=d("setEndBefore","setStartBefore"),u.setEndAfter=d("setEndAfter","setStartAfter"),u.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))},p.selectNodeContents(h),p.setEnd(h,3);var g=document.createRange();g.selectNodeContents(h),g.setEnd(h,4),g.setStart(h,2),p.compareBoundaryPoints(p.START_TO_END,g)==-1&&1==p.compareBoundaryPoints(p.END_TO_START,g)?u.compareBoundaryPoints=function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:u.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var v=m.firstChild,_=l(document);_.appendChild(m),p.setStart(v,1),p.setEnd(v,2),p.deleteContents(),"13"==v.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},u.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),_.removeChild(m),_=null,o.isHostMethod(p,"createContextualFragment")&&(u.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(h),u.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange){var d=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();n=e.duplicate(),n.collapse(!1);var o=n.parentElement(),a=r==o?r:i.getCommonAncestor(r,o);return a==t?a:i.getCommonAncestor(t,a)},f=function(e){return 0==e.compareEndPoints("StartToEnd",e)},h=function(e,t,n,r,o){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(i.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var c=new a(l.parentNode,i.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var d=i.getDocument(l).createElement("span");d.parentNode&&i.removeNode(d);for(var f,h,p,g,m,v=n?"StartToStart":"StartToEnd",_=o&&o.containerElement==l?o.nodeIndex:0,y=l.childNodes.length,b=y,w=b;;){if(w==y?l.appendChild(d):l.insertBefore(d,l.childNodes[w]),s.moveToElementText(d),f=s.compareEndPoints(v,e),0==f||_==b)break;if(f==-1){if(b==_+1)break;_=w}else b=b==_+1?_:w;w=Math.floor((_+b)/2),l.removeChild(d)}if(m=d.nextSibling,f==-1&&m&&u(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var x;if(/[\r\n]/.test(m.data)){var k=s.duplicate(),C=k.text.replace(/\r\n/g,"\r").length;for(x=k.moveStart("character",C);(f=k.compareEndPoints("StartToEnd",k))==-1;)x++,k.moveStart("character",1)}else x=s.text.length;g=new a(m,x)}else h=(r||!n)&&d.previousSibling,p=(r||n)&&d.nextSibling,g=p&&u(p)?new a(p,0):h&&u(h)?new a(h,h.data.length):new a(l,i.getNodeIndex(d));return i.removeNode(d),{boundaryPosition:g,nodeInfo:{nodeIndex:w,containerElement:l}}},p=function(e,t){var n,r,o,a,s=e.offset,c=i.getDocument(e.node),d=l(c).createTextRange(),f=u(e.node);return f?(n=e.node,r=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,r=e.node),o=c.createElement("span"),o.innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),d.moveToElementText(o),d.collapse(!t),r.removeChild(o),f&&d[t?"moveStart":"moveEnd"]("character",s),d};r=function(e){this.textRange=e,this.refresh()},r.prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=d(this.textRange);f(this.textRange)?t=e=h(this.textRange,r,!0,!0).boundaryPosition:(n=h(this.textRange,r,!0,!1),e=n.boundaryPosition,t=h(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var g=function(e){if(e.collapsed)return p(new a(e.startContainer,e.startOffset),!0);var t=p(new a(e.startContainer,e.startOffset),!0),n=p(new a(e.endContainer,e.endOffset),!1),r=l(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=g,r.prototype.toTextRange=function(){return g(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var m=function(e){return e("return this;")()}(Function);"undefined"==typeof m.Range&&(m.Range=r),e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=c(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=c(e,t,"createRangyRange"),new s(e)},e.createIframeRange=function(n){return t.deprecationNotice("createIframeRange()","createRange(iframeEl)"),e.createRange(n)},e.createIframeRangyRange=function(n){return t.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),e.createRangyRange(n)},e.addShimListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),O.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(T.isWindow(e))return e;if(e instanceof v)return e.win;var r=T.getContentDocument(e,t,n);return T.getWindow(r)}return window}function i(e){return r(e,"getWinSelection").getSelection()}function o(e){return r(e,"getDocSelection").document.selection}function a(e){var t=!1;return e.anchorNode&&(t=1==T.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function u(t){var n;return t instanceof O?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof P?n=t.nativeRange:M.implementsDomRange&&t instanceof T.getWindow(t.startContainer).Range&&(n=t),n}function d(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!T.isAncestorOf(e[0],e[t]))return!1;return!0}function f(e){var n=e.getNodes();if(!d(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function h(e){return!!e&&"undefined"!=typeof e.text}function p(e,t){var n=new P(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function g(t){if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else{var n=t.docSelection.createRange();if(h(n))p(t,n);else{t.rangeCount=n.length;for(var r,i=N(n.item(0)),o=0;o<t.rangeCount;++o)r=e.createRange(i),r.selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,n){for(var r=e.docSelection.createRange(),i=f(n),o=N(r.item(0)),a=j(o).createControlRange(),s=0,l=r.length;s<l;++s)a.add(r.item(s));try{a.add(i)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),g(e)}function v(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function _(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function y(e,t){for(var n,r,i=te.length;i--;)if(n=te[i],r=n.selection,"deleteAll"==t)_(r);else if(n.win==e)return"delete"==t?(te.splice(i,1),!0):r;return"deleteAll"==t&&(te.length=0),null}function b(e,n){for(var r,i=N(n[0].startContainer),o=j(i).createControlRange(),a=0,s=n.length;a<s;++a){r=f(n[a]);try{o.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),g(e)}function w(e,t){if(e.win.document!=N(t))throw new R("WRONG_DOCUMENT_ERR")}function x(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0),i["set"+(t?"Start":"End")](n,r)):(i=e.createRange(this.win.document),i.setStartAndEnd(n,r)),this.setSingleRange(i,this.isBackward())}}function k(e){var t=[],n=new I(e.anchorNode,e.anchorOffset),r=new I(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var o=0,a=e.rangeCount;o<a;++o)t[o]=O.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.config.checkSelectionRanges=!0;var C,S,E="boolean",$="number",T=e.dom,A=e.util,D=A.isHostMethod,O=e.DomRange,P=e.WrappedRange,R=e.DOMException,I=T.DomPosition,M=e.features,L="Control",N=T.getDocument,j=T.getBody,F=O.rangesEqual,B=D(window,"getSelection"),U=A.isHostObject(document,"selection");M.implementsWinGetSelection=B,M.implementsDocSelection=U;var z=U&&(!B||e.config.preferTextRange);if(z)C=o,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||N(n.createRange().parentElement())==t};else{if(!B)return t.fail("Neither document.selection or window.getSelection() detected."),!1;C=i,e.isSelectionValid=function(){return!0}}e.getNativeSelection=C;var q=C();if(!q)return t.fail("Native selection was null (possibly issue 138?)"),!1;var H=e.createNativeRange(document),V=j(document),W=A.areHostProperties(q,["anchorNode","focusNode","anchorOffset","focusOffset"]);M.selectionHasAnchorAndFocus=W;var G=D(q,"extend");M.selectionHasExtend=G;var Y=typeof q.rangeCount==$;M.selectionHasRangeCount=Y;var K=!1,X=!0,J=G?function(t,n){var r=O.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(u(i)),t.extend(n.startContainer,n.startOffset)}:null;A.areHostMethods(q,["addRange","getRangeAt","removeAllRanges"])&&typeof q.rangeCount==$&&M.implementsDomRange&&!function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,i=[],o=a(t),s=0;s<n;++s)i[s]=t.getRangeAt(s);var l=T.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("Â Â Â ")),u=document.createRange();if(u.setStart(c,1),u.collapse(!0),t.removeAllRanges(),t.addRange(u),X=1==t.rangeCount,t.removeAllRanges(),!r){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)K=!1;else{var f=u.cloneRange();u.setStart(c,0),f.setEnd(c,3),f.setStart(c,2),t.addRange(u),t.addRange(f),K=2==t.rangeCount}}for(T.removeNode(l),t.removeAllRanges(),s=0;s<n;++s)0==s&&o?J?J(t,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(i[s])):t.addRange(i[s])}}(),M.selectionSupportsMultipleRanges=K,M.collapsedNonEditableSelectionsSupported=X;var Z,Q=!1;V&&D(V,"createControlRange")&&(Z=V.createControlRange(),A.areHostProperties(Z,["item","add"])&&(Q=!0)),M.implementsControlRange=Q,S=W?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var ee;D(q,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:W&&(ee=function(t){var n=N(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),v.prototype=e.selectionPrototype;var te=[],ne=function(e){if(e&&e instanceof v)return e.refresh(),e;e=r(e,"getNativeSelection");var t=y(e),n=C(e),i=U?o(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh()):(t=new v(n,i,e),te.push({win:e,selection:t})),t};e.getSelection=ne,e.getIframeSelection=function(n){return t.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),e.getSelection(T.getIframeWindow(n))};var re=v.prototype;if(!z&&W&&A.areHostMethods(q,["removeAllRanges","addRange"])){re.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var ie=function(e,t){J(e.nativeSelection,t),e.refresh()};Y?re.addRange=function(t,r){if(Q&&U&&this.docSelection.type==L)m(this,t);else if(n(r)&&G)ie(this,t);else{var i;K?i=this.rangeCount:(this.removeAllRanges(),i=0);var o=u(t).cloneRange();try{this.nativeSelection.addRange(o)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var a=ee(this.nativeSelection,this.rangeCount-1);a&&!F(a,t)&&(t=new P(a))}this._ranges[this.rangeCount-1]=t,s(this,t,se(this.nativeSelection)),this.isCollapsed=S(this)}else this.refresh()}}:re.addRange=function(e,t){n(t)&&G?ie(this,e):(this.nativeSelection.addRange(u(e)),
this.refresh())},re.setRanges=function(e){if(Q&&U&&e.length>1)b(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(D(q,"empty")&&D(H,"select")&&Q&&z))return t.fail("No means of selecting a Range or TextRange was found"),!1;re.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=N(this.anchorNode);else if(this.docSelection.type==L){var t=this.docSelection.createRange();t.length&&(e=N(t.item(0)))}if(e){var n=j(e).createTextRange();n.select(),this.docSelection.empty()}}}catch(e){}c(this)},re.addRange=function(t){this.docSelection.type==L?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},re.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?b(this,e):t&&this.addRange(e[0])}}re.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new R("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var oe;if(z)oe=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=j(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==L?g(t):h(n)?p(t,n):c(t)};else if(D(q,"getRangeAt")&&typeof q.rangeCount==$)oe=function(t){if(Q&&U&&t.docSelection.type==L)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],se(t.nativeSelection)),t.isCollapsed=S(t)}else c(t)};else{if(!W||typeof q.isCollapsed!=E||typeof H.collapsed!=E||!M.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;oe=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=S(e)):c(e)}}re.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(oe(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!F(t[i],this._ranges[i]))return!0;return!1}};var ae=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;r<i;++r)F(t,n[r])||e.addRange(n[r]);e.rangeCount||c(e)};Q&&U?re.removeRange=function(e){if(this.docSelection.type==L){for(var t,n=this.docSelection.createRange(),r=f(e),i=N(n.item(0)),o=j(i).createControlRange(),a=!1,s=0,l=n.length;s<l;++s)t=n.item(s),t!==r||a?o.add(n.item(s)):a=!0;o.select(),g(this)}else ae(this,e)}:re.removeRange=function(e){ae(this,e)};var se;!z&&W&&M.implementsDomRange?(se=a,re.isBackward=function(){return se(this)}):se=re.isBackward=function(){return!1},re.isBackwards=re.isBackward,re.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},re.collapse=function(t,n){w(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},re.collapseToStart=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},re.collapseToEnd=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},re.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},re.deleteFromDocument=function(){if(Q&&U&&this.docSelection.type==L){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),T.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}}},re.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},re.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},re.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},re.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},re.setStart=x(!0),re.setEnd=x(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},re.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},re.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},re.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},re.moveToBookmark=function(t){for(var n,r,i=[],o=0;n=t.rangeBookmarks[o++];)r=e.createRange(this.win),r.moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},re.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},re.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},re.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(O.toHtml(t))}),e.join("")},M.implementsTextRange&&(re.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(h(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),re.getName=function(){return"WrappedSelection"},re.inspect=function(){return k(this)},re.detach=function(){y(this.win,"delete"),_(this)},v.detachAll=function(){y(null,"deleteAll")},v.inspect=k,v.isDirectionBackward=n,e.Selection=v,e.selectionPrototype=re,e.addShimListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})});var L=!1,N=function(e){L||(L=!0,!O.initialized&&O.config.autoInitialize&&d())};return A&&("complete"==document.readyState?N():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),R(window,"load",N))),O},this)},function(e,t,n){(function(t){function r(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._decoder=null,this._encoding=null}var i=n(7).Transform,o=n(3),a=n(26).StringDecoder;e.exports=r,o(r,i),r.prototype.update=function(e,n,r){"string"==typeof e&&(e=new t(e,n));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},r.prototype._flush=function(e){var t;try{this.push(this._final())}catch(e){t=e}finally{e(t)}},r.prototype._finalOrDigest=function(e){var n=this._final()||new t("");return e&&(n=this._toString(n,e,!0)),n},r.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r}}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(t){function r(e){c.call(this,"digest"),this._hash=e,this.buffers=[]}function i(e){c.call(this,"digest"),this._hash=e}var o=n(3),a=n(58),s=n(120),l=n(121),c=n(12);o(r,c),r.prototype._update=function(e){this.buffers.push(e)},r.prototype._final=function(){var e=t.concat(this.buffers),n=this._hash(e);return this.buffers=null,n},o(i,c),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return e=e.toLowerCase(),"md5"===e?new r(a):"rmd160"===e||"ripemd160"===e?new r(s):new i(l(e))}}).call(t,n(0).Buffer)},function(e,t,n){(function(r){var i;!function(o){"use strict";function a(){var e=o.crypto||o.msCrypto;if(!f&&e&&e.getRandomValues)try{var t=new Uint8Array(16);g=f=function(){return e.getRandomValues(t),t},f()}catch(e){}if(!f){var n=new Array(16);h=f=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console.warn}}function s(){try{var e=n(105).randomBytes;p=f=e&&function(){return e(16)},f()}catch(e){}}function l(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=_[e])});i<16;)t[r+i++]=0;return t}function c(e,t){var n=t||0,r=v;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function u(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:x,a=null!=e.msecs?e.msecs:(new Date).getTime(),s=null!=e.nsecs?e.nsecs:C+1,l=a-k+(s-C)/1e4;if(l<0&&null==e.clockseq&&(o=o+1&16383),(l<0||a>k)&&null==e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k=a,C=s,x=o,a+=122192928e5;var u=(1e4*(268435455&a)+s)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var f=e.node||w,h=0;h<6;h++)i[r+h]=f[h];return t?t:c(i)}function d(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new m(16):null,e=null),e=e||{};var i=e.random||(e.rng||f)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[r+o]=i[o];return t||c(i)}var f,h,p,g;o?a():s();for(var m="function"==typeof r?r:Array,v=[],_={},y=0;y<256;y++)v[y]=(y+256).toString(16).substr(1),_[v[y]]=y;var b=f(),w=[1|b[0],b[1],b[2],b[3],b[4],b[5]],x=16383&(b[6]<<8|b[7]),k=0,C=0,S=d;S.v1=u,S.v4=d,S.parse=l,S.unparse=c,S.BufferClass=m,S._rng=f,S._mathRNG=h,S._nodeRNG=p,S._whatwgRNG=g,"undefined"!=typeof e&&e.exports?e.exports=S:(i=function(){return S}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}("undefined"!=typeof window?window:null)}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function n(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}n.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var r=this._len+=e.length,i=this._s||0,o=0,a=this._block;i<r;){for(var s=Math.min(e.length,o+this._blockSize-i%this._blockSize),l=s-o,c=0;c<l;c++)a[i%this._blockSize+c]=e[c+o];i+=l,o+=l,i%this._blockSize===0&&this._update(a)}return this._s=i,this},n.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=n}).call(t,n(0).Buffer)},function(e,t,n){var r=t;r.Reporter=n(86).Reporter,r.DecoderBuffer=n(43).DecoderBuffer,r.EncoderBuffer=n(43).EncoderBuffer,r.Node=n(85)},function(e,t,n){"use strict";(function(e){var r=n(0),i=r.Buffer,o=r.SlowBuffer,a=r.kMaxLength||2147483647;t.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var r=n,o=t;void 0===o&&(r=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var l=new i(o,r),c=l.length,u=-1;++u<e;)s[u]=l[u%c];else s.fill(o);return s},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new i(e)},t.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);"undefined"==typeof o&&(o=0);var a=r;if("undefined"==typeof a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(t,n(8))},function(e,t,n){(function(t){e.exports=function(e,n){for(var r=Math.min(e.length,n.length),i=new t(r),o=0;o<r;++o)i[o]=e[o]^n[o];return i}}).call(t,n(0).Buffer)},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(5))},function(e,t,n){"use strict";(function(t,n,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(e,i){if(e>65536)throw new Error("requested too many random bytes");var o=new t.Uint8Array(e);e>0&&a.getRandomValues(o);var s=new n(o.buffer);return"function"==typeof i?r.nextTick(function(){i(null,s)}):s}var a=t.crypto||t.msCrypto;a&&a.getRandomValues?e.exports=o:e.exports=i}).call(t,n(8),n(0).Buffer,n(5))},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=n(6),l=n(9);l.inherits=n(3),l.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){"use strict";(function(t,r){function i(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(e,t){C=C||n(6),e=e||{},this.objectMode=!!e.objectMode,t instanceof C&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function s(e){return C=C||n(6),P.call(s,this)||this instanceof C?(this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void T.call(this)):new s(e)}function l(e,t){var n=new Error("write after end");e.emit("error",n),S(t,n)}function c(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):D.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),S(r,o),i=!1),i}function u(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=O.from(t,n)),t}function d(e,t,n,r,i){n=u(t,n,r),D.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,r,i),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,a,n,r,i);return s}function f(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r,i){--t.pendingcb,n?S(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(p(n),t)h(e,n,r,t,i);else{var o=y(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?E(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||v(e,t),t.pendingcb--,r(),w(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;f(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback,u=t.objectMode?1:s.length;if(f(e,t,!1,u,s,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=y(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function x(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?S(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var C,S=n(20),E=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:S;s.WritableState=a;var $=n(9);$.inherits=n(3);var T,A={deprecate:n(75)};!function(){try{T=n(7)}catch(e){}finally{T||(T=n(10).EventEmitter)}}();var D=n(0).Buffer,O=n(17);$.inherits(s,T),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var P;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!P.call(this,e)||e&&e._writableState instanceof a}})):P=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),D.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=i),r.ended?l(this,n):c(this,r,e,n)&&(r.pendingcb++,o=d(this,r,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||x(this,r,n)}}).call(t,n(5),n(4).setImmediate)},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(){return mr.apply(null,arguments)}function n(e){mr=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,r){return _t(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function h(e){return null==e._pf&&(e._pf=f()),e._pf}function p(e){if(null==e._isValid){var t=h(e),n=_r.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=d(NaN);return null!=e?u(h(t),e):h(t).userInvalidated=!0,t}function m(e){return void 0===e}function v(e,t){var n,r,i;if(m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=h(t)),m(t._locale)||(e._locale=t._locale),yr.length>0)for(n in yr)r=yr[n],i=t[r],m(i)||(e[r]=i);return e}function _(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),br===!1&&(br=!0,t.updateOffset(this),br=!1)}function y(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=b(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&w(e[r])!==w(t[r]))&&a++;return a+o}function k(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function C(e,n){var r=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}k(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function S(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),wr[e]||(k(n),wr[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function $(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function T(e,t){var n,r=u({},e);for(n in t)c(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},u(r[n],e[n]),u(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&i(e[n])&&(r[n]=u({},r[n]));return r}function A(e){null!=e&&this.set(e)}function D(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r}function O(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function P(){return this._invalidDate}function R(e){return this._ordinal.replace("%d",e)}function I(e,t,n,r){var i=this._relativeTime[n];return E(i)?i(e,t,n,r):i.replace(/%d/i,e)}function M(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function L(e,t){var n=e.toLowerCase();Or[n]=Or[n+"s"]=Or[t]=e}function N(e){return"string"==typeof e?Or[e]||Or[e.toLowerCase()]:void 0}function j(e){var t,n,r={};for(n in e)c(e,n)&&(t=N(n),t&&(r[t]=e[n]));return r}function F(e,t){Pr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Pr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function U(e,n){return function(r){return null!=r?(q(this,e,r),t.updateOffset(this,n),this):z(this,e)}}function z(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function H(e){return e=N(e),E(this[e])?this[e]():this}function V(e,t){if("object"==typeof e){e=j(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=N(e),E(this[e]))return this[e](t);return this}function W(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function G(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Lr[e]=i),t&&(Lr[t[0]]=function(){return W(i.apply(this,arguments),t[1],t[2])}),n&&(Lr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function K(e){var t,n,r=e.match(Rr);for(t=0,n=r.length;t<n;t++)Lr[r[t]]?r[t]=Lr[r[t]]:r[t]=Y(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=r[i]instanceof Function?r[i].call(t,e):r[i];return o}}function X(e,t){return e.isValid()?(t=J(t,e.localeData()),Mr[t]=Mr[t]||K(t),Mr[t](e)):e.localeData().invalidDate()}function J(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Ir.lastIndex=0;r>=0&&Ir.test(e);)e=e.replace(Ir,n),Ir.lastIndex=0,r-=1;return e}function Z(e,t,n){ei[e]=E(t)?t:function(e,r){return e&&n?n:t}}function Q(e,t){return c(ei,e)?ei[e](t._strict,t._locale):new RegExp(ee(e))}function ee(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=w(e)}),n=0;n<e.length;n++)ti[e[n]]=r}function re(e,t){ne(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function ie(e,t,n){null!=t&&c(ti,e)&&ti[e](t,n._a,n,e)}function oe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||fi).test(t)?"format":"standalone"][e.month()]:this._months}function se(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[fi.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function le(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=di.call(this._shortMonthsParse,a),i!==-1?i:null):(i=di.call(this._longMonthsParse,a),i!==-1?i:null):"MMM"===t?(i=di.call(this._shortMonthsParse,a),i!==-1?i:(i=di.call(this._longMonthsParse,a),i!==-1?i:null)):(i=di.call(this._longMonthsParse,a),i!==-1?i:(i=di.call(this._shortMonthsParse,a),i!==-1?i:null))}function ce(e,t,n){var r,i,o;if(this._monthsParseExact)return le.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ue(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function de(e){return null!=e?(ue(this,e),t.updateOffset(this,!0),this):z(this,"Month")}function fe(){return oe(this.year(),this.month())}function he(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=gi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(e){return this._monthsParseExact?(c(this,"_monthsRegex")||ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=mi),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex);
}function ge(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=d([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=te(r[t]),i[t]=te(i[t]);for(t=0;t<24;t++)o[t]=te(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function me(e){return ve(e)?366:365}function ve(e){return e%4===0&&e%100!==0||e%400===0}function _e(){return ve(this.year())}function ye(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function we(e,t,n){var r=7+t-n,i=(7+be(e,0,r).getUTCDay()-t)%7;return-i+r-1}function xe(e,t,n,r,i){var o,a,s=(7+n-r)%7,l=we(e,r,i),c=1+7*(t-1)+s+l;return c<=0?(o=e-1,a=me(o)+c):c>me(e)?(o=e+1,a=c-me(e)):(o=e,a=c),{year:o,dayOfYear:a}}function ke(e,t,n){var r,i,o=we(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+Ce(i,t,n)):a>Ce(e.year(),t,n)?(r=a-Ce(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ce(e,t,n){var r=we(e,t,n),i=we(e+1,t,n);return(me(e)-r+i)/7}function Se(e){return ke(e,this._week.dow,this._week.doy).week}function Ee(){return this._week.dow}function $e(){return this._week.doy}function Te(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ae(e){var t=ke(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function De(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Oe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Pe(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Re(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Me(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=di.call(this._weekdaysParse,a),i!==-1?i:null):"ddd"===t?(i=di.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=di.call(this._minWeekdaysParse,a),i!==-1?i:null):"dddd"===t?(i=di.call(this._weekdaysParse,a),i!==-1?i:(i=di.call(this._shortWeekdaysParse,a),i!==-1?i:(i=di.call(this._minWeekdaysParse,a),i!==-1?i:null))):"ddd"===t?(i=di.call(this._shortWeekdaysParse,a),i!==-1?i:(i=di.call(this._weekdaysParse,a),i!==-1?i:(i=di.call(this._minWeekdaysParse,a),i!==-1?i:null))):(i=di.call(this._minWeekdaysParse,a),i!==-1?i:(i=di.call(this._weekdaysParse,a),i!==-1?i:(i=di.call(this._shortWeekdaysParse,a),i!==-1?i:null)))}function Le(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Me.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ne(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=De(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Fe(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Oe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=xi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ki),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ze(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ci),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qe(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=d([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),l.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(e),s.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)s[t]=te(s[t]),l[t]=te(l[t]),c[t]=te(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function He(){return this.hours()%12||12}function Ve(){return this.hours()||24}function We(e,t){G(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function Ye(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Xe(e){return e?e.toLowerCase().replace("_","-"):e}function Je(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Xe(e[o]).split("-"),t=i.length,n=Xe(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=Ze(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return null}function Ze(t){var n=null;if(!Ai[t]&&"undefined"!=typeof e&&e&&e.exports)try{n=Si._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Qe(n)}catch(e){}return Ai[t]}function Qe(e,t){var n;return e&&(n=m(t)?nt(e):et(e,t),n&&(Si=n)),Si._abbr}function et(e,t){if(null!==t){var n=Ti;if(t.abbr=e,null!=Ai[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ai[e]._config;else if(null!=t.parentLocale){if(null==Ai[t.parentLocale])return Di[t.parentLocale]||(Di[t.parentLocale]=[]),Di[t.parentLocale].push({name:e,config:t}),null;n=Ai[t.parentLocale]._config}return Ai[e]=new A(T(n,t)),Di[e]&&Di[e].forEach(function(e){et(e.name,e.config)}),Qe(e),Ai[e]}return delete Ai[e],null}function tt(e,t){if(null!=t){var n,r=Ti;null!=Ai[e]&&(r=Ai[e]._config),t=T(r,t),n=new A(t),n.parentLocale=Ai[e],Ai[e]=n,Qe(e)}else null!=Ai[e]&&(null!=Ai[e].parentLocale?Ai[e]=Ai[e].parentLocale:null!=Ai[e]&&delete Ai[e]);return Ai[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Si;if(!r(e)){if(t=Ze(e))return t;e=[e]}return Je(e)}function rt(){return Cr(Ai)}function it(e){var t,n=e._a;return n&&h(e).overflow===-2&&(t=n[ri]<0||n[ri]>11?ri:n[ii]<1||n[ii]>oe(n[ni],n[ri])?ii:n[oi]<0||n[oi]>24||24===n[oi]&&(0!==n[ai]||0!==n[si]||0!==n[li])?oi:n[ai]<0||n[ai]>59?ai:n[si]<0||n[si]>59?si:n[li]<0||n[li]>999?li:-1,h(e)._overflowDayOfYear&&(t<ni||t>ii)&&(t=ii),h(e)._overflowWeeks&&t===-1&&(t=ci),h(e)._overflowWeekday&&t===-1&&(t=ui),h(e).overflow=t),e}function ot(e){var t,n,r,i,o,a,s=e._i,l=Oi.exec(s)||Pi.exec(s);if(l){for(h(e).iso=!0,t=0,n=Ii.length;t<n;t++)if(Ii[t][1].exec(l[1])){i=Ii[t][0],r=Ii[t][2]!==!1;break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=Mi.length;t<n;t++)if(Mi[t][1].exec(l[3])){o=(l[2]||" ")+Mi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!Ri.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),dt(e)}else e._isValid=!1}function at(e){var n=Li.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(ot(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function st(e,t,n){return null!=e?e:null!=t?t:n}function lt(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ct(e){var t,n,r,i,o=[];if(!e._d){for(r=lt(e),e._w&&null==e._a[ii]&&null==e._a[ri]&&ut(e),e._dayOfYear&&(i=st(e._a[ni],r[ni]),e._dayOfYear>me(i)&&(h(e)._overflowDayOfYear=!0),n=be(i,0,e._dayOfYear),e._a[ri]=n.getUTCMonth(),e._a[ii]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[oi]&&0===e._a[ai]&&0===e._a[si]&&0===e._a[li]&&(e._nextDay=!0,e._a[oi]=0),e._d=(e._useUTC?be:ye).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[oi]=24)}}function ut(e){var t,n,r,i,o,a,s,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=st(t.GG,e._a[ni],ke(yt(),1,4).year),r=st(t.W,1),i=st(t.E,1),(i<1||i>7)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=ke(yt(),o,a);n=st(t.gg,e._a[ni],c.year),r=st(t.w,c.week),null!=t.d?(i=t.d,(i<0||i>6)&&(l=!0)):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o}r<1||r>Ce(n,o,a)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(s=xe(n,r,i,o,a),e._a[ni]=s.year,e._dayOfYear=s.dayOfYear)}function dt(e){if(e._f===t.ISO_8601)return void ot(e);e._a=[],h(e).empty=!0;var n,r,i,o,a,s=""+e._i,l=s.length,c=0;for(i=J(e._f,e._locale).match(Rr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(Q(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&h(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),Lr[o]?(r?h(e).empty=!1:h(e).unusedTokens.push(o),ie(o,r,e)):e._strict&&!r&&h(e).unusedTokens.push(o);h(e).charsLeftOver=l-c,s.length>0&&h(e).unusedInput.push(s),e._a[oi]<=12&&h(e).bigHour===!0&&e._a[oi]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[oi]=ft(e._locale,e._a[oi],e._meridiem),ct(e),it(e)}function ft(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ht(e){var t,n,r,i,o;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],dt(t),p(t)&&(o+=h(t).charsLeftOver,o+=10*h(t).unusedTokens.length,h(t).score=o,(null==r||o<r)&&(r=o,n=t));u(e,n||t)}function pt(e){if(!e._d){var t=j(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}function gt(e){var t=new _(it(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function mt(e){var t=e._i,n=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new _(it(t)):(s(t)?e._d=t:r(n)?ht(e):n?dt(e):vt(e),p(e)||(e._d=null),e))}function vt(e){var n=e._i;void 0===n?e._d=new Date(t.now()):s(n)?e._d=new Date(n.valueOf()):"string"==typeof n?at(e):r(n)?(e._a=l(n.slice(0),function(e){return parseInt(e,10)}),ct(e)):"object"==typeof n?pt(e):a(n)?e._d=new Date(n):t.createFromInputFallback(e)}function _t(e,t,n,a,s){var l={};return n!==!0&&n!==!1||(a=n,n=void 0),(i(e)&&o(e)||r(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=n,l._i=e,l._f=t,l._strict=a,gt(l)}function yt(e,t,n,r){return _t(e,t,n,r,!1)}function bt(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return yt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function wt(){var e=[].slice.call(arguments,0);return bt("isBefore",e)}function xt(){var e=[].slice.call(arguments,0);return bt("isAfter",e)}function kt(e){var t=j(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function Ct(e){return e instanceof kt}function St(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Et(e,t){G(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+W(~~(e/60),2)+t+W(~~e%60,2)})}function $t(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Bi)||["-",0,0],o=+(60*i[1])+w(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Tt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(y(e)||s(e)?e.valueOf():yt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):yt(e).local()}function At(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Dt(e,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=$t(Jr,e),null===e)return this}else Math.abs(e)<16&&(e*=60);return!this._isUTC&&n&&(r=At(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!n||this._changeInProgress?Wt(this,Ut(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:At(this)}function Ot(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Pt(e){return this.utcOffset(0,e)}function Rt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(At(this),"m")),this}function It(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=$t(Xr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Mt(e){return!!this.isValid()&&(e=e?yt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Lt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Nt(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),e=mt(e),e._a){var t=e._isUTC?d(e._a):yt(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function jt(){return!!this.isValid()&&!this._isUTC}function Ft(){return!!this.isValid()&&this._isUTC}function Bt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ut(e,t){var n,r,i,o=e,s=null;return Ct(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=Ui.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:w(s[ii])*n,h:w(s[oi])*n,m:w(s[ai])*n,s:w(s[si])*n,ms:w(St(1e3*s[li]))*n}):(s=zi.exec(e))?(n="-"===s[1]?-1:1,o={y:zt(s[2],n),M:zt(s[3],n),w:zt(s[4],n),d:zt(s[5],n),h:zt(s[6],n),m:zt(s[7],n),s:zt(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Ht(yt(o.from),yt(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new kt(o),Ct(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ht(e,t){var n;return e.isValid()&&t.isValid()?(t=Tt(t,e),e.isBefore(t)?n=qt(e,t):(n=qt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Vt(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(S(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Ut(n,r),Wt(this,i,e),this}}function Wt(e,n,r,i){var o=n._milliseconds,a=St(n._days),s=St(n._months);e.isValid()&&(i=null==i||i,o&&e._d.setTime(e._d.valueOf()+o*r),a&&q(e,"Date",z(e,"Date")+a*r),s&&ue(e,z(e,"Month")+s*r),i&&t.updateOffset(e,a||s))}function Gt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yt(e,n){var r=e||yt(),i=Tt(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(E(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,yt(r)))}function Kt(){return new _(this)}function Xt(e,t){var n=y(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&(t=N(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Jt(e,t){var n=y(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&(t=N(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Zt(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Qt(e,t){var n,r=y(e)?e:yt(e);return!(!this.isValid()||!r.isValid())&&(t=N(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function en(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function tn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function nn(e,t,n){var r,i,o,a;return this.isValid()?(r=Tt(e,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),t=N(t),"year"===t||"month"===t||"quarter"===t?(a=rn(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),n?a:b(a)):NaN):NaN}function rn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function on(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function an(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?E(Date.prototype.toISOString)?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function sn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+r+i+o)}function ln(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=X(this,e);return this.localeData().postformat(n)}function cn(e,t){return this.isValid()&&(y(e)&&e.isValid()||yt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function un(e){return this.from(yt(),e)}function dn(e,t){return this.isValid()&&(y(e)&&e.isValid()||yt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fn(e){return this.to(yt(),e)}function hn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function pn(){return this._locale}function gn(e){switch(e=N(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function mn(e){return e=N(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function vn(){return this._d.valueOf()-6e4*(this._offset||0)}function _n(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function bn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xn(){return this.isValid()?this.toISOString():null}function kn(){return p(this)}function Cn(){return u({},h(this))}function Sn(){return h(this).overflow}function En(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function $n(e,t){G(0,[e,e.length],0,t)}function Tn(e){return Pn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function An(e){return Pn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Dn(){return Ce(this.year(),1,4)}function On(){var e=this.localeData()._week;return Ce(this.year(),e.dow,e.doy)}function Pn(e,t,n,r,i){var o;return null==e?ke(this,r,i).year:(o=Ce(e,r,i),t>o&&(t=o),Rn.call(this,e,t,n,r,i))}function Rn(e,t,n,r,i){var o=xe(e,t,n,r,i),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function In(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Mn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Ln(e,t){t[li]=w(1e3*("0."+e))}function Nn(){return this._isUTC?"UTC":""}function jn(){return this._isUTC?"Coordinated Universal Time":""}function Fn(e){return yt(1e3*e)}function Bn(){return yt.apply(null,arguments).parseZone()}function Un(e){return e}function zn(e,t,n,r){var i=nt(),o=d().set(r,t);return i[n](o,e)}function qn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return zn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=zn(e,r,n,"month");return i}function Hn(e,t,n,r){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=n)return zn(t,(n+o)%7,r,"day");var s,l=[];for(s=0;s<7;s++)l[s]=zn(t,(s+o)%7,r,"day");return l}function Vn(e,t){return qn(e,t,"months")}function Wn(e,t){return qn(e,t,"monthsShort")}function Gn(e,t,n){return Hn(e,t,n,"weekdays")}function Yn(e,t,n){return Hn(e,t,n,"weekdaysShort")}function Kn(e,t,n){return Hn(e,t,n,"weekdaysMin")}function Xn(){var e=this._data;return this._milliseconds=Qi(this._milliseconds),this._days=Qi(this._days),this._months=Qi(this._months),e.milliseconds=Qi(e.milliseconds),e.seconds=Qi(e.seconds),e.minutes=Qi(e.minutes),e.hours=Qi(e.hours),e.months=Qi(e.months),e.years=Qi(e.years),this}function Jn(e,t,n,r){var i=Ut(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Zn(e,t){return Jn(this,e,t,1)}function Qn(e,t){return Jn(this,e,t,-1)}function er(e){return e<0?Math.floor(e):Math.ceil(e)}function tr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*er(rr(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=b(o/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,n=b(t/60),l.hours=n%24,a+=b(n/24),i=b(nr(a)),s+=i,a-=er(rr(i)),r=b(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function nr(e){return 4800*e/146097}function rr(e){return 146097*e/4800}function ir(e){var t,n,r=this._milliseconds;if(e=N(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+nr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(rr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function or(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)}function ar(e){return function(){return this.as(e)}}function sr(e){return e=N(e),this[e+"s"]()}function lr(e){return function(){return this._data[e]}}function cr(){return b(this.days()/7)}function ur(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function dr(e,t,n){var r=Ut(e).abs(),i=mo(r.as("s")),o=mo(r.as("m")),a=mo(r.as("h")),s=mo(r.as("d")),l=mo(r.as("M")),c=mo(r.as("y")),u=i<vo.s&&["s",i]||o<=1&&["m"]||o<vo.m&&["mm",o]||a<=1&&["h"]||a<vo.h&&["hh",a]||s<=1&&["d"]||s<vo.d&&["dd",s]||l<=1&&["M"]||l<vo.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,ur.apply(null,u)}function fr(e){return void 0===e?mo:"function"==typeof e&&(mo=e,!0)}function hr(e,t){return void 0!==vo[e]&&(void 0===t?vo[e]:(vo[e]=t,!0))}function pr(e){var t=this.localeData(),n=dr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function gr(){var e,t,n,r=_o(this._milliseconds)/1e3,i=_o(this._days),o=_o(this._months);e=b(r/60),t=b(e/60),r%=60,e%=60,n=b(o/12),o%=12;var a=n,s=o,l=i,c=t,u=e,d=r,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var mr,vr;vr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var _r=vr,yr=t.momentProperties=[],br=!1,wr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var xr;xr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var kr,Cr=xr,Sr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Er={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},$r="Invalid date",Tr="%d",Ar=/\d{1,2}/,Dr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Or={},Pr={},Rr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ir=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mr={},Lr={},Nr=/\d/,jr=/\d\d/,Fr=/\d{3}/,Br=/\d{4}/,Ur=/[+-]?\d{6}/,zr=/\d\d?/,qr=/\d\d\d\d?/,Hr=/\d\d\d\d\d\d?/,Vr=/\d{1,3}/,Wr=/\d{1,4}/,Gr=/[+-]?\d{1,6}/,Yr=/\d+/,Kr=/[+-]?\d+/,Xr=/Z|[+-]\d\d:?\d\d/gi,Jr=/Z|[+-]\d\d(?::?\d\d)?/gi,Zr=/[+-]?\d+(\.\d{1,3})?/,Qr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ei={},ti={},ni=0,ri=1,ii=2,oi=3,ai=4,si=5,li=6,ci=7,ui=8;kr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var di=kr;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),G("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),F("month",8),Z("M",zr),Z("MM",zr,jr),Z("MMM",function(e,t){return t.monthsShortRegex(e)}),Z("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[ri]=w(e)-1}),ne(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ri]=i:h(n).invalidMonth=e});var fi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),gi=Qr,mi=Qr;G("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),L("year","y"),F("year",1),Z("Y",Kr),Z("YY",zr,jr),Z("YYYY",Wr,Br),Z("YYYYY",Gr,Ur),Z("YYYYYY",Gr,Ur),ne(["YYYYY","YYYYYY"],ni),ne("YYYY",function(e,n){n[ni]=2===e.length?t.parseTwoDigitYear(e):w(e)}),ne("YY",function(e,n){n[ni]=t.parseTwoDigitYear(e)}),ne("Y",function(e,t){t[ni]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var vi=U("FullYear",!0);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),F("week",5),F("isoWeek",5),Z("w",zr),Z("ww",zr,jr),Z("W",zr),Z("WW",zr,jr),re(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var _i={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),G("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),G("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),Z("d",zr),Z("e",zr),Z("E",zr),Z("dd",function(e,t){return t.weekdaysMinRegex(e)}),Z("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Z("dddd",function(e,t){return t.weekdaysRegex(e)}),re(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:h(n).invalidWeekday=e}),re(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var yi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xi=Qr,ki=Qr,Ci=Qr;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,He),G("k",["kk",2],0,Ve),G("hmm",0,0,function(){return""+He.apply(this)+W(this.minutes(),2)}),G("hmmss",0,0,function(){return""+He.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)}),We("a",!0),We("A",!1),L("hour","h"),F("hour",13),Z("a",Ge),Z("A",Ge),Z("H",zr),Z("h",zr),Z("HH",zr,jr),Z("hh",zr,jr),Z("hmm",qr),Z("hmmss",Hr),Z("Hmm",qr),Z("Hmmss",Hr),ne(["H","HH"],oi),ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ne(["h","hh"],function(e,t,n){t[oi]=w(e),h(n).bigHour=!0}),ne("hmm",function(e,t,n){var r=e.length-2;t[oi]=w(e.substr(0,r)),t[ai]=w(e.substr(r)),h(n).bigHour=!0}),ne("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[oi]=w(e.substr(0,r)),t[ai]=w(e.substr(r,2)),t[si]=w(e.substr(i)),h(n).bigHour=!0}),ne("Hmm",function(e,t,n){var r=e.length-2;t[oi]=w(e.substr(0,r)),t[ai]=w(e.substr(r))}),ne("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[oi]=w(e.substr(0,r)),t[ai]=w(e.substr(r,2)),t[si]=w(e.substr(i))});var Si,Ei=/[ap]\.?m?\.?/i,$i=U("Hours",!0),Ti={calendar:Sr,longDateFormat:Er,invalidDate:$r,ordinal:Tr,ordinalParse:Ar,relativeTime:Dr,months:hi,monthsShort:pi,week:_i,weekdays:yi,weekdaysMin:wi,weekdaysShort:bi,meridiemParse:Ei},Ai={},Di={},Oi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ri=/Z|[+-]\d\d(?::?\d\d)?/,Ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Li=/^\/?Date\((\-?\d+)/i;
t.createFromInputFallback=C("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Ni=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),ji=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}),Fi=function(){return Date.now?Date.now():+new Date};Et("Z",":"),Et("ZZ",""),Z("Z",Jr),Z("ZZ",Jr),ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=$t(Jr,e)});var Bi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ui=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,zi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ut.fn=kt.prototype;var qi=Vt(1,"add"),Hi=Vt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Vi=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),$n("gggg","weekYear"),$n("ggggg","weekYear"),$n("GGGG","isoWeekYear"),$n("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),Z("G",Kr),Z("g",Kr),Z("GG",zr,jr),Z("gg",zr,jr),Z("GGGG",Wr,Br),Z("gggg",Wr,Br),Z("GGGGG",Gr,Ur),Z("ggggg",Gr,Ur),re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),re(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),L("quarter","Q"),F("quarter",7),Z("Q",Nr),ne("Q",function(e,t){t[ri]=3*(w(e)-1)}),G("D",["DD",2],"Do","date"),L("date","D"),F("date",9),Z("D",zr),Z("DD",zr,jr),Z("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ne(["D","DD"],ii),ne("Do",function(e,t){t[ii]=w(e.match(zr)[0],10)});var Wi=U("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),F("dayOfYear",4),Z("DDD",Vr),Z("DDDD",Fr),ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),G("m",["mm",2],0,"minute"),L("minute","m"),F("minute",14),Z("m",zr),Z("mm",zr,jr),ne(["m","mm"],ai);var Gi=U("Minutes",!1);G("s",["ss",2],0,"second"),L("second","s"),F("second",15),Z("s",zr),Z("ss",zr,jr),ne(["s","ss"],si);var Yi=U("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),F("millisecond",16),Z("S",Vr,Nr),Z("SS",Vr,jr),Z("SSS",Vr,Fr);var Ki;for(Ki="SSSS";Ki.length<=9;Ki+="S")Z(Ki,Yr);for(Ki="S";Ki.length<=9;Ki+="S")ne(Ki,Ln);var Xi=U("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Ji=_.prototype;Ji.add=qi,Ji.calendar=Yt,Ji.clone=Kt,Ji.diff=nn,Ji.endOf=mn,Ji.format=ln,Ji.from=cn,Ji.fromNow=un,Ji.to=dn,Ji.toNow=fn,Ji.get=H,Ji.invalidAt=Sn,Ji.isAfter=Xt,Ji.isBefore=Jt,Ji.isBetween=Zt,Ji.isSame=Qt,Ji.isSameOrAfter=en,Ji.isSameOrBefore=tn,Ji.isValid=kn,Ji.lang=Vi,Ji.locale=hn,Ji.localeData=pn,Ji.max=ji,Ji.min=Ni,Ji.parsingFlags=Cn,Ji.set=V,Ji.startOf=gn,Ji.subtract=Hi,Ji.toArray=bn,Ji.toObject=wn,Ji.toDate=yn,Ji.toISOString=an,Ji.inspect=sn,Ji.toJSON=xn,Ji.toString=on,Ji.unix=_n,Ji.valueOf=vn,Ji.creationData=En,Ji.year=vi,Ji.isLeapYear=_e,Ji.weekYear=Tn,Ji.isoWeekYear=An,Ji.quarter=Ji.quarters=In,Ji.month=de,Ji.daysInMonth=fe,Ji.week=Ji.weeks=Te,Ji.isoWeek=Ji.isoWeeks=Ae,Ji.weeksInYear=On,Ji.isoWeeksInYear=Dn,Ji.date=Wi,Ji.day=Ji.days=Ne,Ji.weekday=je,Ji.isoWeekday=Fe,Ji.dayOfYear=Mn,Ji.hour=Ji.hours=$i,Ji.minute=Ji.minutes=Gi,Ji.second=Ji.seconds=Yi,Ji.millisecond=Ji.milliseconds=Xi,Ji.utcOffset=Dt,Ji.utc=Pt,Ji.local=Rt,Ji.parseZone=It,Ji.hasAlignedHourOffset=Mt,Ji.isDST=Lt,Ji.isLocal=jt,Ji.isUtcOffset=Ft,Ji.isUtc=Bt,Ji.isUTC=Bt,Ji.zoneAbbr=Nn,Ji.zoneName=jn,Ji.dates=C("dates accessor is deprecated. Use date instead.",Wi),Ji.months=C("months accessor is deprecated. Use month instead",de),Ji.years=C("years accessor is deprecated. Use year instead",vi),Ji.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ot),Ji.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Nt);var Zi=A.prototype;Zi.calendar=D,Zi.longDateFormat=O,Zi.invalidDate=P,Zi.ordinal=R,Zi.preparse=Un,Zi.postformat=Un,Zi.relativeTime=I,Zi.pastFuture=M,Zi.set=$,Zi.months=ae,Zi.monthsShort=se,Zi.monthsParse=ce,Zi.monthsRegex=pe,Zi.monthsShortRegex=he,Zi.week=Se,Zi.firstDayOfYear=$e,Zi.firstDayOfWeek=Ee,Zi.weekdays=Pe,Zi.weekdaysMin=Ie,Zi.weekdaysShort=Re,Zi.weekdaysParse=Le,Zi.weekdaysRegex=Be,Zi.weekdaysShortRegex=Ue,Zi.weekdaysMinRegex=ze,Zi.isPM=Ye,Zi.meridiem=Ke,Qe("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),t.lang=C("moment.lang is deprecated. Use moment.locale instead.",Qe),t.langData=C("moment.langData is deprecated. Use moment.localeData instead.",nt);var Qi=Math.abs,eo=ar("ms"),to=ar("s"),no=ar("m"),ro=ar("h"),io=ar("d"),oo=ar("w"),ao=ar("M"),so=ar("y"),lo=lr("milliseconds"),co=lr("seconds"),uo=lr("minutes"),fo=lr("hours"),ho=lr("days"),po=lr("months"),go=lr("years"),mo=Math.round,vo={s:45,m:45,h:22,d:26,M:11},_o=Math.abs,yo=kt.prototype;return yo.abs=Xn,yo.add=Zn,yo.subtract=Qn,yo.as=ir,yo.asMilliseconds=eo,yo.asSeconds=to,yo.asMinutes=no,yo.asHours=ro,yo.asDays=io,yo.asWeeks=oo,yo.asMonths=ao,yo.asYears=so,yo.valueOf=or,yo._bubble=tr,yo.get=sr,yo.milliseconds=lo,yo.seconds=co,yo.minutes=uo,yo.hours=fo,yo.days=ho,yo.weeks=cr,yo.months=po,yo.years=go,yo.humanize=pr,yo.toISOString=gr,yo.toString=gr,yo.toJSON=gr,yo.locale=hn,yo.localeData=pn,yo.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",gr),yo.lang=Vi,G("X",0,0,"unix"),G("x",0,0,"valueOf"),Z("x",Kr),Z("X",Zr),ne("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.17.1",n(yt),t.fn=Ji,t.min=wt,t.max=xt,t.now=Fi,t.utc=d,t.unix=Fn,t.months=Vn,t.isDate=s,t.locale=Qe,t.invalid=g,t.duration=Ut,t.isMoment=y,t.weekdays=Gn,t.parseZone=Bn,t.localeData=nt,t.isDuration=Ct,t.monthsShort=Wn,t.weekdaysMin=Kn,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=Yn,t.normalizeUnits=N,t.relativeTimeRounding=fr,t.relativeTimeThreshold=hr,t.calendarFormat=Gt,t.prototype=Ji,t})}).call(t,n(41)(e))},function(e,t,n){(function(n){!function(n){"use strict";function r(){}function i(e){if(!e||"object"!=typeof e)return!1;var t=E(e)||_e;return/object|function/.test(typeof t.Element)?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName}function o(e){return e===_e||!(!e||!e.Window)&&e instanceof e.Window}function a(e){return!!e&&e instanceof be}function s(e){return l(e)&&void 0!==typeof e.length&&c(e.splice)}function l(e){return!!e&&"object"==typeof e}function c(e){return"function"==typeof e}function u(e){return"number"==typeof e}function d(e){return"boolean"==typeof e}function f(e){return"string"==typeof e}function h(e){return!!f(e)&&(ye.querySelector(e),!0)}function p(e,t){for(var n in t)e[n]=t[n];return e}function g(e,t){for(var n in t){var r=!1;for(var i in Ze)if(0===n.indexOf(i)&&Ze[i].test(n)){r=!0;break}r||(e[n]=t[n])}return e}function m(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function v(e,t,n){var r=t.length>1?D(t):t[0];w(r,$e,n),e.page.x=$e.x,e.page.y=$e.y,x(r,$e,n),e.client.x=$e.x,e.client.y=$e.y,e.timeStamp=(new Date).getTime()}function _(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=(new Date).getTime()-t.timeStamp;var r=Math.max(e.timeStamp/1e3,.001);e.page.speed=Ee(e.page.x,e.page.y)/r,e.page.vx=e.page.x/r,e.page.vy=e.page.y/r,e.client.speed=Ee(e.client.x,e.page.y)/r,e.client.vx=e.client.x/r,e.client.vy=e.client.y/r}function y(e){return e instanceof _e.Event||Me&&_e.Touch&&e instanceof _e.Touch}function b(e,t,n){return n=n||{},e=e||"page",n.x=t[e+"X"],n.y=t[e+"Y"],n}function w(e,t){return t=t||{},We&&y(e)?(b("screen",e,t),t.x+=_e.scrollX,t.y+=_e.scrollY):b("page",e,t),t}function x(e,t){return t=t||{},We&&y(e)?b("screen",e,t):b("client",e,t),t}function k(e){return e=e||_e,{x:e.scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function C(e){return u(e.pointerId)?e.pointerId:e.identifier}function S(e){return e instanceof ke?e.correspondingUseElement:e}function E(e){if(o(e))return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||_e}function $(e){var t=e instanceof we?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function T(e){var t=$(e);if(!Ge&&t){var n=k(E(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t}function A(e){var t=[];return s(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function D(e){for(var t,n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},r=0;r<e.length;r++)for(t in n)n[t]+=e[r][t];for(t in n)n[t]/=e.length;return n}function O(e){if(e.length||e.touches&&e.touches.length>1){var t=A(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),i=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,width:i-n,height:o-r}}}function P(e,t){t=t||Re.deltaSource;var n=t+"X",r=t+"Y",i=A(e),o=i[0][n]-i[1][n],a=i[0][r]-i[1][r];return Ee(o,a)}function R(e,t,n){n=n||Re.deltaSource;var r=n+"X",i=n+"Y",o=A(e),a=o[0][r]-o[1][r],s=o[0][i]-o[1][i],l=180*Math.atan(s/a)/Math.PI;if(u(t)){var c=l-t,d=c%360;d>315?l-=360+l/360|0:d>135?l-=180+l/360|0:d<-315?l+=360+l/360|0:d<-135&&(l+=180+l/360|0)}return l}function I(e,t){var n=e?e.options.origin:Re.origin;return"parent"===n?n=B(t):"self"===n?n=e.getRect(t):h(n)&&(n=F(t,n)||{x:0,y:0}),c(n)&&(n=n(e&&t)),i(n)&&(n=T(n)),n.x="x"in n?n.x:n.left,n.y="y"in n?n.y:n.top,n}function M(e,t,n,r){var i=1-e;return i*i*t+2*i*e*n+e*e*r}function L(e,t,n,r,i,o,a){return{x:M(a,e,n,i),y:M(a,t,r,o)}}function N(e,t,n,r){return e/=r,-n*e*(e-2)+t}function j(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function F(e,t){for(var n=B(e);i(n);){if(pe(n,t))return n;n=B(n)}return null}function B(e){var t=e.parentNode;if(a(t)){for(;(t=t.host)&&a(t););return t}return t}function U(e,t){return e._context===t.ownerDocument||j(e._context,t)}function z(e,t,n){var r=e.options.ignoreFrom;return!(!r||!i(n))&&(f(r)?ge(n,r,t):!!i(r)&&j(r,n))}function q(e,t,n){var r=e.options.allowFrom;return!r||!!i(n)&&(f(r)?ge(n,r,t):!!i(r)&&j(r,n))}function H(e,t){if(!t)return!1;var n=t.options.drag.axis;return"xy"===e||"xy"===n||n===e}function V(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].snap&&n[t].snap.enabled}function W(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].restrict&&n[t].restrict.enabled}function G(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].autoScroll&&n[t].autoScroll.enabled}function Y(e,t,n){for(var r=e.options,i=r[n.name].max,o=r[n.name].maxPerElement,a=0,s=0,l=0,c=0,u=De.length;c<u;c++){var d=De[c],f=d.prepared.name,h=d.interacting();if(h){if(a++,a>=Be)return!1;if(d.target===e){if(s+=f===n.name|0,s>=i)return!1;if(d.element===t&&(l++,f!==n.name||l>=o))return!1}}}return Be>0}function K(e){var t,n,r,i,o,a=e[0],s=a?0:-1,l=[],c=[];for(i=1;i<e.length;i++)if(t=e[i],t&&t!==a)if(a){if(t.parentNode!==t.ownerDocument)if(a.parentNode!==t.ownerDocument){if(!l.length)for(n=a;n.parentNode&&n.parentNode!==n.ownerDocument;)l.unshift(n),n=n.parentNode;if(a instanceof Ce&&t instanceof we&&!(t instanceof xe)){if(t===a.parentNode)continue;n=t.ownerSVGElement}else n=t;for(c=[];n.parentNode!==n.ownerDocument;)c.unshift(n),n=n.parentNode;for(o=0;c[o]&&c[o]===l[o];)o++;var u=[c[o-1],c[o],l[o]];for(r=u[0].lastChild;r;){if(r===u[1]){a=t,s=i,l=[];break}if(r===u[2])break;r=r.previousSibling}}else a=t,s=i}else a=t,s=i;return s}function X(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},c(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var e=this;this.boundInertiaFrame=function(){return e.inertiaFrame()},this.boundSmoothEndFrame=function(){return e.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,De.push(this)}function J(e,t,n){var r,i=0,o=De.length,a=/mouse|pen/i.test(e.pointerType||t)||e.pointerType>=3,s=C(e);if(/down|start/i.test(t))for(i=0;i<o;i++){r=De[i];var l=n;if(r.inertiaStatus.active&&r.target.options[r.prepared.name].inertia.allowResume&&r.mouse===a)for(;l;){if(l===r.element)return r;l=B(l)}}if(a||!Me&&!Le){for(i=0;i<o;i++)if(De[i].mouse&&!De[i].inertiaStatus.active)return De[i];for(i=0;i<o;i++)if(De[i].mouse&&(!/down/.test(t)||!De[i].inertiaStatus.active))return r;return r=new X,r.mouse=!0,r}for(i=0;i<o;i++)if(he(De[i].pointerIds,s))return De[i];if(/up|end|out/i.test(t))return null;for(i=0;i<o;i++)if(r=De[i],(!r.prepared.name||r.target.options.gesture.enabled)&&!r.interacting()&&(a||!r.mouse))return r;return new X}function Z(e){return function(t){var n,r,i=S(t.path?t.path[0]:t.target),o=S(t.currentTarget);if(Me&&/touch/.test(t.type))for(Fe=(new Date).getTime(),r=0;r<t.changedTouches.length;r++){var a=t.changedTouches[r];n=J(a,t.type,i),n&&(n._updateEventTargets(i,o),n[e](a,t,i,o))}else{if(!Le&&/mouse/.test(t.type)){for(r=0;r<De.length;r++)if(!De[r].mouse&&De[r].pointerIsDown)return;if((new Date).getTime()-Fe<500)return}if(n=J(t,t.type,i),!n)return;n._updateEventTargets(i,o),n[e](t,t,i,o)}}}function Q(e,t,n,r,i,o){var a,s,l=e.target,c=e.snapStatus,u=e.restrictStatus,d=e.pointers,f=(l&&l.options||Re).deltaSource,h=f+"X",g=f+"Y",m=l?l.options:Re,v=I(l,i),_="start"===r,y="end"===r,b=_?e.startCoords:e.curCoords;i=i||e.element,s=p({},b.page),a=p({},b.client),s.x-=v.x,s.y-=v.y,a.x-=v.x,a.y-=v.y;var w=m[n].snap&&m[n].snap.relativePoints;!V(l,n)||_&&w&&w.length||(this.snap={range:c.range,locked:c.locked,x:c.snappedX,y:c.snappedY,realX:c.realX,realY:c.realY,dx:c.dx,dy:c.dy},c.locked&&(s.x+=c.dx,s.y+=c.dy,a.x+=c.dx,a.y+=c.dy)),!W(l,n)||_&&m[n].restrict.elementRect||!u.restricted||(s.x+=u.dx,s.y+=u.dy,a.x+=u.dx,a.y+=u.dy,this.restrict={dx:u.dx,dy:u.dy}),this.pageX=s.x,this.pageY=s.y,this.clientX=a.x,this.clientY=a.y,this.x0=e.startCoords.page.x-v.x,this.y0=e.startCoords.page.y-v.y,this.clientX0=e.startCoords.client.x-v.x,this.clientY0=e.startCoords.client.y-v.y,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.target=i,this.t0=e.downTimes[0],this.type=n+(r||""),this.interaction=e,this.interactable=l;var x=e.inertiaStatus;if(x.active&&(this.detail="inertia"),o&&(this.relatedTarget=o),y?"client"===f?(this.dx=a.x-e.startCoords.client.x,this.dy=a.y-e.startCoords.client.y):(this.dx=s.x-e.startCoords.page.x,this.dy=s.y-e.startCoords.page.y):_?(this.dx=0,this.dy=0):"inertiastart"===r?(this.dx=e.prevEvent.dx,this.dy=e.prevEvent.dy):"client"===f?(this.dx=a.x-e.prevEvent.clientX,this.dy=a.y-e.prevEvent.clientY):(this.dx=s.x-e.prevEvent.pageX,this.dy=s.y-e.prevEvent.pageY),e.prevEvent&&"inertia"===e.prevEvent.detail&&!x.active&&m[n].inertia&&m[n].inertia.zeroResumeDelta&&(x.resumeDx+=this.dx,x.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===n&&e.resizeAxes?m.resize.square?("y"===e.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=e.resizeAxes,"x"===e.resizeAxes?this.dy=0:"y"===e.resizeAxes&&(this.dx=0)):"gesture"===n&&(this.touches=[d[0],d[1]],_?(this.distance=P(d,f),this.box=O(d),this.scale=1,this.ds=0,this.angle=R(d,void 0,f),this.da=0):y||t instanceof Q?(this.distance=e.prevEvent.distance,this.box=e.prevEvent.box,this.scale=e.prevEvent.scale,this.ds=this.scale-1,this.angle=e.prevEvent.angle,this.da=this.angle-e.gesture.startAngle):(this.distance=P(d,f),this.box=O(d),this.scale=this.distance/e.gesture.startDistance,this.angle=R(d,e.gesture.prevAngle,f),this.ds=this.scale-e.gesture.prevScale,this.da=this.angle-e.gesture.prevAngle)),_)this.timeStamp=e.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===r)this.timeStamp=e.prevEvent.timeStamp,this.dt=e.prevEvent.dt,this.duration=e.prevEvent.duration,this.speed=e.prevEvent.speed,this.velocityX=e.prevEvent.velocityX,this.velocityY=e.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-e.prevEvent.timeStamp,this.duration=this.timeStamp-e.downTimes[0],t instanceof Q){var k=this[h]-e.prevEvent[h],C=this[g]-e.prevEvent[g],S=this.dt/1e3;this.speed=Ee(k,C)/S,this.velocityX=k/S,this.velocityY=C/S}else this.speed=e.pointerDelta[f].speed,this.velocityX=e.pointerDelta[f].vx,this.velocityY=e.pointerDelta[f].vy;if((y||"inertiastart"===r)&&e.prevEvent.speed>600&&this.timeStamp-e.prevEvent.timeStamp<150){var E=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI,$=22.5;E<0&&(E+=360);var T=135-$<=E&&E<225+$,A=225-$<=E&&E<315+$,D=!T&&(315-$<=E||E<45+$),M=!A&&45-$<=E&&E<135+$;this.swipe={up:A,down:M,left:T,right:D,angle:E,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}}function ee(){this.originalEvent.preventDefault()}function te(e){var t="";if("drag"===e.name&&(t=Ue.drag),"resize"===e.name)if(e.axis)t=Ue[e.name+e.axis];else if(e.edges){for(var n="resize",r=["top","bottom","left","right"],i=0;i<4;i++)e.edges[r[i]]&&(n+=r[i]);t=Ue[n]}return t}function ne(e,t,n,r,o,a,s){if(!t)return!1;if(t===!0){var l=u(a.width)?a.width:a.right-a.left,c=u(a.height)?a.height:a.bottom-a.top;if(l<0&&("left"===e?e="right":"right"===e&&(e="left")),c<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return n.x<(l>=0?a.left:a.right)+s;if("top"===e)return n.y<(c>=0?a.top:a.bottom)+s;if("right"===e)return n.x>(l>=0?a.right:a.left)-s;if("bottom"===e)return n.y>(c>=0?a.bottom:a.top)-s}return!!i(r)&&(i(t)?t===r:ge(r,t,o))}function re(e,t,n){var r,i=this.getRect(n),o=!1,a=null,s=null,c=p({},t.curCoords.page),u=this.options;if(!i)return null;if(ze.resize&&u.resize.enabled){var d=u.resize;if(r={left:!1,right:!1,top:!1,bottom:!1},l(d.edges)){for(var f in r)r[f]=ne(f,d.edges[f],c,t._eventTarget,n,i,d.margin||Ne);r.left=r.left&&!r.right,r.top=r.top&&!r.bottom,o=r.left||r.right||r.top||r.bottom}else{var h="y"!==u.resize.axis&&c.x>i.right-Ne,g="x"!==u.resize.axis&&c.y>i.bottom-Ne;o=h||g,s=(h?"x":"")+(g?"y":"")}}return a=o?"resize":ze.drag&&u.drag.enabled?"drag":null,ze.gesture&&t.pointerIds.length>=2&&!t.dragging&&!t.resizing&&(a="gesture"),a?{name:a,axis:s,edges:r}:null}function ie(e,t){if(!l(e))return null;var n=e.name,r=t.options;return("resize"===n&&r.resize.enabled||"drag"===n&&r.drag.enabled||"gesture"===n&&r.gesture.enabled)&&ze[n]?("resize"!==n&&"resizeyx"!==n||(n="resizexy"),e):null}function oe(e,t){var n={},r=Pe[e.type],o=S(e.path?e.path[0]:e.target),a=o;t=!!t;for(var s in e)n[s]=e[s];for(n.originalEvent=e,n.preventDefault=ee;i(a);){for(var l=0;l<r.selectors.length;l++){var c=r.selectors[l],u=r.contexts[l];if(pe(a,c)&&j(u,o)&&j(u,a)){var d=r.listeners[l];n.currentTarget=a;for(var f=0;f<d.length;f++)d[f][1]===t&&d[f][0](n)}}a=B(a)}}function ae(e){return oe.call(this,e,!0)}function se(e,t){return Ae.get(e,t)||new le(e,t)}function le(e,t){this._element=e,this._iEvents=this._iEvents||{};var n;if(h(e)){this.selector=e;var r=t&&t.context;n=r?E(r):_e,r&&(n.Node?r instanceof n.Node:i(r)||r===n.document)&&(this._context=r)}else n=E(e),i(e,n)&&(Le?(Je.add(this._element,me.down,Qe.pointerDown),Je.add(this._element,me.move,Qe.pointerHover)):(Je.add(this._element,"mousedown",Qe.pointerDown),Je.add(this._element,"mousemove",Qe.pointerHover),Je.add(this._element,"touchstart",Qe.pointerDown),Je.add(this._element,"touchmove",Qe.pointerHover)));this._doc=n.document,he(Te,this._doc)||de(this._doc),Ae.push(this),this.set(t)}function ce(e,t){var n=!1;return function(){return n||(_e.console.warn(t),n=!0),e.apply(this,arguments)}}function ue(e){for(var t=0;t<De.length;t++)De[t].pointerEnd(e,e)}function de(e){if(!he(Te,e)){var t=e.defaultView||e.parentWindow;for(var n in Pe)Je.add(e,n,oe),Je.add(e,n,ae,!0);Le?(me=Se===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},Je.add(e,me.down,Qe.selectorDown),Je.add(e,me.move,Qe.pointerMove),Je.add(e,me.over,Qe.pointerOver),Je.add(e,me.out,Qe.pointerOut),Je.add(e,me.up,Qe.pointerUp),Je.add(e,me.cancel,Qe.pointerCancel),Je.add(e,me.move,Qe.autoScrollMove)):(Je.add(e,"mousedown",Qe.selectorDown),Je.add(e,"mousemove",Qe.pointerMove),Je.add(e,"mouseup",Qe.pointerUp),Je.add(e,"mouseover",Qe.pointerOver),Je.add(e,"mouseout",Qe.pointerOut),Je.add(e,"touchstart",Qe.selectorDown),Je.add(e,"touchmove",Qe.pointerMove),Je.add(e,"touchend",Qe.pointerUp),Je.add(e,"touchcancel",Qe.pointerCancel),Je.add(e,"mousemove",Qe.autoScrollMove),Je.add(e,"touchmove",Qe.autoScrollMove)),Je.add(t,"blur",ue);try{if(t.frameElement){var r=t.frameElement.ownerDocument,i=r.defaultView;Je.add(r,"mouseup",Qe.pointerEnd),Je.add(r,"touchend",Qe.pointerEnd),Je.add(r,"touchcancel",Qe.pointerEnd),Je.add(r,"pointerup",Qe.pointerEnd),Je.add(r,"MSPointerUp",Qe.pointerEnd),Je.add(i,"blur",ue)}}catch(e){se.windowParentError=e}Je.add(e,"dragstart",function(e){for(var t=0;t<De.length;t++){var n=De[t];if(n.element&&(n.element===e.target||j(n.element,e.target)))return void n.checkAndPreventDefault(e,n.target,n.element)}}),Je.useAttachEvent&&(Je.add(e,"selectstart",function(e){var t=De[0];t.currentAction()&&t.checkAndPreventDefault(e)}),Je.add(e,"dblclick",Z("ie8Dblclick"))),Te.push(e)}}function fe(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function he(e,t){return fe(e,t)!==-1}function pe(e,t,r){return ve?ve(e,t,r):(_e!==n&&(t=t.replace(/\/deep\//g," ")),e[Ye](t))}function ge(e,t,n){for(;i(e);){if(pe(e,t))return!0;if(e=B(e),e===n)return pe(e,t)}return!1}if(n){var me,ve,_e=function(){var e=n.document.createTextNode("");return e.ownerDocument!==n.document&&"function"==typeof n.wrap&&n.wrap(e)===e?n.wrap(n):n}(),ye=_e.document,be=_e.DocumentFragment||r,we=_e.SVGElement||r,xe=_e.SVGSVGElement||r,ke=_e.SVGElementInstance||r,Ce=_e.HTMLElement||_e.Element,Se=_e.PointerEvent||_e.MSPointerEvent,Ee=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},$e={},Te=[],Ae=[],De=[],Oe=!1,Pe={},Re={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:ye,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},Ie={interaction:null,i:null,x:0,y:0,scroll:function(){var e,t,n,r,i=Ie.interaction.target.options[Ie.interaction.prepared.name].autoScroll,a=i.container||E(Ie.interaction.element),s=(new Date).getTime(),l=(s-Ie.prevTimeX)/1e3,c=(s-Ie.prevTimeY)/1e3;i.velocity?(e=i.velocity.x,t=i.velocity.y):e=t=i.speed,n=e*l,r=t*c,(n>=1||r>=1)&&(o(a)?a.scrollBy(Ie.x*n,Ie.y*r):a&&(a.scrollLeft+=Ie.x*n,a.scrollTop+=Ie.y*r),n>=1&&(Ie.prevTimeX=s),r>=1&&(Ie.prevTimeY=s)),Ie.isScrolling&&(Xe(Ie.i),Ie.i=Ke(Ie.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(e){Ie.isScrolling=!0,Xe(Ie.i),Ie.interaction=e,Ie.prevTimeX=(new Date).getTime(),Ie.prevTimeY=(new Date).getTime(),Ie.i=Ke(Ie.scroll)},stop:function(){Ie.isScrolling=!1,Xe(Ie.i)}},Me="ontouchstart"in _e||_e.DocumentTouch&&ye instanceof _e.DocumentTouch,Le=!!Se,Ne=Me||Le?20:10,je=1,Fe=0,Be=1/0,Ue=ye.all&&!_e.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},ze={drag:!0,resize:!0,gesture:!0},qe="onmousewheel"in ye?"mousewheel":"wheel",He=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],Ve={},We="Opera"==navigator.appName&&Me&&navigator.userAgent.match("Presto"),Ge=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),Ye="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",Ke=n.requestAnimationFrame,Xe=n.cancelAnimationFrame,Je=function(){function e(e,t,s,f){var h=fe(c,e),p=u[h];if(p||(p={events:{},typeCount:0},h=c.push(e)-1,u.push(p),d.push(o?{supplied:[],wrapped:[],useCount:[]}:null)),p.events[t]||(p.events[t]=[],p.typeCount++),!he(p.events[t],s)){var g;if(o){var m=d[h],v=fe(m.supplied,s),_=m.wrapped[v]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,t.preventDefault=t.preventDefault||n,t.stopPropagation=t.stopPropagation||r,t.stopImmediatePropagation=t.stopImmediatePropagation||i,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+E(e).document.documentElement.scrollLeft,t.pageY=t.clientY+E(e).document.documentElement.scrollTop),s(t))};g=e[a](l+t,_,Boolean(f)),v===-1?(m.supplied.push(s),m.wrapped.push(_),m.useCount.push(1)):m.useCount[v]++}else g=e[a](t,s,f||!1);return p.events[t].push(s),g}}function t(e,n,r,i){var a,f,h,p=fe(c,e),g=u[p],m=r;if(g&&g.events)if(o&&(f=d[p],h=fe(f.supplied,r),m=f.wrapped[h]),"all"!==n){if(g.events[n]){var v=g.events[n].length;if("all"===r){for(a=0;a<v;a++)t(e,n,g.events[n][a],Boolean(i));return}for(a=0;a<v;a++)if(g.events[n][a]===r){e[s](l+n,m,i||!1),g.events[n].splice(a,1),o&&f&&(f.useCount[h]--,0===f.useCount[h]&&(f.supplied.splice(h,1),f.wrapped.splice(h,1),f.useCount.splice(h,1)));break}g.events[n]&&0===g.events[n].length&&(g.events[n]=null,g.typeCount--)}g.typeCount||(u.splice(p,1),c.splice(p,1),d.splice(p,1))}else for(n in g.events)g.events.hasOwnProperty(n)&&t(e,n,"all")}function n(){this.returnValue=!1}function r(){this.cancelBubble=!0}function i(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var o="attachEvent"in _e&&!("addEventListener"in _e),a=o?"attachEvent":"addEventListener",s=o?"detachEvent":"removeEventListener",l=o?"on":"",c=[],u=[],d=[];return{add:e,remove:t,useAttachEvent:o,_elements:c,_targets:u,_attachedListeners:d}}(),Ze={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};X.prototype={getPageXY:function(e,t){return w(e,t,this)},getClientXY:function(e,t){return x(e,t,this)},setEventXY:function(e,t){return v(e,t,this)},pointerOver:function(e,t,n){function r(e,t){e&&i(n)&&U(e,n)&&!z(e,n,n)&&q(e,n,n)&&pe(n,t)&&(o.push(e),a.push(n))}if(!this.prepared.name&&this.mouse){var o=[],a=[],s=this.element;this.addPointer(e),!this.target||!z(this.target,this.element,n)&&q(this.target,this.element,n)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var l=Ae.get(n),c=l&&!z(l,n,n)&&q(l,n,n)&&ie(l.getAction(e,t,this,n),l);c&&!Y(l,n,c)&&(c=null),c?(this.target=l,this.element=n,this.matches=[],this.matchElements=[]):(Ae.forEachSelector(r),this.validateSelector(e,t,o,a)?(this.matches=o,this.matchElements=a,this.pointerHover(e,t,this.matches,this.matchElements),Je.add(n,Le?me.move:"mousemove",Qe.pointerHover)):this.target&&(j(s,n)?(this.pointerHover(e,t,this.matches,this.matchElements),Je.add(this.element,Le?me.move:"mousemove",Qe.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(e,t,n,r,i,o){var a=this.target;if(!this.prepared.name&&this.mouse){var s;this.setEventXY(this.curCoords,[e]),i?s=this.validateSelector(e,t,i,o):a&&(s=ie(a.getAction(this.pointers[0],t,this,this.element),this.target)),a&&a.options.styleCursor&&(s?a._doc.documentElement.style.cursor=te(s):a._doc.documentElement.style.cursor="")}else this.prepared.name&&this.checkAndPreventDefault(t,a,this.element)},pointerOut:function(e,t,n){this.prepared.name||(Ae.get(n)||Je.remove(n,Le?me.move:"mousemove",Qe.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""));
},selectorDown:function(e,t,n,r){function o(e,t,r){var i=ve?r.querySelectorAll(t):void 0;U(e,c)&&!z(e,c,n)&&q(e,c,n)&&pe(c,t,i)&&(s.matches.push(e),s.matchElements.push(c))}var a,s=this,l=Je.useAttachEvent?p({},t):t,c=n,u=this.addPointer(e);if(this.holdTimers[u]=setTimeout(function(){s.pointerHold(Je.useAttachEvent?l:e,l,n,r)},Re._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;i(c);){if(c===this.element&&ie(this.target.getAction(e,t,this,this.element),this.target).name===this.prepared.name)return Xe(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(e,t,n,"down");c=B(c)}if(this.interacting())return void this.collectEventTargets(e,t,n,"down");for(this.setEventXY(this.curCoords,[e]),this.downEvent=t;i(c)&&!a;)this.matches=[],this.matchElements=[],Ae.forEachSelector(o),a=this.validateSelector(e,t,this.matches,this.matchElements),c=B(c);return a?(this.prepared.name=a.name,this.prepared.axis=a.axis,this.prepared.edges=a.edges,this.collectEventTargets(e,t,n,"down"),this.pointerDown(e,t,n,r,a)):(this.downTimes[u]=(new Date).getTime(),this.downTargets[u]=n,g(this.downPointer,e),m(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,void this.collectEventTargets(e,t,n,"down"))},pointerDown:function(e,t,n,r,i){if(!i&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)return void this.checkAndPreventDefault(t,this.target,this.element);this.pointerIsDown=!0,this.downEvent=t;var o,a=this.addPointer(e);if(this.pointerIds.length>1&&this.target._element===this.element){var s=ie(i||this.target.getAction(e,t,this,this.element),this.target);Y(this.target,this.element,s)&&(o=s),this.prepared.name=null}else if(!this.prepared.name){var l=Ae.get(r);l&&!z(l,r,n)&&q(l,r,n)&&(o=ie(i||l.getAction(e,t,this,r),l,n))&&Y(l,r,o)&&(this.target=l,this.element=r)}var c=this.target,u=c&&c.options;if(!c||!i&&this.prepared.name)this.inertiaStatus.active&&r===this.element&&ie(c.getAction(e,t,this,this.element),c).name===this.prepared.name&&(Xe(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(t,c,this.element));else{if(o=o||ie(i||c.getAction(e,t,this,r),c,this.element),this.setEventXY(this.startCoords,this.pointers),!o)return;u.styleCursor&&(c._doc.documentElement.style.cursor=te(o)),this.resizeAxes="resize"===o.name?o.axis:null,"gesture"===o&&this.pointerIds.length<2&&(o=null),this.prepared.name=o.name,this.prepared.axis=o.axis,this.prepared.edges=o.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[a]=(new Date).getTime(),this.downTargets[a]=n,g(this.downPointer,e),m(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(t,c,this.element)}},setModifications:function(e,t){var n=this.target,r=!0,i=V(n,this.prepared.name)&&(!n.options[this.prepared.name].snap.endOnly||t),o=W(n,this.prepared.name)&&(!n.options[this.prepared.name].restrict.endOnly||t);return i?this.setSnapping(e):this.snapStatus.locked=!1,o?this.setRestriction(e):this.restrictStatus.restricted=!1,i&&this.snapStatus.locked&&!this.snapStatus.changed?r=o&&this.restrictStatus.restricted&&this.restrictStatus.changed:o&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(r=!1),r},setStartOffsets:function(e,t,n){var r,i,o=t.getRect(n),a=I(t,n),s=t.options[this.prepared.name].snap,l=t.options[this.prepared.name].restrict;o?(this.startOffset.left=this.startCoords.page.x-o.left,this.startOffset.top=this.startCoords.page.y-o.top,this.startOffset.right=o.right-this.startCoords.page.x,this.startOffset.bottom=o.bottom-this.startCoords.page.y,r="width"in o?o.width:o.right-o.left,i="height"in o?o.height:o.bottom-o.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0);var c=s&&"startCoords"===s.offset?{x:this.startCoords.page.x-a.x,y:this.startCoords.page.y-a.y}:s&&s.offset||{x:0,y:0};if(o&&s&&s.relativePoints&&s.relativePoints.length)for(var u=0;u<s.relativePoints.length;u++)this.snapOffsets.push({x:this.startOffset.left-r*s.relativePoints[u].x+c.x,y:this.startOffset.top-i*s.relativePoints[u].y+c.y});else this.snapOffsets.push(c);o&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-r*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-i*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-r*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-i*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(e,t,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===e.name?2:1)||(fe(De,this)===-1&&De.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=e.name,this.prepared.axis=e.axis,this.prepared.edges=e.edges,this.target=t,this.element=n,this.setStartOffsets(e.name,t,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(e,t,n,r,o){if(this.inertiaStatus.active){var a=this.inertiaStatus.upCoords.page,s=this.inertiaStatus.upCoords.client,l={pageX:a.x+this.inertiaStatus.sx,pageY:a.y+this.inertiaStatus.sy,clientX:s.x+this.inertiaStatus.sx,clientY:s.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[l])}else this.recordPointer(e),this.setEventXY(this.curCoords,this.pointers);var c,u,d=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,f=this.mouse?0:fe(this.pointerIds,C(e));if(this.pointerIsDown&&!this.pointerWasMoved&&(c=this.curCoords.client.x-this.startCoords.client.x,u=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=Ee(c,u)>je),d||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[f]),this.collectEventTargets(e,t,n,"move")),this.pointerIsDown){if(d&&this.pointerWasMoved&&!o)return void this.checkAndPreventDefault(t,this.target,this.element);if(_(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||e instanceof Q&&/inertiastart/.test(e.type))){if(!this.interacting()&&(_(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var h=Math.abs(c),p=Math.abs(u),g=this.target.options.drag.axis,v=h>p?"x":h<p?"y":"xy";if("xy"!==v&&"xy"!==g&&g!==v){this.prepared.name=null;for(var y=n;i(y);){var b=Ae.get(y);if(b&&b!==this.target&&!b.options.drag.manualStart&&"drag"===b.getAction(this.downPointer,this.downEvent,this,y).name&&H(v,b)){this.prepared.name="drag",this.target=b,this.element=y;break}y=B(y)}if(!this.prepared.name){var w=this,x=function(e,t,r){var i=ve?r.querySelectorAll(t):void 0;if(e!==w.target)return U(e,n)&&!e.options.drag.manualStart&&!z(e,y,n)&&q(e,y,n)&&pe(y,t,i)&&"drag"===e.getAction(w.downPointer,w.downEvent,w,y).name&&H(v,e)&&Y(e,y,"drag")?e:void 0};for(y=n;i(y);){var k=Ae.forEachSelector(x);if(k){this.prepared.name="drag",this.target=k,this.element=y;break}y=B(y)}}}}var S=!!this.prepared.name&&!this.interacting();if(S&&(this.target.options[this.prepared.name].manualStart||!Y(this.target,this.element,this.prepared)))return void this.stop(t);if(this.prepared.name&&this.target){S&&this.start(this.prepared,this.target,this.element);var E=this.setModifications(this.curCoords.page,o);(E||S)&&(this.prevEvent=this[this.prepared.name+"Move"](t)),this.checkAndPreventDefault(t,this.target,this.element)}}m(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(e)}}},dragStart:function(e){var t=new Q(this,e,"drag","start",this.element);this.dragging=!0,this.target.fire(t),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var n=this.getDropEvents(e,t);return n.activate&&this.fireActiveDrops(n.activate),t},dragMove:function(e){var t=this.target,n=new Q(this,e,"drag","move",this.element),r=this.element,i=this.getDrop(n,e,r);this.dropTarget=i.dropzone,this.dropElement=i.element;var o=this.getDropEvents(e,n);return t.fire(n),o.leave&&this.prevDropTarget.fire(o.leave),o.enter&&this.dropTarget.fire(o.enter),o.move&&this.dropTarget.fire(o.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,n},resizeStart:function(e){var t=new Q(this,e,"resize","start",this.element);if(this.prepared.edges){var n=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var r=p({},this.prepared.edges);r.top=r.top||r.left&&!r.bottom,r.left=r.left||r.top&&!r.right,r.bottom=r.bottom||r.right&&!r.top,r.right=r.right||r.bottom&&!r.left,this.prepared._linkedEdges=r}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=n.width/n.height),this.resizeRects={start:n,current:p({},n),restricted:p({},n),previous:p({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},t.rect=this.resizeRects.restricted,t.deltaRect=this.resizeRects.delta}return this.target.fire(t),this.resizing=!0,t},resizeMove:function(e){var t=new Q(this,e,"resize","move",this.element),n=this.prepared.edges,r=this.target.options.resize.invert,i="reposition"===r||"negate"===r;if(n){var o=t.dx,a=t.dy,s=this.resizeRects.start,l=this.resizeRects.current,c=this.resizeRects.restricted,u=this.resizeRects.delta,d=p(this.resizeRects.previous,c),f=n;if(this.target.options.resize.preserveAspectRatio){var h=this.resizeStartAspectRatio;n=this.prepared._linkedEdges,f.left&&f.bottom||f.right&&f.top?a=-o/h:f.left||f.right?a=o/h:(f.top||f.bottom)&&(o=a*h)}else this.target.options.resize.square&&(n=this.prepared._linkedEdges,f.left&&f.bottom||f.right&&f.top?a=-o:f.left||f.right?a=o:(f.top||f.bottom)&&(o=a));if(n.top&&(l.top+=a),n.bottom&&(l.bottom+=a),n.left&&(l.left+=o),n.right&&(l.right+=o),i){if(p(c,l),"reposition"===r){var g;c.top>c.bottom&&(g=c.top,c.top=c.bottom,c.bottom=g),c.left>c.right&&(g=c.left,c.left=c.right,c.right=g)}}else c.top=Math.min(l.top,s.bottom),c.bottom=Math.max(l.bottom,s.top),c.left=Math.min(l.left,s.right),c.right=Math.max(l.right,s.left);c.width=c.right-c.left,c.height=c.bottom-c.top;for(var m in c)u[m]=c[m]-d[m];t.edges=this.prepared.edges,t.rect=c,t.deltaRect=u}return this.target.fire(t),t},gestureStart:function(e){var t=new Q(this,e,"gesture","start",this.element);return t.ds=0,this.gesture.startDistance=this.gesture.prevDistance=t.distance,this.gesture.startAngle=this.gesture.prevAngle=t.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(t),t},gestureMove:function(e){if(!this.pointerIds.length)return this.prevEvent;var t;return t=new Q(this,e,"gesture","move",this.element),t.ds=t.scale-this.gesture.scale,this.target.fire(t),this.gesture.prevAngle=t.angle,this.gesture.prevDistance=t.distance,t.scale===1/0||null===t.scale||void 0===t.scale||isNaN(t.scale)||(this.gesture.scale=t.scale),t},pointerHold:function(e,t,n){this.collectEventTargets(e,t,n,"hold")},pointerUp:function(e,t,n,r){var i=this.mouse?0:fe(this.pointerIds,C(e));clearTimeout(this.holdTimers[i]),this.collectEventTargets(e,t,n,"up"),this.collectEventTargets(e,t,n,"tap"),this.pointerEnd(e,t,n,r),this.removePointer(e)},pointerCancel:function(e,t,n,r){var i=this.mouse?0:fe(this.pointerIds,C(e));clearTimeout(this.holdTimers[i]),this.collectEventTargets(e,t,n,"cancel"),this.pointerEnd(e,t,n,r),this.removePointer(e)},ie8Dblclick:function(e,t,n){this.prevTap&&t.clientX===this.prevTap.clientX&&t.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(e,t,n,"tap"))},pointerEnd:function(e,t,n,r){var i,o=this.target,a=o&&o.options,s=a&&this.prepared.name&&a[this.prepared.name].inertia,l=this.inertiaStatus;if(this.interacting()){if(l.active&&!l.ending)return;var c,u,d=(new Date).getTime(),f=!1,h=!1,g=!1,v=V(o,this.prepared.name)&&a[this.prepared.name].snap.endOnly,_=W(o,this.prepared.name)&&a[this.prepared.name].restrict.endOnly,y=0,b=0;if(c=this.dragging?"x"===a.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===a.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,f=s&&s.enabled&&"gesture"!==this.prepared.name&&t!==l.startEvent,h=f&&d-this.curCoords.timeStamp<50&&c>s.minSpeed&&c>s.endSpeed,f&&!h&&(v||_)){var w={};w.snap=w.restrict=w,v&&(this.setSnapping(this.curCoords.page,w),w.locked&&(y+=w.dx,b+=w.dy)),_&&(this.setRestriction(this.curCoords.page,w),w.restricted&&(y+=w.dx,b+=w.dy)),(y||b)&&(g=!0)}if(h||g){if(m(l.upCoords,this.curCoords),this.pointers[0]=l.startEvent=u=new Q(this,t,this.prepared.name,"inertiastart",this.element),l.t0=d,o.fire(l.startEvent),h){l.vx0=this.pointerDelta.client.vx,l.vy0=this.pointerDelta.client.vy,l.v0=c,this.calcInertia(l);var x,k=p({},this.curCoords.page),C=I(o,this.element);if(k.x=k.x+l.xe-C.x,k.y=k.y+l.ye-C.y,x={useStatusXY:!0,x:k.x,y:k.y,dx:0,dy:0,snap:null},x.snap=x,y=b=0,v){var S=this.setSnapping(this.curCoords.page,x);S.locked&&(y+=S.dx,b+=S.dy)}if(_){var E=this.setRestriction(this.curCoords.page,x);E.restricted&&(y+=E.dx,b+=E.dy)}l.modifiedXe+=y,l.modifiedYe+=b,l.i=Ke(this.boundInertiaFrame)}else l.smoothEnd=!0,l.xe=y,l.ye=b,l.sx=l.sy=0,l.i=Ke(this.boundSmoothEndFrame);return void(l.active=!0)}(v||_)&&this.pointerMove(e,t,n,r,!0)}if(this.dragging){i=new Q(this,t,"drag","end",this.element);var $=this.element,T=this.getDrop(i,t,$);this.dropTarget=T.dropzone,this.dropElement=T.element;var A=this.getDropEvents(t,i);A.leave&&this.prevDropTarget.fire(A.leave),A.enter&&this.dropTarget.fire(A.enter),A.drop&&this.dropTarget.fire(A.drop),A.deactivate&&this.fireActiveDrops(A.deactivate),o.fire(i)}else this.resizing?(i=new Q(this,t,"resize","end",this.element),o.fire(i)):this.gesturing&&(i=new Q(this,t,"gesture","end",this.element),o.fire(i));this.stop(t)},collectDrops:function(e){var t,n=[],r=[];for(e=e||this.element,t=0;t<Ae.length;t++)if(Ae[t].options.drop.enabled){var o=Ae[t],a=o.options.drop.accept;if(!(i(a)&&a!==e||f(a)&&!pe(e,a)))for(var s=o.selector?o._context.querySelectorAll(o.selector):[o._element],l=0,c=s.length;l<c;l++){var u=s[l];u!==e&&(n.push(o),r.push(u))}}return{dropzones:n,elements:r}},fireActiveDrops:function(e){var t,n,r,i;for(t=0;t<this.activeDrops.dropzones.length;t++)n=this.activeDrops.dropzones[t],r=this.activeDrops.elements[t],r!==i&&(e.target=r,n.fire(e)),i=r},setActiveDrops:function(e){var t=this.collectDrops(e,!0);this.activeDrops.dropzones=t.dropzones,this.activeDrops.elements=t.elements,this.activeDrops.rects=[];for(var n=0;n<this.activeDrops.dropzones.length;n++)this.activeDrops.rects[n]=this.activeDrops.dropzones[n].getRect(this.activeDrops.elements[n])},getDrop:function(e,t,n){var r=[];Oe&&this.setActiveDrops(n);for(var i=0;i<this.activeDrops.dropzones.length;i++){var o=this.activeDrops.dropzones[i],a=this.activeDrops.elements[i],s=this.activeDrops.rects[i];r.push(o.dropCheck(e,t,this.target,n,a,s)?a:null)}var l=K(r),c=this.activeDrops.dropzones[l]||null,u=this.activeDrops.elements[l]||null;return{dropzone:c,element:u}},getDropEvents:function(e,t){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragleave"},t.dragLeave=this.prevDropElement,t.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragenter"},t.dragEnter=this.dropElement,t.dropzone=this.dropTarget)),"dragend"===t.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"drop"},t.dropzone=this.dropTarget),"dragstart"===t.type&&(n.activate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropactivate"}),"dragend"===t.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropdeactivate"}),"dragmove"===t.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,dragmove:t,timeStamp:t.timeStamp,type:"dropmove"},t.dropzone=this.dropTarget),n},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(e){if(this.interacting()){Ie.stop(),this.matches=[],this.matchElements=[];var t=this.target;t.options.styleCursor&&(t._doc.documentElement.style.cursor=""),e&&c(e.preventDefault)&&this.checkAndPreventDefault(e,t,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var n=0;n<this.pointers.length;n++)fe(this.pointerIds,C(this.pointers[n]))===-1&&this.pointers.splice(n,1)},inertiaFrame:function(){var e=this.inertiaStatus,t=this.target.options[this.prepared.name].inertia,n=t.resistance,r=(new Date).getTime()/1e3-e.t0;if(r<e.te){var i=1-(Math.exp(-n*r)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye)e.sx=e.xe*i,e.sy=e.ye*i;else{var o=L(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,i);e.sx=o.x,e.sy=o.y}this.pointerMove(e.startEvent,e.startEvent),e.i=Ke(this.boundInertiaFrame)}else e.ending=!0,e.sx=e.modifiedXe,e.sy=e.modifiedYe,this.pointerMove(e.startEvent,e.startEvent),this.pointerEnd(e.startEvent,e.startEvent),e.active=e.ending=!1},smoothEndFrame:function(){var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<n?(e.sx=N(t,0,e.xe,n),e.sy=N(t,0,e.ye,n),this.pointerMove(e.startEvent,e.startEvent),e.i=Ke(this.boundSmoothEndFrame)):(e.ending=!0,e.sx=e.xe,e.sy=e.ye,this.pointerMove(e.startEvent,e.startEvent),this.pointerEnd(e.startEvent,e.startEvent),e.smoothEnd=e.active=e.ending=!1)},addPointer:function(e){var t=C(e),n=this.mouse?0:fe(this.pointerIds,t);return n===-1&&(n=this.pointerIds.length),this.pointerIds[n]=t,this.pointers[n]=e,n},removePointer:function(e){var t=C(e),n=this.mouse?0:fe(this.pointerIds,t);n!==-1&&(this.pointers.splice(n,1),this.pointerIds.splice(n,1),this.downTargets.splice(n,1),this.downTimes.splice(n,1),this.holdTimers.splice(n,1))},resetPointerState:function(){this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[]},recordPointer:function(e){var t=this.mouse?0:fe(this.pointerIds,C(e));t!==-1&&(this.pointers[t]=e)},collectEventTargets:function(e,t,n,r){function o(e,t,o){var a=ve?o.querySelectorAll(t):void 0;e._iEvents[r]&&i(c)&&U(e,c)&&!z(e,c,n)&&q(e,c,n)&&pe(c,t,a)&&(s.push(e),l.push(c))}var a=this.mouse?0:fe(this.pointerIds,C(e));if("tap"!==r||!this.pointerWasMoved&&this.downTargets[a]&&this.downTargets[a]===n){for(var s=[],l=[],c=n;c;)se.isSet(c)&&se(c)._iEvents[r]&&(s.push(se(c)),l.push(c)),Ae.forEachSelector(o),c=B(c);(s.length||"tap"===r)&&this.firePointers(e,t,n,s,l,r)}},firePointers:function(e,t,n,r,i,o){var a,s,l,c=this.mouse?0:fe(this.pointerIds,C(e)),d={};for("doubletap"===o?d=e:(g(d,t),t!==e&&g(d,e),d.preventDefault=ee,d.stopPropagation=Q.prototype.stopPropagation,d.stopImmediatePropagation=Q.prototype.stopImmediatePropagation,d.interaction=this,d.timeStamp=(new Date).getTime(),d.originalEvent=t,d.originalPointer=e,d.type=o,d.pointerId=C(e),d.pointerType=f(e.pointerType)?e.pointerType:u(e.pointerType)?[,,"touch","pen","mouse"][e.pointerType]:this.mouse?"mouse":"touch"),"tap"===o&&(d.dt=d.timeStamp-this.downTimes[c],s=d.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===d.target&&s<500),d.double=l,this.tapTime=d.timeStamp),a=0;a<r.length&&(d.currentTarget=i[a],d.interactable=r[a],r[a].fire(d),!(d.immediatePropagationStopped||d.propagationStopped&&i[a+1]!==d.currentTarget));a++);if(l){var h={};p(h,d),h.dt=s,h.type="doubletap",this.collectEventTargets(h,t,n,"doubletap"),this.prevTap=h}else"tap"===o&&(this.prevTap=d)},validateSelector:function(e,t,n,r){for(var i=0,o=n.length;i<o;i++){var a=n[i],s=r[i],l=ie(a.getAction(e,t,this,s),a);if(l&&Y(a,s,l))return this.target=a,this.element=s,l}},setSnapping:function(e,t){var n,r,i,o=this.target.options[this.prepared.name].snap,a=[];if(t=t||this.snapStatus,t.useStatusXY)r={x:t.x,y:t.y};else{var s=I(this.target,this.element);r=p({},e),r.x-=s.x,r.y-=s.y}t.realX=r.x,t.realY=r.y,r.x=r.x-this.inertiaStatus.resumeDx,r.y=r.y-this.inertiaStatus.resumeDy;for(var l=o.targets?o.targets.length:0,d=0;d<this.snapOffsets.length;d++){var f={x:r.x-this.snapOffsets[d].x,y:r.y-this.snapOffsets[d].y};for(i=0;i<l;i++)n=c(o.targets[i])?o.targets[i](f.x,f.y,this):o.targets[i],n&&a.push({x:u(n.x)?n.x+this.snapOffsets[d].x:f.x,y:u(n.y)?n.y+this.snapOffsets[d].y:f.y,range:u(n.range)?n.range:o.range})}var h={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(i=0,l=a.length;i<l;i++){n=a[i];var g=n.range,m=n.x-r.x,v=n.y-r.y,_=Ee(m,v),y=_<=g;g===1/0&&h.inRange&&h.range!==1/0&&(y=!1),h.target&&!(y?h.inRange&&g!==1/0?_/g<h.distance/h.range:g===1/0&&h.range!==1/0||_<h.distance:!h.inRange&&_<h.distance)||(g===1/0&&(y=!0),h.target=n,h.distance=_,h.range=g,h.inRange=y,h.dx=m,h.dy=v,t.range=g)}var b;return h.target?(b=t.snappedX!==h.target.x||t.snappedY!==h.target.y,t.snappedX=h.target.x,t.snappedY=h.target.y):(b=!0,t.snappedX=NaN,t.snappedY=NaN),t.dx=h.dx,t.dy=h.dy,t.changed=b||h.inRange&&!t.locked,t.locked=h.inRange,t},setRestriction:function(e,t){var n,r=this.target,o=r&&r.options[this.prepared.name].restrict,a=o&&o.restriction;if(!a)return t;t=t||this.restrictStatus,n=n=t.useStatusXY?{x:t.x,y:t.y}:p({},e),t.snap&&t.snap.locked&&(n.x+=t.snap.dx||0,n.y+=t.snap.dy||0),n.x-=this.inertiaStatus.resumeDx,n.y-=this.inertiaStatus.resumeDy,t.dx=0,t.dy=0,t.restricted=!1;var s,l,u;return f(a)&&(a="parent"===a?B(this.element):"self"===a?r.getRect(this.element):F(this.element,a),!a)?t:(c(a)&&(a=a(n.x,n.y,this.element)),i(a)&&(a=T(a)),s=a,a?"x"in a&&"y"in a?(l=Math.max(Math.min(s.x+s.width-this.restrictOffset.right,n.x),s.x+this.restrictOffset.left),u=Math.max(Math.min(s.y+s.height-this.restrictOffset.bottom,n.y),s.y+this.restrictOffset.top)):(l=Math.max(Math.min(s.right-this.restrictOffset.right,n.x),s.left+this.restrictOffset.left),u=Math.max(Math.min(s.bottom-this.restrictOffset.bottom,n.y),s.top+this.restrictOffset.top)):(l=n.x,u=n.y),t.dx=l-n.x,t.dy=u-n.y,t.changed=t.restrictedX!==l||t.restrictedY!==u,t.restricted=!(!t.dx&&!t.dy),t.restrictedX=l,t.restrictedY=u,t)},checkAndPreventDefault:function(e,t,n){if(t=t||this.target){var r=t.options,i=r.preventDefault;if("auto"===i&&n&&!/^(input|select|textarea)$/i.test(e.target.nodeName)){if(/down|start/i.test(e.type)&&"drag"===this.prepared.name&&"xy"!==r.drag.axis)return;if(r[this.prepared.name]&&r[this.prepared.name].manualStart&&!this.interacting())return;return void e.preventDefault()}return"always"===i?void e.preventDefault():void 0}},calcInertia:function(e){var t=this.target.options[this.prepared.name].inertia,n=t.resistance,r=-Math.log(t.endSpeed/e.v0)/n;e.x0=this.prevEvent.pageX,e.y0=this.prevEvent.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-r)/n,e.modifiedYe=e.ye=(e.vy0-r)/n,e.te=r,e.lambda_v0=n/e.v0,e.one_ve_v0=1-t.endSpeed/e.v0},autoScrollMove:function(e){if(this.interacting()&&G(this.target,this.prepared.name)){if(this.inertiaStatus.active)return void(Ie.x=Ie.y=0);var t,n,r,i,a=this.target.options[this.prepared.name].autoScroll,s=a.container||E(this.element);if(o(s))i=e.clientX<Ie.margin,t=e.clientY<Ie.margin,n=e.clientX>s.innerWidth-Ie.margin,r=e.clientY>s.innerHeight-Ie.margin;else{var l=$(s);i=e.clientX<l.left+Ie.margin,t=e.clientY<l.top+Ie.margin,n=e.clientX>l.right-Ie.margin,r=e.clientY>l.bottom-Ie.margin}Ie.x=n?1:i?-1:0,Ie.y=r?1:t?-1:0,Ie.isScrolling||(Ie.margin=a.margin,Ie.speed=a.speed,Ie.start(this))}},_updateEventTargets:function(e,t){this._eventTarget=e,this._curEventTarget=t}},Q.prototype={preventDefault:r,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var Qe={},et=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],tt=0,nt=et.length;tt<nt;tt++){var rt=et[tt];Qe[rt]=Z(rt)}Ae.indexOfElement=function(e,t){t=t||ye;for(var n=0;n<this.length;n++){var r=this[n];if(r.selector===e&&r._context===t||!r.selector&&r._element===e)return n}return-1},Ae.get=function(e,t){return this[this.indexOfElement(e,t&&t.context)]},Ae.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector){var r=e(n,n.selector,n._context,t,this);if(void 0!==r)return r}}},le.prototype={setOnEvents:function(e,t){return"drop"===e?(c(t.ondrop)&&(this.ondrop=t.ondrop),c(t.ondropactivate)&&(this.ondropactivate=t.ondropactivate),c(t.ondropdeactivate)&&(this.ondropdeactivate=t.ondropdeactivate),c(t.ondragenter)&&(this.ondragenter=t.ondragenter),c(t.ondragleave)&&(this.ondragleave=t.ondragleave),c(t.ondropmove)&&(this.ondropmove=t.ondropmove)):(e="on"+e,c(t.onstart)&&(this[e+"start"]=t.onstart),c(t.onmove)&&(this[e+"move"]=t.onmove),c(t.onend)&&(this[e+"end"]=t.onend),c(t.oninertiastart)&&(this[e+"inertiastart"]=t.oninertiastart)),this},draggable:function(e){return l(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.drag.axis=e.axis:null===e.axis&&delete this.options.drag.axis,this):d(e)?(this.options.drag.enabled=e,this):this.options.drag},setPerAction:function(e,t){for(var n in t)n in Re[e]&&(l(t[n])?(this.options[e][n]=p(this.options[e][n]||{},t[n]),l(Re.perAction[n])&&"enabled"in Re.perAction[n]&&(this.options[e][n].enabled=t[n].enabled!==!1)):d(t[n])&&l(Re.perAction[n])?this.options[e][n].enabled=t[n]:void 0!==t[n]&&(this.options[e][n]=t[n]))},dropzone:function(e){return l(e)?(this.options.drop.enabled=e.enabled!==!1,this.setOnEvents("drop",e),/^(pointer|center)$/.test(e.overlap)?this.options.drop.overlap=e.overlap:u(e.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(this.options.drop.accept=e.accept),"checker"in e&&(this.options.drop.checker=e.checker),this):d(e)?(this.options.drop.enabled=e,this):this.options.drop},dropCheck:function(e,t,n,r,i,o){var a=!1;if(!(o=o||this.getRect(i)))return!!this.options.drop.checker&&this.options.drop.checker(e,t,a,this,i,n,r);var s=this.options.drop.overlap;if("pointer"===s){var l,c,d=w(e),f=I(n,r);d.x+=f.x,d.y+=f.y,l=d.x>o.left&&d.x<o.right,c=d.y>o.top&&d.y<o.bottom,a=l&&c}var h=n.getRect(r);if("center"===s){var p=h.left+h.width/2,g=h.top+h.height/2;a=p>=o.left&&p<=o.right&&g>=o.top&&g<=o.bottom}if(u(s)){var m=Math.max(0,Math.min(o.right,h.right)-Math.max(o.left,h.left))*Math.max(0,Math.min(o.bottom,h.bottom)-Math.max(o.top,h.top)),v=m/(h.width*h.height);a=v>=s}return this.options.drop.checker&&(a=this.options.drop.checker(e,t,a,this,i,n,r)),a},dropChecker:function(e){return c(e)?(this.options.drop.checker=e,this):null===e?(delete this.options.getRect,this):this.options.drop.checker},accept:function(e){return i(e)?(this.options.drop.accept=e,this):h(e)?(this.options.drop.accept=e,this):null===e?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(e){return l(e)?(this.options.resize.enabled=e.enabled!==!1,this.setPerAction("resize",e),this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resize.axis=e.axis:null===e.axis&&(this.options.resize.axis=Re.resize.axis),d(e.preserveAspectRatio)?this.options.resize.preserveAspectRatio=e.preserveAspectRatio:d(e.square)&&(this.options.resize.square=e.square),this):d(e)?(this.options.resize.enabled=e,this):this.options.resize},squareResize:function(e){return d(e)?(this.options.resize.square=e,this):null===e?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(e){return l(e)?(this.options.gesture.enabled=e.enabled!==!1,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):d(e)?(this.options.gesture.enabled=e,this):this.options.gesture},autoScroll:function(e){return l(e)?e=p({actions:["drag","resize"]},e):d(e)&&(e={actions:["drag","resize"],enabled:e}),this.setOptions("autoScroll",e)},snap:function(e){var t=this.setOptions("snap",e);return t===this?this:t.drag},setOptions:function(e,t){var n,r=t&&s(t.actions)?t.actions:["drag"];if(l(t)||d(t)){for(n=0;n<r.length;n++){var i=/resize/.test(r[n])?"resize":r[n];if(l(this.options[i])){var o=this.options[i][e];l(t)?(p(o,t),o.enabled=t.enabled!==!1,"snap"===e&&("grid"===o.mode?o.targets=[se.createSnapGrid(p({offset:o.gridOffset||{x:0,y:0}},o.grid||{}))]:"anchor"===o.mode?o.targets=o.anchors:"path"===o.mode&&(o.targets=o.paths),"elementOrigin"in t&&(o.relativePoints=[t.elementOrigin]))):d(t)&&(o.enabled=t)}}return this}var a={},c=["drag","resize","gesture"];for(n=0;n<c.length;n++)e in Re[c[n]]&&(a[c[n]]=this.options[c[n]][e]);return a},inertia:function(e){var t=this.setOptions("inertia",e);return t===this?this:t.drag},getAction:function(e,t,n,r){var i=this.defaultActionChecker(e,n,r);return this.options.actionChecker?this.options.actionChecker(e,t,i,this,r,n):i},defaultActionChecker:re,actionChecker:function(e){return c(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(e){return e=e||this._element,this.selector&&!i(e)&&(e=this._context.querySelector(this.selector)),T(e)},rectChecker:function(e){return c(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return d(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):d(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault},origin:function(e){return h(e)?(this.options.origin=e,this):l(e)?(this.options.origin=e,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource},restrict:function(e){if(!l(e))return this.setOptions("restrict",e);for(var t,n=["drag","resize","gesture"],r=0;r<n.length;r++){var i=n[r];if(i in e){var o=p({actions:[i],restriction:e[i]},e);t=this.setOptions("restrict",o)}}return t},context:function(){return this._context},_context:ye,ignoreFrom:function(e){return h(e)?(this.options.ignoreFrom=e,this):i(e)?(this.options.ignoreFrom=e,this):this.options.ignoreFrom},allowFrom:function(e){return h(e)?(this.options.allowFrom=e,this):i(e)?(this.options.allowFrom=e,this):this.options.allowFrom},element:function(){return this._element},fire:function(e){if(!e||!e.type||!he(He,e.type))return this;var t,n,r,i="on"+e.type,o="";if(e.type in this._iEvents)for(t=this._iEvents[e.type],n=0,r=t.length;n<r&&!e.immediatePropagationStopped;n++)o=t[n].name,
t[n](e);if(c(this[i])&&(o=this[i].name,this[i](e)),e.type in Ve&&(t=Ve[e.type]))for(n=0,r=t.length;n<r&&!e.immediatePropagationStopped;n++)o=t[n].name,t[n](e);return this},on:function(e,t,n){var r;if(f(e)&&e.search(" ")!==-1&&(e=e.trim().split(/ +/)),s(e)){for(r=0;r<e.length;r++)this.on(e[r],t,n);return this}if(l(e)){for(var i in e)this.on(i,e[i],t);return this}if("wheel"===e&&(e=qe),n=!!n,he(He,e))e in this._iEvents?this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){if(!Pe[e])for(Pe[e]={selectors:[],contexts:[],listeners:[]},r=0;r<Te.length;r++)Je.add(Te[r],e,oe),Je.add(Te[r],e,ae,!0);var o,a=Pe[e];for(o=a.selectors.length-1;o>=0&&(a.selectors[o]!==this.selector||a.contexts[o]!==this._context);o--);o===-1&&(o=a.selectors.length,a.selectors.push(this.selector),a.contexts.push(this._context),a.listeners.push([])),a.listeners[o].push([t,n])}else Je.add(this._element,e,t,n);return this},off:function(e,t,n){var r;if(f(e)&&e.search(" ")!==-1&&(e=e.trim().split(/ +/)),s(e)){for(r=0;r<e.length;r++)this.off(e[r],t,n);return this}if(l(e)){for(var i in e)this.off(i,e[i],t);return this}var o,a=-1;if(n=!!n,"wheel"===e&&(e=qe),he(He,e))o=this._iEvents[e],o&&(a=fe(o,t))!==-1&&this._iEvents[e].splice(a,1);else if(this.selector){var c=Pe[e],u=!1;if(!c)return this;for(a=c.selectors.length-1;a>=0;a--)if(c.selectors[a]===this.selector&&c.contexts[a]===this._context){var d=c.listeners[a];for(r=d.length-1;r>=0;r--){var h=d[r][0],p=d[r][1];if(h===t&&p===n){d.splice(r,1),d.length||(c.selectors.splice(a,1),c.contexts.splice(a,1),c.listeners.splice(a,1),Je.remove(this._context,e,oe),Je.remove(this._context,e,ae,!0),c.selectors.length||(Pe[e]=null)),u=!0;break}}if(u)break}}else Je.remove(this._element,e,t,n);return this},set:function(e){l(e)||(e={}),this.options=p({},Re.base);var t,n=["drag","drop","resize","gesture"],r=["draggable","dropzone","resizable","gesturable"],i=p(p({},Re.perAction),e[o]||{});for(t=0;t<n.length;t++){var o=n[t];this.options[o]=p({},Re[o]),this.setPerAction(o,i),this[r[t]](e[o])}var a=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(t=0,nt=a.length;t<nt;t++){var s=a[t];this.options[s]=Re.base[s],s in e&&this[s](e[s])}return this},unset:function(){if(Je.remove(this._element,"all"),f(this.selector))for(var e in Pe)for(var t=Pe[e],n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(Pe[e]=null)),Je.remove(this._context,e,oe),Je.remove(this._context,e,ae,!0);break}else Je.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),Ae.splice(fe(Ae,this),1),se}},le.prototype.snap=ce(le.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),le.prototype.restrict=ce(le.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),le.prototype.inertia=ce(le.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),le.prototype.autoScroll=ce(le.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),le.prototype.squareResize=ce(le.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),le.prototype.accept=ce(le.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),le.prototype.dropChecker=ce(le.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),le.prototype.context=ce(le.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),se.isSet=function(e,t){return Ae.indexOfElement(e,t&&t.context)!==-1},se.on=function(e,t,n){if(f(e)&&e.search(" ")!==-1&&(e=e.trim().split(/ +/)),s(e)){for(var r=0;r<e.length;r++)se.on(e[r],t,n);return se}if(l(e)){for(var i in e)se.on(i,e[i],t);return se}return he(He,e)?Ve[e]?Ve[e].push(t):Ve[e]=[t]:Je.add(ye,e,t,n),se},se.off=function(e,t,n){if(f(e)&&e.search(" ")!==-1&&(e=e.trim().split(/ +/)),s(e)){for(var r=0;r<e.length;r++)se.off(e[r],t,n);return se}if(l(e)){for(var i in e)se.off(i,e[i],t);return se}if(he(He,e)){var o;e in Ve&&(o=fe(Ve[e],t))!==-1&&Ve[e].splice(o,1)}else Je.remove(ye,e,t,n);return se},se.enableDragging=ce(function(e){return null!==e&&void 0!==e?(ze.drag=e,se):ze.drag},"interact.enableDragging is deprecated and will soon be removed."),se.enableResizing=ce(function(e){return null!==e&&void 0!==e?(ze.resize=e,se):ze.resize},"interact.enableResizing is deprecated and will soon be removed."),se.enableGesturing=ce(function(e){return null!==e&&void 0!==e?(ze.gesture=e,se):ze.gesture},"interact.enableGesturing is deprecated and will soon be removed."),se.eventTypes=He,se.debug=function(){var e=De[0]||new X;return{interactions:De,target:e.target,dragging:e.dragging,resizing:e.resizing,gesturing:e.gesturing,prepared:e.prepared,matches:e.matches,matchElements:e.matchElements,prevCoords:e.prevCoords,startCoords:e.startCoords,pointerIds:e.pointerIds,pointers:e.pointers,addPointer:Qe.addPointer,removePointer:Qe.removePointer,recordPointer:Qe.recordPointer,snap:e.snapStatus,restrict:e.restrictStatus,inertia:e.inertiaStatus,downTime:e.downTimes[0],downEvent:e.downEvent,downPointer:e.downPointer,prevEvent:e.prevEvent,Interactable:le,interactables:Ae,pointerIsDown:e.pointerIsDown,defaultOptions:Re,defaultActionChecker:re,actionCursors:Ue,dragMove:Qe.dragMove,resizeMove:Qe.resizeMove,gestureMove:Qe.gestureMove,pointerUp:Qe.pointerUp,pointerDown:Qe.pointerDown,pointerMove:Qe.pointerMove,pointerHover:Qe.pointerHover,eventTypes:He,events:Je,globalEvents:Ve,delegatedEvents:Pe,prefixedPropREs:Ze}},se.resetPointerState=function(){var e=De[0]||new X;e.resetPointerState()},se.getPointerAverage=D,se.getTouchBBox=O,se.getTouchDistance=P,se.getTouchAngle=R,se.getElementRect=T,se.getElementClientRect=$,se.matchesSelector=pe,se.closest=F,se.margin=ce(function(e){return u(e)?(Ne=e,se):Ne},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),se.supportsTouch=function(){return Me},se.supportsPointerEvent=function(){return Le},se.stop=function(e){for(var t=De.length-1;t>=0;t--)De[t].stop(e);return se},se.dynamicDrop=function(e){return d(e)?(Oe=e,se):Oe},se.pointerMoveTolerance=function(e){return u(e)?(je=e,this):je},se.maxInteractions=function(e){return u(e)?(Be=e,this):Be},se.createSnapGrid=function(e){return function(t,n){var r=0,i=0;l(e.offset)&&(r=e.offset.x,i=e.offset.y);var o=Math.round((t-r)/e.x),a=Math.round((n-i)/e.y),s=o*e.x+r,c=a*e.y+i;return{x:s,y:c,range:e.range}}},de(ye),Ye in Element.prototype&&c(Element.prototype[Ye])||(ve=function(e,t,n){n=n||e.parentNode.querySelectorAll(t);for(var r=0,i=n.length;r<i;r++)if(n[r]===e)return!0;return!1}),function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!n.requestAnimationFrame;++r)Ke=n[t[r]+"RequestAnimationFrame"],Xe=n[t[r]+"CancelAnimationFrame"]||n[t[r]+"CancelRequestAnimationFrame"];Ke||(Ke=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout(function(){t(n+r)},r);return e=n+r,i}),Xe||(Xe=function(e){clearTimeout(e)})}(),"undefined"!=typeof e&&e.exports&&(t=e.exports=se),t.interact=se}}("undefined"==typeof window?void 0:window)}).call(t,n(25))},function(e,t,n){function r(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=n(0).Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){var r=t;r.bignum=n(4),r.define=n(84).define,r.base=n(16),r.constants=n(44),r.decoders=n(88),r.encoders=n(90)},function(e,t,n){(function(e){function n(e){var t,n;return t=e>s||e<0?(n=Math.abs(e)%s,e<0?s-n:n):e}function r(e){for(var t=0;t<e.length;e++)e[t]=0;return!1}function i(){this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=[[],[],[],[]],this.INV_SUB_MIX=[[],[],[],[]],this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,n=new Array(t),r=-1;++r<t;)n[r]=e.readUInt32BE(4*r);return n}function a(e){this._key=o(e),this._doReset()}var s=Math.pow(2,32);i.prototype.init=function(){var e,t,n,r,i,o,a,s,l,c;for(e=function(){var e,n;for(n=[],t=e=0;e<256;t=++e)t<128?n.push(t<<1):n.push(t<<1^283);return n}(),i=0,l=0,t=c=0;c<256;t=++c)n=l^l<<1^l<<2^l<<3^l<<4,n=n>>>8^255&n^99,this.SBOX[i]=n,this.INV_SBOX[n]=i,o=e[i],a=e[o],s=e[a],r=257*e[n]^16843008*n,this.SUB_MIX[0][i]=r<<24|r>>>8,this.SUB_MIX[1][i]=r<<16|r>>>16,this.SUB_MIX[2][i]=r<<8|r>>>24,this.SUB_MIX[3][i]=r,r=16843009*s^65537*a^257*o^16843008*i,this.INV_SUB_MIX[0][n]=r<<24|r>>>8,this.INV_SUB_MIX[1][n]=r<<16|r>>>16,this.INV_SUB_MIX[2][n]=r<<8|r>>>24,this.INV_SUB_MIX[3][n]=r,0===i?i=l=1:(i=o^e[e[e[s^o]]],l^=e[e[l]]);return!0};var l=new i;a.blockSize=16,a.prototype.blockSize=a.blockSize,a.keySize=32,a.prototype.keySize=a.keySize,a.prototype._doReset=function(){var e,t,n,r,i,o;for(n=this._key,t=n.length,this._nRounds=t+6,i=4*(this._nRounds+1),this._keySchedule=[],r=0;r<i;r++)this._keySchedule[r]=r<t?n[r]:(o=this._keySchedule[r-1],r%t===0?(o=o<<8|o>>>24,o=l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o],o^=l.RCON[r/t|0]<<24):t>6&&r%t===4?o=l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o]:void 0,this._keySchedule[r-t]^o);for(this._invKeySchedule=[],e=0;e<i;e++)r=i-e,o=this._keySchedule[r-(e%4?0:4)],this._invKeySchedule[e]=e<4||r<=4?o:l.INV_SUB_MIX[0][l.SBOX[o>>>24]]^l.INV_SUB_MIX[1][l.SBOX[o>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[o>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&o]];return!0},a.prototype.encryptBlock=function(t){t=o(new e(t));var n=this._doCryptBlock(t,this._keySchedule,l.SUB_MIX,l.SBOX),r=new e(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[1],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[3],12),r},a.prototype.decryptBlock=function(t){t=o(new e(t));var n=[t[3],t[1]];t[1]=n[0],t[3]=n[1];var r=this._doCryptBlock(t,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX),i=new e(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},a.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},a.prototype._doCryptBlock=function(e,t,r,i){var o,a,s,l,c,u,d,f,h;a=e[0]^t[0],s=e[1]^t[1],l=e[2]^t[2],c=e[3]^t[3],o=4;for(var p=1;p<this._nRounds;p++)u=r[0][a>>>24]^r[1][s>>>16&255]^r[2][l>>>8&255]^r[3][255&c]^t[o++],d=r[0][s>>>24]^r[1][l>>>16&255]^r[2][c>>>8&255]^r[3][255&a]^t[o++],f=r[0][l>>>24]^r[1][c>>>16&255]^r[2][a>>>8&255]^r[3][255&s]^t[o++],h=r[0][c>>>24]^r[1][a>>>16&255]^r[2][s>>>8&255]^r[3][255&l]^t[o++],a=u,s=d,l=f,c=h;return u=(i[a>>>24]<<24|i[s>>>16&255]<<16|i[l>>>8&255]<<8|i[255&c])^t[o++],d=(i[s>>>24]<<24|i[l>>>16&255]<<16|i[c>>>8&255]<<8|i[255&a])^t[o++],f=(i[l>>>24]<<24|i[c>>>16&255]<<16|i[a>>>8&255]<<8|i[255&s])^t[o++],h=(i[c>>>24]<<24|i[a>>>16&255]<<16|i[s>>>8&255]<<8|i[255&l])^t[o++],[n(u),n(d),n(f),n(h)]},t.AES=a}).call(t,n(0).Buffer)},function(e,t){t["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},t["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},t["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},t["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},t["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},t["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},t.aes128=t["aes-128-cbc"],t.aes192=t["aes-192-cbc"],t.aes256=t["aes-256-cbc"],t["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},t["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},t["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},t["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},t["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},t["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},t["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},t["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},t["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},t["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},t["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},t["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},t["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},t["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},t["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},t["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},t["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},t["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},function(e,t,n){(function(e){function r(e){for(var t,n=e.length;n--;){if(t=e.readUInt8(n),255!==t){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}function i(e){var t=e._cipher.encryptBlock(e._prev);return r(e._prev),t}var o=n(18);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,i(t)]);var r=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),o(n,r)}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n,r,o){t.isBuffer(e)||(e=new t(e,"binary")),n&&!t.isBuffer(n)&&(n=new t(n,"binary")),r/=8,o=o||0;for(var a,s,l=0,c=0,u=new t(r),d=new t(o),f=0,h=[];;){if(f++>0&&h.push(a),h.push(e),n&&h.push(n),a=i(t.concat(h)),h=[],s=0,r>0)for(;;){if(0===r)break;if(s===a.length)break;u[l++]=a[s],r--,s++}if(o>0&&s!==a.length)for(;;){if(0===o)break;if(s===a.length)break;d[c++]=a[s],o--,s++}if(0===r&&0===o)break}for(s=0;s<a.length;s++)a[s]=0;return{key:u,iv:d}}var i=n(58);e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e){var n;"object"!=typeof e||t.isBuffer(e)||(n=e.passphrase,e=e.key),"string"==typeof e&&(e=new t(e));var r,a,l=s(e,n),c=l.tag,u=l.data;switch(c){case"PUBLIC KEY":switch(a=o.PublicKey.decode(u,"der"),r=a.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(a.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return a.subjectPrivateKey=a.subjectPublicKey,{type:"ec",data:a};case"1.2.840.10040.4.1":return a.algorithm.params.pub_key=o.DSAparam.decode(a.subjectPublicKey.data,"der"),{type:"dsa",data:a.algorithm.params};default:throw new Error("unknown key id "+r)}throw new Error("unknown key type "+c);case"ENCRYPTED PRIVATE KEY":u=o.EncryptedPrivateKey.decode(u,"der"),u=i(u,n);case"PRIVATE KEY":switch(a=o.PrivateKey.decode(u,"der"),r=a.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(a.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:a.algorithm.curve,privateKey:o.ECPrivateKey.decode(a.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return a.algorithm.params.priv_key=o.DSAparam.decode(a.subjectPrivateKey,"der"),{type:"dsa",params:a.algorithm.params};default:throw new Error("unknown key id "+r)}throw new Error("unknown key type "+c);case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(u,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(u,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(u,"der")};case"EC PRIVATE KEY":return u=o.ECPrivateKey.decode(u,"der"),{curve:u.parameters.value,privateKey:u.privateKey};default:throw new Error("unknown key type "+c)}}function i(e,n){var r=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=a[e.algorithm.decrypt.cipher.algo.join(".")],s=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(o.split("-")[1],10)/8,f=c.pbkdf2Sync(n,r,i,d),h=l.createDecipheriv(o,f,s),p=[];return p.push(h.update(u)),p.push(h.final()),t.concat(p)}var o=n(114),a=n(129),s=n(115),l=n(36),c=n(63);e.exports=r,r.signature=o.signature}).call(t,n(0).Buffer)},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(22),o=n(9);o.inherits=n(3),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";(function(t){function r(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?O(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function i(e,t){A=A||n(6),e=e||{},this.objectMode=!!e.objectMode,t instanceof A&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(F||(F=n(26).StringDecoder),this.decoder=new F(e.encoding),this.encoding=e.encoding)}function o(e){return A=A||n(6),this instanceof o?(this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void P.call(this)):new o(e)}function a(e,t,n,r,i){var o=u(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,d(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var c;!t.decoder||i||r||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&f(e))),p(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){return e>=U?e=U:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=l(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function u(e,t){var n=null;return I.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,f(e)}}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(j("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?D(h,e):h(e))}function h(e){j("emit readable"),e.emit("readable"),b(e)}function p(e,t){t.readingMore||(t.readingMore=!0,D(g,e,t))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(j("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;j("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,b(e))}}function v(e){j("readable nexttick read 0"),e.read(0)}function _(e,t){t.resumeScheduled||(t.resumeScheduled=!0,D(y,e,t))}function y(e,t){t.reading||(j("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(j("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=x(e,t.buffer,t.decoder),n}function x(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?k(e,t):C(e,t),r}function k(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function C(e,t){var n=M.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function S(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,D(E,t,e))}function E(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function $(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function T(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}e.exports=o;var A,D=n(20),O=n(33);o.ReadableState=i;var P,R=(n(10).EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{P=n(7)}catch(e){}finally{P||(P=n(10).EventEmitter)}}();var I=n(0).Buffer,M=n(17),L=n(9);L.inherits=n(3);var N=n(76),j=void 0;j=N&&N.debuglog?N.debuglog("stream"):function(){};var F,B=n(68);L.inherits(o,P),o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=M.from(e,t),t="")),a(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return F||(F=n(26).StringDecoder),this._readableState.decoder=new F(e),this._readableState.encoding=e,this};var U=8388608;o.prototype.read=function(e){j("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return j("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?S(this):f(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&S(this),null;var r=t.needReadable;j("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,j("length less than watermark",r)),t.ended||t.reading?(r=!1,j("reading or ended",r)):r&&(j("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(n,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&S(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,n){function i(e){j("onunpipe"),e===f&&a()}function o(){j("onend"),e.end()}function a(){j("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",v),e.removeListener("error",l),e.removeListener("unpipe",i),f.removeListener("end",o),f.removeListener("end",a),f.removeListener("data",s),_=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){j("ondata"),y=!1;var n=e.write(t);!1!==n||y||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&T(h.pipes,e)!==-1)&&!_&&(j("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,y=!0),f.pause())}function l(t){j("onerror",t),d(),e.removeListener("error",l),0===R(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),d()}function u(){j("onfinish"),e.removeListener("close",c),d()}function d(){j("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,j("pipe count=%d opts=%j",h.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,g=p?o:a;h.endEmitted?D(g):f.once("end",g),e.on("unpipe",i);var v=m(f);e.on("drain",v);var _=!1,y=!1;return f.on("data",s),r(e,"error",l),e.once("close",c),e.once("finish",u),e.emit("pipe",f),h.flowing||(j("pipe resume"),f.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=T(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=P.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&f(this,r):D(v,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(j("resume"),e.flowing=!0,_(this,e)),this},o.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(j("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(j("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return $(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){j("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=w}).call(t,n(5))},function(e,t,n){function r(){return Object.keys(a)}var i=n(95);t.createCipher=t.Cipher=i.createCipher,t.createCipheriv=t.Cipheriv=i.createCipheriv;var o=n(94);t.createDecipher=t.Decipher=o.createDecipher,t.createDecipheriv=t.Decipheriv=o.createDecipheriv;var a=n(29);t.listCiphers=t.getCiphers=r},function(e,t,n){(function(t){function r(e){var t=o(e),n=t.toRed(a.mont(e.modulus)).redPow(new a(e.publicExponent)).fromRed();return{blinder:n,unblinder:t.invm(e.modulus)}}function i(e,n){var i=r(n),o=n.modulus.byteLength(),s=(a.mont(n.modulus),new a(e).mul(i.blinder).umod(n.modulus)),l=s.toRed(a.mont(n.prime1)),c=s.toRed(a.mont(n.prime2)),u=n.coefficient,d=n.prime1,f=n.prime2,h=l.redPow(n.exponent1),p=c.redPow(n.exponent2);h=h.fromRed(),p=p.fromRed();var g=h.isub(p).imul(u).umod(d);return g.imul(f),p.iadd(g),new t(p.imul(i.unblinder).umod(n.modulus).toArray(!1,o))}function o(e){for(var t=e.modulus.byteLength(),n=new a(s(t));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new a(s(t));return n}var a=n(4),s=n(21);e.exports=i,i.getr=o}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(t){function r(e,n){a.call(this),e=e.toLowerCase(),"string"==typeof n&&(n=new t(n));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=n,n.length>r?n=i(e).update(n).digest():n.length<r&&(n=t.concat([n,s],r));for(var o=this._ipad=new t(r),l=this._opad=new t(r),c=0;c<r;c++)o[c]=54^n[c],l[c]=92^n[c];this._hash=i(e).update(o)}var i=n(13),o=n(3),a=n(7).Transform,s=new t(128);s.fill(0),o(r,a),r.prototype.update=function(e,t){return this._hash.update(e,t),this},r.prototype._transform=function(e,t,n){this._hash.update(e),n()},r.prototype._flush=function(e){this.push(this.digest()),e()},r.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)},e.exports=function(e,t){return new r(e,t)}}).call(t,n(0).Buffer)},function(e,t,n){"use strict";t.utils=n(110),t.Cipher=n(107),t.DES=n(108),t.CBC=n(106),t.EDE=n(109)},function(e,t,n){n(83),e.exports=angular},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(r,i){var o;/*! hellojs v1.9.8 | (c) 2012-2018 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */
Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)i in t&&e.call(r,t[i],i,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(r,i,o){e.call(t||void 0,r,i,o)&&n.push(r)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(r,i,o){n.push(e.call(t||void 0,r,i,o))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,r=n.call(arguments,1),i=this,o=function(){return i.apply(this instanceof t?this:e||window,r.concat(n.call(arguments)))};return t.prototype=this.prototype,o.prototype=new t,o});/**
 * @hello.js
 *
 * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.
 *
 * @author Andrew Dodson
 * @website https://adodson.com/hello.js/
 *
 * @copyright Andrew Dodson, 2012 - 2015
 * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.
 */
var a=function(e){return a.use(e)};a.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(e instanceof Object&&t instanceof Object&&e!==t)for(var n in t)e[n]=a.utils.extend(e[n],t[n]);else e=t}),e}},a.utils.extend(a,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&(e[r]={id:e[r]});n.extend(this.services,e);for(r in this.services)this.services.hasOwnProperty(r)&&(this.services[r].scope=this.services[r].scope||{});return t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){a.emit(e,t)}function t(e){return e}function n(e){return!!e}var r,i=this,o=i.utils,s=o.error,l=o.Promise(),c=o.args({network:"s",options:"o",callback:"f"},arguments),u=o.diffKey(c.options,i.settings),d=c.options=o.merge(i.settings,c.options||{});if(d.popup=o.merge(i.settings.popup,c.options.popup||{}),c.network=c.network||i.settings.default_service,l.proxy.then(c.callback,c.callback),l.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof c.network||!(c.network in i.services))return l.reject(s("invalid_network","The provided network was not recognized"));var f=i.services[c.network];window.hellojs_listener||(window.hellojs_listener=!0,window.addEventListener("message",function(e){e.origin===window.location.origin&&e.data.hellojs_callback&&0===e.data.hellojs_callback.indexOf("_hellojs_")&&window[e.data.hellojs_callback](e.data.message)},!1));var h=o.globalEvent(function(e){var t;t=e?JSON.parse(e):s("cancelled","The authentication was not completed"),t.error?l.reject(t):(o.store(t.network,t),l.fulfill({network:t.network,authResponse:t}))}),p=o.url(d.redirect_uri).href,g=f.oauth.response_type||d.response_type;/\bcode\b/.test(g)&&!f.oauth.grant&&(g=g.replace(/\bcode\b/,"token")),c.qs=o.merge(u,{client_id:encodeURIComponent(f.id),response_type:encodeURIComponent(g),redirect_uri:encodeURIComponent(p),display:d.display,scope:"basic",state:{client_id:f.id,network:c.network,display:d.display,callback:h,state:d.state,redirect_uri:p}});var m=o.store(c.network),v=/[,\s]+/,_=(d.scope||"").toString()+","+c.qs.scope;if(m&&"scope"in m&&m.scope instanceof String&&(_+=","+m.scope),_=_.split(v),_=o.unique(_).filter(n),c.qs.state.scope=_.join(","),_=_.map(function(e){if(e in f.scope)return f.scope[e];for(var t in i.services){var n=i.services[t].scope;if(n&&e in n)return""}return e}),_=_.join(",").split(v),_=o.unique(_).filter(n),c.qs.scope=_.join(f.scope_delim||","),d.force===!1&&m&&"access_token"in m&&m.access_token&&"expires"in m&&m.expires>(new Date).getTime()/1e3){var y=o.diff((m.scope||"").split(v),(c.qs.state.scope||"").split(v));if(0===y.length)return l.fulfill({unchanged:!0,network:c.network,authResponse:m}),l}if("page"===d.display&&d.page_uri&&(c.qs.state.page_uri=o.url(d.page_uri).href),"login"in f&&"function"==typeof f.login&&f.login(c),(!/\btoken\b/.test(g)||parseInt(f.oauth.version,10)<2||"none"===d.display&&f.oauth.grant&&m&&m.refresh_token)&&(c.qs.state.oauth=f.oauth,c.qs.state.oauth_proxy=d.oauth_proxy),"object"==typeof chrome&&"object"==typeof chrome.extension&&(c.qs.state.chrome_ext_id=d.chrome_ext_id),c.qs.state=encodeURIComponent(JSON.stringify(c.qs.state)),1===parseInt(f.oauth.version,10)?r=o.qs(d.oauth_proxy,c.qs,t):"none"===d.display&&f.oauth.grant&&m&&m.refresh_token?(c.qs.refresh_token=m.refresh_token,r=o.qs(d.oauth_proxy,c.qs,t)):r=o.qs(f.oauth.auth,c.qs,t),"none"===d.display)o.iframe(r,p);else if("popup"===d.display)var b=o.popup(r,p,d.popup),w=setInterval(function(){if((!b||b.closed)&&(clearInterval(w),!l.state)){var e=s("cancelled","Login has been cancelled");b||(e=s("blocked","Popup was blocked")),e.network=c.network,l.reject(e)}},100);else window.location=r;return l.proxy},logout:function(){function e(e,t){a.emit(e,t)}var t=this,n=t.utils,r=n.error,i=n.Promise(),o=n.args({name:"s",options:"o",callback:"f"},arguments);if(o.options=o.options||{},i.proxy.then(o.callback,o.callback),i.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),o.name=o.name||this.settings.default_service,o.authResponse=n.store(o.name),!o.name||o.name in t.services)if(o.name&&o.authResponse){var s=function(e){n.store(o.name,null),i.fulfill(a.utils.merge({network:o.name},e||{}))},l={};if(o.options.force){var c=t.services[o.name].logout;if(c)if("function"==typeof c&&(c=c(s,o)),"string"==typeof c)n.iframe(c),l.force=null,l.message="Logout success on providers site was indeterminate";else if(void 0===c)return i.proxy}s(l)}else i.reject(r("invalid_session","There was no session to remove"));else i.reject(r("invalid_network","The network was unrecognized"));return i.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),a.utils.extend(a.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var r in t){var i="([\\?\\&])"+r+"=[^\\&]*",o=new RegExp(i);e.match(o)&&(e=e.replace(o,"$1"+r+"="+n(t[r])),delete t[r])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,r,i={};if("string"==typeof e){if(t=t||decodeURIComponent,r=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var o=0;o<r.length;o++)n=r[o].match(/([^=]+)=(.*)/),i[n[1]]=t(n[2]);return i}t=t||encodeURIComponent;var a=e;i=[];for(var s in a)a.hasOwnProperty(s)&&a.hasOwnProperty(s)&&i.push([s,"?"===a[s]?"?":t(a[s])].join("="));return i.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(e){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,r=["localStorage","sessionStorage"],i=-1,o="test";r[++i];)try{n=window[r[i]],n.setItem(o+i,i),n.removeItem(o+i);break}catch(e){n=null}if(!n){var a=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/(^\s+|\s+$)/,"");if(r&&0===r.indexOf(e))return r.substr(e.length)}return a},setItem:function(e,t){a=t,document.cookie=e+"="+t}},a=n.getItem("hello")}return function(n,r,i){var o=e();if(n&&void 0===r)return o[n]||null;if(n&&null===r)try{delete o[n]}catch(e){o[n]=null}else{if(!n)return o;o[n]=r}return t(o),o||null}}(),append:function(e,t,n){var r="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var i in t)if(t.hasOwnProperty(i))if("object"==typeof t[i])for(var o in t[i])t[i].hasOwnProperty(o)&&(r[i][o]=t[i][o]);else"html"===i?r.innerHTML=t[i]:/^on/.test(i)?r[i]=t[i]:r.setAttribute(i,t[i]);return"body"===n?!function e(){document.body?document.body.appendChild(r):setTimeout(e,16)}():"object"==typeof n?n.appendChild(r):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(r),r},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},r=0,i=null,o=null;for(o in e)if(e.hasOwnProperty(o))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[o])for(o in t[0])if(e.hasOwnProperty(o)&&o in e)return t[0];for(o in e)if(e.hasOwnProperty(o))if(i=typeof t[r],"function"==typeof e[o]&&e[o].test(t[r])||"string"==typeof e[o]&&(e[o].indexOf("s")>-1&&"string"===i||e[o].indexOf("o")>-1&&"object"===i||e[o].indexOf("i")>-1&&"number"===i||e[o].indexOf("a")>-1&&"object"===i||e[o].indexOf("f")>-1&&"function"===i))n[o]=t[r++];else if("string"==typeof e[o]&&e[o].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t.cloneNode(!1)}return window.location},diff:function(e,t){return t.filter(function(t){return e.indexOf(t)===-1})},diffKey:function(e,t){if(e||!t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},/*!
	 **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
	 **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>
	 **  Licensed under The MIT License <http://opensource.org/licenses/MIT>
	 **  Source-Code distributed on <http://github.com/rse/thenable>
	 */
Promise:function(){var e=0,t=1,n=2,o=function(t){return this instanceof o?(this.id="Thenable/1.0.6",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new o(t)};o.prototype={fulfill:function(e){return a(this,t,"fulfillValue",e)},reject:function(e){return a(this,n,"rejectReason",e)},then:function(e,t){var n=this,r=new o;return n.onFulfilled.push(c(e,r,"fulfill")),n.onRejected.push(c(t,r,"reject")),s(n),r.proxy}};var a=function(t,n,r,i){return t.state===e&&(t.state=n,t[r]=i,s(t)),t},s=function(e){e.state===t?l(e,"onFulfilled",e.fulfillValue):e.state===n&&l(e,"onRejected",e.rejectReason)},l=function(e,t,n){if(0!==e[t].length){var o=e[t];e[t]=[];var a=function(){for(var e=0;e<o.length;e++)o[e](n)};"object"==typeof r&&"function"==typeof r.nextTick?r.nextTick(a):"function"==typeof i?i(a):setTimeout(a,0)}},c=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(e){return void t.reject(e)}u(t,i)}}},u=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(t){return void e.reject(t)}if("function"!=typeof n)e.fulfill(t);else{var r=!1;try{n.call(t,function(n){r||(r=!0,n===t?e.reject(new TypeError("circular thenable chain")):u(e,n))},function(t){r||(r=!0,e.reject(t))})}catch(t){r||e.reject(t)}}};return o}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,n){if(n&&"function"==typeof n)for(var r=t.split(e),i=0;i<r.length;i++)this.events[r[i]]=[n].concat(this.events[r[i]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,r){t[t.length-1]="*"===n?e:n,this.events[n][r].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e+",*",n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,n){var r=t.split(e);for(var i in this.events)if(this.events.hasOwnProperty(i)&&r.indexOf(i)>-1)for(var o=0;o<this.events[i].length;o++)this.events[i][o]&&n.call(this,i,o)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(e){}},t},popup:function(e,t,n){var r=document.documentElement;if(n.height){var i=void 0!==window.screenTop?window.screenTop:screen.top,o=screen.height||window.innerHeight||r.clientHeight;n.top=parseInt((o-n.height)/2,10)+i}if(n.width){var s=void 0!==window.screenLeft?window.screenLeft:screen.left,l=screen.width||window.innerWidth||r.clientWidth;n.left=parseInt((l-n.width)/2,10)+s}var c=[];Object.keys(n).forEach(function(e){var t=n[e];c.push(e+(null!==t?"="+t:""))});var u=function(e){var n=window.open(e,"_blank",c.join(","));try{if(n&&n.addEventListener){var r=a.utils.url(t),i=r.origin||r.protocol+"//"+r.hostname;n.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(i)){var r=a.utils.url(t),o={location:{assign:function(e){n.addEventListener("exit",function(){setTimeout(function(){u(e)},1e3)})},search:r.search,hash:r.hash,href:r.href},close:function(){n.close&&n.close()}};a.utils.responseHandler(o,window),o.close()}})}}catch(e){}return n&&n.focus&&n.focus(),n};return navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e))),u(e)},responseHandler:function(e,t){function n(e,t,n){var r=e.callback,o=e.network;if(a.store(o,e),!("display"in e&&"page"===e.display)){if(e.chrome_ext_id&&"object"==typeof chrome&&"object"==typeof chrome.runtime){try{delete e.callback}catch(e){}message={},message.message_type="google_auth_response",message.callback=r,message.obj=JSON.stringify(e),chrome.runtime.sendMessage(e.chrome_ext_id,message)}else if(n){try{delete e.callback}catch(e){}a.store(o,e);var s=JSON.stringify(e);try{n.postMessage({message:s,hellojs_callback:r},t.location.origin)}catch(e){}}setTimeout(function(){i()},300)}}function r(e,t){return 0!==t.indexOf("_hellojs_")?function(){throw"Could not execute callback "+t}:e[t]}function i(){if(e.frameElement)e.parent.document.body.removeChild(e.frameElement);else{try{e.close()}catch(e){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}}var o,a=this,s=e.location;if(o=a.param(s.search),o&&o.state&&(o.code||o.oauth_token)){var l=JSON.parse(o.state);o.redirect_uri=l.redirect_uri||s.href.replace(/[\?\#].*$/,"");var c=l.oauth_proxy+"?"+a.param(o);return void s.assign(c)}if(o=a.merge(a.param(s.search||""),a.param(s.hash||"")),o&&"state"in o){try{var u=JSON.parse(o.state);a.extend(o,u)}catch(e){}if("access_token"in o&&o.access_token&&o.network)o.expires_in&&0!==parseInt(o.expires_in,10)||(o.expires_in=0),o.expires_in=parseInt(o.expires_in,10),o.expires=(new Date).getTime()/1e3+(o.expires_in||31536e3),n(o,e,t);else if("error"in o&&o.error&&o.network)o.error={code:o.error,message:o.error_message||o.error_description},n(o,e,t);else if(o.callback&&o.callback in t){var d=!!("result"in o&&o.result)&&JSON.parse(o.result);r(t,o.callback)(d),i()}o.page_uri&&s.assign(o.page_uri)}else if("oauth_redirect"in o)return void s.assign(decodeURIComponent(o.oauth_redirect))}}),a.utils.Event.call(a),a.utils.responseHandler(window,window.opener||window.parent),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function r(){var i=(new Date).getTime()/1e3,o=function(t){e.emit("auth."+t,{network:a,authResponse:s})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var s=e.utils.store(a)||{},l=e.services[a],c=t[a]||{};if(s&&"callback"in s){var u=s.callback;try{delete s.callback}catch(e){}e.utils.store(a,s);try{window[u](s)}catch(e){}}if(s&&"expires"in s&&s.expires<i){var d=l.refresh||s.refresh_token;!d||a in n&&!(n[a]<i)?d||a in n||(o("expired"),n[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),n[a]=i+600);continue}if(c.access_token===s.access_token&&c.expires===s.expires)continue;!s.access_token&&c.access_token?o("logout"):s.access_token&&!c.access_token?o("login"):s.expires!==c.expires&&o("update"),t[a]=s,a in n&&delete n[a]}setTimeout(r,1e3)}()}(a),a.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var a=n?n.replace(/^\|/,""):"";return t in o.query?(a=o.query[t],delete o.query[t]):o.data&&t in o.data?(a=o.data[t],delete o.data[t]):n||i.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=c.base+e),o.url=e,n.request(o,function(e,t){if(!o.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?i.reject(e):i.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===o.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),c.wrap&&(o.path in c.wrap||"default"in c.wrap)){var r=o.path in c.wrap?o.path:"default",a=((new Date).getTime(),c.wrap[r](e,t,o));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=o.path+e.paging.next:e.paging.next+="#"+o.path),!e||"error"in e?i.reject(e):i.fulfill(e)})}var t=this,n=t.utils,r=n.error,i=n.Promise(),o=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);o.method=(o.method||"get").toLowerCase(),o.headers=o.headers||{},o.query=o.query||{},"get"!==o.method&&"delete"!==o.method||(n.extend(o.query,o.data),o.data={});var a=o.data=o.data||{};if(i.then(o.callback,o.callback),!o.path)return i.reject(r("invalid_path","Missing the path parameter from the request"));o.path=o.path.replace(/^\/+/,"");var s=(o.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in t.services){o.network=s;var l=new RegExp("^"+s+":?/?");o.path=o.path.replace(l,"")}o.network=t.settings.default_service=o.network||t.settings.default_service;var c=t.services[o.network];if(!c)return i.reject(r("invalid_network","Could not match the service requested: "+o.network));if(o.method in c&&o.path in c[o.method]&&c[o.method][o.path]===!1)return i.reject(r("invalid_path","The provided path is not available on the selected network"));o.oauth_proxy||(o.oauth_proxy=t.settings.oauth_proxy),"proxy"in o||(o.proxy=o.oauth_proxy&&c.oauth&&1===parseInt(c.oauth.version,10)),"timeout"in o||(o.timeout=t.settings.timeout),"formatResponse"in o||(o.formatResponse=!0),o.authResponse=t.getAuthResponse(o.network),o.authResponse&&o.authResponse.access_token&&(o.query.access_token=o.authResponse.access_token);var u,d=o.path;o.options=n.clone(o.query),o.data=n.clone(a);var f=c[{delete:"del"}[o.method]||o.method]||{};if("get"===o.method){var h=d.split(/[\?#]/)[1];h&&(n.extend(o.query,n.param(h)),d=d.replace(/\?.*?(#|$)/,"$1"))}return(u=d.match(/#(.+)/,""))?(d=d.split("#")[0],o.path=u[1]):d in f?(o.path=d,d=f[d]):"default"in f&&(d=f.default),o.redirect_uri=t.settings.redirect_uri,o.xhr=c.xhr,o.jsonp=c.jsonp,o.form=c.form,"function"==typeof d?d(o,e):e(d),i.proxy},a.utils.extend(a.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(r.extend(e.query,e.data),e.data=null);var i=r.qs(e.url,e.query);e.proxy&&(i=r.qs(e.oauth_proxy,{path:i,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(i)}var r=this,i=r.error;r.isEmpty(e.data)||"FileList"in window||!r.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var o=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(o)return void n(e,function(n){var i=r.xhr(e.method,n,e.headers,e.data,t);i.onprogress=e.onprogress||null,i.upload&&e.onuploadprogress&&(i.upload.onprogress=e.onuploadprogress)});var a=e.query;if(e.query=r.clone(e.query),e.callbackID=r.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){r.jsonp(n,t,e.callbackID,e.timeout)});e.query=a}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var s;if("function"==typeof e.form&&(s=e.form(e,e.query)),"post"===e.method&&s!==!1)return void n(e,function(n){r.post(n,e.data,s,t,e.callbackID,e.timeout)})}t(i("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return!!t&&(window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e)},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e))return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,r,i){function o(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}var a=new XMLHttpRequest,s=this.error,l=!1;"blob"===e&&(l=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var n=a.response;try{n=JSON.parse(a.responseText)}catch(e){401===a.status&&(n=s("access_denied",a.statusText))}var r=o(a.getAllResponseHeaders());r.statusCode=a.status,i(n||("GET"===e?s("empty_response","Could not get resource"):{}),r)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(e){}i(t||s("access_denied","Could not get resource"))};var c;if("GET"===e||"DELETE"===e)r=null;else if(r&&"string"!=typeof r&&!(r instanceof FormData)&&!(r instanceof File)&&!(r instanceof Blob)){var u=new FormData;for(c in r)r.hasOwnProperty(c)&&(r[c]instanceof HTMLInputElement?"files"in r[c]&&r[c].files.length>0&&u.append(c,r[c].files[0]):r[c]instanceof Blob?u.append(c,r[c],r.name):u.append(c,r[c]));r=u}if(a.open(e,t,!0),l&&("responseType"in a?a.responseType=l:a.overrideMimeType("text/plain; charset=x-user-defined")),n)for(c in n)a.setRequestHeader(c,n[c]);return a.send(r),a},jsonp:function(e,t,n,r){var i,o=this,a=o.error,s=0,l=document.getElementsByTagName("head")[0],c=a("server_error","server_error"),u=function(){s++||window.setTimeout(function(){t(c),l.removeChild(d)},0)};n=o.globalEvent(function(e){return c=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var d=o.append("script",{id:n,name:n,src:e,async:!0,onload:u,onerror:u,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&u()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=o.append("script",{text:"document.getElementById('"+n+"').onerror();"}),d.async=!1),r&&window.setTimeout(function(){c=a("timeout","timeout"),u()},r),l.appendChild(d),i&&l.appendChild(i)},post:function(e,t,n,r,i,o){var a,s=this,l=s.error,c=document,u=null,d=[],f=0,h=null,p=0,g=function(e){p++||r(e)};s.globalEvent(g,i);var m;try{m=c.createElement('<iframe name="'+i+'">')}catch(e){m=c.createElement("iframe")}if(m.name=i,m.id=i,m.style.display="none",n&&n.callbackonload&&(m.onload=function(){g({response:"posted",message:"Content was posted"})}),o&&setTimeout(function(){g(l("timeout","The post operation timed out"))},o),c.body.appendChild(m),s.domInstance("form",t)){for(u=t.form,f=0;f<u.elements.length;f++)u.elements[f]!==t&&u.elements[f].setAttribute("disabled",!0);t=u}if(s.domInstance("form",t))for(u=t,f=0;f<u.elements.length;f++)u.elements[f].disabled||"file"!==u.elements[f].type||(u.encoding=u.enctype="multipart/form-data",u.elements[f].setAttribute("name","file"));else{for(h in t)t.hasOwnProperty(h)&&s.domInstance("input",t[h])&&"file"===t[h].type&&(u=t[h].form,u.encoding=u.enctype="multipart/form-data");u||(u=c.createElement("form"),c.body.appendChild(u),a=u);var v;for(h in t)if(t.hasOwnProperty(h)){var _=s.domInstance("input",t[h])||s.domInstance("textArea",t[h])||s.domInstance("select",t[h]);if(_&&t[h].form===u)_&&t[h].name!==h&&(t[h].setAttribute("name",h),t[h].name=h);else{var y=u.elements[h];if(v)for(y instanceof NodeList||(y=[y]),f=0;f<y.length;f++)y[f].parentNode.removeChild(y[f]);v=c.createElement("input"),v.setAttribute("type","hidden"),v.setAttribute("name",h),_?v.value=t[h].value:s.domInstance(null,t[h])?v.value=t[h].innerHTML||t[h].innerText:v.value=t[h],u.appendChild(v)}}for(f=0;f<u.elements.length;f++)v=u.elements[f],v.name in t||v.getAttribute("disabled")===!0||(v.setAttribute("disabled",!0),d.push(v))}u.setAttribute("method","POST"),u.setAttribute("target",i),u.target=i,u.setAttribute("action",e),setTimeout(function(){u.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{}catch(e){}}for(var e=0;e<d.length;e++)d[e]&&(d[e].setAttribute("disabled",!1),d[e].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var r=atob(e.replace(t,"")),i=[],o=0;o<r.length;o++)i.push(r.charCodeAt(o));return new Blob([new Uint8Array(i)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,r=e.data;if(t.domInstance("form",r)?r=t.nodeListToJSON(r.elements):"NodeList"in n&&r instanceof NodeList?r=t.nodeListToJSON(r):t.domInstance("input",r)&&(r=t.nodeListToJSON([r])),("File"in n&&r instanceof n.File||"Blob"in n&&r instanceof n.Blob||"FileList"in n&&r instanceof n.FileList)&&(r={file:r}),!("FormData"in n&&r instanceof n.FormData))for(var i in r)if(r.hasOwnProperty(i))if("FileList"in n&&r[i]instanceof n.FileList)1===r[i].length&&(r[i]=r[i][0]);else{if(t.domInstance("input",r[i])&&"file"===r[i].type)continue;t.domInstance("input",r[i])||t.domInstance("select",r[i])||t.domInstance("textArea",r[i])?r[i]=r[i].value:t.domInstance(null,r[i])&&(r[i]=r[i].innerHTML||r[i].innerText)}return e.data=r,r},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&("file"===r.type?t[r.name]=r:t[r.name]=r.value||r.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(a),"object"==typeof chrome&&"object"==typeof chrome.extension&&chrome.runtime.onMessageExternal.addListener(function(e){"google_auth_response"==e.message_type&&0===e.callback.indexOf("_hellojs_")&&window[e.callback](e.obj)}),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,r){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var i=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");i=i.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=r.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+i+"?format=jpeg&size=m")+"&access_token="+r.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=i.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+i)+"&access_token="+r.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+i),t.id||(t.id=t.path.replace(/^\//,""))}}function r(e){return function(t,n){delete t.query.limit,n(e)}}var i={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},o={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:o,login:function(t){t.qs.scope="",delete t.qs.display;var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=i:e.services.dropbox.oauth=o,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":r("metadata/auto/@{parent|}"),"me/folder":r("metadata/auto/@{id}"),"me/folders":r("metadata/auto/"),default:function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var r=t.data.parent,i=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+r+"/"+i)},"me/folders":function(t,n){var r=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:r}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},default:function(e,r,i){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,n(t,r,i)})),n(e,r,i),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(a),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function r(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var r=n.query.access_token;if(!(e.data instanceof Array)){var o=e.data;delete e.data,e.data=[o]}e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=i+e.cover_photo.id+"/picture?access_token="+r),"album"===e.type&&(e.files=e.photos=i+e.id+"/photos"),e.can_upload&&(e.upload_location=i+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.popup.width=580,e.options.popup.height=400},logout:function(t,n){var r=e.utils.globalEvent(t),i=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:r,result:JSON.stringify({force:!0}),state:"{}"})),o=(n.authResponse||{}).access_token;if(e.utils.iframe("https://www.facebook.com/logout.php?next="+i+"&access_token="+o),!o)return!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":r,"me/photos":r,"me/files":r,default:r},xhr:function(t,n){return"get"!==t.method&&"post"!==t.method||(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var r=t.method;"get"===r||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=r,t.method="get")},form:function(e){return{callbackonload:!0}}}});var i="https://graph.facebook.com/"}(a),function(e){function t(t,n,r){var i=(r?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var o in n)n.hasOwnProperty(o)&&(i+="&"+o+"="+n[o]);return i}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function r(e,r){return r||(r={}),function(i,o){n(function(n){r.user_id=n,o(t(e,r,!0))})}}function i(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function o(e,t,n,r,i){return i=i?"_"+i:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+r+i+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function s(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=c(e,t),d(e),e.data=e.photo,delete e.photo;for(var n=0;n<e.data.length;n++){var r=e.data[n];r.name=r.title,r.picture=o(r.id,r.farm,r.server,r.secret,""),r.pictures=l(r.id,r.farm,r.server,r.secret),r.source=o(r.id,r.farm,r.server,r.secret,"b"),r.thumbnail=o(r.id,r.farm,r.server,r.secret,"m")}}return e}function l(e,t,n,r){var i=2048,a=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:i}];return a.map(function(i){return{source:o(e,t,n,r,i.id),width:i.max,height:i.max}})}function c(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function u(e){if(a(e),e.contacts){e=c(e,"contacts"),d(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=i(n,"m")}}return e}function d(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:r("flickr.people.getInfo"),"me/friends":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":r("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":r("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":r("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=c(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=i(e,"l"),e.picture=i(e,"l")}return e},"me/friends":u,"me/followers":u,"me/following":u,"me/albums":function(e){return a(e),e=c(e,"photosets"),d(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),s(e)},default:function(e){return a(e),s(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(a),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function r(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},default:function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:r,jsonp:r}})}(a),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;401!==n&&403!==n||(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function r(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var r=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);r&&(e.paging={next:r[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,r){return t(e,r),n(e),e},default:function(e,i,o){return t(e,i),Array.isArray(e)&&(e={data:e}),e.data&&(r(e,i,o),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(a),function(e){function t(e){return parseInt(e,10)}function n(e){return u(e),e.data=e.items,delete e.items,e}function r(e){if(!e.error)return e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents&supportsTeamDrives=true"),e}function i(e){return{source:e.url,width:e.width,height:e.height}}function o(e){e.data=e.feed.entry.map(c),delete e.feed}function a(e){if(u(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(c),delete e.feed;else{if("entry"in e)return c(e.entry);"items"in e?(e.data=e.items.map(r),delete e.items):r(e)}return e}function s(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function l(e,t,n){u(e);if("feed"in e&&"entry"in e.feed){for(var r=n.query.access_token,i=0;i<e.feed.entry.length;i++){var o=e.feed.entry[i];if(o.id=o.id.$t,o.name=o.title.$t,delete o.title,o.gd$email&&(o.email=o.gd$email&&o.gd$email.length>0?o.gd$email[0].address:null,o.emails=o.gd$email,delete o.gd$email),o.updated&&(o.updated=o.updated.$t),o.link){var a=o.link.length>0?o.link[0].href:null;a&&o.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+r,o.picture=a,o.thumbnail=a),delete o.link}o.category&&delete o.category}e.data=e.feed.entry,delete e.feed}return e}function c(e){var t,n=e.media$group,r=n.media$content.length?n.media$content[0]:{},o=n.media$content||[],a=n.media$thumbnail||[],s=o.concat(a).map(i).sort(function(e,t){return e.width-t.width}),l=0,c={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:r?r.url:null,pictures:s,images:[],thumbnail:r?r.url:null,width:r.width,height:r.height};if("link"in e)for(l=0;l<e.link.length;l++){var u=e.link[l];if(u.rel.match(/\#feed$/)){c.upload_location=c.files=c.photos=u.href;break}}if("category"in e&&e.category.length)for(t=e.category,l=0;l<t.length;l++)t[l].scheme&&t[l].scheme.match(/\#kind$/)&&(c.type=t[l].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,c.thumbnail=t[0].url,c.images=t.map(i)),t=n.media$content,t&&t.length&&c.images.push(i(t[0])),c}function u(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),r=t(e.feed.openSearch$startIndex.$t),i=t(e.feed.openSearch$totalResults.$t);r+n<i&&(e.paging={next:"?start="+(r+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function d(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+o+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(o+"Content-Type: "+t+o+o+e),i--,s()}var n=[],r=(1e10*Math.random()).toString(32),i=0,o="\r\n",a=o+"--"+r,s=function(){},l=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,r){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var a=0;a<n.length;a++){i++;var s=n[a];if("undefined"!=typeof File&&s instanceof File||"undefined"!=typeof Blob&&s instanceof Blob)e(s);else if("string"==typeof s&&s.match(l)){var c=s.match(l);t(s.replace(l,""),c[1]+o+"Content-Transfer-Encoding: base64")}else t(s,r)}},this.onready=function(e){(s=function(){0===i&&(n.unshift(""),n.push("--"),e(n.join(a),r),n=[])})()}}function f(e,t){
var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var r;if("file"in e.data&&(r=e.data.file,delete e.data.file,"object"==typeof r&&"files"in r&&(r=r.files),!r||!r.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var i=new d;i.append(JSON.stringify(e.data),"application/json"),r&&i.append(r),i.onready(function(r,i){e.headers["content-type"]='multipart/related; boundary="'+i+'"',e.data=r,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart&supportsTeamDrives=true")})}function h(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(e){}}var p="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":p,"me/followers":p,"me/contacts":p,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":function(e,t){t(e.query.id?"drive/v2/files/@{id}?supportsTeamDrives=true":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}&supportsTeamDrives=true")},"me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}&supportsTeamDrives=true","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}&supportsTeamDrives=true"},post:{"me/files":f,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files?supportsTeamDrives=true")}},put:{"me/files":f},del:{"me/files":"drive/v2/files/@{id}?supportsTeamDrives=true","me/folder":"drive/v2/files/@{id}?supportsTeamDrives=true"},patch:{"me/files":"drive/v2/files/@{id}?supportsTeamDrives=true"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),s(e)),e},"me/friends":function(e){return e.items&&(u(e),e.data=e.items,e.data.forEach(s),delete e.items),e},"me/contacts":l,"me/followers":l,"me/following":l,"me/share":n,"me/feed":n,"me/albums":a,"me/photos":o,default:a},xhr:function(t){"post"===t.method||"put"===t.method?h(t):"patch"===t.method&&(e.utils.extend(t.query,t.data),h(t));var n=t.query.access_token;return n&&(t.headers.Authorization="Bearer "+n),!0},form:!1}})}(a),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function r(e){return o(e),e&&"data"in e&&e.data.forEach(i),e}function i(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function o(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":r,"me/following":r,"me/followers":r,"me/photos":function(e){return n(e),o(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){var r=e.images[n];return t(r)}).sort(function(e,t){return e.width-t.width})})),e},default:function(e){return e=n(e),o(e),e}},xhr:function(e,t){var n=e.method,r="get"!==n;return r&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=r),r},form:!1}})}(a),function(e){function t(e,t){var n,i;return e&&"Message"in e&&(i=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=r(t),e.error={code:n,message:i,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function r(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting"},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},default:function(e,n){return t(e,n),e}},xhr:n}})}(a),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){if(!e.error)return e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e}function r(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function i(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function o(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function s(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"",publish:"w_share"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":s},del:{"me/like":s},wrap:{me:function(e){return t(e),n(e),e},"me/friends":r,"me/following":r,"me/followers":r,"me/share":function(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},default:function(e,n){t(e),o(e,n),i(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method&&(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0)}}})}(a),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function r(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json",default:function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},default:function(e){return Array.isArray(e)&&(e={data:e.map(n)}),r(e),e}},xhr:t,jsonp:t}})}(a),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return r(e),i(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function r(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function i(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function o(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var r=t.data;t.data=null;var i=[];r.message&&(i.push(r.message),delete r.message),r.link&&(i.push(r.link),delete r.link),r.picture&&(i.push(r.picture),delete r.picture),i.length&&(r.status=i.join(" ")),r.file?(r["media[]"]=r.file,delete r.file,t.data=r,n("statuses/update_with_media.json")):"id"in r?n("statuses/retweet/"+r.id+".json"):(e.utils.extend(t.query,r),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return r(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return r(e),i(e),!e.error&&"length"in e?{data:e}:e},default:function(e){return e=o(e),i(e),e}},xhr:function(e){return"get"!==e.method}}})}(a),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{basic:"",email:"email",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,r,i){return n(e),t(e,i)}},xhr:!1,jsonp:!0,form:!1}})}(a),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function r(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function i(e,t,n){if(e.id){var r=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var i=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+i+"/picture?access_token="+r}}return e}function o(e,t,n){return"data"in e&&e.data.forEach(function(e){i(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:i,"me/friends":o,"me/contacts":o,"me/followers":o,"me/following":o,"me/albums":r,"me/photos":t,default:t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(a),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function r(e,n,r){t(e),o(e,n,r);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(i)),e}function i(e){e.id=null,(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function o(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(e){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":r,"me/following":r,default:o}}})}(a),o=function(){return a}.call(t,n,t,e),!(void 0!==o&&(e.exports=o)),"object"==typeof e&&e.exports&&(e.exports=a)}).call(t,n(5),n(4).setImmediate)},function(e,t,n){function r(e,t){return a.call(this,t),s.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function i(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof i||(e=new i(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=s.byteLength(e);else{if(!s.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var o=n(3),a=n(16).Reporter,s=n(0).Buffer;o(r,a),t.DecoderBuffer=r,r.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},r.prototype.restore=function(e){var t=new r(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,a.prototype.restore.call(this,e.reporter),t},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},r.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var n=new r(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},r.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=i,i.prototype.join=function(e,t){return e||(e=new s(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):s.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},function(e,t,n){var r=t;r._reverse=function(e){var t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);var r=e[n];t[r]=n}),t},r.der=n(87)},function(e,t,n){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){c.Node.call(this,"der",e)}function o(e,t){var n=e.readUInt8(t);if(e.isError(n))return n;var r=d.tagClass[n>>6],i=0===(32&n);if(31===(31&n)){var o=n;for(n=0;128===(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;n<<=7,n|=127&o}}else n&=31;var a=d.tag[n];return{cls:r,primitive:i,tag:n,tagStr:a}}function a(e,t,n){var r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0===(128&r))return r;var i=127&r;if(i>4)return e.error("length octect is too long");r=0;for(var o=0;o<i;o++){r<<=8;var a=e.readUInt8(n);if(e.isError(a))return a;r|=a}return r}var s=n(3),l=n(27),c=l.base,u=l.bignum,d=l.constants.der;e.exports=r,r.prototype.decode=function(e,t){return e instanceof c.DecoderBuffer||(e=new c.DecoderBuffer(e,t)),this.tree._decode(e,t)},s(i,c.Node),i.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;var r=e.save(),i=o(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},i.prototype._decodeTag=function(e,t,n){var r=o(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;var i=a(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var s=e.save(),l=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(l)?l:(i=e.offset-s.offset,e.restore(s),e.skip(i,'Failed to match body of: "'+t+'"'))},i.prototype._skipUntilEnd=function(e,t){for(;;){var n=o(e,t);if(e.isError(n))return n;var r=a(e,n.primitive,t);if(e.isError(r))return r;var i;if(i=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===n.tagStr)break}},i.prototype._decodeList=function(e,t,n,r){for(var i=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var a=n.decode(e,"der",r);if(e.isError(a)&&o)break;i.push(a)}return i},i.prototype._decodeStr=function(e,t){if("bitstr"===t){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}if("bmpstr"===t){var r=e.raw();if(r.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<r.length/2;o++)i+=String.fromCharCode(r.readUInt16BE(2*o));return i}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},i.prototype._decodeObjid=function(e,t,n){for(var r,i=[],o=0;!e.isEmpty();){var a=e.readUInt8();o<<=7,o|=127&a,0===(128&a)&&(i.push(o),o=0)}128&a&&i.push(o);var s=i[0]/40|0,l=i[0]%40;if(r=n?i:[s,l].concat(i.slice(1)),t){var c=t[r.join(" ")];void 0===c&&(c=t[r.join(".")]),void 0!==c&&(r=c)}return r},i.prototype._decodeTime=function(e,t){var n=e.raw().toString();if("gentime"===t)var r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),a=0|n.slice(8,10),s=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");var r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),a=0|n.slice(6,8),s=0|n.slice(8,10),l=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,a,s,l,0)},i.prototype._decodeNull=function(e){return null},i.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},i.prototype._decodeInt=function(e,t){var n=e.raw(),r=new u(n);return t&&(r=t[r.toString(10)]||r),r},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e,t,n){function r(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){u.Node.call(this,"der",e)}function o(e){return e<10?"0"+e:e}function a(e,t,n,r){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),d.tagByName.hasOwnProperty(e))i=d.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);i=e}return i>=31?r.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=d.tagClassByName[n||"universal"]<<6)}var s=n(3),l=n(0).Buffer,c=n(27),u=c.base,d=c.constants.der;e.exports=r,r.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s(i,u.Node),i.prototype._encodeComposite=function(e,t,n,r){var i=a(e,t,n,this.reporter);if(r.length<128){var o=new l(2);return o[0]=i,o[1]=r.length,this._createEncoderBuffer([o,r])}for(var s=1,c=r.length;c>=256;c>>=8)s++;var o=new l(2+s);o[0]=i,o[1]=128|s;for(var c=1+s,u=r.length;u>0;c--,u>>=8)o[c]=255&u;return this._createEncoderBuffer([o,r])},i.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new l(2*e.length),r=0;r<e.length;r++)n.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},i.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var r=0;r<e.length;r++)e[r]|=0}else if(Array.isArray(e)){e=e.slice();for(var r=0;r<e.length;r++)e[r]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var i=0,r=0;r<e.length;r++){var o=e[r];for(i++;o>=128;o>>=7)i++}for(var a=new l(i),s=a.length-1,r=e.length-1;r>=0;r--){var o=e[r];for(a[s--]=127&o;(o>>=7)>0;)a[s--]=128|127&o}return this._createEncoderBuffer(a)},i.prototype._encodeTime=function(e,t){var n,r=new Date(e);return"gentime"===t?n=[o(r.getFullYear()),o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[o(r.getFullYear()%100),o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!l.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new l(n)}if(l.isBuffer(e)){var r=e.length;0===e.length&&r++;var i=new l(r);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var r=1,o=e;o>=256;o>>=8)r++;for(var i=new Array(r),o=i.length-1;o>=0;o--)i[o]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new l(i))},i.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},i.prototype._skipDefault=function(e,t,n){var r,i=this._baseState;if(null===i.default)return!1;var o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,s,l=e.length;a=r(e),s=new d(3*l/4-a),i=a>0?l-4:l;var c=0;for(t=0,n=0;t<i;t+=4,n+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i="",o=[],a=16383,l=0,u=n-r;l<u;l+=a)o.push(s(e,l,l+a>u?u:l+a));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var c=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=f.length;h<p;++h)c[h]=f[h],u[f.charCodeAt(h)]=h;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t,n){(function(t){function r(e,n,i,s){if(!(this instanceof r))return new r(e,n,i);a.call(this),this._finID=t.concat([i,new t([0,0,0,1])]),i=t.concat([i,new t([0,0,0,2])]),this._cipher=new o.AES(n),this._prev=new t(i.length),this._cache=new t(""),this._secCache=new t(""),this._decrypt=s,this._alen=0,this._len=0,i.copy(this._prev),this._mode=e;var c=new t(4);c.fill(0),this._ghash=new l(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function i(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),i=-1;++i<r;)n+=e[i]^t[i];return n}var o=n(28),a=n(12),s=n(3),l=n(96),c=n(18);s(r,a),e.exports=r,r.prototype._update=function(e){if(!this._called&&this._alen){var n=16-this._alen%16;n<16&&(n=new t(n),n.fill(0),this._ghash.update(n))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},r.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(i(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=e;this._cipher.scrub()},r.prototype.getAuthTag=function(){if(!this._decrypt&&t.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},r.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},r.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length}}).call(t,n(0).Buffer)},function(e,t,n){var r=n(18);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return r(i,n)}},function(e,t,n){(function(e){function r(t,n,r){var o=n.length,a=i(n,t._cache);
return t._cache=t._cache.slice(o),t._prev=e.concat([t._prev,r?n:a]),a}var i=n(18);t.encrypt=function(t,n,i){for(var o,a=new e("");n.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=n.length)){a=e.concat([a,r(t,n,i)]);break}o=t._cache.length,a=e.concat([a,r(t,n.slice(0,o),i)]),n=n.slice(o)}return a}}).call(t,n(0).Buffer)},function(e,t,n){(function(e){function n(e,t,n){for(var i,o,a,s=-1,l=8,c=0;++s<l;)i=e._cipher.encryptBlock(e._prev),o=t&1<<7-s?128:0,a=i[0]^o,c+=(128&a)>>s%8,e._prev=r(e._prev,n?o:a);return c}function r(t,n){var r=t.length,i=-1,o=new e(t.length);for(t=e.concat([t,new e([n])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}t.encrypt=function(t,r,i){for(var o=r.length,a=new e(o),s=-1;++s<o;)a[s]=n(t,r[s],i);return a}}).call(t,n(0).Buffer)},function(e,t,n){(function(e){function n(t,n,r){var i=t._cipher.encryptBlock(t._prev),o=i[0]^n;return t._prev=e.concat([t._prev.slice(1),new e([r?n:o])]),o}t.encrypt=function(t,r,i){for(var o=r.length,a=new e(o),s=-1;++s<o;)a[s]=n(t,r[s],i);return a}}).call(t,n(0).Buffer)},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){(function(e){function r(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var i=n(18);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,r(t)]);var o=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),i(n,o)}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n,a,s){return this instanceof r?(o.call(this),this._cipher=new i.AES(n),this._prev=new t(a.length),this._cache=new t(""),this._secCache=new t(""),this._decrypt=s,a.copy(this._prev),void(this._mode=e)):new r(e,n,a)}var i=n(28),o=n(12),a=n(3);a(r,o),e.exports=r,r.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()}}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(e){t["RSA-SHA224"]=t.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new e("302d300d06096086480165030402040500041c","hex")},t["RSA-SHA256"]=t.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new e("3031300d060960864801650304020105000420","hex")},t["RSA-SHA384"]=t.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new e("3041300d060960864801650304020205000430","hex")},t["RSA-SHA512"]=t.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new e("3051300d060960864801650304020305000440","hex")},t["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new e("3021300906052b0e03021a05000414","hex")},t["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new e("","hex")},t.DSA=t["DSA-SHA1"]=t["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new e("","hex")},t["DSA-SHA224"]=t["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new e("","hex")},t["DSA-SHA256"]=t["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new e("","hex")},t["DSA-SHA384"]=t["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new e("","hex")},t["DSA-SHA512"]=t["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new e("","hex")},t["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new e("","hex")},t["RSA-RIPEMD160"]=t.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new e("3021300906052b2403020105000414","hex")},t["RSA-MD5"]=t.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new e("3020300c06082a864886f70d020505000410","hex")}}).call(t,n(0).Buffer)},function(e,t,n){"use strict";t["1.3.132.0.10"]="secp256k1",t["1.3.132.0.33"]="p224",t["1.2.840.10045.3.1.1"]="p192",t["1.2.840.10045.3.1.7"]="p256",t["1.3.132.0.34"]="p384",t["1.3.132.0.35"]="p521"},function(e,t,n){"use strict";function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,i=-1732584194,u=271733878,d=0;d<e.length;d+=16){var f=n,h=r,p=i,g=u;n=o(n,r,i,u,e[d+0],7,-680876936),u=o(u,n,r,i,e[d+1],12,-389564586),i=o(i,u,n,r,e[d+2],17,606105819),r=o(r,i,u,n,e[d+3],22,-1044525330),n=o(n,r,i,u,e[d+4],7,-176418897),u=o(u,n,r,i,e[d+5],12,1200080426),i=o(i,u,n,r,e[d+6],17,-1473231341),r=o(r,i,u,n,e[d+7],22,-45705983),n=o(n,r,i,u,e[d+8],7,1770035416),u=o(u,n,r,i,e[d+9],12,-1958414417),i=o(i,u,n,r,e[d+10],17,-42063),r=o(r,i,u,n,e[d+11],22,-1990404162),n=o(n,r,i,u,e[d+12],7,1804603682),u=o(u,n,r,i,e[d+13],12,-40341101),i=o(i,u,n,r,e[d+14],17,-1502002290),r=o(r,i,u,n,e[d+15],22,1236535329),n=a(n,r,i,u,e[d+1],5,-165796510),u=a(u,n,r,i,e[d+6],9,-1069501632),i=a(i,u,n,r,e[d+11],14,643717713),r=a(r,i,u,n,e[d+0],20,-373897302),n=a(n,r,i,u,e[d+5],5,-701558691),u=a(u,n,r,i,e[d+10],9,38016083),i=a(i,u,n,r,e[d+15],14,-660478335),r=a(r,i,u,n,e[d+4],20,-405537848),n=a(n,r,i,u,e[d+9],5,568446438),u=a(u,n,r,i,e[d+14],9,-1019803690),i=a(i,u,n,r,e[d+3],14,-187363961),r=a(r,i,u,n,e[d+8],20,1163531501),n=a(n,r,i,u,e[d+13],5,-1444681467),u=a(u,n,r,i,e[d+2],9,-51403784),i=a(i,u,n,r,e[d+7],14,1735328473),r=a(r,i,u,n,e[d+12],20,-1926607734),n=s(n,r,i,u,e[d+5],4,-378558),u=s(u,n,r,i,e[d+8],11,-2022574463),i=s(i,u,n,r,e[d+11],16,1839030562),r=s(r,i,u,n,e[d+14],23,-35309556),n=s(n,r,i,u,e[d+1],4,-1530992060),u=s(u,n,r,i,e[d+4],11,1272893353),i=s(i,u,n,r,e[d+7],16,-155497632),r=s(r,i,u,n,e[d+10],23,-1094730640),n=s(n,r,i,u,e[d+13],4,681279174),u=s(u,n,r,i,e[d+0],11,-358537222),i=s(i,u,n,r,e[d+3],16,-722521979),r=s(r,i,u,n,e[d+6],23,76029189),n=s(n,r,i,u,e[d+9],4,-640364487),u=s(u,n,r,i,e[d+12],11,-421815835),i=s(i,u,n,r,e[d+15],16,530742520),r=s(r,i,u,n,e[d+2],23,-995338651),n=l(n,r,i,u,e[d+0],6,-198630844),u=l(u,n,r,i,e[d+7],10,1126891415),i=l(i,u,n,r,e[d+14],15,-1416354905),r=l(r,i,u,n,e[d+5],21,-57434055),n=l(n,r,i,u,e[d+12],6,1700485571),u=l(u,n,r,i,e[d+3],10,-1894986606),i=l(i,u,n,r,e[d+10],15,-1051523),r=l(r,i,u,n,e[d+1],21,-2054922799),n=l(n,r,i,u,e[d+8],6,1873313359),u=l(u,n,r,i,e[d+15],10,-30611744),i=l(i,u,n,r,e[d+6],15,-1560198380),r=l(r,i,u,n,e[d+13],21,1309151649),n=l(n,r,i,u,e[d+4],6,-145523070),u=l(u,n,r,i,e[d+11],10,-1120210379),i=l(i,u,n,r,e[d+2],15,718787259),r=l(r,i,u,n,e[d+9],21,-343485551),n=c(n,f),r=c(r,h),i=c(i,p),u=c(u,g)}return Array(n,r,i,u)}function i(e,t,n,r,i,o){return c(u(c(c(t,e),c(r,o)),i),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function l(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}function c(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}var d=n(104);e.exports=function(e){return d.hash(e,r,16)}},function(e,t,n){function r(){if(null!==y)return y;var e=1048576,t=[];t[0]=2;for(var n=1,r=3;r<e;r+=2){for(var i=Math.ceil(Math.sqrt(r)),o=0;o<n&&t[o]<=i&&r%t[o]!==0;o++);n!==o&&t[o]<=i||(t[n++]=r)}return y=t,t}function i(e){for(var t=r(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function o(e){var t=l.mont(e);return 0===h.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function a(e,t){if(e<16)return new l(2===t||5===t?[140,123]:[140,39]);t=new l(t);for(var n,r;;){for(n=new l(s(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(f),n.testn(1)||n.iadd(h),t.cmp(h)){if(!t.cmp(p))for(;n.mod(g).cmp(m);)n.iadd(_)}else for(;n.mod(c).cmp(v);)n.iadd(_);if(r=n.shrn(1),i(r)&&i(n)&&o(r)&&o(n)&&d.test(r)&&d.test(n))return n}}var s=n(21);e.exports=a,a.simpleSieve=i,a.fermatTest=o;var l=n(4),c=new l(24),u=n(62),d=new u,f=new l(1),h=new l(2),p=new l(5),g=(new l(16),new l(8),new l(10)),m=new l(3),v=(new l(7),new l(11)),_=new l(4),y=(new l(12),null)},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}},function(e,t,n){!function(){var t=n(492),r=n(132).utf8,i=n(495),o=n(132).bin,a=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=t.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,f=271733878,h=0;h<s.length;h++)s[h]=16711935&(s[h]<<8|s[h]>>>24)|4278255360&(s[h]<<24|s[h]>>>8);s[l>>>5]|=128<<l%32,s[(l+64>>>9<<4)+14]=l;for(var p=a._ff,g=a._gg,m=a._hh,v=a._ii,h=0;h<s.length;h+=16){var _=c,y=u,b=d,w=f;c=p(c,u,d,f,s[h+0],7,-680876936),f=p(f,c,u,d,s[h+1],12,-389564586),d=p(d,f,c,u,s[h+2],17,606105819),u=p(u,d,f,c,s[h+3],22,-1044525330),c=p(c,u,d,f,s[h+4],7,-176418897),f=p(f,c,u,d,s[h+5],12,1200080426),d=p(d,f,c,u,s[h+6],17,-1473231341),u=p(u,d,f,c,s[h+7],22,-45705983),c=p(c,u,d,f,s[h+8],7,1770035416),f=p(f,c,u,d,s[h+9],12,-1958414417),d=p(d,f,c,u,s[h+10],17,-42063),u=p(u,d,f,c,s[h+11],22,-1990404162),c=p(c,u,d,f,s[h+12],7,1804603682),f=p(f,c,u,d,s[h+13],12,-40341101),d=p(d,f,c,u,s[h+14],17,-1502002290),u=p(u,d,f,c,s[h+15],22,1236535329),c=g(c,u,d,f,s[h+1],5,-165796510),f=g(f,c,u,d,s[h+6],9,-1069501632),d=g(d,f,c,u,s[h+11],14,643717713),u=g(u,d,f,c,s[h+0],20,-373897302),c=g(c,u,d,f,s[h+5],5,-701558691),f=g(f,c,u,d,s[h+10],9,38016083),d=g(d,f,c,u,s[h+15],14,-660478335),u=g(u,d,f,c,s[h+4],20,-405537848),c=g(c,u,d,f,s[h+9],5,568446438),f=g(f,c,u,d,s[h+14],9,-1019803690),d=g(d,f,c,u,s[h+3],14,-187363961),u=g(u,d,f,c,s[h+8],20,1163531501),c=g(c,u,d,f,s[h+13],5,-1444681467),f=g(f,c,u,d,s[h+2],9,-51403784),d=g(d,f,c,u,s[h+7],14,1735328473),u=g(u,d,f,c,s[h+12],20,-1926607734),c=m(c,u,d,f,s[h+5],4,-378558),f=m(f,c,u,d,s[h+8],11,-2022574463),d=m(d,f,c,u,s[h+11],16,1839030562),u=m(u,d,f,c,s[h+14],23,-35309556),c=m(c,u,d,f,s[h+1],4,-1530992060),f=m(f,c,u,d,s[h+4],11,1272893353),d=m(d,f,c,u,s[h+7],16,-155497632),u=m(u,d,f,c,s[h+10],23,-1094730640),c=m(c,u,d,f,s[h+13],4,681279174),f=m(f,c,u,d,s[h+0],11,-358537222),d=m(d,f,c,u,s[h+3],16,-722521979),u=m(u,d,f,c,s[h+6],23,76029189),c=m(c,u,d,f,s[h+9],4,-640364487),f=m(f,c,u,d,s[h+12],11,-421815835),d=m(d,f,c,u,s[h+15],16,530742520),u=m(u,d,f,c,s[h+2],23,-995338651),c=v(c,u,d,f,s[h+0],6,-198630844),f=v(f,c,u,d,s[h+7],10,1126891415),d=v(d,f,c,u,s[h+14],15,-1416354905),u=v(u,d,f,c,s[h+5],21,-57434055),c=v(c,u,d,f,s[h+12],6,1700485571),f=v(f,c,u,d,s[h+3],10,-1894986606),d=v(d,f,c,u,s[h+10],15,-1051523),u=v(u,d,f,c,s[h+1],21,-2054922799),c=v(c,u,d,f,s[h+8],6,1873313359),f=v(f,c,u,d,s[h+15],10,-30611744),d=v(d,f,c,u,s[h+6],15,-1560198380),u=v(u,d,f,c,s[h+13],21,1309151649),c=v(c,u,d,f,s[h+4],6,-145523070),f=v(f,c,u,d,s[h+11],10,-1120210379),d=v(d,f,c,u,s[h+2],15,718787259),u=v(u,d,f,c,s[h+9],21,-343485551),c=c+_>>>0,u=u+y>>>0,d=d+b>>>0,f=f+w>>>0}return t.endian([c,u,d,f])};a._ff=function(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,r,i,o,a){var s=e+(t^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(a(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t,n){function r(e){this.rand=e||new o.Rand}var i=n(4),o=n(93);e.exports=r,r.create=function(e){return new r(e)},r.prototype._rand=function(e){var t=e.bitLength(),n=this.rand.generate(Math.ceil(t/8));n[0]|=3;var r=7&t;return 0!==r&&(n[n.length-1]>>=7-r),new i(n)},r.prototype.test=function(e,t,n){var r=e.bitLength(),o=i.mont(e),a=new i(1).toRed(o);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),l=s.subn(1),c=0;!s.testn(c);c++);for(var u=e.shrn(c),d=s.toRed(o),f=!0;t>0;t--){var h=this._rand(l);n&&n(h);var p=h.toRed(o).redPow(u);if(0!==p.cmp(a)&&0!==p.cmp(d)){for(var g=1;g<c;g++){if(p=p.redSqr(),0===p.cmp(a))return!1;if(0===p.cmp(d))break}if(g===c)return!1}}return f},r.prototype.getDivisor=function(e,t){var n=e.bitLength(),r=i.mont(e),o=new i(1).toRed(r);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),s=a.subn(1),l=0;!a.testn(l);l++);for(var c=e.shrn(l),u=a.toRed(r);t>0;t--){var d=this._rand(s),f=e.gcd(d);if(0!==f.cmpn(1))return f;var h=d.toRed(r).redPow(c);if(0!==h.cmp(o)&&0!==h.cmp(u)){for(var p=1;p<l;p++){if(h=h.redSqr(),0===h.cmp(o))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(u))break}if(p===l)return h=h.redSqr(),h.fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){(function(e,r){var i=n(38),o=n(116);t.pbkdf2=function(e,n,r,i,a,s){if("function"==typeof a&&(s=a,a=void 0),o(r,i),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){s(null,t.pbkdf2Sync(e,n,r,i,a))})};var a;if(e.browser)a="utf-8";else{var s=parseInt(e.version.split(".")[0].slice(1),10);a=s>=6?"utf-8":"binary"}t.pbkdf2Sync=function(e,t,n,s,l){r.isBuffer(e)||(e=new r(e,a)),r.isBuffer(t)||(t=new r(t,a)),o(n,s),l=l||"sha1";var c,u=1,d=new r(s),f=new r(t.length+4);t.copy(f,0,0,t.length);for(var h,p,g=1;g<=u;g++){f.writeUInt32BE(g,t.length);var m=i(l,e).update(f).digest();c||(c=m.length,p=new r(c),u=Math.ceil(s/c),h=s-(u-1)*c),m.copy(p,0,0,c);for(var v=1;v<n;v++){m=i(l,e).update(m).digest();for(var _=0;_<c;_++)p[_]^=m[_]}var y=(g-1)*c,b=g===u?h:c;p.copy(d,y,0,b)}return d}}).call(t,n(5),n(0).Buffer)},function(e,t,n){(function(t){function r(e){var n=new t(4);return n.writeUInt32BE(e,0),n}var i=n(13);e.exports=function(e,n){for(var o,a=new t(""),s=0;a.length<n;)o=r(s++),a=t.concat([a,i("sha1").update(e).update(o).digest()]);return a.slice(0,n)}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n){return new t(e.toRed(i.mont(n.modulus)).redPow(new i(n.publicExponent)).fromRed().toArray())}var i=n(4);e.exports=r}).call(t,n(0).Buffer)},function(e,t){e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(){this.head=null,this.tail=null,this.length=0}var i=(n(0).Buffer,n(17));e.exports=r,r.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},r.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},r.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},r.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t}},function(e,t,n){e.exports=n(34)},function(e,t,n){(function(r){var i=function(){try{return n(7)}catch(e){}}();t=e.exports=n(35),t.Stream=i||t,t.Readable=t,t.Writable=n(23),t.Duplex=n(6),t.Transform=n(22),t.PassThrough=n(34),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,n(5))},function(e,t,n){e.exports=n(22)},function(e,t,n){e.exports=n(23)},function(e,t,n){(function(t){function r(){this.init(),this._w=h,d.call(this,64,56)}function i(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var u=n(3),d=n(15),f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=new Array(64);u(r,d),r.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,u=0|this._c,d=0|this._d,h=0|this._e,p=0|this._f,g=0|this._g,m=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=c(t[v-2])+t[v-7]+l(t[v-15])+t[v-16]|0;for(var _=0;_<64;++_){var y=m+s(h)+i(h,p,g)+f[_]+t[_]|0,b=a(n)+o(n,r,u)|0;m=g,g=p,p=h,h=d+y|0,d=u,u=r,r=n,n=y+b|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=u+this._c|0,this._d=d+this._d|0,this._e=h+this._e|0,this._f=p+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},r.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(){this.init(),this._w=m,p.call(this,128,112)}function i(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function a(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function s(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function u(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function d(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function f(e,t){return e>>>0<t>>>0?1:0}var h=n(3),p=n(15),g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],m=new Array(160);h(r,p),r.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,h=0|this._ch,p=0|this._dh,m=0|this._eh,v=0|this._fh,_=0|this._gh,y=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,k=0|this._dl,C=0|this._el,S=0|this._fl,E=0|this._gl,$=0|this._hl,T=0;T<32;T+=2)t[T]=e.readInt32BE(4*T),t[T+1]=e.readInt32BE(4*T+4);for(;T<160;T+=2){var A=t[T-30],D=t[T-30+1],O=l(A,D),P=c(D,A);A=t[T-4],D=t[T-4+1];var R=u(A,D),I=d(D,A),M=t[T-14],L=t[T-14+1],N=t[T-32],j=t[T-32+1],F=P+L|0,B=O+M+f(F,P)|0;F=F+I|0,B=B+R+f(F,I)|0,F=F+j|0,B=B+N+f(F,j)|0,t[T]=B,t[T+1]=F}for(var U=0;U<160;U+=2){B=t[U],F=t[U+1];var z=o(n,r,h),q=o(b,w,x),H=a(n,b),V=a(b,n),W=s(m,C),G=s(C,m),Y=g[U],K=g[U+1],X=i(m,v,_),J=i(C,S,E),Z=$+G|0,Q=y+W+f(Z,$)|0;Z=Z+J|0,Q=Q+X+f(Z,J)|0,Z=Z+K|0,Q=Q+Y+f(Z,K)|0,Z=Z+F|0,Q=Q+B+f(Z,F)|0;var ee=V+q|0,te=H+z+f(ee,V)|0;y=_,$=E,_=v,E=S,v=m,S=C,C=k+Z|0,m=p+Q+f(C,k)|0,p=h,k=x,h=r,x=w,r=n,w=b,b=Z+ee|0,n=Q+te+f(b,Z)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+k|0,this._el=this._el+C|0,this._fl=this._fl+S|0,this._gl=this._gl+E|0,this._hl=this._hl+$|0,this._ah=this._ah+n+f(this._al,b)|0,this._bh=this._bh+r+f(this._bl,w)|0,this._ch=this._ch+h+f(this._cl,x)|0,this._dh=this._dh+p+f(this._dl,k)|0,this._eh=this._eh+m+f(this._el,C)|0,this._fh=this._fh+v+f(this._fl,S)|0,this._gh=this._gh+_+f(this._gl,E)|0,this._hh=this._hh+y+f(this._hl,$)|0},r.prototype._hash=function(){function e(e,t,r){n.writeInt32BE(e,r),n.writeInt32BE(t,r+4)}var n=new t(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),n},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation"),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(8))},function(e,t){},function(e,t){/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(){"use strict";function e(e){return"function"==typeof e}function t(e){var t=[];return JSON.stringify(e,function(e,n){if(n=toJsonReplacer(e,n),isObject(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function n(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):isUndefined(e)?"undefined":"string"!=typeof e?t(e):e}function r(e,t){return t=t||Error,function(){var r,i,o=2,a=arguments,s=a[0],l="["+(e?e+":":"")+s+"] ",c=a[1];for(l+=c.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),r=t+o;return r<a.length?n(a[r]):e}),l+="\nhttp://errors.angularjs.org/1.6.1/"+(e?e+"/":"")+s,i=o,r="?";i<a.length;i++,r="&")l+=r+"p"+(i-o)+"="+encodeURIComponent(n(a[i]));return new t(l)}}function i(t){function n(e,t,n){return e[t]||(e[t]=n())}var i=r("$injector"),o=r("ng"),a=n(t,"angular",Object);return a.$$minErr=a.$$minErr||r,n(a,"module",function(){var t={};return function(r,a,s){var l=function(e,t){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid {0} name",t)};return l(r,"module"),a&&t.hasOwnProperty(r)&&(t[r]=null),n(t,r,function(){function t(e,t,n,r){return r||(r=o),function(){return r[n||"push"]([e,t,arguments]),d}}function n(t,n,i){return i||(i=o),function(o,a){return a&&e(a)&&(a.$$moduleName=r),i.push([t,n,arguments]),d}}if(!a)throw i("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var o=[],l=[],c=[],u=t("$injector","invoke","push",l),d={_invokeQueue:o,_configBlocks:l,_runBlocks:c,requires:a,name:r,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:n("$provide","decorator",l),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:u,run:function(e){return c.push(e),this}};return s&&u(s),d})}})}i(window)}(window),angular.Module},function(e,t){/*!
 * Detectizr v2.2.0
 * http://barisaydinoglu.github.com/Detectizr/
 *
 * Written by Baris Aydinoglu (http://baris.aydinoglu.info) - Copyright 2012
 * Released under the MIT license
 *
 * Date: 2016-01-25T04:33Z
 */
window.Detectizr=function(e,t,n,r){function i(e,t){var n,r,o;if(arguments.length>2)for(n=1,r=arguments.length;n<r;n+=1)i(e,arguments[n]);else for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function o(e){return b.browser.userAgent.indexOf(e)>-1}function a(e){return e.test(b.browser.userAgent)}function s(e){return e.exec(b.browser.userAgent)}function l(e){return e.replace(/^\s+|\s+$/g,"")}function c(e){return null===e||e===r?"":String(e).replace(/((\s|\-|\.)+[a-z0-9])/g,function(e){return e.toUpperCase().replace(/(\s|\-|\.)/g,"")})}function u(e,t){var n=t||"",r=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(S," "):"");if(r){for(;r.indexOf(" "+n+" ")>=0;)r=r.replace(" "+n+" "," ");e.className=t?l(r):""}}function d(e,t,n){e&&(e=c(e),t&&(t=c(t),f(e+t,!0),n&&f(e+t+"_"+n,!0)))}function f(e,t){e&&w&&(k.addAllFeaturesAsClass?w.addTest(e,t):(t="function"==typeof t?t():t,t?w.addTest(e,!0):(delete w[e],u(E,e))))}function h(e,t){e.version=t;var n=t.split(".");n.length>0?(n=n.reverse(),e.major=n.pop(),n.length>0?(e.minor=n.pop(),n.length>0?(n=n.reverse(),e.patch=n.join(".")):e.patch="0"):e.minor="0"):e.major="0"}function p(){e.clearTimeout(_),_=e.setTimeout(function(){y=b.device.orientation,e.innerHeight>e.innerWidth?b.device.orientation="portrait":b.device.orientation="landscape",f(b.device.orientation,!0),y!==b.device.orientation&&f(y,!1)},10)}function g(e){var n,r,i,o,a,s=t.plugins;for(o=s.length-1;o>=0;o--){for(n=s[o],r=n.name+n.description,i=0,a=e.length;a>=0;a--)r.indexOf(e[a])!==-1&&(i+=1);if(i===e.length)return!0}return!1}function m(e){var t;for(t=e.length-1;t>=0;t--)try{new ActiveXObject(e[t])}catch(e){}return!1}function v(r){var l,u,v,_,y,S,E;if(k=i({},k,r||{}),k.detectDevice){for(b.device={type:"",model:"",orientation:""},v=b.device,a(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(v.type=x[0],v.model="smartTv"):a(/xbox|playstation.3|wii/)?(v.type=x[0],v.model="gameConsole"):a(/ip(a|ro)d/)?(v.type=x[1],v.model="ipad"):a(/tablet/)&&!a(/rx-34/)||a(/folio/)?(v.type=x[1],v.model=String(s(/playbook/)||"")):a(/linux/)&&a(/android/)&&!a(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(v.type=x[1],v.model="android"):a(/kindle/)||a(/mac.os/)&&a(/silk/)?(v.type=x[1],v.model="kindle"):a(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||a(/mb511/)&&a(/rutem/)?(v.type=x[1],v.model="android"):a(/bb10/)?(v.type=x[1],v.model="blackberry"):(v.model=s(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==v.model?(v.type=x[2],v.model=String(v.model)):(v.model="",a(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?v.type=x[2]:a(/opera/)&&a(/windows.nt.5/)&&a(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?v.type=x[2]:a(/windows.(nt|xp|me|9)/)&&!a(/phone/)||a(/win(9|.9|nt)/)||a(/\(windows 8\)/)?v.type=x[3]:a(/macintosh|powerpc/)&&!a(/silk/)?(v.type=x[3],v.model="mac"):a(/linux/)&&a(/x11/)?v.type=x[3]:a(/solaris|sunos|bsd/)?v.type=x[3]:a(/cros/)?v.type=x[3]:a(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!a(/mobile/)?(v.type=x[3],v.model="crawler"):v.type=x[2])),l=0,u=x.length;l<u;l+=1)f(x[l],v.type===x[l]);k.detectDeviceModel&&f(c(v.model),!0)}if(k.detectScreen&&(v.screen={},w&&w.mq&&(w.mq("only screen and (max-width: 240px)")?(v.screen.size="veryVerySmall",f("veryVerySmallScreen",!0)):w.mq("only screen and (max-width: 320px)")?(v.screen.size="verySmall",f("verySmallScreen",!0)):w.mq("only screen and (max-width: 480px)")&&(v.screen.size="small",f("smallScreen",!0)),v.type!==x[1]&&v.type!==x[2]||w.mq("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)")&&(v.screen.resolution="high",f("highresolution",!0))),v.type===x[1]||v.type===x[2]?(e.onresize=function(e){p(e)},p()):(v.orientation="landscape",f(v.orientation,!0))),k.detectOS&&(b.os={},_=b.os,""!==v.model&&("ipad"===v.model||"iphone"===v.model||"ipod"===v.model?(_.name="ios",h(_,(a(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):"android"===v.model?(_.name="android",h(_,a(/android\s([\d\.]+)/)?RegExp.$1:"")):"blackberry"===v.model?(_.name="blackberry",h(_,a(/version\/([^\s]+)/)?RegExp.$1:"")):"playbook"===v.model&&(_.name="blackberry",h(_,a(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),_.name||(o("win")||o("16bit")?(_.name="windows",o("windows nt 10")?h(_,"10"):o("windows nt 6.3")?h(_,"8.1"):o("windows nt 6.2")||a(/\(windows 8\)/)?h(_,"8"):o("windows nt 6.1")?h(_,"7"):o("windows nt 6.0")?h(_,"vista"):o("windows nt 5.2")||o("windows nt 5.1")||o("windows xp")?h(_,"xp"):o("windows nt 5.0")||o("windows 2000")?h(_,"2k"):o("winnt")||o("windows nt")?h(_,"nt"):o("win98")||o("windows 98")?h(_,"98"):(o("win95")||o("windows 95"))&&h(_,"95")):o("mac")||o("darwin")?(_.name="mac os",o("68k")||o("68000")?h(_,"68k"):o("ppc")||o("powerpc")?h(_,"ppc"):o("os x")&&h(_,(a(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):o("webtv")?_.name="webtv":o("x11")||o("inux")?_.name="linux":o("sunos")?_.name="sun":o("irix")?_.name="irix":o("freebsd")?_.name="freebsd":o("bsd")&&(_.name="bsd")),_.name&&(f(_.name,!0),_.major&&(d(_.name,_.major),_.minor&&d(_.name,_.major,_.minor))),a(/\sx64|\sx86|\swin64|\swow64|\samd64/)?_.addressRegisterSize="64bit":_.addressRegisterSize="32bit",f(_.addressRegisterSize,!0)),k.detectBrowser&&(y=b.browser,a(/opera|webtv/)||!a(/msie\s([\d\w\.]+)/)&&!o("trident")?o("firefox")?(y.engine="gecko",y.name="firefox",h(y,a(/firefox\/([\d\w\.]+)/)?RegExp.$1:"")):o("gecko/")?y.engine="gecko":o("opera")?(y.name="opera",y.engine="presto",h(y,a(/version\/([\d\.]+)/)?RegExp.$1:a(/opera(\s|\/)([\d\.]+)/)?RegExp.$2:"")):o("konqueror")?y.name="konqueror":o("edge")?(y.engine="webkit",y.name="edge",h(y,a(/edge\/([\d\.]+)/)?RegExp.$1:"")):o("chrome")?(y.engine="webkit",y.name="chrome",h(y,a(/chrome\/([\d\.]+)/)?RegExp.$1:"")):o("iron")?(y.engine="webkit",y.name="iron"):o("crios")?(y.name="chrome",y.engine="webkit",h(y,a(/crios\/([\d\.]+)/)?RegExp.$1:"")):o("applewebkit/")?(y.name="safari",y.engine="webkit",h(y,a(/version\/([\d\.]+)/)?RegExp.$1:"")):o("mozilla/")&&(y.engine="gecko"):(y.engine="trident",y.name="ie",!e.addEventListener&&n.documentMode&&7===n.documentMode?h(y,"8.compat"):a(/trident.*rv[ :](\d+)\./)?h(y,RegExp.$1):h(y,a(/trident\/4\.0/)?"8":RegExp.$1)),y.name&&(f(y.name,!0),y.major&&(d(y.name,y.major),y.minor&&d(y.name,y.major,y.minor))),f(y.engine,!0),y.language=t.userLanguage||t.language,f(y.language,!0)),k.detectPlugins){for(y.plugins=[],l=C.length-1;l>=0;l--)S=C[l],E=!1,e.ActiveXObject?E=m(S.progIds):t.plugins&&(E=g(S.substrs)),E&&(y.plugins.push(S.name),f(S.name,!0));t.javaEnabled()&&(y.plugins.push("java"),f("java",!0))}}var _,y,b={},w=e.Modernizr,x=["tv","tablet","mobile","desktop"],k={addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0},C=[{name:"adobereader",substrs:["Adobe","Acrobat"],progIds:["AcroPDF.PDF","PDF.PDFCtrl.5"]},{name:"flash",substrs:["Shockwave Flash"],progIds:["ShockwaveFlash.ShockwaveFlash.1"]},{name:"wmplayer",substrs:["Windows Media"],progIds:["wmplayer.ocx"]},{name:"silverlight",substrs:["Silverlight"],progIds:["AgControl.AgControl"]},{name:"quicktime",substrs:["QuickTime"],progIds:["QuickTime.QuickTime"]}],S=/[\t\r\n]/g,E=n.documentElement;return b.detect=function(e){return v(e)},b.init=function(){b!==r&&(b.browser={userAgent:(t.userAgent||t.vendor||e.opera).toLowerCase()},b.detect())},b.init(),b}(window,window.navigator,window.document)},function(e,t){window.Modernizr=function(e,t,n){function r(e){y.cssText=e}function i(e,t){return r(k.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var r in e){var i=e[r];if(!a(i,"-")&&y[i]!==n)return"pfx"!=t||i}return!1}function l(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function c(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+S.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?s(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),l(i,t,n))}function u(){p.input=function(n){for(var r=0,i=n.length;r<i;r++)D[n[r]]=!!(n[r]in b);return D.list&&(D.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),D}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var r,i,o,a=0,s=e.length;a<s;a++)b.setAttribute("type",i=e[a]),r="text"!==b.type,r&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&b.style.WebkitAppearance!==n?(m.appendChild(b),o=t.defaultView,r=o.getComputedStyle&&"textfield"!==o.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,m.removeChild(b)):/^(search|tel)$/.test(i)||(r=/^(url|email)$/.test(i)?b.checkValidity&&b.checkValidity()===!1:b.value!=w)),A[e[a]]=!!r;return A}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d,f,h="2.7.1",p={},g=!0,m=t.documentElement,v="modernizr",_=t.createElement(v),y=_.style,b=t.createElement("input"),w=":)",x={}.toString,k=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",S=C.split(" "),E=C.toLowerCase().split(" "),$={svg:"http://www.w3.org/2000/svg"},T={},A={},D={},O=[],P=O.slice,R=function(e,n,r,i){var o,a,s,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=i?i[r]:v+(r+1),c.appendChild(s);return o=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),c.id=v,(u?c:d).innerHTML+=o,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),a=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),m.style.overflow=l),!!a},I=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var a=e in i;return a||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),a=o(i[e],"function"),o(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,a}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),M={}.hasOwnProperty;f=o(M,"undefined")||o(M.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return M.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=P.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var o=new i,a=t.apply(o,n.concat(P.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(P.call(arguments)))};return r}),T.flexbox=function(){return c("flexWrap")},T.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},T.canvastext=function(){return!(!p.canvas||!o(t.createElement("canvas").getContext("2d").fillText,"function"))},T.webgl=function(){return!!e.WebGLRenderingContext},T.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:R(["@media (",k.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},T.geolocation=function(){return"geolocation"in navigator},T.postmessage=function(){return!!e.postMessage},T.websqldatabase=function(){return!!e.openDatabase},T.indexedDB=function(){return!!c("indexedDB",e)},T.hashchange=function(){return I("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},T.history=function(){return!(!e.history||!history.pushState)},T.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},T.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},T.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),a(y.backgroundColor,"rgba")},T.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),a(y.backgroundColor,"rgba")||a(y.backgroundColor,"hsla")},T.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},T.backgroundsize=function(){return c("backgroundSize")},T.borderimage=function(){return c("borderImage")},T.borderradius=function(){return c("borderRadius")},T.boxshadow=function(){return c("boxShadow")},T.textshadow=function(){return""===t.createElement("div").style.textShadow},T.opacity=function(){return i("opacity:.55"),/^0.55$/.test(y.opacity)},T.cssanimations=function(){return c("animationName")},T.csscolumns=function(){return c("columnCount")},T.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+k.join(n+e)).slice(0,-e.length)),a(y.backgroundImage,"gradient")},T.cssreflections=function(){return c("boxReflect")},T.csstransforms=function(){return!!c("transform")},T.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in m.style&&R("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},T.csstransitions=function(){return c("transition")},T.fontface=function(){var e;return R('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),o=i.sheet||i.styleSheet,a=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e},T.generatedcontent=function(){var e;return R(["#",v,"{font:0/0 a}#",v,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},T.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return n},T.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return n},T.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},T.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},T.webworkers=function(){return!!e.Worker},T.applicationcache=function(){return!!e.applicationCache},T.svg=function(){return!!t.createElementNS&&!!t.createElementNS($.svg,"svg").createSVGRect},T.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==$.svg},T.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(x.call(t.createElementNS($.svg,"animate")))},T.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(x.call(t.createElementNS($.svg,"clipPath")))};for(var L in T)f(T,L)&&(d=L.toLowerCase(),p[d]=T[L](),O.push((p[d]?"":"no-")+d));return p.input||u(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)f(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(m.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),_=b=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=_.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=v[e[g]];return t||(t={},m++,e[g]=m,v[m]=t),t}function o(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=i(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():p.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||h.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function a(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||i(e);for(var o=n.frag.cloneNode(),a=0,s=r(),l=s.length;a<l;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return _.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(_,t.frag)}function l(e){e||(e=t);var r=i(e);return!_.shivCSS||c||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(e,r),e}var c,u,d="3.7.0",f=e.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(e){c=!0,u=!0}}();var _={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:f.shivCSS!==!1,supportsUnknownElements:u,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=_,l(t)}(this,t),p._version=h,p._prefixes=k,p._domPrefixes=E,p._cssomPrefixes=S,p.hasEvent=I,p.testProp=function(e){return s([e])},p.testAllProps=c,p.testStyles=R,p.prefixed=function(e,t,n){return t?c(e,t,n):c(e,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+O.join(" "):""),p}(window,window.document),function(e,t,n){function r(e){return"[object Function]"==m.call(e)}function i(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();_=1,e?e.t?p(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):_=0}function l(e,n,r,i,o,l,c){function u(t){if(!h&&a(d.readyState)&&(y.r=h=1,!_&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&p(function(){w.removeChild(d)},50);for(var r in E[n])E[n].hasOwnProperty(r)&&E[n][r].onload()}}var c=c||f.errorTimeout,d=t.createElement(e),h=0,m=0,y={t:r,s:n,e:o,a:l,x:c};1===E[n]&&(m=1,E[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,m)},v.splice(i,0,y),"img"!=e&&(m||2===E[n]?(w.insertBefore(d,b?null:g),p(u,c)):E[n].push(d))}function c(e,t,n,r,o){return _=0,t=t||"j",i(e)?l("c"==t?k:x,e,t,this.i++,n,r,o):(v.splice(this.i++,0,e),1==v.length&&s()),this}function u(){var e=f;return e.loader={load:c,i:0},e}var d,f,h=t.documentElement,p=e.setTimeout,g=t.getElementsByTagName("script")[0],m={}.toString,v=[],_=0,y="MozAppearance"in h.style,b=y&&!!t.createRange().compareNode,w=b?h:g.parentNode,h=e.opera&&"[object Opera]"==m.call(e.opera),h=!!t.attachEvent&&!h,x=y?"object":h?"script":"img",k=h?"script":x,C=Array.isArray||function(e){return"[object Array]"==m.call(e)},S=[],E={},$={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};f=function(e){function t(e){var t,n,r,e=e.split("!"),i=S.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;n<a;n++)r=e[n].split("="),(t=$[r.shift()])&&(o=t(o,r));for(n=0;n<i;n++)o=S[n](o);return o}function a(e,i,o,a,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=r(i)?i:i[e]||i[a]||i[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,i,o,a,s):(E[l.url]?l.noexec=!0:E[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(i)||r(c))&&o.load(function(){u(),i&&i(l.origUrl,s,a),c&&c(l.origUrl,s,a),E[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(i(e))n||(d=function(){var e=[].slice.call(arguments);f.apply(this,e),h()}),a(e,d,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(d)?d=function(){var e=[].slice.call(arguments);f.apply(this,e),h()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),h()}}(f[l])),a(e[l],d,t,l,c))}else!n&&h()}var s,l,c=!!e.test,u=e.load||e.both,d=e.callback||o,f=d,h=e.complete||o;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(i(e))a(e,0,d,0);else if(C(e))for(l=0;l<e.length;l++)c=e[l],i(c)?a(c,0,d,0):C(c)?f(c):Object(c)===c&&s(c,d);else Object(e)===e&&s(e,d)},f.addPrefix=function(e,t){$[e]=t},f.addFilter=function(e){S.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,i,l,c){var u,d,h=t.createElement("script"),i=i||f.errorTimeout;h.src=e;for(d in r)h.setAttribute(d,r[d]);n=c?s:n||o,h.onreadystatechange=h.onload=function(){!u&&a(h.readyState)&&(u=1,n(),h.onload=h.onreadystatechange=null)},p(function(){u||(u=1,n(1))},i),l?h.onload():g.parentNode.insertBefore(h,g)},e.yepnope.injectCss=function(e,n,r,i,a,l){var c,i=t.createElement("link"),n=l?s:n||o;i.href=e,i.rel="stylesheet",i.type="text/css";for(c in r)i.setAttribute(c,r[c]);a||(g.parentNode.insertBefore(i,g),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))}},,,function(e,t){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(e,t,n){(function(e){/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";function n(e,t){return t=t||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",l=o[1];for(s+=l.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<o.length?xe(o[n]):e}),s+="\nhttp://errors.angularjs.org/1.6.1/"+(e?e+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(xe(o[r]));return new t(s)}}function r(e){if(null==e||$(e))return!1;if(ui(e)||x(e)||Zr&&e instanceof Zr)return!0;var t="length"in Object(e)&&e.length;return k(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function i(e,t,n){var o,a;if(e)if(S(e))for(o in e)"prototype"!==o&&"length"!==o&&"name"!==o&&e.hasOwnProperty(o)&&t.call(n,e[o],o,e);else if(ui(e)||r(e)){var s="object"!=typeof e;for(o=0,a=e.length;o<a;o++)(s||o in e)&&t.call(n,e[o],o,e)}else if(e.forEach&&e.forEach!==i)e.forEach(t,n,e);else if(w(e))for(o in e)t.call(n,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e);else for(o in e)Wr.call(e,o)&&t.call(n,e[o],o,e);return e}function o(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function a(e){return function(t,n){e(n,t)}}function s(){return++li}function l(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(b(a)||S(a))for(var s=Object.keys(a),u=0,d=s.length;u<d;u++){var f=s[u],h=a[f];n&&b(h)?C(h)?e[f]=new Date(h.valueOf()):E(h)?e[f]=new RegExp(h):h.nodeName?e[f]=h.cloneNode(!0):L(h)?e[f]=h.clone():(b(e[f])||(e[f]=ui(h)?[]:{}),c(e[f],[h],!0)):e[f]=h}}return l(e,r),e}function u(e){return c(e,ti.call(arguments,1),!1)}function d(e){return c(e,ti.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function h(e,t){return u(Object.create(e),t)}function p(){}function g(e){return e}function m(e){return function(){return e}}function v(e){return S(e.toString)&&e.toString!==ii}function _(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!oi(e)}function x(e){return"string"==typeof e}function k(e){return"number"==typeof e}function C(e){return"[object Date]"===ii.call(e)}function S(e){return"function"==typeof e}function E(e){return"[object RegExp]"===ii.call(e)}function $(e){return e&&e.window===e}function T(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===ii.call(e)}function D(e){return"[object FormData]"===ii.call(e)}function O(e){return"[object Blob]"===ii.call(e)}function P(e){return"boolean"==typeof e}function R(e){return e&&S(e.then)}function I(e){return e&&k(e.length)&&di.test(ii.call(e))}function M(e){return"[object ArrayBuffer]"===ii.call(e)}function L(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function N(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function j(e){return Gr(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){return Array.prototype.indexOf.call(e,t)!==-1}function B(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t){function n(e,t){var n,i=t.$$hashKey;if(ui(e))for(var o=0,a=e.length;o<a;o++)t.push(r(e[o]));else if(w(e))for(n in e)t[n]=r(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));else for(n in e)Wr.call(e,n)&&(t[n]=r(e[n]));return l(t,i),t}function r(e){if(!b(e))return e;var t=a.indexOf(e);if(t!==-1)return s[t];if($(e)||T(e))throw ai("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=o(e);return void 0===i&&(i=ui(e)?[]:Object.create(oi(e)),r=!0),a.push(e),s.push(i),r?n(e,i):i}function o(e){switch(ii.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(r(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(S(e.cloneNode))return e.cloneNode(!0)}var a=[],s=[];if(t){if(I(t)||M(t))throw ai("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw ai("cpi","Can't copy! Source and destination are identical.");return ui(t)?t.length=0:i(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),s.push(t),n(e,t)}return r(e)}function z(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!ui(e)){if(C(e))return!!C(t)&&z(e.getTime(),t.getTime());if(E(e))return!!E(t)&&e.toString()===t.toString();if(T(e)||T(t)||$(e)||$(t)||ui(t)||C(t)||E(t))return!1;i=ve();for(r in e)if("$"!==r.charAt(0)&&!S(e[r])){if(!z(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&y(t[r])&&!S(t[r]))return!1;return!0}if(!ui(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!z(e[r],t[r]))return!1;return!0}}return!1}function q(e,t,n){return e.concat(ti.call(t,n))}function H(e,t){return ti.call(e,t||0)}function V(e,t){var n=arguments.length>2?H(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,q(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function W(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:$(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":T(n)&&(r="$SCOPE"),r}function G(e,t){if(!_(e))return k(t)||(t=t?2:null),JSON.stringify(e,W,t)}function Y(e){return x(e)?JSON.parse(e):e}function K(e,t){e=e.replace(mi,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return ci(n)?t:n}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function J(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=K(t,r);return X(e,n*(i-r))}function Z(e){e=Zr(e).clone();try{e.empty()}catch(e){}var t=Zr("<div>").append(e).html();try{return e[0].nodeType===ki?Gr(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Gr(t)})}catch(e){return Gr(t)}}function Q(e){try{return decodeURIComponent(e)}catch(e){}}function ee(e){var t={};return i((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(r=e.substring(0,n),i=e.substring(n+1)),r=Q(r),y(r)&&(i=!y(i)||Q(i),Wr.call(t,r)?ui(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function te(e){var t=[];return i(e,function(e,n){ui(e)?i(e,function(e){t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}):t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}),t.length?t.join("&"):""}function ne(e){return re(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function re(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ie(e,t){var n,r,i=vi.length;for(r=0;r<i;++r)if(n=vi[r]+t,x(n=e.getAttribute(n)))return n;return null}function oe(e){if(!e.currentScript)return!0;var t=e.currentScript.getAttribute("src"),n=e.createElement("a");if(n.href=t,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function ae(e,n){var r,o,a={};if(i(vi,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,o=e.getAttribute(n))}),i(vi,function(t){var n,i=t+"app";!r&&(n=e.querySelector("["+i.replace(":","\\:")+"]"))&&(r=n,o=n.getAttribute(i))}),r){if(!_i)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==ie(r,"strict-di"),n(r,o?[o]:[],a)}}function se(e,n,r){b(r)||(r={});var o={strictDi:!1};r=u(o,r);var a=function(){if(e=Zr(e),e.injector()){var i=e[0]===t.document?"document":Z(e);throw ai("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=ut(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return t&&s.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(s,"")),t&&!l.test(t.name)?a():(t.name=t.name.replace(l,""),si.resumeBootstrap=function(e){return i(e,function(e){n.push(e)}),a()},void(S(si.resumeDeferredBootstrap)&&si.resumeDeferredBootstrap()))}function le(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function ce(e){var t=si.element(e).injector();if(!t)throw ai("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ue(e,t){return t=t||"_",e.replace(yi,function(e,n){return(n?t:"")+e.toLowerCase()})}function de(){var n;if(!bi){var r=gi();Qr=_(r)?e:r?t[r]:void 0,Qr&&Qr.fn.on?(Zr=Qr,u(Qr.fn,{scope:Bi.scope,isolateScope:Bi.isolateScope,controller:Bi.controller,injector:Bi.injector,inheritedData:Bi.inheritedData}),n=Qr.cleanData,Qr.cleanData=function(e){for(var t,r,i=0;null!=(r=e[i]);i++)t=Qr._data(r,"events"),t&&t.$destroy&&Qr(r).triggerHandler("$destroy");n(e)}):Zr=Me,si.element=Zr,bi=!0}}function fe(e,t,n){if(!e)throw ai("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function he(e,t,n){return n&&ui(e)&&(e=e[e.length-1]),fe(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function pe(e,t){if("hasOwnProperty"===e)throw ai("badname","hasOwnProperty is not a valid {0} name",t)}function ge(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&S(e)?V(o,e):e}function me(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=Zr(ti.call(e,0,i))),t.push(n));return t||e}function ve(){return Object.create(null)}function _e(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!v(e)||ui(e)||C(e)?G(e):e.toString()}return e}function ye(e){function t(e,t,n){return e[t]||(e[t]=n())}var r=n("$injector"),i=n("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||n,t(o,"module",function(){var e={};return function(n,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(n,"module"),o&&e.hasOwnProperty(n)&&(e[n]=null),t(e,n,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),u}}function t(e,t,r){return r||(r=i),function(i,o){return o&&S(o)&&(o.$$moduleName=n),r.push([e,t,arguments]),u}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",n);var i=[],s=[],l=[],c=e("$injector","invoke","push",s),u={_invokeQueue:i,_configBlocks:s,_runBlocks:l,requires:o,name:n,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator",s),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),component:t("$compileProvider","component"),config:c,run:function(e){return l.push(e),this}};return a&&c(a),u})}})}function be(e,t){if(ui(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function we(e){var t=[];return JSON.stringify(e,function(e,n){if(n=W(e,n),b(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function xe(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):_(e)?"undefined":"string"!=typeof e?we(e):e}function ke(e){u(e,{bootstrap:se,copy:U,extend:u,merge:d,equals:z,element:Zr,forEach:i,injector:ut,noop:p,bind:V,toJson:G,fromJson:Y,identity:g,isUndefined:_,isDefined:y,isString:x,isFunction:S,isObject:b,isNumber:k,isElement:L,isArray:ui,version:$i,isDate:C,lowercase:Gr,uppercase:Yr,callbacks:{$$counter:0},getTestability:ce,reloadWithDebugInfo:le,$$minErr:n,$$csp:pi,$$encodeUriSegment:ne,$$encodeUriQuery:re,$$stringify:_e}),(ei=ye(t))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Tn}),e.provider("$compile",wt).directive({a:Yo,input:pa,textarea:pa,form:ea,script:ls,select:ds,option:fs,ngBind:va,ngBindHtml:ya,ngBindTemplate:_a,ngClass:wa,ngClassEven:ka,ngClassOdd:xa,ngCloak:Ca,ngController:Sa,ngForm:ta,ngHide:ts,ngIf:Ta,ngInclude:Aa,ngInit:Oa,ngNonBindable:Wa,ngPluralize:Xa,ngRepeat:Ja,ngShow:es,ngStyle:ns,ngSwitch:rs,ngSwitchWhen:is,ngSwitchDefault:os,ngOptions:Ka,ngTransclude:ss,ngModel:qa,ngList:Pa,ngChange:ba,pattern:ps,ngPattern:ps,required:hs,ngRequired:hs,minlength:ms,ngMinlength:ms,maxlength:gs,ngMaxlength:gs,ngValue:ma,ngModelOptions:Va}).directive({ngInclude:Da}).directive(Ko).directive(Ea),e.provider({$anchorScroll:dt,$animate:no,$animateCss:oo,$$animateJs:eo,$$animateQueue:to,$$AnimateRunner:io,$$animateAsyncRun:ro,$browser:vt,$cacheFactory:_t,$controller:$t,$document:Tt,$$isDocumentHidden:At,$exceptionHandler:Dt,$filter:qn,$$forceReflow:ho,$interpolate:Ht,$interval:Vt,$http:Bt,$httpParamSerializer:Pt,$httpParamSerializerJQLike:Rt,$httpBackend:zt,$xhrFactory:Ut,$jsonpCallbacks:wo,$location:sn,$log:ln,$parse:xn,$rootScope:$n,$q:kn,$$q:Cn,$sce:Rn,$sceDelegate:Pn,$sniffer:In,$templateCache:yt,$templateRequest:Mn,$$testability:Ln,$timeout:Nn,$window:Bn,$$rAF:En,$$jqLite:rt,$$HashMap:Hi,$$cookieReader:zn})}])}function Ce(){return++Ai}function Se(e){return $e(e.replace(Oi,"ms-"))}function Ee(e,t){return t.toUpperCase()}function $e(e){return e.replace(Di,Ee)}function Te(e){return!Mi.test(e)}function Ae(e){var t=e.nodeType;return t===wi||!t||t===Si}function De(e){for(var t in Ti[e.ng339])return!0;return!1}function Oe(e){for(var t=0,n=e.length;t<n;t++)Fe(e[t])}function Pe(e,t){var n,r,o,a,s=t.createDocumentFragment(),l=[];if(Te(e))l.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),r=(Li.exec(e)||["",""])[1].toLowerCase(),o=ji[r]||ji._default,n.innerHTML=o[1]+e.replace(Ni,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;l=q(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",i(l,function(e){s.appendChild(e)}),s}function Re(e,n){n=n||t.document;var r;return(r=Ii.exec(e))?[n.createElement(r[1])]:(r=Pe(e,n))?r.childNodes:[]}function Ie(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Me(e){if(e instanceof Me)return e;var t;if(x(e)&&(e=fi(e),t=!0),!(this instanceof Me)){if(t&&"<"!==e.charAt(0))throw Ri("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Me(e)}t?Ve(this,Re(e)):S(e)?Je(e):Ve(this,e)}function Le(e){return e.cloneNode(!0)}function Ne(e,t){if(t||Fe(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;r<i;r++)Fe(n[r])}function je(e,t,n,r){if(y(r))throw Ri("offargs","jqLite#off() does not support the `selector` argument");var o=Be(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var l=function(t){var r=a[t];y(n)&&B(r||[],n),y(n)&&r&&r.length>0||(e.removeEventListener(t,s),delete a[t])};i(t.split(" "),function(e){l(e),Pi[e]&&l(Pi[e])})}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,s),delete a[t]}function Fe(e,t){var n=e.ng339,r=n&&Ti[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),je(e)),delete Ti[n],e.ng339=void 0}}function Be(e,t){var n=e.ng339,r=n&&Ti[n];return t&&!r&&(e.ng339=n=Ce(),r=Ti[n]={events:{},data:{},handle:void 0}),r}function Ue(e,t,n){if(Ae(e)){var r,i=y(n),o=!i&&t&&!b(t),a=!t,s=Be(e,!o),l=s&&s.data;if(i)l[$e(t)]=n;else{if(a)return l;if(o)return l&&l[$e(t)];for(r in t)l[$e(r)]=t[r]}}}function ze(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function qe(e,t){t&&e.setAttribute&&i(t.split(" "),function(t){e.setAttribute("class",fi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+fi(t)+" "," ")))})}function He(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");i(t.split(" "),function(e){e=fi(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",fi(n))}}function Ve(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function We(e,t){return Ge(e,"$"+(t||"ngController")+"Controller")}function Ge(e,t,n){e.nodeType===Si&&(e=e.documentElement);for(var r=ui(t)?t:[t];e;){for(var i=0,o=r.length;i<o;i++)if(y(n=Zr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Ei&&e.host}}function Ye(e){for(Ne(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ke(e,t){t||Ne(e);var n=e.parentNode;n&&n.removeChild(e)}function Xe(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Zr(n).on("load",e)}function Je(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}function Ze(e,t){var n=Ui[t.toLowerCase()];return n&&zi[j(e)]&&n}function Qe(e){return qi[e]}function et(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(_(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||tt;o>1&&(i=be(i));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(e,n,i[l])}};return n.elem=e,n}function tt(e,t,n){n.call(e,t)}function nt(e,t,n){var r=t.relatedTarget;r&&(r===e||Fi.call(e,r))||n.call(e,t)}function rt(){this.$get=function(){return u(Me,{hasClass:function(e,t){return e.attr&&(e=e[0]),ze(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),He(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),qe(e,t)}})}}function it(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||s)():r+":"+e}function ot(e,t){if(t){var n=0;this.nextUid=function(){return++n}}i(e,this.put,this)}function at(e){return Function.prototype.toString.call(e)+" "}function st(e){var t=at(e).replace(Ki,""),n=t.match(Vi)||t.match(Wi);return n}function lt(e){var t=st(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ct(e,t,n){var r,o,a;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw x(n)&&n||(n=e.name||lt(e)),Xi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=st(e),i(o[1].split(Gi),function(e){e.replace(Yi,function(e,t,n){r.push(n)})})}e.$inject=r}}else ui(e)?(a=e.length-1,he(e[a],"fn"),r=e.slice(0,a)):he(e,"fn",!0);return r}function ut(e,t){function n(e){return function(t,n){return b(t)?void i(t,a(e)):e(t,n)}}function r(e,t){if(pe(e,"service"),(S(t)||ui(t))&&(t=k.instantiate(t)),!t.$get)throw Xi("pget","Provider '{0}' must define $get factory method.",e);return w[e+g]=t}function o(e,t){return function(){var n=$.invoke(t,this);if(_(n))throw Xi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return r(e,{$get:n!==!1?o(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return s(e,m(t),!1)}function u(e,t){pe(e,"constant"),w[e]=t,C[e]=t}function d(e,t){var n=k.get(e+g),r=n.$get;n.$get=function(){var e=$.invoke(r,n);return $.invoke(t,null,{$delegate:e})}}function f(e){fe(_(e)||ui(e),"modulesToLoad","not an array");var t,n=[];return i(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=k.get(r[0]);i[r[1]].apply(i,r[2])}}if(!y.get(e)){y.put(e,!0);try{x(e)?(t=ei(e),n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):S(e)?n.push(k.invoke(e)):ui(e)?n.push(k.invoke(e)):he(e,"module")}catch(t){throw ui(e)&&(e=e[e.length-1]),t.message&&t.stack&&t.stack.indexOf(t.message)===-1&&(t=t.message+"\n"+t.stack),Xi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),n}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===p)throw Xi("cdep","Circular dependency found: {0}",t+" <- "+v.join(" <- "));return e[t]}try{return v.unshift(t),e[t]=p,e[t]=n(t,r),e[t]}catch(n){throw e[t]===p&&delete e[t],n}finally{v.shift()}}function i(e,n,i){for(var o=[],a=ut.$$annotate(e,t,i),s=0,l=a.length;s<l;s++){var c=a[s];if("string"!=typeof c)throw Xi("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(n&&n.hasOwnProperty(c)?n[c]:r(c,i))}return o}function o(e){if(Jr||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return P(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(at(e))),t}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return ui(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=ui(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:ut.$$annotate,has:function(t){return w.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=t===!0;var p={},g="Provider",v=[],y=new ot([],!0),w={$provide:{provider:n(r),factory:n(s),service:n(l),value:n(c),constant:n(u),decorator:d}},k=w.$injector=h(w,function(e,t){throw si.isString(t)&&v.push(t),Xi("unpr","Unknown provider: {0}",v.join(" <- "))}),C={},E=h(C,function(e,t){var n=k.get(e+g,t);return $.invoke(n.$get,n,void 0,e)}),$=E;w["$injector"+g]={$get:m(E)};var T=f(e);return $=E.get("$injector"),$.strictDi=t,i(T,function(e){e&&$.invoke(e)}),$}function dt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===j(e))return t=e,!0}),t}function o(){var e=s.yOffset;if(S(e))e=e();else if(L(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else k(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=x(e)?e:k(e)?e.toString():n.hash();var t;e?(t=l.getElementById(e))?a(t):(t=i(l.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||Xe(function(){r.$evalAsync(s)})}),s}]}function ft(e,t){return e||t?e?t?(ui(e)&&(e=e.join(" ")),ui(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function ht(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Zi)return n}}function pt(e){x(e)&&(e=e.split(" "));var t=ve();return i(e,function(e){e.length&&(t[e]=!0)}),t}function gt(e){return b(e)?e:{}}function mt(e,t,n,r){function o(e){try{e.apply(null,H(arguments,1))}finally{if(v--,0===v)for(;y.length;)try{y.pop()()}catch(e){n.error(e)}}}function a(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function s(){C=null,l(),c()}function l(){b=S(),b=_(b)?null:b,z(b,T)&&(b=T),T=b}function c(){x===u.url()&&w===b||(x=u.url(),w=b,i(E,function(e){e(u.url(),b)}))}var u=this,d=e.location,f=e.history,h=e.setTimeout,g=e.clearTimeout,m={};u.isMock=!1;var v=0,y=[];u.$$completeOutstandingRequest=o,u.$$incOutstandingRequestCount=function(){v++},u.notifyWhenNoOutstandingRequests=function(e){0===v?e():y.push(e)};var b,w,x=d.href,k=t.find("base"),C=null,S=r.history?function(){try{return f.state}catch(e){}}:p;l(),w=b,u.url=function(t,n,i){if(_(i)&&(i=null),d!==e.location&&(d=e.location),f!==e.history&&(f=e.history),t){var o=w===i;if(x===t&&(!r.history||o))return u;var s=x&&Jt(x)===Jt(t);return x=t,w=i,!r.history||s&&o?(s||(C=t),n?d.replace(t):s?d.hash=a(t):d.href=t,d.href!==t&&(C=t)):(f[n?"replaceState":"pushState"](i,"",t),l(),w=b),C&&(C=t),u}return C||d.href.replace(/%27/g,"'")},u.state=function(){return b};var E=[],$=!1,T=null;u.onUrlChange=function(t){return $||(r.history&&Zr(e).on("popstate",s),Zr(e).on("hashchange",s),$=!0),E.push(t),t},u.$$applicationDestroyed=function(){Zr(e).off("hashchange popstate",s)},u.$$checkUrlChange=c,u.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},u.defer=function(e,t){var n;return v++,n=h(function(){delete m[n],o(e)},t||0),m[n]=!0,n},u.defer.cancel=function(e){return!!m[e]&&(delete m[e],g(e),o(p),!0)}}function vt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new mt(e,r,t,n)}]}function _t(){this.$get=function(){function e(e,r){function i(e){e!==f&&(h?h===e&&(h=e.n):h=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw n("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=u({},r,{id:e}),l=ve(),c=r&&r.capacity||Number.MAX_VALUE,d=ve(),f=null,h=null;return t[e]={put:function(e,t){if(!_(t)){if(c<Number.MAX_VALUE){var n=d[e]||(d[e]={key:e});i(n)}return e in l||a++,l[e]=t,a>c&&this.remove(h.key),t}},get:function(e){if(c<Number.MAX_VALUE){var t=d[e];if(!t)return;i(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=d[e];if(!t)return;t===f&&(f=t.p),t===h&&(h=t.n),o(t.n,t.p),delete d[e]}e in l&&(delete l[e],a--)},removeAll:function(){l=ve(),a=0,d=ve(),f=h=null},destroy:function(){l=null,s=null,d=null,delete t[e]},info:function(){return u({},s,{size:a})}}}var t={};return e.info=function(){var e={};return i(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function yt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function bt(){}function wt(e,n){function r(e,t,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=ve();return i(e,function(e,i){if(e in $)return void(o[i]=$[e]);var a=e.match(r);if(!a)throw ao("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e,n?"controller bindings definition":"isolate scope definition");o[i]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||i},a[4]&&($[e]=o[i])}),o}function o(e,t){var n={isolateScope:null,bindToController:null};if(b(e.scope)&&(e.bindToController===!0?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),b(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw ao("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function s(e){var t=e.charAt(0);if(!t||t!==Gr(t))throw ao("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ao("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function l(e){var t=e.require||e.controller&&e.name;return!ui(t)&&b(t)&&i(t,function(e,n){var r=e.match(C),i=e.substring(r[0].length);i||(t[n]=r[0]+n)}),t}function c(e,t){if(e&&(!x(e)||!/[EACM]/.test(e)))throw ao("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var d={},f="Directive",v=/^\s*directive:\s*([\w-]+)\s+(.*)$/,w=/(([\w-]+)(?::([^;]+))?;?)/,k=N("ngSrc,ngSrcset,src,srcset"),C=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/,$=ve();this.directive=function t(n,r){return fe(n,"name"),pe(n,"directive"),x(n)?(s(n),fe(r,"directiveFactory"),d.hasOwnProperty(n)||(d[n]=[],e.factory(n+f,["$injector","$exceptionHandler",function(e,t){var r=[];return i(d[n],function(i,o){try{var a=e.invoke(i);S(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=l(a),a.restrict=c(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(e){t(e)}}),r}])),d[n].push(r)):i(n,a(t)),this},this.component=function(e,t){function n(e){function n(t){return S(t)||ui(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var o=t.template||t.templateUrl?t.template:"",a={controller:r,controllerAs:Et(t.controller)||t.controllerAs||"$ctrl",template:n(o),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return i(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var r=t.controller||function(){};return i(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,S(r)&&(r[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return y(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var A=!0;this.debugInfoEnabled=function(e){return y(e)?(A=e,this):A};var D=!1;this.preAssignBindingsEnabled=function(e){return y(e)?(D=e,this):D};var O=10;this.onChangesTtl=function(e){return arguments.length?(O=e,this):O};var R=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(R=e,this):R};var I=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(I=e,this):I},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,r,a,s,l,c,m,$,M){function L(){try{if(!--Ae)throw ke=void 0,ao("infchng","{0} $onChanges() iterations reached. Aborting!\n",O);c.$apply(function(){for(var e=[],t=0,n=ke.length;t<n;++t)try{ke[t]()}catch(t){e.push(t)}if(ke=void 0,e.length)throw e})}finally{Ae++}}function N(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;n<r;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function F(e,t,n){Se.innerHTML="<span "+t+">";var r=Se.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function U(e,t){try{e.addClass(t)}catch(e){}}function q(e,t,n,r,i){e instanceof Zr||(e=Zr(e));var o=G(e,t,e,n,r,i);q.$$addScopeClass(e);var a=null;return function(t,n,r){if(!e)throw ao("multilink","This element has already been linked.");fe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new()),r=r||{};var s=r.parentBoundTranscludeFn,l=r.transcludeControllers,c=r.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=W(c));var u;if(u="html"!==a?Zr(ge(a,Zr("<div>").append(e).html())):n?Bi.clone.call(e):e,l)for(var d in l)u.data("$"+d+"Controller",l[d].instance);return q.$$addScopeInfo(u,t),n&&n(u,t),o&&o(t,u,u,s),n||(e=o=null),u}}function W(e){var t=e&&e[0];return t&&"foreignobject"!==j(t)&&ii.call(t).match(/SVG/)?"svg":"html"}function G(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,l,c,u,d,f,g;if(h){var m=n.length;for(g=new Array(m),c=0;c<p.length;c+=3)d=p[c],g[d]=n[d]}else g=n;for(c=0,u=p.length;c<u;)s=g[p[c++]],o=p[c++],a=p[c++],o?(o.scope?(l=e.$new(),q.$$addScopeInfo(Zr(s),l)):l=e,f=o.transcludeOnThisElement?K(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?K(e,t):null,o(a,l,s,r,f)):a&&a(e,s.childNodes,void 0,i)}for(var s,l,c,u,d,f,h,p=[],g=ui(e)||e instanceof Zr,m=0;m<e.length;m++)s=new N,11===Jr&&Y(e,m,g),l=X(e[m],[],s,0===m?r:void 0,i),c=l.length?ne(l,e[m],s,t,n,null,[],[],o):null,c&&c.scope&&q.$$addScopeClass(s.$$element),d=c&&c.terminal||!(u=e[m].childNodes)||!u.length?null:G(u,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),
(c||d)&&(p.push(m,c,d),f=!0,h=h||c),o=null;return f?a:null}function Y(e,t,n){var r,i=e[t],o=i.parentNode;if(i.nodeType===ki)for(;;){if(r=o?i.nextSibling:e[t+1],!r||r.nodeType!==ki)break;i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}}function K(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=ve();for(var o in t.$$slots)t.$$slots[o]?i[o]=K(e,t.$$slots[o],n):i[o]=null;return r}function X(e,t,n,r,i){var o,a,s,l=e.nodeType,c=n.$attr;switch(l){case wi:a=j(e),ae(t,kt(a),"E",r,i);for(var u,d,f,h,p,g,m=e.attributes,v=0,_=m&&m.length;v<_;v++){var y=!1,k=!1;u=m[v],d=u.name,p=u.value,h=kt(d),g=Re.test(h),g&&(d=d.replace(lo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var C=h.match(Ie);C&&se(C[1])&&(y=d,k=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),f=kt(d.toLowerCase()),c[f]=d,!g&&n.hasOwnProperty(f)||(n[f]=p,Ze(e,f)&&(n[f]=!0)),_e(e,t,p,f,g),ae(t,f,"A",r,i,y,k)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!$e)break;if(s=e.className,b(s)&&(s=s.animVal),x(s)&&""!==s)for(;o=w.exec(s);)f=kt(o[2]),ae(t,f,"C",r,i)&&(n[f]=fi(o[3])),s=s.substr(o.index+o[0].length);break;case ki:pe(t,e.nodeValue);break;case Ci:if(!Ee)break;J(e,t,n,r,i)}return t.sort(de),t}function J(e,t,n,r,i){try{var o=v.exec(e.nodeValue);if(o){var a=kt(o[1]);ae(t,a,"M",r,i)&&(n[a]=fi(o[2]))}}catch(e){}}function Q(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ao("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===wi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Zr(r)}function ee(e,t,n){return function(r,i,o,a,s){return i=Q(i[0],t,n),e(r,i,o,a,s)}}function te(e,t,n,r,i,o){var a;return e?q(t,n,r,i,o):function(){return a||(a=q(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function ne(e,t,n,o,a,s,l,c,d){function f(e,t,n,r){e&&(n&&(e=ee(e,n,r)),e.require=p.require,e.directiveName=g,(C===p||p.$$isolateScope)&&(e=be(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=ee(t,n,r)),t.require=p.require,t.directiveName=g,(C===p||p.$$isolateScope)&&(t=be(t,{isolateScope:!0})),c.push(t))}function h(e,o,a,s,d){function f(e,t,n,r){var i;if(T(e)||(r=n,n=t,t=e,e=void 0),P&&(i=y),n||(n=P?$.parent():$),!r)return d(e,t,i,n,F);var o=d.$$slots[r];if(o)return o(e,t,i,n,F);if(_(o))throw ao("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Z($))}var h,p,g,m,v,y,w,$,A,O;t===a?(A=n,$=n.$$element):($=Zr(a),A=new N($,n)),v=o,C?m=o.$new(!0):x&&(v=o.$parent),d&&(w=f,w.$$boundTransclude=d,w.isSlotFilled=function(e){return!!d.$$slots[e]}),k&&(y=ie($,A,w,k,m,o,C)),C&&(q.$$addScopeInfo($,m,!0,!(E&&(E===C||E===C.$$originalDirective))),q.$$addScopeClass($,!0),m.$$isolateBindings=C.$$isolateBindings,O=xe(o,A,m,m.$$isolateBindings,C),O.removeWatches&&m.$on("$destroy",O.removeWatches));for(var R in y){var I=k[R],M=y[R],L=I.$$bindings.bindToController;if(D){L?M.bindingInfo=xe(v,A,M.instance,L,I):M.bindingInfo={};var j=M();j!==M.instance&&(M.instance=j,$.data("$"+I.name+"Controller",j),M.bindingInfo.removeWatches&&M.bindingInfo.removeWatches(),M.bindingInfo=xe(v,A,M.instance,L,I))}else M.instance=M(),$.data("$"+I.name+"Controller",M.instance),M.bindingInfo=xe(v,A,M.instance,L,I)}for(i(k,function(e,t){var n=e.require;e.bindToController&&!ui(n)&&b(n)&&u(y[t].instance,re(t,n,$,y))}),i(y,function(e){var t=e.instance;if(S(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){r(e)}if(S(t.$onInit))try{t.$onInit()}catch(e){r(e)}S(t.$doCheck)&&(v.$watch(function(){t.$doCheck()}),t.$doCheck()),S(t.$onDestroy)&&v.$on("$destroy",function(){t.$onDestroy()})}),h=0,p=l.length;h<p;h++)g=l[h],we(g,g.isolateScope?m:o,$,A,g.require&&re(g.directiveName,g.require,$,y),w);var F=o;for(C&&(C.template||null===C.templateUrl)&&(F=m),e&&e(F,a.childNodes,void 0,d),h=c.length-1;h>=0;h--)g=c[h],we(g,g.isolateScope?m:o,$,A,g.require&&re(g.directiveName,g.require,$,y),w);i(y,function(e){var t=e.instance;S(t.$postLink)&&t.$postLink()})}d=d||{};for(var p,g,m,v,y,w=-Number.MAX_VALUE,x=d.newScopeDirective,k=d.controllerDirectives,C=d.newIsolateScopeDirective,E=d.templateDirective,$=d.nonTlbTranscludeDirective,A=!1,O=!1,P=d.hasElementTranscludeDirective,R=n.$$element=Zr(t),I=s,M=o,L=!1,F=!1,B=0,U=e.length;B<U;B++){p=e[B];var z=p.$$start,W=p.$$end;if(z&&(R=Q(t,z,W)),m=void 0,w>p.priority)break;if(y=p.scope,y&&(p.templateUrl||(b(y)?(he("new/isolated scope",C||x,p,R),C=p):he("new/isolated scope",C,p,R)),x=x||p),g=p.name,!L&&(p.replace&&(p.templateUrl||p.template)||p.transclude&&!p.$$tlb)){for(var G,Y=B+1;G=e[Y++];)if(G.transclude&&!G.$$tlb||G.replace&&(G.templateUrl||G.template)){F=!0;break}L=!0}if(!p.templateUrl&&p.controller&&(k=k||ve(),he("'"+g+"' controller",k[g],p,R),k[g]=p),y=p.transclude)if(A=!0,p.$$tlb||(he("transclusion",$,p,R),$=p),"element"===y)P=!0,w=p.priority,m=R,R=n.$$element=Zr(q.$$createComment(g,n[g])),t=R[0],ye(a,H(m),t),m[0].$$parentNode=m[0].parentNode,M=te(F,m,o,w,I&&I.name,{nonTlbTranscludeDirective:$});else{var K=ve();if(b(y)){m=[];var J=ve(),ne=ve();i(y,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,J[e]=t,K[t]=null,ne[t]=n}),i(R.contents(),function(e){var t=J[kt(j(e))];t?(ne[t]=!0,K[t]=K[t]||[],K[t].push(e)):m.push(e)}),i(ne,function(e,t){if(!e)throw ao("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var ae in K)K[ae]&&(K[ae]=te(F,K[ae],o))}else m=Zr(Le(t)).contents();R.empty(),M=te(F,m,o,void 0,void 0,{needsNewScope:p.$$isolateScope||p.$$newScope}),M.$$slots=K}if(p.template)if(O=!0,he("template",E,p,R),E=p,y=S(p.template)?p.template(R,n):p.template,y=Pe(y),p.replace){if(I=p,m=Te(y)?[]:St(ge(p.templateNamespace,fi(y))),t=m[0],1!==m.length||t.nodeType!==wi)throw ao("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g,"");ye(a,R,t);var se={$attr:{}},ue=X(t,[],se),de=e.splice(B+1,e.length-(B+1));(C||x)&&oe(ue,C,x),e=e.concat(ue).concat(de),le(n,se),U=e.length}else R.html(y);if(p.templateUrl)O=!0,he("template",E,p,R),E=p,p.replace&&(I=p),h=ce(e.splice(B,e.length-B),R,n,a,A&&M,l,c,{controllerDirectives:k,newScopeDirective:x!==p&&x,newIsolateScopeDirective:C,templateDirective:E,nonTlbTranscludeDirective:$}),U=e.length;else if(p.compile)try{v=p.compile(R,n,M);var fe=p.$$originalDirective||p;S(v)?f(null,V(fe,v),z,W):v&&f(V(fe,v.pre),V(fe,v.post),z,W)}catch(e){r(e,Z(R))}p.terminal&&(h.terminal=!0,w=Math.max(w,p.priority))}return h.scope=x&&x.scope===!0,h.transcludeOnThisElement=A,h.templateOnThisElement=O,h.transclude=M,d.hasElementTranscludeDirective=P,h}function re(e,t,n,r){var o;if(x(t)){var a=t.match(C),s=t.substring(a[0].length),l=a[1]||a[3],c="?"===a[2];if("^^"===l?n=n.parent():(o=r&&r[s],o=o&&o.instance),!o){var u="$"+s+"Controller";o=l?n.inheritedData(u):n.data(u)}if(!o&&!c)throw ao("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(ui(t)){o=[];for(var d=0,f=t.length;d<f;d++)o[d]=re(e,t[d],n,r)}else b(t)&&(o={},i(t,function(t,i){o[i]=re(e,t,n,r)}));return o||null}function ie(e,t,n,r,i,o,a){var s=ve();for(var c in r){var u=r[c],d={$scope:u===a||u.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},f=u.controller;"@"===f&&(f=t[u.name]);var h=l(f,d,!0,u.controllerAs);s[u.name]=h,e.data("$"+u.name+"Controller",h.instance)}return s}function oe(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=h(e[r],{$$isolateScope:t,$$newScope:n})}function ae(t,n,r,i,a,s,l){if(n===a)return null;var c=null;if(d.hasOwnProperty(n))for(var u,p=e.get(n+f),g=0,m=p.length;g<m;g++)if(u=p[g],(_(i)||i>u.priority)&&u.restrict.indexOf(r)!==-1){if(s&&(u=h(u,{$$start:s,$$end:l})),!u.$$bindings){var v=u.$$bindings=o(u,u.name);b(v.isolateScope)&&(u.$$isolateBindings=v.isolateScope)}t.push(u),c=u}return c}function se(t){if(d.hasOwnProperty(t))for(var n,r=e.get(t+f),i=0,o=r.length;i<o;i++)if(n=r[i],n.multiElement)return!0;return!1}function le(e,t){var n=t.$attr,r=e.$attr;i(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))}),i(t,function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function ce(e,t,n,o,s,l,c,u){var d,f,g=[],m=t[0],v=e.shift(),_=h(v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),y=S(v.templateUrl)?v.templateUrl(t,n):v.templateUrl,w=v.templateNamespace;return t.empty(),a(y).then(function(r){var a,h,p,x;if(r=Pe(r),v.replace){if(p=Te(r)?[]:St(ge(w,fi(r))),a=p[0],1!==p.length||a.nodeType!==wi)throw ao("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,y);h={$attr:{}},ye(o,t,a);var k=X(a,[],h);b(v.scope)&&oe(k,!0),e=k.concat(e),le(n,h)}else a=m,t.html(r);for(e.unshift(_),d=ne(e,a,n,s,t,v,l,c,u),i(o,function(e,n){e===a&&(o[n]=t[0])}),f=G(t[0].childNodes,s);g.length;){var C=g.shift(),S=g.shift(),E=g.shift(),$=g.shift(),T=t[0];if(!C.$$destroyed){if(S!==m){var A=S.className;u.hasElementTranscludeDirective&&v.replace||(T=Le(a)),ye(E,Zr(S),T),U(Zr(T),A)}x=d.transcludeOnThisElement?K(C,d.transclude,$):$,d(f,C,T,o,x)}}g=null}).catch(function(e){e instanceof Error&&r(e)}).catch(p),function(e,t,n,r,i){var o=i;t.$$destroyed||(g?g.push(t,n,r,o):(d.transcludeOnThisElement&&(o=K(t,d.transclude,i)),d(f,t,n,r,o)))}}function de(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function he(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw ao("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Z(r))}function pe(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&q.$$addBindingClass(t),function(e,t){var i=t.parent();n||q.$$addBindingClass(i),q.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function ge(e,n){switch(e=Gr(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function me(e,t){if("srcdoc"===t)return m.HTML;var n=j(e);if("src"===t||"ngSrc"===t){if(["img","video","audio","source","track"].indexOf(n)===-1)return m.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return m.RESOURCE_URL}function _e(e,t,r,i,o){var a=me(e,i),s=!o,l=k[i]||o,c=n(r,s,a,l);if(c){if("multiple"===i&&"select"===j(e))throw ao("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(e));if(E.test(i))throw ao("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=ve()),u=o[i];u!==r&&(c=u&&n(u,!0,a,l),r=u),c&&(o[i]=c(e),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||e).$watch(c,function(e,t){"class"===i&&e!==t?o.$updateClass(e,t):o.$set(i,e)}))}}}})}}function ye(e,n,r){var i,o,a=n[0],s=n.length,l=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r;for(var c=i,u=c+s-1,d=e.length;c<d;c++,u++)u<d?e[c]=e[u]:delete e[c];e.length-=s-1,e.context===a&&(e.context=r);break}l&&l.replaceChild(r,a);var f=t.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(Zr.hasData(a)&&(Zr.data(r,Zr.data(a)),Zr(a).off("$destroy")),Zr.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function be(e,t){return u(function(){return e.apply(null,arguments)},e,t)}function we(e,t,n,i,o,a){try{e(t,n,i,o,a)}catch(e){r(e,Z(n))}}function xe(e,t,r,o,a){function l(t,n,i){!S(r.$onChanges)||n===i||n!==n&&i!==i||(ke||(e.$$postDigest(L),ke=[]),u||(u={},ke.push(c)),u[t]&&(i=u[t].previousValue),u[t]=new xt(i,n))}function c(){r.$onChanges(u),u=void 0}var u,d=[],f={};return i(o,function(i,o){var c,u,h,g,m,v=i.attrName,_=i.optional,y=i.mode;switch(y){case"@":_||Wr.call(t,v)||(r[o]=t[v]=void 0),m=t.$observe(v,function(e){if(x(e)||P(e)){var t=r[o];l(o,e,t),r[o]=e}}),t.$$observers[v].$$scope=e,c=t[v],x(c)?r[o]=n(c)(e):P(c)&&(r[o]=c),f[o]=new xt(so,r[o]),d.push(m);break;case"=":if(!Wr.call(t,v)){if(_)break;t[v]=void 0}if(_&&!t[v])break;u=s(t[v]),g=u.literal?z:function(e,t){return e===t||e!==e&&t!==t},h=u.assign||function(){throw c=r[o]=u(e),ao("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,a.name)},c=r[o]=u(e);var b=function(t){return g(t,r[o])||(g(t,c)?h(e,t=r[o]):r[o]=t),c=t};b.$stateful=!0,m=i.collection?e.$watchCollection(t[v],b):e.$watch(s(t[v],b),null,u.literal),d.push(m);break;case"<":if(!Wr.call(t,v)){if(_)break;t[v]=void 0}if(_&&!t[v])break;u=s(t[v]);var w=u.literal,k=r[o]=u(e);f[o]=new xt(so,r[o]),m=e.$watch(u,function(e,t){if(t===e){if(t===k||w&&z(t,k))return;t=k}l(o,e,t),r[o]=e},w),d.push(m);break;case"&":if(u=t.hasOwnProperty(v)?s(t[v]):p,u===p&&_)break;r[o]=function(t){return u(e,t)}}}),{initialChanges:f,removeWatches:d.length&&function(){for(var e=0,t=d.length;e<t;++e)d[e]()}}}var ke,Ce=/^\w/,Se=t.document.createElement("div"),Ee=R,$e=I,Ae=O;N.prototype={$normalize:kt,$addClass:function(e){e&&e.length>0&&$.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&$.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ct(e,t);n&&n.length&&$.addClass(this.$$element,n);var r=Ct(t,e);r&&r.length&&$.removeClass(this.$$element,r)},$set:function(e,t,n,o){var a,s=this.$$element[0],l=Ze(s,e),c=Qe(e),u=e;if(l?(this.$$element.prop(e,t),o=l):c&&(this[c]=t,u=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=ue(e,"-"))),a=j(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=M(t,"src"===e);else if("img"===a&&"srcset"===e&&y(t)){for(var d="",f=fi(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(f)?h:/(,)/,g=f.split(p),m=Math.floor(g.length/2),v=0;v<m;v++){var b=2*v;d+=M(fi(g[b]),!0),d+=" "+fi(g[b+1])}var w=fi(g[2*v]).split(/\s/);d+=M(fi(w[0]),!0),2===w.length&&(d+=" "+fi(w[1])),this[e]=t=d}n!==!1&&(null===t||_(t)?this.$$element.removeAttr(o):Ce.test(o)?this.$$element.attr(o,t):F(this.$$element[0],o,t));var x=this.$$observers;x&&i(x[u],function(e){try{e(t)}catch(e){r(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ve()),i=r[e]||(r[e]=[]);return i.push(t),c.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||_(n[e])||t(n[e])}),function(){B(i,t)}}};var De=n.startSymbol(),Oe=n.endSymbol(),Pe="{{"===De&&"}}"===Oe?g:function(e){return e.replace(/\{\{/g,De).replace(/}}/g,Oe)},Re=/^ngAttr[A-Z]/,Ie=/^(.+)Start$/;return q.$$addBindingInfo=A?function(e,t){var n=e.data("$binding")||[];ui(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,q.$$addBindingClass=A?function(e){U(e,"ng-binding")}:p,q.$$addScopeInfo=A?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:p,q.$$addScopeClass=A?function(e,t){U(e,t?"ng-isolate-scope":"ng-scope")}:p,q.$$createComment=function(e,n){var r="";return A&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},q}]}function xt(e,t){this.previousValue=e,this.currentValue=t}function kt(e){return e.replace(lo,"").replace(co,Ee)}function Ct(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function St(e){e=Zr(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===Ci||n.nodeType===ki&&""===n.nodeValue.trim())&&ni.call(e,t,1)}return e}function Et(e,t){if(t&&x(t))return t;if(x(e)){var n=fo.exec(e);if(n)return n[3]}}function $t(){var e={},t=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){pe(t,"controller"),b(t)?u(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(r,i){function o(e,t,r,i){if(!e||!b(e.$scope))throw n("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=r}return function(n,a,s,l){var c,d,f,h;if(s=s===!0,l&&x(l)&&(h=l),x(n)){if(d=n.match(fo),!d)throw uo("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",n);if(f=d[1],h=h||d[3],n=e.hasOwnProperty(f)?e[f]:ge(a.$scope,f,!0)||(t?ge(i,f,!0):void 0),!n)throw uo("ctrlreg","The controller with the name '{0}' is not registered.",f);he(n,f,!0)}if(s){var p=(ui(n)?n[n.length-1]:n).prototype;return c=Object.create(p||null),h&&o(a,h,c,f||n.name),u(function(){var e=r.invoke(n,c,a,f);return e!==c&&(b(e)||S(e))&&(c=e,h&&o(a,h,c,f||n.name)),c},{instance:c,identifier:h})}return c=r.instantiate(n,a,f),h&&o(a,h,c,f||n.name),c}}]}function Tt(){this.$get=["$window",function(e){return Zr(e.document)}]}function At(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function Dt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Ot(e){return b(e)?C(e)?e.toISOString():G(e):e}function Pt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return o(e,function(e,n){null===e||_(e)||(ui(e)?i(e,function(e){t.push(re(n)+"="+re(Ot(e)))}):t.push(re(n)+"="+re(Ot(e))))}),t.join("&")}}}function Rt(){this.$get=function(){return function(e){function t(e,r,a){null===e||_(e)||(ui(e)?i(e,function(e,n){t(e,r+"["+(b(e)?n:"")+"]")}):b(e)&&!C(e)?o(e,function(e,n){t(e,r+(a?"":"[")+n+(a?"":"]"))}):n.push(re(r)+"="+re(Ot(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function It(e,t){if(x(e)){var n=e.replace(_o,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(po)||Mt(n))&&(e=Y(n))}}return e}function Mt(e){var t=e.match(mo);return t&&vo[t[0]].test(e)}function Lt(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=ve();return x(e)?i(e.split("\n"),function(e){n=e.indexOf(":"),t(Gr(fi(e.substr(0,n))),fi(e.substr(n+1)))}):b(e)&&i(e,function(e,n){t(Gr(n),fi(e))}),r}function Nt(e){var t;return function(n){if(t||(t=Lt(e)),n){var r=t[Gr(n)];return void 0===r&&(r=null),r}return t}}function jt(e,t,n,r){return S(r)?r(e,t,n):(i(r,function(r){e=r(e,t,n)}),e)}function Ft(e){return 200<=e&&e<300}function Bt(){var e=this.defaults={transformResponse:[It],transformRequest:[function(e){return!b(e)||A(e)||O(e)||D(e)?e:G(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:be(go),put:be(go),patch:be(go)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return y(e)?(t=!!e,this):t};var r=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,l,c,d,f,h){function g(t){function r(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(){o.$$completeOutstandingRequest(p)}function s(e,t){var n,r={};return i(e,function(e,i){S(e)?(n=e(t),null!=n&&(r[i]=n)):r[i]=e}),r}function l(t){var n,r,i,o=e.headers,a=u({},t.headers);o=u({},o.common,o[Gr(t.method)]);e:for(n in o){r=Gr(n);for(i in a)if(Gr(i)===r)continue e;a[n]=o[n]}return s(a,be(t))}function c(t){var n=t.headers,r=jt(t.data,Nt(n),void 0,t.transformRequest);return _(r)&&i(n,function(e,t){"content-type"===Gr(t)&&delete n[t]}),_(t.withCredentials)&&!_(e.withCredentials)&&(t.withCredentials=e.withCredentials),w(t,r).then(g,g)}function g(e){var t=u({},e);return t.data=jt(e.data,e.headers,e.status,m.transformResponse),Ft(e.status)?t:d.reject(t)}if(!b(t))throw n("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!x(h.valueOf(t.url)))throw n("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",t.url);var m=u({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},t);m.headers=l(t),m.method=Yr(m.method),m.paramSerializer=x(m.paramSerializer)?f.get(m.paramSerializer):m.paramSerializer,o.$$incOutstandingRequestCount();var v=[],y=[],k=d.resolve(m);return i($,function(e){(e.request||e.requestError)&&v.unshift(e.request,e.requestError),(e.response||e.responseError)&&y.push(e.response,e.responseError)}),k=r(k,v),k=k.then(c),k=r(k,y),k=k.finally(a)}function m(e){i(arguments,function(e){g[e]=function(t,n){return g(u({},n||{},{method:e,url:t}))}})}function v(e){i(arguments,function(e){g[e]=function(t,n,r){return g(u({},r||{},{method:e,url:t,data:n}))}})}function w(n,r){function o(e){if(e){var n={};return i(e,function(e,r){n[r]=function(n){function r(){e(n)}t?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),n}}function l(e,n,r,i){function o(){u(n,e,r,i)}m&&(Ft(e)?m.put(A,[e,n,Lt(r),i]):m.remove(A)),t?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function u(e,t,r,i){t=t>=-1?t:0,(Ft(t)?w.resolve:w.reject)({data:e,status:t,headers:Nt(r),config:n,statusText:i})}function f(e){u(e.data,e.status,be(e.headers()),e.statusText)}function p(){var e=g.pendingRequests.indexOf(n);e!==-1&&g.pendingRequests.splice(e,1)}var m,v,w=d.defer(),S=w.promise,$=n.headers,T="jsonp"===Gr(n.method),A=n.url;if(T?A=h.getTrustedResourceUrl(A):x(A)||(A=h.valueOf(A)),A=k(A,n.paramSerializer(n.params)),T&&(A=C(A,n.jsonpCallbackParam)),g.pendingRequests.push(n),S.then(p,p),!n.cache&&!e.cache||n.cache===!1||"GET"!==n.method&&"JSONP"!==n.method||(m=b(n.cache)?n.cache:b(e.cache)?e.cache:E),m&&(v=m.get(A),y(v)?R(v)?v.then(f,f):ui(v)?u(v[1],v[0],be(v[2]),v[3]):u(v,200,{},"OK"):m.put(A,S)),_(v)){var D=Fn(n.url)?s()[n.xsrfCookieName||e.xsrfCookieName]:void 0;D&&($[n.xsrfHeaderName||e.xsrfHeaderName]=D),a(n.method,A,r,l,$,n.timeout,n.withCredentials,n.responseType,o(n.eventHandlers),o(n.uploadEventHandlers))}return S}function k(e,t){return t.length>0&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}function C(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw yo("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);var n=new RegExp("[&?]"+t+"=");if(n.test(e))throw yo("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(e.indexOf("?")===-1?"?":"&")+t+"=JSON_CALLBACK"}var E=l("$http");e.paramSerializer=x(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var $=[];return i(r,function(e){$.unshift(x(e)?f.get(e):f.invoke(e))}),g.pendingRequests=[],m("get","delete","head","jsonp"),v("post","put","patch"),g.defaults=e,g}]}function Ut(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function zt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return qt(e,r,e.defer,t,n[0])}]}function qt(e,t,n,r,o){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var i=o.createElement("script"),a=null;return i.type="text/javascript",i.src=e,i.async=!0,a=function(e){i.removeEventListener("load",a),i.removeEventListener("error",a),o.body.removeChild(i),i=null;var s=-1,l="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},i.addEventListener("load",a),i.addEventListener("error",a),o.body.appendChild(i),a}return function(o,s,l,c,u,d,f,h,p,g){function m(){w&&w(),x&&x.abort()}function v(e,t,r,i,o){y(C)&&n.cancel(C),w=x=null,e(t,r,i,o)}if(s=s||e.url(),"jsonp"===Gr(o))var b=r.createCallback(s),w=a(s,b,function(e,t){var n=200===e&&r.getResponse(b);v(c,e,n,"",t),r.removeCallback(b)});else{var x=t(o,s);x.open(o,s,!0),i(u,function(e,t){y(e)&&x.setRequestHeader(t,e)}),x.onload=function(){var e=x.statusText||"",t="response"in x?x.response:x.responseText,n=1223===x.status?204:x.status;0===n&&(n=t?200:"file"===jn(s).protocol?404:0),v(c,n,t,x.getAllResponseHeaders(),e)};var k=function(){v(c,-1,null,null,"")};if(x.onerror=k,x.onabort=k,x.ontimeout=k,i(p,function(e,t){x.addEventListener(t,e)}),i(g,function(e,t){x.upload.addEventListener(t,e)}),f&&(x.withCredentials=!0),h)try{x.responseType=h}catch(e){if("json"!==h)throw e}x.send(_(l)?null:l)}if(d>0)var C=n(m,d);else R(d)&&d.then(m)}}function Ht(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(f,e).replace(h,t)}function s(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function l(o,l,f,h){function p(e){try{return e=O(e),h&&!y(e)?e:_e(e)}catch(e){r(bo.interr(o,e))}}if(!o.length||o.indexOf(e)===-1){var g;if(!l){var v=a(o);g=m(v),g.exp=o,g.expressions=[],g.$$watchDelegate=s}return g}h=!!h;for(var b,w,x,k=0,C=[],E=[],$=o.length,T=[],A=[];k<$;){if((b=o.indexOf(e,k))===-1||(w=o.indexOf(t,b+c))===-1){k!==$&&T.push(a(o.substring(k)));break}k!==b&&T.push(a(o.substring(k,b))),x=o.substring(b+c,w),C.push(x),E.push(n(x,p)),k=w+d,A.push(T.length),T.push("")}if(f&&T.length>1&&bo.throwNoconcat(o),!l||C.length){var D=function(e){for(var t=0,n=C.length;t<n;t++){if(h&&_(e[t]))return;T[A[t]]=e[t]}return T.join("")},O=function(e){return f?i.getTrusted(f,e):i.valueOf(e)};return u(function(e){var t=0,n=C.length,i=new Array(n);try{for(;t<n;t++)i[t]=E[t](e);return D(i)}catch(e){r(bo.interr(o,e))}},{exp:o,expressions:C,$$watchDelegate:function(e,t){var n;return e.$watchGroup(E,function(r,i){var o=D(r);S(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var c=e.length,d=t.length,f=new RegExp(e.replace(/./g,o),"g"),h=new RegExp(t.replace(/./g,o),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function Vt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,l,c){function u(){d?o.apply(null,f):o(g)}var d=arguments.length>4,f=d?H(arguments,4):[],h=t.setInterval,p=t.clearInterval,g=0,m=y(c)&&!c,v=(m?r:n).defer(),_=v.promise;return l=y(l)?l:0,_.$$intervalId=h(function(){m?i.defer(u):e.$evalAsync(u),v.notify(g++),l>0&&g>=l&&(v.resolve(g),p(_.$$intervalId),delete a[_.$$intervalId]),m||e.$apply()},s),a[_.$$intervalId]=v,_}var a={};return o.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].promise.catch(p),a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},o}]}function Wt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ne(t[n]);return t.join("/")}function Gt(e,t){var n=jn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||ko[n.protocol]||null}function Yt(e,t){if(So.test(e))throw Co("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=jn(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=ee(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Kt(e,t){return e.slice(0,t.length)===t}function Xt(e,t){if(Kt(t,e))return t.substr(e.length)}function Jt(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function Zt(e){return e.replace(/(#.+)|#$/,"$1")}function Qt(e){return e.substr(0,Jt(e).lastIndexOf("/")+1)}function en(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function tn(e,t,n){this.$$html5=!0,n=n||"",Gt(e,this),this.$$parse=function(e){var n=Xt(t,e);if(!x(n))throw Co("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Yt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),n=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Wt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return y(o=Xt(e,r))?(a=o,s=n&&y(o=Xt(n,o))?t+(Xt("/",o)||o):e+a):y(o=Xt(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function nn(e,t,n){Gt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Kt(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=Xt(e,r)||Xt(t,r);_(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",_(a)&&(e=r,this.replace())):(o=Xt(n,a),_(o)&&(o=a)),Yt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Wt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Jt(e)===Jt(t)&&(this.$$parse(t),!0)}}function rn(e,t,n){this.$$html5=!0,nn.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Jt(r)?o=r:(a=Xt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Wt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function on(e){return function(){return this[e]}}function an(e,t){return function(n){return _(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function sn(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return P(e)?(t.enabled=e,this):b(e)?(P(e.enabled)&&(t.enabled=e.enabled),P(e.requireBase)&&(t.requireBase=e.requireBase),(P(e.rewriteLinks)||x(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=c.url(),o=c.$$state;try{r.url(e,t,n),c.$$state=r.state()}catch(e){throw c.url(i),c.$$state=o,e}}function l(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,u,d,f=r.baseHref(),h=r.url();if(t.enabled){if(!f&&t.requireBase)throw Co("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=en(h)+(f||"/"),u=i.history?tn:rn}else d=Jt(h),u=nn;var p=Qt(d);c=new u(d,p,"#"+e),c.$$parseLinkUrl(h,h),c.$$state=r.state();var g=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=Zr(e.target);"a"!==j(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!x(i)||!_(s.attr(i))){var l=s.prop("href"),u=s.attr("href")||s.attr("xlink:href");b(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=jn(l.animVal).href),g.test(l)||!l||s.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(l,u)&&(e.preventDefault(),c.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Zt(c.absUrl())!==Zt(h)&&r.url(c.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){return Kt(e,p)?(n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;e=Zt(e),c.$$parse(e),c.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,c.absUrl()===e&&(r?(c.$$parse(i),c.$$state=o,s(i,!1,o)):(m=!1,l(i,o)))}),void(n.$$phase||n.$digest())):void(a.location.href=e)}),n.$watch(function(){var e=Zt(r.url()),t=Zt(c.absUrl()),o=r.state(),a=c.$$replace,u=e!==t||c.$$html5&&i.history&&o!==c.$$state;(m||u)&&(m=!1,n.$evalAsync(function(){var t=c.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,c.$$state,o).defaultPrevented;c.absUrl()===t&&(r?(c.$$parse(e),c.$$state=o):(u&&s(t,a,o===c.$$state?null:c.$$state),l(e,o)))})),c.$$replace=!1}),c}]}function ln(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||p,a=!1;try{a=!!o.apply}catch(e){}return a?function(){var e=[];return i(arguments,function(t){e.push(r(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){
e&&n.apply(t,arguments)}}()}}]}function cn(e){return e+""}function un(e,t){return"undefined"!=typeof e?e:t}function dn(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function fn(e,t){var n=e(t);return!n.$stateful}function hn(e,t){var n,r,o;switch(e.type){case Po.Program:n=!0,i(e.body,function(e){hn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Po.Literal:e.constant=!0,e.toWatch=[];break;case Po.UnaryExpression:hn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Po.BinaryExpression:hn(e.left,t),hn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Po.LogicalExpression:hn(e.left,t),hn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Po.ConditionalExpression:hn(e.test,t),hn(e.alternate,t),hn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Po.Identifier:e.constant=!1,e.toWatch=[e];break;case Po.MemberExpression:hn(e.object,t),e.computed&&hn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Po.CallExpression:o=!!e.filter&&fn(t,e.callee.name),n=o,r=[],i(e.arguments,function(e){hn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=o?r:[e];break;case Po.AssignmentExpression:hn(e.left,t),hn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Po.ArrayExpression:n=!0,r=[],i(e.elements,function(e){hn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case Po.ObjectExpression:n=!0,r=[],i(e.properties,function(e){hn(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||r.push.apply(r,e.value.toWatch)}),e.constant=n,e.toWatch=r;break;case Po.ThisExpression:e.constant=!1,e.toWatch=[];break;case Po.LocalsExpression:e.constant=!1,e.toWatch=[]}}function pn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function gn(e){return e.type===Po.Identifier||e.type===Po.MemberExpression}function mn(e){if(1===e.body.length&&gn(e.body[0].expression))return{type:Po.AssignmentExpression,left:e.body[0].expression,right:{type:Po.NGValueParameter},operator:"="}}function vn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Po.Literal||e.body[0].expression.type===Po.ArrayExpression||e.body[0].expression.type===Po.ObjectExpression)}function _n(e){return e.constant}function yn(e,t){this.astBuilder=e,this.$filter=t}function bn(e,t){this.astBuilder=e,this.$filter=t}function wn(e){return S(e.valueOf)?e.valueOf():To.call(e)}function xn(){var e,t,n=ve(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(o){function a(e,t){var r,i,a;switch(typeof e){case"string":if(e=e.trim(),a=e,r=n[a],!r){":"===e.charAt(0)&&":"===e.charAt(1)&&(i=!0,e=e.substring(2));var s=new Oo(g),h=new Ro(s,o,g);r=h.parse(e),r.constant?r.$$watchDelegate=d:i?r.$$watchDelegate=r.literal?u:c:r.inputs&&(r.$$watchDelegate=l),n[a]=r}return f(r,t);case"function":return f(e,t);default:return f(p,t)}}function s(e,t){return null==e||null==t?e===t:("object"!=typeof e||(e=wn(e),"object"!=typeof e))&&(e===t||e!==e&&t!==t)}function l(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var l=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,l)||(o=r(e,void 0,void 0,[t]),l=t&&wn(t)),o},t,n,i)}for(var c=[],u=[],d=0,f=a.length;d<f;d++)c[d]=s,u[d]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;n<i;n++){var l=a[n](e);(t||(t=!s(l,c[n])))&&(u[n]=l,c[n]=l&&wn(l))}return t&&(o=r(e,void 0,void 0,u)),o},t,n,i)}function c(e,t,n,r,i){function o(e){return r(e)}function a(e,n,r){c=e,S(t)&&t(e,n,r),y(e)&&r.$$postDigest(function(){y(c)&&s()})}var s,c;return s=r.inputs?l(e,a,n,r,i):e.$watch(o,a,n)}function u(e,t,n,r){function o(e){var t=!0;return i(e,function(e){y(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return r(e)},function(e,n,r){s=e,S(t)&&t(e,n,r),o(e)&&r.$$postDigest(function(){o(s)&&a()})},n)}function d(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function f(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==u&&n!==c,o=i?function(n,i,o,a){var s=r&&a?a[0]:e(n,i,o,a);return t(s,n,i)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return y(a)?s:a};return r=!e.inputs,e.$$watchDelegate&&e.$$watchDelegate!==l?(o.$$watchDelegate=e.$$watchDelegate,o.inputs=e.inputs):t.$stateful||(o.$$watchDelegate=l,o.inputs=e.inputs?e.inputs:[e]),o}var h=pi().noUnsafeEval,g={csp:h,literals:U(r),isIdentifierStart:S(e)&&e,isIdentifierContinue:S(t)&&t};return a}]}function kn(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Sn(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return y(t)?(e=t,this):e}}function Cn(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Sn(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return y(t)?(e=t,this):e}}function Sn(e,t,r){function o(){return new a}function a(){var e=this.promise=new s;this.resolve=function(t){f(e,t)},this.reject=function(t){p(e,t)},this.notify=function(t){m(e,t)}}function s(){this.$$state={status:0}}function l(t){var n,i,o;o=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var a=0,s=o.length;a<s;++a){t.pur=!0,i=o[a][0],n=o[a][t.status];try{S(n)?f(i,n(t.value)):1===t.status?f(i,t.value):p(i,t.value)}catch(e){p(i,e)}}}finally{--$,r&&0===$&&e(c)}}function c(){for(;!$&&T.length;){var e=T.shift();if(!e.pur){e.pur=!0;var n="Possibly unhandled rejection: "+xe(e.value);e.value instanceof Error?t(e.value,n):t(n)}}}function d(t){!r||t.pending||2!==t.status||t.pur||(0===$&&0===T.length&&e(c),T.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++$,e(function(){l(t)}))}function f(e,t){e.$$state.status||(t===e?g(e,E("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):h(e,t))}function h(e,t){function n(t){a||(a=!0,h(e,t))}function r(t){a||(a=!0,g(e,t))}function i(t){m(e,t)}var o,a=!1;try{(b(t)||S(t))&&(o=t.then),S(o)?(e.$$state.status=-1,o.call(t,n,r,i)):(e.$$state.value=t,e.$$state.status=1,d(e.$$state))}catch(e){r(e)}}function p(e,t){e.$$state.status||g(e,t)}function g(e,t){e.$$state.value=t,e.$$state.status=2,d(e.$$state)}function m(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&e(function(){for(var e,n,o=0,a=i.length;o<a;o++){n=i[o][0],e=i[o][3];try{m(n,S(e)?e(r):r)}catch(e){t(e)}}})}function v(e){var t=new s;return p(t,e),t}function y(e,t,n){var r=null;try{S(n)&&(r=n())}catch(e){return v(e)}return R(r)?r.then(function(){return t(e)},v):t(e)}function w(e,t,n,r){var i=new s;return f(i,e),i.then(t,n,r)}function x(e){var t=new s,n=0,r=ui(e)?[]:{};return i(e,function(e,i){n++,w(e).then(function(e){r[i]=e,--n||f(t,r)},function(e){p(t,e)})}),0===n&&f(t,r),t}function k(e){var t=o();return i(e,function(e){w(e).then(t.resolve,t.reject)}),t.promise}function C(e){function t(e){f(r,e)}function n(e){p(r,e)}if(!S(e))throw E("norslvr","Expected resolverFn, got '{0}'",e);var r=new s;return e(t,n),r}var E=n("$q",TypeError),$=0,T=[];u(s.prototype,{then:function(e,t,n){if(_(e)&&_(t)&&_(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&d(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return y(t,A,e)},function(t){return y(t,v,e)},t)}});var A=w;return C.prototype=s.prototype,C.defer=o,C.reject=v,C.when=w,C.resolve=A,C.all=x,C.race=k,C}function En(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function $n(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=s(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,o=n("$rootScope"),a=null,l=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(n,c,u){function d(e){e.currentScope.$$destroyed=!0}function f(e){9===Jr&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function h(){this.$id=s(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function g(e){if(C.$$phase)throw o("inprog","{0} already in progress",C.$$phase);C.$$phase=e}function m(){C.$$phase=null}function v(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function x(){for(;T.length;)try{T.shift()()}catch(e){n(e)}l=null}function k(){null===l&&(l=u.defer(function(){C.$apply(x)}))}h.prototype={constructor:h,$new:function(t,n){var r;return n=n||this,t?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=c(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,s=o.$$watchers,l={fn:t,last:w,get:i,exp:r||e,eq:!!n};return a=null,S(t)||(l.fn=p),s||(s=o.$$watchers=[],s.$$digestWatchIndex=-1),s.unshift(l),s.$$digestWatchIndex++,v(this,1),function(){var e=B(s,l);e>=0&&(v(o,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),a=null}},$watchGroup:function(e,t){function n(){l=!1,c?(c=!1,t(o,o,s)):t(o,r,s)}var r=new Array(e.length),o=new Array(e.length),a=[],s=this,l=!1,c=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(o,o,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,i){o[0]=e,r[0]=n,t(o,e===n?o:r,i)}):(i(e,function(e,t){var i=s.$watch(e,function(e,i){o[t]=e,r[t]=i,l||(l=!0,s.$evalAsync(n))});a.push(i)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,i,s,l;if(!_(o)){if(b(o))if(r(o)){a!==h&&(a=h,m=a.length=0,d++),t=o.length,m!==t&&(d++,a.length=m=t);for(var c=0;c<t;c++)l=a[c],s=o[c],i=l!==l&&s!==s,i||l===s||(d++,a[c]=s)}else{a!==p&&(a=p={},m=0,d++),t=0;for(n in o)Wr.call(o,n)&&(t++,s=o[n],l=a[n],n in a?(i=l!==l&&s!==s,i||l===s||(d++,a[n]=s)):(m++,a[n]=s,d++));if(m>t){d++;for(n in a)Wr.call(o,n)||(m--,delete a[n])}}else a!==o&&(a=o,d++);return d}}function i(){if(g?(g=!1,t(o,o,l)):t(o,s,l),u)if(b(o))if(r(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Wr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,l=this,u=t.length>1,d=0,f=c(e,n),h=[],p={},g=!0,m=0;return this.$watch(f,i)},$digest:function(){var e,r,i,s,c,d,f,h,p,v,_,y=t,b=this,k=[];g("$digest"),u.$$checkUrlChange(),this===C&&null!==l&&(u.defer.cancel(l),x()),a=null;do{f=!1,p=b;for(var T=0;T<E.length;T++){try{_=E[T],_.scope.$eval(_.expression,_.locals)}catch(e){n(e)}a=null}E.length=0;e:do{if(d=p.$$watchers)for(d.$$digestWatchIndex=d.length;d.$$digestWatchIndex--;)try{if(e=d[d.$$digestWatchIndex])if(c=e.get,(r=c(p))===(i=e.last)||(e.eq?z(r,i):ci(r)&&ci(i))){if(e===a){f=!1;break e}}else f=!0,a=e,e.last=e.eq?U(r,null):r,s=e.fn,s(r,i===w?r:i,p),y<5&&(v=4-y,k[v]||(k[v]=[]),k[v].push({msg:S(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:i}))}catch(e){n(e)}if(!(h=p.$$watchersCount&&p.$$childHead||p!==b&&p.$$nextSibling))for(;p!==b&&!(h=p.$$nextSibling);)p=p.$parent}while(p=h);if((f||E.length)&&!y--)throw m(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(f||E.length);for(m();A<$.length;)try{$[A++]()}catch(e){n(e)}$.length=A=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===C&&u.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){C.$$phase||E.length||u.defer(function(){E.length&&C.$digest()}),E.push({scope:this,expression:c(e),locals:t})},$$postDigest:function(e){$.push(e)},$apply:function(e){try{g("$apply");try{return this.$eval(e)}finally{m()}}catch(e){n(e)}finally{try{C.$digest()}catch(e){throw n(e),e}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&T.push(t),e=c(e),k()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,y(i,1,e))}},$emit:function(e,t){var r,i,o,a=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=q([c],arguments,1);do{for(r=s.$$listeners[e]||a,c.currentScope=s,i=0,o=r.length;i<o;i++)if(r[i])try{r[i].apply(null,u)}catch(e){n(e)}else r.splice(i,1),i--,o--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,l,c,u=q([a],arguments,1);i=o;){for(a.currentScope=i,s=i.$$listeners[e]||[],l=0,c=s.length;l<c;l++)if(s[l])try{s[l].apply(null,u)}catch(e){n(e)}else s.splice(l,1),l--,c--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var C=new h,E=C.$$asyncQueue=[],$=C.$$postDigestQueue=[],T=C.$$applyAsyncQueue=[],A=0;return C}]}function Tn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=jn(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function An(e){return e.replace(Lo,Ee)}function Dn(e){if("self"===e)return e;if(x(e)){if(e.indexOf("***")>-1)throw Io("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=hi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(E(e))return new RegExp("^"+e.source+"$");throw Io("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function On(e){var t=[];return y(e)&&i(e,function(e){t.push(Dn(e))}),t}function Pn(){this.SCE_CONTEXTS=Mo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=On(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=On(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Fn(t):!!e.exec(t.href)}function i(n){var i,o,a=jn(n.toString()),s=!1;for(i=0,o=e.length;i<o;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;i<o;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw Io("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||_(t)||""===t)return t;if("string"!=typeof t)throw Io("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof u?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||_(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Mo.RESOURCE_URL){if(i(t))return t;throw Io("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Mo.HTML)return c(t);throw Io("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(e){throw Io("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(c=n.get("$sanitize"));var u=o(),d={};return d[Mo.HTML]=o(u),d[Mo.CSS]=o(u),d[Mo.URL]=o(u),d[Mo.JS]=o(u),d[Mo.RESOURCE_URL]=o(d[Mo.URL]),{trustAs:a,getTrusted:l,valueOf:s}}]}function Rn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&Jr<8)throw Io("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=be(Mo);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=g),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var o=r.parseAs,a=r.getTrusted,s=r.trustAs;return i(Mo,function(e,t){var n=Gr(t);r[An("parse_as_"+n)]=function(t){return o(e,t)},r[An("get_trusted_"+n)]=function(t){return a(e,t)},r[An("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function In(){this.$get=["$window","$document",function(e,t){var n={},r=e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),i=!r&&e.history&&e.history.pushState,o=f((/android (\d+)/.exec(Gr((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},l=s.body&&s.body.style,c=!1,u=!1;return l&&(c=!!("transition"in l||"webkitTransition"in l),u=!!("animation"in l||"webkitAnimation"in l)),{history:!(!i||o<4||a),hasEvent:function(e){if("input"===e&&Jr)return!1;if(_(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:pi(),transitions:c,animations:u,android:o}}]}function Mn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,o){function a(s,l){function c(e){return l||(e=No("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}a.totalPendingRequests++,x(s)&&!_(n.get(s))||(s=o.getTrustedResourceUrl(s));var d=r.defaults&&r.defaults.transformResponse;return ui(d)?d=d.filter(function(e){return e!==It}):d===It&&(d=null),r.get(s,u({cache:n,transformResponse:d},e)).finally(function(){a.totalPendingRequests--}).then(function(e){return n.put(s,e.data),e.data},c)}return a.totalPendingRequests=0,a}]}function Ln(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),o=[];return i(r,function(e){var r=si.element(e).data("$binding");r&&i(r,function(r){if(n){var i=new RegExp("(^|\\s)"+hi(t)+"(\\s|\\||$)");i.test(r)&&o.push(e)}else r.indexOf(t)!==-1&&o.push(e)})}),o},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Nn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,l){S(o)||(l=s,s=o,o=p);var c,u=H(arguments,3),d=y(l)&&!l,f=(d?r:n).defer(),h=f.promise;return c=t.defer(function(){try{f.resolve(o.apply(null,u))}catch(e){f.reject(e),i(e)}finally{delete a[h.$$timeoutId]}d||e.$apply()},s),h.$$timeoutId=c,a[c]=f,h}var a={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].promise.catch(p),a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function jn(e){var t=e;return Jr&&(jo.setAttribute("href",t),t=jo.href),jo.setAttribute("href",t),{href:jo.href,protocol:jo.protocol?jo.protocol.replace(/:$/,""):"",host:jo.host,search:jo.search?jo.search.replace(/^\?/,""):"",hash:jo.hash?jo.hash.replace(/^#/,""):"",hostname:jo.hostname,port:jo.port,pathname:"/"===jo.pathname.charAt(0)?jo.pathname:"/"+jo.pathname}}function Fn(e){var t=x(e)?jn(e):e;return t.protocol===Fo.protocol&&t.host===Fo.host}function Bn(){this.$get=m(t)}function Un(e){function t(e){try{return e.cookie||""}catch(e){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,l,c,u=t(r);if(u!==o)for(o=u,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],l=a.indexOf("="),l>0&&(c=n(a.substring(0,l)),_(i[c])&&(i[c]=n(a.substring(l+1))));return i}}function zn(){this.$get=Un}function qn(e){function t(r,o){if(b(r)){var a={};return i(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Yn),t("date",cr),t("filter",Hn),t("json",ur),t("limitTo",dr),t("lowercase",Wo),t("number",Kn),t("orderBy",hr),t("uppercase",Go)}function Hn(){return function(e,t,i,o){if(!r(e)){if(null==e)return e;throw n("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s,l=Gn(t);switch(l){case"function":a=t;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Vn(t,i,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Vn(e,t,n,r){var i,o=b(e)&&n in e;return t===!0?t=z:S(t)||(t=function(e,t){return!_(e)&&(null===e||null===t?e===t:!(b(t)||b(e)&&!v(e))&&(e=Gr(""+e),t=Gr(""+t),e.indexOf(t)!==-1))}),i=function(i){return o&&!b(i)?Wn(i,e[n],t,n,!1):Wn(i,e,t,n,r)}}function Wn(e,t,n,r,i,o){var a=Gn(e),s=Gn(t);if("string"===s&&"!"===t.charAt(0))return!Wn(e,t.substring(1),n,r,i);if(ui(e))return e.some(function(e){return Wn(e,t,n,r,i)});switch(a){case"object":var l;if(i){for(l in e)if("$"!==l.charAt(0)&&Wn(e[l],t,n,r,!0))return!0;return!o&&Wn(e,t,n,r,!1)}if("object"===s){for(l in t){var c=t[l];if(!S(c)&&!_(c)){var u=l===r,d=u?e:e[l];if(!Wn(d,c,n,r,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Gn(e){return null===e?"null":typeof e}function Yn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return _(n)&&(n=t.CURRENCY_SYM),_(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Zn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Kn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Zn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Xn(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Uo))>-1&&(e=e.replace(Uo,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===zo;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===zo;)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=+e.charAt(r)}return n>Bo&&(t=t.splice(0,Bo-1),a=n-1,n=1),{d:t,e:a,i:n}}function Jn(e,t,n,r){var i=e.d,o=i.length-e.i;t=_(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var l=a;l<i.length;l++)i[l]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)}function Zn(e,t,n,r,i){if(!x(e)&&!k(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,l=Math.abs(e)+"",c="";if(a)c="â";else{o=Xn(l),Jn(o,i,t.minFrac,t.maxFrac);var u=o.d,d=o.i,f=o.e,h=[];for(s=u.reduce(function(e,t){return e&&!t},!0);d<0;)u.unshift(0),d++;d>0?h=u.splice(d,u.length):(h=u,u=[0]);var p=[];for(u.length>=t.lgSize&&p.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)p.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&p.unshift(u.join("")),c=p.join(n),h.length&&(c+=r+h.join("")),f&&(c+="e+"+f)}return e<0&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function Qn(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=zo+e;return n&&(e=e.substr(e.length-t)),i+e}function er(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&n===-12&&(a=12),Qn(a,t,r,i)}}function tr(e,t,n){return function(r,i){var o=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=Yr(a+e);return i[s][o]}}function nr(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Qn(Math[r>0?"floor":"ceil"](r/60),2)+Qn(Math.abs(r%60),2)}function rr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function ir(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function or(e){return function(t){var n=rr(t.getFullYear()),r=ir(t),i=+r-+n,o=1+Math.round(i/6048e5);return Qn(o,e)}}function ar(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function sr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function lr(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function cr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=f(t[9]+t[10]),o=f(t[9]+t[11])),a.call(r,f(t[1]),f(t[2])-1,f(t[3]));var l=f(t[4]||0)-i,c=f(t[5]||0)-o,u=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,c,u,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,o){var a,s,l="",c=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,x(n)&&(n=Vo.test(n)?f(n):t(n)),k(n)&&(n=new Date(n)),!C(n)||!isFinite(n.getTime()))return n;for(;r;)s=Ho.exec(r),s?(c=q(c,s,1),r=c.pop()):(c.push(r),r=null);var u=n.getTimezoneOffset();return o&&(u=K(o,u),n=J(n,o,!0)),i(c,function(t){a=qo[t],l+=a?a(n,e.DATETIME_FORMATS,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function ur(){return function(e,t){return _(t)&&(t=2),G(e,t)}}function dr(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):f(t),ci(t)?e:(k(e)&&(e=e.toString()),r(e)?(n=!n||isNaN(n)?0:f(n),n=n<0?Math.max(0,e.length+n):n,t>=0?fr(e,n,n+t):0===n?fr(e,t,e.length):fr(e,Math.max(0,n+t),n)):e)}}function fr(e,t,n){return x(e)?e.slice(t,n):ti.call(e,t,n)}function hr(e){function t(t){return t.map(function(t){var n=1,r=g;if(S(t))r=t;else if(x(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return S(e.valueOf)&&(e=e.valueOf(),i(e))?e:v(e)&&(e=e.toString(),i(e))?e:e}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(b(o)&&(o=e.index),b(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}return function(e,i,o,l){function c(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:d.map(function(n){return a(n.get(e),t)})}}function u(e,t){for(var n=0,r=d.length;n<r;n++){var i=h(e.predicateValues[n],t.predicateValues[n]);if(i)return i*d[n].descending*f}return h(e.tieBreaker,t.tieBreaker)*f}if(null==e)return e;if(!r(e))throw n("orderBy")("notarray","Expected array but received: {0}",e);ui(i)||(i=[i]),0===i.length&&(i=["+"]);var d=t(i),f=o?-1:1,h=S(l)?l:s,p=Array.prototype.map.call(e,c);return p.sort(u),e=p.map(function(e){return e.value})}}function pr(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function gr(e,t){e.$name=t}function mr(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Xo,this.$$element=e,this.$$animate=r,vr(this)}function vr(e){e.$$classCache={},e.$$classCache[Ia]=!(e.$$classCache[Ra]=e.$$element.hasClass(Ra))}function _r(e){function t(e,t,n,r){e[t]||(e[t]={}),a(e[t],n,r)}function n(e,t,n,r){e[t]&&s(e[t],n,r),yr(e[t])&&(e[t]=void 0)}function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+ue(t,"-"):"",r(e,Ra+t,n===!0),r(e,Ia+t,n===!1)}var o=e.clazz,a=e.set,s=e.unset;o.prototype.$setValidity=function(e,o,l){_(o)?t(this,"$pending",e,l):n(this,"$pending",e,l),P(o)?o?(s(this.$error,e,l),a(this.$$success,e,l)):(a(this.$error,e,l),s(this.$$success,e,l)):(s(this.$error,e,l),s(this.$$success,e,l)),this.$pending?(r(this,Jo,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,Jo,!1),this.$valid=yr(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var c;c=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null),i(this,e,c),this.$$parentForm.$setValidity(e,c,this)}}function yr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function br(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function wr(e,t,n,r,i,o){xr(e,t,n,r,i,o),br(r)}function xr(e,t,n,r,i,o){var a=Gr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,c()})}var l,c=function(e){if(l&&(o.defer.cancel(l),l=null),!s){var i=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=fi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var u=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||u(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),fa[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(da,function(e){if(!l){var t=this[Vr],n=t.badInput,r=t.typeMismatch;l=o.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||c(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function kr(e,t){if(C(e))return e;if(x(e)){la.lastIndex=0;var n=la.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,l=0,c=rr(r),u=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,c.getDate()+u,o,a,s,l)}}return NaN}function Cr(e,t){return function(n,r){var o,a;if(C(n))return n;if(x(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),na.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},i(o,function(e,n){
n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Sr(e,t,n,r){return function(i,o,a,s,l,c,u){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return y(e)&&!C(e)?n(e)||void 0:e}Er(i,o,a,s),xr(i,o,a,s,l,c);var h,p=s&&s.$options.getOption("timezone");if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,h);return p&&(r=J(r,p)),r}}),s.$formatters.push(function(e){if(e&&!C(e))throw Ua("datefmt","Expected `{0}` to be a date",e);return d(e)?(h=e,h&&p&&(h=J(h,p,!0)),u("date")(e,r,p)):(h=null,"")}),y(a.min)||a.ngMin){var g;s.$validators.min=function(e){return!d(e)||_(g)||n(e)>=g},a.$observe("min",function(e){g=f(e),s.$validate()})}if(y(a.max)||a.ngMax){var m;s.$validators.max=function(e){return!d(e)||_(m)||n(e)<=m},a.$observe("max",function(e){m=f(e),s.$validate()})}}}function Er(e,t,n,r){var i=t[0],o=r.$$hasNativeValidators=b(i.validity);o&&r.$parsers.push(function(e){var n=t.prop(Vr)||{};return n.badInput||n.typeMismatch?void 0:e})}function $r(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:oa.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!k(t))throw Ua("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function Tr(e){return y(e)&&!k(e)&&(e=parseFloat(e)),ci(e)?void 0:e}function Ar(e){return(0|e)===e}function Dr(e){var t=e.toString(),n=t.indexOf(".");if(n===-1){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Or(e,t,n){var r=Number(e);if(!Ar(r)||!Ar(t)||!Ar(n)){var i=Math.max(Dr(r),Dr(t),Dr(n)),o=Math.pow(10,i);r*=o,t*=o,n*=o}return(r-t)%n===0}function Pr(e,t,n,r,i,o){Er(e,t,n,r),$r(r),xr(e,t,n,r,i,o);var a,s;if((y(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||_(a)||e>=a},n.$observe("min",function(e){a=Tr(e),r.$validate()})),(y(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||_(s)||e<=s},n.$observe("max",function(e){s=Tr(e),r.$validate()})),y(n.step)||n.ngStep){var l;r.$validators.step=function(e,t){return r.$isEmpty(t)||_(l)||Or(t,a||0,l)},n.$observe("step",function(e){l=Tr(e),r.$validate()})}}function Rr(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(d=Tr(e),!ci(r.$modelValue))if(u){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()}function l(e){if(f=Tr(e),!ci(r.$modelValue))if(u){var n=t.val();f<n&&(t.val(f),n=f<d?d:f),r.$setViewValue(n)}else r.$validate()}function c(e){h=Tr(e),ci(r.$modelValue)||(u&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}Er(e,t,n,r),$r(r),xr(e,t,n,r,i,o);var u=r.$$hasNativeValidators&&"range"===t[0].type,d=u?0:void 0,f=u?100:void 0,h=u?1:void 0,p=t[0].validity,g=y(n.min),m=y(n.max),v=y(n.step),b=r.$render;r.$render=u&&y(p.rangeUnderflow)&&y(p.rangeOverflow)?function(){b(),r.$setViewValue(t.val())}:b,g&&(r.$validators.min=u?function(){return!0}:function(e,t){return r.$isEmpty(t)||_(d)||t>=d},a("min",s)),m&&(r.$validators.max=u?function(){return!0}:function(e,t){return r.$isEmpty(t)||_(f)||t<=f},a("max",l)),v&&(r.$validators.step=u?function(){return!p.stepMismatch}:function(e,t){return r.$isEmpty(t)||_(h)||Or(t,d||0,h)},a("step",c))}function Ir(e,t,n,r,i,o){xr(e,t,n,r,i,o),br(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||ra.test(n)}}function Mr(e,t,n,r,i,o){xr(e,t,n,r,i,o),br(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||ia.test(n)}}function Lr(e,t,n,r){var i=!n.ngTrim||"false"!==fi(n.ngTrim);_(n.name)&&t.attr("name",s());var o=function(e){var o;t[0].checked&&(o=n.value,i&&(o=fi(o)),r.$setViewValue(o,e&&e.type))};t.on("click",o),r.$render=function(){var e=n.value;i&&(e=fi(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Nr(e,t,n,r,i){var o;if(y(r)){if(o=e(r),!o.constant)throw Ua("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function jr(e,t,n,r,i,o,a,s){var l=Nr(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Nr(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return z(e,l)}),r.$parsers.push(function(e){return e?l:c})}function Fr(e,t){function n(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function r(e){return e&&e.split(" ")}function o(e){var t=e;return ui(e)?t=e.map(o).join(" "):b(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function a(e){var t=e;if(ui(e))t=e.map(a);else if(b(e)){var n=!1;t=Object.keys(e).filter(function(t){var r=e[t];return!n&&_(r)&&(n=!0),r}),n&&t.push(void 0)}return t}e="ngClass"+e;var s;return["$parse",function(l){return{restrict:"AC",link:function(c,u,d){function f(e){e=g(r(e),1),d.$addClass(e)}function h(e){e=g(r(e),-1),d.$removeClass(e)}function p(e,t){var i=r(e),o=r(t),a=n(i,o),s=n(o,i),l=g(a,-1),c=g(s,1);d.$addClass(c),d.$removeClass(l)}function g(e,t){var n=[];return i(e,function(e){(t>0||S[e])&&(S[e]=(S[e]||0)+t,S[e]===+(t>0)&&n.push(e))}),n.join(" ")}function m(e){e===t?f(y):h(y),E=e}function v(e){var t=o(e);t!==y&&_(t)}function _(e){E===t&&p(y,e),y=e}var y,b=d[e].trim(),w=":"===b.charAt(0)&&":"===b.charAt(1),x=w?a:o,k=l(b,x),C=w?v:_,S=u.data("$classCounts"),E=!0;S||(S=ve(),u.data("$classCounts",S)),"ngClass"!==e&&(s||(s=l("$index",function(e){return 1&e})),c.$watch(s,m)),c.$watch(k,C,w)}}}]}function Br(e,t,n,r,i,o,a,s,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Xo,this.$options=za,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,this.$$scope=e,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,vr(this),Ur(this)}function Ur(e){e.$$scope.$watch(function(){var t=e.$$ngModelGet(e.$$scope);if(t!==e.$modelValue&&(e.$modelValue===e.$modelValue||t===t)){e.$modelValue=e.$$rawModelValue=t,e.$$parserValid=void 0;for(var n=e.$formatters,r=n.length,i=t;r--;)i=n[r](i);e.$viewValue!==i&&(e.$$updateEmptyClasses(i),e.$viewValue=e.$$lastCommittedViewValue=i,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,p))}return t})}function zr(e){this.$$options=e}function qr(e,t){i(t,function(t,n){y(e[n])||(e[n]=t)})}var Hr=/^\/(.+)\/([a-z]*)$/,Vr="validity",Wr=Object.prototype.hasOwnProperty,Gr=function(e){return x(e)?e.toLowerCase():e},Yr=function(e){return x(e)?e.toUpperCase():e},Kr=function(e){return x(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Xr=function(e){return x(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(Gr=Kr,Yr=Xr);var Jr,Zr,Qr,ei,ti=[].slice,ni=[].splice,ri=[].push,ii=Object.prototype.toString,oi=Object.getPrototypeOf,ai=n("ng"),si=t.angular||(t.angular={}),li=0;Jr=t.document.documentMode;var ci=Number.isNaN||function(e){return e!==e};p.$inject=[],g.$inject=[];var ui=Array.isArray,di=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,fi=function(e){return x(e)?e.trim():e},hi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pi=function(){function e(){try{return new Function(""),!1}catch(e){return!0}}if(!y(pi.rules)){var n=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");pi.rules={noUnsafeEval:!r||r.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!r||r.indexOf("no-inline-style")!==-1}}else pi.rules={noUnsafeEval:e(),noInlineStyle:!1}}return pi.rules},gi=function(){if(y(gi.name_))return gi.name_;var e,n,r,i,o=vi.length;for(n=0;n<o;++n)if(r=vi[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return gi.name_=i},mi=/:/g,vi=["ng-","data-ng-","ng:","x-ng-"],_i=oe(t.document),yi=/[A-Z]/g,bi=!1,wi=1,xi=2,ki=3,Ci=8,Si=9,Ei=11,$i={full:"1.6.1",major:1,minor:6,dot:1,codeName:"promise-rectification"};Me.expando="ng339";var Ti=Me.cache={},Ai=1;Me._data=function(e){return this.cache[e[this.expando]]||{}};var Di=/-([a-z])/g,Oi=/^-ms-/,Pi={mouseleave:"mouseout",mouseenter:"mouseover"},Ri=n("jqLite"),Ii=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Mi=/<|&#?\w+;/,Li=/<([\w:-]+)/,Ni=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ji={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ji.optgroup=ji.option,ji.tbody=ji.tfoot=ji.colgroup=ji.caption=ji.thead,ji.th=ji.td;var Fi=t.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Bi=Me.prototype={ready:Je,toString:function(){var e=[];return i(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Zr(e>=0?this[e]:this[this.length+e])},length:0,push:ri,sort:[].sort,splice:[].splice},Ui={};i("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ui[Gr(e)]=e});var zi={};i("input,select,option,textarea,button,form,details".split(","),function(e){zi[e]=!0});var qi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};i({data:Ue,removeData:Fe,hasData:De,cleanData:Oe},function(e,t){Me[t]=e}),i({data:Ue,inheritedData:Ge,scope:function(e){return Zr.data(e,"$scope")||Ge(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Zr.data(e,"$isolateScope")||Zr.data(e,"$isolateScopeNoTemplate")},controller:We,injector:function(e){return Ge(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:ze,css:function(e,t,n){return t=Se(t),y(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r,i=e.nodeType;if(i!==ki&&i!==xi&&i!==Ci&&e.getAttribute){var o=Gr(t),a=Ui[o];return y(n)?void(null===n||n===!1&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)):(r=e.getAttribute(t),a&&null!==r&&(r=o),null===r?void 0:r)}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(_(t)){var n=e.nodeType;return n===wi||n===ki?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(_(t)){if(e.multiple&&"select"===j(e)){var n=[];return i(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){return _(t)?e.innerHTML:(Ne(e,!0),void(e.innerHTML=t))},empty:Ye},function(e,t){Me.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ye&&_(2===e.length&&e!==ze&&e!==We?t:n)){if(b(t)){for(r=0;r<o;r++)if(e===Ue)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=_(a)?Math.min(o,1):o,l=0;l<s;l++){var c=e(this[l],t,n);a=a?a+c:c}return a}for(r=0;r<o;r++)e(this[r],t,n);return this}}),i({removeData:Fe,on:function(e,t,n,r){if(y(r))throw Ri("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ae(e)){var i=Be(e,!0),o=i.events,a=i.handle;a||(a=i.handle=et(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,c=function(t,r,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,a)),s.push(n)};l--;)t=s[l],Pi[t]?(c(Pi[t],nt),c(t,void 0,!0)):c(t)}},off:je,one:function(e,t,n){e=Zr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Ne(e),i(new Me(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return i(e.childNodes,function(e){e.nodeType===wi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===wi||n===Ei){t=new Me(t);for(var r=0,i=t.length;r<i;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===wi){var n=e.firstChild;i(new Me(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Ie(e,Zr(t).eq(0).clone()[0])},remove:Ke,detach:function(e){Ke(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new Me(t);for(var i=0,o=t.length;i<o;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}}},addClass:He,removeClass:qe,toggleClass:function(e,t,n){t&&i(t.split(" "),function(t){var r=n;_(r)&&(r=!ze(e,t)),(r?He:qe)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ei?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Le,triggerHandler:function(e,t,n){var r,o,a,s=t.type||t,l=Be(e),c=l&&l.events,d=c&&c[s];d&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(r=u(r,t)),o=be(d),a=n?[r].concat(n):[r],i(o,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Me.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;o<a;o++)_(i)?(i=e(this[o],t,n,r),y(i)&&(i=Zr(i))):Ve(i,e(this[o],t,n,r));return y(i)?i:this}}),Me.prototype.bind=Me.prototype.on,Me.prototype.unbind=Me.prototype.off,ot.prototype={put:function(e,t){this[it(e,this.nextUid)]=t},get:function(e){return this[it(e,this.nextUid)]},remove:function(e){var t=this[e=it(e,this.nextUid)];return delete this[e],t}};var Hi=[function(){this.$get=[function(){return ot}]}],Vi=/^([^(]+?)=>/,Wi=/^[^(]*\(\s*([^)]*)\)/m,Gi=/,/,Yi=/^\s*(_?)(\S+?)\1\s*$/,Ki=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Xi=n("$injector");ut.$$annotate=ct;var Ji=n("$animate"),Zi=1,Qi="ng-animate",eo=function(){this.$get=p},to=function(){var e=new ot,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function o(e,t,n){var r=!1;return t&&(t=x(t)?t.split(" "):ui(t)?t:[],i(t,function(t){t&&(r=!0,e[t]=n)})),r}function a(){i(t,function(t){var n=e.get(t);if(n){var r=pt(t.attr("class")),o="",a="";i(n,function(e,t){var n=!!r[t];e!==n&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),i(t,function(e){o&&He(e,o),a&&qe(e,a)}),e.remove(t)}}),t.length=0}function s(n,i,s){var l=e.get(n)||{},c=o(l,i,!0),u=o(l,s,!1);(c||u)&&(e.put(n,l),t.push(n),1===t.length&&r.$$postDigest(a))}return{enabled:p,on:p,off:p,pin:p,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},no=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ji("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Qi+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Ji("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Qi)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=ht(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&Zr(r),i=i&&Zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",gt(o))},move:function(n,r,i,o){return r=r&&Zr(r),i=i&&Zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",gt(o))},leave:function(t,n){return e.push(t,"leave",gt(n),function(){t.remove()})},addClass:function(t,n,r){return r=gt(r),r.addClass=ft(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=gt(r),r.removeClass=ft(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=gt(i),i.addClass=ft(i.addClass,n),i.removeClass=ft(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=gt(o),o.from=o.from?u(o.from,n):n,o.to=o.to?u(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=ft(o.tempClasses,i),e.push(t,"animate",o)}}}]}],ro=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},io=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,o){function a(e){this.setHost(e);var t=n(),i=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){r()?i(e):t(e)},this._state=0}var s=0,l=1,c=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){o=o&&n,++r===e.length&&t(o)}var r=0,o=!0;i(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===c?e():this._doneCallbacks.push(e)},progress:p,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=l,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==c&&(i(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=c)}},a}]},oo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||l.complete(),s=!0}),l}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=U(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,l=new n;return{start:i,end:i}}}]},ao=n("$compile"),so=new bt;wt.$inject=["$provide","$$sanitizeUriProvider"],xt.prototype.isFirstChange=function(){return this.previousValue===so};var lo=/^((?:x|data)[:\-_])/i,co=/[:\-_]+(.)/g,uo=n("$controller"),fo=/^(\S+)(\s+as\s+([\w$]+))?$/,ho=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Zr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},po="application/json",go={"Content-Type":po+";charset=utf-8"},mo=/^\[|^\{(?!\{)/,vo={"[":/]$/,"{":/}$/},_o=/^\)]\}',?\n/,yo=n("$http"),bo=si.$interpolateMinErr=n("$interpolate");bo.throwNoconcat=function(e){throw bo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},bo.interr=function(e,t){return bo("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var wo=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(e){var i="_"+(n.$$counter++).toString(36),o="angular.callbacks."+i,a=t(i);return r[o]=n[i]=a,o},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},xo=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ko={http:80,https:443,ftp:21},Co=n("$location"),So=/^\s*[\\\/]{2,}/,Eo={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:on("$$absUrl"),url:function(e){if(_(e))return this.$$url;var t=xo.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:on("$$protocol"),host:on("$$host"),port:on("$$port"),path:an("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(x(e)||k(e))e=e.toString(),this.$$search=ee(e);else{if(!b(e))throw Co("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),i(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:_(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:an("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};i([rn,nn,tn],function(e){e.prototype=Object.create(Eo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==tn||!this.$$html5)throw Co("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=_(t)?null:t,this}});var $o=n("$parse"),To={}.constructor.prototype.valueOf,Ao=ve();i("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Ao[e]=!0});var Do={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Oo=function(e){this.options=e};Oo.prototype={constructor:Oo,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Ao[t],o=Ao[n],a=Ao[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw $o("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Gr(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Do[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Po=function(e,t){this.lexer=e,this.options=t};Po.Program="Program",Po.ExpressionStatement="ExpressionStatement",Po.AssignmentExpression="AssignmentExpression",Po.ConditionalExpression="ConditionalExpression",Po.LogicalExpression="LogicalExpression",Po.BinaryExpression="BinaryExpression",Po.UnaryExpression="UnaryExpression",Po.CallExpression="CallExpression",Po.MemberExpression="MemberExpression",Po.Identifier="Identifier",Po.Literal="Literal",Po.ArrayExpression="ArrayExpression",Po.Property="Property",Po.ObjectExpression="ObjectExpression",Po.ThisExpression="ThisExpression",Po.LocalsExpression="LocalsExpression",Po.NGValueParameter="NGValueParameter",Po.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Po.Program,body:e}},expressionStatement:function(){return{type:Po.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!gn(e))throw $o("lval","Trying to assign a value to a non l-value");e={type:Po.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Po.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Po.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Po.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Po.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Po.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Po.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Po.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Po.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Po.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Po.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Po.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Po.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Po.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Po.Identifier,name:e.text}},constant:function(){return{type:Po.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Po.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Po.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Po.ObjectExpression,properties:t}},throwError:function(e,t){throw $o("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw $o("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw $o("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Po.ThisExpression},$locals:{type:Po.LocalsExpression}}},yn.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},hn(n,t.$filter);var r,o="";if(this.stage="assign",r=mn(n)){this.state.computing="assign";var a=this.nextId();this.recurse(r,a),this.return_(a),o="fn.assign="+this.generateFunction("assign","s,v,l")}var s=pn(n.body);t.stage="inputs",i(s,function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push(r),
e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(n);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",c=new Function("$filter","getStringValue","ifDefined","plus",l)(this.$filter,cn,un,dn);return this.state=this.stage=void 0,c.literal=vn(n),c.constant=_n(n),c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return i(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return i(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,o,a){var s,l,c,u,d,f=this;if(r=r||p,!a&&y(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,o,!0));switch(e.type){case Po.Program:i(e.body,function(t,n){f.recurse(t.expression,void 0,void 0,function(e){l=e}),n!==e.body.length-1?f.current().body.push(l,";"):f.return_(l)});break;case Po.Literal:u=this.escape(e.value),this.assign(t,u),r(t||u);break;case Po.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){l=e}),u=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,u),r(u);break;case Po.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){l=e}),u="+"===e.operator?this.plus(s,l):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(l,0):"("+s+")"+e.operator+"("+l+")",this.assign(t,u),r(u);break;case Po.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),r(t);break;case Po.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),r(t);break;case Po.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_("inputs"===f.stage||"s",function(){o&&1!==o&&f.if_(f.isNull(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),r(t);break;case Po.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,s,void 0,function(){f.if_(f.notNull(s),function(){e.computed?(l=f.nextId(),f.recurse(e.property,l),f.getStringValue(l),o&&1!==o&&f.if_(f.not(f.computedMember(s,l)),f.lazyAssign(f.computedMember(s,l),"{}")),u=f.computedMember(s,l),f.assign(t,u),n&&(n.computed=!0,n.name=l)):(o&&1!==o&&f.if_(f.isNull(f.nonComputedMember(s,e.property.name)),f.lazyAssign(f.nonComputedMember(s,e.property.name),"{}")),u=f.nonComputedMember(s,e.property.name),f.assign(t,u),n&&(n.computed=!1,n.name=e.property.name))},function(){f.assign(t,"undefined")}),r(t)},!!o);break;case Po.CallExpression:t=t||this.nextId(),e.filter?(l=f.filter(e.callee.name),c=[],i(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),c.push(t)}),u=l+"("+c.join(",")+")",f.assign(t,u),r(t)):(l=f.nextId(),s={},c=[],f.recurse(e.callee,l,s,function(){f.if_(f.notNull(l),function(){i(e.arguments,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){c.push(e)})}),u=s.name?f.member(s.context,s.name,s.computed)+"("+c.join(",")+")":l+"("+c.join(",")+")",f.assign(t,u)},function(){f.assign(t,"undefined")}),r(t)}));break;case Po.AssignmentExpression:l=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){f.if_(f.notNull(s.context),function(){f.recurse(e.right,l),u=f.member(s.context,s.name,s.computed)+e.operator+l,f.assign(t,u),r(t||u)})},1);break;case Po.ArrayExpression:c=[],i(e.elements,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){c.push(e)})}),u="["+c.join(",")+"]",this.assign(t,u),r(t||u);break;case Po.ObjectExpression:c=[],d=!1,i(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),i(e.properties,function(e){e.computed?(s=f.nextId(),f.recurse(e.key,s)):s=e.key.type===Po.Identifier?e.key.name:""+e.key.value,l=f.nextId(),f.recurse(e.value,l),f.assign(f.member(t,s,e.computed),l)})):(i(e.properties,function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,function(e){c.push(f.escape(t.key.type===Po.Identifier?t.key.name:""+t.key.value)+":"+e)})}),u="{"+c.join(",")+"}",this.assign(t,u)),r(t||u);break;case Po.ThisExpression:this.assign(t,"s"),r(t||"s");break;case Po.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case Po.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(x(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(k(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw $o("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},bn.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);hn(n,t.$filter);var r,o;(r=mn(n))&&(o=this.recurse(r));var a,s=pn(n.body);s&&(a=[],i(s,function(e,n){var r=t.recurse(e);e.input=r,a.push(r),e.watchId=n}));var l=[];i(n.body,function(e){l.push(t.recurse(e.expression))});var c=0===n.body.length?p:1===n.body.length?l[0]:function(e,t){var n;return i(l,function(r){n=r(e,t)}),n};return o&&(c.assign=function(e,t,n){return o(e,n,t)}),a&&(c.inputs=a),c.literal=vn(n),c.constant=_n(n),c},recurse:function(e,t,n){var r,o,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Po.Literal:return this.value(e.value,t);case Po.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case Po.BinaryExpression:return r=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](r,o,t);case Po.LogicalExpression:return r=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](r,o,t);case Po.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Po.Identifier:return s.identifier(e.name,t,n);case Po.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(r,o,t,n):this.nonComputedMember(r,o,t,n);case Po.CallExpression:return a=[],i(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var s=[],l=0;l<a.length;++l)s.push(a[l](e,n,r,i));var c=o.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,r,i){var s,l=o(e,n,r,i);if(null!=l.value){for(var c=[],u=0;u<a.length;++u)c.push(a[u](e,n,r,i));s=l.value.apply(l.context,c)}return t?{value:s}:s};case Po.AssignmentExpression:return r=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,i,a){var s=r(e,n,i,a),l=o(e,n,i,a);return s.context[s.name]=l,t?{value:l}:l};case Po.ArrayExpression:return a=[],i(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case Po.ObjectExpression:return a=[],i(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===Po.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case Po.ThisExpression:return function(e){return t?{value:e}:e};case Po.LocalsExpression:return function(e,n){return t?{value:n}:n};case Po.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),l=t(r,i,o,a),c=dn(s,l);return n?{value:c}:c}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),l=t(r,i,o,a),c=(y(s)?s:0)-(y(l)?l:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var l=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,o,a){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var l=s?s[e]:void 0;return t?{context:s,name:e,value:l}:l}},computedMember:function(e,t,n,r){return function(i,o,a,s){var l,c,u=e(i,o,a,s);return null!=u&&(l=t(i,o,a,s),l=cn(l),r&&1!==r&&u&&!u[l]&&(u[l]={}),c=u[l]),n?{context:u,name:l,value:c}:c}},nonComputedMember:function(e,t,n,r){return function(i,o,a,s){var l=e(i,o,a,s);r&&1!==r&&l&&null==l[t]&&(l[t]={});var c=null!=l?l[t]:void 0;return n?{context:l,name:t,value:c}:c}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var Ro=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Po(e,n),this.astCompiler=n.csp?new bn(this.ast,t):new yn(this.ast,t)};Ro.prototype={constructor:Ro,parse:function(e){return this.astCompiler.compile(e)}};var Io=n("$sce"),Mo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Lo=/_([a-z])/g,No=n("$compile"),jo=t.document.createElement("a"),Fo=jn(t.location.href);Un.$inject=["$document"],qn.$inject=["$provide"];var Bo=22,Uo=".",zo="0";Yn.$inject=["$locale"],Kn.$inject=["$locale"];var qo={yyyy:er("FullYear",4,0,!1,!0),yy:er("FullYear",2,0,!0,!0),y:er("FullYear",1,0,!1,!0),MMMM:tr("Month"),MMM:tr("Month",!0),MM:er("Month",2,1),M:er("Month",1,1),LLLL:tr("Month",!1,!0),dd:er("Date",2),d:er("Date",1),HH:er("Hours",2),H:er("Hours",1),hh:er("Hours",2,-12),h:er("Hours",1,-12),mm:er("Minutes",2),m:er("Minutes",1),ss:er("Seconds",2),s:er("Seconds",1),sss:er("Milliseconds",3),EEEE:tr("Day"),EEE:tr("Day",!0),a:ar,Z:nr,ww:or(2),w:or(1),G:sr,GG:sr,GGG:sr,GGGG:lr},Ho=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Vo=/^-?\d+$/;cr.$inject=["$locale"];var Wo=m(Gr),Go=m(Yr);hr.$inject=["$parse"];var Yo=m({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===ii.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Ko={};i(Ui,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=kt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),Ko[r]=function(){return{restrict:"A",priority:100,link:i}}}}),i(qi,function(e,t){Ko[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Hr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),i(["src","srcset","href"],function(e){var t=kt("ng-"+e);Ko[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===ii.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Jr&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var Xo={$addControl:p,$$renameControl:gr,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Jo="ng-pending",Zo="ng-submitted";mr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],mr.prototype={$rollbackViewValue:function(){i(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){i(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){pe(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],i(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),i(this.$error,function(t,n){this.$setValidity(n,null,e)},this),i(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),B(this.$$controls,e),e.$$parentForm=Xo},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ma),this.$$animate.addClass(this.$$element,La),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ma,La+" "+Zo),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,i(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){i(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,Zo),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},_r({clazz:mr,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);i===-1&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(B(r,n),0===r.length&&delete e[t])}});var Qo=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||p}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:mr,compile:function(n,i){n.addClass(Ma).addClass(Ra);var o=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var l=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",l)},0,!1)})}var c=a[1]||s.$$parentForm;c.$addControl(s);var d=o?r(s.$name):p;o&&(d(e,s),i.$observe(o,function(t){s.$name!==t&&(d(e,void 0),s.$$parentForm.$$renameControl(s,t),(d=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),d(e,void 0),u(s,Xo)})}}}};return i}]},ea=Qo(),ta=Qo(!0),na=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ra=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,ia=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,oa=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,aa=/^(\d{4,})-(\d{2})-(\d{2})$/,sa=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,la=/^(\d{4,})-W(\d\d)$/,ca=/^(\d{4,})-(\d\d)$/,ua=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,da="keydown wheel mousedown",fa=ve();i("date,datetime-local,month,time,week".split(","),function(e){fa[e]=!0});var ha={text:wr,date:Sr("date",aa,Cr(aa,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Sr("datetimelocal",sa,Cr(sa,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Sr("time",ua,Cr(ua,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Sr("week",la,kr,"yyyy-Www"),month:Sr("month",ca,Cr(ca,["yyyy","MM"]),"yyyy-MM"),number:Pr,url:Ir,email:Mr,radio:Lr,range:Rr,checkbox:jr,hidden:p,button:p,submit:p,reset:p,file:p},pa=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ha[Gr(a.type)]||ha.text)(i,o,a,s[0],t,e,n,r)}}}}],ga=/^(true|false|\d+)$/,ma=function(){function e(e,t,n){e.prop("value",n),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return ga.test(n.ngValue)?function(t,n,r){var i=t.$eval(r.ngValue);e(n,r,i)}:function(t,n,r){t.$watch(r.ngValue,function(t){e(n,r,t)})}}}},va=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=_e(e)})}}}}],_a=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=_(e)?"":e})}}}}],ya=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){var n=o(t);r.html(e.getTrustedHtml(n)||"")})}}}}],ba=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),wa=Fr("",!0),xa=Fr("Odd",0),ka=Fr("Even",1),Ca=pr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Sa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ea={},$a={blur:!0,focus:!0};i("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=kt("ng-"+e);Ea[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};$a[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ta=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,l,c;n.$watch(i.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=me(s.clone),e.leave(c).done(function(e){e!==!1&&(c=null)}),s=null))})}}}],Aa=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:si.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,l,c,u){var d,f,h,p=0,g=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),h&&(n.leave(h).done(function(e){e!==!1&&(f=null)}),f=h,h=null)};r.$watch(o,function(o){var l=function(e){e===!1||!y(s)||s&&!r.$eval(s)||t()},f=++p;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&f===p){var t=r.$new();c.template=e;var s=u(t,function(e){g(),n.enter(e,null,i).done(l)});d=t,h=s,d.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===p&&(g(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(g(),c.template=null)})}}}}],Da=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return ii.call(r[0]).match(/SVG/)?(r.empty(),void e(Pe(o.template,t.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void e(r.contents())(n))}}}],Oa=pr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Pa=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var o=n.ngList||", ",a="false"!==n.ngTrim,s=a?fi(o):o,l=function(e){if(!_(e)){var t=[];return e&&i(e.split(s),function(e){e&&t.push(a?fi(e):e)}),t}};r.$parsers.push(l),r.$formatters.push(function(e){if(ui(e))return e.join(o)}),r.$isEmpty=function(e){return!e||!e.length}}}},Ra="ng-valid",Ia="ng-invalid",Ma="ng-pristine",La="ng-dirty",Na="ng-untouched",ja="ng-touched",Fa="ng-empty",Ba="ng-not-empty",Ua=n("ngModel");Br.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Br.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return S(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){S(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Ua("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Z(this.$$element))},$render:p,$isEmpty:function(e){return _(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,Ba),this.$$animate.addClass(this.$$element,Fa)):(this.$$animate.removeClass(this.$$element,Fa),this.$$animate.addClass(this.$$element,Ba))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,La),this.$$animate.addClass(this.$$element,Ma)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ma),this.$$animate.addClass(this.$$element,La),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Na,ja)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,ja,Na)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!ci(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){i||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function r(){var e=u.$$parserName||"parse";return _(u.$$parserValid)?(s(e,null),!0):(u.$$parserValid||(i(u.$validators,function(e,t){s(t,null)}),i(u.$asyncValidators,function(e,t){s(t,null)})),s(e,u.$$parserValid),u.$$parserValid)}function o(){var n=!0;return i(u.$validators,function(r,i){var o=Boolean(r(e,t));n=n&&o,s(i,o)}),!!n||(i(u.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],r=!0;i(u.$asyncValidators,function(i,o){var a=i(e,t);if(!R(a))throw Ua("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){r=!1,s(o,!1)}))}),n.length?u.$$q.all(n).then(function(){l(r)},p):l(!0)}function s(e,t){c===u.$$currentValidationRunId&&u.$setValidity(e,t)}function l(e){c===u.$$currentValidationRunId&&n(e)}this.$$currentValidationRunId++;var c=this.$$currentValidationRunId,u=this;return r()&&o()?void a():void l(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){r.$modelValue!==o&&r.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,n=t,r=this;if(this.$$parserValid=!_(n)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(n=this.$parsers[i](n),_(n)){this.$$parserValid=!1;break}ci(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var o=this.$modelValue,a=this.$options.getOption("allowInvalid");this.$$rawModelValue=n,a&&(this.$modelValue=n,e()),this.$$runValidators(n,this.$$lastCommittedViewValue,function(t){a||(r.$modelValue=t?n:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),i(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");k(t[e])?t=t[e]:k(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})}},_r({clazz:Br,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var za,qa=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Br,priority:1,compile:function(t){return t.addClass(Ma).addClass(Na).addClass(Ra),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){function o(){a.$setTouched()}var a=i[0];a.$options.getOption("updateOn")&&n.on(a.$options.getOption("updateOn"),function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))})}}}}}],Ha=/(\s+|^)default(\s+|$)/;zr.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=u({},e),i(e,function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=fi(n.replace(Ha,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],qr(e,this.$$options)),qr(e,za.$$options),new zr(e)}},za=new zr({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Va=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:za,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},Wa=pr({terminal:!0,priority:1e3}),Ga=n("ngOptions"),Ya=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Ka=["$compile","$document","$parse",function(e,n,o){function a(e,t,n){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!c&&r(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(Ya);if(!s)throw Ga("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Z(t));var l=s[5]||s[7],c=s[6],u=/ as /.test(s[0])&&s[1],d=s[9],f=o(s[2]?s[1]:l),h=u&&o(u),p=h||f,g=d&&o(d),m=d?function(e,t){return g(n,t)}:function(e){return it(e)},v=function(e,t){return m(e,k(e,t))},_=o(s[2]||s[1]),y=o(s[3]||""),b=o(s[4]||""),w=o(s[8]),x={},k=c?function(e,t){return x[c]=t,x[l]=e,x}:function(e){return x[l]=e,x};return{trackBy:d,getTrackByValue:v,getWatchables:o(w,function(e){var t=[];e=e||[];for(var r=a(e),i=r.length,o=0;o<i;o++){var l=e===r?o:r[o],c=e[l],u=k(c,l),d=m(c,u);if(t.push(d),s[2]||s[1]){var f=_(n,u);t.push(f)}if(s[4]){var h=b(n,u);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},r=w(n)||[],o=a(r),s=o.length,l=0;l<s;l++){var c=r===o?l:o[l],u=r[c],f=k(u,c),h=p(n,f),g=m(h,f),x=_(n,f),C=y(n,f),S=b(n,f),E=new i(g,h,x,C,S);e.push(E),t[g]=E}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return d?U(e.viewValue):e.viewValue}}}}}function s(t,r,o,s){function u(e,t){var n=l.cloneNode(!1);t.appendChild(n),f(e,n)}function d(e){var t=k.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function h(){var e=k&&p.readValue();if(k)for(var t=k.items.length-1;t>=0;t--){var n=k.items[t];Ke(y(n.group)?n.element.parentNode:n.element)}k=C.getOptions();var i={};if(w&&r.prepend(p.emptyOption),k.items.forEach(function(e){var t;y(e.group)?(t=i[e.group],t||(t=c.cloneNode(!1),S.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),u(e,t)):u(e,S)}),r[0].appendChild(S),g.$render(),!g.$isEmpty(e)){var o=p.readValue(),a=C.trackBy||m;(a?z(e,o):e===o)||(g.$setViewValue(o),g.$render())}}for(var p=s[0],g=s[1],m=o.multiple,v=0,_=r.children(),b=_.length;v<b;v++)if(""===_[v].value){p.hasEmptyOption=!0,p.emptyOption=_.eq(v);break}var w=!!p.emptyOption,x=Zr(l.cloneNode(!1));x.val("?");var k,C=a(o.ngOptions,r,t),S=n[0].createDocumentFragment();p.generateUnknownOptionValue=function(e){return"?"},m?(p.writeValue=function(e){var t=e&&e.map(d)||[];k.items.forEach(function(e){e.element.selected&&!F(t,e)&&(e.element.selected=!1)})},p.readValue=function(){var e=r.val()||[],t=[];return i(e,function(e){var n=k.selectValueMap[e];n&&!n.disabled&&t.push(k.getViewValueFromOption(n))}),t},C.trackBy&&t.$watchCollection(function(){if(ui(g.$viewValue))return g.$viewValue.map(function(e){return C.getTrackByValue(e);
})},function(){g.$render()})):(p.writeValue=function(e){var t=k.selectValueMap[r.val()],n=k.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(p.removeUnknownOption(),p.unselectEmptyOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):w?p.selectEmptyOption():p.unknownOption.parent().length?p.updateUnknownOption(e):p.renderUnknownOption(e)},p.readValue=function(){var e=k.selectValueMap[r.val()];return e&&!e.disabled?(p.unselectEmptyOption(),p.removeUnknownOption(),k.getViewValueFromOption(e)):null},C.trackBy&&t.$watch(function(){return C.getTrackByValue(g.$viewValue)},function(){g.$render()})),w&&(p.emptyOption.remove(),e(p.emptyOption)(t),p.emptyOption[0].nodeType===Ci?(p.hasEmptyOption=!1,p.registerOption=function(e,t){""===t.val()&&(p.hasEmptyOption=!0,p.emptyOption=t,p.emptyOption.removeClass("ng-scope"),g.$render(),t.on("$destroy",function(){p.hasEmptyOption=!1,p.emptyOption=void 0}))}):p.emptyOption.removeClass("ng-scope")),r.empty(),h(),t.$watchCollection(C.getWatchables,h)}var l=t.document.createElement("option"),c=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=p},post:s}}}],Xa=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function c(e){s.text(e||"")}var u,d=l.count,f=l.$attr.when&&s.attr(l.$attr.when),h=l.offset||0,g=a.$eval(f)||{},m={},v=t.startSymbol(),y=t.endSymbol(),b=v+d+"-"+h+y,w=si.noop;i(l,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+Gr(n[2]);g[r]=s.attr(l.$attr[t])}}),i(g,function(e,n){m[n]=t(e.replace(r,b))}),a.$watch(d,function(t){var r=parseFloat(t),i=ci(r);if(i||r in g||(r=e.pluralCat(r-h)),!(r===u||i&&ci(u))){w();var o=m[r];_(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=p,c()):w=a.$watch(o,c),u=r}})}}}],Ja=["$parse","$animate","$compile",function(e,t,o){var a="$$NG_REMOVED",s=n("ngRepeat"),l=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},u=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(n,d){var f=d.ngRepeat,h=o.$$createComment("end ngRepeat",f),p=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var g=p[1],m=p[2],v=p[3],_=p[4];if(p=g.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!p)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var y=p[3]||p[1],b=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var w,x,k,C,S={$id:it};return _?w=e(_):(k=function(e,t){return it(t)},C=function(e){return e}),function(e,n,o,d,p){w&&(x=function(t,n,r){return b&&(S[b]=t),S[y]=n,S.$index=r,w(e,S)});var g=ve();e.$watchCollection(m,function(o){var d,m,_,w,S,E,$,T,A,D,O,P,R=n[0],I=ve();if(v&&(e[v]=o),r(o))A=o,T=x||k;else{T=x||C,A=[];for(var M in o)Wr.call(o,M)&&"$"!==M.charAt(0)&&A.push(M)}for(w=A.length,O=new Array(w),d=0;d<w;d++)if(S=o===A?d:A[d],E=o[S],$=T(S,E,d),g[$])D=g[$],delete g[$],I[$]=D,O[d]=D;else{if(I[$])throw i(O,function(e){e&&e.scope&&(g[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,$,E);O[d]={id:$,scope:void 0,clone:void 0},I[$]=!0}for(var L in g){if(D=g[L],P=me(D.clone),t.leave(P),P[0].parentNode)for(d=0,m=P.length;d<m;d++)P[d][a]=!0;D.scope.$destroy()}for(d=0;d<w;d++)if(S=o===A?d:A[d],E=o[S],D=O[d],D.scope){_=R;do _=_.nextSibling;while(_&&_[a]);c(D)!==_&&t.move(me(D.clone),null,R),R=u(D),l(D.scope,d,y,E,b,S,w)}else p(function(e,n){D.scope=n;var r=h.cloneNode(!1);e[e.length++]=r,t.enter(e,null,R),R=r,D.clone=e,I[D.id]=D,l(D.scope,d,y,E,b,S,w)});g=I})}}}}],Za="ng-hide",Qa="ng-hide-animate",es=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,Za,{tempClasses:Qa})})}}}],ts=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,Za,{tempClasses:Qa})})}}}],ns=pr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&i(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),rs=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,o,a){var s=o.ngSwitch||o.on,l=[],c=[],u=[],d=[],f=function(e,t){return function(n){n!==!1&&e.splice(t,1)}};n.$watch(s,function(n){for(var r,o;u.length;)e.cancel(u.pop());for(r=0,o=d.length;r<o;++r){var s=me(c[r].clone);d[r].$destroy();var h=u[r]=e.leave(s);h.done(f(u,r))}c.length=0,d.length=0,(l=a.cases["!"+n]||a.cases["?"])&&i(l,function(n){n.transclude(function(r,i){d.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};c.push(a),e.enter(r,o.parent(),o)})})})}}}],is=pr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,o){var a=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e});i(a,function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:o,element:t})})}}),os=pr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),as=n("ngTransclude"),ss=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,o){function a(e,n){e.length&&l(e)?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}function l(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==ki||r.nodeValue.trim())return!0}}if(!o)throw as("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var c=r.ngTransclude||r.ngTranscludeSlot;o(a,null,c),c&&!o.isSlotFilled(c)&&s()}}}}],ls=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],cs={$setViewValue:p,$render:p},us=["$element","$scope",function(e,n){function r(){l||(l=!0,n.$$postDigest(function(){l=!1,a.ngModelCtrl.$render()}))}function i(e){c||(c=!0,n.$$postDigest(function(){n.$$destroyed||(c=!1,a.ngModelCtrl.$setViewValue(a.readValue()),e&&a.ngModelCtrl.$render())}))}function o(e){e.prop("selected",!0),e.attr("selected",!0)}var a=this,s=new ot;a.selectValueMap={},a.ngModelCtrl=cs,a.multiple=!1,a.unknownOption=Zr(t.document.createElement("option")),a.hasEmptyOption=!1,a.emptyOption=void 0,a.renderUnknownOption=function(t){var n=a.generateUnknownOptionValue(t);a.unknownOption.val(n),e.prepend(a.unknownOption),o(a.unknownOption),e.val(n)},a.updateUnknownOption=function(t){var n=a.generateUnknownOptionValue(t);a.unknownOption.val(n),o(a.unknownOption),e.val(n)},a.generateUnknownOptionValue=function(e){return"? "+it(e)+" ?"},a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.selectEmptyOption=function(){a.emptyOption&&(e.val(""),o(a.emptyOption))},a.unselectEmptyOption=function(){a.hasEmptyOption&&a.emptyOption.removeAttr("selected")},n.$on("$destroy",function(){a.renderUnknownOption=p}),a.readValue=function(){var t=e.val(),n=t in a.selectValueMap?a.selectValueMap[t]:t;return a.hasOption(n)?n:null},a.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&n.removeAttribute("selected"),a.hasOption(t)){a.removeUnknownOption();var r=it(t);e.val(r in a.selectValueMap?r:t);var i=e[0].options[e[0].selectedIndex];o(Zr(i))}else null==t&&a.emptyOption?(a.removeUnknownOption(),a.selectEmptyOption()):a.unknownOption.parent().length?a.updateUnknownOption(t):a.renderUnknownOption(t)},a.addOption=function(e,t){if(t[0].nodeType!==Ci){pe(e,'"option value"'),""===e&&(a.hasEmptyOption=!0,a.emptyOption=t);var n=s.get(e)||0;s.put(e,n+1),r()}},a.removeOption=function(e){var t=s.get(e);t&&(1===t?(s.remove(e),""===e&&(a.hasEmptyOption=!1,a.emptyOption=void 0)):s.put(e,t-1))},a.hasOption=function(e){return!!s.get(e)};var l=!1,c=!1;a.registerOption=function(e,t,n,r,o){if(n.$attr.ngValue){var s,l=NaN;n.$observe("value",function(e){var n,r=t.prop("selected");y(l)&&(a.removeOption(s),delete a.selectValueMap[l],n=!0),l=it(e),s=e,a.selectValueMap[l]=e,a.addOption(e,t),t.attr("value",l),n&&r&&i()})}else r?n.$observe("value",function(e){a.readValue();var n,r=t.prop("selected");y(s)&&(a.removeOption(s),n=!0),s=e,a.addOption(e,t),n&&r&&i()}):o?e.$watch(o,function(e,r){n.$set("value",e);var o=t.prop("selected");r!==e&&a.removeOption(r),a.addOption(e,t),r&&o&&i()}):a.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(a.multiple?i(!0):(a.ngModelCtrl.$setViewValue(null),a.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=a.readValue(),t=n.value;a.removeOption(t),a.ngModelCtrl.$render(),(a.multiple&&e&&e.indexOf(t)!==-1||e===t)&&i(!0)})}}],ds=function(){function e(e,t,n,r){var o=r[0],a=r[1];if(!a)return void(o.registerOption=p);if(o.ngModelCtrl=a,t.on("change",function(){o.removeUnknownOption(),e.$apply(function(){a.$setViewValue(o.readValue())})}),n.multiple){o.multiple=!0,o.readValue=function(){var e=[];return i(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in o.selectValueMap?o.selectValueMap[n]:n)}}),e},o.writeValue=function(e){var n=new ot(e);i(t.find("option"),function(e){e.selected=y(n.get(e.value))||y(n.get(o.selectValueMap[e.value]))})};var s,l=NaN;e.$watch(function(){l!==a.$viewValue||z(s,a.$viewValue)||(s=be(a.$viewValue),a.$render()),l=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:us,priority:1,link:{pre:e,post:t}}},fs=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return y(n.ngValue)||(y(n.value)?r=e(n.value,!0):(i=e(t.text(),!0),i||n.$set("value",t.text()))),function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],hs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},ps=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(x(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw n("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Z(t));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||_(o)||o.test(t)}}}}},gs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=f(e);i=ci(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},ms=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return t.angular.bootstrap?void t.console:(de(),ke(si),si.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),o=(e*i|0)%i;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),void Zr(function(){ae(t.document,se)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')}).call(t,n(1))},function(e,t,n){function r(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var i=n(27),o=n(3),a=t;a.define=function(e,t){return new r(e,t)},r.prototype._createNamed=function(e){var t;try{t=n(128).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return o(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},r.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i.decoders[e])),this.decoders[e]},r.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},r.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(i.encoders[e])),this.encoders[e]},r.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},function(e,t,n){function r(e,t){var n={};this._baseState=n,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var i=n(16).Reporter,o=n(16).EncoderBuffer,a=n(16).DecoderBuffer,s=n(19),l=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(l),u=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];e.exports=r;var d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];r.prototype.clone=function(){var e=this._baseState,t={};d.forEach(function(n){t[n]=e[n]});var n=new this.constructor(t.parent);return n._baseState=t,n},r.prototype._wrap=function(){var e=this._baseState;c.forEach(function(t){this[t]=function(){var n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},r.prototype._init=function(e){var t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),s.equal(t.children.length,1,"Root node can have only one child")},r.prototype._useArgs=function(e){var t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);var r=e[n];t[r]=n}),t}))},u.forEach(function(e){r.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),l.forEach(function(e){r.prototype[e]=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}}),r.prototype.use=function(e){s(e);var t=this._baseState;return s(null===t.use),t.use=e,this},r.prototype.optional=function(){var e=this._baseState;return e.optional=!0,this},r.prototype.def=function(e){var t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},r.prototype.explicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},r.prototype.implicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},r.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},r.prototype.key=function(e){var t=this._baseState;return s(null===t.key),t.key=e,this},r.prototype.any=function(){var e=this._baseState;return e.any=!0,this},r.prototype.choice=function(e){var t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},r.prototype.contains=function(e){var t=this._baseState;return s(null===t.use),t.contains=e,this},r.prototype._decode=function(e,t){var n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var r=n.default,i=!0,o=null;if(null!==n.key&&(o=e.enterKey(n.key)),n.optional){var s=null;if(null!==n.explicit?s=n.explicit:null!==n.implicit?s=n.implicit:null!==n.tag&&(s=n.tag),null!==s||n.any){if(i=this._peekTag(e,s,n.any),e.isError(i))return i}else{var l=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),i=!0}catch(e){i=!1}e.restore(l)}}var c;if(n.obj&&i&&(c=e.enterObject()),i){if(null!==n.explicit){var u=this._decodeTag(e,n.explicit);if(e.isError(u))return u;e=u}var d=e.offset;if(null===n.use&&null===n.choice){if(n.any)var l=e.save();var f=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(f))return f;n.any?r=e.raw(l):e=f}if(t&&t.track&&null!==n.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),r=n.any?r:null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),e.isError(r))return r;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var h=new a(r);r=this._getUse(n.contains,e._reporterState.obj)._decode(h,t)}}return n.obj&&i&&(r=e.leaveObject(c)),null===n.key||null===r&&i!==!0?null!==o&&e.exitKey(o):e.leaveKey(o,n.key,r),r},r.prototype._decodeGeneric=function(e,t,n){var r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},r.prototype._getUse=function(e,t){var n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},r.prototype._decodeChoice=function(e,t){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some(function(o){var a=e.save(),s=n.choice[o];try{var l=s._decode(e,t);if(e.isError(l))return!1;r={type:o,value:l},i=!0}catch(t){return e.restore(a),!1}return!0},this),i?r:e.error("Choice not matched")},r.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},r.prototype._encode=function(e,t,n){var r=this._baseState;if(null===r.default||r.default!==e){var i=this._encodeValue(e,t,n);if(void 0!==i&&!this._skipDefault(i,t,n))return i}},r.prototype._encodeValue=function(e,t,n){var r=this._baseState;if(null===r.parent)return r.children[0]._encode(e,t||new i);var o=null;if(this.reporter=t,r.optional&&void 0===e){if(null===r.default)return;e=r.default}var a=null,s=!1;if(r.any)o=this._createEncoderBuffer(e);else if(r.choice)o=this._encodeChoice(e,t);else if(r.contains)a=this._getUse(r.contains,n)._encode(e,t),s=!0;else if(r.children)a=r.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),i},this).filter(function(e){return e}),a=this._createEncoderBuffer(a);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return t.error("Too many args for : "+r.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(n){var r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)},l))}else null!==r.use?o=this._getUse(r.use,n)._encode(e,t):(a=this._encodePrimitive(r.tag,e),s=!0);var o;if(!r.any&&null===r.choice){var c=null!==r.implicit?r.implicit:r.tag,u=null===r.implicit?"universal":"context";null===c?null===r.use&&t.error("Tag could be ommited only for .use()"):null===r.use&&(o=this._encodeComposite(c,s,u,a))}return null!==r.explicit&&(o=this._encodeComposite(r.explicit,!1,"context",o)),o},r.prototype._encodeChoice=function(e,t){var n=this._baseState,r=n.choice[e.type];return r||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},r.prototype._encodePrimitive=function(e,t){var n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},r.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},r.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},function(e,t,n){function r(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}var o=n(3);t.Reporter=r,r.prototype.isError=function(e){return e instanceof i},r.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},r.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},r.prototype.enterKey=function(e){return this._reporterState.path.push(e)},r.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},r.prototype.leaveKey=function(e,t,n){var r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},r.prototype.leaveObject=function(e){var t=this._reporterState,n=t.obj;return t.obj=e,n},r.prototype.error=function(e){var t,n=this._reporterState,r=e instanceof i;if(t=r?e:new i(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},r.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,n){var r=n(44);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=r._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=r._reverse(t.tag)},function(e,t,n){var r=t;r.der=n(45),r.pem=n(89)},function(e,t,n){function r(e){a.call(this,e),this.enc="pem"}var i=n(3),o=n(0).Buffer,a=n(45);i(r,a),e.exports=r,r.prototype.decode=function(e,t){for(var n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,l=-1,c=0;c<n.length;c++){var u=n[c].match(i);if(null!==u&&u[2]===r){if(s!==-1){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;s=c}}if(s===-1||l===-1)throw new Error("PEM section not found for: "+r);var d=n.slice(s+1,l).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new o(d,"base64");return a.prototype.decode.call(this,f,t)}},function(e,t,n){var r=t;r.der=n(46),r.pem=n(91)},function(e,t,n){function r(e){o.call(this,e),this.enc="pem"}var i=n(3),o=n(46);i(r,o),e.exports=r,r.prototype.encode=function(e,t){for(var n=o.prototype.encode.call(this,e),r=n.toString("base64"),i=["-----BEGIN "+t.label+"-----"],a=0;a<r.length;a+=64)i.push(r.slice(a,a+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},function(e,t,n){var r;!function(i){"use strict";var o=i.HTMLCanvasElement&&i.HTMLCanvasElement.prototype,a=i.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),s=a&&i.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),l=i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(a||l)&&i.atob&&i.ArrayBuffer&&i.Uint8Array&&function(e){var t,n,r,i,o,u,d,f,h;if(t=e.match(c),!t)throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),r=!!t[4],i=e.slice(t[0].length),o=r?atob(i):decodeURIComponent(i),u=new ArrayBuffer(o.length),d=new Uint8Array(u),f=0;f<o.length;f+=1)d[f]=o.charCodeAt(f);return a?new Blob([s?d:u],{type:n}):(h=new l,h.append(u),h.getBlob(n))};i.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(e,t,n){e(n&&o.toDataURL&&u?u(this.toDataURL(t,n)):this.mozGetAsFile("blob",t))}:o.toDataURL&&u&&(o.toBlob=function(e,t,n){e(u(this.toDataURL(t,n)))})),r=function(){return u}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(window)},function(e,t,n){function r(e){this.rand=e}var i;if(e.exports=function(e){return i||(i=new r(null)),i.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)window.crypto&&window.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}:window.msCrypto&&window.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return window.msCrypto.getRandomValues(t),t}:r.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var o=n(130);r.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){r.prototype._rand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t}}},function(e,t,n){(function(e){function r(t,n,o){return this instanceof r?(c.call(this),this._cache=new i,this._last=void 0,this._cipher=new l.AES(n),this._prev=new e(o.length),o.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new r(t,n,o)}function i(){return this instanceof i?void(this.cache=new e("")):new i}function o(e){for(var t=e[15],n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function a(t,n,i){var o=d[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new e(i)),"string"==typeof n&&(n=new e(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new f(g[o.mode],n,i,!0):"auth"===o.type?new h(g[o.mode],n,i,!0):new r(g[o.mode],n,i)}function s(e,t){var n=d[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=p(t,!1,n.key,n.iv);return a(e,r.key,r.iv)}var l=n(28),c=n(12),u=n(3),d=n(29),f=n(55),h=n(48),p=n(31);u(r,c),r.prototype._update=function(t){this._cache.add(t);for(var n,r,i=[];n=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,n),i.push(r);return e.concat(i)},r.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},i.prototype.add=function(t){this.cache=e.concat([this.cache,t])},i.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},i.prototype.flush=function(){if(this.cache.length)return this.cache};var g={ECB:n(53),CBC:n(49),CFB:n(50),CFB8:n(52),CFB1:n(51),OFB:n(54),CTR:n(30),GCM:n(30)};t.createDecipher=s,t.createDecipheriv=a}).call(t,n(0).Buffer)},function(e,t,n){(function(e){function r(t,n,o){return this instanceof r?(l.call(this),this._cache=new i,this._cipher=new s.AES(n),this._prev=new e(o.length),o.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new r(t,n,o)}function i(){return this instanceof i?void(this.cache=new e("")):new i}function o(t,n,i){var o=u[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new e(i)),"string"==typeof n&&(n=new e(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new f(p[o.mode],n,i):"auth"===o.type?new h(p[o.mode],n,i):new r(p[o.mode],n,i)}function a(e,t){var n=u[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=d(t,!1,n.key,n.iv);return o(e,r.key,r.iv)}var s=n(28),l=n(12),c=n(3),u=n(29),d=n(31),f=n(55),h=n(48);c(r,l),r.prototype._update=function(t){this._cache.add(t);for(var n,r,i=[];n=this._cache.get();)r=this._mode.encrypt(this,n),i.push(r);return e.concat(i)},r.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if("10101010101010101010101010101010"!==e.toString("hex"))throw this._cipher.scrub(),
new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},i.prototype.add=function(t){this.cache=e.concat([this.cache,t])},i.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){for(var t=16-this.cache.length,n=new e(t),r=-1;++r<t;)n.writeUInt8(t,r);var i=e.concat([this.cache,n]);return i};var p={ECB:n(53),CBC:n(49),CFB:n(50),CFB8:n(52),CFB1:n(51),OFB:n(54),CTR:n(30),GCM:n(30)};t.createCipheriv=o,t.createCipher=a}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function n(e){this.h=e,this.state=new t(16),this.state.fill(0),this.cache=new t("")}function r(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function i(e){e=e.map(o);var n=new t(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n}function o(e){var t,n;return t=e>l||e<0?(n=Math.abs(e)%l,e<0?l-n:n):e}function a(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}var s=new t(16);s.fill(0),e.exports=n,n.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},n.prototype._multiply=function(){for(var e,t,n,o=r(this.h),s=[0,0,0,0],l=-1;++l<128;){for(t=0!==(this.state[~~(l/8)]&1<<7-l%8),t&&(s=a(s,o)),n=0!==(1&o[3]),e=3;e>0;e--)o[e]=o[e]>>>1|(1&o[e-1])<<31;o[0]=o[0]>>>1,n&&(o[0]=o[0]^225<<24)}this.state=i(s)},n.prototype.update=function(e){this.cache=t.concat([this.cache,e]);for(var n;this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},n.prototype.final=function(e,n){return this.cache.length&&this.ghash(t.concat([this.cache,s],16)),this.ghash(i([0,e,0,n])),this.state};var l=Math.pow(2,32)}).call(t,n(0).Buffer)},function(e,t,n){function r(e,t){var n,r;if(e=e.toLowerCase(),f[e])n=f[e].key,r=f[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");n=8*d[e].key,r=d[e].iv}var i=l(t,!1,n,r);return o(e,i.key,i.iv)}function i(e,t){var n,r;if(e=e.toLowerCase(),f[e])n=f[e].key,r=f[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");n=8*d[e].key,r=d[e].iv}var i=l(t,!1,n,r);return a(e,i.key,i.iv)}function o(e,t,n){if(e=e.toLowerCase(),f[e])return c.createCipheriv(e,t,n);if(d[e])return new u({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function a(e,t,n){if(e=e.toLowerCase(),f[e])return c.createDecipheriv(e,t,n);if(d[e])return new u({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}function s(){return Object.keys(d).concat(c.getCiphers())}var l=n(31),c=n(36),u=n(98),d=n(99),f=n(29);t.createCipher=t.Cipher=r,t.createCipheriv=t.Cipheriv=o,t.createDecipher=t.Decipher=i,t.createDecipheriv=t.Decipheriv=a,t.listCiphers=t.getCiphers=s},function(e,t,n){(function(t){function r(e){i.call(this);var n,r=e.mode.toLowerCase(),o=s[r];n=e.decrypt?"decrypt":"encrypt";var a=e.key;"des-ede"!==r&&"des-ede-cbc"!==r||(a=t.concat([a,a.slice(0,8)]));var l=e.iv;this._des=o.create({key:a,iv:l,type:n})}var i=n(12),o=n(39),a=n(3),s={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=r,a(r,i),r.prototype._update=function(e){return new t(this._des.update(e))},r.prototype._final=function(){return new t(this._des.final())}}).call(t,n(0).Buffer)},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,n){(function(t){function r(e){d.Writable.call(this);var t=h[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=l(t.hash),this._tag=t.id,this._signType=t.sign}function i(e){d.Writable.call(this);var t=h[e];if(!t)throw new Error("Unknown message digest");this._hash=l(t.hash),this._tag=t.id,this._signType=t.sign}function o(e){return new r(e)}function a(e){return new i(e)}var s=n(56),l=n(13),c=n(3),u=n(101),d=n(7),f=n(102),h={};Object.keys(s).forEach(function(e){h[e]=h[e.toLowerCase()]=s[e]}),c(r,d.Writable),r.prototype._write=function(e,t,n){this._hash.update(e),n()},r.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},r.prototype.sign=function(e,n){this.end();var r=this._hash.digest(),i=u(t.concat([this._tag,r]),e,this._hashType,this._signType);return n?i.toString(n):i},c(i,d.Writable),i.prototype._write=function(e,t,n){this._hash.update(e),n()},i.prototype.update=function(e,n){return"string"==typeof e&&(e=new t(e,n)),this._hash.update(e),this},i.prototype.verify=function(e,n,r){"string"==typeof n&&(n=new t(n,r)),this.end();var i=this._hash.digest();return f(n,t.concat([this._tag,i]),e,this._signType)},e.exports={Sign:o,Verify:a,createSign:o,createVerify:a}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,t,n,r){var a=m(t);if(a.curve){if("ecdsa"!==r)throw new Error("wrong private key type");return i(e,a)}if("dsa"===a.type){if("dsa"!==r)throw new Error("wrong private key type");return o(e,a,n)}if("rsa"!==r)throw new Error("wrong private key type");for(var s=a.modulus.byteLength(),l=[0,1];e.length+l.length+1<s;)l.push(255);l.push(0);for(var c=-1;++c<e.length;)l.push(e[c]);var u=h(l,a);return u}function i(e,n){var r=p[n.curve.join(".")];if(!r)throw new Error("unknown curve "+n.curve.join("."));var i=new _(r),o=i.genKeyPair();o._importPrivate(n.privateKey);var a=o.sign(e);return new t(a.toDER())}function o(e,t,n){for(var r,i=t.params.priv_key,o=t.params.p,c=t.params.q,f=t.params.g,h=new v(0),p=l(e,c).mod(c),g=!1,m=s(i,c,e,n);g===!1;)r=u(c,m,n),h=d(f,r,o,c),g=r.invm(c).imul(p.add(i.mul(h))).mod(c),g.cmpn(0)||(g=!1,h=new v(0));return a(h,g)}function a(e,n){e=e.toArray(),n=n.toArray(),128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n));var r=e.length+n.length+4,i=[48,r,2,e.length];return i=i.concat(e,[2,n.length],n),new t(i)}function s(e,n,r,i){if(e=new t(e.toArray()),e.length<n.byteLength()){var o=new t(n.byteLength()-e.length);o.fill(0),e=t.concat([o,e])}var a=r.length,s=c(r,n),l=new t(a);l.fill(1);var u=new t(a);return u.fill(0),u=f(i,u).update(l).update(new t([0])).update(e).update(s).digest(),l=f(i,u).update(l).digest(),u=f(i,u).update(l).update(new t([1])).update(e).update(s).digest(),l=f(i,u).update(l).digest(),{k:u,v:l}}function l(e,t){var n=new v(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function c(e,n){e=l(e,n),e=e.mod(n);var r=new t(e.toArray());if(r.length<n.byteLength()){var i=new t(n.byteLength()-r.length);i.fill(0),r=t.concat([i,r])}return r}function u(e,n,r){var i,o;do{for(i=new t("");8*i.length<e.bitLength();)n.v=f(r,n.k).update(n.v).digest(),i=t.concat([i,n.v]);o=l(i,e),n.k=f(r,n.k).update(n.v).update(new t([0])).digest(),n.v=f(r,n.k).update(n.v).digest()}while(o.cmp(e)!==-1);return o}function d(e,t,n,r){return e.toRed(v.mont(n)).redPow(t).fromRed().mod(r)}var f=n(38),h=n(37),p=n(57),g=n(4),m=n(32),v=n(4),_=g.ec;e.exports=r,e.exports.getKey=s,e.exports.makeKey=u}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n,r,a){var s=c(r);if("ec"===s.type){if("ecdsa"!==a)throw new Error("wrong public key type");return i(e,n,s)}if("dsa"===s.type){if("dsa"!==a)throw new Error("wrong public key type");return o(e,n,s)}if("rsa"!==a)throw new Error("wrong public key type");for(var l=s.modulus.byteLength(),d=[1],f=0;n.length+d.length+2<l;)d.push(255),f++;d.push(0);for(var h=-1;++h<n.length;)d.push(n[h]);d=new t(d);var p=u.mont(s.modulus);e=new u(e).toRed(p),e=e.redPow(new u(s.publicExponent)),e=new t(e.fromRed().toArray());var g=0;for(f<8&&(g=1),l=Math.min(e.length,d.length),e.length!==d.length&&(g=1),h=-1;++h<l;)g|=e[h]^d[h];return 0===g}function i(e,t,n){var r=s[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var i=new d(r),o=n.data.subjectPrivateKey.data;return i.verify(t,e,o)}function o(e,t,n){var r=n.data.p,i=n.data.q,o=n.data.g,s=n.data.pub_key,l=c.signature.decode(e,"der"),d=l.s,f=l.r;a(d,i),a(f,i);var h=u.mont(r),p=d.invm(i),g=o.toRed(h).redPow(new u(t).mul(p).mod(i)).fromRed().mul(s.toRed(h).redPow(f.mul(p).mod(i)).fromRed()).mod(r).mod(i);return!g.cmp(f)}function a(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var s=n(57),l=n(4),c=n(32),u=n(4),d=l.ec;e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e){this.curveType=s[e],this.curveType||(this.curveType={name:e}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function i(e,n,r){Array.isArray(e)||(e=e.toArray());var i=new t(e);if(r&&i.length<r){var o=new t(r-i.length);o.fill(0),i=t.concat([o,i])}return n?i.toString(n):i}var o=n(4),a=n(4);e.exports=function(e){return new r(e)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,r.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},r.prototype.computeSecret=function(e,n,r){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var o=this.curve.keyFromPublic(e).getPublic(),a=o.mul(this.keys.getPrivate()).getX();return i(a,r,this.curveType.byteLength)},r.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),i(n,e)},r.prototype.getPrivateKey=function(e){return i(this.keys.getPrivate(),e)},r.prototype.setPublicKey=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.keys._importPublic(e),this},r.prototype.setPrivateKey=function(e,n){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var r=new a(e);return r=r.toString(16),this.keys._importPrivate(r),this}}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(e){function n(t,n){if(t.length%o!==0){var r=t.length+(o-t.length%o);t=e.concat([t,a],r)}for(var i=[],s=n?t.readInt32BE:t.readInt32LE,l=0;l<t.length;l+=o)i.push(s.call(t,l));return i}function r(t,n,r){for(var i=new e(n),o=r?i.writeInt32BE:i.writeInt32LE,a=0;a<t.length;a++)o.call(i,t[a],4*a,!0);return i}function i(t,i,o,a){e.isBuffer(t)||(t=new e(t));var l=i(n(t,a),t.length*s);return r(l,o,a)}var o=4,a=new e(o);a.fill(0);var s=8;t.hash=i}).call(t,n(0).Buffer)},function(e,t,n){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(21),t.createHash=t.Hash=n(13),t.createHmac=t.Hmac=n(38);var r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(n(56)));t.getHashes=function(){return r};var i=n(63);t.pbkdf2=i.pbkdf2,t.pbkdf2Sync=i.pbkdf2Sync;var o=n(97);["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(e){t[e]=o[e]});var a=n(111);["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(e){t[e]=a[e]});var s=n(100);["createSign","Sign","createVerify","Verify"].forEach(function(e){t[e]=s[e]}),t.createECDH=n(103);var l=n(117);["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(e){t[e]=l[e]}),["createCredentials"].forEach(function(e){t[e]=function(){throw new Error(["sorry, "+e+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},function(e,t,n){"use strict";function r(e){o.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function i(e){function t(t){e.call(this,t),this._cbcInit()}a(t,e);for(var n=Object.keys(s),r=0;r<n.length;r++){var i=n[r];t.prototype[i]=s[i]}return t.create=function(e){return new t(e)},t}var o=n(19),a=n(3),s={};t.instantiate=i,s._cbcInit=function(){var e=new r(this.options.iv);this._cbcState=e},s._update=function(e,t,n,r){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,n,r);for(var s=0;s<this.blockSize;s++)a[s]=n[r+s]}else{o._update.call(this,e,t,n,r);for(var s=0;s<this.blockSize;s++)n[r+s]^=a[s];for(var s=0;s<this.blockSize;s++)a[s]=e[t+s]}}},function(e,t,n){"use strict";function r(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var i=n(19);e.exports=r,r.prototype._init=function(){},r.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},r.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},r.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},r.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},r.prototype.final=function(e){var t;e&&(t=this.update(e));var n;return n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},r.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},r.prototype._unpad=function(e){return e},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,n){"use strict";function r(){this.tmp=new Array(2),this.keys=null}function i(e){c.call(this,e);var t=new r;this._desState=t,this.deriveKeys(t,e.key)}var o=n(19),a=n(3),s=n(39),l=s.utils,c=s.Cipher;a(i,c),e.exports=i,i.create=function(e){return new i(e)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,t){e.keys=new Array(32),o.equal(t.length,this.blockSize,"Invalid key length");var n=l.readUInt32BE(t,0),r=l.readUInt32BE(t,4);l.pc1(n,r,e.tmp,0),n=e.tmp[0],r=e.tmp[1];for(var i=0;i<e.keys.length;i+=2){var a=u[i>>>1];n=l.r28shl(n,a),r=l.r28shl(r,a),l.pc2(n,r,e.keys,i)}},i.prototype._update=function(e,t,n,r){var i=this._desState,o=l.readUInt32BE(e,t),a=l.readUInt32BE(e,t+4);l.ip(o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,a,i.tmp,0):this._decrypt(i,o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],l.writeUInt32BE(n,o,r),l.writeUInt32BE(n,a,r+4)},i.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},i.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)o.equal(e[n],t);return e.slice(0,e.length-t)},i.prototype._encrypt=function(e,t,n,r,i){for(var o=t,a=n,s=0;s<e.keys.length;s+=2){var c=e.keys[s],u=e.keys[s+1];l.expand(a,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=l.substitute(c,u),f=l.permute(d),h=a;a=(o^f)>>>0,o=h}l.rip(a,o,r,i)},i.prototype._decrypt=function(e,t,n,r,i){for(var o=n,a=t,s=e.keys.length-2;s>=0;s-=2){var c=e.keys[s],u=e.keys[s+1];l.expand(o,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=l.substitute(c,u),f=l.permute(d),h=o;o=(a^f)>>>0,a=h}l.rip(o,a,r,i)}},function(e,t,n){"use strict";function r(e,t){o.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),r=t.slice(8,16),i=t.slice(16,24);"encrypt"===e?this.ciphers=[c.create({type:"encrypt",key:n}),c.create({type:"decrypt",key:r}),c.create({type:"encrypt",key:i})]:this.ciphers=[c.create({type:"decrypt",key:i}),c.create({type:"encrypt",key:r}),c.create({type:"decrypt",key:n})]}function i(e){l.call(this,e);var t=new r(this.type,this.options.key);this._edeState=t}var o=n(19),a=n(3),s=n(39),l=s.Cipher,c=s.DES;a(i,l),e.exports=i,i.create=function(e){return new i(e)},i.prototype._update=function(e,t,n,r){var i=this._edeState;i.ciphers[0]._update(e,t,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},i.prototype._pad=c.prototype._pad,i.prototype._unpad=c.prototype._unpad},function(e,t,n){"use strict";t.readUInt32BE=function(e,t){var n=e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t];return n>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,r){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1}for(var a=6;a>=0;a-=2){for(var s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(var s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}n[r+0]=i>>>0,n[r+1]=o>>>0},t.rip=function(e,t,n,r){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+a&1,i<<=1,i|=e>>>s+a&1;for(var a=4;a<8;a++)for(var s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},t.pc1=function(e,t,n,r){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1}for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(var a=1;a<=3;a++){for(var s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,i){for(var o=0,a=0,s=r.length>>>1,l=0;l<s;l++)o<<=1,o|=e>>>r[l]&1;for(var l=s;l<r.length;l++)a<<=1,a|=t>>>r[l]&1;n[i+0]=o>>>0,n[i+1]=a>>>0},t.expand=function(e,t,n){var r=0,i=0;r=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=e>>>o&63;for(var o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,r=0;r<4;r++){var o=e>>>18-6*r&63,a=i[64*r+o];n<<=4,n|=a}for(var r=0;r<4;r++){var o=t>>>18-6*r&63,a=i[256+64*r+o];n<<=4,n|=a}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<o.length;n++)t<<=1,t|=e>>>o[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var i=[],o=0;o<t;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}},function(e,t,n){(function(e){function r(t){var n=new e(a[t].prime,"hex"),r=new e(a[t].gen,"hex");return new s(n,r)}function i(t,n,r,a){return e.isBuffer(n)||void 0===l[n]?i(t,"binary",n,r):(n=n||"binary",a=a||"binary",r=r||new e([2]),e.isBuffer(r)||(r=new e(r,a)),"number"==typeof t?new s(o(t,r),r,!0):(e.isBuffer(t)||(t=new e(t,n)),new s(t,r,!0)))}var o=n(59),a=n(82),s=n(112),l={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=r,t.createDiffieHellman=t.DiffieHellman=i}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new l(e),this}function i(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new l(e),this}function o(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in _)return _[r];var i=0;if(e.isEven()||!m.simpleSieve||!m.fermatTest(e)||!u.test(e))return i+=1,i+="02"===n||"05"===n?8:4,_[r]=i,i;u.test(e.shrn(1))||(i+=2);var o;switch(n){case"02":e.mod(d).cmp(f)&&(i+=8);break;case"05":o=e.mod(h),o.cmp(p)&&o.cmp(g)&&(i+=8);break;default:i+=4}return _[r]=i,i}function a(e,t,n){this.setGenerator(t),this.__prime=new l(e),this._prime=l.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=r,this.setPrivateKey=i):this._primeCode=8}function s(e,n){var r=new t(e.toArray());return n?r.toString(n):r}var l=n(4),c=n(62),u=new c,d=new l(24),f=new l(11),h=new l(10),p=new l(3),g=new l(7),m=n(59),v=n(21);e.exports=a;var _={};Object.defineProperty(a.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=o(this.__prime,this.__gen)),this._primeCode}}),a.prototype.generateKeys=function(){return this._priv||(this._priv=new l(v(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(e){e=new l(e),e=e.toRed(this._prime);var n=e.redPow(this._priv).fromRed(),r=new t(n.toArray()),i=this.getPrime();if(r.length<i.length){var o=new t(i.length-r.length);o.fill(0),r=t.concat([o,r])}return r},a.prototype.getPublicKey=function(e){return s(this._pub,e)},a.prototype.getPrivateKey=function(e){return s(this._priv,e)},a.prototype.getPrime=function(e){return s(this.__prime,e)},a.prototype.getGenerator=function(e){return s(this._gen,e)},a.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new l(e),this}}).call(t,n(0).Buffer)},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(27),i=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=i;var o=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=o;var a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});t.PublicKey=a;var s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});t.PrivateKey=l;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=c;var u=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=u,t.DSAparam=r.define("DSAparam",function(){this.int()});var d=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=d;var f=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(e,t,n){(function(t){var r=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m,i=/^-----BEGIN (.*) KEY-----\r?\n/m,o=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m,a=n(31),s=n(36);e.exports=function(e,n){var l,c=e.toString(),u=c.match(r);if(u){var d="aes"+u[1],f=new t(u[2],"hex"),h=new t(u[3].replace(/\r?\n/g,""),"base64"),p=a(n,f.slice(0,8),parseInt(u[1],10)).key,g=[],m=s.createDecipheriv(d,p,f);g.push(m.update(h)),g.push(m.final()),l=t.concat(g)}else{var v=c.match(o);l=new t(v[2].replace(/\r?\n/g,""),"base64")}var _=c.match(i)[1]+" KEY";return{tag:_,data:l}}}).call(t,n(0).Buffer)},function(e,t){var n=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!==t)throw new TypeError("Bad key length")}},function(e,t,n){t.publicEncrypt=n(119),t.privateDecrypt=n(118),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},function(e,t,n){(function(t){function r(e,n){var r=(e.modulus,e.modulus.byteLength()),i=(n.length,d("sha1").update(new t("")).digest()),a=i.length;if(0!==n[0])throw new Error("decryption error");var c=n.slice(1,a+1),u=n.slice(a+1),f=l(c,s(u,a)),h=l(u,s(f,r-a-1));if(o(i,h.slice(0,a)))throw new Error("decryption error");for(var p=a;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}function i(e,t,n){for(var r=t.slice(0,2),i=2,o=0;0!==t[i++];)if(i>=t.length){o++;break}var a=t.slice(2,i-1);t.slice(i-1,i);if(("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++,a.length<8&&o++,o)throw new Error("decryption error");return t.slice(i)}function o(e,n){e=new t(e),n=new t(n);var r=0,i=e.length;e.length!==n.length&&(r++,i=Math.min(e.length,n.length));for(var o=-1;++o<i;)r+=e[o]^n[o];return r}var a=n(32),s=n(64),l=n(66),c=n(4),u=n(37),d=n(13),f=n(65);e.exports=function(e,n,o){var s;s=e.padding?e.padding:o?1:4;var l=a(e),d=l.modulus.byteLength();if(n.length>d||new c(n).cmp(l.modulus)>=0)throw new Error("decryption error");var h;h=o?f(new c(n),l):u(n,l);var p=new t(d-h.length);if(p.fill(0),h=t.concat([p,h],d),4===s)return r(l,h);if(1===s)return i(l,h,o);if(3===s)return h;throw new Error("unknown padding")}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(e,n){var r=e.modulus.byteLength(),i=n.length,o=l("sha1").update(new t("")).digest(),a=o.length,f=2*a;if(i>r-f-2)throw new Error("message too long");var h=new t(r-i-f-2);h.fill(0);var p=r-a-1,g=s(a),m=u(t.concat([o,h,new t([1]),n],p),c(g,p)),v=u(g,c(m,a));return new d(t.concat([new t([0]),v,m],r))}function i(e,n,r){var i=n.length,a=e.modulus.byteLength();if(i>a-11)throw new Error("message too long");var s;return r?(s=new t(a-i-3),s.fill(255)):s=o(a-i-3),new d(t.concat([new t([0,r?1:2]),s,new t([0]),n],a))}function o(e,n){for(var r,i=new t(e),o=0,a=s(2*e),l=0;o<e;)l===a.length&&(a=s(2*e),l=0),r=a[l++],r&&(i[o++]=r);return i}var a=n(32),s=n(21),l=n(13),c=n(64),u=n(66),d=n(4),f=n(65),h=n(37);e.exports=function(e,t,n){var o;o=e.padding?e.padding:n?1:4;var s,l=a(e);if(4===o)s=r(l,t);else if(1===o)s=i(l,t,n);else{if(3!==o)throw new Error("unknown padding");if(s=new d(t),s.cmp(l.modulus)>=0)throw new Error("data too long for modulus")}return n?h(s,l):f(s,l)}}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function n(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t}function r(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t}function i(e,t,n){for(var r=0;r<16;r++){var i=n+r,d=t[i];t[i]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}var _,y,b,w,x,k,C,S,E,$;k=_=e[0],C=y=e[1],S=b=e[2],E=w=e[3],$=x=e[4];var T;for(r=0;r<80;r+=1)T=_+t[n+f[r]]|0,T+=r<16?o(y,b,w)+m[0]:r<32?a(y,b,w)+m[1]:r<48?s(y,b,w)+m[2]:r<64?l(y,b,w)+m[3]:c(y,b,w)+m[4],T|=0,T=u(T,p[r]),T=T+x|0,_=x,x=w,w=u(b,10),b=y,y=T,T=k+t[n+h[r]]|0,T+=r<16?c(C,S,E)+v[0]:r<32?l(C,S,E)+v[1]:r<48?s(C,S,E)+v[2]:r<64?a(C,S,E)+v[3]:o(C,S,E)+v[4],T|=0,T=u(T,g[r]),T=T+$|0,k=$,$=E,E=u(S,10),S=C,C=T;T=e[1]+b+E|0,e[1]=e[2]+w+$|0,e[2]=e[3]+x+k|0,e[3]=e[4]+_+C|0,e[4]=e[0]+y+S|0,e[0]=T}function o(e,t,n){return e^t^n}function a(e,t,n){return e&t|~e&n}function s(e,t,n){return(e|~t)^n}function l(e,t,n){return e&n|t&~n}function c(e,t,n){return e^(t|~n)}function u(e,t){return e<<t|e>>>32-t}function d(e){var o=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var a=n(e),s=8*e.length,l=8*e.length;a[s>>>5]|=128<<24-s%32,a[(s+64>>>9<<4)+14]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);for(var c=0;c<a.length;c+=16)i(o,a,c);for(c=0;c<5;c++){var u=o[c];o[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var d=r(o);return new t(d)}/** @preserve
(c) 2012 by CÃ©dric Mesnil. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],v=[1352829926,1548603684,1836072691,2053994217,0];e.exports=d}).call(t,n(0).Buffer)},function(e,t,n){var t=e.exports=function(e){e=e.toLowerCase();var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n};t.sha=n(122),t.sha1=n(123),t.sha224=n(124),t.sha256=n(73),t.sha384=n(125),t.sha512=n(74)},function(e,t,n){(function(t){function r(){this.init(),this._w=u,l.call(this,64,56)}function i(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function a(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var s=n(3),l=n(15),c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);s(r,l),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,s=0|this._c,l=0|this._d,u=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var f=0;f<80;++f){var h=~~(f/20),p=i(n)+a(h,r,s,l)+u+t[f]+c[h]|0;u=l,l=s,s=o(r),r=n,n=p}this._a=n+this._a|0,this._b=r+this._b|0,this._c=s+this._c|0,this._d=l+this._d|0,this._e=u+this._e|0},r.prototype._hash=function(){var e=new t(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(){this.init(),this._w=d,c.call(this,64,56)}function i(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var l=n(3),c=n(15),u=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);l(r,c),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,l=0|this._c,c=0|this._d,d=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=i(t[f-3]^t[f-8]^t[f-14]^t[f-16]);for(var h=0;h<80;++h){var p=~~(h/20),g=o(n)+s(p,r,l,c)+d+t[h]+u[p]|0;d=c,c=l,l=a(r),r=n,n=g}this._a=n+this._a|0,this._b=r+this._b|0,this._c=l+this._c|0,this._d=c+this._d|0,this._e=d+this._e|0},r.prototype._hash=function(){var e=new t(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(){this.init(),this._w=s,a.call(this,64,56)}var i=n(3),o=n(73),a=n(15),s=new Array(64);i(r,o),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var e=new t(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){(function(t){function r(){this.init(),this._w=s,a.call(this,128,112)}var i=n(3),o=n(74),a=n(15),s=new Array(160);i(r,o),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function e(e,t,r){n.writeInt32BE(e,r),n.writeInt32BE(t,r+4)}var n=new t(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),n},e.exports=r}).call(t,n(0).Buffer)},function(e,t,n){var r,i;!function(n,o){r=[],i=function(){return n.SignaturePad=o()}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this,function(){/*!
 * Signature Pad v1.5.3
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2016 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width BÃ©zier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic BÃ©zier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a BÃ©zier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */
var e=function(e){"use strict";var t=function(e,t){var n=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onEnd=r.onEnd,this.onBegin=r.onBegin,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(1==e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeUpdate(t)},this._handleTouchEnd=function(e){var t=e.target===n._canvas;t&&(e.preventDefault(),n._strokeEnd(e))},this._handleMouseEvents(),this._handleTouchEvents()};t.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._reset()},t.prototype.toDataURL=function(e,t){var n=this._canvas;return n.toDataURL.apply(n,arguments)},t.prototype.fromDataURL=function(e){var t=this,n=new Image,r=window.devicePixelRatio||1,i=this._canvas.width/r,o=this._canvas.height/r;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,i,o)},this._isEmpty=!1},t.prototype._strokeUpdate=function(e){var t=this._createPoint(e);this._addPoint(t)},t.prototype._strokeBegin=function(e){this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},t.prototype._strokeDraw=function(e){var t=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},t.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];!t&&n&&this._strokeDraw(n),"function"==typeof this.onEnd&&this.onEnd(e)},t.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),e.addEventListener("mouseup",this._handleMouseUp)},t.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},t.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},t.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),e.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},t.prototype.isEmpty=function(){return this._isEmpty},t.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._isEmpty=!0,this._ctx.fillStyle=this.penColor},t.prototype._createPoint=function(e){var t=this._canvas.getBoundingClientRect();return new n(e.clientX-t.left,e.clientY-t.top)},t.prototype._addPoint=function(e){var t,n,i,o,a=this.points;a.push(e),a.length>2&&(3===a.length&&a.unshift(a[0]),o=this._calculateCurveControlPoints(a[0],a[1],a[2]),t=o.c2,o=this._calculateCurveControlPoints(a[1],a[2],a[3]),n=o.c1,i=new r(a[1],t,n,a[2]),this._addCurve(i),a.shift())},t.prototype._calculateCurveControlPoints=function(e,t,r){var i=e.x-t.x,o=e.y-t.y,a=t.x-r.x,s=t.y-r.y,l={x:(e.x+t.x)/2,y:(e.y+t.y)/2},c={x:(t.x+r.x)/2,y:(t.y+r.y)/2},u=Math.sqrt(i*i+o*o),d=Math.sqrt(a*a+s*s),f=l.x-c.x,h=l.y-c.y,p=d/(u+d),g={x:c.x+f*p,y:c.y+h*p},m=t.x-g.x,v=t.y-g.y;return{c1:new n(l.x+m,l.y+v),c2:new n(c.x+m,c.y+v)}},t.prototype._addCurve=function(e){var t,n,r=e.startPoint,i=e.endPoint;t=i.velocityFrom(r),t=this.velocityFilterWeight*t+(1-this.velocityFilterWeight)*this._lastVelocity,n=this._strokeWidth(t),this._drawCurve(e,this._lastWidth,n),this._lastVelocity=t,this._lastWidth=n},t.prototype._drawPoint=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},t.prototype._drawCurve=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p=this._ctx,g=n-t;for(r=Math.floor(e.length()),p.beginPath(),o=0;o<r;o++)a=o/r,s=a*a,l=s*a,c=1-a,u=c*c,d=u*c,f=d*e.startPoint.x,f+=3*u*a*e.control1.x,f+=3*c*s*e.control2.x,f+=l*e.endPoint.x,h=d*e.startPoint.y,h+=3*u*a*e.control1.y,h+=3*c*s*e.control2.y,h+=l*e.endPoint.y,i=t+l*g,this._drawPoint(f,h,i);p.closePath(),p.fill()},t.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};var n=function(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()};n.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},n.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};var r=function(e,t,n,r){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=r};return r.prototype.length=function(){var e,t,n,r,i,o,a,s,l=10,c=0;for(e=0;e<=l;e++)t=e/l,n=this._point(t,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(t,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),e>0&&(a=n-i,s=r-o,c+=Math.sqrt(a*a+s*s)),i=n,o=r;return c},r.prototype._point=function(e,t,n,r,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+i*e*e*e},t}(document);return e})},,function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(113),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var o=Object_keys(n),a=r.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||indexOf(o,t)===-1)&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t}},function(e,t){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(e,t){},function(e,t){},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t){ng.factory("GlobalPointerListener",["$rootScope",function(e){var t,n;return t=e.$new(!0),document.addEventListener("touchstart",function(e){return t.$broadcast("touch_start",e)}),n=function(e){return t.$on("touch_start",e)},{on_touch_start:n}}])},function(e,t){var n="/logout_dialog.html",r='<div class="logout-dialog">\n  <p>You have unsynced changes. Please wait while syncing...</p>\n  <p>Remaining changes: {{changes()}}<i class="fa fa-spin fa-refresh" /></p>\n  <div class="ngdialog-buttons">\n      <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="confirm()">Discard my changes and log out now!</button>\n      <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">Cancel</button>\n  </div>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},,function(e,t){},function(e,t){},,function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t,n){var r,i,r,o;(function(){e.exports=0;!function(n){var o,a,s="0.4.2",l="hasOwnProperty",c=/[\.\/]/,u=/\s*,\s*/,d="*",f=function(e,t){return e-t},h={n:{}},p=function(){for(var e=0,t=this.length;e<t;e++)if("undefined"!=typeof this[e])return this[e]},g=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},m=function(e,t){e=String(e);var n,r=a,i=Array.prototype.slice.call(arguments,2),s=m.listeners(e),l=0,c=[],u={},d=[],h=o;d.firstDefined=p,d.lastDefined=g,o=e,a=0;for(var v=0,_=s.length;v<_;v++)"zIndex"in s[v]&&(c.push(s[v].zIndex),s[v].zIndex<0&&(u[s[v].zIndex]=s[v]));for(c.sort(f);c[l]<0;)if(n=u[c[l++]],d.push(n.apply(t,i)),a)return a=r,d;for(v=0;v<_;v++)if(n=s[v],"zIndex"in n)if(n.zIndex==c[l]){if(d.push(n.apply(t,i)),a)break;do if(l++,n=u[c[l]],n&&d.push(n.apply(t,i)),a)break;while(n)}else u[n.zIndex]=n;else if(d.push(n.apply(t,i)),a)break;return a=r,o=h,d};m._events=h,m.listeners=function(e){var t,n,r,i,o,a,s,l,u=e.split(c),f=h,p=[f],g=[];for(i=0,o=u.length;i<o;i++){for(l=[],a=0,s=p.length;a<s;a++)for(f=p[a].n,n=[f[u[i]],f[d]],r=2;r--;)t=n[r],t&&(l.push(t),g=g.concat(t.f||[]));p=l}return g},m.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var n=e.split(u),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=e.split(c),i=h,o=0,a=r.length;o<a;o++)i=i.n,i=i.hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,a=i.f.length;o<a;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},m.f=function(e){var t=[].slice.call(arguments,1);return function(){m.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},m.stop=function(){a=1},m.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(o):o},m.nts=function(){return o.split(c)},m.off=m.unbind=function(e,t){if(!e)return void(m._events=h={n:{}});var n=e.split(u);if(n.length>1)for(var r=0,i=n.length;r<i;r++)m.off(n[r],t);else{n=e.split(c);var o,a,s,r,i,f,p,g=[h];for(r=0,i=n.length;r<i;r++)for(f=0;f<g.length;f+=s.length-2){if(s=[f,1],o=g[f].n,n[r]!=d)o[n[r]]&&s.push(o[n[r]]);else for(a in o)o[l](a)&&s.push(o[a]);g.splice.apply(g,s)}for(r=0,i=g.length;r<i;r++)for(o=g[r];o.n;){if(t){if(o.f){for(f=0,p=o.f.length;f<p;f++)if(o.f[f]==t){o.f.splice(f,1);break}!o.f.length&&delete o.f}for(a in o.n)if(o.n[l](a)&&o.n[a].f){var v=o.n[a].f;for(f=0,p=v.length;f<p;f++)if(v[f]==t){v.splice(f,1);break}!v.length&&delete o.n[a].f}}else{delete o.f;for(a in o.n)o.n[l](a)&&o.n[a].f&&delete o.n[a].f}o=o.n}}},m.once=function(e,t){var n=function(){return m.unbind(e,n),t.apply(this,arguments)};return m.on(e,n)},m.version=s,m.toString=function(){return"You are running Eve "+s},"undefined"!=typeof e&&e.exports?e.exports=m:(r=[],!(i=function(){return m}.apply(t,r)))}(this),function(n,a){r=[i],o=function(e){return a(n,e)}.apply(t,r),!(void 0!==o&&(e.exports=o))}(window||this,function(e,t){var n=function(t){var n={},r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},o=0,a="M"+(+new Date).toString(36),s=function(){return a+(o++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var n=t.s-e;t.b+=t.dur*n,t.B+=t.dur*n,t.s=e},u=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},d=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},f=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},h=function(){var e=this;e.pdif||(delete n[e.id],e.update(),e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,n[e.id]=e)},g=function(){var e,t=this;if(i(t.start)){e=[];for(var n=0,r=t.start.length;n<r;n++)e[n]=+t.start[n]+(t.end[n]-t.start[n])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(){var e=0;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],a=o.get();e++,o.s=(a-o.b)/(o.dur/o.spd),o.s>=1&&(delete n[i],o.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(o)),o.update()}e&&r(m)},v=function(e,t,i,o,a,l,_){var y={id:s(),start:e,end:t,b:i,s:0,dur:o-i,spd:1,get:a,set:l,easing:_||v.linear,status:c,speed:u,duration:d,stop:f,pause:h,resume:p,update:g};n[y.id]=y;var b,w=0;for(b in n)if(n.hasOwnProperty(b)&&(w++,2==w))break;return 1==w&&r(m),y};return v.time=l,v.getById=function(e){return n[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,n=Math.sqrt(.1734+t*t),r=n-t,i=Math.pow(Math.abs(r),1/3)*(r<0?-1:1),o=-n-t,a=Math.pow(Math.abs(o),1/3)*(o<0?-1:1),s=i+a+.5;return 3*(1-s)*s*s+s*s*s},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},v.bounce=function(e){var t,n=7.5625,r=2.75;return e<1/r?t=n*e*e:e<2/r?(e-=1.5/r,t=n*e*e+.75):e<2.5/r?(e-=2.25/r,t=n*e*e+.9375):(e-=2.625/r,t=n*e*e+.984375),t},e.mina=v,v}("undefined"==typeof t?function(){}:t),r=function(e){function n(e,t){if(e){if(e.nodeType)return x(e);if(i(e,"array")&&n.set)return n.set.apply(n,e);if(e instanceof _)return e;if(null==t)return e=C.doc.querySelector(String(e)),x(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new w(e,t)}function r(e,t){if(t){if("#text"==e&&(e=C.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=C.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=r(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(V,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(W,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var n in t)if(t[S](n)){var i=E(t[n]);i?"xlink:"==n.substring(0,6)?e.setAttributeNS(V,n.substring(6),i):"xml:"==n.substring(0,4)?e.setAttributeNS(W,n.substring(4),i):e.setAttribute(n,i):e.removeAttribute(n)}}else"text"in t&&(e.nodeValue=t.text)}else e=C.doc.createElementNS(W,e);return e}function i(e,t){return t=E.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||M.call(e).slice(8,-1).toLowerCase()==t)}function o(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[S](n)&&(t[n]=o(e[n]));return t}function a(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function s(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("â"),s=r.cache=r.cache||{},l=r.count=r.count||[];return s[S](o)?(a(l,o),n?n(s[o]):s[o]):(l.length>=1e3&&delete s[l.shift()],l.push(o),s[o]=e.apply(t,i),n?n(s[o]):s[o])}return r}function l(e,t,n,r,i,o){if(null==i){var a=e-n,s=t-r;return a||s?(180+180*A.atan2(-s,-a)/R+360)%360:0}return l(e,t,i,o)-l(n,r,i,o)}function c(e){return e%360*R/180}function u(e){return 180*e/R%360}function d(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,n,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==n&&1==r.length&&r.push(0,0),"scale"==n&&(r.length>2?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==n?t.push(["m",1,0,A.tan(c(r[0])),1,0,0]):"skewY"==n?t.push(["m",1,A.tan(c(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r)),e}),t}function f(e,t){var r=ee(e),i=new n.Matrix;if(r)for(var o=0,a=r.length;o<a;o++){var s,l,c,u,d,f=r[o],h=f.length,p=E(f[0]).toLowerCase(),g=f[0]!=p,m=g?i.invert():0;"t"==p&&2==h?i.translate(f[1],0):"t"==p&&3==h?g?(s=m.x(0,0),l=m.y(0,0),c=m.x(f[1],f[2]),u=m.y(f[1],f[2]),i.translate(c-s,u-l)):i.translate(f[1],f[2]):"r"==p?2==h?(d=d||t,i.rotate(f[1],d.x+d.width/2,d.y+d.height/2)):4==h&&(g?(c=m.x(f[2],f[3]),u=m.y(f[2],f[3]),i.rotate(f[1],c,u)):i.rotate(f[1],f[2],f[3])):"s"==p?2==h||3==h?(d=d||t,i.scale(f[1],f[h-1],d.x+d.width/2,d.y+d.height/2)):4==h?g?(c=m.x(f[2],f[3]),u=m.y(f[2],f[3]),i.scale(f[1],f[1],c,u)):i.scale(f[1],f[1],f[2],f[3]):5==h&&(g?(c=m.x(f[3],f[4]),u=m.y(f[3],f[4]),i.scale(f[1],f[2],c,u)):i.scale(f[1],f[2],f[3],f[4])):"m"==p&&7==h&&i.add(f[1],f[2],f[3],f[4],f[5],f[6])}return i}function h(e){var t=e.node.ownerSVGElement&&x(e.node.ownerSVGElement)||e.node.parentNode&&x(e.node.parentNode)||n.select("svg")||n(0,0),r=t.select("defs"),i=null!=r&&r.node;return i||(i=b("defs",t.node).node),i}function p(e){return e.node.ownerSVGElement&&x(e.node.ownerSVGElement)||n.select("svg")}function m(e,t,n){function i(e){if(null==e)return I;if(e==+e)return e;r(c,{width:e});try{return c.getBBox().width}catch(e){return 0}}function o(e){if(null==e)return I;if(e==+e)return e;r(c,{height:e});try{return c.getBBox().height}catch(e){return 0}}function a(r,i){null==t?l[r]=i(e.attr(r)||0):r==t&&(l=i(null==n?e.attr(r)||0:n))}var s=p(e).node,l={},c=s.querySelector(".svg---mgr");switch(c||(c=r("rect"),r(c,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),s.appendChild(c)),e.type){case"rect":a("rx",i),a("ry",o);case"image":a("width",i),a("height",o);case"text":a("x",i),a("y",o);break;case"circle":a("cx",i),a("cy",o),a("r",i);break;case"ellipse":a("cx",i),a("cy",o),a("rx",i),a("ry",o);break;case"line":a("x1",i),a("x2",i),a("y1",o),a("y2",o);break;case"marker":a("refX",i),a("markerWidth",i),a("refY",o),a("markerHeight",o);break;case"radialGradient":a("fx",i),a("fy",o);break;case"tspan":a("dx",i),a("dy",o);break;default:a(t,i)}return s.removeChild(c),l}function v(e){i(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,n=0,r=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){r.appendChild(e.node)}):r.appendChild(e[t].node);var o=r.childNodes;for(t=0;t<o.length;t++)this[n++]=x(o[t]);return this}function _(e){if(e.snap in G)return G[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new w(t)),this.type=e.tagName||e.nodeName;var n=this.id=H(this);if(this.anims={},this._={transform:[]},e.snap=n,G[n]=this,"g"==this.type&&(this.add=v),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in w.prototype)w.prototype[S](r)&&(this[r]=w.prototype[r])}function y(e){this.node=e}function b(e,t){var n=r(e);t.appendChild(n);var i=x(n);return i}function w(e,t){var n,i,o,a=w.prototype;if(e&&"svg"==e.tagName){if(e.snap in G)return G[e.snap];var s=e.ownerDocument;n=new _(e),i=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],i||(i=r("desc"),i.appendChild(s.createTextNode("Created with Snap")),n.node.appendChild(i)),o||(o=r("defs"),n.node.appendChild(o)),n.defs=o;for(var l in a)a[S](l)&&(n[l]=a[l]);n.paper=n.root=n}else n=b("svg",C.doc.body),r(n.node,{height:t,version:1.1,width:e,xmlns:W});return n}function x(e){return e?e instanceof _||e instanceof y?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new w(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new w(e.contentDocument.getElementsByTagName("svg")[0]):new _(e):e}function k(e,t){for(var n=0,r=e.length;n<r;n++){var i={type:e[n].type,attr:e[n].attr()},o=e[n].children();t.push(i),o.length&&k(o,i.childNodes=[])}}n.version="0.4.0",n.toString=function(){return"Snap v"+this.version},n._={};var C={win:e.window,doc:e.window.document};n._.glob=C;var S="hasOwnProperty",E=String,$=parseFloat,T=parseInt,A=Math,D=A.max,O=A.min,P=A.abs,R=(A.pow,A.PI),I=(A.round,""),M=Object.prototype.toString,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,N=(n._.separator=/[,\s]+/,/[\s]*,[\s]*/),j={hs:1,rg:1},F=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,B=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,U=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,z=0,q="S"+(+new Date).toString(36),H=function(e){return(e&&e.type?e.type:I)+q+(z++).toString(36)},V="http://www.w3.org/1999/xlink",W="http://www.w3.org/2000/svg",G={};n.url=function(e){return"url('#"+e+"')"};n._.$=r,n._.id=H,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==r?e:i)+""};return function(t,r){return E(t).replace(e,function(e,t){return n(e,t,r)})}}(),n._.clone=o,n._.cacher=s,n.rad=c,n.deg=u,n.sin=function(e){return A.sin(n.rad(e))},n.tan=function(e){return A.tan(n.rad(e))},n.cos=function(e){return A.cos(n.rad(e))},n.asin=function(e){return n.deg(A.asin(e))},n.acos=function(e){return n.deg(A.acos(e))},n.atan=function(e){return n.deg(A.atan(e))},n.atan2=function(e){return n.deg(A.atan2(e))},n.angle=l,n.len=function(e,t,r,i){return Math.sqrt(n.len2(e,t,r,i))},n.len2=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},n.closestPoint=function(e,t,n){function r(e){var r=e.x-t,i=e.y-n;return r*r+i*i}for(var i,o,a,s,l=e.node,c=l.getTotalLength(),u=c/l.pathSegList.numberOfItems*.125,d=1/0,f=0;f<=c;f+=u)(s=r(a=l.getPointAtLength(f)))<d&&(i=a,o=f,d=s);for(u*=.5;u>.5;){var h,p,g,m,v,_;(g=o-u)>=0&&(v=r(h=l.getPointAtLength(g)))<d?(i=h,o=g,d=v):(m=o+u)<=c&&(_=r(p=l.getPointAtLength(m)))<d?(i=p,o=m,d=_):u*=.5}return i={x:i.x,y:i.y,length:o,distance:Math.sqrt(d)}},n.is=i,n.snapTo=function(e,t,n){if(n=i(n,"finite")?n:10,i(e,"array")){for(var r=e.length;r--;)if(P(e[r]-t)<=n)return e[r]}else{e=+e;var o=t%e;if(o<n)return t-o;if(o>e-n)return t-o+e}return t},n.getRGB=s(function(e){if(!e||(e=E(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:J};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:J};if(!(j[S](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=Y(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:J};var t,r,o,a,s,l,c=e.match(L);return c?(c[2]&&(o=T(c[2].substring(5),16),r=T(c[2].substring(3,5),16),t=T(c[2].substring(1,3),16)),c[3]&&(o=T((s=c[3].charAt(3))+s,16),r=T((s=c[3].charAt(2))+s,16),t=T((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4].split(N),t=$(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=$(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),o=$(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(a=$(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),c[5]?(l=c[5].split(N),t=$(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=$(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=$(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"Â°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(a=$(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsb2rgb(t,r,o,a)):c[6]?(l=c[6].split(N),t=$(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=$(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=$(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"Â°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(a=$(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsl2rgb(t,r,o,a)):(t=O(A.round(t),255),r=O(A.round(r),255),o=O(A.round(o),255),a=O(D(a,0),1),c={r:t,g:r,b:o,toString:J},c.hex="#"+(16777216|o|r<<8|t<<16).toString(16).slice(1),c.opacity=i(a,"finite")?a:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:J}},n),n.hsb=s(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=s(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=s(function(e,t,n,r){if(i(r,"finite")){var o=A.round;return"rgba("+[o(e),o(t),o(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)});var Y=function(e){var t=C.doc.getElementsByTagName("head")[0]||C.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(Y=s(function(e){if("red"==e.toLowerCase())return n;t.style.color=n,t.style.color=e;var r=C.doc.defaultView.getComputedStyle(t,I).getPropertyValue("color");return r==n?null:r}))(e)},K=function(){return"hsb("+[this.h,this.s,this.b]+")"},X=function(){return"hsl("+[this.h,this.s,this.l]+")"},J=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Z=function(e,t,r){if(null==t&&i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&i(e,string)){var o=n.getRGB(e);e=o.r,t=o.g,r=o.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},Q=function(e,t,r,o){e=A.round(255*e),t=A.round(255*t),r=A.round(255*r);var a={r:e,g:t,b:r,opacity:i(o,"finite")?o:1,hex:n.rgb(e,t,r),toString:J};return i(o,"finite")&&(a.opacity=o),a};n.color=function(e){var t;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):i(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(i(e,"string")&&(e=n.getRGB(e)),i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=J,e},n.hsb2rgb=function(e,t,n,r){i(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),e*=360;var o,a,s,l,c;return e=e%360/60,c=n*t,l=c*(1-P(e%2-1)),o=a=s=n-c,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],Q(o,a,s,r)},n.hsl2rgb=function(e,t,n,r){i(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),e*=360;var o,a,s,l,c;return e=e%360/60,c=2*t*(n<.5?n:1-n),l=c*(1-P(e%2-1)),o=a=s=n-c/2,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],Q(o,a,s,r)},n.rgb2hsb=function(e,t,n){n=Z(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a;return o=D(e,t,n),a=o-O(e,t,n),r=0==a?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,i=0==a?0:a/o,{h:r,s:i,b:o,toString:K}},n.rgb2hsl=function(e,t,n){n=Z(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a,s,l;return a=D(e,t,n),s=O(e,t,n),l=a-s,r=0==l?null:a==e?(t-n)/l:a==t?(n-e)/l+2:(e-t)/l+4,r=(r+360)%6*60/360,o=(a+s)/2,i=0==l?0:o<.5?l/(2*o):l/(2-2*o),{h:r,s:i,l:o,toString:X}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return i(e,"array")&&i(e[0],"array")&&(o=n.path.clone(e)),o.length||E(e).replace(F,function(e,t,n){var i=[],a=t.toLowerCase();if(n.replace(U,function(e,t){t&&i.push(+t)}),"m"==a&&i.length>2&&(o.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&o.push([t,i[0]]),"r"==a)o.push([t].concat(i));else for(;i.length>=r[a]&&(o.push([t].concat(i.splice(0,r[a]))),r[a]););}),o.toString=n.path.toString,t.arr=n.path.clone(o),o};var ee=n.parseTransformString=function(e){if(!e)return null;var t=[];return i(e,"array")&&i(e[0],"array")&&(t=n.path.clone(e)),t.length||E(e).replace(B,function(e,n,r){var i=[];n.toLowerCase();r.replace(U,function(e,t){t&&i.push(+t)}),t.push([n].concat(i))}),t.toString=n.path.toString,t};n._.svgTransform2string=d,n._.rgTransform=/^[a-z][\s]*-?\.?\d/i,n._.transform2matrix=f,n._unit2px=m;C.doc.contains||C.doc.compareDocumentPosition?function(e,t){var n=9==e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e==r||!(!r||1!=r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=h,n._.getSomeSVG=p,n.select=function(e){return e=E(e).replace(/([^\\]):/g,"$1\\:"),x(C.doc.querySelector(e))},n.selectAll=function(e){for(var t=C.doc.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(x(t[i]));return r},setInterval(function(){for(var e in G)if(G[S](e)){var t=G[e],n=t.node;("svg"!=t.type&&!n.ownerSVGElement||"svg"==t.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete G[e]}},1e4),_.prototype.attr=function(e,n){var r=this,o=r.node;if(!e){if(1!=o.nodeType)return{text:o.nodeValue};for(var a=o.attributes,s={},l=0,c=a.length;l<c;l++)s[a[l].nodeName]=a[l].nodeValue;return s}if(i(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,r).firstDefined();var u={};u[e]=n,e=u}for(var d in e)e[S](d)&&t("snap.util.attr."+d,r,e[d]);return r},n.parse=function(e){var t=C.doc.createDocumentFragment(),n=!0,r=C.doc.createElement("div");if(e=E(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",n=!1),r.innerHTML=e,e=r.getElementsByTagName("svg")[0])if(n)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new y(t)},n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=C.doc.createDocumentFragment(),r=0,i=e.length;r<i;r++){var o=e[r];o.node&&o.node.nodeType&&t.appendChild(o.node),o.nodeType&&t.appendChild(o),"string"==typeof o&&t.appendChild(n.parse(o).node)}return new y(t)},n._.make=b,n._.wrap=x,w.prototype.el=function(e,t){var n=b(e,this.node);return t&&n.attr(t),n},_.prototype.children=function(){for(var e=[],t=this.node.childNodes,r=0,i=t.length;r<i;r++)e[r]=n(t[r]);return e},_.prototype.toJSON=function(){var e=[];return k([this],e),e[0]},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return te[S](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):r(this.node,e)});var te={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,
opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var n=t.nt(),i={};n=n.substring(n.lastIndexOf(".")+1),i[n]=e;var o=n.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),a=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});te[S](a)?this.node.style[o]=null==e?I:e:r(this.node,i)}),function(e){}(w.prototype),n.ajax=function(e,n,r,o){var a=new XMLHttpRequest,s=H();if(a){if(i(n,"function"))o=r,r=n,n=null;else if(i(n,"object")){var l=[];for(var c in n)n.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(n[c]));n=l.join("&")}return a.open(n?"POST":"GET",e,!0),n&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(t.once("snap.ajax."+s+".0",r),t.once("snap.ajax."+s+".200",r),t.once("snap.ajax."+s+".304",r)),a.onreadystatechange=function(){4==a.readyState&&t("snap.ajax."+s+"."+a.status,o,a)},4==a.readyState?a:(a.send(n),a)}},n.load=function(e,t,r){n.ajax(e,function(e){var i=n.parse(e.responseText);r?t.call(r,i):t(i)})};var ne=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,o=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,s=t.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-o,l=t.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-a;return{y:s,x:l}};return n.getElementByPoint=function(e,t){var n=this,r=(n.canvas,C.doc.elementFromPoint(e,t));if(C.win.opera&&"svg"==r.tagName){var i=ne(r),o=r.createSVGRect();o.x=e-i.x,o.y=t-i.y,o.width=o.height=1;var a=r.getIntersectionList(o,null);a.length&&(r=a[a.length-1])}return r?x(r):null},n.plugin=function(e){e(n,_,w,C,y)},C.win.Snap=n,n}(e||this);return r.plugin(function(r,i,o,a,s){function l(e,t){if(null==t){var n=!0;if(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform"),!t)return new r.Matrix;t=r._.svgTransform2string(t)}else t=r._.rgTransform.test(t)?p(t).replace(/\.{3}|\u2026/g,e._.transform||E):r._.svgTransform2string(t),h(t,"array")&&(t=r.path?r.path.toString.call(t):p(t)),e._.transform=t;var i=r._.transform2matrix(t,e.getBBox(1));return n?i:void(e.matrix=i)}function c(e){function t(e,t){var n=m(e.node,t);n=n&&n.match(o),n=n&&n[2],n&&"#"==n.charAt()&&(n=n.substring(1),n&&(s[n]=(s[n]||[]).concat(function(n){var r={};r[t]=URL(n),m(e.node,r)})))}function n(e){var t=m(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(s[t]=(s[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var r,i=e.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,a=[],s={},l=0,c=i.length;l<c;l++){r=i[l],t(r,"fill"),t(r,"stroke"),t(r,"filter"),t(r,"mask"),t(r,"clip-path"),n(r);var u=m(r.node,"id");u&&(m(r.node,{id:r.id}),a.push({old:u,id:r.id}))}for(l=0,c=a.length;l<c;l++){var d=s[a[l].old];if(d)for(var f=0,h=d.length;f<h;f++)d[f](a[l].id)}}function u(e,t,n){return function(r){var i=r.slice(e,t);return 1==i.length&&(i=i[0]),n?n(i):i}}function d(e){return function(){var t=e?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(e)for(var i=0,o=n.length;i<o;i++)t+=" "+n[i].name+'="'+n[i].value.replace(/"/g,'\\"')+'"';if(r.length){for(e&&(t+=">"),i=0,o=r.length;i<o;i++)3==r[i].nodeType?t+=r[i].nodeValue:1==r[i].nodeType&&(t+=b(r[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}var f=i.prototype,h=r.is,p=String,g=r._unit2px,m=r._.$,v=r._.make,_=r._.getSomeDefs,y="hasOwnProperty",b=r._.wrap;f.getBBox=function(e){if(!r.Matrix||!r.path)return this.node.getBBox();var t=this,n=new r.Matrix;if(t.removed)return r._.box();for(;"use"==t.type;)if(e||(n=n.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var i=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var o=t._,a=r.path.get[t.type]||r.path.get.deflt;try{return e?(o.bboxwt=a?r.path.getBBox(t.realPath=a(t)):r._.box(t.node.getBBox()),r._.box(o.bboxwt)):(t.realPath=a(t),t.matrix=t.transform().localMatrix,o.bbox=r.path.getBBox(r.path.map(t.realPath,n.add(t.matrix))),r._.box(o.bbox))}catch(e){return r._.box()}};var w=function(){return this.string};f.transform=function(e){var t=this._;if(null==e){for(var n,i=this,o=new r.Matrix(this.node.getCTM()),a=l(this),s=[a],c=new r.Matrix,u=a.toTransformString(),d=p(a)==p(this.matrix)?p(t.transform):u;"svg"!=i.type&&(i=i.parent());)s.push(l(i));for(n=s.length;n--;)c.add(s[n]);return{string:d,globalMatrix:o,totalMatrix:c,localMatrix:a,diffMatrix:o.clone().add(a.invert()),global:o.toTransformString(),total:c.toTransformString(),local:u,toString:w}}return e instanceof r.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):l(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?m(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?m(this.node,{patternTransform:this.matrix}):m(this.node,{transform:this.matrix})),this},f.parent=function(){return b(this.node.parentNode)},f.append=f.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=b(e),this.node.appendChild(e.node),e.paper=this.paper}return this},f.appendTo=function(e){return e&&(e=b(e),e.append(this)),this},f.prepend=function(e){if(e){if("set"==e.type){var t,n=this;return e.forEach(function(e){t?t.after(e):n.prepend(e),t=e}),this}e=b(e);var r=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},f.prependTo=function(e){return e=b(e),e.prepend(this),this},f.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var n=e.parent();t.node.parentNode.insertBefore(e.node,t.node),n&&n.add()}),this.parent().add(),this}e=b(e);var n=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),e.paper=this.paper,this},f.after=function(e){e=b(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},f.insertBefore=function(e){e=b(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},f.insertAfter=function(e){e=b(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},f.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},f.select=function(e){return e=p(e).replace(/([^\\]):/g,"$1\\:"),b(this.node.querySelector(e))},f.selectAll=function(e){for(var t=this.node.querySelectorAll(e),n=(r.set||Array)(),i=0;i<t.length;i++)n.push(b(t[i]));return n},f.asPX=function(e,t){return null==t&&(t=this.attr(e)),+g(this,e,t)},f.use=function(){var e,t=this.node.id;return t||(t=this.id,m(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?v(this.type,this.node.parentNode):v("use",this.node.parentNode),m(e.node,{"xlink:href":"#"+t}),e.original=this,e},f.clone=function(){var e=b(this.node.cloneNode(!0));return m(e.node,"id")&&m(e.node,{id:e.id}),c(e),e.insertAfter(this),e},f.toDefs=function(){var e=_(this);return e.appendChild(this.node),this},f.pattern=f.toPattern=function(e,t,n,r){var i=v("pattern",_(this));return null==e&&(e=this.getBBox()),h(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,e=e.x),m(i.node,{x:e,y:t,width:n,height:r,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,n,r].join(" ")}),i.node.appendChild(this.node),i},f.marker=function(e,t,n,r,i,o){var a=v("marker",_(this));return null==e&&(e=this.getBBox()),h(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,i=e.refX||e.cx,o=e.refY||e.cy,e=e.x),m(a.node,{viewBox:[e,t,n,r].join(" "),markerWidth:n,markerHeight:r,orient:"auto",refX:i||0,refY:o||0,id:a.id}),a.node.appendChild(this.node),a};var x=function(e,t,r,i){"function"!=typeof r||r.length||(i=r,r=n.linear),this.attr=e,this.dur=t,r&&(this.easing=r),i&&(this.callback=i)};r._.Animation=x,r.animation=function(e,t,n,r){return new x(e,t,n,r)},f.inAnim=function(){var e=this,t=[];for(var n in e.anims)e.anims[y](n)&&!function(e){t.push({anim:new x(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[n]);return t},r.animate=function(e,r,i,o,a,s){"function"!=typeof a||a.length||(s=a,a=n.linear);var l=n.time(),c=n(e,r,l,l+o,n.time,i,a);return s&&t.once("mina.finish."+c.id,s),c},f.stop=function(){for(var e=this.inAnim(),t=0,n=e.length;t<n;t++)e[t].stop();return this},f.animate=function(e,r,i,o){"function"!=typeof i||i.length||(o=i,i=n.linear),e instanceof x&&(o=e.callback,i=e.easing,r=i.dur,e=e.attr);var a,s,l,c,d=[],f=[],g={},m=this;for(var v in e)if(e[y](v)){m.equal?(c=m.equal(v,p(e[v])),a=c.from,s=c.to,l=c.f):(a=+m.attr(v),s=+e[v]);var _=h(a,"array")?a.length:1;g[v]=u(d.length,d.length+_,l),d=d.concat(a),f=f.concat(s)}var b=n.time(),w=n(d,f,b,b+r,n.time,function(e){var t={};for(var n in g)g[y](n)&&(t[n]=g[n](e));m.attr(t)},i);return m.anims[w.id]=w,w._attrs=e,w._callback=o,t("snap.animcreated."+m.id,w),t.once("mina.finish."+w.id,function(){delete m.anims[w.id],o&&o.call(m)}),t.once("mina.stop."+w.id,function(){delete m.anims[w.id]}),m};var k={};f.data=function(e,n){var i=k[this.id]=k[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(r.is(e,"object")){for(var o in e)e[y](o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=n,t("snap.data.set."+this.id,this,n,e),this},f.removeData=function(e){return null==e?k[this.id]={}:k[this.id]&&delete k[this.id][e],this},f.outerSVG=f.toString=d(1),f.innerSVG=d(),f.toDataURL=function(){if(e&&e.btoa){var t=this.getBBox(),n=r.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},s.prototype.select=f.select,s.prototype.selectAll=f.selectAll}),r.plugin(function(e,t,n,r,i){function o(e,t,n,r,i,o){return null==t&&"[object SVGMatrix]"==a.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var a=Object.prototype.toString,s=String,l=Math,c="";!function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=l.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,a){var s,l,c,u,d=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,a],[0,0,1]];for(e&&e instanceof o&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;s<3;s++)for(l=0;l<3;l++){for(u=0,c=0;c<3;c++)u+=f[s][c]*h[c][l];d[s][l]=u}return this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2],this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new o(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,r){return null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r),this},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+l.cos(t).toFixed(9),o=+l.sin(t).toFixed(9);return this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[s.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=l.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=l.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var o=-i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(l.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(l.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:c)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:c)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:c))}}(o.prototype),e.Matrix=o,e.matrix=function(e,t,n,r,i,a){return new o(e,t,n,r,i,a)}}),r.plugin(function(e,n,r,i,o){function a(r){return function(i){if(t.stop(),i instanceof o&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,h(this).appendChild(i),i=d(i)),i instanceof n)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||g(i.node,{id:i.id});var a=m(i.node.id)}else a=i.attr(r);else if(a=e.color(i),a.error){var s=e(h(this).ownerSVGElement).gradient(i);s?(s.node.id||g(s.node,{id:s.id}),a=m(s.node.id)):a=i}else a=v(a);var l={};l[r]=a,g(this.node,l),this.node.style[r]=y}}function s(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function l(e){for(var t=[],n=e.childNodes,r=0,i=n.length;r<i;r++){var o=n[r];3==o.nodeType&&t.push(o.nodeValue),"tspan"==o.tagName&&(1==o.childNodes.length&&3==o.firstChild.nodeType?t.push(o.firstChild.nodeValue):t.push(l(o)))}return t}function c(){return t.stop(),this.node.style.fontSize}var u=e._.make,d=e._.wrap,f=e.is,h=e._.getSomeDefs,p=/^url\(#?([^)]+)\)$/,g=e._.$,m=e.url,v=String,_=e._.separator,y="";t.on("snap.util.attr.mask",function(e){if(e instanceof n||e instanceof o){if(t.stop(),e instanceof o&&1==e.node.childNodes.length&&(e=e.node.firstChild,h(this).appendChild(e),e=d(e)),"mask"==e.type)var r=e;else r=u("mask",h(this)),r.node.appendChild(e.node);!r.node.id&&g(r.node,{id:r.id}),g(this.node,{mask:m(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof n||e instanceof o){if(t.stop(),"clipPath"==e.type)var r=e;else r=u("clipPath",h(this)),r.node.appendChild(e.node),!r.node.id&&g(r.node,{id:r.id});g(this.node,{"clip-path":m(r.node.id||r.id)})}}),t.on("snap.util.attr.fill",a("fill")),t.on("snap.util.attr.stroke",a("stroke"));var b=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=v(e);var t=e.match(b);if(!t)return null;var n=t[1],r=t[2],i=t[3];return r=r.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==r.length&&0==r[0]&&(r=[]),i=i.split("-"),i=i.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:n,params:r,stops:i}}),t.on("snap.util.attr.d",function(n){t.stop(),f(n,"array")&&f(n[0],"array")&&(n=e.path.toString.call(n)),n=v(n),n.match(/[ruo]/i)&&(n=e.path.toAbsolute(n)),g(this.node,{d:n})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=v(e);for(var n=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var n;n=f(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):f(e,"array")?e.join(" "):e,g(this.node,{viewBox:n}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),g(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,i,o;if(!e&&this.textPath){for(i=this.textPath;i.node.firstChild;)this.node.appendChild(i.node.firstChild);return i.remove(),void delete this.textPath}if(f(e,"string")){var a=h(this),s=d(a.parentNode).path(e);a.appendChild(s.node),r=s.id,s.attr({id:r})}else e=d(e),e instanceof n&&(r=e.attr("id"),r||(r=e.id,e.attr({id:r})));if(r)if(i=this.textPath,o=this.node,i)i.attr({"xlink:href":"#"+r});else{for(i=g("textPath",{"xlink:href":"#"+r});o.firstChild;)i.appendChild(o.firstChild);o.appendChild(i),this.textPath=d(i)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var n=this.node,r=function(e){var t=g("tspan");if(f(e,"array"))for(var n=0;n<e.length;n++)t.appendChild(r(e[n]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};n.firstChild;)n.removeChild(n.firstChild);for(var o=r(e);o.firstChild;)n.appendChild(o.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",s)(-1),t.on("snap.util.attr.font-size",s)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function n(n){return function(){t.stop();var r=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==r?r:e(i.doc.getElementById(r.match(p)[1]))}}function r(e){return function(n){t.stop();var r="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==n||!n)return void(this.node.style[r]="none");if("marker"==n.type){var i=n.node.id;return i||g(n.node,{id:n.id}),void(this.node.style[r]=m(i))}}}t.on("snap.util.getattr.marker-end",n("end"))(-1),t.on("snap.util.getattr.markerEnd",n("end"))(-1),t.on("snap.util.getattr.marker-start",n("start"))(-1),t.on("snap.util.getattr.markerStart",n("start"))(-1),t.on("snap.util.getattr.marker-mid",n("mid"))(-1),t.on("snap.util.getattr.markerMid",n("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){if("rect"==this.type&&g(this.node,"rx")==g(this.node,"ry"))return t.stop(),g(this.node,"rx")})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=l(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var n=g(this.node,"viewBox");return n?(n=n.split(_),e._.box(+n[0],+n[1],+n[2],+n[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=g(this.node,"points");return t.stop(),e?e.split(_):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=g(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",c)(-1),t.on("snap.util.getattr.font-size",c)(-1)}),r.plugin(function(e,t,n,r,i){var o=/\S+/g,a=String,s=t.prototype;s.addClass=function(e){var t,n,r,i,s=a(e||"").match(o)||[],l=this.node,c=l.className.baseVal,u=c.match(o)||[];if(s.length){for(t=0;r=s[t++];)n=u.indexOf(r),~n||u.push(r);i=u.join(" "),c!=i&&(l.className.baseVal=i)}return this},s.removeClass=function(e){var t,n,r,i,s=a(e||"").match(o)||[],l=this.node,c=l.className.baseVal,u=c.match(o)||[];if(u.length){for(t=0;r=s[t++];)n=u.indexOf(r),~n&&u.splice(n,1);i=u.join(" "),c!=i&&(l.className.baseVal=i)}return this},s.hasClass=function(e){var t=this.node,n=t.className.baseVal,r=n.match(o)||[];return!!~r.indexOf(e)},s.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var n,r,i,a,s=(e||"").match(o)||[],l=this.node,c=l.className.baseVal,u=c.match(o)||[];for(n=0;i=s[n++];)r=u.indexOf(i),~r?u.splice(r,1):u.push(i);return a=u.join(" "),c!=a&&(l.className.baseVal=a),this}}),r.plugin(function(e,n,r,i,o){function a(e){return e}function s(e){return function(t){return+t.toFixed(3)+e}}var l={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},c=String,u=/[a-z]+$/i,d=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(e){var n=c(e).match(d);if(n){var r=t.nt(),i=r.substring(r.lastIndexOf(".")+1),o=this.attr(i),a={};t.stop();var s=n[3]||"",f=o.match(u),h=l[n[1]];if(f&&f==s?e=h(parseFloat(o),+n[2]):(o=this.asPX(i),e=h(this.asPX(i),this.asPX(i,n[2]+s))),isNaN(o)||isNaN(e))return;a[i]=e,this.attr(a)}})(-10),t.on("snap.util.equal",function(e,n){var r=c(this.attr(e)||""),i=c(n).match(d);if(i){t.stop();var o=i[3]||"",f=r.match(u),h=l[i[1]];return f&&f==o?{from:parseFloat(r),to:h(parseFloat(r),+i[2]),f:s(f)}:(r=this.asPX(e),{from:r,to:h(r,this.asPX(e,i[2]+o)),f:a})}})(-10)}),r.plugin(function(n,r,i,o,a){var s=i.prototype,l=n.is;s.rect=function(e,t,n,r,i,o){var a;return null==o&&(o=i),l(e,"object")&&"[object Object]"==e?a=e:null!=e&&(a={x:e,y:t,width:n,height:r},null!=i&&(a.rx=i,a.ry=o)),this.el("rect",a)},s.circle=function(e,t,n){var r;return l(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,r:n}),this.el("circle",r)};var c=function(){function e(){this.parentNode.removeChild(this)}return function(t,n){var r=o.doc.createElement("img"),i=o.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){n.call(r),r.onload=r.onerror=null,i.removeChild(r)},r.onerror=e,i.appendChild(r),r.src=t}}();s.image=function(e,t,r,i,o){var a=this.el("image");if(l(e,"object")&&"src"in e)a.attr(e);else if(null!=e){var s={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(s.x=t,s.y=r),null!=i&&null!=o?(s.width=i,s.height=o):c(e,function(){n._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})}),n._.$(a.node,s)}return a},s.ellipse=function(e,t,n,r){var i;return l(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:n,ry:r}),this.el("ellipse",i)},s.path=function(e){var t;return l(e,"object")&&!l(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},s.group=s.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.svg=function(e,t,n,r,i,o,a,s){var c={};return l(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=n&&(c.width=n),null!=r&&(c.height=r),null!=i&&null!=o&&null!=a&&null!=s&&(c.viewBox=[i,o,a,s])),this.el("svg",c)},s.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.ptrn=function(e,t,n,r,i,o,a,s){if(l(e,"object"))var c=e;else c={patternUnits:"userSpaceOnUse"},e&&(c.x=e),t&&(c.y=t),null!=n&&(c.width=n),null!=r&&(c.height=r),null!=i&&null!=o&&null!=a&&null!=s?c.viewBox=[i,o,a,s]:c.viewBox=[e||0,t||0,n||0,r||0];return this.el("pattern",c)},s.use=function(e){return null!=e?(e instanceof r&&(e.attr("id")||e.attr({id:n._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):r.prototype.use.call(this)},s.symbol=function(e,t,n,r){var i={};return null!=e&&null!=t&&null!=n&&null!=r&&(i.viewBox=[e,t,n,r]),this.el("symbol",i)},s.text=function(e,t,n){var r={};return l(e,"object")?r=e:null!=e&&(r={x:e,y:t,text:n||""}),this.el("text",r)},s.line=function(e,t,n,r){var i={};return l(e,"object")?i=e:null!=e&&(i={x1:e,x2:n,y1:t,y2:r}),this.el("line",i)},s.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},s.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function r(){return this.selectAll("stop")}function i(e,t){var r=u("stop"),i={offset:+t+"%"};return e=n.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),u(r,i),this.node.appendChild(r),this}function o(){if("linearGradient"==this.type){var e=u(this.node,"x1")||0,t=u(this.node,"x2")||1,r=u(this.node,"y1")||0,i=u(this.node,"y2")||0;return n._.box(e,r,math.abs(t-e),math.abs(i-r))}var o=this.node.cx||.5,a=this.node.cy||.5,s=this.node.r||0;return n._.box(o-s,a-s,2*s,2*s)}function a(e,n){function r(e,t){for(var n=(t-d)/(e-f),r=f;r<e;r++)a[r].offset=+(+d+n*(r-f)).toFixed(2);f=e,d=t}var i,o=t("snap.util.grad.parse",null,n).firstDefined();if(!o)return null;o.params.unshift(e),i="l"==o.type.toLowerCase()?l.apply(0,o.params):c.apply(0,o.params),o.type!=o.type.toLowerCase()&&u(i.node,{gradientUnits:"userSpaceOnUse"});var a=o.stops,s=a.length,d=0,f=0;s--;for(var h=0;h<s;h++)"offset"in a[h]&&r(h,a[h].offset);for(a[s].offset=a[s].offset||100,r(s,a[s].offset),h=0;h<=s;h++){var p=a[h];i.addStop(p.color,p.offset)}return i}function l(e,t,a,s,l){var c=n._.make("linearGradient",e);return c.stops=r,c.addStop=i,c.getBBox=o,null!=t&&u(c.node,{x1:t,y1:a,x2:s,y2:l}),c}function c(e,t,a,s,l,c){var d=n._.make("radialGradient",e);return d.stops=r,d.addStop=i,d.getBBox=o,null!=t&&u(d.node,{cx:t,cy:a,r:s}),null!=l&&null!=c&&u(d.node,{fx:l,fy:c}),d}var u=n._.$;s.gradient=function(e){return a(this.defs,e)},s.gradientLinear=function(e,t,n,r){return l(this.defs,e,t,n,r)},s.gradientRadial=function(e,t,n,r,i){return c(this.defs,e,t,n,r,i)},s.toString=function(){var e,t=this.node.ownerDocument,r=t.createDocumentFragment(),i=t.createElement("div"),o=this.node.cloneNode(!0);return r.appendChild(i),i.appendChild(o),n._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=i.innerHTML,r.removeChild(r.firstChild),e},s.toDataURL=function(){if(e&&e.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},s.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):s.clear.call({node:t}),t=e}}()}),r.plugin(function(e,t,n,r){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[j](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function o(e,t,n,r){return null==e&&(e=t=n=r=0),null==t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:U.min(n,r)/2,r2:U.max(n,r)/2,r0:U.sqrt(n*n+r*r)/2,path:C(e,t,n,r),vb:[e,t,n,r].join(" ")}}function a(){return this.join(",").replace(F,"$1")}function s(e){var t=N(e);return t.toString=a,t}function l(e,t,n,r,i,o,a,s,l){return null==l?g(e,t,n,r,i,o,a,s):u(e,t,n,r,i,o,a,s,m(e,t,n,r,i,o,a,s,l))}function c(n,r){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,o,a){e instanceof t&&(e=e.attr("d")),e=P(e);for(var s,c,d,f,h,p="",g={},m=0,v=0,_=e.length;v<_;v++){if(d=e[v],"M"==d[0])s=+d[1],c=+d[2];else{if(f=l(s,c,d[1],d[2],d[3],d[4],d[5],d[6]),m+f>o){if(r&&!g.start){if(h=l(s,c,d[1],d[2],d[3],d[4],d[5],d[6],o-m),p+=["C"+i(h.start.x),i(h.start.y),i(h.m.x),i(h.m.y),i(h.x),i(h.y)],a)return p;g.start=p,p=["M"+i(h.x),i(h.y)+"C"+i(h.n.x),i(h.n.y),i(h.end.x),i(h.end.y),i(d[5]),i(d[6])].join(),m+=f,s=+d[5],c=+d[6];continue}if(!n&&!r)return h=l(s,c,d[1],d[2],d[3],d[4],d[5],d[6],o-m)}m+=f,s=+d[5],c=+d[6]}p+=d.shift()+d}return g.end=p,h=n?m:r?g:u(s,c,d[0],d[1],d[2],d[3],d[4],d[5],1)},null,e._.clone)}function u(e,t,n,r,i,o,a,s,l){var c=1-l,u=V(c,3),d=V(c,2),f=l*l,h=f*l,p=u*e+3*d*l*n+3*c*l*l*i+h*a,g=u*t+3*d*l*r+3*c*l*l*o+h*s,m=e+2*l*(n-e)+f*(i-2*n+e),v=t+2*l*(r-t)+f*(o-2*r+t),_=n+2*l*(i-n)+f*(a-2*i+n),y=r+2*l*(o-r)+f*(s-2*o+r),b=c*e+l*n,w=c*t+l*r,x=c*i+l*a,k=c*o+l*s,C=90-180*U.atan2(m-_,v-y)/z;return{x:p,y:g,m:{x:m,y:v},n:{x:_,y:y},start:{x:b,y:w},end:{x:x,y:k},alpha:C}}function d(t,n,r,i,a,s,l,c){e.is(t,"array")||(t=[t,n,r,i,a,s,l,c]);var u=O.apply(null,t);return o(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function f(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function h(e,t){return e=o(e),t=o(t),f(t,e.x,e.y)||f(t,e.x2,e.y)||f(t,e.x,e.y2)||f(t,e.x2,e.y2)||f(e,t.x,t.y)||f(e,t.x2,t.y)||f(e,t.x,t.y2)||f(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function p(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function g(e,t,n,r,i,o,a,s,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,g=0;g<u;g++){var m=c*d[g]+c,v=p(m,e,n,i,a),_=p(m,t,r,o,s),y=v*v+_*_;h+=f[g]*U.sqrt(y)}return c*h}function m(e,t,n,r,i,o,a,s,l){if(!(l<0||g(e,t,n,r,i,o,a,s)<l)){var c,u=1,d=u/2,f=u-d,h=.01;for(c=g(e,t,n,r,i,o,a,s,f);W(c-l)>h;)d/=2,f+=(c<l?1:-1)*d,c=g(e,t,n,r,i,o,a,s,f);return f}}function v(e,t,n,r,i,o,a,s){if(!(H(e,n)<q(i,a)||q(e,n)>H(i,a)||H(t,r)<q(o,s)||q(t,r)>H(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),c=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),u=(e-n)*(o-s)-(t-r)*(i-a);if(u){var d=l/u,f=c/u,h=+d.toFixed(2),p=+f.toFixed(2);if(!(h<+q(e,n).toFixed(2)||h>+H(e,n).toFixed(2)||h<+q(i,a).toFixed(2)||h>+H(i,a).toFixed(2)||p<+q(t,r).toFixed(2)||p>+H(t,r).toFixed(2)||p<+q(o,s).toFixed(2)||p>+H(o,s).toFixed(2)))return{x:d,y:f}}}}function _(e,t,n){var r=d(e),i=d(t);if(!h(r,i))return n?0:[];for(var o=g.apply(0,e),a=g.apply(0,t),s=~~(o/8),l=~~(a/8),c=[],f=[],p={},m=n?0:[],_=0;_<s+1;_++){var y=u.apply(0,e.concat(_/s));c.push({x:y.x,y:y.y,t:_/s})}for(_=0;_<l+1;_++)y=u.apply(0,t.concat(_/l)),f.push({x:y.x,y:y.y,t:_/l});for(_=0;_<s;_++)for(var b=0;b<l;b++){var w=c[_],x=c[_+1],k=f[b],C=f[b+1],S=W(x.x-w.x)<.001?"y":"x",E=W(C.x-k.x)<.001?"y":"x",$=v(w.x,w.y,x.x,x.y,k.x,k.y,C.x,C.y);if($){if(p[$.x.toFixed(4)]==$.y.toFixed(4))continue;p[$.x.toFixed(4)]=$.y.toFixed(4);var T=w.t+W(($[S]-w[S])/(x[S]-w[S]))*(x.t-w.t),A=k.t+W(($[E]-k[E])/(C[E]-k[E]))*(C.t-k.t);T>=0&&T<=1&&A>=0&&A<=1&&(n?m++:m.push({x:$.x,y:$.y,t1:T,t2:A}))}}return m}function y(e,t){return w(e,t)}function b(e,t){return w(e,t,1)}function w(e,t,n){e=P(e),t=P(t);for(var r,i,o,a,s,l,c,u,d,f,h=n?0:[],p=0,g=e.length;p<g;p++){var m=e[p];if("M"==m[0])r=s=m[1],i=l=m[2];else{"C"==m[0]?(d=[r,i].concat(m.slice(1)),r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"==b[0])o=c=b[1],a=u=b[2];else{"C"==b[0]?(f=[o,a].concat(b.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,c,u,c,u],o=c,a=u);var w=_(d,f,n);if(n)h+=w;else{for(var x=0,k=w.length;x<k;x++)w[x].segment1=p,w[x].segment2=v,w[x].bez1=d,w[x].bez2=f;h=h.concat(w)}}}}}return h}function x(e,t,n){var r=k(e);return f(r,t,n)&&w(e,[["M",t,n],["H",r.x2+10]],1)%2==1}function k(e){var t=i(e);if(t.bbox)return N(t.bbox);if(!e)return o();e=P(e);for(var n,r=0,a=0,s=[],l=[],c=0,u=e.length;c<u;c++)if(n=e[c],"M"==n[0])r=n[1],a=n[2],s.push(r),l.push(a);else{var d=O(r,a,n[1],n[2],n[3],n[4],n[5],n[6]);s=s.concat(d.min.x,d.max.x),l=l.concat(d.min.y,d.max.y),r=n[5],a=n[6]}var f=q.apply(0,s),h=q.apply(0,l),p=H.apply(0,s),g=H.apply(0,l),m=o(f,h,p-f,g-h);
return t.bbox=N(m),m}function C(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.toString=a,o}function S(e,t,n,r,i){if(null==i&&null==r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!=i)var o=Math.PI/180,s=e+n*Math.cos(-r*o),l=e+n*Math.cos(-i*o),c=t+n*Math.sin(-r*o),u=t+n*Math.sin(-i*o),d=[["M",s,c],["A",n,n,0,+(i-r>180),0,l,u]];else d=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return d.toString=a,d}function E(t){var n=i(t),r=String.prototype.toLowerCase;if(n.rel)return s(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var o=[],l=0,c=0,u=0,d=0,f=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],u=l,d=c,f++,o.push(["M",l,c]));for(var h=f,p=t.length;h<p;h++){var g=o[h]=[],m=t[h];if(m[0]!=r.call(m[0]))switch(g[0]=r.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":u=m[1],d=m[2];default:for(var v=1,_=m.length;v<_;v++)g[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{g=o[h]=[],"m"==m[0]&&(u=m[1]+l,d=m[2]+c);for(var y=0,b=m.length;y<b;y++)o[h][y]=m[y]}var w=o[h].length;switch(o[h][0]){case"z":l=u,c=d;break;case"h":l+=+o[h][w-1];break;case"v":c+=+o[h][w-1];break;default:l+=+o[h][w-2],c+=+o[h][w-1]}}return o.toString=a,n.rel=s(o),o}function $(t){var n=i(t);if(n.abs)return s(n.abs);if(L(t,"array")&&L(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r,o=[],l=0,c=0,u=0,d=0,f=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],u=l,d=c,f++,o[0]=["M",l,c]);for(var h,p,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=f,v=t.length;m<v;m++){if(o.push(h=[]),p=t[m],r=p[0],r!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+l,h[7]=+p[7]+c;break;case"V":h[1]=+p[1]+c;break;case"H":h[1]=+p[1]+l;break;case"R":for(var _=[l,c].concat(p.slice(1)),y=2,b=_.length;y<b;y++)_[y]=+_[y]+l,_[++y]=+_[y]+c;o.pop(),o=o.concat(I(_,g));break;case"O":o.pop(),_=S(l,c,p[1],p[2]),_.push(_[0]),o=o.concat(_);break;case"U":o.pop(),o=o.concat(S(l,c,p[1],p[2],p[3])),h=["U"].concat(o[o.length-1].slice(-2));break;case"M":u=+p[1]+l,d=+p[2]+c;default:for(y=1,b=p.length;y<b;y++)h[y]=+p[y]+(y%2?l:c)}else if("R"==r)_=[l,c].concat(p.slice(1)),o.pop(),o=o.concat(I(_,g)),h=["R"].concat(p.slice(-2));else if("O"==r)o.pop(),_=S(l,c,p[1],p[2]),_.push(_[0]),o=o.concat(_);else if("U"==r)o.pop(),o=o.concat(S(l,c,p[1],p[2],p[3])),h=["U"].concat(o[o.length-1].slice(-2));else for(var w=0,x=p.length;w<x;w++)h[w]=p[w];if(r=r.toUpperCase(),"O"!=r)switch(h[0]){case"Z":l=+u,c=+d;break;case"H":l=h[1];break;case"V":c=h[1];break;case"M":u=h[h.length-2],d=h[h.length-1];default:l=h[h.length-2],c=h[h.length-1]}}return o.toString=a,n.abs=s(o),o}function T(e,t,n,r){return[e,t,n,r,n,r]}function A(e,t,n,r,i,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function D(t,n,r,i,o,a,s,l,c,u){var d,f=120*z/180,h=z/180*(+o||0),p=[],g=e._.cacher(function(e,t,n){var r=e*U.cos(n)-t*U.sin(n),i=e*U.sin(n)+t*U.cos(n);return{x:r,y:i}});if(u)C=u[0],S=u[1],x=u[2],k=u[3];else{d=g(t,n,-h),t=d.x,n=d.y,d=g(l,c,-h),l=d.x,c=d.y;var m=(U.cos(z/180*o),U.sin(z/180*o),(t-l)/2),v=(n-c)/2,_=m*m/(r*r)+v*v/(i*i);_>1&&(_=U.sqrt(_),r*=_,i*=_);var y=r*r,b=i*i,w=(a==s?-1:1)*U.sqrt(W((y*b-y*v*v-b*m*m)/(y*v*v+b*m*m))),x=w*r*v/i+(t+l)/2,k=w*-i*m/r+(n+c)/2,C=U.asin(((n-k)/i).toFixed(9)),S=U.asin(((c-k)/i).toFixed(9));C=t<x?z-C:C,S=l<x?z-S:S,C<0&&(C=2*z+C),S<0&&(S=2*z+S),s&&C>S&&(C-=2*z),!s&&S>C&&(S-=2*z)}var E=S-C;if(W(E)>f){var $=S,T=l,A=c;S=C+f*(s&&S>C?1:-1),l=x+r*U.cos(S),c=k+i*U.sin(S),p=D(l,c,r,i,o,0,s,T,A,[S,$,x,k])}E=S-C;var O=U.cos(C),P=U.sin(C),R=U.cos(S),I=U.sin(S),M=U.tan(E/4),L=4/3*r*M,N=4/3*i*M,j=[t,n],F=[t+L*P,n-N*O],B=[l+L*I,c-N*R],q=[l,c];if(F[0]=2*j[0]-F[0],F[1]=2*j[1]-F[1],u)return[F,B,q].concat(p);p=[F,B,q].concat(p).join().split(",");for(var H=[],V=0,G=p.length;V<G;V++)H[V]=V%2?g(p[V-1],p[V],h).y:g(p[V],p[V+1],h).x;return H}function O(e,t,n,r,i,o,a,s){for(var l,c,u,d,f,h,p,g,m=[],v=[[],[]],_=0;_<2;++_)if(0==_?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*a,u=3*n-3*e):(c=6*t-12*r+6*o,l=-3*t+9*r-9*o+3*s,u=3*r-3*t),W(l)<1e-12){if(W(c)<1e-12)continue;d=-u/c,0<d&&d<1&&m.push(d)}else p=c*c-4*u*l,g=U.sqrt(p),p<0||(f=(-c+g)/(2*l),0<f&&f<1&&m.push(f),h=(-c-g)/(2*l),0<h&&h<1&&m.push(h));for(var y,b=m.length,w=b;b--;)d=m[b],y=1-d,v[0][b]=y*y*y*e+3*y*y*d*n+3*y*d*d*i+d*d*d*a,v[1][b]=y*y*y*t+3*y*y*d*r+3*y*d*d*o+d*d*d*s;return v[0][w]=e,v[1][w]=t,v[0][w+1]=a,v[1][w+1]=s,v[0].length=v[1].length=w+2,{min:{x:q.apply(0,v[0]),y:q.apply(0,v[1])},max:{x:H.apply(0,v[0]),y:H.apply(0,v[1])}}}function P(e,t){var n=!t&&i(e);if(!t&&n.curve)return s(n.curve);for(var r=$(e),o=t&&$(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(D.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(A(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(A(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(T(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(T(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(T(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(T(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)f[t]="A",o&&(h[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),v=H(r.length,o&&o.length||0)}},d=function(e,t,n,i,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],v=H(r.length,o&&o.length||0))},f=[],h=[],p="",g="",m=0,v=H(r.length,o&&o.length||0);m<v;m++){r[m]&&(p=r[m][0]),"C"!=p&&(f[m]=p,m&&(g=f[m-1])),r[m]=c(r[m],a,g),"A"!=f[m]&&"C"==p&&(f[m]="C"),u(r,m),o&&(o[m]&&(p=o[m][0]),"C"!=p&&(h[m]=p,m&&(g=h[m-1])),o[m]=c(o[m],l,g),"A"!=h[m]&&"C"==p&&(h[m]="C"),u(o,m)),d(r,o,a,l,m),d(o,r,l,a,m);var _=r[m],y=o&&o[m],b=_.length,w=o&&y.length;a.x=_[b-2],a.y=_[b-1],a.bx=B(_[b-4])||a.x,a.by=B(_[b-3])||a.y,l.bx=o&&(B(y[w-4])||l.x),l.by=o&&(B(y[w-3])||l.y),l.x=o&&y[w-2],l.y=o&&y[w-1]}return o||(n.curve=s(r)),o?[r,o]:r}function R(e,t){if(!t)return e;var n,r,i,o,a,s,l;for(e=P(e),i=0,a=e.length;i<a;i++)for(l=e[i],o=1,s=l.length;o<s;o+=2)n=t.x(l[o],l[o+1]),r=t.y(l[o],l[o+1]),l[o]=n,l[o+1]=r;return e}function I(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}var M=t.prototype,L=e.is,N=e._.clone,j="hasOwnProperty",F=/,?([a-z]),?/gi,B=parseFloat,U=Math,z=U.PI,q=U.min,H=U.max,V=U.pow,W=U.abs,G=c(1),Y=c(),K=c(0,1),X=e._unit2px,J={path:function(e){return e.attr("path")},circle:function(e){var t=X(e);return S(t.cx,t.cy,t.r)},ellipse:function(e){var t=X(e);return S(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=X(e);return C(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=X(e);return C(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return C(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=G,e.path.getPointAtLength=Y,e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return K(e,t).end;var r=K(e,n,1);return t?K(r,t).end:r},M.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},M.getPointAtLength=function(e){return Y(this.attr("d"),e)},M.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)},e._.box=o,e.path.findDotsAtSegment=u,e.path.bezierBBox=d,e.path.isPointInsideBBox=f,e.closest=function(t,n,r,i){for(var a=100,s=o(t-a/2,n-a/2,a,a),l=[],c=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:i[e]}},u=0;a<=1e6&&!u;){for(var d=0,h=r.length;d<h;d++){var p=c(d);if(f(s,p.x,p.y)){u++,l.push(p);break}}u||(a*=2,s=o(t-a/2,n-a/2,a,a))}if(1e6!=a){var g,m=1/0;for(d=0,h=l.length;d<h;d++){var v=e.len(t,n,l[d].x,l[d].y);m>v&&(m=v,l[d].len=v,g=l[d])}return g}},e.path.isBBoxIntersect=h,e.path.intersection=y,e.path.intersectionNumber=b,e.path.isPointInside=x,e.path.getBBox=k,e.path.get=J,e.path.toRelative=E,e.path.toAbsolute=$,e.path.toCubic=P,e.path.map=R,e.path.toString=a,e.path.clone=s}),r.plugin(function(e,r,i,o){var a=Math.max,s=Math.min,l=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,n=e.length;t<n;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},c=l.prototype;c.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},c.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},c.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this},c.animate=function(r,i,o,a){"function"!=typeof o||o.length||(a=o,o=n.linear),r instanceof e._.Animation&&(a=r.callback,o=r.easing,i=o.dur,r=r.attr);var s=arguments;if(e.is(r,"array")&&e.is(s[s.length-1],"array"))var l=!0;var c,u=function(){c?this.b=c:c=this.b},d=0,f=this,h=a&&function(){++d==f.length&&a.call(this)};return this.forEach(function(e,n){t.once("snap.animcreated."+e.id,u),l?s[n]&&e.animate.apply(e,s[n]):e.animate(r,i,o,h)})},c.remove=function(){for(;this.length;)this.pop().remove();return this},c.bind=function(e,t,n){var r={};if("function"==typeof t)this.bindings[e]=t;else{var i=n||e;this.bindings[e]=function(e){r[i]=e,t.attr(r)}}return this},c.attr=function(e){var t={};for(var n in e)this.bindings[n]?this.bindings[n](e[n]):t[n]=e[n];for(var r=0,i=this.items.length;r<i;r++)this.items[r].attr(t);return this},c.clear=function(){for(;this.length;)this.pop()},c.splice=function(e,t,n){e=e<0?a(this.length+e,0):e,t=a(0,s(this.length-e,t));var r,i=[],o=[],c=[];for(r=2;r<arguments.length;r++)c.push(arguments[r]);for(r=0;r<t;r++)o.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var u=c.length;for(r=0;r<u+i.length;r++)this.items[e+r]=this[e+r]=r<u?c[r]:i[r-u];for(r=this.items.length=this.length-=t-u;this[r];)delete this[r++];return new l(o)},c.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},c.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},c.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return e=s.apply(0,e),t=s.apply(0,t),n=a.apply(0,n),r=a.apply(0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t,cx:e+(n-e)/2,cy:t+(r-t)/2}},c.clone=function(e){e=new l;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},c.toString=function(){return"Snapâs set"},c.type="set",e.Set=l,e.set=function(){var e=new l;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),r.plugin(function(e,n,r,i){function o(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function a(t,n,r){n=v(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var i,a,s,l,c=Math.max(t.length,n.length),u=[],h=[],p=0;p<c;p++){if(s=t[p]||o(n[p]),l=n[p]||o(s),s[0]!=l[0]||"r"==s[0].toLowerCase()&&(s[2]!=l[2]||s[3]!=l[3])||"s"==s[0].toLowerCase()&&(s[3]!=l[3]||s[4]!=l[4])){t=e._.transform2matrix(t,r()),n=e._.transform2matrix(n,r()),u=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],h=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(u[p]=[],h[p]=[],i=0,a=Math.max(s.length,l.length);i<a;i++)i in s&&(u[p][i]=s[i]),i in l&&(h[p][i]=l[i])}return{from:f(u),to:f(h),f:d(u)}}function s(e){return e}function l(e){return function(t){return+t.toFixed(3)+e}}function c(e){return e.join(" ")}function u(t){return e.rgb(t[0],t[1],t[2])}function d(e){var t,n,r,i,o,a,s=0,l=[];for(t=0,n=e.length;t<n;t++){for(o="[",a=['"'+e[t][0]+'"'],r=1,i=e[t].length;r<i;r++)a[r]="val["+s++ +"]";o+=a+"]",l[t]=o}return Function("val","return Snap.path.toString.call(["+l+"])")}function f(e){for(var t=[],n=0,r=e.length;n<r;n++)for(var i=1,o=e[n].length;i<o;i++)t.push(e[n][i]);return t}function h(e){return isFinite(parseFloat(e))}function p(t,n){return!(!e.is(t,"array")||!e.is(n,"array"))&&t.toString()==n.toString()}var g={},m=/[a-z]+$/i,v=String;g.stroke=g.fill="colour",n.prototype.equal=function(e,n){return t("snap.util.equal",this,e,n).firstDefined()},t.on("snap.util.equal",function(t,n){var r,i,o=v(this.attr(t)||""),_=this;if(h(o)&&h(n))return{from:parseFloat(o),to:parseFloat(n),f:s};if("colour"==g[t])return r=e.color(o),i=e.color(n),{from:[r.r,r.g,r.b,r.opacity],to:[i.r,i.g,i.b,i.opacity],f:u};if("viewBox"==t)return r=this.attr(t).vb.split(" ").map(Number),i=n.split(" ").map(Number),{from:r,to:i,f:c};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return n instanceof e.Matrix&&(n=n.toTransformString()),e._.rgTransform.test(n)||(n=e._.svgTransform2string(n)),a(o,n,function(){return _.getBBox(1)});if("d"==t||"path"==t)return r=e.path.toCubic(o,n),{from:f(r[0]),to:f(r[1]),f:d(r[0])};if("points"==t)return r=v(o).split(e._.separator),i=v(n).split(e._.separator),{from:r,to:i,f:function(e){return e}};var y=o.match(m),b=v(n).match(m);return y&&p(y,b)?{from:parseFloat(o),to:parseFloat(n),f:l(y)}:{from:this.asPX(t),to:this.asPX(t,n),f:s}})}),r.plugin(function(e,n,r,i){for(var o=n.prototype,a="hasOwnProperty",s=("createTouch"in i.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=(function(e,t){var n="y"==e?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:i.doc;return r[n in r.documentElement?"documentElement":"body"][n]}),d=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},h=function(e,t,n,r){var i=s&&c[t]?c[t]:t,o=function(i){var o=u("y",r),l=u("x",r);if(s&&c[a](t))for(var h=0,p=i.targetTouches&&i.targetTouches.length;h<p;h++)if(i.targetTouches[h].target==e||e.contains(i.targetTouches[h].target)){var g=i;i=i.targetTouches[h],i.originalEvent=g,i.preventDefault=d,i.stopPropagation=f;break}var m=i.clientX+l,v=i.clientY+o;return n.call(r,i,m,v)};return t!==i&&e.addEventListener(t,o,!1),e.addEventListener(i,o,!1),function(){return t!==i&&e.removeEventListener(t,o,!1),e.removeEventListener(i,o,!1),!0}},p=[],g=function(e){for(var n,r=e.clientX,i=e.clientY,o=u("y"),a=u("x"),l=p.length;l--;){if(n=p[l],s){for(var c,d=e.touches&&e.touches.length;d--;)if(c=e.touches[d],c.identifier==n.el._drag.id||n.el.node.contains(c.target)){r=c.clientX,i=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var f=n.el.node;f.nextSibling,f.parentNode,f.style.display;r+=a,i+=o,t("snap.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,e)}},m=function(n){e.unmousemove(g).unmouseup(m);for(var r,i=p.length;i--;)r=p[i],r.el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n),t.off("snap.drag.*."+r.el.id);p=[]},v=l.length;v--;)!function(t){e[t]=o[t]=function(n,r){if(e.is(n,"function"))this.events=this.events||[],this.events.push({name:t,f:n,unbind:h(this.node||document,t,n,r||this)});else for(var i=0,o=this.events.length;i<o;i++)if(this.events[i].name==t)try{this.events[i].f.call(this)}catch(e){}return this},e["un"+t]=o["un"+t]=function(e){for(var n=this.events||[],r=n.length;r--;)if(n[r].name==t&&(n[r].f==e||!e))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(l[v]);o.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var _=[];o.drag=function(n,r,i,o,a,s){function l(l,c,d){(l.originalEvent||l).preventDefault(),u._drag.x=c,u._drag.y=d,u._drag.id=l.identifier,!p.length&&e.mousemove(g).mouseup(m),p.push({el:u,move_scope:o,start_scope:a,end_scope:s}),r&&t.on("snap.drag.start."+u.id,r),n&&t.on("snap.drag.move."+u.id,n),i&&t.on("snap.drag.end."+u.id,i),t("snap.drag.start."+u.id,a||o||u,c,d,l)}function c(e,n,r){t("snap.draginit."+u.id,u,e,n,r)}var u=this;if(!arguments.length){var d;return u.drag(function(e,t){this.attr({transform:d+(d?"T":"t")+[e,t]})},function(){d=this.transform().local})}return t.on("snap.draginit."+u.id,l),u._drag={},_.push({el:u,start:l,init:c}),u.mousedown(c),u},o.undrag=function(){for(var n=_.length;n--;)_[n].el==this&&(this.unmousedown(_[n].init),_.splice(n,1),t.unbind("snap.drag.*."+this.id),t.unbind("snap.draginit."+this.id));return!_.length&&e.unmousemove(g).unmouseup(m),this}}),r.plugin(function(e,n,r,i){var o=(n.prototype,r.prototype),a=/^\s*url\((.+)\)/,s=String,l=e._.$;e.filter={},o.filter=function(t){var r=this;"svg"!=r.type&&(r=r.paper);var i=e.parse(s(t)),o=e._.id(),a=(r.node.offsetWidth,r.node.offsetHeight,l("filter"));return l(a,{id:o,filterUnits:"userSpaceOnUse"}),a.appendChild(i.node),r.defs.appendChild(a),new n(a)},t.on("snap.util.getattr.filter",function(){t.stop();var n=l(this.node,"filter");if(n){var r=s(n).match(a);return r&&e.select(r[1])}}),t.on("snap.util.attr.filter",function(r){if(r instanceof n&&"filter"==r.type){t.stop();var i=r.node.id;i||(l(r.node,{id:r.id}),i=r.id),l(this.node,{filter:e.url(i)})}r&&"none"!=r||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,n){null==t&&(t=2);var r=null==n?t:[t,n];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,n,r,i,o){return"string"==typeof r&&(i=r,o=i,r=4),"string"!=typeof i&&(o=i,i="#000"),i=i||"#000",null==r&&(r=4),null==o&&(o=1),null==t&&(t=0,n=2),null==n&&(n=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:n,blur:r,opacity:o})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),r.plugin(function(e,t,n,r,i){var o=e._.box,a=e.is,s=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&a(e,"string")&&(t=e,e=null),e=e||this.paper;var n=e.getBBox?e.getBBox():o(e),r=this.getBBox(),i={};switch(t=t&&t.match(s),t=t?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=n.y-r.y;break;case"b":i.dx=0,i.dy=n.y2-r.y2;break;case"m":i.dx=0,i.dy=n.cy-r.cy;break;case"l":i.dx=n.x-r.x,i.dy=0;break;case"r":i.dx=n.x2-r.x2,i.dy=0;break;default:i.dx=n.cx-r.cx,i.dy=0}return i.toString=l,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),r})}).call(window)},function(e,t,n){n(226),e.exports="LocalStorageModule"},function(e,t){/*! Angular Moment Picker - v0.10.2 - http://indrimuska.github.io/angular-moment-picker - (c) 2015 Indri Muska - MIT */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(2);t.KEYS={up:38,down:40,left:37,right:39,escape:27,enter:13},t.isValidMoment=function(e){return i.isMoment(e)&&e.isValid()},t.toValue=function(e,n,r){var i=e;return t.isValidMoment(e)||(i=t.toMoment(e,n,r)),t.momentToValue(i,n)},t.toMoment=function(e,n,r){var o=i(e,n,r);return t.isValidMoment(o)||(o=void 0),o},t.momentToValue=function(e,n){if(t.isValidMoment(e))return n?e.format(n):e.valueOf()},t.valueToMoment=function(e,t){var n;if(!e)return n;if(n=t.format?i(e,t.format,t.locale):i(e),t.model){var o=t.views.all.slice(0,t.views.all.indexOf(t.detectedMinView));r.forEach(o,function(e){var r=t.views.precisions[e];n[r](t.model[r]())})}return n},t.setValue=function(e,n,r,i){var o=t.isValidMoment(e)?e.clone():t.valueToMoment(e,n),a=t.momentToValue(o,n.format);n.model=t.updateMoment(n.model,o,n),r.$modelValue=t.updateMoment(r.$modelValue,o,n),i.ngModel!=i.momentPicker&&(n.value=a),i.ngModel&&(r.$setViewValue(a),r.$render())},t.updateMoment=function(e,n,i){if(t.isValidMoment(e)&&n){if(!e.isSame(n)){var o=i.views.all.slice(0,i.views.all.indexOf(i.detectedMaxView)+1);r.forEach(o,function(t){var r=i.views.precisions[t];e[r](n[r]())})}}else e=n;return e}},function(e,t){e.exports=angular},function(e,t){e.exports=moment},function(e,t){},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(9);t.Provider=i.default;var o=n(7);t.Directive=o.default,r.module("moment-picker",[]).provider("momentPicker",[function(){return new i.default}]).directive("momentPicker",["$timeout","$sce","$log","$window","momentPicker","$compile","$templateCache",function(e,t,n,r,i,a,s){return new o.default(e,t,n,r,i,a,s)}])},function(e,t){e.exports='<div class=moment-picker> <div class="moment-picker-container {{view.selected}}-view" ng-class="{\'moment-picker-disabled\': disabled, open: view.isOpen}"> <div ng-if=additions.top class="moment-picker-addition top"></div> <table class=header-view ng-if=showHeader> <thead> <tr> <th ng-class="{disabled: !view.previous.selectable}" ng-bind-html=view.previous.label ng-click=view.previous.set()></th> <th ng-bind=view.title ng-click=view.setParentView()></th> <th ng-class="{disabled: !view.next.selectable}" ng-bind-html=view.next.label ng-click=view.next.set()></th> </tr> </thead> </table> <div class=moment-picker-specific-views> <table> <thead ng-if=views[view.selected].headers> <tr> <th ng-repeat="header in views[view.selected].headers" ng-bind=header></th> </tr> </thead> <tbody> <tr ng-repeat="row in views[view.selected].rows"> <td ng-repeat="item in row track by item.index" ng-class=item.class ng-bind=item.label ng-click="!disabled && views[view.selected].set(item)"></td> </tr> </tbody> </table> </div> <div ng-if=additions.bottom class="moment-picker-addition bottom"></div> </div> </div>'},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(2),o=n(8),a=n(13),s=n(0),l=n(6),c=function(){function e(e,t,n,c,u,d,f){var h=this;this.$timeout=e,this.$sce=t,this.$log=n,this.$window=c,this.provider=u,this.$compile=d,this.$templateCache=f,this.restrict="A",this.require="?ngModel",this.transclude=!0,this.template=l,this.scope={value:"=?momentPicker",model:"=?ngModel",locale:"@?",format:"@?",minView:"@?",maxView:"@?",startView:"@?",minDate:"=?",maxDate:"=?",startDate:"=?",disabled:"=?disable",position:"@?",inline:"@?",validate:"=?",autoclose:"=?",setOnSelect:"=?",isOpen:"=?",today:"=?",keyboard:"=?",showHeader:"=?",additions:"=?",change:"&?",selectable:"&?"},this.link=function(e,t,n,l,c){c(function(c){r.forEach(["locale","format","minView","maxView","startView","position","inline","validate","autoclose","setOnSelect","today","keyboard","showHeader","leftArrow","rightArrow","additions"],function(t){r.isDefined(e[t])||(e[t]=h.provider[t]),r.isDefined(n[t])||(n[t]=e[t])}),n.ngModel||(l={}),e.limits={minDate:s.toMoment(e.minDate,e.format,e.locale),maxDate:s.toMoment(e.maxDate,e.format,e.locale),isAfterOrEqualMin:function(t,n){return!r.isDefined(e.limits.minDate)||t.isAfter(e.limits.minDate,n)||t.isSame(e.limits.minDate,n)},isBeforeOrEqualMax:function(t,n){return!r.isDefined(e.limits.maxDate)||t.isBefore(e.limits.maxDate,n)||t.isSame(e.limits.maxDate,n)},isSelectable:function(t,i){var o=!0;try{r.isFunction(e.selectable)&&n.selectable&&(o=e.selectable({date:t,type:i}))}catch(e){h.$log.error(e)}return e.limits.isAfterOrEqualMin(t,i)&&e.limits.isBeforeOrEqualMax(t,i)&&o},checkValue:function(){s.isValidMoment(l.$modelValue)&&e.validate&&(e.limits.isAfterOrEqualMin(l.$modelValue)||s.setValue(e.limits.minDate,e,l,n),e.limits.isBeforeOrEqualMax(l.$modelValue)||s.setValue(e.limits.maxDate,e,l,n))},checkView:function(){r.isDefined(e.view.moment)||(e.view.moment=i().locale(e.locale)),e.limits.isAfterOrEqualMin(e.view.moment)||(e.view.moment=e.limits.minDate.clone()),e.limits.isBeforeOrEqualMax(e.view.moment)||(e.view.moment=e.limits.maxDate.clone()),e.view.update(),e.view.render()}},e.views={all:["decade","year","month","day","hour","minute"],precisions:{decade:"year",year:"month",month:"date",day:"hour",hour:"minute",minute:"second"},formats:{decade:"Y{1,2}(?!Y)|YYYY|[Ll]{1,4}(?!T)",year:"M{1,4}(?![Mo])|Mo|Q",month:"[Dd]{1,4}(?![Ddo])|DDDo|[Dd]o|[Ww]{1,2}(?![Wwo])|[Ww]o|[Ee]|L{1,2}(?!T)|l{1,2}",day:"[Hh]{1,2}|LTS?",hour:"m{1,2}|[Ll]{3,4}|LT(?!S)",minute:"s{1,2}|S{1,}|X|LTS"},detectMinMax:function(){if(e.detectedMinView=e.detectedMaxView=void 0,e.format){var t,n;r.forEach(e.views.formats,function(i,o){var a=new RegExp("("+i+")(?![^[]*])","g");e.format.match(a)&&(r.isDefined(t)||(t=o),n=o)}),t=r.isDefined(t)?Math.max(0,e.views.all.indexOf(t)):0,n=r.isDefined(n)?Math.min(e.views.all.length-1,e.views.all.indexOf(n)):e.views.all.length-1,t>e.views.all.indexOf(e.minView)&&(e.minView=e.views.all[t]),n<e.views.all.indexOf(e.maxView)&&(e.maxView=e.views.all[n]),e.detectedMinView=e.views.all[t],e.detectedMaxView=e.views.all[n]}},decade:new a.DecadeView(e,l,h.provider),year:new a.YearView(e,l,h.provider),month:new a.MonthView(e,l,h.provider),day:new a.DayView(e,l,h.provider),hour:new a.HourView(e,l,h.provider),minute:new a.MinuteView(e,l,h.provider)},e.view={moment:void 0,value:void 0,isOpen:!1,selected:e.startView,update:function(){e.view.value=s.momentToValue(e.view.moment,e.format)},toggle:function(){e.view.isOpen?e.view.close():e.view.open()},open:function(){e.disabled||e.view.isOpen||e.inline||(e.isOpen=!0,e.view.isOpen=!0,document.body.appendChild(e.picker[0]),e.view.position())},close:function(){e.view.isOpen&&!e.inline&&(e.isOpen=!1,e.view.isOpen=!1,e.view.selected=e.startView,e.picker[0].parentNode.removeChild(e.picker[0]))},position:function(){if(e.view.isOpen&&!e.position&&!e.inline){var n=t[0],r=e.picker.children()[0],i=e.picker.hasClass("top"),a=e.picker.hasClass("right"),s=o.getOffset(t[0]),l=s.top-h.$window.pageYOffset,c=s.left-h.$window.pageXOffset,u=h.$window.innerWidth,d=h.$window.innerHeight,f=l+h.$window.pageYOffset-r.offsetHeight>0&&l>d/2,p=c+r.offsetWidth>u,g=s.top+(f?0:n.offsetHeight)+"px",m=s.left+"px",v=n.offsetWidth+"px";!i&&f&&e.picker.addClass("top"),i&&!f&&e.picker.removeClass("top"),!a&&p&&e.picker.addClass("right"),a&&!p&&e.picker.removeClass("right"),e.picker.css("top")!==g&&e.picker.css("top",g),e.picker.css("left")!==m&&e.picker.css("left",m),e.picker.css("width")!==v&&e.picker.css("width",v)}},keydown:function(t){var n=e.views[e.view.selected],r=e.views.precisions[e.view.selected].replace("date","day"),i=h.provider[r+"sStep"]||1,o=[s.KEYS.up,s.KEYS.left].indexOf(t.keyCode)>=0?"subtract":"add",a=function(t){var a=t?n.perLine:1,s=e.view.moment.clone()[o](i*a,r);e.limits.isSelectable(s,r)&&(e.view.moment=s,e.view.update(),e.view.render())};switch(t.keyCode){case s.KEYS.up:case s.KEYS.down:t.preventDefault(),e.view.isOpen?a(!0):e.view.open();break;case s.KEYS.left:case s.KEYS.right:if(!e.view.isOpen)break;t.preventDefault(),a();break;case s.KEYS.enter:if(!e.view.isOpen)break;e.view.change(r),t.preventDefault();break;case s.KEYS.escape:e.view.toggle()}e.$evalAsync()},unit:function(){return"decade"==e.view.selected?10:1},precision:function(){return e.view.selected.replace("decade","year")},title:"",previous:{label:h.$sce.trustAsHtml(e.leftArrow),selectable:!0,set:function(){e.view.previous.selectable&&(e.view.moment.subtract(e.view.unit(),e.view.precision()),e.view.update(),e.view.render())}},next:{selectable:!0,label:h.$sce.trustAsHtml(e.rightArrow),set:function(){e.view.next.selectable&&(e.view.moment.add(e.view.unit(),e.view.precision()),e.view.update(),e.view.render())}},setParentView:function(){e.view.change(e.views.all[Math.max(0,e.views.all.indexOf(e.view.selected)-1)])},render:function(){var t=e.view.moment.clone().startOf(e.view.precision()).subtract(e.view.unit(),e.view.precision()),n=e.view.moment.clone().endOf(e.view.precision()).add(e.view.unit(),e.view.precision());e.view.previous.selectable=e.limits.isAfterOrEqualMin(t,e.view.precision()),e.view.previous.label=h.$sce.trustAsHtml(e.view.previous.selectable?e.leftArrow:"&nbsp;"),e.view.next.selectable=e.limits.isBeforeOrEqualMax(n,e.view.precision()),e.view.next.label=h.$sce.trustAsHtml(e.view.next.selectable?e.rightArrow:"&nbsp;"),e.view.title=e.views[e.view.selected].render()},change:function(t){var r=e.views.all.indexOf(t),i=e.views.all.indexOf(e.minView),o=e.views.all.indexOf(e.maxView),a=function(){s.setValue(e.view.moment,e,l,n),e.view.update(),n.ngModel&&l.$commitViewValue()};e.setOnSelect&&a(),r<0||r>o?(e.setOnSelect||a(),e.autoclose&&h.$timeout(e.view.close)):r>=i&&(e.view.selected=t)}},t.prepend(c),e.picker=r.element(t[0].querySelectorAll(".moment-picker")),e.container=r.element(e.picker[0].querySelectorAll(".moment-picker-container")),e.input="input"!=t[0].tagName.toLowerCase()&&t[0].querySelectorAll("input").length>0?r.element(t[0].querySelectorAll("input")):r.element(t[0]),e.input.addClass("moment-picker-input").attr("tabindex",0),(e.position||"").split(" ").forEach(function(t){return e.picker.addClass(t)}),e.inline?(t.after(e.picker),e.picker.addClass("inline")):e.picker[0].parentNode.removeChild(e.picker[0]),h.$timeout(function(){r.forEach(e.additions||{},function(t,n){var i=r.element(e.container[0].querySelector(".moment-picker-addition."+n)),o=h.$templateCache.get(t),a=h.$compile(o)(e.$parent);i.append(a)})}),e.views.detectMinMax(),e.limits.checkView(),h.$timeout(function(){n.ngModel?(!l.$modelValue&&e.value&&l.$setViewValue(e.value),l.$commitViewValue(),l.$render()):e.value&&(l.$modelValue=s.valueToMoment(e.value,e)),e.startDate?e.view.moment=s.toMoment(e.startDate,e.format,e.locale):s.isValidMoment(l.$modelValue)&&(e.view.moment=l.$modelValue.clone()),e.view.update(),e.view.render()}),n.ngModel&&(l.$parsers.push(function(t){return s.updateMoment(l.$modelValue,s.valueToMoment(t,e),e)||!0}),l.$formatters.push(function(t){return s.momentToValue(t,e.format)||""}),l.$viewChangeListeners.push(function(){n.ngModel!=n.momentPicker&&(e.value=l.$viewValue)}),l.$validators.minDate=function(t){return e.validate||!s.isValidMoment(t)||e.limits.isAfterOrEqualMin(t)},l.$validators.maxDate=function(t){return e.validate||!s.isValidMoment(t)||e.limits.isBeforeOrEqualMax(t)}),n.ngModel!=n.momentPicker&&e.$watch("value",function(t,r){t!==r&&s.setValue(t,e,l,n)}),e.$watch(function(){return s.momentToValue(l.$modelValue,e.format)},function(t,o){if(t!=o){var a=s.valueToMoment(t,e);if(s.setValue(a,e,l,n),e.limits.checkValue(),e.view.moment=(a||i().locale(e.locale)).clone(),e.view.update(),e.view.render(),r.isFunction(e.change)&&n.change){var c=s.valueToMoment(o,e);e.$evalAsync(function(){return e.change({newValue:a,oldValue:c})})}}}),e.$watch(function(){return l.$modelValue&&l.$modelValue.valueOf()},function(){var t=(s.isValidMoment(l.$modelValue)?l.$modelValue:i().locale(e.locale)).clone();t.isSame(e.view.moment)||(e.view.moment=t,e.view.update(),e.view.render())}),e.$watch("view.selected",function(){return e.view.render()}),e.$watchGroup(["minView","maxView"],function(){e.views.detectMinMax(),e.startView=e.views.all[Math.max(Math.min(e.views.all.indexOf(e.startView),e.views.all.indexOf(e.maxView)),e.views.all.indexOf(e.minView))],e.view.selected=e.startView}),e.$watchGroup([function(){return s.toValue(e.minDate,e.format,e.locale)},function(){return s.toValue(e.maxDate,e.format,e.locale)}],function(){r.forEach(["minDate","maxDate"],function(t){e.limits[t]=s.toMoment(e[t],e.format,e.locale)}),e.limits.checkValue(),e.limits.checkView(),e.view.render()}),e.$watch(function(){return s.toValue(e.startDate,e.format,e.locale)},function(t,n){t!=n&&(e.view.moment=s.valueToMoment(t,e),e.view.update(),e.view.render())}),n.$observe("locale",function(t){return e.locale=t}),e.$watch("locale",function(t,i){r.isDefined(i)&&t!=i&&(s.isValidMoment(l.$modelValue)&&s.setValue(l.$modelValue.locale(t),e,l,n),s.isValidMoment(e.view.moment)&&(e.view.moment=e.view.moment.locale(t)),s.isValidMoment(e.limits.minDate)&&(e.limits.minDate=e.limits.minDate.locale(t)),s.isValidMoment(e.limits.maxDate)&&(e.limits.maxDate=e.limits.maxDate.locale(t)),e.view.render())}),e.$watch("validate",e.limits.checkValue),e.$watch("isOpen",function(t){e.inline?e.view.isOpen=!0:r.isDefined(t)&&t!=e.view.isOpen&&e.view.toggle()});var u=function(t){t&&t.preventDefault(),e.input[0].focus()};e.input.on("focus click touchstart",function(){return e.$evalAsync(e.view.open)}).on("blur",function(){return e.$evalAsync(e.view.close)}).on("keydown",function(t){e.keyboard&&e.view.keydown(t)}),t.on("click touchstart",function(){return u()}),e.container.on("mousedown",function(e){return u(e)}),r.element(h.$window).on("resize scroll",e.view.position),e.$on("$destroy",function(){e.input.off("focus click touchstart blur keydown"),t.off("click touchstart"),e.container.off("mousedown"),e.picker.remove(),r.element(h.$window).off("resize scroll",e.view.position)})})}}return e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.getOffset=function(e){if(e){if(!e.getClientRects().length)return{top:0,left:0};var t=function(e){return null!=e&&e===e.window},n=function(e){return t(e)?e:9===e.nodeType&&e.defaultView},r=e.getBoundingClientRect();if(!r.width&&!r.height)return r;var i=e.ownerDocument,o=n(i),a=i.documentElement;return{top:r.top+o.pageYOffset-a.clientTop,left:r.left+o.pageXOffset-a.clientLeft}}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=function(){function e(){this.settings={locale:"en",format:"L LTS",minView:"decade",maxView:"minute",startView:"year",inline:!1,validate:!0,autoclose:!0,setOnSelect:!1,today:!1,keyboard:!1,showHeader:!0,leftArrow:"&larr;",rightArrow:"&rarr;",yearsFormat:"YYYY",monthsFormat:"MMM",daysFormat:"D",hoursFormat:"HH:[00]",hoursStart:0,hoursEnd:23,minutesStep:5,minutesStart:0,minutesEnd:59,secondsFormat:"ss",secondsStep:1,secondsStart:0,secondsEnd:59}}return e.prototype.options=function(e){return r.extend(this.settings,e),r.copy(this.settings)},e.prototype.$get=function(){return this.settings},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),i=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=4,this.rows={}}return e.prototype.render=function(){var e=this.$scope.view.moment.clone().startOf("day").hour(this.provider.hoursStart);this.rows={};for(var t=0;t<=this.provider.hoursEnd-this.provider.hoursStart;t++){var n=Math.floor(t/this.perLine),i=this.$scope.limits.isSelectable(e,"hour");this.rows[n]||(this.rows[n]=[]),this.rows[n].push({index:t,label:e.format(this.provider.hoursFormat),year:e.year(),month:e.month(),date:e.date(),hour:e.hour(),class:[this.$scope.keyboard&&e.isSame(this.$scope.view.moment,"hour")?"highlighted":"",i?r.isValidMoment(this.$ctrl.$modelValue)&&e.isSame(this.$ctrl.$modelValue,"hour")?"selected":"":"disabled"].join(" ").trim(),selectable:i}),e.add(1,"hours")}return this.$scope.view.moment.format("LL")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date).hour(e.hour),this.$scope.view.update(),this.$scope.view.change("hour"))},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),i=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=4,this.rows={}}return e.prototype.render=function(){var e=this.$scope.view.moment.clone(),t=10*Math.floor(e.year()/10)-1;this.rows={},e.year(t);for(var n=0;n<12;n++){var i=Math.floor(n/this.perLine),o=this.$scope.limits.isSelectable(e,"year");this.rows[i]||(this.rows[i]=[]),this.rows[i].push({index:e.year(),label:e.format(this.provider.yearsFormat),year:e.year(),class:[this.$scope.keyboard&&e.isSame(this.$scope.view.moment,"year")?"highlighted":"",!o||[0,11].indexOf(n)>=0?"disabled":r.isValidMoment(this.$ctrl.$modelValue)&&e.isSame(this.$ctrl.$modelValue,"year")?"selected":""].join(" ").trim(),selectable:o}),e.add(1,"years")}return[e.subtract(2,"years").format("YYYY"),e.subtract(9,"years").format("YYYY")].reverse().join(" - ")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year),this.$scope.view.update(),this.$scope.view.change("year"))},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(2),o=n(0),a=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=4,this.rows={}}return e.prototype.render=function(){var e=0,t=this.$scope.view.moment.clone().startOf("hour").minute(this.provider.minutesStart),n=this.provider.minutesFormat||i.localeData(this.$scope.locale).longDateFormat("LT").replace(/[aA]/,"").trim();this.rows={};for(var r=0;r<=this.provider.minutesEnd-this.provider.minutesStart;r+=this.provider.minutesStep){var a=Math.floor(e/this.perLine),s=this.$scope.limits.isSelectable(t,"minute");this.rows[a]||(this.rows[a]=[]),this.rows[a].push({index:t.minute(),label:t.format(n),year:t.year(),month:t.month(),date:t.date(),hour:t.hour(),minute:t.minute(),class:[this.$scope.keyboard&&t.isSame(this.$scope.view.moment,"minute")?"highlighted":"",s?o.isValidMoment(this.$ctrl.$modelValue)&&t.isSame(this.$ctrl.$modelValue,"minute")?"selected":"":"disabled"].join(" ").trim(),selectable:s}),e++,t.add(this.provider.minutesStep,"minutes")}return this.$scope.keyboard&&this.highlightClosest(),this.$scope.view.moment.clone().startOf("hour").format("lll")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date).hour(e.hour).minute(e.minute),this.$scope.view.update(),this.$scope.view.change("minute"))},e.prototype.highlightClosest=function(){var e,t=this,n=[];r.forEach(this.rows,function(e){r.forEach(e,function(e){Math.abs(e.minute-t.$scope.view.moment.minute())<t.provider.minutesStep&&n.push(e)})}),e=n.sort(function(e,n){return Math.abs(e.minute-t.$scope.view.moment.minute())>Math.abs(n.minute-t.$scope.view.moment.minute())?1:0})[0],e&&e.minute-this.$scope.view.moment.minute()!=0&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date).hour(e.hour).minute(e.minute),this.$scope.view.update(),e.selectable&&(e.class=(e.class+" highlighted").trim()))},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(11);t.DecadeView=r.default;var i=n(16);t.YearView=i.default;var o=n(15);t.MonthView=o.default;var a=n(10);t.DayView=a.default;var s=n(12);t.HourView=s.default;var l=n(14);t.MinuteView=l.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(0),o=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=6,this.rows={}}return e.prototype.render=function(){var e=0,t=this.$scope.view.moment.clone().startOf("minute").second(this.provider.secondsStart);this.rows={};for(var n=0;n<=this.provider.secondsEnd-this.provider.secondsStart;n+=this.provider.secondsStep){var r=Math.floor(e/this.perLine),o=this.$scope.limits.isSelectable(t,"second");this.rows[r]||(this.rows[r]=[]),this.rows[r].push({index:t.second(),label:t.format(this.provider.secondsFormat),year:t.year(),month:t.month(),date:t.date(),hour:t.hour(),minute:t.minute(),second:t.second(),class:[this.$scope.keyboard&&t.isSame(this.$scope.view.moment,"second")?"highlighted":"",o?i.isValidMoment(this.$ctrl.$modelValue)&&t.isSame(this.$ctrl.$modelValue,"second")?"selected":"":"disabled"].join(" ").trim(),selectable:o}),e++,t.add(this.provider.secondsStep,"seconds")}return this.$scope.keyboard&&this.highlightClosest(),this.$scope.view.moment.clone().startOf("minute").format("lll")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date).hour(e.hour).minute(e.minute).second(e.second),this.$scope.view.update(),this.$scope.view.change())},e.prototype.highlightClosest=function(){var e,t=this,n=[];r.forEach(this.rows,function(e){r.forEach(e,function(e){Math.abs(e.second-t.$scope.view.moment.second())<t.provider.secondsStep&&n.push(e)})}),e=n.sort(function(e,n){return Math.abs(e.second-t.$scope.view.moment.second())>Math.abs(n.second-t.$scope.view.moment.second())?1:0})[0],e&&e.second-this.$scope.view.moment.second()!=0&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date).hour(e.hour).minute(e.minute).second(e.second),this.$scope.view.update(),e.selectable&&(e.class=(e.class+" highlighted").trim()))},e}();t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=n(2),o=n(0),a=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=i.weekdays().length,this.rows=[]}return e.prototype.render=function(){var e=this,t=this.$scope.view.moment.month(),n=this.$scope.view.moment.clone().startOf("month").startOf("week").hour(12),a={},s=n.week(),l=s+5;this.rows=[];for(var c=s;c<=l;c++)a[c]=Array.apply(null,Array(this.perLine)).map(function(){var r=e.$scope.limits.isSelectable(n,"day"),i={index:n.date(),label:n.format(e.provider.daysFormat),year:n.year(),month:n.month(),date:n.date(),class:[e.$scope.keyboard&&n.isSame(e.$scope.view.moment,"day")?"highlighted":"",e.$scope.today&&n.isSame(new Date,"day")?"today":"",r&&n.month()==t?o.isValidMoment(e.$ctrl.$modelValue)&&n.isSame(e.$ctrl.$modelValue,"day")?"selected":"":"disabled"].join(" ").trim(),selectable:r};return n.add(1,"days"),i});return r.forEach(a,function(t){return e.rows.push(t)}),this.headers=i.weekdays().map(function(t,n){return i().locale(e.$scope.locale).startOf("week").add(n,"day").format("dd")}),this.$scope.view.moment.format("MMMM YYYY")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year).month(e.month).date(e.date),this.$scope.view.update(),this.$scope.view.change("day"))},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),i=n(0),o=function(){function e(e,t,n){this.$scope=e,this.$ctrl=t,this.provider=n,this.perLine=4,this.rows={}}return e.prototype.render=function(){var e=this,t=this.$scope.view.moment.clone().startOf("year"),n=r.monthsShort();return this.rows={},n.forEach(function(n,r){var o=Math.floor(r/e.perLine),a=e.$scope.limits.isSelectable(t,"month");e.rows[o]||(e.rows[o]=[]),e.rows[o].push({index:t.month(),label:t.format(e.provider.monthsFormat),year:t.year(),month:t.month(),class:[e.$scope.keyboard&&t.isSame(e.$scope.view.moment,"month")?"highlighted":"",a?i.isValidMoment(e.$ctrl.$modelValue)&&t.isSame(e.$ctrl.$modelValue,"month")?"selected":"":"disabled"].join(" ").trim(),selectable:a}),t.add(1,"months")}),this.$scope.view.moment.format("YYYY")},e.prototype.set=function(e){e.selectable&&(this.$scope.view.moment.year(e.year).month(e.month),this.$scope.view.update(),this.$scope.view.change("month"))},e}();t.default=o},function(e,t,n){n(5),n(3),e.exports=n(4)}])},function(e,t,n){n(231),e.exports="ngResource"},function(e,t){!function(e,t){"use strict";var n="tooltips",r=function(){var e,n=[],r=0,i=function(e){e-r>=15?(n.forEach(function(e){e()}),r=e):t.console.log("Skipped!")},o=function(){t.clearTimeout(e),e=t.setTimeout(function(){t.requestAnimationFrame(i)},500)},a=function(e){e&&n.push(e)};return{add:function(e){n.length||t.addEventListener("resize",o),a(e)},remove:function(){n.length||(t.clearTimeout(e),t.removeEventListener("resize",o))}}}(),i=function(e){var t={};return e.removeAttr(n),void 0!==e.attr("tooltip-template")&&(t["tooltip-template"]=e.attr("tooltip-template"),e.removeAttr("tooltip-template")),void 0!==e.attr("tooltip-template-url")&&(t["tooltip-template-url"]=e.attr("tooltip-template-url"),e.removeAttr("tooltip-template-url")),void 0!==e.attr("tooltip-template-url-cache")&&(t["tooltip-template-url-cache"]=e.attr("tooltip-template-url-cache"),e.removeAttr("tooltip-template-url-cache")),void 0!==e.attr("tooltip-controller")&&(t["tooltip-controller"]=e.attr("tooltip-controller"),e.removeAttr("tooltip-controller")),void 0!==e.attr("tooltip-side")&&(t["tooltip-side"]=e.attr("tooltip-side"),e.removeAttr("tooltip-side")),void 0!==e.attr("tooltip-show-trigger")&&(t["tooltip-show-trigger"]=e.attr("tooltip-show-trigger"),e.removeAttr("tooltip-show-trigger")),void 0!==e.attr("tooltip-hide-trigger")&&(t["tooltip-hide-trigger"]=e.attr("tooltip-hide-trigger"),e.removeAttr("tooltip-hide-trigger")),void 0!==e.attr("tooltip-smart")&&(t["tooltip-smart"]=e.attr("tooltip-smart"),e.removeAttr("tooltip-smart")),void 0!==e.attr("tooltip-class")&&(t["tooltip-class"]=e.attr("tooltip-class"),e.removeAttr("tooltip-class")),void 0!==e.attr("tooltip-close-button")&&(t["tooltip-close-button"]=e.attr("tooltip-close-button"),e.removeAttr("tooltip-close-button")),void 0!==e.attr("tooltip-size")&&(t["tooltip-size"]=e.attr("tooltip-size"),e.removeAttr("tooltip-size")),void 0!==e.attr("tooltip-speed")&&(t["tooltip-speed"]=e.attr("tooltip-speed"),e.removeAttr("tooltip-speed")),t},o=function(e){return t.getComputedStyle?t.getComputedStyle(e,""):e.currentStyle?e.currentStyle:void 0},a=function(n){for(var r,i,o=t.document.querySelectorAll("._exradicated-tooltip"),a=0,s=o.length;a<s;a+=1)if(r=o.item(a),r&&(i=e.element(r),i.data("_tooltip-parent")&&i.data("_tooltip-parent")===n))return i},s=function(e){var t=a(e);t&&t.remove()},l=function(e){if(e){var n=e[0].getBoundingClientRect();return(n.top<0||n.top>t.document.body.offsetHeight||n.left<0||n.left>t.document.body.offsetWidth||n.bottom<0||n.bottom>t.document.body.offsetHeight||n.right<0||n.right>t.document.body.offsetWidth)&&(e.css({top:"",left:"",bottom:"",right:""}),!0)}throw new Error("You must provide a position")},c=function(){var e={side:"top",showTrigger:"mouseenter",hideTrigger:"mouseleave",class:"",smart:!1,closeButton:!1,size:"",speed:"steady",tooltipTemplateUrlCache:!1};return{configure:function(t){var n,r=Object.keys(e),i=0;if(t)for(;i<r.length;i+=1)n=r[i],n&&t[n]&&(e[n]=t[n])},$get:function(){return e}}},u=["$log","$http","$compile","$timeout","$controller","$injector","tooltipsConf","$templateCache",function(n,c,u,d,f,h,p,g){var m=function(n,h,m,v,_){if(m.tooltipTemplate&&m.tooltipTemplateUrl)throw new Error("You can not define tooltip-template and tooltip-template-url together");if(!m.tooltipTemplateUrl&&!m.tooltipTemplate&&m.tooltipController)throw new Error("You can not have a controller without a template or templateUrl defined");var y,b="_"+p.side,w=p.showTrigger,x=p.hideTrigger,k=p.size,C="_"+p.speed;m.tooltipSide=m.tooltipSide||p.side,m.tooltipShowTrigger=m.tooltipShowTrigger||p.showTrigger,m.tooltipHideTrigger=m.tooltipHideTrigger||p.hideTrigger,m.tooltipClass=m.tooltipClass||p.class,m.tooltipSmart="true"===m.tooltipSmart||p.smart,m.tooltipCloseButton=m.tooltipCloseButton||p.closeButton.toString(),m.tooltipSize=m.tooltipSize||p.size,m.tooltipSpeed=m.tooltipSpeed||p.speed,m.tooltipAppendToBody="true"===m.tooltipAppendToBody,_(n,function(n,p){var v=i(n),_=e.element(t.document.createElement("tooltip")),S=e.element(t.document.createElement("tip-cont")),E=e.element(t.document.createElement("tip")),$=e.element(t.document.createElement("tip-tip")),T=e.element(t.document.createElement("span")),A=e.element(t.document.createElement("tip-arrow")),D=function(){return S.html()},O=function(e){void 0!==e&&S[0].getClientRects().length>1?_.addClass("_multiline"):_.removeClass("_multiline")},P=function(n){if(E.addClass("_hidden"),m.tooltipSmart)switch(m.tooltipSide){case"top":l(E)&&(_.removeClass("_top"),_.addClass("_left"),l(E)&&(_.removeClass("_left"),_.addClass("_bottom"),l(E)&&(_.removeClass("_bottom"),_.addClass("_right"),l(E)&&(_.removeClass("_right"),_.addClass("_top")))));break;case"left":l(E)&&(_.removeClass("_left"),_.addClass("_bottom"),l(E)&&(_.removeClass("_bottom"),_.addClass("_right"),l(E)&&(_.removeClass("_right"),_.addClass("_top"),l(E)&&(_.removeClass("_top"),_.addClass("_left")))));break;case"bottom":l(E)&&(_.removeClass("_bottom"),_.addClass("_left"),l(E)&&(_.removeClass("_left"),_.addClass("_top"),l(E)&&(_.removeClass("_top"),_.addClass("_right"),l(E)&&(_.removeClass("_right"),_.addClass("_bottom")))));break;case"right":l(E)&&(_.removeClass("_right"),_.addClass("_top"),l(E)&&(_.removeClass("_top"),_.addClass("_left"),l(E)&&(_.removeClass("_left"),_.addClass("_bottom"),l(E)&&(_.removeClass("_bottom"),_.addClass("_right")))));break;default:throw new Error("Position not supported")}if(m.tooltipAppendToBody){var r,i,a,c,u,d=o($[0]),f=o(A[0]),h=o(E[0]),p=E[0].getBoundingClientRect(),g=e.copy(E),v=0,y=d.length,b=0,w=f.length,x=0,k=h.length,C={},S={},T={};for(E.removeClass("_hidden"),g.removeClass("_hidden"),g.data("_tooltip-parent",_),s(_);v<y;v+=1)r=d[v],r&&d.getPropertyValue(r)&&(C[r]=d.getPropertyValue(r));for(;b<w;b+=1)r=f[b],r&&f.getPropertyValue(r)&&(T[r]=f.getPropertyValue(r));for(;x<k;x+=1)r=h[x],r&&"position"!==r&&"display"!==r&&"opacity"!==r&&"z-index"!==r&&"bottom"!==r&&"height"!==r&&"left"!==r&&"right"!==r&&"top"!==r&&"width"!==r&&h.getPropertyValue(r)&&(S[r]=h.getPropertyValue(r));i=t.parseInt(h.getPropertyValue("padding-top"),10),a=t.parseInt(h.getPropertyValue("padding-bottom"),10),c=t.parseInt(h.getPropertyValue("padding-left"),10),u=t.parseInt(h.getPropertyValue("padding-right"),10),S.top=p.top+t.pageYOffset+"px",S.left=p.left+t.pageXOffset+"px",S.height=p.height-(i+a)+"px",S.width=p.width-(c+u)+"px",g.css(S),g.children().css(C),g.children().next().css(T),n&&"true"!==m.tooltipHidden&&(g.addClass("_exradicated-tooltip"),e.element(t.document.body).append(g))}else E.removeClass("_hidden"),n&&"true"!==m.tooltipHidden&&_.addClass("active")},R=function(){m.tooltipAppendToBody?s(_):_.removeClass("active")},I=function e(t){var n,r=t.parent();t[0]&&(t[0].scrollHeight>t[0].clientHeight||t[0].scrollWidth>t[0].clientWidth)&&t.on("scroll",function(){var e=this;n&&d.cancel(n),n=d(function(){var t=a(_),n=_[0].getBoundingClientRect(),r=e.getBoundingClientRect();n.top<r.top||n.bottom>r.bottom||n.left<r.left||n.right>r.right?s(_):t&&P(!0)})}),r&&r.length&&e(r)},M=function(e){e?(_.removeClass("_force-hidden"),$.empty(),$.append(T),$.append(e),d(function(){P()})):($.empty(),_.addClass("_force-hidden"))},L=function(e){e&&!m.tooltipTemplateUrlCache?c.get(e).then(function(e){e&&e.data&&(_.removeClass("_force-hidden"),$.empty(),$.append(T),$.append(u(e.data)(p)),d(function(){P()}))}):($.empty(),_.addClass("_force-hidden"))},N=function(e){if(e&&m.tooltipTemplateUrl){var t=g.get(m.tooltipTemplateUrl);"undefined"!=typeof t&&(_.removeClass("_force-hidden"),$.empty(),$.append(T),$.append(u(t)(p)),d(function(){P()}))}else $.empty(),_.addClass("_force-hidden")},j=function(e){e&&(b&&_.removeAttr("_"+b),_.addClass("_"+e),b=e)},F=function(e){e&&(w&&_.off(w),_.on(e,P),w=e)},B=function(e){e&&(x&&_.off(x),_.on(e,R),x=e)},U=function(e){e&&(y&&E.removeClass(y),E.addClass(e),y=e)},z=function(){"boolean"!=typeof m.tooltipSmart&&(m.tooltipSmart="true"===m.tooltipSmart)},q=function(e){var t="true"===e;t?(T.on("click",R),
T.css("display","block")):(T.off("click"),T.css("display","none"))},H=function(t){if(t){var n,r=f(t,{$scope:p}),i=p.$new(!1,p),o=t.indexOf("as");o>=0?(n=t.substr(o+3),i[n]=r):e.extend(i,r),$.replaceWith(u($)(i)),ne()}},V=function(e){e&&(k&&$.removeClass("_"+k),$.addClass("_"+e),k=e)},W=function(e){e&&(C&&_.removeClass("_"+C),_.addClass("_"+e),C=e)},G=m.$observe("tooltipTemplate",M),Y=m.$observe("tooltipTemplateUrl",L),K=m.$observe("tooltipTemplateUrlCache",N),X=m.$observe("tooltipSide",j),J=m.$observe("tooltipShowTrigger",F),Z=m.$observe("tooltipHideTrigger",B),Q=m.$observe("tooltipClass",U),ee=m.$observe("tooltipSmart",z),te=m.$observe("tooltipCloseButton",q),ne=m.$observe("tooltipController",H),re=m.$observe("tooltipSize",V),ie=m.$observe("tooltipSpeed",W),oe=p.$watch(D,O);T.addClass("close-button"),T.html("&times;"),E.addClass("_hidden"),$.append(T),$.append(m.tooltipTemplate),E.append($),E.append(A),S.append(n),_.attr(v),_.addClass("tooltips"),_.append(S),_.append(E),h.after(_),m.tooltipAppendToBody&&(r.add(function(){I(_)}),I(_)),r.add(function(){O(),P()}),d(function(){P(),E.removeClass("_hidden"),_.addClass("_ready")}),p.$on("$destroy",function(){G(),Y(),K(),X(),J(),Z(),Q(),ee(),te(),re(),ie(),oe(),r.remove(),n.off(m.tooltipShowTrigger+" "+m.tooltipHideTrigger)})})};return{restrict:"A",transclude:"element",priority:1,terminal:!0,link:m}}];e.module("720kb.tooltips",[]).provider(n+"Conf",c).directive(n,u)}(angular,window)},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t){var n=e.Deferred(),r=new FileReader;return r.onload=function(e){n.resolve(e.target.result)},r.onerror=n.reject,r.onprogress=n.notify,r.readAsDataURL(t),n.promise()};e.fn.cleanHtml=function(t){if(e(this).data("wysiwyg-html-mode")===!0&&(e(this).html(e(this).text()),e(this).attr("contenteditable",!0),e(this).data("wysiwyg-html-mode",!1)),t===!0&&e(this).parent().is("form")){var n=e(this).html;if(e(n).has("img").length){var r=e("img",e(n)),i=[],o=e(this).parent();e.each(r,function(t,n){e(n).attr("src").match(/^data:image\/.*$/)&&(i.push(r[t]),e(o).prepend("<input value='"+e(n).attr("src")+"' type='hidden' name='postedimage/"+t+"' />"),e(n).attr("src","postedimage/"+t))})}}var a=e(this).html();return a&&a.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},e.fn.wysiwyg=function(n){var r,i,o,a=this,s=function(){i.activeToolbarClass&&e(i.toolbarSelector).find(o).each(function(){var t=e(this).data(i.commandRole).split(" "),n=t[0];t.length>1&&document.queryCommandEnabled(n)&&document.queryCommandValue(n)===t[1]?e(this).addClass(i.activeToolbarClass):1===t.length&&document.queryCommandEnabled(n)&&document.queryCommandState(n)?e(this).addClass(i.activeToolbarClass):e(this).removeClass(i.activeToolbarClass)})},l=function(e,t){var n=e.split(" "),r=n.shift(),i=n.join(" ")+(t||""),o=e.split("-");1===o.length?document.execCommand(r,!1,i):"format"===o[0]&&2===o.length&&document.execCommand("formatBlock",!1,o[1]),a.trigger("change"),s()},c=function(t){e.each(t,function(e,t){a.keydown(e,function(e){a.attr("contenteditable")&&a.is(":visible")&&(e.preventDefault(),e.stopPropagation(),l(t))}).keyup(e,function(e){a.attr("contenteditable")&&a.is(":visible")&&(e.preventDefault(),e.stopPropagation())})}),a.keyup(function(){a.trigger("change")})},u=function(){var e,t;return window.getSelection?(e=window.getSelection(),e.getRangeAt&&e.rangeCount&&(t=e.getRangeAt(0))):document.selection&&(t=document.selection.createRange()),t},d=function(){r=u()},f=function(){var e;if(window.getSelection||document.createRange){if(e=window.getSelection(),r){try{e.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}e.addRange(r)}}else document.selection&&r&&r.select()},h=function(){if(e(a).data("wysiwyg-html-mode")!==!0){var t=e(a).html(),n=e("<pre />");e(n).append(document.createTextNode(t)),e(n).attr("contenteditable",!0),e(a).html(" "),e(a).append(e(n)),e(a).attr("contenteditable",!1),e(a).data("wysiwyg-html-mode",!0),e(n).focus()}else e(a).html(e(a).text()),e(a).attr("contenteditable",!0),e(a).data("wysiwyg-html-mode",!1),e(a).focus()},p=function(n){a.focus(),e.each(n,function(n,r){/^image\//.test(r.type)?e.when(t(r)).done(function(e){l("insertimage",e),a.trigger("image-inserted")}).fail(function(e){i.fileUploadError("file-reader",e)}):i.fileUploadError("unsupported-file-type",r.type)})},g=function(e,t){f(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",!1,t||"transparent"),d(),e.data(i.selectionMarker,t)},m=function(t,n){t.find(o).click(function(){f(),a.focus(),"html"===e(this).data(n.commandRole)?h():l(e(this).data(n.commandRole)),d()}),t.find("[data-toggle=dropdown]").click(f),t.find("input[type=text][data-"+n.commandRole+"]").on("webkitspeechchange change",function(){var t=this.value;this.value="",f(),t&&(a.focus(),l(e(this).data(n.commandRole),t)),d()}).on("focus",function(){var t=e(this);t.data(n.selectionMarker)||(g(t,n.selectionColor),t.focus())}).on("blur",function(){var t=e(this);t.data(n.selectionMarker)&&g(t,!1)}),t.find("input[type=file][data-"+n.commandRole+"]").change(function(){f(),"file"===this.type&&this.files&&this.files.length>0&&p(this.files),d(),this.value=""})},v=function(){a.on("dragenter dragover",!1).on("drop",function(e){var t=e.originalEvent.dataTransfer;e.stopPropagation(),e.preventDefault(),t&&t.files&&t.files.length>0&&p(t.files)})};return i=e.extend(!0,{},e.fn.wysiwyg.defaults,n),o="a[data-"+i.commandRole+"],button[data-"+i.commandRole+"],input[type=button][data-"+i.commandRole+"]",c(i.hotKeys),""!==e(this).attr("placeholder")&&(e(this).addClass("placeholderText"),e(this).html(e(this).attr("placeholder")),e(this).bind("focus",function(){""!==e(this).attr("placeholder")&&e(this).text()===e(this).attr("placeholder")&&(e(this).removeClass("placeholderText"),e(this).html(""))}),e(this).bind("blur",function(){""!==e(this).attr("placeholder")&&""===e(this).text()&&(e(this).addClass("placeholderText"),e(this).html(e(this).attr("placeholder")))})),i.dragAndDropImages&&v(),m(e(i.toolbarSelector),i),a.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){d(),s()}),e(window).bind("touchend",function(e){var t=a.is(e.target)||a.has(e.target).length>0,n=u(),r=n&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset;(!r||t)&&(d(),s())}),this},e.fn.wysiwyg.defaults={hotKeys:{"Ctrl+b meta+b":"bold","Ctrl+i meta+i":"italic","Ctrl+u meta+u":"underline","Ctrl+z":"undo","Ctrl+y meta+y meta+shift+z":"redo","Ctrl+l meta+l":"justifyleft","Ctrl+r meta+r":"justifyright","Ctrl+e meta+e":"justifycenter","Ctrl+j meta+j":"justifyfull","Shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,keypressTimeout:200,fileUploadError:function(e,t){}}}(e)}).call(t,n(1))},function(e,t,n){(function(t){var r,i;window.ng=r=angular.module("notable",["LocalStorageModule","ngResource","ngSanitize","ngDialog","720kb.tooltips","moment-picker","ngTagsInput",n(230),n(499),n(235)]),r.config(["localStorageServiceProvider",function(e){return e.setPrefix("notable")}]),r.config(["$provide",function(e){e.decorator("localStorageService",["$delegate",function(e){var t,n,r;return t="undefined"!=typeof chrome&&null!==chrome&&null!=(r=chrome.storage)?r.sync:void 0,n={get:e.get,remove:e.remove,set:e.set,clearAll:e.clearAll},e.get=function(t){var r,i;try{i=n.get.apply(n,arguments)}catch(e){return r=e,"undefined"!=typeof _errs&&null!==_errs&&_errs.push(r),null}return e.isSupported&&e.cookie.isSupported||i!==!1?i:null},e.remove=function(r){if(n.remove.apply(n,arguments),"user"===r)return null!=t?t.remove(""+e.deriveKey(r)):void 0},e.set=function(r,i){var o;if(n.set.apply(n,arguments),"user"===r)return null!=t?t.set((o={},o[""+e.deriveKey(r)]=angular.fromJson(angular.toJson(i)),o)):void 0},e.clearAll=function(){return n.clearAll.apply(n,arguments),null!=t?t.clear():void 0},e}])}]),r.config(["$compileProvider",function(e){return e.imgSrcSanitizationWhitelist(/^\s*((https?|ftp|file|blob|chrome-extension):|data:image\/)/)}]),r.config(["$qProvider",function(e){return e.errorOnUnhandledRejections(!1)}]),r.config(["ngDialogProvider",function(e){return e.setOpenOnePerName(!0)}]),r.run(["$timeout",function(e){return e(function(){},1500)}]),notable.TRACE&&(i=r.controller,r.controller=function(e,n){var r,o;return Array.isArray(n)?(r=n[n.length-1],o=t.concat(n.slice(0,-1),notable.traceFn(e,r)),i(arguments[0],o)):i(arguments[0],notable.traceFn(e,n))}),e.exports=r}).call(t,n(2))},function(e,t){var n;n=function(){function e(e,t,n,r){var i,o,a,s,l,c;l=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element_shape_layer=o=angular.element(l),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element_drawing_layer=i=angular.element(a),o.css({top:0,position:"absolute",height:"100%",width:"100%"}),i.css({top:0,position:"absolute",height:"100%",width:"100%"}),90!==r&&270!==r||(s=[n,t],t=s[0],n=s[1]),n=Math.floor(500/t*n),t=500,o.attr({id:"painting"+e,"setup-shape":"","setup-eraser":"","ng-class":"annotation_state.is_shape_mode() ? (annotation_state.annotation_mode === 'eraser' ? (annotation_state.pan_with_touch ? 'eraser-mode touch-pan-x-y' : 'eraser-mode touch-none') : 'drawing-mode touch-none' ) : 'no-events'",class:"shape-layer"}),o.data({viewbox_width:t,viewbox_height:n}),i.attr({id:"painting"+e+"-drawing","setup-drawing":"","ng-class":"annotation_state.is_drawing_mode() ? (annotation_state.pan_with_touch ? 'drawing-mode touch-pan-x-y' : 'drawing-mode touch-none') : 'no-events'",class:"drawing-layer"}),i.data({viewbox_width:t,viewbox_height:n}),c="0 0 "+t+" "+n,l.setAttribute("viewBox",c),a.setAttribute("viewBox",c)}return e.prototype.shape_layer=function(e,t,n,r,i,o){var a,s;switch(null==r&&(r="0"),null==i&&(i="0"),null==o&&(o="left top"),e){case 90:a=[n,t],t=a[0],n=a[1],r="100%",i="0";break;case 270:s=[n,t],t=s[0],n=s[1],r="0",i="100%",e=-90;break;default:o="",i=r="0"}return this.element_shape_layer.data("rotation",e),this.element_shape_layer.css({"transform-origin":o,width:t+"px",height:n+"px",top:i,left:r,transform:"rotate("+e+"deg)"})[0]},e.prototype.drawing_layer=function(e,t,n,r,i,o){var a,s;switch(null==r&&(r="0"),null==i&&(i="0"),null==o&&(o="left top"),e){case 90:a=[n,t],t=a[0],n=a[1],r="100%",i="0";break;case 270:s=[n,t],t=s[0],n=s[1],r="0",i="100%",e=-90;break;default:o="",i=r="0"}return this.element_drawing_layer.data("rotation",e),this.element_drawing_layer.css({"transform-origin":o,width:t+"px",height:n+"px",top:i,left:r,transform:"rotate("+e+"deg)"})[0]},e}(),e.exports=n},function(e,t,n){(function(e,t,r,i){var o,a,s,l;a=n(24),null==window.notable&&(window.notable={}),notable.get_absolute_pos=function(t){var n,r;for(e&&t instanceof e&&(t=t.get(0)),n=0,r=0;;)if(isNaN(t.offsetLeft)||(n+=t.offsetLeft),isNaN(t.offsetTop)||(r+=t.offsetTop),!(t=t.offsetParent))break;return{left:n,top:r}},notable.get_absolute_pos_jquery=function(e){var t,n;for(t=0,n=0;;)if(t+=e.position().left,n+=e.position().top,e=e.offsetParent(),"html"===e.prop("tagName").toLowerCase())break;return{left:t,top:n}},s=n(11),notable.get_highlighter=function(e,t){var n;return null==t&&(t="TextRange"),s.init(),n=s.createHighlighter(document,t),n.addClassApplier(s.createCssClassApplier(e)),n},notable.set_end_of_content_editable=function(e){var t,n;return t=void 0,n=void 0,document.createRange?(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),n=window.getSelection(),n.removeAllRanges(),n.addRange(t)):document.selection?(t=document.body.createTextRange(),t.moveToElementText(e),t.collapse(!1),t.select()):void 0},notable.matrixToArray=function(e){return e.match(/(-?[0-9\.]+)/g)},notable.remove_cursor_styling=function(e){return t("html").css("cursor","")},notable.page_scale=function(){var e;return"undefined"!=typeof PDFViewerApplication&&null!==PDFViewerApplication&&null!=(e=PDFViewerApplication.pdfViewer)?e.currentScale:void 0},notable.reset_scale=function(e){var t;return t=notable.page_scale(),e/t},notable.restore_scale=function(e){var t;return t=notable.page_scale(),e*t},notable.coordinates_for_centered_rotation=function(e,t,n,r,i,o){switch(e=(e+=360)%360){case 270:n-=(i-o)/2,r-=(i+o)/2;break;case 180:n-=i,r-=o;break;case 90:n-=(i+o)/2,r+=(i-o)/2;break;case 0:n=n,r=r}switch(t){case 270:n+=(i-o)/2,r+=(i+o)/2;break;case 180:n+=i,r+=o;break;case 90:n+=(i+o)/2,r-=(i-o)/2;break;case 0:n=n,r=r}return[n,r]},notable.revert_rotated_coordinates=function(e,t,n,r,i,o){var a,s;switch(Math.abs(PDFView.pageRotation)){case 0:a=e,s=t;break;case 90:a=t,s=i-e-r;break;case 180:a=i-e-n,s=o-t-r;break;case 270:a=o-t-n,s=e}return[a,s]},notable.adjust_for_rotation=function(e,t,n,r,i,o){var a,s,l;switch(null==n&&(n=0),null==r&&(r=0),Math.abs(PDFView.pageRotation)){case 90:l=e,s=i-t-n;break;case 180:l=o-t-r,s=i-e-n;break;case 270:l=o-e-r,s=t;break;default:a=[e,t],s=a[0],l=a[1]}return[s,l]},notable.support_xhr2=function(){return"FormData"in window},notable.support_caches=function(){return"caches"in window},notable.is_embed="embed.kamihq.com"===document.domain||"embed.local.kamipdf.com"===document.domain,notable.is_extension=!!("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0),notable.is_web=!notable.is_embed&&!notable.is_extension,notable.version_name=notable.is_embed?"Notable PDF Embed Version":notable.is_extension?"Notable PDF":"Notable PDF Web Version",notable.getDeployment=r.once(function(){return notable.is_embed?"embed":notable.is_extension?"extension":"web"}),Detectizr.detect(),notable.operating_system=r.once(function(){var e,t,n;return/CrOS/.test(null!=(e=window.navigator)?e.userAgent:void 0)?"Chrome OS":("undefined"!=typeof Detectizr&&null!==Detectizr&&null!=(t=Detectizr.os)?t.name:void 0)+" "+("undefined"!=typeof Detectizr&&null!==Detectizr&&null!=(n=Detectizr.os)?n.version:void 0)}),notable.os=r.once(function(){var e,t;return/CrOS/.test(null!=(e=window.navigator)?e.userAgent:void 0)?"chromeos":"undefined"!=typeof Detectizr&&null!==Detectizr&&null!=(t=Detectizr.os)?t.name:void 0}),notable.scrollbarSize=function(){var e,n;return e=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),n=t("<div>").css({width:"100%"}).appendTo(e).outerWidth(),e.remove(),100-n},notable.days_since_signup=function(e){var t,n;return t=new Date(e.created_at),n=Math.round(Math.abs((t.getTime()-new Date)/864e5))},t.fn.redraw=function(){t(this).each(function(){return this.offsetHeight})},notable.apply=function(e,t){return e.$$phase?t():e.$apply(function(){return t()})},notable.get_clicked_page_xy=function(e,n){var r,i,o,a,s;switch(o=t(n).offset(),r=e.pageX-o.left+document.body.scrollLeft,i=e.pageY-o.top+document.body.scrollTop,o=notable.screen_to_pdf({x:r,y:i}),a=0,s=0,PDFView.pageRotation){case 90:s=n.width();break;case 180:a=n.width(),s=n.height();break;case 270:a=n.height()}return{left:o.x+notable.reset_scale(a),top:o.y+notable.reset_scale(s)}},notable.sign=function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},notable.encode_query_string=function(e){return Object.keys(e).map(function(t){return[t,e[t]].map(encodeURIComponent).join("=")}).join("&")},notable.deg2rad=function(e){return e*Math.PI/180},notable.rotate=function(e,t){var n,r;return n=Math.cos(t)*e.x-Math.sin(t)*e.y,r=Math.sin(t)*e.x+Math.cos(t)*e.y,{x:n,y:r}},notable.screen_to_pdf=function(e){var t,n,r;return n=notable.reset_scale(e.x),r=notable.reset_scale(e.y),t=notable.deg2rad(PDFView.pageRotation),notable.rotate({x:n,y:r},-t)},notable.pdf_to_screen=function(e){var t,n,r;return n=notable.restore_scale(e.x),r=notable.restore_scale(e.y),t=notable.deg2rad(PDFView.pageRotation),notable.rotate({x:n,y:r},t)},window.gapi_loaded=function(){return angular.element(document).ready(function(){var e,t;if(e=null!=(t=angular.element(document).injector())?t.get("$rootScope"):void 0,null!=e)return e.$apply(function(){return e.$broadcast("gapi_loaded")})})},window.report_metrics=function(e){var t;return t=angular.element(document.body).injector().get("PerformanceMetrics"),t.reportMetrics(e)},notable.redirect_whitelist=["upgrade.html"],notable.redirect_if_needed=function(e){if(r.includes(notable.redirect_whitelist,e.redirect))return window.location=e.redirect},notable.get_support_mailto=function(e){var t,n;try{n=JSON.parse(localStorage.getItem("notable.user")).id}catch(e){n=""}return t=encodeURIComponent("\n\n\n\n\n\n\n -------- Diagnostic information below. Please do not edit. --------\n User ID: "+n+"\n Version: 2.0.9593-20180301035713\n Deployment: "+notable.version_name+"\n URL: "+window.location.href+"\n OS: "+notable.operating_system()+"\n UserAgent: "+Detectizr.browser.userAgent+"\n Timestamp: "+a().toISOString()+"\n "+e),"mailto:support@kamihq.com?body="+t},notable.hex_to_rgb=function(e){var t,n;return null==e?{r:0,g:0,b:0}:(n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=e.replace(n,function(e,t,n,r){return t+t+n+n+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:void 0)},notable.get_version=function(){return"2.0.9593-20180301035713"},window.notable.host="https://web.kamihq.com/api",notable.bytes_to_string=function(e){var t,n,r,i;return t=e/Math.pow(2,30),t>1?i=t.toFixed(2)+"GB":(r=e/Math.pow(2,20),r>1?i=r.toFixed(2)+"MB":(n=e/Math.pow(2,10),i=n.toFixed(2)+"kb")),i},notable.trace=function(e,t){var n;return n=t()},notable.traceFn=function(e,t){return function(){var e;return!r.isFunction(t),e=t.apply(null,arguments)}},notable.get_anchor_page_no=function(){var e;return e=1,TwoPageViewMode.active&&(TwoPageViewMode.showCoverPage?TwoPageViewMode.numPages>=3&&(e=3):TwoPageViewMode.numPages>=2&&(e=2)),e},notable.decimal_to_percent=function(e){return 100*e+"%"},notable.trim=function(e,t){var n,r,i,o,a,s;for(s=0,r=e.length,i=0,a=e.length;i<a&&(n=e[i],t.test(n));i++)s++;for(o=e.length-1;o>=0&&(n=e[o],t.test(n));o+=-1)r--;return e.slice(s,r)},o=function(e,t){var n,r,i,o,a,s;for(n=e,i=0,r=o=0,a=t.length;o<a;r=++o)s=t[r],Math.abs(e-s)<=n&&(i=r,n=Math.abs(e-s));return t[i]},l=[0,22.5,45,67.5,90].map(function(e){return e/180*Math.PI}),notable.snap_line=function(e,t,n,r,i){var a,s,c,u,d,f,h;return null==i&&(i=l),s=n-e,u=r-t,f=Math.sqrt(s*s+u*u),a=Math.abs(Math.atan(u/s)),h=o(a,i),c=f*Math.cos(h),d=f*Math.sin(h),[e+(s>0?c:-c),t+(u>0?d:-d)]},i.export=notable,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r,i,o,a;for(i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=new Uint8Array(a),o=0;o<a;)r[o]=i.charCodeAt(o),o++;e(new Blob([r],{type:t||"image/png"}))}}),notable.decompose_matrix=function(e){var t,n,i,o,a,s,l,c,u,d,f,h,p,g,m,v,_,y;if("string"==typeof e){try{y=e.split("(")[1],y=y.split(")")[0],y=y.split(","),e={a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]},e=r.mapValues(e,function(e){return parseFloat(e.trim())})}catch(e){c=e}n=Math.acos,i=Math.atan,v=Math.sqrt,d=Math.PI,t=e.a,o=e.b,a=e.c,s=e.d,c=e.e,u=e.f,_={x:c,y:u},h=0,g={x:1,y:1},m={x:0,y:0},l=t*s-o*a,t?(m={x:i(a/t),y:i(o/t)},g={x:t,y:l/t}):o?(h=.5*d,g={x:o,y:l/o},m.x=i(s/o)):(g={x:a,y:s},m.x=.25*d),t||o?(f=v(t*t+o*o),h=o>0?n(t/f):-n(t/f),g={x:f,y:l/f},m.x=i((t*a+o*s)/(f*f))):a||s?(p=v(a*a+s*s),h=.5*d-(s>0?n(-a/p):-n(a/p)),g={x:l/p,y:p},m.y=i((t*a+o*s)/(p*p))):g={x:0,y:0}}return{translate:_,rotation:h,scale:g,skew:m}},notable.get_page_dimensions=r.memoize(function(e,n,r){var i;return i=t("#pageContainer"+r),{width:i.width(),height:i.height()}},function(e,t,n){return e+","+t+","+n})}).call(t,n(1),n(1),n(2),n(41)(e))},,,,,function(e,t,n){(function(e){!function(e){var t=e(window);e.fn.visible=function(e,n,r){if(!(this.length<1)){var i=this.length>1?this.eq(0):this,o=i.get(0),a=t.width(),s=t.height(),r=r?r:"both",l=n!==!0||o.offsetWidth*o.offsetHeight;if("function"==typeof o.getBoundingClientRect){var c=o.getBoundingClientRect(),u=c.top>=0&&c.top<s,d=c.bottom>0&&c.bottom<=s,f=c.left>=0&&c.left<a,h=c.right>0&&c.right<=a,p=e?u||d:u&&d,g=e?f||h:f&&h;if("both"===r)return l&&p&&g;if("vertical"===r)return l&&p;if("horizontal"===r)return l&&g}else{var m=t.scrollTop(),v=m+s,_=t.scrollLeft(),y=_+a,b=i.offset(),w=b.top,x=w+i.height(),k=b.left,C=k+i.width(),S=e===!0?x:w,E=e===!0?w:x,$=e===!0?C:k,T=e===!0?k:C;if("both"===r)return!!l&&E<=v&&S>=m&&T<=y&&$>=_;if("vertical"===r)return!!l&&E<=v&&S>=m;if("horizontal"===r)return!!l&&T<=y&&$>=_}}}}(e)}).call(t,n(1))},function(e,t,n){(function(e,t){!function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,r=t.data.keys.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!(e.hotkeys.options.filterInputAcceptingElements&&e.hotkeys.textInputTypes.test(t.target.nodeName)||e.hotkeys.options.filterContentEditable&&e(t.target).attr("contenteditable")||e.hotkeys.options.filterTextInputs&&e.inArray(t.target.type,e.hotkeys.textAcceptingInputTypes)>-1)){var i="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],o=String.fromCharCode(t.which).toLowerCase(),a="",s={};e.each(["alt","ctrl","shift"],function(e,n){t[n+"Key"]&&i!==n&&(a+=n+"+")}),t.metaKey&&!t.ctrlKey&&"meta"!==i&&(a+="meta+"),t.metaKey&&"meta"!==i&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),i?s[a+i]=!0:(s[a+o]=!0,s[a+e.hotkeys.shiftNums[o]]=!0,"shift+"===a&&(s[e.hotkeys.shiftNums[o]]=!0));for(var l=0,c=r.length;l<c;l++)if(s[r[l]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(e||this.jQuery||t)}).call(t,n(1),n(1))},function(e,t,n){(function(e,r){var i;(function(){function o(e,t){function n(e){if(n[e]!==m)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&y;if(u){(a=function(){return 1}).toJSON=a;try{u="0"===c(0)&&"0"===c(new r)&&'""'==c(new i)&&c(_)===m&&c(m)===m&&c()===m&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([m])&&"null"==c(null)&&"[null,null,null]"==c([m,_,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(e){u=!1}}o=u}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){a=d(s);var f=5==a.a.length&&1===a.a[0];if(f){try{f=!d('"\t"')}catch(e){}if(f)try{f=1!==d("01")}catch(e){}if(f)try{f=1!==d("1.")}catch(e){}}}}catch(e){f=!1}o=f}}return n[e]=!!o}e||(e=c.Object()),t||(t=c.Object());var r=e.Number||c.Number,i=e.String||c.String,a=e.Object||c.Object,l=e.Date||c.Date,u=e.SyntaxError||c.SyntaxError,d=e.TypeError||c.TypeError,f=e.Math||c.Math,h=e.JSON||c.JSON;"object"==typeof h&&h&&(t.stringify=h.stringify,t.parse=h.parse);var p,g,m,v=a.prototype,_=v.toString,y=new l(-0xc782b5b800cec);try{y=y.getUTCFullYear()==-109252&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}if(!n("json")){var b="[object Function]",w="[object Date]",x="[object Number]",k="[object String]",C="[object Array]",S="[object Boolean]",E=n("bug-string-char-index");if(!y)var $=f.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return T[t]+365*(e-1970)+$((e-1969+(t=+(t>1)))/4)-$((e-1901+t)/100)+$((e-1601+t)/400)};if((p=v.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=_?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)p.call(r,i)&&o++;return n=r=null,o?g=2==o?function(e,t){var n,r={},i=_.call(e)==b;for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i=_.call(e)==b;for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,o=_.call(e)==b,a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O="000000",P=function(e,t){return(O+(t||0)).slice(-e)},R="\\u00",I=function(e){for(var t='"',n=0,r=e.length,i=!E||r>10,o=i&&(E?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[a];break;default:if(a<32){t+=R+P(2,a.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},M=function(e,t,n,r,i,o,a){var s,l,c,u,f,h,v,y,b,E,T,D,O,R,L,N;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if(l=_.call(s),l!=w||p.call(s,"toJSON"))"function"==typeof s.toJSON&&(l!=x&&l!=k&&l!=C||p.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(A){for(f=$(s/864e5),c=$(f/365.2425)+1970-1;A(c+1,0)<=f;c++);for(u=$((f-A(c,0))/30.42);A(c,u+1)<=f;u++);f=1+f-A(c,u),h=(s%864e5+864e5)%864e5,v=$(h/36e5)%24,y=$(h/6e4)%60,b=$(h/1e3)%60,E=h%1e3}else c=s.getUTCFullYear(),u=s.getUTCMonth(),f=s.getUTCDate(),v=s.getUTCHours(),y=s.getUTCMinutes(),b=s.getUTCSeconds(),E=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+P(6,c<0?-c:c):P(4,c))+"-"+P(2,u+1)+"-"+P(2,f)+"T"+P(2,v)+":"+P(2,y)+":"+P(2,b)+"."+P(3,E)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(l=_.call(s),l==S)return""+s;if(l==x)return s>-1/0&&s<1/0?""+s:"null";if(l==k)return I(""+s);if("object"==typeof s){for(R=a.length;R--;)if(a[R]===s)throw d();if(a.push(s),T=[],L=o,o+=i,l==C){for(O=0,R=s.length;O<R;O++)D=M(O,s,n,r,i,o,a),T.push(D===m?"null":D);N=T.length?i?"[\n"+o+T.join(",\n"+o)+"\n"+L+"]":"["+T.join(",")+"]":"[]"}else g(r||s,function(e){var t=M(e,s,n,r,i,o,a);t!==m&&T.push(I(e)+":"+(i?" ":"")+t)}),N=T.length?i?"{\n"+o+T.join(",\n"+o)+"\n"+L+"}":"{"+T.join(",")+"}":"{}";return a.pop(),N}};t.stringify=function(e,t,n){var r,i,o,a;if(s[typeof t]&&t)if((a=_.call(t))==b)i=t;else if(a==C){o={};for(var l,c=0,u=t.length;c<u;l=t[c++],a=_.call(l),(a==k||a==x)&&(o[l]=1));}if(n)if((a=_.call(n))==x){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==k&&(r=n.length<=10?n:n.slice(0,10));return M("",(l={},l[""]=e,l),i,o,r,"",[])}}if(!n("json-parse")){var L,N,j=i.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},B=function(){throw L=N=null,u()},U=function(){for(var e,t,n,r,i,o=N,a=o.length;L<a;)switch(i=o.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=E?o.charAt(L):o[L],L++,e;case 34:for(e="@",L++;L<a;)if(i=o.charCodeAt(L),i<32)B();else if(92==i)switch(i=o.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[i],L++;break;case 117:for(t=++L,n=L+4;L<n;L++)i=o.charCodeAt(L),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||B();e+=j("0x"+o.slice(t,L));break;default:B()}else{if(34==i)break;for(i=o.charCodeAt(L),t=L;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++L);e+=o.slice(t,L)}if(34==o.charCodeAt(L))return L++,e;B();default:if(t=L,45==i&&(r=!0,i=o.charCodeAt(++L)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(L+1),i>=48&&i<=57)&&B(),r=!1;L<a&&(i=o.charCodeAt(L),i>=48&&i<=57);L++);if(46==o.charCodeAt(L)){for(n=++L;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==L&&B(),L=n}if(i=o.charCodeAt(L),101==i||69==i){for(i=o.charCodeAt(++L),43!=i&&45!=i||L++,n=L;n<a&&(i=o.charCodeAt(n),i>=48&&i<=57);n++);n==L&&B(),L=n}return+o.slice(t,L)}if(r&&B(),"true"==o.slice(L,L+4))return L+=4,!0;if("false"==o.slice(L,L+5))return L+=5,!1;if("null"==o.slice(L,L+4))return L+=4,null;B()}return"$"},z=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(E?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=U(),"]"!=e;n||(n=!0))n&&(","==e?(e=U(),"]"==e&&B()):B()),","==e&&B(),t.push(z(e));return t}if("{"==e){for(t={};e=U(),"}"!=e;n||(n=!0))n&&(","==e?(e=U(),"}"==e&&B()):B()),","!=e&&"string"==typeof e&&"@"==(E?e.charAt(0):e[0])&&":"==U()||B(),t[e.slice(1)]=z(U());return t}B()}return e},q=function(e,t,n){var r=H(e,t,n);r===m?delete e[t]:e[t]=r},H=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(_.call(i)==C)for(r=i.length;r--;)q(i,r,n);else g(i,function(e){q(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return L=0,N=""+e,n=z(U()),"$"!=U()&&B(),L=N=null,t&&_.call(t)==b?H((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var a=n(564),s={function:!0,object:!0},l=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,u=l&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),l&&!a)o(c,l);else{var d=c.JSON,f=c.JSON3,h=!1,p=o(c,c.JSON3={noConflict:function(){return h||(h=!0,c.JSON=d,c.JSON3=f,d=f=null),p}});c.JSON={parse:p.parse,stringify:p.stringify}}a&&(i=function(){return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}).call(this)}).call(t,n(41)(e),n(8))},function(e,t){!function(){"use strict";function e(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var n=document.createElement("span");n.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),n.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var r=document.createElement("span");r.classList.add(t.CssClasses_.MDL_RIPPLE),n.appendChild(r),e.appendChild(n)}e.addEventListener("click",function(n){if("#"===e.getAttribute("href").charAt(0)){n.preventDefault();var r=e.href.split("#")[1],i=t.element_.querySelector("#"+r);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),i.classList.add(t.CssClasses_.ACTIVE_CLASS)}})}}function t(e,t,n,r){function i(){var i=e.href.split("#")[1],o=r.content_.querySelector("#"+i);r.resetTabState_(t),r.resetPanelState_(n),e.classList.add(r.CssClasses_.IS_ACTIVE),o.classList.add(r.CssClasses_.IS_ACTIVE)}if(r.tabBar_.classList.contains(r.CssClasses_.JS_RIPPLE_EFFECT)){var o=document.createElement("span");o.classList.add(r.CssClasses_.RIPPLE_CONTAINER),o.classList.add(r.CssClasses_.JS_RIPPLE_EFFECT);var a=document.createElement("span");a.classList.add(r.CssClasses_.RIPPLE),o.appendChild(a),e.appendChild(o)}r.tabBar_.classList.contains(r.CssClasses_.TAB_MANUAL_SWITCH)||e.addEventListener("click",function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),i())}),e.show=i}/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};n=function(){function e(e,t){for(var n=0;n<f.length;n++)if(f[n].className===e)return"undefined"!=typeof t&&(f[n]=t),f[n];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function n(e,n){var r=t(e);return r.indexOf(n)!==-1}function r(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function i(t,n){if("undefined"==typeof t&&"undefined"==typeof n)for(var r=0;r<f.length;r++)i(f[r].className,f[r].cssClass);else{var a=t;if("undefined"==typeof n){var s=e(a);s&&(n=s.cssClass)}for(var l=document.querySelectorAll("."+n),c=0;c<l.length;c++)o(l[c],a)}}function o(i,o){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var a=r("mdl-componentupgrading",!0,!0);if(i.dispatchEvent(a),!a.defaultPrevented){var s=t(i),l=[];if(o)n(i,o)||l.push(e(o));else{var c=i.classList;f.forEach(function(e){c.contains(e.cssClass)&&l.indexOf(e)===-1&&!n(i,e.className)&&l.push(e)})}for(var u,d=0,g=l.length;d<g;d++){if(u=l[d],!u)throw new Error("Unable to find a registered component for the given class.");s.push(u.className),i.setAttribute("data-upgraded",s.join(","));var m=new u.classConstructor(i);m[p]=u,h.push(m);for(var v=0,_=u.callbacks.length;v<_;v++)u.callbacks[v](i);u.widget&&(i[u.className]=m);var y=r("mdl-componentupgraded",!0,!1);i.dispatchEvent(y)}}}function a(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var t,n=0,r=e.length;n<r;n++)t=e[n],t instanceof HTMLElement&&(o(t),t.children.length>0&&a(t.children))}function s(t){var n="undefined"==typeof t.widget&&"undefined"==typeof t.widget,r=!0;n||(r=t.widget||t.widget);var i={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:r,callbacks:[]};if(f.forEach(function(e){if(e.cssClass===i.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===i.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(p))throw new Error("MDL component classes must not have "+p+" defined as a property.");var o=e(t.classAsString,i);o||f.push(i)}function l(t,n){var r=e(t);r&&r.callbacks.push(n)}function c(){for(var e=0;e<f.length;e++)i(f[e].className)}function u(e){if(e){var t=h.indexOf(e);h.splice(t,1);var n=e.element_.getAttribute("data-upgraded").split(","),i=n.indexOf(e[p].classAsString);n.splice(i,1),e.element_.setAttribute("data-upgraded",n.join(","));var o=r("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(o)}}function d(e){var t=function(e){h.filter(function(t){return t.element_===e}).forEach(u)};if(e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t(e[n]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}var f=[],h=[],p="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:o,upgradeElements:a,upgradeAllRegistered:c,registerUpgradedCallback:l,register:s,downgradeElements:d}}(),n.ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var r=["webkit","moz"],i=0;i<r.length&&!window.requestAnimationFrame;++i){var o=r[i];window.requestAnimationFrame=window[o+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var a=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(a+16,t);return setTimeout(function(){e(a=n)},n-t)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s=function(e){this.element_=e,this.init()};window.MaterialButton=s,s.prototype.Constant_={},s.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},s.prototype.blurHandler_=function(e){e&&this.element_.blur()},s.prototype.disable=function(){this.element_.disabled=!0},s.prototype.disable=s.prototype.disable,s.prototype.enable=function(){this.element_.disabled=!1},s.prototype.enable=s.prototype.enable,s.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},n.register({constructor:s,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var l=function(e){this.element_=e,this.init()};window.MaterialCheckbox=l,l.prototype.Constant_={TINY_TIMEOUT:.001},l.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},l.prototype.onChange_=function(e){this.updateClasses_()},l.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},l.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},l.prototype.onMouseUp_=function(e){this.blur_()},l.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},l.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},l.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},l.prototype.checkToggleState=l.prototype.checkToggleState,l.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},l.prototype.checkDisabled=l.prototype.checkDisabled,l.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},l.prototype.enable=l.prototype.enable,l.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},l.prototype.check=l.prototype.check,l.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},l.prototype.uncheck=l.prototype.uncheck,l.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(n),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(r),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:l,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var c=function(e){this.element_=e,this.init()};window.MaterialIconToggle=c,c.prototype.Constant_={TINY_TIMEOUT:.001},c.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},c.prototype.onChange_=function(e){this.updateClasses_()},c.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},c.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},c.prototype.onMouseUp_=function(e){this.blur_()},c.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},c.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},c.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},c.prototype.checkToggleState=c.prototype.checkToggleState,c.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},c.prototype.checkDisabled=c.prototype.checkDisabled,c.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},c.prototype.disable=c.prototype.disable,c.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},c.prototype.enable=c.prototype.enable,c.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},c.prototype.check=c.prototype.check,c.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},c.prototype.uncheck=c.prototype.uncheck,c.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:c,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u=function(e){this.element_=e,this.init()};window.MaterialMenu=u,u.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},u.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},u.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},u.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var n=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),r=null;n&&(r=document.getElementById(n),r&&(this.forElement_=r,r.addEventListener("click",this.handleForClick_.bind(this)),r.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var i=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var o=0;o<i.length;o++)i[o].addEventListener("click",this.boundItemClick_),i[o].tabIndex="-1",i[o].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),o=0;o<i.length;o++){var a=i[o],s=document.createElement("span");s.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement("span");l.classList.add(this.CssClasses_.RIPPLE),s.appendChild(l),a.appendChild(s),a.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},u.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),n=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=n.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.bottom=n.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},u.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},u.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var n=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),n>0?t[n-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>n+1?t[n+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var r=new MouseEvent("mousedown");e.target.dispatchEvent(r),r=new MouseEvent("mouseup"),e.target.dispatchEvent(r),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},u.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},u.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},u.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(u.prototype.CssClasses_.IS_ANIMATING)},u.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},u.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,n=this.element_.getBoundingClientRect().width;this.container_.style.width=n+"px",this.container_.style.height=t+"px",this.outline_.style.width=n+"px",this.outline_.style.height=t+"px";for(var r=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,i=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),o=0;o<i.length;o++){var a=null;a=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-i[o].offsetTop-i[o].offsetHeight)/t*r+"s":i[o].offsetTop/t*r+"s",i[o].style.transitionDelay=a}this.applyClip_(t,n),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+n+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var s=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",s),this.hide())}.bind(this);document.addEventListener("click",s)}},u.prototype.show=u.prototype.show,u.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var n=this.element_.getBoundingClientRect(),r=n.height,i=n.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(r,i),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},u.prototype.hide=u.prototype.hide,u.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},u.prototype.toggle=u.prototype.toggle,n.register({constructor:u,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var d=function(e){this.element_=e,this.init()};window.MaterialProgress=d,d.prototype.Constant_={},d.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},d.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},d.prototype.setProgress=d.prototype.setProgress,d.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},d.prototype.setBuffer=d.prototype.setBuffer,d.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},n.register({constructor:d,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f=function(e){this.element_=e,this.init()};window.MaterialRadio=f,f.prototype.Constant_={TINY_TIMEOUT:.001},f.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},f.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),n=0;n<t.length;n++){var r=t[n].querySelector("."+this.CssClasses_.RADIO_BTN);r.getAttribute("name")===this.btnElement_.getAttribute("name")&&"undefined"!=typeof t[n].MaterialRadio&&t[n].MaterialRadio.updateClasses_()}},f.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},f.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},f.prototype.onMouseup_=function(e){this.blur_()},f.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},f.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},f.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},f.prototype.checkDisabled=f.prototype.checkDisabled,f.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},f.prototype.checkToggleState=f.prototype.checkToggleState,f.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},f.prototype.disable=f.prototype.disable,f.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},f.prototype.enable=f.prototype.enable,f.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},f.prototype.check=f.prototype.check,f.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},f.prototype.uncheck=f.prototype.uncheck,f.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t=document.createElement("span");t.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(t);var n;if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),n=document.createElement("span"),n.classList.add(this.CssClasses_.RIPPLE_CONTAINER),n.classList.add(this.CssClasses_.RIPPLE_EFFECT),n.classList.add(this.CssClasses_.RIPPLE_CENTER),n.addEventListener("mouseup",this.boundMouseUpHandler_);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),n.appendChild(r),this.element_.appendChild(n)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:f,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var h=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=h,h.prototype.Constant_={},h.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},h.prototype.onInput_=function(e){this.updateValueStyles_()},h.prototype.onChange_=function(e){this.updateValueStyles_()},h.prototype.onMouseUp_=function(e){e.target.blur()},h.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},h.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},h.prototype.disable=function(){this.element_.disabled=!0},h.prototype.disable=h.prototype.disable,h.prototype.enable=function(){this.element_.disabled=!1},h.prototype.enable=h.prototype.enable,h.prototype.change=function(e){"undefined"!=typeof e&&(this.element_.value=e),this.updateValueStyles_()},h.prototype.change=h.prototype.change,h.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var n=document.createElement("div");n.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(n),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),n.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),n.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:h,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var p=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=p,p.prototype.Constant_={ANIMATION_LENGTH:250},p.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},p.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},p.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},p.prototype.showSnackbar=p.prototype.showSnackbar,p.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},p.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},p.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},n.register({constructor:p,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(e){this.element_=e,this.init()};window.MaterialSpinner=g,g.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},g.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},g.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,r,i],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},g.prototype.createLayer=g.prototype.createLayer,g.prototype.stop=function(){this.element_.classList.remove("is-active")},g.prototype.stop=g.prototype.stop,g.prototype.start=function(){this.element_.classList.add("is-active")},g.prototype.start=g.prototype.start,g.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},n.register({constructor:g,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var m=function(e){this.element_=e,this.init()};window.MaterialSwitch=m,m.prototype.Constant_={TINY_TIMEOUT:.001},m.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},m.prototype.onChange_=function(e){this.updateClasses_()},m.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},m.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},m.prototype.onMouseUp_=function(e){this.blur_()},m.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},m.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},m.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},m.prototype.checkDisabled=m.prototype.checkDisabled,m.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},m.prototype.checkToggleState=m.prototype.checkToggleState,m.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},m.prototype.disable=m.prototype.disable,m.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},m.prototype.enable=m.prototype.enable,m.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},m.prototype.on=m.prototype.on,m.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},m.prototype.off=m.prototype.off,m.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(n),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(r),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:m,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v=function(e){this.element_=e,this.init()};window.MaterialTabs=v,v.prototype.Constant_={},v.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},v.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new e(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},v.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},v.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},v.prototype.init=function(){this.element_&&this.initTabs_()},n.register({constructor:v,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=_,_.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},_.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},_.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},_.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},_.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_.prototype.onReset_=function(e){this.updateClasses_()},_.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},_.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},_.prototype.checkDisabled=_.prototype.checkDisabled,_.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_.prototype.checkFocus=_.prototype.checkFocus,_.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},_.prototype.checkValidity=_.prototype.checkValidity,_.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},_.prototype.checkDirty=_.prototype.checkDirty,_.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},_.prototype.disable=_.prototype.disable,_.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},_.prototype.enable=_.prototype.enable,_.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},_.prototype.change=_.prototype.change,_.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},n.register({constructor:_,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var y=function(e){this.element_=e,this.init()};window.MaterialTooltip=y,y.prototype.Constant_={},y.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},y.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,i=-1*(this.element_.offsetWidth/2),o=-1*(this.element_.offsetHeight/2);this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(n=t.width/2,r+o<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=r+"px",this.element_.style.marginTop=o+"px")):n+i<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=n+"px",this.element_.style.marginLeft=i+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},y.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},y.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},n.register({constructor:y,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(e){this.element_=e,this.init()};window.MaterialLayout=b,b.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},b.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},b.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},b.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},b.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},b.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},b.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},b.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},b.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},b.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},b.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},b.prototype.toggleDrawer=b.prototype.toggleDrawer,b.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var n=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),n&&n.focus();for(var r=this.element_.childNodes,i=r.length,o=0;o<i;o++){var a=r[o];a.classList&&a.classList.contains(this.CssClasses_.HEADER)&&(this.header_=a),a.classList&&a.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=a),a.classList&&a.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=a)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var s=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?s=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(s=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(s=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),s===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):s===this.Mode_.SEAMED||s===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):s===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var l=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!l){l=document.createElement("div"),l.setAttribute("aria-expanded","false"),l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.classList.add(this.CssClasses_.DRAWER_BTN);var c=document.createElement("i");c.classList.add(this.CssClasses_.ICON),c.innerHTML=this.Constant_.MENU_ICON,l.appendChild(c)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?l.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&l.classList.add(this.CssClasses_.ON_SMALL_SCREEN),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),l.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(l,this.header_.firstChild):this.element_.insertBefore(l,this.content_);var u=document.createElement("div");u.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(u),u.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=u,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var f=document.createElement("div");f.classList.add(this.CssClasses_.TAB_BAR_BUTTON),f.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var h=document.createElement("i");h.classList.add(this.CssClasses_.ICON),h.textContent=this.Constant_.CHEVRON_LEFT,f.appendChild(h),f.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var p=document.createElement("div");p.classList.add(this.CssClasses_.TAB_BAR_BUTTON),p.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var g=document.createElement("i");g.classList.add(this.CssClasses_.ICON),g.textContent=this.Constant_.CHEVRON_RIGHT,p.appendChild(g),p.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(f),d.appendChild(this.tabBar_),d.appendChild(p);var m=function(){this.tabBar_.scrollLeft>0?f.classList.add(this.CssClasses_.IS_ACTIVE):f.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?p.classList.add(this.CssClasses_.IS_ACTIVE):p.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",m),m();var v=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){m(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",v),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var _=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),y=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<_.length;b++)new t(_[b],_,y,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=t,n.register({constructor:b,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(e){this.element_=e,this.init()};window.MaterialDataTable=w,w.prototype.Constant_={},w.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},w.prototype.selectRow_=function(e,t,n){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):n?function(){var t,r;if(e.checked)for(t=0;t<n.length;t++)r=n[t].querySelector("td").querySelector(".mdl-checkbox"),r.MaterialCheckbox.check(),n[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<n.length;t++)r=n[t].querySelector("td").querySelector(".mdl-checkbox"),r.MaterialCheckbox.uncheck(),n[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},w.prototype.createCheckbox_=function(e,t){var r=document.createElement("label"),i=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];r.className=i.join(" ");var o=document.createElement("input");return o.type="checkbox",o.classList.add("mdl-checkbox__input"),e?(o.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),o.addEventListener("change",this.selectRow_(o,e))):t&&o.addEventListener("change",this.selectRow_(o,null,t)),r.appendChild(o),n.upgradeElement(r,"MaterialCheckbox"),r},w.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),n=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),r=t.concat(n);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var i=document.createElement("th"),o=this.createCheckbox_(null,r);i.appendChild(o),e.parentElement.insertBefore(i,e);for(var a=0;a<r.length;a++){var s=r[a].querySelector("td");if(s){var l=document.createElement("td");if("TBODY"===r[a].parentNode.nodeName.toUpperCase()){var c=this.createCheckbox_(r[a]);l.appendChild(c)}r[a].insertBefore(l,s)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},n.register({constructor:w,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var x=function(e){this.element_=e,this.init()};window.MaterialRipple=x,x.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},x.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},x.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===e.type&&(this.ignoringMouseDown_=!0);var n=this.getFrameCount();if(n>0)return;this.setFrameCount(1);var r,i,o=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)r=Math.round(o.width/2),i=Math.round(o.height/2);else{var a=void 0!==e.clientX?e.clientX:e.touches[0].clientX,s=void 0!==e.clientY?e.clientY:e.touches[0].clientY;r=Math.round(a-o.left),i=Math.round(s-o.top)}this.setRippleXY(r,i),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},x.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},x.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var n,r,i,o="translate("+this.x_+"px, "+this.y_+"px)";t?(r=this.Constant_.INITIAL_SCALE,i=this.Constant_.INITIAL_SIZE):(r=this.Constant_.FINAL_SCALE,i=this.rippleSize_+"px",e&&(o="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),n="translate(-50%, -50%) "+o+r,this.rippleElement_.style.webkitTransform=n,this.rippleElement_.style.msTransform=n,this.rippleElement_.style.transform=n,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},n.register({constructor:x,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialSelectfield=e,e.prototype.Constant_={},e.prototype.CssClasses_={LABEL:"mdl-selectfield__label",SELECT:"mdl-selectfield__select",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded"},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty()},e.prototype.checkDisabled=function(){this.select_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkValidity=function(){this.select_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID)},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.select_.value&&this.select_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.select_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.select_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){e&&(this.select_.value=e),this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.select_=this.element_.querySelector("."+this.CssClasses_.SELECT),this.select_)){this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.select_.addEventListener("change",this.boundUpdateClassesHandler),this.select_.addEventListener("focus",this.boundFocusHandler),this.select_.addEventListener("blur",this.boundBlurHandler),this.select_.addEventListener("reset",this.boundResetHandler);var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID)}},e.prototype.mdlDowngrade_=function(){this.select_.removeEventListener("change",this.boundUpdateClassesHandler),this.select_.removeEventListener("focus",this.boundFocusHandler),this.select_.removeEventListener("blur",this.boundBlurHandler),this.select_.removeEventListener("reset",this.boundResetHandler)},componentHandler.register({constructor:e,classAsString:"MaterialSelectfield",cssClass:"mdl-js-selectfield",widget:!0})}()},function(e,t,n){var r,i,o;!function(a,s){"undefined"!=typeof e&&e.exports?(s("undefined"==typeof angular?n(40):angular),e.exports="ngDialog"):(i=[n(40)],r=s,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o)))}(this,function(e){"use strict";var t=e.module("ngDialog",[]),n=e.element,r=e.isDefined,i=(document.body||document.documentElement).style,o=r(i.animation)||r(i.WebkitAnimation)||r(i.MozAnimation)||r(i.MsAnimation)||r(i.OAnimation),a="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",s="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",l="ngdialog-disabled-animation",c={html:!1,body:!1},u={},d=[],f=!1,h=!1;return t.provider("ngDialog",function(){var t=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open"};this.setForceHtmlReload=function(e){c.html=e||!1},this.setForceBodyReload=function(e){c.body=e||!1},this.setDefaults=function(n){e.extend(t,n)},this.setOpenOnePerName=function(e){h=e||!1};var r,i=0,p=0,g={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(m,v,_,y,b,w,x,k,C,S){var E=[],$={onDocumentKeydown:function(e){27===e.keyCode&&T.close("$escape")},activate:function(e){var t=e.data("$ngDialogOptions");t.trapFocus&&(e.on("keydown",$.onTrapFocusKeydown),E.body.on("keydown",$.onTrapFocusKeydown))},deactivate:function(e){e.off("keydown",$.onTrapFocusKeydown),E.body.off("keydown",$.onTrapFocusKeydown)},deactivateAll:function(t){e.forEach(t,function(t){var n=e.element(t);$.deactivate(n)})},setBodyPadding:function(e){var t=parseInt(E.body.css("padding-right")||0,10);E.body.css("padding-right",t+e+"px"),E.body.data("ng-dialog-original-padding",t),w.$broadcast("ngDialog.setPadding",e)},resetBodyPadding:function(){var e=E.body.data("ng-dialog-original-padding");e?E.body.css("padding-right",e+"px"):E.body.css("padding-right",""),w.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(e,t){var n=e.data("$ngDialogOptions"),i=e.attr("id"),s=u[i];if(s){if("undefined"!=typeof k.Hammer){var l=s.hammerTime;l.off("tap",r),l.destroy&&l.destroy(),delete s.hammerTime}else e.unbind("click");1===p&&E.body.unbind("keydown",$.onDocumentKeydown),e.hasClass("ngdialog-closing")||(p-=1);var c=e.data("$ngDialogPreviousFocus");c&&c.focus&&c.focus(),w.$broadcast("ngDialog.closing",e,t),p=p<0?0:p,o&&!n.disableAnimation?(s.$destroy(),e.unbind(a).bind(a,function(){$.closeDialogElement(e,t)}).addClass("ngdialog-closing")):(s.$destroy(),$.closeDialogElement(e,t)),g[i]&&(g[i].resolve({id:i,value:t,$dialog:e,remainingDialogs:p}),delete g[i]),u[i]&&delete u[i],d.splice(d.indexOf(i),1),d.length||(E.body.unbind("keydown",$.onDocumentKeydown),f=!1)}},closeDialogElement:function(e,t){var n=e.data("$ngDialogOptions");e.remove(),0===p&&(E.html.removeClass(n.bodyClassName),E.body.removeClass(n.bodyClassName),$.resetBodyPadding()),w.$broadcast("ngDialog.closed",e,t)},closeDialog:function(t,n){var r=t.data("$ngDialogPreCloseCallback");if(r&&e.isFunction(r)){var i=r.call(t,n);e.isObject(i)?i.closePromise?i.closePromise.then(function(){$.performCloseDialog(t,n)}):i.then(function(){$.performCloseDialog(t,n)},function(){}):i!==!1&&$.performCloseDialog(t,n)}else $.performCloseDialog(t,n)},onTrapFocusKeydown:function(t){var n,r=e.element(t.currentTarget);if(r.hasClass("ngdialog"))n=r;else if(n=$.getActiveDialog(),null===n)return;var i=9===t.keyCode,o=t.shiftKey===!0;i&&$.handleTab(n,t,o)},handleTab:function(e,t,n){var r=$.getFocusableElements(e);if(0===r.length)return void(document.activeElement&&document.activeElement.blur());var i=document.activeElement,o=Array.prototype.indexOf.call(r,i),a=o===-1,s=0===o,l=o===r.length-1,c=!1;n?(a||s)&&(r[r.length-1].focus(),c=!0):(a||l)&&(r[0].focus(),c=!0),c&&(t.preventDefault(),t.stopPropagation())},autoFocus:function(e){var t=e[0],r=t.querySelector("*[autofocus]");if(null===r||(r.focus(),document.activeElement!==r)){var i=$.getFocusableElements(e);if(i.length>0)return void i[0].focus();var o=$.filterVisibleElements(t.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(o.length>0){var a=o[0];n(a).attr("tabindex","-1").css("outline","0"),a.focus()}}},getFocusableElements:function(e){var t=e[0],n=t.querySelectorAll(s),r=$.filterTabbableElements(n);return $.filterVisibleElements(r)},filterTabbableElements:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"-1"!==n(i).attr("tabindex")&&t.push(i)}return t},filterVisibleElements:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];(r.offsetWidth>0||r.offsetHeight>0)&&t.push(r)}return t},getActiveDialog:function(){var e=document.querySelectorAll(".ngdialog");return 0===e.length?null:n(e[e.length-1])},applyAriaAttributes:function(e,t){if(t.ariaAuto){if(!t.ariaRole){var n=$.getFocusableElements(e).length>0?"dialog":"alertdialog";t.ariaRole=n}t.ariaLabelledBySelector||(t.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),t.ariaDescribedBySelector||(t.ariaDescribedBySelector="article,section,p")}t.ariaRole&&e.attr("role",t.ariaRole),$.applyAriaAttribute(e,"aria-labelledby",t.ariaLabelledById,t.ariaLabelledBySelector),$.applyAriaAttribute(e,"aria-describedby",t.ariaDescribedById,t.ariaDescribedBySelector)},applyAriaAttribute:function(e,t,r,i){if(r&&e.attr(t,r),i){var o=e.attr("id"),a=e[0].querySelector(i);if(!a)return;var s=o+"-"+t;return n(a).attr("id",s),e.attr(t,s),s}},detectUIRouter:function(){try{return e.module("ui.router"),!0}catch(e){return!1}},getRouterLocationEventName:function(){return $.detectUIRouter()?"$stateChangeSuccess":"$locationChangeSuccess"}},T={__PRIVATE__:$,open:function(o){function a(e,t){return w.$broadcast("ngDialog.templateLoading",e),b.get(e,t||{}).then(function(t){return w.$broadcast("ngDialog.templateLoaded",e),t.data||""})}function s(t){return t?e.isString(t)&&m.plain?t:"boolean"!=typeof m.cache||m.cache?a(t,{cache:v}):a(t,{cache:!1}):"Empty template"}var c=null;if(o=o||{},!(h&&o.name&&(c=o.name+" dialog",this.isOpen(c)))){var m=e.copy(t),A=++i;c=c||"ngdialog"+A,d.push(c),e.extend(m,o);var D;g[c]=D=y.defer();var O;u[c]=O=e.isObject(m.scope)?m.scope.$new():w.$new();var P,R,I=e.extend({},m.resolve);return e.forEach(I,function(t,n){I[n]=e.isString(t)?S.get(t):S.invoke(t,null,null,n)}),y.all({template:s(m.template||m.templateUrl),locals:y.all(I)}).then(function(t){var i=t.template,o=t.locals;m.showClose&&(i+='<div class="ngdialog-close"></div>');var a=m.overlay?"":" ngdialog-no-overlay";if(P=n('<div id="'+c+'" class="ngdialog'+a+'"></div>'),P.html(m.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+i+"</div>":'<div class="ngdialog-content" role="document">'+i+"</div>"),P.data("$ngDialogOptions",m),O.ngDialogId=c,m.data&&e.isString(m.data)){var s=m.data.replace(/^\s*/,"")[0];O.ngDialogData="{"===s||"["===s?e.fromJson(m.data):new String(m.data),O.ngDialogData.ngDialogId=c}else m.data&&e.isObject(m.data)&&(O.ngDialogData=m.data,O.ngDialogData.ngDialogId=c);if(m.className&&P.addClass(m.className),m.appendClassName&&P.addClass(m.appendClassName),m.disableAnimation&&P.addClass(l),R=m.appendTo&&e.isString(m.appendTo)?e.element(document.querySelector(m.appendTo)):E.body,$.applyAriaAttributes(P,m),m.preCloseCallback){var u;e.isFunction(m.preCloseCallback)?u=m.preCloseCallback:e.isString(m.preCloseCallback)&&O&&(e.isFunction(O[m.preCloseCallback])?u=O[m.preCloseCallback]:O.$parent&&e.isFunction(O.$parent[m.preCloseCallback])?u=O.$parent[m.preCloseCallback]:w&&e.isFunction(w[m.preCloseCallback])&&(u=w[m.preCloseCallback])),u&&P.data("$ngDialogPreCloseCallback",u)}if(O.closeThisDialog=function(e){$.closeDialog(P,e)},m.controller&&(e.isString(m.controller)||e.isArray(m.controller)||e.isFunction(m.controller))){var d;m.controllerAs&&e.isString(m.controllerAs)&&(d=m.controllerAs);var h=C(m.controller,e.extend(o,{$scope:O,$element:P}),!0,d);m.bindToController&&e.extend(h.instance,{ngDialogId:O.ngDialogId,ngDialogData:O.ngDialogData,closeThisDialog:O.closeThisDialog}),P.data("$ngDialogControllerController",h())}if(x(function(){var e=document.querySelectorAll(".ngdialog");$.deactivateAll(e),_(P)(O);var t=k.innerWidth-E.body.prop("clientWidth");E.html.addClass(m.bodyClassName),E.body.addClass(m.bodyClassName);var n=t-(k.innerWidth-E.body.prop("clientWidth"));n>0&&$.setBodyPadding(n),R.append(P),$.activate(P),m.trapFocus&&$.autoFocus(P),m.name?w.$broadcast("ngDialog.opened",{dialog:P,name:m.name}):w.$broadcast("ngDialog.opened",P)}),f||(E.body.bind("keydown",$.onDocumentKeydown),f=!0),m.closeByNavigation){var g=$.getRouterLocationEventName();w.$on(g,function(){$.closeDialog(P)})}if(m.preserveFocus&&P.data("$ngDialogPreviousFocus",document.activeElement),r=function(e){var t=!!m.closeByDocument&&n(e.target).hasClass("ngdialog-overlay"),r=n(e.target).hasClass("ngdialog-close");(t||r)&&T.close(P.attr("id"),r?"$closeButton":"$document")},"undefined"!=typeof k.Hammer){var v=O.hammerTime=k.Hammer(P[0]);v.on("tap",r)}else P.bind("click",r);return p+=1,T}),{id:c,closePromise:D.promise,close:function(e){$.closeDialog(P,e)}}}},openConfirm:function(r){var i=y.defer(),o=e.copy(t);r=r||{},e.extend(o,r),o.scope=e.isObject(o.scope)?o.scope.$new():w.$new(),o.scope.confirm=function(e){i.resolve(e);var t=n(document.getElementById(a.id));$.performCloseDialog(t,e)};var a=T.open(o);if(a)return a.closePromise.then(function(e){return e?i.reject(e.value):i.reject()}),i.promise},isOpen:function(e){var t=n(document.getElementById(e));return t.length>0},close:function(e,t){var r=n(document.getElementById(e));if(r.length)$.closeDialog(r,t);else if("$escape"===e){var i=d[d.length-1];r=n(document.getElementById(i)),r.data("$ngDialogOptions").closeByEscape&&$.closeDialog(r,"$escape")}else T.closeAll(t);return T},closeAll:function(e){for(var t=document.querySelectorAll(".ngdialog"),r=t.length-1;r>=0;r--){var i=t[r];$.closeDialog(n(i),e)}},getOpenDialogs:function(){return d},getDefaults:function(){return t}};return e.forEach(["html","body"],function(e){if(E[e]=m.find(e),c[e]){var t=$.getRouterLocationEventName();w.$on(t,function(){E[e]=m.find(e)})}}),T}]}),t.directive("ngDialog",["ngDialog",function(t){return{restrict:"A",scope:{ngDialogScope:"="},link:function(n,r,i){r.on("click",function(r){r.preventDefault();var o=e.isDefined(n.ngDialogScope)?n.ngDialogScope:"noScope";e.isDefined(i.ngDialogClosePrevious)&&t.close(i.ngDialogClosePrevious);var a=t.getDefaults();t.open({template:i.ngDialog,className:i.ngDialogClass||a.className,appendClassName:i.ngDialogAppendClass,controller:i.ngDialogController,controllerAs:i.ngDialogControllerAs,bindToController:i.ngDialogBindToController,scope:o,data:i.ngDialogData,showClose:"false"!==i.ngDialogShowClose&&("true"===i.ngDialogShowClose||a.showClose),closeByDocument:"false"!==i.ngDialogCloseByDocument&&("true"===i.ngDialogCloseByDocument||a.closeByDocument),closeByEscape:"false"!==i.ngDialogCloseByEscape&&("true"===i.ngDialogCloseByEscape||a.closeByEscape),overlay:"false"!==i.ngDialogOverlay&&("true"===i.ngDialogOverlay||a.overlay),preCloseCallback:i.ngDialogPreCloseCallback||a.preCloseCallback,bodyClassName:i.ngDialogBodyClass||a.bodyClassName})})}}}]),t})},function(e,t){/*!
 * ngTagsInput v3.1.1
 * http://mbenford.github.io/ngTagsInput
 *
 * Copyright (c) 2013-2016 Michael Benford
 * License: MIT
 *
 * Generated at 2016-05-27 12:28:31 -0300
 */
!function(){"use strict";var e={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,delete:46,comma:188},t=9007199254740991,n=["text","email","url"],r=angular.module("ngTagsInput",[]);r.directive("tagsInput",["$timeout","$document","$window","$q","tagsInputConfig","tiUtil",function(r,i,o,a,s,l){function c(e,t,n,r){var i,o,s,c,u={};return i=function(t){return l.safeToString(t[e.displayProperty])},o=function(t,n){t[e.displayProperty]=n},s=function(t){var r=i(t),o=r&&r.length>=e.minLength&&r.length<=e.maxLength&&e.allowedTagsPattern.test(r)&&!l.findInObjectArray(u.items,t,e.keyProperty||e.displayProperty);return a.when(o&&n({$tag:t})).then(l.promisifyValue)},c=function(e){return a.when(r({$tag:e})).then(l.promisifyValue)},u.items=[],u.addText=function(e){var t={};return o(t,e),u.add(t)},u.add=function(n){var r=i(n);return e.replaceSpacesWithDashes&&(r=l.replaceSpacesWithDashes(r)),o(n,r),s(n).then(function(){u.items.push(n),t.trigger("tag-added",{$tag:n})}).catch(function(){r&&t.trigger("invalid-tag",{$tag:n})})},u.remove=function(e){var n=u.items[e];return c(n).then(function(){return u.items.splice(e,1),u.clearSelection(),t.trigger("tag-removed",{$tag:n}),n})},u.select=function(e){e<0?e=u.items.length-1:e>=u.items.length&&(e=0),u.index=e,u.selected=u.items[e]},u.selectPrior=function(){u.select(--u.index)},u.selectNext=function(){u.select(++u.index)},u.removeSelected=function(){return u.remove(u.index)},u.clearSelection=function(){u.selected=null,u.index=-1},u.clearSelection(),u}function u(e){return n.indexOf(e)!==-1}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",templateScope:"=?",tagClass:"&",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(e,n,r){e.events=l.simplePubSub(),s.load("tagsInput",e,n,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",u],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,t],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,t],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),e.tagList=new c(e.options,e.events,l.handleUndefinedResult(e.onTagAdding,!0),l.handleUndefinedResult(e.onTagRemoving,!0)),this.registerAutocomplete=function(){r.find("input");return{addTag:function(t){return e.tagList.add(t)},getTags:function(){return e.tagList.items},getCurrentTagText:function(){return e.newTag.text()},getOptions:function(){return e.options},getTemplateScope:function(){return e.templateScope},on:function(t,n){return e.events.on(t,n,!0),this}}},this.registerTagItem=function(){return{getOptions:function(){return e.options},removeTag:function(t){e.disabled||e.tagList.remove(t)}}}}],link:function(t,n,a,s){var c,u,d=[e.enter,e.comma,e.space,e.backspace,e.delete,e.left,e.right],f=t.tagList,h=t.events,p=t.options,g=n.find("input"),m=["minTags","maxTags","allowLeftoverText"];c=function(){s.$setValidity("maxTags",f.items.length<=p.maxTags),s.$setValidity("minTags",f.items.length>=p.minTags),s.$setValidity("leftoverText",!(!t.hasFocus&&!p.allowLeftoverText)||!t.newTag.text())},u=function(){r(function(){g[0].focus()})},s.$isEmpty=function(e){return!e||!e.length},t.newTag={text:function(e){return angular.isDefined(e)?(t.text=e,void h.trigger("input-change",e)):t.text||""},invalid:null},t.track=function(e){return e[p.keyProperty||p.displayProperty]},t.getTagClass=function(e,n){var r=e===f.selected;return[t.tagClass({$tag:e,$index:n,$selected:r}),{selected:r}]},t.$watch("tags",function(e){e?(f.items=l.makeObjectArray(e,p.displayProperty),t.tags=f.items):f.items=[]}),t.$watch("tags.length",function(){c(),s.$validate()}),a.$observe("disabled",function(e){t.disabled=e}),t.eventHandlers={input:{keydown:function(e){h.trigger("input-keydown",e)},focus:function(){t.hasFocus||(t.hasFocus=!0,h.trigger("input-focus"))},blur:function(){r(function(){var e=i.prop("activeElement"),r=e===g[0],o=n[0].contains(e);!r&&o||(t.hasFocus=!1,h.trigger("input-blur"))})},paste:function(e){e.getTextData=function(){var t=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData;return t?t.getData("text/plain"):o.clipboardData.getData("Text")},h.trigger("input-paste",e)}},host:{click:function(){t.disabled||u()}},tag:{click:function(e){h.trigger("tag-clicked",{$tag:e})}}},h.on("tag-added",t.onTagAdded).on("invalid-tag",t.onInvalidTag).on("tag-removed",t.onTagRemoved).on("tag-clicked",t.onTagClicked).on("tag-added",function(){t.newTag.text("")}).on("tag-added tag-removed",function(){t.tags=f.items,s.$setDirty(),u()}).on("invalid-tag",function(){t.newTag.invalid=!0}).on("option-change",function(e){m.indexOf(e.name)!==-1&&c()}).on("input-change",function(){f.clearSelection(),t.newTag.invalid=null}).on("input-focus",function(){n.triggerHandler("focus"),s.$setValidity("leftoverText",!0)}).on("input-blur",function(){p.addOnBlur&&!p.addFromAutocompleteOnly&&f.addText(t.newTag.text()),n.triggerHandler("blur"),c()}).on("input-keydown",function(n){var r,i,o,a,s=n.keyCode,c={};l.isModifierOn(n)||d.indexOf(s)===-1||(c[e.enter]=p.addOnEnter,c[e.comma]=p.addOnComma,c[e.space]=p.addOnSpace,r=!p.addFromAutocompleteOnly&&c[s],i=(s===e.backspace||s===e.delete)&&f.selected,a=s===e.backspace&&0===t.newTag.text().length&&p.enableEditingLastTag,o=(s===e.backspace||s===e.left||s===e.right)&&0===t.newTag.text().length&&!p.enableEditingLastTag,r?f.addText(t.newTag.text()):a?(f.selectPrior(),f.removeSelected().then(function(e){e&&t.newTag.text(e[p.displayProperty])})):i?f.removeSelected():o&&(s===e.left||s===e.backspace?f.selectPrior():s===e.right&&f.selectNext()),(r||o||i||a)&&n.preventDefault())}).on("input-paste",function(e){if(p.addOnPaste){var t=e.getTextData(),n=t.split(p.pasteSplitPattern);n.length>1&&(n.forEach(function(e){f.addText(e)}),e.preventDefault())}})}}}]),r.directive("tiTagItem",["tiUtil",function(e){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(t,n,r,i){var o=i.registerTagItem(),a=o.getOptions();t.$$template=a.template,t.$$removeTagSymbol=a.removeTagSymbol,t.$getDisplayText=function(){return e.safeToString(t.data[a.displayProperty])},t.$removeTag=function(){o.removeTag(t.$index)},t.$watch("$parent.$index",function(e){t.$index=e})}}}]),r.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(t,n,r,i,o,a){function s(e,t,n){var r,o,s,l={};return s=function(){return t.tagsInput.keyProperty||t.tagsInput.displayProperty},r=function(e,n){return e.filter(function(e){return!a.findInObjectArray(n,e,s(),function(e,n){return t.tagsInput.replaceSpacesWithDashes&&(e=a.replaceSpacesWithDashes(e),n=a.replaceSpacesWithDashes(n)),a.defaultComparer(e,n)})})},l.reset=function(){o=null,l.items=[],l.visible=!1,l.index=-1,l.selected=null,l.query=null},l.show=function(){t.selectFirstMatch?l.select(0):l.selected=null,l.visible=!0},l.load=a.debounce(function(n,c){l.query=n;var u=i.when(e({$query:n}));o=u,u.then(function(e){u===o&&(e=a.makeObjectArray(e.data||e,s()),e=r(e,c),l.items=e.slice(0,t.maxResultsToShow),l.items.length>0?l.show():l.reset())})},t.debounceDelay),l.selectNext=function(){l.select(++l.index)},l.selectPrior=function(){l.select(--l.index)},l.select=function(e){e<0?e=l.items.length-1:e>=l.items.length&&(e=0),l.index=e,l.selected=l.items[e],n.trigger("suggestion-selected",e)},l.reset(),l}function l(e,t){var n=e.find("li").eq(t),r=n.parent(),i=n.prop("offsetTop"),o=n.prop("offsetHeight"),a=r.prop("clientHeight"),s=r.prop("scrollTop");i<s?r.prop("scrollTop",i):i+o>a+s&&r.prop("scrollTop",i+o-a)}return{restrict:"E",require:"^tagsInput",scope:{source:"&",matchClass:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(e,t,n){e.events=a.simplePubSub(),o.load("autoComplete",e,n,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),e.suggestionList=new s(e.source,e.options,e.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return e.options},getQuery:function(){return e.suggestionList.query}}}}],link:function(t,n,r,i){var o,s=[e.enter,e.tab,e.escape,e.up,e.down],c=t.suggestionList,u=i.registerAutocomplete(),d=t.options,f=t.events;d.tagsInput=u.getOptions(),o=function(e){return e&&e.length>=d.minLength||!e&&d.loadOnEmpty},t.templateScope=u.getTemplateScope(),t.addSuggestionByIndex=function(e){c.select(e),t.addSuggestion()},t.addSuggestion=function(){var e=!1;return c.selected&&(u.addTag(angular.copy(c.selected)),c.reset(),e=!0),e},t.track=function(e){return e[d.tagsInput.keyProperty||d.tagsInput.displayProperty]},t.getSuggestionClass=function(e,n){var r=e===c.selected;return[t.matchClass({$match:e,$index:n,$selected:r}),{selected:r}]},u.on("tag-added tag-removed invalid-tag input-blur",function(){c.reset()}).on("input-change",function(e){o(e)?c.load(e,u.getTags()):c.reset()}).on("input-focus",function(){var e=u.getCurrentTagText();d.loadOnFocus&&o(e)&&c.load(e,u.getTags())}).on("input-keydown",function(n){var r=n.keyCode,i=!1;if(!a.isModifierOn(n)&&s.indexOf(r)!==-1)return c.visible?r===e.down?(c.selectNext(),i=!0):r===e.up?(c.selectPrior(),i=!0):r===e.escape?(c.reset(),i=!0):r!==e.enter&&r!==e.tab||(i=t.addSuggestion()):r===e.down&&t.options.loadOnDownArrow&&(c.load(u.getCurrentTagText(),u.getTags()),i=!0),i?(n.preventDefault(),n.stopImmediatePropagation(),!1):void 0}),f.on("suggestion-selected",function(e){l(n,e)})}}}]),r.directive("tiAutocompleteMatch",["$sce","tiUtil",function(e,t){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(n,r,i,o){var a=o.registerAutocompleteMatch(),s=a.getOptions();n.$$template=s.template,n.$index=n.$parent.$index,n.$highlight=function(n){return s.highlightMatchedText&&(n=t.safeHighlight(n,a.getQuery())),e.trustAsHtml(n)},n.$getDisplayText=function(){return t.safeToString(n.data[s.displayProperty||s.tagsInput.displayProperty])}}}}]),r.directive("tiTranscludeAppend",function(){return function(e,t,n,r,i){i(function(e){t.append(e)})}}),r.directive("tiAutosize",["tagsInputConfig",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,i){var o,a,s=e.getTextAutosizeThreshold();o=angular.element('<span class="input"></span>'),o.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),n.parent().append(o),a=function(e){var t,i=e;return angular.isString(i)&&0===i.length&&(i=r.placeholder),i&&(o.text(i),o.css("display",""),t=o.prop("offsetWidth"),o.css("display","none")),n.css("width",t?t+s+"px":""),e},i.$parsers.unshift(a),i.$formatters.unshift(a),r.$observe("placeholder",function(e){i.$modelValue||a(e)})}}}]),r.directive("tiBindAttrs",function(){return function(e,t,n){e.$watch(n.tiBindAttrs,function(e){angular.forEach(e,function(e,t){n.$set(t,e)})},!0)}}),r.provider("tagsInputConfig",function(){var e={},t={},n=3;this.setDefaults=function(t,n){return e[t]=n,this},this.setActiveInterpolation=function(e,n){return t[e]=n,this},this.setTextAutosizeThreshold=function(e){return n=e,this},this.$get=["$interpolate",function(r){var i={};return i[String]=function(e){return e},i[Number]=function(e){return parseInt(e,10)},i[Boolean]=function(e){return"true"===e.toLowerCase()},i[RegExp]=function(e){return new RegExp(e)},{load:function(n,o,a,s){var l=function(){return!0};o.options={},angular.forEach(s,function(s,c){var u,d,f,h,p,g;u=s[0],d=s[1],f=s[2]||l,h=i[u],p=function(){var t=e[n]&&e[n][c];return angular.isDefined(t)?t:d},g=function(e){o.options[c]=e&&f(e)?h(e):p()},t[n]&&t[n][c]?a.$observe(c,function(e){g(e),o.events.trigger("option-change",{name:c,newValue:e})}):g(a[c]&&r(a[c])(o.$parent))})},getTextAutosizeThreshold:function(){return n}}}]}),r.factory("tiUtil",["$timeout","$q",function(e,t){var n={};return n.debounce=function(t,n){var r;return function(){var i=arguments;e.cancel(r),r=e(function(){t.apply(null,i)},n)}},n.makeObjectArray=function(e,t){if(!angular.isArray(e)||0===e.length||angular.isObject(e[0]))return e;var n=[];return e.forEach(function(e){var r={};r[t]=e,n.push(r)}),n},n.findInObjectArray=function(e,t,r,i){var o=null;return i=i||n.defaultComparer,e.some(function(e){if(i(e[r],t[r]))return o=e,!0}),o},n.defaultComparer=function(e,t){return n.safeToString(e).toLowerCase()===n.safeToString(t).toLowerCase()},n.safeHighlight=function(e,t){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!t)return e;e=n.encodeHTML(e),t=n.encodeHTML(t);var i=new RegExp("&[^;]+;|"+r(t),"gi");return e.replace(i,function(e){return e.toLowerCase()===t.toLowerCase()?"<em>"+e+"</em>":e})},n.safeToString=function(e){return angular.isUndefined(e)||null==e?"":e.toString().trim()},n.encodeHTML=function(e){return n.safeToString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n.handleUndefinedResult=function(e,t){return function(){var n=e.apply(null,arguments);return angular.isUndefined(n)?t:n}},n.replaceSpacesWithDashes=function(e){return n.safeToString(e).replace(/\s/g,"-")},n.isModifierOn=function(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey},n.promisifyValue=function(e){return e=!!angular.isUndefined(e)||e,t[e?"when":"reject"]()},n.simplePubSub=function(){var e={};return{on:function(t,n,r){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]);var i=r?[].unshift:[].push;i.call(e[t],n)}),this},trigger:function(t,r){var i=e[t]||[];return i.every(function(e){return n.handleUndefinedResult(e,!0)(r)}),this}}},n}]),r.run(["$templateCache",function(e){e.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="getTagClass(tag, $index)" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item scope="templateScope" data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),e.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),e.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="getSuggestionClass(item, $index)" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match scope="templateScope" data="::item"></ti-autocomplete-match></li></ul></div>'),e.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}()},function(e,t){function n(){return"serviceWorker"in navigator&&(window.fetch||"imageRendering"in document.documentElement.style)&&("https:"===window.location.protocol||"localhost"===window.location.hostname)}function r(e){if(e||(e={}),n()){var t=navigator.serviceWorker.register("/web/notablecompiled/service_worker.js",{scope:"/"}),r=function(e){function t(){switch(a.state){case"redundant":i("onUpdateFailed"),a.onstatechange=null;break;case"installing":r||i("onUpdating");break;case"installed":o||i("onUpdateReady");break;case"activated":i("onUpdated"),a.onstatechange=null}}function n(){switch(a.state){case"redundant":a.onstatechange=null;break;case"installing":break;case"installed":break;case"activated":i("onInstalled"),a.onstatechange=null}}var r,o,a=e.installing||e.waiting;if(a&&!a.onstatechange){var s;e.active?(t(),s=t):(n(),s=n),r=!0,e.waiting&&(o=!0),a.onstatechange=s}},i=function(t){"function"==typeof e[t]&&e[t]({source:"ServiceWorker"})};return void t.then(function(e){e&&(r(e),e.onupdatefound=function(){r(e)})}).catch(function(e){return i("onError"),Promise.reject(e)})}}function i(e,t){if(n())return void navigator.serviceWorker.getRegistration().then(function(n){return n&&n.waiting?(n.waiting.postMessage({action:"skipWaiting"}),void(e&&e())):void(t&&t())})}function o(){n()&&navigator.serviceWorker.getRegistration().then(function(e){if(e)return e.update()})}setInterval(o,108e5),t.install=r,t.applyUpdate=i,t.update=o},function(e,t,n){/*!
 * PEP v0.4.3 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t=t||Object.create(null);var n=document.createEvent("Event");n.initEvent(e,t.bubbles||!1,t.cancelable||!1);for(var r,i=2;i<f.length;i++)r=f[i],n[r]=t[r]||h[i];n.buttons=t.buttons||0;var o=0;return o=t.pressure&&n.buttons?t.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=t.pointerId||0,n.width=t.width||0,n.height=t.height||0,n.pressure=o,n.tiltX=t.tiltX||0,n.tiltY=t.tiltY||0,n.twist=t.twist||0,n.tangentialPressure=t.tangentialPressure||0,n.pointerType=t.pointerType||"",n.hwTimestamp=t.hwTimestamp||0,n.isPrimary=t.isPrimary||!1,n}function t(){this.array=[],this.size=0}function n(e,t,n,r){this.addCallback=e.bind(r),this.removeCallback=t.bind(r),this.changedCallback=n.bind(r),E&&(this.observer=new E(this.mutationWatcher.bind(this)))}function r(e){return"body /shadow-deep/ "+i(e)}function i(e){return'[touch-action="'+e+'"]'}function o(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+"; }"}function a(){if(O){A.forEach(function(e){String(e)===e?(D+=i(e)+o(e)+"\n",P&&(D+=r(e)+o(e)+"\n")):(D+=e.selectors.map(i)+o(e.rule)+"\n",P&&(D+=e.selectors.map(r)+o(e.rule)+"\n"))});var e=document.createElement("style");e.textContent=D,document.head.appendChild(e)}}function s(){if(!window.PointerEvent){if(window.PointerEvent=e,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),b.registerSource("ms",Z)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),b.registerSource("mouse",j),void 0!==window.ontouchstart&&b.registerSource("touch",W);b.register(document)}}function l(e){if(!b.pointermap.has(e)){var t=new Error("InvalidPointerId");throw t.name="InvalidPointerId",t}}function c(e){for(var t=e.parentNode;t&&t!==e.ownerDocument;)t=t.parentNode;if(!t){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function u(e){var t=b.pointermap.get(e);return 0!==t.buttons}function d(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:G},releasePointerCapture:{value:Y},hasPointerCapture:{value:K}})}var f=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],h=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],p=window.Map&&window.Map.prototype.forEach,g=p?Map:t;t.prototype={set:function(e,t){return void 0===t?this.delete(e):(this.has(e)||this.size++,void(this.array[e]=t))},has:function(e){return void 0!==this.array[e]},delete:function(e){this.has(e)&&(delete this.array[e],this.size--)},get:function(e){return this.array[e]},clear:function(){this.array.length=0,this.size=0},forEach:function(e,t){return this.array.forEach(function(n,r){e.call(t,n,r,this)},this)}};var m=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],v=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],_={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},y="undefined"!=typeof SVGElementInstance,b={pointermap:new g,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(e,t){var n=t,r=n.events;r&&(r.forEach(function(e){n[e]&&(this.eventMap[e]=n[e].bind(n))},this),this.eventSources[e]=n,this.eventSourceList.push(n))},register:function(e){for(var t,n=this.eventSourceList.length,r=0;r<n&&(t=this.eventSourceList[r]);r++)t.register.call(t,e)},unregister:function(e){for(var t,n=this.eventSourceList.length,r=0;r<n&&(t=this.eventSourceList[r]);r++)t.unregister.call(t,e)},contains:function(e,t){try{return e.contains(t)}catch(e){return!1}},down:function(e){e.bubbles=!0,this.fireEvent("pointerdown",e)},move:function(e){e.bubbles=!0,this.fireEvent("pointermove",e)},up:function(e){e.bubbles=!0,this.fireEvent("pointerup",e)},enter:function(e){e.bubbles=!1,this.fireEvent("pointerenter",e)},leave:function(e){e.bubbles=!1,this.fireEvent("pointerleave",e)},over:function(e){e.bubbles=!0,this.fireEvent("pointerover",e)},out:function(e){e.bubbles=!0,this.fireEvent("pointerout",e)},cancel:function(e){e.bubbles=!0,this.fireEvent("pointercancel",e)},leaveOut:function(e){this.out(e),this.propagate(e,this.leave,!1)},enterOver:function(e){this.over(e),this.propagate(e,this.enter,!0)},eventHandler:function(e){if(!e._handledByPE){var t=e.type,n=this.eventMap&&this.eventMap[t];n&&n(e),e._handledByPE=!0}},listen:function(e,t){t.forEach(function(t){this.addEvent(e,t)},this)},unlisten:function(e,t){t.forEach(function(t){this.removeEvent(e,t)},this)},addEvent:function(e,t){e.addEventListener(t,this.boundHandler)},removeEvent:function(e,t){e.removeEventListener(t,this.boundHandler)},makeEvent:function(t,n){this.captureInfo[n.pointerId]&&(n.relatedTarget=null);var r=new e(t,n);return n.preventDefault&&(r.preventDefault=n.preventDefault),r._target=r._target||n.target,r},fireEvent:function(e,t){var n=this.makeEvent(e,t);return this.dispatchEvent(n)},cloneEvent:function(e){for(var t,n=Object.create(null),r=0;r<m.length;r++)t=m[r],n[t]=e[t]||v[r],!y||"target"!==t&&"relatedTarget"!==t||n[t]instanceof SVGElementInstance&&(n[t]=n[t].correspondingUseElement);return e.preventDefault&&(n.preventDefault=function(){e.preventDefault()}),n},getTarget:function(e){var t=this.captureInfo[e.pointerId];return t?e._target!==t&&e.type in _?void 0:t:e._target},propagate:function(e,t,n){for(var r=e.target,i=[];r!==document&&!r.contains(e.relatedTarget);)if(i.push(r),r=r.parentNode,!r)return;n&&i.reverse(),i.forEach(function(n){e.target=n,t.call(this,e)},this)},setCapture:function(t,n,r){this.captureInfo[t]&&this.releaseCapture(t,r),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t,r),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var i=new e("gotpointercapture");i.pointerId=t,i._target=n,r||this.asyncDispatchEvent(i)},releaseCapture:function(t,n){var r=this.captureInfo[t];if(r){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var i=new e("lostpointercapture");i.pointerId=t,i._target=r,n||this.asyncDispatchEvent(i)}},dispatchEvent:function(e){var t=this.getTarget(e);if(t)return t.dispatchEvent(e)},asyncDispatchEvent:function(e){requestAnimationFrame(this.dispatchEvent.bind(this,e))}};b.boundHandler=b.eventHandler.bind(b);var w={shadow:function(e){if(e)return e.shadowRoot||e.webkitShadowRoot},canTarget:function(e){return e&&Boolean(e.elementFromPoint)},targetingShadow:function(e){var t=this.shadow(e);if(this.canTarget(t))return t},olderShadow:function(e){var t=e.olderShadowRoot;if(!t){var n=e.querySelector("shadow");n&&(t=n.olderShadowRoot)}return t},allShadows:function(e){for(var t=[],n=this.shadow(e);n;)t.push(n),n=this.olderShadow(n);return t},searchRoot:function(e,t,n){if(e){var r,i,o=e.elementFromPoint(t,n);for(i=this.targetingShadow(o);i;){if(r=i.elementFromPoint(t,n)){var a=this.targetingShadow(r);return this.searchRoot(a,t,n)||r}i=this.olderShadow(i)}return o}},owner:function(e){for(var t=e;t.parentNode;)t=t.parentNode;return t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(t=document),t},findTarget:function(e){var t=e.clientX,n=e.clientY,r=this.owner(e.target);return r.elementFromPoint(t,n)||(r=document),this.searchRoot(r,t,n)}},x=Array.prototype.forEach.call.bind(Array.prototype.forEach),k=Array.prototype.map.call.bind(Array.prototype.map),C=Array.prototype.slice.call.bind(Array.prototype.slice),S=Array.prototype.filter.call.bind(Array.prototype.filter),E=window.MutationObserver||window.WebKitMutationObserver,$="[touch-action]",T={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(e){this.observer&&w.canTarget(e)&&this.observer.observe(e,T)},enableOnSubtree:function(e){this.watchSubtree(e),e===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(e)},installNewSubtree:function(e){x(this.findElements(e),this.addElement,this)},findElements:function(e){return e.querySelectorAll?e.querySelectorAll($):[]},removeElement:function(e){this.removeCallback(e)},addElement:function(e){this.addCallback(e)},elementChanged:function(e,t){this.changedCallback(e,t)},concatLists:function(e,t){return e.concat(C(t))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(e){return e.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(e){var t=k(e,this.findElements,this);return t.push(S(e,this.isElement)),t.reduce(this.concatLists,[])},mutationWatcher:function(e){e.forEach(this.mutationHandler,this)},mutationHandler:function(e){if("childList"===e.type){var t=this.flattenMutationTree(e.addedNodes);t.forEach(this.addElement,this);var n=this.flattenMutationTree(e.removedNodes);n.forEach(this.removeElement,this)}else"attributes"===e.type&&this.elementChanged(e.target,e.oldValue)}};var A=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],D="",O=window.PointerEvent||window.MSPointerEvent,P=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,R=b.pointermap,I=25,M=[1,4,2,8,16],L=!1;try{L=1===new MouseEvent("test",{buttons:1}).buttons}catch(e){}var N,j={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(e){b.listen(e,this.events)},unregister:function(e){b.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,n=this.lastTouches,r=e.clientX,i=e.clientY,o=0,a=n.length;o<a&&(t=n[o]);o++){var s=Math.abs(r-t.x),l=Math.abs(i-t.y);if(s<=I&&l<=I)return!0}},prepareEvent:function(e){var t=b.cloneEvent(e),n=t.preventDefault;return t.preventDefault=function(){e.preventDefault(),n()},t.pointerId=this.POINTER_ID,t.isPrimary=!0,t.pointerType=this.POINTER_TYPE,t},prepareButtonsForMove:function(e,t){var n=R.get(this.POINTER_ID);0!==t.which&&n?e.buttons=n.buttons:e.buttons=0,t.buttons=e.buttons},mousedown:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=R.get(this.POINTER_ID),n=this.prepareEvent(e);L||(n.buttons=M[n.button],t&&(n.buttons|=t.buttons),e.buttons=n.buttons),R.set(this.POINTER_ID,e),t&&0!==t.buttons?b.move(n):b.down(n)}},mousemove:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);L||this.prepareButtonsForMove(t,e),t.button=-1,R.set(this.POINTER_ID,e),b.move(t)}},mouseup:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=R.get(this.POINTER_ID),n=this.prepareEvent(e);if(!L){var r=M[n.button];n.buttons=t?t.buttons&~r:0,e.buttons=n.buttons}R.set(this.POINTER_ID,e),n.buttons&=~M[n.button],0===n.buttons?b.up(n):b.move(n)}},mouseover:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);L||this.prepareButtonsForMove(t,e),t.button=-1,R.set(this.POINTER_ID,e),b.enterOver(t)}},mouseout:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);L||this.prepareButtonsForMove(t,e),t.button=-1,b.leaveOut(t)}},cancel:function(e){var t=this.prepareEvent(e);b.cancel(t),this.deactivateMouse()},deactivateMouse:function(){R.delete(this.POINTER_ID)}},F=b.captureInfo,B=w.findTarget.bind(w),U=w.allShadows.bind(w),z=b.pointermap,q=2500,H=200,V="touch-action",W={events:["touchstart","touchmove","touchend","touchcancel"],register:function(e){N.enableOnSubtree(e)},unregister:function(){},elementAdded:function(e){var t=e.getAttribute(V),n=this.touchActionToScrollType(t);n&&(e._scrollType=n,b.listen(e,this.events),U(e).forEach(function(e){e._scrollType=n,b.listen(e,this.events)},this))},elementRemoved:function(e){e._scrollType=void 0,b.unlisten(e,this.events),U(e).forEach(function(e){e._scrollType=void 0,b.unlisten(e,this.events)},this)},elementChanged:function(e,t){var n=e.getAttribute(V),r=this.touchActionToScrollType(n),i=this.touchActionToScrollType(t);r&&i?(e._scrollType=r,U(e).forEach(function(e){e._scrollType=r},this)):i?this.elementRemoved(e):r&&this.elementAdded(e)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(e){var t=e,n=this.scrollTypes;return"none"===t?"none":t===n.XSCROLLER?"X":t===n.YSCROLLER?"Y":n.SCROLLER.exec(t)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===z.size||1===z.size&&z.has(1))&&(this.firstTouch=e.identifier,this.firstXY={X:e.clientX,Y:e.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var e=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(e,H)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(e){var t=0;return"touchstart"!==e&&"touchmove"!==e||(t=1),t},touchToPointer:function(e){var t=this.currentTouchEvent,n=b.cloneEvent(e),r=n.pointerId=e.identifier+2;n.target=F[r]||B(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(t.type),n.width=2*(e.radiusX||e.webkitRadiusX||0),n.height=2*(e.radiusY||e.webkitRadiusY||0),n.pressure=e.force||e.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(e),n.pointerType=this.POINTER_TYPE,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey;var i=this;return n.preventDefault=function(){i.scrolling=!1,i.firstXY=null,t.preventDefault()},n},processTouches:function(e,t){var n=e.changedTouches;this.currentTouchEvent=e;for(var r,i=0;i<n.length;i++)r=n[i],t.call(this,this.touchToPointer(r))},shouldScroll:function(e){if(this.firstXY){var t,n=e.currentTarget._scrollType;if("none"===n)t=!1;else if("XY"===n)t=!0;else{var r=e.changedTouches[0],i=n,o="Y"===n?"X":"Y",a=Math.abs(r["client"+i]-this.firstXY[i]),s=Math.abs(r["client"+o]-this.firstXY[o]);t=a>=s}return this.firstXY=null,t}},findTouch:function(e,t){for(var n,r=0,i=e.length;r<i&&(n=e[r]);r++)if(n.identifier===t)return!0},vacuumTouches:function(e){var t=e.touches;if(z.size>=t.length){var n=[];z.forEach(function(e,r){if(1!==r&&!this.findTouch(t,r-2)){var i=e.out;n.push(i)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(e){this.vacuumTouches(e),this.setPrimaryTouch(e.changedTouches[0]),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(e,this.overDown))},overDown:function(e){z.set(e.pointerId,{target:e.target,out:e,outTarget:e.target}),b.enterOver(e),b.down(e)},touchmove:function(e){this.scrolling||(this.shouldScroll(e)?(this.scrolling=!0,this.touchcancel(e)):(e.preventDefault(),this.processTouches(e,this.moveOverOut)))},moveOverOut:function(e){var t=e,n=z.get(t.pointerId);if(n){var r=n.out,i=n.outTarget;b.move(t),r&&i!==t.target&&(r.relatedTarget=t.target,t.relatedTarget=i,r.target=i,t.target?(b.leaveOut(r),b.enterOver(t)):(t.target=i,t.relatedTarget=null,this.cancelOut(t))),n.out=t,n.outTarget=t.target}},touchend:function(e){this.dedupSynthMouse(e),this.processTouches(e,this.upOut)},upOut:function(e){this.scrolling||(b.up(e),b.leaveOut(e)),this.cleanUpPointer(e)},touchcancel:function(e){this.processTouches(e,this.cancelOut)},cancelOut:function(e){b.cancel(e),b.leaveOut(e),this.cleanUpPointer(e)},cleanUpPointer:function(e){z.delete(e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(e){var t=j.lastTouches,n=e.changedTouches[0];if(this.isPrimaryTouch(n)){var r={x:n.clientX,y:n.clientY};t.push(r);var i=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}.bind(null,t,r);setTimeout(i,q)}}};N=new n(W.elementAdded,W.elementRemoved,W.elementChanged,W);var G,Y,K,X=b.pointermap,J=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,Z={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(e){b.listen(e,this.events)},unregister:function(e){b.unlisten(e,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(e){var t=e;return J&&(t=b.cloneEvent(e),t.pointerType=this.POINTER_TYPES[e.pointerType]),t},cleanup:function(e){X.delete(e)},MSPointerDown:function(e){X.set(e.pointerId,e);var t=this.prepareEvent(e);b.down(t)},MSPointerMove:function(e){var t=this.prepareEvent(e);b.move(t)},MSPointerUp:function(e){var t=this.prepareEvent(e);b.up(t),this.cleanup(e.pointerId)},MSPointerOut:function(e){var t=this.prepareEvent(e);b.leaveOut(t)},MSPointerOver:function(e){var t=this.prepareEvent(e);b.enterOver(t)},MSPointerCancel:function(e){var t=this.prepareEvent(e);b.cancel(t),this.cleanup(e.pointerId)},MSLostPointerCapture:function(e){var t=b.makeEvent("lostpointercapture",e);b.dispatchEvent(t)},MSGotPointerCapture:function(e){var t=b.makeEvent("gotpointercapture",e);b.dispatchEvent(t)}},Q=window.navigator;Q.msPointerEnabled?(G=function(e){l(e),c(this),u(e)&&(b.setCapture(e,this,!0),this.msSetPointerCapture(e))},Y=function(e){l(e),b.releaseCapture(e,!0),this.msReleasePointerCapture(e)}):(G=function(e){l(e),c(this),u(e)&&b.setCapture(e,this)},Y=function(e){l(e),b.releaseCapture(e)}),K=function(e){return!!b.captureInfo[e]},a(),s(),d();var ee={dispatcher:b,Installer:n,PointerEvent:e,PointerMap:g,targetFinding:w};return ee})},function(e,t,n){var r,o,a;!function(i,s){o=[n(11)],r=i,a="function"==typeof r?r.apply(t,o):r,!(void 0!==a&&(e.exports=a))}(function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(e,t){function n(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)return!1;return!0}function r(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function o(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function a(e,t){if("object"==typeof e.classList)return e.classList.contains(t);var n="string"==typeof e.className,r=n?e.className:e.getAttribute("class");return o(r,t)}function s(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,r=n?e.className:e.getAttribute("class");r?o(r,t)||(r+=" "+t):r=t,n?e.className=r:e.setAttribute("class",r)}}function l(e){var t="string"==typeof e.className;return t?e.className:e.getAttribute("class")}function c(e){return e&&e.split(/\s+/).sort().join(" ")}function u(e){return c(l(e))}function d(e,t){return u(e)==u(t)}function f(e,t){for(var n=t.split(/\s+/),i=0,o=n.length;i<o;++i)if(!a(e,r(n[i])))return!1;return!0}function h(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function p(e,t,n,r,i){var o=e.node,a=e.offset,s=o,l=a;o==r&&a>i&&++l,o!=t||a!=n&&a!=n+1||(s=r,l+=i-n),o==t&&a>n+1&&--l,e.node=s,e.offset=l}function g(e,t,n){e.node==t&&e.offset>n&&--e.offset}function m(e,t,n,r){n==-1&&(n=t.childNodes.length);var i=e.parentNode,o=N.getNodeIndex(e);B(r,function(e){p(e,i,o,t,n)}),t.childNodes.length==n?t.appendChild(e):t.insertBefore(e,t.childNodes[n])}function v(e,t){var n=e.parentNode,r=N.getNodeIndex(e);B(t,function(e){g(e,n,r)}),N.removeNode(e)}function _(e,t,n,r,i){for(var o,a=[];o=e.firstChild;)m(o,t,n++,i),a.push(o);return r&&v(e,i),a}function y(e,t){return _(e,e.parentNode,N.getNodeIndex(e),!0,t)}function b(e,t){var n=e.cloneRange();n.selectNodeContents(t);var r=n.intersection(e),i=r?r.toString():"";return""!=i}function w(e){for(var t,n=e.getNodes([3]),r=0;(t=n[r])&&!b(e,t);)++r;for(var i=n.length-1;(t=n[i])&&!b(e,t);)--i;return n.slice(r,i+1)}function x(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,r,i,o=0,a=e.attributes.length;o<a;++o)if(n=e.attributes[o],i=n.name,"class"!=i){if(r=t.attributes.getNamedItem(i),null===n!=(null===r))return!1;if(n.specified!=r.specified)return!1;if(n.specified&&n.nodeValue!==r.nodeValue)return!1}return!0}function k(e,t){for(var n,r=0,i=e.attributes.length;r<i;++r)if(n=e.attributes[r].name,(!t||!F(t,n))&&e.attributes[r].specified&&"class"!=n)return!0;return!1}function C(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||V(e)&&!V(e.parentNode))}function S(e){return(V(e)||1!=e.nodeType&&V(e.parentNode))&&!C(e)}function E(e){return e&&1==e.nodeType&&!W.test(H(e,"display"))}function $(e){if(0==e.data.length)return!0;if(G.test(e.data))return!1;var t=H(e.parentNode,"whiteSpace");switch(t){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return E(e.previousSibling)||E(e.nextSibling)}function T(e){var t,n,r=[];for(t=0;n=e[t++];)r.push(new j(n.startContainer,n.startOffset),new j(n.endContainer,n.endOffset));return r}function A(e,t){for(var n,r,i,o=0,a=e.length;o<a;++o)n=e[o],r=t[2*o],i=t[2*o+1],n.setStartAndEnd(r.node,r.offset,i.node,i.offset)}function D(e,t){return N.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}function O(e,n,r,i){var o,a,s=0==r;if(N.isAncestorOf(n,e))return e;if(N.isCharacterDataNode(n)){var l=N.getNodeIndex(n);if(0==r)r=l;else{if(r!=n.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+r+" in "+n.data);r=l+1}n=n.parentNode}if(D(n,r)){o=n.cloneNode(!1),a=n.parentNode,o.id&&o.removeAttribute("id");for(var c,u=0;c=n.childNodes[r];)m(c,o,u++,i);return m(o,a,N.getNodeIndex(n)+1,i),n==e?o:O(e,a,N.getNodeIndex(o),i)}if(e!=n){o=n.parentNode;var d=N.getNodeIndex(n);return s||d++,O(e,o,d,i)}return e}function P(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&d(e,t)&&x(e,t)&&"inline"==H(e,"display")&&"inline"==H(t,"display")}function R(e){var t=e?"nextSibling":"previousSibling";return function(n,r){var i=n.parentNode,o=n[t];if(o){if(o&&3==o.nodeType)return o}else if(r&&(o=i[t],o&&1==o.nodeType&&P(i,o))){var a=o[e?"firstChild":"lastChild"];if(a&&3==a.nodeType)return a}return null}}function I(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}function M(e,t,i){var o,a,s,l,u=this;u.cssClass=u.className=e;var d=null,f={};if("object"==typeof t&&null!==t){for("undefined"!=typeof t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),i=t.tagNames,d=t.elementProperties,f=t.elementAttributes,a=0;l=X[a++];)t.hasOwnProperty(l)&&(u[l]=t[l]);o=t.normalize}else o=t;u.normalize="undefined"==typeof o||o,u.attrExceptions=[];var h=document.createElement(u.elementTagName);u.elementProperties=u.copyPropertiesToElement(d,h,!0),n(f,function(e){u.attrExceptions.push(e)}),u.elementAttributes=f,u.elementSortedClassName=u.elementProperties.hasOwnProperty("className")?c(u.elementProperties.className+" "+e):e,u.applyToAnyTagName=!1;var p=typeof i;if("string"==p)"*"==i?u.applyToAnyTagName=!0:u.tagNames=r(i.toLowerCase()).split(/\s*,\s*/);else if("object"==p&&"number"==typeof i.length)for(u.tagNames=[],a=0,s=i.length;a<s;++a)"*"==i[a]?u.applyToAnyTagName=!0:u.tagNames.push(i[a].toLowerCase());else u.tagNames=[u.elementTagName]}function L(e,t,n){return new M(e,t,n)}var N=e.dom,j=N.DomPosition,F=N.arrayContains,B=e.util.forEach,U="span",z=e.util.isHostMethod(document,"createElementNS"),q=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var r="string"==typeof t.className,i=r?t.className:t.getAttribute("class");i=i.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),r?t.className=i:t.setAttribute("class",i)}}}(),H=N.getComputedStyleProperty,V=function(){var e=document.createElement("div");return"boolean"==typeof e.isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||V(e.parentNode))}}(),W=/^inline(-block|-table)?$/i,G=/[^\r\n\t\f \u200B]/,Y=R(!1),K=R(!0);I.prototype={doMerge:function(e){var t=this.textNodes,n=t[0];if(t.length>1){var r,i=N.getNodeIndex(n),o=[],a=0;B(t,function(t,s){r=t.parentNode,s>0&&(r.removeChild(t),r.hasChildNodes()||N.removeNode(r),e&&B(e,function(e){e.node==t&&(e.node=n,e.offset+=a),e.node==r&&e.offset>i&&(--e.offset,e.offset==i+1&&s<len-1&&(e.node=n,e.offset=a))})),o[s]=t.data,a+=t.data.length}),n.data=o.join("")}return n.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return B(this.textNodes,function(t,n){e[n]="'"+t.data+"'"}),"[Merge("+e.join(",")+")]"}};var X=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],J={};M.prototype={elementTagName:U,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var r,i,o,a,l,u,d={};for(var f in e)if(e.hasOwnProperty(f))if(a=e[f],l=t[f],"className"==f)s(t,a),s(t,this.className),t[f]=c(t[f]),n&&(d[f]=a);else if("style"==f){i=l,n&&(d[f]=o={});for(r in e[f])e[f].hasOwnProperty(r)&&(i[r]=a[r],n&&(o[r]=i[r]));this.attrExceptions.push(f)}else t[f]=a,n&&(d[f]=t[f],u=J.hasOwnProperty(f)?J[f]:f,this.attrExceptions.push(u));return n?d:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return F(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&a(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||S(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&$(e)},postApply:function(e,t,n,r){var o,a,s=e[0],l=e[e.length-1],c=[],u=s,d=l,f=0,h=l.length;B(e,function(e){a=Y(e,!r),a?(o||(o=new I(a),c.push(o)),o.textNodes.push(e),e===s&&(u=o.textNodes[0],f=u.length),e===l&&(d=o.textNodes[0],h=o.getLength())):o=null});var p=K(l,!r);if(p&&(o||(o=new I(l),c.push(o)),o.textNodes.push(p)),c.length){for(i=0,len=c.length;i<len;++i)c[i].doMerge(n);t.setStartAndEnd(u,f,d,h)}},createContainer:function(e){var t,n=N.getDocument(e),r=z&&!N.isHtmlNamespace(e)&&(t=e.namespaceURI)?n.createElementNS(e.namespaceURI,this.elementTagName):n.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,r,!1),this.copyAttributesToElement(this.elementAttributes,r),s(r,this.className),this.onElementCreate&&this.onElementCreate(r,this),r},elementHasProperties:function(e,t){var r=this;return n(t,function(t,n){if("className"==t)return f(e,n);if("object"==typeof n){if(!r.elementHasProperties(e[t],n))return!1}else if(e[t]!==n)return!1})},elementHasAttributes:function(e,t){return n(t,function(t,n){if(e.getAttribute(t)!==n)return!1})},applyToTextNode:function(e,t){if(h(e)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))s(n,this.className);else{var r=e.parentNode,i=this.createContainer(r);r.insertBefore(i,e),i.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&u(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!k(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),r=[e],i=T(r);B(n,function(e){v(e,i)}),A(r,i)},undoToTextNode:function(e,t,n,r){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&(O(n,t.endContainer,t.endOffset,r),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&(n=O(n,t.startContainer,t.startOffset,r))}this.isRemovable(n)?y(n,r):q(n,this.className)},splitAncestorWithClass:function(e,t,n){var r=this.getSelfOrAncestorWithClass(e);r&&O(r,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?y(e,t):q(e,this.className)},applyToRange:function(e,t){var n=this;t=t||[];var r=T(t||[]);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e);var i=w(e);if(i.length){B(i,function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,r)});var o=i[i.length-1];e.setStartAndEnd(i[0],0,o,o.length),n.normalize&&n.postApply(i,e,r,!1),A(t,r)}var a=n.getEmptyElements(e);B(a,function(e){s(e,n.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var n=e.getSelection(t);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(e,t){var n=this;t=t||[];var r=T(t);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e,r);var i,o,a=w(e),s=a[a.length-1];if(a.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,r),n.splitAncestorWithClass(e.startContainer,e.startOffset,r);for(var l=0,c=a.length;l<c;++l)i=a[l],o=n.getSelfOrAncestorWithClass(i),o&&n.isModifiable(i)&&n.undoToAncestor(o,r);e.setStartAndEnd(a[0],0,s,s.length),n.normalize&&n.postApply(a,e,r,!0),A(t,r)}var u=n.getEmptyElements(e);B(u,function(e){q(e,n.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var n=e.getSelection(t),r=e.getSelection(t).getAllRanges();this.undoToRanges(r),n.setRanges(r)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,r=0;n=t[r++];)if(!this.isIgnorableWhiteSpaceNode(n)&&b(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var n=e.getSelection(t);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],function(e){var r=n.getSelfOrAncestorWithClass(e);r&&!F(t,r)&&t.push(r)}),t},detach:function(){}},M.util={hasClass:a,addClass:s,removeClass:q,getClass:l,hasSameClasses:d,hasAllClasses:f,replaceWithOwnChildren:y,elementsHaveSameNonClassAttributes:x,elementHasNonClassAttributes:k,splitNodeAt:O,isEditableElement:V,isEditingHost:C,isEditable:S},e.CssClassApplier=e.ClassApplier=M,e.createCssClassApplier=e.createClassApplier=L}),e},this)},function(e,t,n){var r,i,o;!function(a,s){i=[n(11)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(function(e){return e.createModule("Highlighter",["ClassApplier"],function(e,t){function n(e,t){return e.characterRange.start-t.characterRange.start}function r(e,t){return t?e.getElementById(t):f(e)}function i(e,t){this.type=e,this.converterCreator=t;
}function o(e,t){m[e]=new i(e,t)}function a(e){var t=m[e];if(t instanceof i)return t.create();throw new Error("Highlighter type '"+e+"' is not valid")}function s(e,t){this.start=e,this.end=t}function l(e,t,n,r,i,o){i?(this.id=i,g=Math.max(g,i+1)):this.id=g++,this.characterRange=t,this.doc=e,this.classApplier=n,this.converter=r,this.containerElementId=o||null,this.applied=!1}function c(e,t){t=t||"textContent",this.doc=e||document,this.classAppliers={},this.highlights=[],this.converter=a(t)}var u=e.dom,d=u.arrayContains,f=u.getBody,h=e.util.createOptions,p=e.util.forEach,g=1,m={};i.prototype.create=function(){var e=this.converterCreator();return e.type=this.type,e},e.registerHighlighterType=o,s.prototype={intersects:function(e){return this.start<e.end&&this.end>e.start},isContiguousWith:function(e){return this.start==e.end||this.end==e.start},union:function(e){return new s(Math.min(this.start,e.start),Math.max(this.end,e.end))},intersection:function(e){return new s(Math.max(this.start,e.start),Math.min(this.end,e.end))},getComplements:function(e){var t=[];if(this.start>=e.start){if(this.end<=e.end)return[];t.push(new s(e.end,this.end))}else t.push(new s(this.start,Math.min(this.end,e.start))),this.end>e.end&&t.push(new s(e.end,this.end));return t},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}},s.fromCharacterRange=function(e){return new s(e.start,e.end)};var v={rangeToCharacterRange:function(e,t){var n=e.getBookmark(t);return new s(n.start,n.end)},characterRangeToRange:function(t,n,r){var i=e.createRange(t);return i.moveToBookmark({start:n.start,end:n.end,containerNode:r}),i},serializeSelection:function(e,t){for(var n=e.getAllRanges(),r=n.length,i=[],o=1==r&&e.isBackward(),a=0,s=n.length;a<s;++a)i[a]={characterRange:this.rangeToCharacterRange(n[a],t),backward:o};return i},restoreSelection:function(e,t,n){e.removeAllRanges();for(var r,i,o,a=e.win.document,s=0,l=t.length;s<l;++s)i=t[s],o=i.characterRange,r=this.characterRangeToRange(a,i.characterRange,n),e.addRange(r,i.backward)}};o("textContent",function(){return v}),o("TextRange",function(){var t;return function(){if(!t){var n=e.modules.TextRange;if(!n)throw new Error("TextRange module is missing.");if(!n.supported)throw new Error("TextRange module is present but not supported.");t={rangeToCharacterRange:function(e,t){return s.fromCharacterRange(e.toCharacterRange(t))},characterRangeToRange:function(t,n,r){var i=e.createRange(t);return i.selectCharacters(r,n.start,n.end),i},serializeSelection:function(e,t){return e.saveCharacterRanges(t)},restoreSelection:function(e,t,n){e.restoreCharacterRanges(n,t)}}}return t}}()),l.prototype={getContainerElement:function(){return r(this.doc,this.containerElementId)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(e){this.characterRange=this.converter.rangeToCharacterRange(e,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(e){return this.getRange().containsNodeContents(e.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange()),this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange()),this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}},c.prototype={addClassApplier:function(e){this.classAppliers[e.className]=e},getHighlightForElement:function(e){for(var t=this.highlights,n=0,r=t.length;n<r;++n)if(t[n].containsElement(e))return t[n];return null},removeHighlights:function(e){for(var t,n=0,r=this.highlights.length;n<r;++n)t=this.highlights[n],d(e,t)&&(t.unapply(),this.highlights.splice(n--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(e){var t=[],n=this.highlights;return p(e,function(e){p(n,function(n){e.intersectsRange(n.getRange())&&!d(t,n)&&t.push(n)})}),t},highlightCharacterRanges:function(t,n,r){var i,o,a,c=this.highlights,u=this.converter,d=this.doc,f=[],g=t?this.classAppliers[t]:null;r=h(r,{containerElementId:null,exclusive:!0});var m,v,_,y=r.containerElementId,b=r.exclusive;y&&(m=this.doc.getElementById(y),m&&(v=e.createRange(this.doc),v.selectNodeContents(m),_=new s(0,v.toString().length)));var w,x,k,C,S,E;for(i=0,o=n.length;i<o;++i)if(w=n[i],S=[],_&&(w=w.intersection(_)),w.start!=w.end){for(a=0;a<c.length;++a)k=!1,y==c[a].containerElementId&&(x=c[a].characterRange,C=g==c[a].classApplier,E=!C&&b,(x.intersects(w)||x.isContiguousWith(w))&&(C||E)&&(E&&p(x.getComplements(w),function(e){S.push(new l(d,e,c[a].classApplier,u,null,y))}),k=!0,C&&(w=x.union(w)))),k?(f.push(c[a]),c[a]=new l(d,x.union(w),g,u,null,y)):S.push(c[a]);g&&S.push(new l(d,w,g,u,null,y)),this.highlights=c=S}p(f,function(e){e.unapply()});var $=[];return p(c,function(e){e.applied||(e.apply(),$.push(e))}),$},highlightRanges:function(t,n,r){var i=[],o=this.converter;r=h(r,{containerElement:null,exclusive:!0});var a,s=r.containerElement,l=s?s.id:null;return s&&(a=e.createRange(s),a.selectNodeContents(s)),p(n,function(e){var t=s?a.intersection(e):e;i.push(o.rangeToCharacterRange(t,s||f(e.getDocument())))}),this.highlightCharacterRanges(t,i,{containerElementId:l,exclusive:r.exclusive})},highlightSelection:function(t,n){var i=this.converter,o=!!t&&this.classAppliers[t];n=h(n,{containerElementId:null,selection:e.getSelection(),exclusive:!0});var a=n.containerElementId,l=n.exclusive,c=n.selection,u=c.win.document,d=r(u,a);if(!o&&t!==!1)throw new Error("No class applier found for class '"+t+"'");var f=i.serializeSelection(c,d),g=[];p(f,function(e){g.push(s.fromCharacterRange(e.characterRange))});var m=this.highlightCharacterRanges(t,g,{containerElementId:a,exclusive:l});return i.restoreSelection(c,f,d),m},unhighlightSelection:function(t){t=t||e.getSelection();var n=this.getIntersectingHighlights(t.getAllRanges());return this.removeHighlights(n),t.removeAllRanges(),n},getHighlightsInSelection:function(t){return t=t||e.getSelection(),this.getIntersectingHighlights(t.getAllRanges())},selectionOverlapsHighlight:function(e){return this.getHighlightsInSelection(e).length>0},serialize:function(e){var t,r,i,o,s=this,l=s.highlights;return l.sort(n),e=h(e,{serializeHighlightText:!1,type:s.converter.type}),t=e.type,i=t!=s.converter.type,i&&(o=a(t)),r=["type:"+t],p(l,function(t){var n,a=t.characterRange;i&&(n=t.getContainerElement(),a=o.rangeToCharacterRange(s.converter.characterRangeToRange(s.doc,a,n),n));var l=[a.start,a.end,t.id,t.classApplier.className,t.containerElementId];e.serializeHighlightText&&l.push(t.getText()),r.push(l.join("$"))}),r.join("|")},deserialize:function(e){var t,n,i,o=e.split("|"),c=[],u=o[0],d=!1;if(!u||!(t=/^type:(\w+)$/.exec(u)))throw new Error("Serialized highlights are invalid.");n=t[1],n!=this.converter.type&&(i=a(n),d=!0),o.shift();for(var f,h,p,g,m,v,_=o.length;_-- >0;){if(v=o[_].split("$"),p=new s(+v[0],+v[1]),g=v[4]||null,d&&(m=r(this.doc,g),p=this.converter.rangeToCharacterRange(i.characterRangeToRange(this.doc,p,m),m)),f=this.classAppliers[v[3]],!classAppliers){for(var y in this.classAppliers)break;f=this.classAppliers[y]}h=new l(this.doc,p,f,this.converter,parseInt(v[2]),g),h.apply(),c.push(h)}this.highlights=c}},e.Highlighter=c,e.createHighlighter=function(e,t){return new c(e,t)}}),e},this)},function(e,t,n){var r,i,o;!function(a,s){i=[n(11)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=p.getDocument(e.startContainer),o=e.cloneRange();return o.collapse(t),n=i.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(m)),o.insertNode(n),n}function i(e,r,i,o){var a=n(i,e);a?(r[o?"setStartBefore":"setEndBefore"](a),g(a)):t.warn("Marker element has been removed. Cannot restore selection.")}function o(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function a(t,n){var i,o,a=e.DomRange.getRangeDocument(t),s=t.toString();return t.collapsed?(o=r(t,!1),{document:a,markerId:o.id,collapsed:!0}):(o=r(t,!1),i=r(t,!0),{document:a,startMarkerId:i.id,endMarkerId:o.id,collapsed:!1,backward:n,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function s(r,o){var a=r.document;"undefined"==typeof o&&(o=!0);var s=e.createRange(a);if(r.collapsed){var l=n(r.markerId,a);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(g(l),s.collapseToPoint(c,c.length)):(s.collapseBefore(l),g(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else i(a,s,r.startMarkerId,!0),i(a,s,r.endMarkerId,!1);return o&&s.normalizeBoundaries(),s}function l(t,r){var i,s,l=[];t=t.slice(0),t.sort(o);for(var c=0,u=t.length;c<u;++c)l[c]=a(t[c],r);for(c=u-1;c>=0;--c)i=t[c],s=e.DomRange.getRangeDocument(i),i.collapsed?i.collapseAfter(n(l[c].markerId,s)):(i.setEndBefore(n(l[c].endMarkerId,s)),i.setStartAfter(n(l[c].startMarkerId,s)));return l}function c(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),i=r.getAllRanges(),o=1==i.length&&r.isBackward(),a=l(i,o);return o?r.setSingleRange(i[0],"backward"):r.setRanges(i),{win:n,rangeInfos:a,restored:!1}}function u(e){for(var t=[],n=e.length,r=n-1;r>=0;r--)t[r]=s(e[r],!0);return t}function d(t,n){if(!t.restored){var r=t.rangeInfos,i=e.getSelection(t.win),o=u(r),a=r.length;1==a&&n&&e.features.selectionHasExtend&&r[0].backward?(i.removeAllRanges(),i.addRange(o[0],!0)):i.setRanges(o),t.restored=!0}}function f(e,t){var r=n(t,e);r&&g(r)}function h(e){for(var t,n=e.rangeInfos,r=0,i=n.length;r<i;++r)t=n[r],t.collapsed?f(e.doc,t.markerId):(f(e.doc,t.startMarkerId),f(e.doc,t.endMarkerId))}var p=e.dom,g=p.removeNode,m="\ufeff";e.util.extend(e,{saveRange:a,restoreRange:s,saveRanges:l,restoreRanges:u,saveSelection:c,restoreSelection:d,removeMarkerElement:f,removeMarkers:h})}),e},this)},function(e,t,n){var r,i,o;!function(a,s){i=[n(11)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(function(e){return e.createModule("Serializer",["WrappedSelection"],function(e,t){function n(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e,t){t=t||[];var i=e.nodeType,o=e.childNodes,a=o.length,s=[i,e.nodeName,a].join(":"),l="",c="";switch(i){case 3:l=n(e.nodeValue);break;case 8:l="<!--"+n(e.nodeValue)+"-->";break;default:l="<"+s+">",c="</>"}l&&t.push(l);for(var u=0;u<a;++u)r(o[u],t);return c&&t.push(c),t}function i(e){var t=r(e).join("");return _(t).toString(16)}function o(e,t,n){var r=[],i=e;for(n=n||y.getDocument(e).documentElement;i&&i!=n;)r.push(y.getNodeIndex(i,!0)),i=i.parentNode;return r.join("/")+":"+t}function a(e,n,r){n||(n=(r||document).documentElement);for(var i,o=e.split(":"),a=n,s=o[0]?o[0].split("/"):[],l=s.length;l--;){if(i=parseInt(s[l],10),!(i<a.childNodes.length))throw t.createError("deserializePosition() failed: node "+y.inspectNode(a)+" has no child with index "+i+", "+l);a=a.childNodes[i]}return new y.DomPosition(a,parseInt(o[1],10))}function s(n,r,a){if(a=a||e.DomRange.getRangeDocument(n).documentElement,!y.isOrIsAncestorOf(a,n.commonAncestorContainer))throw t.createError("serializeRange(): range "+n.inspect()+" is not wholly contained within specified root node "+y.inspectNode(a));var s=o(n.startContainer,n.startOffset,a)+","+o(n.endContainer,n.endOffset,a);return r||(s+="{"+i(a)+"}"),s}function l(n,r,o){r?o=o||y.getDocument(r):(o=o||document,r=o.documentElement);var s=b.exec(n),l=s[4];if(l){var c=i(r);if(l!==c)throw t.createError("deserializeRange(): checksums of serialized range root node ("+l+") and target root node ("+c+") do not match")}var u=a(s[1],r,o),d=a(s[2],r,o),f=e.createRange(o);return f.setStartAndEnd(u.node,u.offset,d.node,d.offset),f}function c(e,t,n){t||(t=(n||document).documentElement);var r=b.exec(e),o=r[3];return!o||o===i(t)}function u(t,n,r){t=e.getSelection(t);for(var i=t.getAllRanges(),o=[],a=0,l=i.length;a<l;++a)o[a]=s(i[a],n,r);return o.join("|")}function d(t,n,r){n?r=r||y.getWindow(n):(r=r||window,n=r.document.documentElement);for(var i=t.split("|"),o=e.getSelection(r),a=[],s=0,c=i.length;s<c;++s)a[s]=l(i[s],n,r.document);return o.setRanges(a),o}function f(e,t,n){var r;t?r=n?n.document:y.getDocument(t):(n=n||window,t=n.document.documentElement);for(var i=e.split("|"),o=0,a=i.length;o<a;++o)if(!c(i[o],t,r))return!1;return!0}function h(e){for(var t,n,r=e.split(/[;,]/),i=0,o=r.length;i<o;++i)if(t=r[i].split("="),t[0].replace(/^\s+/,"")==w&&(n=t[1]))return decodeURIComponent(n.replace(/\s+$/,""));return null}function p(e){e=e||window;var t=h(e.document.cookie);t&&d(t,e.doc)}function g(t,n){t=t||window,n="object"==typeof n?n:{};var r=n.expires?";expires="+n.expires.toUTCString():"",i=n.path?";path="+n.path:"",o=n.domain?";domain="+n.domain:"",a=n.secure?";secure":"",s=u(e.getSelection(t));t.document.cookie=encodeURIComponent(w)+"="+encodeURIComponent(s)+r+i+o+a}var m="undefined",v=e.util;typeof encodeURIComponent!=m&&typeof decodeURIComponent!=m||t.fail("encodeURIComponent and/or decodeURIComponent method is missing");var _=function(){function e(e){for(var t,n=[],r=0,i=e.length;r<i;++r)t=e.charCodeAt(r),t<128?n.push(t):t<2048?n.push(t>>6|192,63&t|128):n.push(t>>12|224,t>>6&63|128,63&t|128);return n}function t(){for(var e,t,n=[],r=0;r<256;++r){for(t=r,e=8;e--;)1==(1&t)?t=t>>>1^3988292384:t>>>=1;n[r]=t>>>0}return n}function n(){return r||(r=t()),r}var r=null;return function(t){for(var r,i=e(t),o=-1,a=n(),s=0,l=i.length;s<l;++s)r=255&(o^i[s]),o=o>>>8^a[r];return(o^-1)>>>0}}(),y=e.dom,b=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,w="rangySerializedSelection";v.extend(e,{serializePosition:o,deserializePosition:a,serializeRange:s,deserializeRange:l,canDeserializeRange:c,serializeSelection:u,deserializeSelection:d,canDeserializeSelection:f,restoreSelectionFromCookie:p,saveSelectionCookie:g,getElementChecksum:i,nodeToInfoString:r}),v.crc32=_}),e},this)},function(e,t,n){var r,i,o;!function(a,s){i=[n(11)],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(function(e){return e.createModule("TextRange",["WrappedSelection"],function(e,t){function n(e,t){function n(t,n,r){for(var i=e.slice(t,n),o={isWord:r,chars:i,toString:function(){return i.join("")}},a=0,l=i.length;a<l;++a)i[a].token=o;s.push(o)}for(var r,i,o,a=e.join(""),s=[],l=0;r=t.wordRegex.exec(a);){if(i=r.index,o=i+r[0].length,i>l&&n(l,i,!1),t.includeTrailingSpace)for(;X.test(e[o]);)++o;n(i,o,!0),l=o}return l<e.length&&n(l,e.length,!1),s}function r(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),n.join("").replace(/(.)\1+/g,"$1")}function i(e){var t,n;return e?(t=e.language||J,n={},H(n,ae[t]||ae[J]),H(n,e),n):ae[J]}function o(e,t){var n=V(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=i(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=V(n.characterOptions,ie)),n}function a(e,t){var n=de(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&re&&fe.hasOwnProperty(r)?fe[r]:n}function s(e){for(var t=f(e),n=0,r=t.length;n<r;++n)if(1==t[n].nodeType&&"none"==a(t[n]))return!0;return!1}function l(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==de(t,"visibility")}function c(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(a(e))||9==e.nodeType||11==e.nodeType)}function u(e){return z.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}function d(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function f(e){return d(e).concat([e])}function h(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}function p(e,t){return!t&&e.hasChildNodes()?e.firstChild:h(e)}function g(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function m(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=de(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function v(e){if(""===e.data)return!0;if(!m(e))return!1;var t=e.parentNode;return!t||!!s(e)}function _(e){var t=e.nodeType;return 7==t||8==t||s(e)||/^(script|style)$/i.test(e.nodeName)||l(e)||v(e)}function y(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==a(e,t)}function b(){this.store={}}function w(e,t,n){return function(r){var i=this.cache;if(i.hasOwnProperty(e))return he++,i[e];pe++;var o=t.call(this,n?this[n]:this,r);return i[e]=o,o}}function x(e,t){this.node=e,this.session=t,this.cache=new b,this.positions=new b}function k(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new b}function C(){return"[Position("+z.inspectNode(this.node)+":"+this.offset+")]"}function S(){return $(),Ee=new $e}function E(){return Ee||S()}function $(){Ee&&Ee.detach(),Ee=null}function T(e,n,r,i){function o(){var e=null;return n?(e=s,l||(s=s.previousVisible(),l=!s||r&&s.equals(r))):l||(e=s=s.nextVisible(),l=!s||r&&s.equals(r)),l&&(s=null),e}r&&(n?_(r.node)&&(r=e.previousVisible()):_(r.node)&&(r=r.nextVisible()));var a,s=e,l=!1,c=!1;return{next:function(){if(c)return c=!1,a;for(var e,t;e=o();)if(t=e.getCharacter(i))return a=e,e;return null},rewind:function(){if(!a)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");c=!0},dispose:function(){e=r=null}}}function A(e,t,n){function r(e){for(var t,n,r=[],a=e?i:o,s=!1,l=!1;t=a.next();){if(n=t.character,K.test(n))l&&(l=!1,s=!0);else{if(s){a.rewind();break}l=!0}r.push(t)}return r}var i=T(e,!1,null,t),o=T(e,!0,null,t),a=n.tokenizer,s=r(!0),l=r(!1).reverse(),c=a(l.concat(s),n),u=s.length?c.slice(Te(c,s[0].token)):[],d=l.length?c.slice(0,Te(c,l.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==u.length&&!(e=u[0]).isWord&&(t=r(!0)).length>0;)u=a(e.chars.concat(t),n);return u.shift()},previousStartToken:function(){for(var e,t;1==d.length&&!(e=d[0]).isWord&&(t=r(!1)).length>0;)d=a(t.reverse().concat(e.chars),n);return d.pop()},dispose:function(){i.dispose(),o.dispose(),u=d=null}}}function D(e,t,n,r,i){var o,a,s,l,c=0,u=e,d=Math.abs(n);if(0!==n){var f=n<0;switch(t){case B:for(a=T(e,f,null,r);(o=a.next())&&c<d;)++c,u=o;s=o,a.dispose();break;case U:for(var h=A(e,r,i),p=f?h.previousStartToken:h.nextEndToken;(l=p())&&c<d;)l.isWord&&(++c,u=f?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}f?(u=u.previousVisible(),c=-c):u&&u.isLeadingSpace&&(t==U&&(a=T(e,!1,null,r),s=a.next(),a.dispose()),s&&(u=s.previousVisible()))}return{position:u,unitsMoved:c}}function O(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),o=e.getRangeBoundaryPosition(t,!1),a=r?o:i,s=r?i:o;return T(a,!!r,s,n)}function P(e,t,n){for(var r,i=[],o=O(e,t,n);r=o.next();)i.push(r);return o.dispose(),i}function R(t,n,r){var i=e.createRange(t.node);return i.setStartAndEnd(t.node,t.offset,n.node,n.offset),!i.expand("word",{wordOptions:r})}function I(e,t,n,r,i){function o(e,t){var n=g[e].previousVisible(),r=g[t-1],o=!i.wholeWordsOnly||R(n,r,i.wordOptions);return{startPos:n,endPos:r,valid:o}}for(var a,s,l,c,u,d,f=Z(i.direction),h=T(e,f,e.session.getRangeBoundaryPosition(r,f),i.characterOptions),p="",g=[],m=null;a=h.next();)if(s=a.character,n||i.caseSensitive||(s=s.toLowerCase()),f?(g.unshift(a),p=s+p):(g.push(a),p+=s),n){if(u=t.exec(p))if(l=u.index,c=l+u[0].length,d){if(!f&&c<p.length||f&&l>0){m=o(l,c);break}}else d=!0}else if((l=p.indexOf(t))!=-1){m=o(l,l+t.length);break}return d&&(m=o(l,c)),h.dispose(),m}function M(e){return function(){var t=!!Ee,n=E(),r=[n].concat(q.toArray(arguments)),i=e.apply(this,r);return t||$(),i}}function L(e,t){return M(function(n,r,i,a){typeof i==F&&(i=r,r=B),a=o(a,le);var s=e;t&&(s=i>=0,this.collapse(!s));var l=D(n.getRangeBoundaryPosition(this,s),r,i,a.characterOptions,a.wordOptions),c=l.position;return this[s?"setStart":"setEnd"](c.node,c.offset),l.unitsMoved})}function N(e){return M(function(t,n){n=V(n,ie);for(var r,i=O(t,this,n,!e),o=0;(r=i.next())&&K.test(r.character);)++o;i.dispose();var a=o>0;return a&&this[e?"moveStart":"moveEnd"]("character",e?o:-o,{characterOptions:n}),a})}function j(e){return M(function(t,n){var r=!1;return this.changeEachRange(function(t){r=t[e](n)||r}),r})}var F="undefined",B="character",U="word",z=e.dom,q=e.util,H=q.extend,V=q.createOptions,W=z.getBody,G=/^[ \t\f\r\n]+$/,Y=/^[ \t\f\r]+$/,K=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,X=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,J="en",Z=e.Selection.isDirectionBackward,Q=!1,ee=!1,te=!1,ne=!0;!function(){var t=z.createTestElement(document,"<p>1 </p><p></p>",!0),n=t.firstChild,r=e.getSelection();r.collapse(n.lastChild,2),r.setStart(n.firstChild,0),Q=1==(""+r).length,t.innerHTML="1 <br />",r.collapse(t,2),r.setStart(t.firstChild,0),ee=1==(""+r).length,t.innerHTML="1 <p>1</p>",r.collapse(t,2),r.setStart(t.firstChild,0),te=1==(""+r).length,z.removeNode(t),r.removeAllRanges()}();var re,ie={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},oe={includeBlockContentTrailingSpace:!ne,includeSpaceBeforeBr:!ee,includeSpaceBeforeBlock:!te,includePreLineTrailingSpace:!0},ae={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:n}},se={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},le={wordOptions:null,characterOptions:null},ce={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},ue={wordOptions:null,characterOptions:null,direction:"forward"},de=z.getComputedStyleProperty;!function(){var e=document.createElement("table"),t=W(document);t.appendChild(e),re="block"==de(e,"display"),t.removeChild(e)}(),e.features.tableCssDisplayBlock=re;var fe={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};b.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var he=0,pe=0,ge={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new k(this,e))},toString:function(){return"[NodeWrapper("+z.inspectNode(this.node)+")]"}};x.prototype=ge;var me="EMPTY",ve="NON_SPACE",_e="UNCOLLAPSIBLE_SPACE",ye="COLLAPSIBLE_SPACE",be="TRAILING_SPACE_BEFORE_BLOCK",we="TRAILING_SPACE_IN_BLOCK",xe="TRAILING_SPACE_BEFORE_BR",ke="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",Ce="TRAILING_LINE_BREAK_AFTER_BR";H(ge,{isCharacterDataNode:w("isCharacterDataNode",z.isCharacterDataNode,"node"),getNodeIndex:w("nodeIndex",z.getNodeIndex,"node"),getLength:w("nodeLength",z.getNodeLength,"node"),containsPositions:w("containsPositions",u,"node"),isWhitespace:w("isWhitespace",m,"node"),isCollapsedWhitespace:w("isCollapsedWhitespace",v,"node"),getComputedDisplay:w("computedDisplay",a,"node"),isCollapsed:w("collapsed",_,"node"),isIgnored:w("ignored",y,"node"),next:w("nextPos",p,"node"),previous:w("previous",g,"node"),getTextNodeInfo:w("textNodeInfo",function(e){var t=null,n=!1,r=de(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=Y,n=!0):"normal"!=r&&"nowrap"!=r||(t=G,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:w("hasInnerText",function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),o=t?r:i,a=t?i:r;o!==a;){if(o.prepopulateChar(),o.isDefinitelyNonEmpty())return!0;o=t?o.previousVisible():o.nextVisible()}return!1},"node"),isRenderedBlock:w("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!_(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:w("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!y(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:w("leadingSpace",function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Se={character:"",characterType:me,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",i=me,o=!1;if(n>0)if(3==t.nodeType){var a=t.data,s=a.charAt(n-1),l=e.nodeWrapper.getTextNodeInfo(),c=l.spaceRegex;l.collapseSpaces?c.test(s)?n>1&&c.test(a.charAt(n-2))||(l.preLine&&"\n"===a.charAt(n)?(r=" ",i=ke):(r=" ",i=ye)):(r=s,i=ve,o=!0):(r=s,i=_e,o=!0)}else{var u=t.childNodes[n-1];if(u&&1==u.nodeType&&!_(u)&&("br"==u.tagName.toLowerCase()?(r="\n",e.isBr=!0,i=ye,o=!1):e.checkForTrailingSpace=!0),!r){var d=t.childNodes[n];d&&1==d.nodeType&&!_(d)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=i,e.isCharInvariant=o}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==ve||e==_e},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=ye),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=ye),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t,n=this;n=n.previousVisible();)if(t=n.getCharacter(e),""!==t)return n;return null},getCharacter:function(e){function t(){return h||(u=p.getPrecedingUncollapsedPosition(e),h=!0),u}this.resolveLeadingAndTrailingSpaces();var n,i=this.character,o=r(e.ignoreCharacters),a=""!==i&&o.indexOf(i)>-1;if(this.isCharInvariant)return n=a?"":i;var s=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,o].join("_"),l=this.cache.get(s);if(null!==l)return l;var c,u,d="",f=this.characterType==ye,h=!1,p=this;return f?(" "!=i||t()&&!u.isTrailingSpace&&"\n"!=u.character)&&("\n"==i&&this.isLeadingSpace?t()&&"\n"!=u.character&&(d="\n"):(c=this.nextUncollapsed(),c&&(c.isBr?this.type=xe:c.isTrailingSpace&&"\n"==c.character?this.type=we:c.isLeadingSpace&&"\n"==c.character&&(this.type=be),"\n"==c.character?(this.type!=xe||e.includeSpaceBeforeBr)&&(this.type!=be||e.includeSpaceBeforeBlock)&&(this.type==we&&c.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=ke||c.type!=ve||e.includePreLineTrailingSpace)&&("\n"==i?c.isTrailingSpace?this.isTrailingSpace||this.isBr&&(c.type=Ce,t()&&u.isLeadingSpace&&"\n"==u.character&&(c.character="")):d="\n":" "==i&&(d=" "))):d=i))):"\n"==i&&(!(c=this.nextUncollapsed())||c.isTrailingSpace),o.indexOf(d)>-1&&(d=""),this.cache.set(s,d),d},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:C,toString:function(){return this.character}};k.prototype=Se,H(Se,{next:w("nextPos",function(e){var t=e.nodeWrapper,n=e.node,r=e.offset,i=t.session;if(!n)return null;var o,a,s;return r==t.getLength()?(o=n.parentNode,a=o?t.getNodeIndex()+1:0):t.isCharacterDataNode()?(o=n,a=r+1):(s=n.childNodes[r],i.getNodeWrapper(s).containsPositions()?(o=s,a=0):(o=n,a=r+1)),o?i.getPosition(o,a):null}),previous:w("previous",function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return 0==a?(t=o.parentNode,n=t?i.getNodeIndex():0):i.isCharacterDataNode()?(t=o,n=a-1):(r=o.childNodes[a-1],s.getNodeWrapper(r).containsPositions()?(t=r,n=z.getNodeLength(r)):(t=o,n=a-1)),t?s.getPosition(t,n):null}),nextVisible:w("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),i}),nextUncollapsed:w("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:w("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex())),i})});var Ee=null,$e=function(){function e(e){var t=new b;return{get:function(n){var r=t.get(n[e]);if(r)for(var i,o=0;i=r[o++];)if(i.node===n)return i;return null},set:function(n){var r=n.node[e],i=t.get(r)||t.set(r,[]);i.push(n)}}}function t(){this.initCaches()}var n=q.isHostProperty(document.documentElement,"uniqueID");return t.prototype={initCaches:function(){this.elementCache=n?function(){var e=new b;return{get:function(t){return e.get(t.uniqueID)},set:function(t){e.set(t.node.uniqueID,t)}}}():e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new x(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();H(z,{nextNode:p,previousNode:g});var Te=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};H(e.rangePrototype,{moveStart:L(!0,!1),moveEnd:L(!1,!1),move:L(!0,!0),trimStart:N(!0),trimEnd:N(!1),trim:M(function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r}),expand:M(function(e,t,n){var r=!1;n=o(n,ce);var i=n.characterOptions;if(t||(t=B),t==U){var a,s,l=n.wordOptions,c=e.getRangeBoundaryPosition(this,!0),u=e.getRangeBoundaryPosition(this,!1),d=A(c,i,l),f=d.nextEndToken(),h=f.chars[0].previousVisible();if(this.collapsed)a=f;else{var p=A(u,i,l);a=p.previousStartToken()}return s=a.chars[a.chars.length-1],h.equals(c)||(this.setStart(h.node,h.offset),r=!0),s&&!s.equals(u)&&(this.setEnd(s.node,s.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(i)||r),n.trimEnd&&(r=this.trimEnd(i)||r)),r}return this.moveEnd(B,1,n)}),text:M(function(e,t){return this.collapsed?"":P(e,this,V(t,ie)).join("")}),selectCharacters:M(function(e,t,n,r,i){var o={characterOptions:i};t||(t=W(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,o),this.collapse(!0),this.moveEnd("character",r-n,o)}),toCharacterRange:M(function(e,t,n){t||(t=W(this.getDocument()));var r,i,o=t.parentNode,a=z.getNodeIndex(t),s=z.comparePoints(this.startContainer,this.endContainer,o,a)==-1,l=this.cloneRange();return s?(l.setStartAndEnd(this.startContainer,this.startOffset,o,a),r=-l.text(n).length):(l.setStartAndEnd(o,a,this.startContainer,this.startOffset),r=l.text(n).length),i=r+this.text(n).length,{start:r,end:i}}),findText:M(function(t,n,r){r=o(r,se),r.wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1);var i=Z(r.direction),a=r.withinRange;
a||(a=e.createRange(),a.selectNodeContents(this.getDocument()));var s=n,l=!1;"string"==typeof s?r.caseSensitive||(s=s.toLowerCase()):l=!0;var c=t.getRangeBoundaryPosition(this,!i),u=a.comparePoint(c.node,c.offset);u===-1?c=t.getRangeBoundaryPosition(a,!0):1===u&&(c=t.getRangeBoundaryPosition(a,!1));for(var d,f=c,h=!1;;)if(d=I(f,s,l,a,r)){if(d.valid)return this.setStartAndEnd(d.startPos.node,d.startPos.offset,d.endPos.node,d.endPos.offset),!0;f=i?d.startPos:d.endPos}else{if(!r.wrap||h)return!1;a=a.cloneRange(),f=t.getRangeBoundaryPosition(a,!i),a.setBoundary(c.node,c.offset,i),h=!0}}),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),H(e.selectionPrototype,{expand:M(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:M(function(e,t,n,r){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var o=this.getRangeAt(0);r||(r={}),r.characterOptions=V(r.characterOptions,oe),i=o.move(t,n,r),this.setSingleRange(o)}return i}),trimStart:j("trimStart"),trimEnd:j("trimEnd"),trim:j("trim"),selectCharacters:M(function(t,n,r,i,o,a){var s=e.createRange(n);s.selectCharacters(n,r,i,a),this.setSingleRange(s,o)}),saveCharacterRanges:M(function(e,t,n){for(var r=this.getAllRanges(),i=r.length,o=[],a=1==i&&this.isBackward(),s=0,l=r.length;s<l;++s)o[s]={characterRange:r[s].toCharacterRange(t,n),backward:a,characterOptions:n};return o}),restoreCharacterRanges:M(function(t,n,r){this.removeAllRanges();for(var i,o,a,s=0,l=r.length;s<l;++s)o=r[s],a=o.characterRange,i=e.createRange(n),i.selectCharacters(n,a.start,a.end,o.characterOptions),this.addRange(i,o.backward)}),text:M(function(e,t){for(var n=[],r=0,i=this.rangeCount;r<i;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")})}),e.innerText=function(t,n){var r=e.createRange(t);r.selectNodeContents(t);var i=r.text(n);return i},e.createWordIterator=function(e,t,n){var r=E();n=o(n,ue);var i=r.getPosition(e,t),a=A(i,n.characterOptions,n.wordOptions),s=Z(n.direction);return{next:function(){return s?a.previousStartToken():a.nextEndToken()},dispose:function(){a.dispose(),this.next=function(){}}}},e.noMutation=function(e){var t=E();e(t),$()},e.noMutation.createEntryPointFunction=M,e.textRange={isBlockNode:c,isCollapsedWhitespaceNode:v,createPosition:M(function(e,t,n){return e.getPosition(t,n)})}}),e},this)},function(e,t){/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?s(i[n]):i[n]]=!0;return r}function f(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),_.innerHTML=t;var r=5;do{if(0===r)throw d("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&m(_),t=_.innerHTML,_.innerHTML=t}while(t!==_.innerHTML);for(var i=_.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),h(i.attributes));break;case 3:n.chars(i.textContent)}var o;if(!(o=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),o=i.nextSibling,!o))for(;null==o&&(i=i.parentNode,i!==_);)o=i.nextSibling,1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=o}for(;i=_.firstChild;)_.removeChild(i)}function h(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function p(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(e,t){var n=!1,i=r(e,e.push);return{start:function(e,r){e=s(e),!n&&T[e]&&(n=e),n||A[e]!==!0||(i("<"),i(e),o(r,function(n,r){var o=s(r),a="img"===e&&"src"===o||"background"===o;R[o]!==!0||D[o]===!0&&!t(n,a)||(i(" "),i(r),i('="'),i(p(n)),i('"'))}),i(">"))},end:function(e){e=s(e),n||A[e]!==!0||w[e]===!0||(i("</"),i(e),i(">")),e==n&&(n=!1)},chars:function(e){n||i(p(e))}}}function m(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),r--,i--)}var s=t.firstChild;s&&m(s),t=t.nextSibling}}var v=!1;this.$get=["$$sanitizeUri",function(e){return v&&i(A,$),function(t){var n=[];return c(t,u(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return a(e)?(v=e,this):v},r=t.bind,i=t.extend,o=t.forEach,a=t.isDefined,s=t.lowercase,l=t.noop,c=f,u=g;var _,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^#-~ |!])/g,w=n("area,br,col,hr,img,wbr"),x=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k=n("rp,rt"),C=i({},k,x),S=i({},x,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),E=i({},k,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),$=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),T=n("script,style"),A=i({},w,S,E,C),D=n("background,cite,href,longdesc,src,xlink:href"),O=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width,contenteditable"),P=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),R=i({},D,P,O);!function(e){var t;if(!e.document||!e.document.implementation)throw d("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)_=r[0];else{var i=t.createElement("html");_=t.createElement("body"),i.appendChild(_),t.appendChild(i)}}(e)}var r,i,o,a,s,l,c,u,d=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=t.$$minErr("linky"),o=t.isDefined,a=t.isFunction,s=t.isObject,l=t.isString;return function(t,c,u){function d(e){e&&_.push(e)}function f(e,t){var n,r=m(e);_.push("<a ");for(n in r)_.push(n+'="'+r[n]+'" ');!o(c)||"target"in r||_.push('target="',c,'" '),_.push('href="',e.replace(/"/g,"&quot;"),'">'),d(t),_.push("</a>")}if(null==t||""===t)return t;if(!l(t))throw i("notstring","Expected string but received: {0}",t);for(var h,p,g,m=a(u)?u:s(u)?function(){return u}:function(){return{}},v=t,_=[];h=v.match(n);)p=h[0],h[2]||h[4]||(p=(h[3]?"http://":"mailto:")+p),g=h.index,d(v.substr(0,g)),f(p,h[0].replace(r,"")),v=v.substring(g+h[0].length);return d(v),e(_.join(""))}}])}(window,window.angular)},function(e,t,n){var r,i;!function(n,o){"use strict";r=[],i=function(){return o(n,document)}.apply(t,r),!(void 0!==i&&(e.exports=i))}(window,function(e,t){"use strict";function n(e,t){if("string"!=typeof e)throw new Error("Notify(): first arg (title) must be a string.");if(this.title=e,this.options={icon:"",body:"",tag:"",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,permissionGranted:null,permissionDenied:null,timeout:null},this.permission=null,n.isSupported()&&"object"==typeof t){for(var r in t)t.hasOwnProperty(r)&&(this.options[r]=t[r]);"function"==typeof this.options.notifyShow&&(this.onShowCallback=this.options.notifyShow),"function"==typeof this.options.notifyClose&&(this.onCloseCallback=this.options.notifyClose),"function"==typeof this.options.notifyClick&&(this.onClickCallback=this.options.notifyClick),"function"==typeof this.options.notifyError&&(this.onErrorCallback=this.options.notifyError)}}return n.isSupported=function(){return"Notification"in e},n.needsPermission=function(){return!n.isSupported()||"granted"!==Notification.permission},n.requestPermission=function(t,r){n.isSupported()&&e.Notification.requestPermission(function(e){switch(e){case"granted":"function"==typeof t&&t();break;case"denied":"function"==typeof r&&r()}})},n.prototype.show=function(){n.isSupported()&&(this.myNotify=new Notification(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon}),this.options.timeout&&!isNaN(this.options.timeout)&&setTimeout(this.close.bind(this),1e3*this.options.timeout),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1))},n.prototype.onShowNotification=function(e){this.onShowCallback&&this.onShowCallback(e)},n.prototype.onCloseNotification=function(e){this.onCloseCallback&&this.onCloseCallback(e),this.destroy()},n.prototype.onClickNotification=function(e){this.onClickCallback&&this.onClickCallback(e)},n.prototype.onErrorNotification=function(e){this.onErrorCallback&&this.onErrorCallback(e),this.destroy()},n.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},n.prototype.close=function(){this.myNotify.close()},n.prototype.handleEvent=function(e){switch(e.type){case"show":this.onShowNotification(e);break;case"close":this.onCloseNotification(e);break;case"click":this.onClickNotification(e);break;case"error":this.onErrorNotification(e)}},n})},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./controllers/annotation_bookmark_controller.coffee":238,"./controllers/annotation_bookmarks_controller.coffee":239,"./controllers/annotation_selector_controller.coffee":240,"./controllers/billing_controller.coffee":241,"./controllers/chrome_file_access_overlay.coffee":242,"./controllers/classroom_open_screen_controller.coffee":243,"./controllers/comment_controller.coffee":244,"./controllers/comments_controller.coffee":245,"./controllers/create_customer_controller.coffee":246,"./controllers/dictionary_popup_controller.coffee":247,"./controllers/document_controller.coffee":248,"./controllers/document_title_bar_controller.coffee":249,"./controllers/embed_code_controller.coffee":250,"./controllers/error_view_controller.coffee":251,"./controllers/forgot_password_controller.coffee":252,"./controllers/guest_user_request_controller.coffee":253,"./controllers/kami_controller.coffee":254,"./controllers/migrate_billing_controller.coffee":255,"./controllers/news_indicator_controller.coffee":256,"./controllers/notable_premium_stripe_controller.coffee":257,"./controllers/onboarding_dialog_controller.coffee":258,"./controllers/online_status_controller.coffee":259,"./controllers/open_dropdown_controller.coffee":260,"./controllers/open_screen_controller.coffee":261,"./controllers/page_number_controller.coffee":262,"./controllers/premium_badge_controller.coffee":263,"./controllers/promotions_controller.coffee":264,"./controllers/prompt_file_upload_controller.coffee":265,"./controllers/saving_progress_controller.coffee":266,"./controllers/settings_controller.coffee":267,"./controllers/signup_controller.coffee":268,"./controllers/sync_controller.coffee":269,"./controllers/tooltip_controller.coffee":270,"./controllers/trial_premium_controller.coffee":271,"./controllers/tts_controller.coffee":272,"./controllers/tts_settings_controller.coffee":273,"./controllers/uninstall_feedback_controller.coffee":274,"./dialogs/add_pages_dialog.coffee":275,"./dialogs/autograph_management_dialog.coffee":276,"./dialogs/classroom_course_dialog.coffee":277,"./dialogs/color_palette_dialog.coffee":278,"./dialogs/create_assignment_dialog.coffee":279,"./dialogs/download_dialog.coffee":280,"./dialogs/drive_upload_required_dialog.coffee":281,"./dialogs/enter_coupon_dialog.coffee":282,"./dialogs/extension_required_dialog.coffee":283,"./dialogs/file_browser_dialog.coffee":284,"./dialogs/google_authorization_dialog.coffee":285,"./dialogs/loading_dialog.coffee":286,"./dialogs/loading_error_dialog.coffee":287,"./dialogs/notification_settings_dialog.coffee":288,"./dialogs/premium_required_dialog.coffee":289,"./dialogs/prompt_dialog.coffee":290,"./dialogs/prompt_file_upload.coffee":291,"./dialogs/read_only_file_dialog.coffee":292,"./dialogs/remove_upload_dialog.coffee":293,"./dialogs/share_dialog.coffee":294,"./dialogs/trial_ended_ban_hammer.coffee":295,"./dialogs/upgrade_dialog.coffee":296,"./dialogs/welcome_dialog.coffee":297,"./directives/adsense.coffee":298,"./directives/annotation_autograph.coffee":299,"./directives/annotation_comment.coffee":300,"./directives/annotation_comment_pointer.coffee":301,"./directives/annotation_edit_handler.coffee":302,"./directives/annotation_equation.coffee":303,"./directives/annotation_shortcuts.coffee":304,"./directives/annotation_text.coffee":305,"./directives/annotations_toolbar.coffee":306,"./directives/autofocus_upon_loading.coffee":307,"./directives/autofocus_upon_signingup.coffee":308,"./directives/autograph_hover.coffee":309,"./directives/autograph_selector.coffee":310,"./directives/classroom_open_screen.coffee":311,"./directives/click_add_annotations.coffee":312,"./directives/click_shadow_to_exit.coffee":313,"./directives/click_to_copy.coffee":314,"./directives/close_dropdowns.coffee":315,"./directives/collision_detection.coffee":316,"./directives/colorize_initials.coffee":317,"./directives/comment_spotlight.coffee":318,"./directives/detect_stylus.coffee":319,"./directives/dictionary_popup.coffee":320,"./directives/disappear.coffee":321,"./directives/documentloaded.coffee":322,"./directives/dropit.coffee":323,"./directives/editable.coffee":324,"./directives/embed_uninstall_survey.coffee":325,"./directives/enter_license_field.coffee":326,"./directives/enter_to_save.coffee":327,"./directives/equation_hover.coffee":328,"./directives/fb_share_generate.coffee":329,"./directives/filedrag.coffee":330,"./directives/focus_me.coffee":331,"./directives/form_field.coffee":332,"./directives/gray_avatar.coffee":333,"./directives/guest_login_click.coffee":334,"./directives/help_dropdown.coffee":335,"./directives/highlight_spotlight.coffee":336,"./directives/highlight_wrapper.coffee":337,"./directives/initialize_document_state.coffee":338,"./directives/install_to_drive.coffee":339,"./directives/intercom.coffee":340,"./directives/invalid_file_dialog.coffee":341,"./directives/localstore_disabled_warning.coffee":342,"./directives/mdl_parse.coffee":343,"./directives/notable_theme.coffee":344,"./directives/nt_html_include.coffee":345,"./directives/nt_radio_emulator.coffee":346,"./directives/ocr.coffee":347,"./directives/ocr_beta.coffee":348,"./directives/page_file_drop.coffee":349,"./directives/pinch-zoom.coffee":350,"./directives/pointer_color_picker.coffee":351,"./directives/position_layer.coffee":352,"./directives/profile_dropdown.coffee":353,"./directives/prompt_opener.coffee":354,"./directives/recently_used_autograph.coffee":355,"./directives/reference_spotlight.coffee":356,"./directives/restore_autograph.coffee":357,"./directives/restore_drawings.coffee":358,"./directives/restore_equation.coffee":359,"./directives/restore_form_field.coffee":360,"./directives/restore_highlights.coffee":361,"./directives/restore_new_highlights.coffee":362,"./directives/restore_pointer.coffee":363,"./directives/scroll_to_annotation.coffee":364,"./directives/secondary_toolbar_toggle_dropdown.coffee":365,"./directives/select_all_upon_click.coffee":366,"./directives/select_text.coffee":367,"./directives/setup_annotation_selection.coffee":368,"./directives/setup_comment.coffee":369,"./directives/setup_drawing.coffee":370,"./directives/setup_eraser.coffee":371,"./directives/setup_in_textlayer.coffee":372,"./directives/setup_shape.coffee":373,"./directives/setup_tooltip.coffee":374,"./directives/signature_pad.coffee":375,"./directives/signup_dialog.coffee":376,"./directives/slider_bind.coffee":377,"./directives/speech_indicator.coffee":378,"./directives/speech_input.coffee":379,"./directives/styler_palette.coffee":380,"./directives/svg_helper.coffee":381,"./directives/symbol_picker.coffee":382,"./directives/sync_dropdown.coffee":383,"./directives/text_hover.coffee":384,"./directives/tool_selector.coffee":385,"./directives/tool_selector_expanded.coffee":386,"./directives/tooltip_draggable.coffee":387,"./directives/track_premium_click.coffee":388,"./directives/undo.coffee":389,"./directives/update_annotation_count.coffee":390,"./directives/videojs-record.coffee":391,"./directives/videojs-youtube.coffee":392,"./directives/warn_close.coffee":393,"./directives/webcam-recorder.coffee":394,"./factories/annotation_selection_helper.coffee":395,"./factories/annotation_selection_state.coffee":396,"./factories/apprater_factory.coffee":397,"./factories/autograph_factory.coffee":398,"./factories/backend/authorization_api.coffee":399,"./factories/backend/autograph_api.coffee":400,"./factories/backend/comment_api.coffee":401,"./factories/backend/comment_attachment_api.coffee":402,"./factories/backend/coupon_api.coffee":403,"./factories/backend/create_customer_api.coffee":404,"./factories/backend/document_api.coffee":405,"./factories/backend/email_promotions_api.coffee":406,"./factories/backend/event_api.coffee":407,"./factories/backend/kami_classroom_api.coffee":408,"./factories/backend/license_api.coffee":409,"./factories/backend/migrate_billing_api.coffee":410,"./factories/backend/pdf_processing_api.coffee":411,"./factories/backend/performance_metrics_api.coffee":412,"./factories/backend/s3_api.coffee":413,"./factories/backend/settings_api.coffee":414,"./factories/backend/subscriptions_api.coffee":415,"./factories/backend/user_api.coffee":416,"./factories/browser_detection.coffee":417,"./factories/comment_factory.coffee":418,"./factories/dictionary_api.coffee":419,"./factories/document_factory.coffee":420,"./factories/file_cache_factory.coffee":421,"./factories/fingerprint_dismiss_factory.coffee":422,"./factories/global_pointer_listener.coffee":133,"./factories/google_cloud_messaging_factory.coffee":423,"./factories/local/autograph_local.coffee":424,"./factories/local/comment_local.coffee":425,"./factories/local/document_local.coffee":426,"./factories/local/user_local.coffee":427,"./factories/mathematical_symbols_list.coffee":428,"./factories/recent_file_list.coffee":429,"./factories/recent_file_manager.coffee":430,"./factories/selected_box.coffee":431,"./factories/selection_box.coffee":432,"./factories/selection_view.coffee":433,"./factories/settings_factory.coffee":434,"./factories/stripe_factory.coffee":435,"./factories/subscription_manager_factory.coffee":436,"./factories/symbol_picker_factory.coffee":437,"./factories/sync_service.coffee":438,"./factories/tts_factory.coffee":439,"./factories/user_factory.coffee":440,"./factories/window_key_listeners.coffee":441,"./filters/filter_collaborators.coffee":442,"./filters/initials.coffee":443,"./filters/translate_source.coffee":444,"./services/Jimp.coffee":445,"./services/ab_test_service.coffee":446,"./services/annotation_colors.coffee":447,"./services/annotation_state_service.coffee":448,"./services/append_annotation.coffee":449,"./services/authentication_service.coffee":450,"./services/authorize_manager.coffee":451,"./services/colorize.coffee":452,"./services/comments_helper.coffee":453,"./services/comments_realtime_service.coffee":454,"./services/convert_file.coffee":455,"./services/dictionary.coffee":456,"./services/directive_helper.coffee":457,"./services/document_manager.coffee":458,"./services/document_realtime_service.coffee":459,"./services/document_uploader.coffee":460,"./services/extension_hook.coffee":461,"./services/feature_helper.coffee":462,"./services/google_auth.coffee":463,"./services/google_classroom_coursework_service.coffee":464,"./services/google_drive.coffee":465,"./services/google_drive_manual_sync_service.coffee":466,"./services/google_drive_upload_service.coffee":467,"./services/gravatar.coffee":468,"./services/grouped_form_fields.coffee":469,"./services/kami_upload_service.coffee":470,"./services/key_codes.coffee":471,"./services/licenses_helper.coffee":472,"./services/mixpanel.coffee":473,"./services/mixpanel_helper.coffee":474,"./services/nacl_worker.coffee":475,"./services/notify_service.coffee":476,"./services/oauth_manager.coffee":477,"./services/onboarding.coffee":478,"./services/page_state_service.coffee":479,"./services/perfomance_metrics.coffee":480,"./services/pinchzoom_state.coffee":481,"./services/process_document_service.coffee":482,"./services/prompt_file_upload_service.coffee":483,"./services/pusher_service.coffee":484,"./services/selection_helper.coffee":485,"./services/speech_recognition_service.coffee":486,"./services/spotlight_state.coffee":487,"./services/tool_visibility.coffee":488,"./services/tooltip_scope.coffee":489,"./services/undo_service.coffee":490,"./services/url_params_helper.coffee":491};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=178},,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"1d19a036d99c2965f4b7001faf300abf.js"},function(e,t,n){e.exports=n.p+"notablecworker.nmf"},function(e,t,n){e.exports=n.p+"notablecworker_decodejpeg.nmf"},function(e,t,n){e.exports=n.p+"assets/ZeroClipboard.swf"},function(e,t,n){e.exports=n.p+"assets/color_picker_gradient.png"},function(e,t,n){e.exports=n.p+"assets/icon-pdf-annotations.png"},function(e,t,n){e.exports=n.p+"assets/icon-pdf.png"},function(e,t,n){e.exports=n.p+"assets/icon-text.png"},,function(e,t,n){e.exports=n.p+"assets/kami_blue.png"},function(e,t,n){e.exports=n.p+"assets/kami_white.svg"},function(e,t,n){e.exports=n.p+"assets/blank.jpg"},function(e,t,n){e.exports=n.p+"assets/grid.jpg"},function(e,t,n){e.exports=n.p+"assets/lined.jpg"},function(e,t,n){e.exports=n.p+"assets/music.png"},function(e,t,n){e.exports=n.p+"build/notablecworker.pexe"},function(e,t,n){e.exports=n.p+"build/notablecworker_decodejpeg.pexe"},,,,,function(e,t){var n=angular.isDefined,r=angular.isUndefined,i=angular.isNumber,o=angular.isObject,a=angular.isArray,s=angular.extend,l=angular.toJson;angular.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie.expiry=e,this.cookie.path=t,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,c,u){var d,f=this,h=f.prefix,p=f.cookie,g=f.notify,m=f.storageType;c?c[0]&&(c=c[0]):c=document,"."!==h.substr(-1)&&(h=h?h+".":"");var v=function(e){return h+e},_=function(){try{var n=m in t&&null!==t[m],r=v("__"+Math.round(1e7*Math.random()));return n&&(d=t[m],d.setItem(r,""),d.removeItem(r)),n}catch(t){return m="cookie",e.$broadcast("LocalStorageModule.notification.error",t.message),!1}}(),y=function(t,n){if(n=r(n)?null:l(n),!_||"cookie"===f.storageType)return _||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:"cookie"}),S(t,n);try{d&&d.setItem(v(t),n),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:f.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),S(t,n)}return!0},b=function(t){if(!_||"cookie"===f.storageType)return _||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),E(t);var n=d?d.getItem(v(t)):null;if(!n||"null"===n)return null;try{return JSON.parse(n)}catch(e){return n}},w=function(){var t,n;for(t=0;t<arguments.length;t++)if(n=arguments[t],_&&"cookie"!==f.storageType)try{d.removeItem(v(n)),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:f.storageType})}catch(t){e.$broadcast("LocalStorageModule.notification.error",t.message),$(n)}else _||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:"cookie"}),$(n)},x=function(){if(!_)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var t=h.length,n=[];for(var r in d)if(r.substr(0,t)===h)try{n.push(r.substr(t))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),[]}return n},k=function(t){var n=h?new RegExp("^"+h):new RegExp,r=t?new RegExp(t):new RegExp;if(!_||"cookie"===f.storageType)return _||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T();var i=h.length;for(var o in d)if(n.test(o)&&r.test(o.substr(i)))try{w(o.substr(i))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),T()}return!0},C=function(){try{return t.navigator.cookieEnabled||"cookie"in c&&(c.cookie.length>0||(c.cookie="test").indexOf.call(c.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}}(),S=function(t,n,s){if(r(n))return!1;if((a(n)||o(n))&&(n=l(n)),!C)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var u="",d=new Date,f="";if(null===n?(d.setTime(d.getTime()+-864e5),u="; expires="+d.toGMTString(),n=""):i(s)&&0!==s?(d.setTime(d.getTime()+24*s*60*60*1e3),u="; expires="+d.toGMTString()):0!==p.expiry&&(d.setTime(d.getTime()+24*p.expiry*60*60*1e3),u="; expires="+d.toGMTString()),t){var h="; path="+p.path;p.domain&&(f="; domain="+p.domain),c.cookie=v(t)+"="+encodeURIComponent(n)+u+h+f}}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}return!0},E=function(t){if(!C)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=c.cookie&&c.cookie.split(";")||[],r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(v(t)+"=")){var o=decodeURIComponent(i.substring(h.length+t.length+1,i.length));try{return JSON.parse(o)}catch(e){return o}}}return null},$=function(e){S(e,null)},T=function(){for(var e=null,t=h.length,n=c.cookie.split(";"),r=0;r<n.length;r++){for(e=n[r];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));$(i)}},A=function(){return m},D=function(e,t,r,i){i=i||t;var a=b(i);return null===a&&n(r)?a=r:o(a)&&o(r)&&(a=s(a,r)),u(t).assign(e,a),e.$watch(t,function(e){y(i,e)},o(e[t]))},O=function(){for(var e=0,n=t[m],r=0;r<n.length;r++)0===n.key(r).indexOf(h)&&e++;return e};return{isSupported:_,getStorageType:A,set:y,add:y,get:b,keys:x,remove:w,clearAll:k,bind:D,deriveKey:v,length:O,cookie:{isSupported:C,set:S,add:S,get:E,remove:$,clearAll:T}}}]})},,,function(e,t){/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(){function e(e,t){if(e)return i(e)?e.indexOf(t)>=0:e.hasOwnProperty(t)}return["$animate",function(t){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(n,r,o,a,s){var l,c=r[0],u=o.ngMessage||o.when,d=o.ngMessageExp||o.whenExp,f=function(e){l=e?i(e)?e:e.split(/[\s,]+/):null,a.reRender()};d?(f(n.$eval(d)),n.$watchCollection(d,f)):f(u);var h,p;a.register(c,p={test:function(t){return e(l,t)},attach:function(){h||s(function(e,n){t.enter(e,null,r),h=e;var i=h.$$attachId=a.getAttachId();h.on("$destroy",function(){h&&h.$$attachId===i&&(a.deregister(c),p.detach()),n.$destroy()})})},detach:function(){if(h){var e=h;h=null,t.leave(e)}}})}}}]}var r,i,o,a;t.module("ngMessages",[],function(){r=t.forEach,i=t.isArray,o=t.isString,a=t.element}).directive("ngMessages",["$animate",function(e){function t(e,t){return o(t)&&0===t.length||n(e.$eval(t))}function n(e){return o(e)?e.length:!!e}var i="ng-active",a="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(o,s,l){function c(e,t){for(var n=t,r=[];n&&n!==e;){var i=n.$$ngMessageNode;if(i&&i.length)return v[i];n.childNodes.length&&r.indexOf(n)===-1?(r.push(n),n=n.childNodes[n.childNodes.length-1]):n.previousSibling?n=n.previousSibling:(n=n.parentNode,r.push(n))}}function u(e,t,n){var r=v[n];if(f.head){var i=c(e,t);i?(r.next=i.next,i.next=r):(r.next=f.head,f.head=r)}else f.head=r}function d(e,t,n){var r=v[n],i=c(e,t);i?i.next=r.next:f.head=r.next}var f=this,h=0,p=0;this.getAttachId=function(){return p++};var g,m,v=this.messages={};this.render=function(c){c=c||{},g=!1,m=c;for(var u=t(s,l.ngMessagesMultiple)||t(s,l.multiple),d=[],h={},p=f.head,v=!1,_=0;null!=p;){_++;var y=p.message,b=!1;v||r(c,function(e,t){if(!b&&n(e)&&y.test(t)){if(h[t])return;h[t]=!0,b=!0,y.attach()}}),b?v=!u:d.push(y),p=p.next}r(d,function(e){e.detach()}),d.length!==_?e.setClass(o,i,a):e.setClass(o,a,i)},s.$watchCollection(l.ngMessages||l.for,f.render),o.on("$destroy",function(){r(v,function(e){e.message.detach()})}),this.reRender=function(){g||(g=!0,s.$evalAsync(function(){g&&m&&f.render(m)}))},this.register=function(e,t){var n=h.toString();v[n]={message:t},u(o[0],e,n),e.$$ngMessageNode=n,h++,f.reRender()},this.deregister=function(e){var t=e.$$ngMessageNode;delete e.$$ngMessageNode,d(o[0],e,t),delete v[t],f.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,t,n){function r(e,r){var i=n.$$createComment?n.$$createComment("ngMessagesInclude",r):t[0].createComment(" ngMessagesInclude: "+r+" "),o=a(i);e.after(o),e.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(t,i,a){var s=a.ngMessagesInclude||a.src;e(s).then(function(e){t.$$destroyed||(o(e)&&!e.trim()?r(i,s):n(e)(t,function(e){i.after(e),r(i,s)}))})}}}]).directive("ngMessage",n()).directive("ngMessageExp",n())}(window,window.angular)},function(e,t,n){n(229),e.exports="ngMessages"},function(e,t){/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&a.test("."+e)}function r(e,r){if(!n(r))throw o("badmember",'Dotted member path "@{0}" is invalid.',r);for(var i=r.split("."),a=0,s=i.length;a<s&&t.isDefined(e);a++){var l=i[a];e=null!==e?e[l]:void 0}return e}function i(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=e[r]);return n}var o=t.$$minErr("$resource"),a=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=/^https?:\/\/\[[^\]]*][^\/]*/,n=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(a,s,l,c){function u(e,t){this.template=e,this.defaults=p({},n.defaults,t),this.urlParams={}}function d(e,t,b,w){function x(e,n){var i={};return n=p({},t,n),h(n,function(t,n){_(t)&&(t=t(e)),i[n]=t&&t.charAt&&"@"===t.charAt(0)?r(e,t.substr(1)):t}),i}function k(e){return e.resource}function C(e){i(e||{},this)}var S=new u(e,w);return b=p({},n.defaults.actions,b),C.prototype.toJSON=function(){var e=p({},this);return delete e.$promise,delete e.$resolved,e},h(b,function(e,t){var n=/^(POST|PUT|PATCH)$/i.test(e.method),r=e.timeout,u=v(e.cancellable)?e.cancellable:S.defaults.cancellable;r&&!y(r)&&(s.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete e.timeout,r=null),C[t]=function(s,d,v,y){function b(e){j.catch(f),A.resolve(e)}var w,E,$,T={};switch(arguments.length){case 4:$=y,E=v;case 3:case 2:if(!_(d)){T=s,w=d,E=v;break}if(_(s)){E=s,$=d;break}E=d,$=v;case 1:_(s)?E=s:n?w=s:T=s;break;case 0:break;default:throw o("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A,D,O=this instanceof C,P=O?w:e.isArray?[]:new C(w),R={},I=e.interceptor&&e.interceptor.response||k,M=e.interceptor&&e.interceptor.responseError||void 0,L=!!$,N=!!M;h(e,function(e,t){switch(t){default:R[t]=g(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!O&&u&&(A=l.defer(),R.timeout=A.promise,r&&(D=c(A.resolve,r))),n&&(R.data=w),S.setUrlParams(R,p({},x(w,e.params||{}),T),e.url);var j=a(R).then(function(n){var r=n.data;if(r){if(m(r)!==!!e.isArray)throw o("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",t,e.isArray?"array":"object",m(r)?"array":"object",R.method,R.url);if(e.isArray)P.length=0,h(r,function(e){"object"==typeof e?P.push(new C(e)):P.push(e)});else{var a=P.$promise;i(r,P),P.$promise=a}}return n.resource=P,n});return j=j.finally(function(){P.$resolved=!0,!O&&u&&(P.$cancelRequest=f,c.cancel(D),A=D=R.timeout=null)}),j=j.then(function(e){var t=I(e);return(E||f)(t,e.headers,e.status,e.statusText),t},L||N?function(e){return L&&$(e),N?M(e):l.reject(e)}:void 0),L&&!N&&j.catch(f),O?j:(P.$promise=j,P.$resolved=!1,u&&(P.$cancelRequest=b),P)},C.prototype["$"+t]=function(e,n,r){_(e)&&(r=n,n=e,e={});var i=C[t].call(this,e,this,n,r);return i.$promise||i}}),C.bind=function(n){var r=p({},t,n);return d(e,r,b,w)},C}var f=t.noop,h=t.forEach,p=t.extend,g=t.copy,m=t.isArray,v=t.isDefined,_=t.isFunction,y=t.isNumber,b=t.$$encodeUriQuery,w=t.$$encodeUriSegment;return u.prototype={setUrlParams:function(t,n,r){var i,a,s=this,l=r||s.template,c="",u=s.urlParams=Object.create(null);h(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(l)})}),l=l.replace(/\\:/g,":"),l=l.replace(e,function(e){return c=e,""}),n=n||{},h(s.urlParams,function(e,t){i=n.hasOwnProperty(t)?n[t]:s.defaults[t],v(i)&&null!==i?(a=e.isQueryParamValue?b(i,!0):w(i),l=l.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return a+t})):l=l.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"===n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),t.url=c+l.replace(/\/\\\./,"/."),h(n,function(e,n){s.urlParams[n]||(t.params=t.params||{},t.params[n]=e)})}},d}]})}(window,window.angular)},,,function(e,t){!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i);angular.module("angularjs-dropdown-multiselect",[]).directive("dmDropdownStaticInclude",["$compile",function(e){"ngInject";return function(t,n,r){var i=r.dmDropdownStaticInclude,o=n.html(i).contents();e(o)(t)}}]).directive("ngDropdownMultiselect",o.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",disabled:"="},transclude:{toggleDropdown:"?toggleDropdown"},controller:a.default,templateUrl:"app/component/angularjs-dropdown-multiselect.html"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(2),a=r(o)},function(e,t){"use strict";function n(e,t){var n=!1;return e.some(function(e){return e===t&&(n=!0,!0)}),n}function r(e,t,n){var r=-1;return e.some(function(e,i){return e[n]===t[n]&&(r=i,!0)}),r}function i(e,t,i,o){"ngInject";function a(){setTimeout(function(){var e=angular.element(t)[0].querySelector(".option");angular.isDefined(e)&&null!=e&&e.focus()},0)}function s(){e.open?e.close():e.open=!0,e.settings.keyboardControls&&e.open&&(1===e.settings.selectionLimit&&e.settings.enableSearch?setTimeout(function(){angular.element(t)[0].querySelector(".searchField").focus()},0):a()),e.settings.enableSearch&&e.open&&setTimeout(function(){angular.element(t)[0].querySelector(".searchField").focus()},0)}function l(t,n){e.setSelectedItem(n,!1,!0),t.stopImmediatePropagation()}function c(){e.open=!1,e.input.searchFilter=e.settings.clearSearchOnClose?"":e.input.searchFilter,e.externalEvents.onClose()}function u(t){e.selectedModel.splice(0,e.selectedModel.length),e.options.forEach(function(n){n[e.settings.groupBy]===t&&e.setSelectedItem(n,!1,!1)}),e.externalEvents.onSelectionChanged()}function d(t){return null!==e.settings.groupByTextProvider?e.settings.groupByTextProvider(t):t}function f(e){var n=t.find("button"),r=document.createElement("canvas"),i=r.getContext("2d");return i.font=n.css("font-size")+n.css("font-family"),i.originalFont=n.css("font-size")+n.css("font-family"),i.fillStyle="#000000",i.measureText(e).width}function h(){if(e.settings.dynamicTitle&&e.selectedModel&&e.selectedModel.length>0){if(angular.isFunction(e.settings.smartButtonTextProvider))return e.settings.smartButtonTextProvider(e.selectedModel);if(e.settings.smartButtonMaxItems>0){var n=24,r=2,i=8,o=t[0].offsetWidth-n-r-i,a=[];angular.forEach(e.options,function(t){if(e.isChecked(t)){var n=e.getPropertyForObject(t,e.settings.displayProp),r=e.settings.smartButtonTextConverter(n,t);a.push(r||n)}}),e.selectedModel.length>e.settings.smartButtonMaxItems&&(a=a.slice(0,e.settings.smartButtonMaxItems),a.push("..."));var s=a.join(", "),l=s.length-4;if(0===t[0].offsetWidth)return s;if(o<=f("..."))return"...";for(;f(s)>o;)"..."!==a[a.length-1]&&(a.push("..."),s+="...",l=s.length-4),s=s.slice(0,l)+s.slice(l+1),l-=1;return s}var c=angular.isDefined(e.selectedModel)?e.selectedModel.length:0;return 0===c?e.texts.buttonDefaultText:e.settings.showAllSelectedText&&c===e.options.length?e.texts.allSelectedText:c+" "+e.texts.dynamicButtonTextSuffix}return e.texts.buttonDefaultText}function p(e,t){return angular.isDefined(e)&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function g(){e.deselectAll(!0),e.externalEvents.onSelectAll();var t=i("filter")(e.options,e.getFilter(e.input.searchFilter));angular.forEach(t,function(t){e.setSelectedItem(t,!0,!1)}),e.externalEvents.onSelectionChanged(),e.selectedGroup=null}function m(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||e.externalEvents.onDeselectAll(),e.selectedModel.splice(0,e.selectedModel.length),t||e.externalEvents.onSelectionChanged(),e.selectedGroup=null}function v(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],o=void 0,a=void 0;angular.isDefined(T.idProperty)?(o=-1!==r(e.selectedModel,t,T.idProperty),a=r(e.selectedModel,t,T.idProperty)):(o=-1!==e.selectedModel.indexOf(t),a=e.selectedModel.indexOf(t)),!n&&o?(e.selectedModel.splice(a,1),e.externalEvents.onItemDeselect(t),e.settings.closeOnDeselect&&e.close()):!o&&(0===e.settings.selectionLimit||e.selectedModel.length<e.settings.selectionLimit)?(e.selectedModel.push(t),i&&e.externalEvents.onItemSelect(t),e.settings.closeOnSelect&&e.close(),e.settings.selectionLimit>0&&e.selectedModel.length===e.settings.selectionLimit&&e.externalEvents.onMaxSelectionReached()):1!==e.settings.selectionLimit||o||e.selectedModel.length!==e.settings.selectionLimit||(e.selectedModel.splice(0,1),e.selectedModel.push(t),i&&e.externalEvents.onItemSelect(t),e.settings.closeOnSelect&&e.close()),i&&e.externalEvents.onSelectionChanged(),e.selectedGroup=null}function _(t){return angular.isDefined(T.idProperty)?-1!==r(e.selectedModel,t,T.idProperty):-1!==e.selectedModel.indexOf(t)}function y(t){var n=angular.element(t.target).scope(),r=void 0,i=t.target.parentNode;if(e.settings.keyboardControls)if(13===t.keyCode||32===t.keyCode)t.preventDefault(),n.option?e.setSelectedItem(n.option,!1,!0):"deselectAll"===t.target.id?e.deselectAll():"selectAll"===t.target.id&&e.selectAll();else if(38===t.keyCode){for(t.preventDefault(),i.previousElementSibling&&(r=i.previousElementSibling.querySelector("a")||i.previousElementSibling.querySelector("input"));!r&&i;)i=i.previousElementSibling,i&&(r=i.querySelector("a")||i.querySelector("input"));r&&r.focus()}else if(40===t.keyCode){for(t.preventDefault(),i.nextElementSibling&&(r=i.nextElementSibling.querySelector("a")||i.nextElementSibling.querySelector("input"));!r&&i;)i=i.nextElementSibling,i&&(r=i.querySelector("a")||i.querySelector("input"));r&&r.focus()}else 27===t.keyCode&&(t.preventDefault(),e.toggleDropdown())}function b(t){var n=t.target.parentNode.parentNode,r=void 0;if(e.settings.keyboardControls)if(9===t.keyCode||40===t.keyCode)t.preventDefault(),a();else if(38===t.keyCode){for(t.preventDefault(),n.previousElementSibling&&(r=n.previousElementSibling.querySelector("a")||n.previousElementSibling.querySelector("input"));!r&&n;)n=n.previousElementSibling,n&&(r=n.querySelector("a")||n.querySelector("input"));r&&r.focus()}else 27===t.keyCode&&(t.preventDefault(),e.toggleDropdown())}function w(t,n){var r=void 0;e.settings.keyboardControls&&13===t.keyCode&&(1===e.settings.selectionLimit&&e.settings.enableSearch?(r=i("filter")(e.options,e.getFilter(n)),1===r.length&&e.setSelectedItem(r[0],!1,!0)):e.settings.enableSearch&&e.selectAll())}function x(t){var n={};return n[e.settings.searchField]=t,n}function k(t){t&&t.stopPropagation(),e.settings.enableSearch=!e.settings.enableSearch,e.settings.enableSearch||(e.input.searchFilter="")}function C(){e.settings.keyboardControls&&13===event.keyCode&&(e.toggleSearch(),e.settings.enableSearch?setTimeout(function(){angular.element(t)[0].querySelector(".searchField").focus()},0):a())}function S(t,n){if(angular.isUndefined(n))return-1;if(angular.isUndefined(t))return 1;if("object"!==t.type||"object"!==n.type)return t.index<n.index?-1:1;var r=t.value,i=n.value;return e.settings.groupBy&&r[e.settings.groupBy]!==i[e.settings.groupBy]?r[e.settings.groupBy]<i[e.settings.groupBy]?1:-1:e.settings.selectedToTop?!e.isChecked(r)&&!e.isChecked(i)||e.isChecked(r)&&e.isChecked(i)?e.options.indexOf(r)<e.options.indexOf(i)?-1:1:e.isChecked(r)?-1:1:e.options.indexOf(r)<e.options.indexOf(i)?-1:1}var E=t.children()[0],$={onItemSelect:angular.noop,onItemDeselect:angular.noop,onSelectAll:angular.noop,onDeselectAll:angular.noop,onInitDone:angular.noop,onMaxSelectionReached:angular.noop,onSelectionChanged:angular.noop,onClose:angular.noop},T={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"label",enableSearch:!1,clearSearchOnClose:!1,selectionLimit:0,showCheckAll:!0,showUncheckAll:!0,showEnableSearchButton:!1,closeOnSelect:!1,buttonClasses:"btn btn-default",closeOnDeselect:!1,groupBy:void 0,checkBoxes:!1,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:angular.noop,styleActive:!1,selectedToTop:!1,keyboardControls:!1,template:"{{getPropertyForObject(option, settings.displayProp)}}",searchField:"$",showAllSelectedText:!1},A={checkAll:"Check All",uncheckAll:"Uncheck All",selectionCount:"checked",selectionOf:"/",searchPlaceholder:"Search...",buttonDefaultText:"Select",dynamicButtonTextSuffix:"checked",disableSearch:"Disable search",enableSearch:"Enable search",selectGroup:"Select all:",allSelectedText:"All"},D={searchFilter:e.searchFilter||""};angular.extend(T,e.extraSettings||[]),angular.extend($,e.events||[]),angular.extend(A,e.translationTexts),T.closeOnBlur&&o.on("click",function(t){if(e.open){for(var r=t.target.parentElement,i=!1;angular.isDefined(r)&&null!==r&&!i;)r.className.split&&n(r.className.split(" "),"multiselect-parent")&&!i&&r===E&&(i=!0),r=r.parentElement;i||e.$apply(function(){e.close()})}}),angular.extend(e,{toggleDropdown:s,checkboxClick:l,externalEvents:$,settings:T,texts:A,input:D,close:c,selectCurrentGroup:u,getGroupLabel:d,getButtonText:h,getPropertyForObject:p,selectAll:g,deselectAll:m,setSelectedItem:v,isChecked:_,keyDownLink:y,keyDownSearchDefault:b,keyDownSearch:w,getFilter:x,toggleSearch:k,keyDownToggleSearch:C,orderFunction:S}),e.externalEvents.onInitDone()}i.$inject=["e","t","o","s"],i.$inject=["$scope","$element","$filter","$document"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}]),angular.module("angularjs-dropdown-multiselect").run(["$templateCache",function(e){e.put("app/component/angularjs-dropdown-multiselect.html",'<div class="multiselect-parent btn-group dropdown-multiselect" ng-class="{open: open}"><div ng-transclude=toggleDropdown ng-click=toggleDropdown()><button ng-disabled=disabled type=button class=dropdown-toggle ng-class=settings.buttonClasses>{{getButtonText()}}&nbsp;<span class=caret></span></button></div><ul class="dropdown-menu dropdown-menu-form" ng-if=open ng-style="{display: open ? \'block\' : \'none\', height : settings.scrollable ? settings.scrollableHeight : \'auto\', overflow: \'auto\' }"><li ng-if="settings.showCheckAll && settings.selectionLimit === 0"><a ng-keydown=keyDownLink($event) data-ng-click=selectAll() tabindex=-1 id=selectAll><span class="glyphicon glyphicon-ok"></span> {{texts.checkAll}}</a></li><li ng-if=settings.showUncheckAll><a ng-keydown=keyDownLink($event) data-ng-click=deselectAll(); tabindex=-1 id=deselectAll><span class="glyphicon glyphicon-remove"></span> {{texts.uncheckAll}}</a></li><li ng-if="settings.selectByGroups && ((settings.showCheckAll && settings.selectionLimit > 0) || settings.showUncheckAll)" class=divider></li><li ng-repeat="currentGroup in settings.selectByGroups track by $index" ng-click=selectCurrentGroup(currentGroup)><a ng-class="{\'dropdown-selected-group\': selectedGroup === currentGroup}" tabindex=-1>{{::texts.selectGroup}} {{::getGroupLabel(currentGroup)}}</a></li><li ng-if="settings.selectByGroups && settings.showEnableSearchButton" class=divider></li><li ng-if="settings.showEnableSearchButton && settings.enableSearch"><a ng-keydown="keyDownLink($event); keyDownToggleSearch();" ng-click=toggleSearch($event); tabindex=-1>{{texts.disableSearch}}</a></li><li ng-if="settings.showEnableSearchButton && !settings.enableSearch"><a ng-keydown="keyDownLink($event); keyDownToggleSearch();" ng-click=toggleSearch($event); tabindex=-1>{{texts.enableSearch}}</a></li><li ng-if="(settings.showCheckAll && settings.selectionLimit > 0) || settings.showUncheckAll || settings.showEnableSearchButton" class=divider></li><li ng-if=settings.enableSearch><div class=dropdown-header><input type=text class="form-control searchField" ng-keydown="keyDownSearchDefault($event); keyDownSearch($event, input.searchFilter);" ng-style="{width: \'100%\'}" ng-model=input.searchFilter placeholder={{texts.searchPlaceholder}}></div></li><li ng-if=settings.enableSearch class=divider></li><li ng-if=settings.groupBy ng-repeat-start="option in orderedItems = ( options | filter:getFilter(input.searchFilter) | orderBy:\'\':false:orderFunction)" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role=presentation class=dropdown-header>{{ getGroupLabel(getPropertyForObject(option, settings.groupBy)) }}</li><li ng-if=settings.groupBy ng-class="{\'active\': isChecked(option) && settings.styleActive}" ng-repeat-end role=presentation><a ng-keydown="option.disabled || keyDownLink($event)" role=menuitem class=option tabindex=-1 ng-click="option.disabled || setSelectedItem(option, false, true)" ng-disabled=option.disabled><div ng-if=settings.checkBoxes class=checkbox><label><input class=checkboxInput type=checkbox ng-click="checkboxClick($event, option)" ng-checked=isChecked(option)> <span dm-dropdown-static-include={{settings.template}}></span></label></div><span ng-if=!settings.checkBoxes data-ng-class="{\'glyphicon glyphicon-ok\': isChecked(option)}"></span> <span dm-dropdown-static-include={{settings.template}}></span></a></li><li ng-if=!settings.groupBy ng-class="{\'active\': isChecked(option) && settings.styleActive}" role=presentation ng-repeat="option in options | filter:getFilter(input.searchFilter) | orderBy:\'\':false:orderFunction"><a ng-keydown="option.disabled || keyDownLink($event)" role=menuitem class=option tabindex=-1 ng-click="option.disabled || setSelectedItem(option, false, true)" ng-disabled=option.disabled><div ng-if=settings.checkBoxes class=checkbox><label><input class=checkboxInput type=checkbox ng-click="checkboxClick($event, option)" ng-checked=isChecked(option)> <span dm-dropdown-static-include={{settings.template}}></span></label></div><span ng-if=!settings.checkBoxes data-ng-class="{\'glyphicon glyphicon-ok\': isChecked(option)}"></span> <span ng-if=!settings.checkBoxes dm-dropdown-static-include={{settings.template}}></span></a></li><li class=divider ng-show="settings.selectionLimit > 1"></li><li role=presentation ng-show="settings.selectionLimit > 1"><a role=menuitem>{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li></ul></div>')}])},function(e,t,n){n(234),e.exports="angularjs-dropdown-multiselect"},function(e,t,n){(function(t){var n;e.exports=n=function(e,n,r,i,o,a,s,l,c,u,d,f,h){var p,g,m,v,_;return null==s&&(s=!0),null==l&&(l=!1),null==c&&(c=null),null==u&&(u=null),null==d&&(d=null),null==f&&(f=t("#viewer")),null==h&&(h=!1),p=5,v=function(e){var t,n,r,l,c,u;if(s){if(e.y>d.y+p)return!1}else if(e.y<d.y-p)return!1;return!(e.x<o.x-a||e.x>o.x+i.outerWidth()+a)&&(t=o.y+i.outerHeight(),l=d.y-t+p,n=e.x-d.x,c=n<=0?d.x-o.x:o.x+i.outerWidth()-d.x,c+=a,n=Math.abs(n),r=l/c,u=r*(c-n),e.y-t<u+p)},_=function(r){if(!h){if(i.is(".is-dragging , :hover"))return void t(window).off("mousemove",_);if(r=e.event_relative_to_container(f,r),d||(d=r),!v(r))return n.$broadcast("hide-tooltip")}},m=function(o){var a,s;if(u&&r.cancel(u),!((null!=(a=document.elementFromPoint(o.clientX,o.clientY))&&null!=(s=a.type)?s.indexOf("x-shockwave-flash"):void 0)>0||i.is(".is-dragging"))){if(l)return c=e.event_relative_to_container(f,o),g(!1),l=!1,void t(window).on("mousemove",m);if(u=r(function(){return n.$broadcast("hide-tooltip",!0)},400),o=e.event_relative_to_container(f,o),!(Math.abs(o.x-c.x)<30&&Math.abs(o.y-c.y)<30))return n.$broadcast("hide-tooltip",!0)}},g=function(e){if(null==e&&(e=!0),t(window).off("mousemove",_),t(window).off("mousemove",m),u&&r.cancel(u),e)return i.off("mouseenter mouseleave")},this.kill=g,this.start_triangle_listener=function(n){return d=e.event_relative_to_container(f,n),h=!1,t(window).on("mousemove",_)},this.skip_triangle_listener=function(){return h=!0},t(window).on("mousemove",_),i.hover(function(){return l=!0,g(!1),i.on("mouseleave",m)}),this}}).call(t,n(1))},function(e,t,n){(function(t){var r,i;r=n(236),e.exports=i=function(e,n,i,o,a,s){null==s&&(s=null),this.show=function(l,c,u,d,f){var h,p,g,m,v,_,y;if(null==d&&(d=10),null==f&&(f=10),(c||o||!o.is(".is-dragging"))&&"eraser"!==a.annotation_mode)return p="Drawing"===c.commentObj.annotation_type,o.is(":visible")&&!p&&(y=o.offset().left,u.x>y&&u.x<y+o.width())?void n.$broadcast("render-tooltip",c):(h=9,m={x:u.x-o.width()/2,y:u.y-o.height()-h-f},v=!0,_=t("#viewer")[0].getBoundingClientRect().top,m.y+_<35&&(g=u.height||0,m.y=u.y+g+f,v=!1),o.css({top:m.y+"px",left:m.x+"px"}),n.$broadcast("render-tooltip",c),o.show("fast",function(){if(s&&s.kill(),s=new r(e,n,i,o,m,d,v),!p)return s.skip_triangle_listener()}))},this.start_triangle_listener=function(e,t){if(s)return s.start_triangle_listener(t)},this.hide=function(){return s&&s.kill(),o.hide("fast")}}}).call(t,n(1))},function(e,t){ng.controller("AnnotationBookmarkController",["$scope","Gravatar",function(e,t){if(e.gravatar_exists=!1,null!=e.commentObj.author)return t.exists(e.commentObj.author.md5_email).then(function(){return e.gravatar_exists=!0},function(){return e.gravatar_exists=!1})}])},function(e,t){ng.controller("AnnotationBookmarksController",["$scope","$filter","$rootScope",function(e,t,n){return e.$on("total_annotation_count",function(n,r,i){return e.annotations=t("orderBy")(i,["referring_to.page_no","referring_to.y"])}),e.annotation_text_only_summary=function(e){switch(e.annotation_type){case"Comment":case"Text":return e.content;case"Highlight":case"Strikethrough":case"Underline":return e.referring_to.selected_text;case"FormField":if("text_widget"===e.referring_to.input_type)return e.content;break;default:return""}},e.mdi_icon_for_annotation=function(e){switch(e.annotation_type){case"Strikethrough":return"mdi mdi-format-strikethrough";case"Underline":return"mdi mdi-format-underline";case"Comment":return"mdi mdi-comment-text";case"Audio":return"fa-microphone fa";case"Text":return"mdi mdi-format-text";case"Drawing":return"drawing"!==e.referring_to.shape?"mdi mdi-drawing-box":"mdi mdi-brush";case"Autograph":return"fa fa-openid";case"Image":return"mdi mdi-image";case"FormField":switch(e.referring_to.input_type){case"button_widget":return"mdi mdi-checkbox-marked-outline";case"choice_widget":return"mdi mdi-dns";case"text_widget":return"mdi mdi-format-text";default:return"mdi mdi-format-text"}break;default:return""}}}])},function(e,t,n){(function(e){ng.controller("AnnotationSelector",["$scope","$rootScope","$timeout","SettingsFactory","AnnotationColors","Mixpanel","AnnotationState","tts","LicensesHelper","PageState",function(t,n,r,i,o,a,s,l,c,u){var d,f,h,p,g;for(t.font_sizes=o.font_sizes(),t.stroke_sizes=o.stroke_sizes(),t.shape_sizes=o.shape_sizes(),t.shapes=o.shapes,t.opacity_values=o.opacity_values(),t.highlighter_submodes=o.highlighter_submodes,t.highlighter_names=function(e){return o.highlighter_names[e]},t.annotation_selector_visible=!0,t.annotation_state=s,d=function(e){return t.$watch("annotation_state."+e,function(t,n){if(t!==n)return s.save(e,t)})},g=["selection_submode","highlight_submode","comment_submode","text_font_size","drawing_stroke_size","shape_stroke_size","drawing_shape","opacity"],f=0,h=g.length;f<h;f++)p=g[f],d(p);return t.tts_visible=function(){return c.has_flag("tts")},notable.is_embed&&(t.$on("document_init",function(){if(!u.has_permission("edit"))return s.set_annotation_mode("normal"),s.selection_submode="normal",t.annotation_selector_visible=!1}),t.tts_visible=function(){return!1},l.isEnabled()&&(t.tts_visible=function(){return c.has_flag("tts")})),t.tts_is_speaking=l.isSpeaking,t.catchSelectEvents=function(e){return e.stopPropagation()},t.to_percentage=notable.decimal_to_percent,t.annotation_toolbar_detailed=!1,t.tool_items={highlight:{expanded:{color:!0,positioning:!0}},underline:{expanded:{color:!0}},strikethrough:{expanded:{color:!0}},text:{expanded:{color:!0,fontSize:!0}},comment:{expanded:{color:!0,commentType:!0}},equation:{expanded:{color:!0,fontSize:!0,symbols:!0}},drawing:{expanded:{color:!0,thickness:!0,transparency:!0}},shape:{expanded:{color:!0,thickness:!0,transparency:!0,shapeType:!0}},eraser:{expanded:{},hideExpanded:!0},image:{expanded:{},hideExpanded:!0,unselectable:!0},autograph:{expanded:{},hideExpanded:!0},tts:{expanded:{tts:!0}},dictionary:{hideExpanded:!0},normal:{expanded:{selectType:!0}}},t.toggle_annotation_toolbar=function(){var n,r;return t.annotation_toolbar_detailed=!t.annotation_toolbar_detailed,a.track("Toolbar Toggle",{state:t.annotation_toolbar_detailed}),null!=(n=document.getElementById("annotation-toolbar"))&&n.addEventListener("webkittransitionend",function(){return e(window).trigger("toolbarchanged",[t.annotation_toolbar_detailed])},{once:!0}),null!=(r=document.getElementById("annotation-toolbar"))?r.addEventListener("transitionend",function(){return e(window).trigger("toolbarchanged",[t.annotation_toolbar_detailed])},{once:!0}):void 0}}])}).call(t,n(1))},function(e,t){ng.controller("BillingController",["$scope","Mixpanel","SubscriptionAPI","$q","User",function(e,t,n,r,i){var o,a,s,l;return o=null,a=null,s=function(){return n.all().$promise.then(function(t){return e.subscriptions=t.subscriptions},function(){return e.errors=["Network error, please try again"]})},s(),e.$watch("user",function(){var t,n;return o=AccountDock.configure({key:"ad_acco_28596a7b65ae4dda",customer:null!=(t=e.user)&&null!=(n=t.customer)?n.stripe_customer_id:void 0})}),l=StripeCheckout.configure({key:"pk_live_4Um7jdwvkvSu3W7kBwiR2svS",token:function(e){return a.resolve(e)}}),e.show_billing_history=function(){return o.open()},e.cancel_subscription=function(r){if(confirm("Are you really sure you want to cancel?"))return e.subscription_status="Subscription Cancelling...",n.delete({id:r},function(n){return t.track("Subscription Cancelled"),e.subscription_status="Subscription Cancelled",i.show(!0),s()},function(n){return e.subscription_status=null,n.length>0?e.errors=n||["Network error, please try again"]:void 0===n.length&&(e.errors=["Network error, please try again"]),t.track("Subscription Cancellation Failed",{error:e.errors[0]})})},e.change_credit_card=function(o){return a=r.defer(),l.open({name:"Kami",email:e.user.email,allowRememberMe:!1,panelLabel:"Change Billing Card"}),a.promise.then(function(r){return e.subscription_status="Subscription Updating...",n.update({id:o,stripe_token:r.id},function(n){return t.track("Subscription Updated"),e.subscription_status="Subscription Updated",i.show(!0),s()},function(n){return e.subscription_status=null,n.length>0?e.errors=n||["Network error, please try again"]:void 0===n.length&&(e.errors=["Network error, please try again"]),t.track("Subscription Update Failed",{error:e.errors[0]})})})}}])},function(e,t,n){(function(e){ng.controller("ChromeFileAccessOverlay",["$scope","SettingsFactory","Mixpanel",function(t,n,r){return t.disablePrompt=function(){return r.track("Chrome File Access Overlay Disabled"),n.set("fileSchemeRequestDisabled",!0,!0),e("#chromeFileAccessOverlayButton").text("Your preference has been saved, you can now close this window."),!1}}])}).call(t,n(1))},function(e,t){ng.controller("ClassroomOpenScreenController",["$scope","GoogleAuth","PageState","OAuthManager","KamiClassroomAPI","$q","SettingsFactory","ClassroomCourseDialog",function(e,t,n,r,i,o,a,s){var l,c,u;return l="https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.me",c=function(){return t.authorize_if_needed({scope:l,message:"Click to allow Kami to access your courses on Google Classroom",from_user_action:!0,user_id:e.classroom_user_id}).then(function(t){var n;return n=r.google(e.classroom_user_id),n.get("https://classroom.googleapis.com/v1/courses?studentId=me").then(function(t){return e.courses=t.courses})})},u=function(){if(e.classroom_user_id=a.get("google_classroom_google_user_id",null),e.classroom_user_id)return c()},u(),e.link_google_classroom=function(){return t.authorize_now({scope:l,message:"Click to allow Kami to access your courses on Google Classroom",from_user_action:!0}).then(function(t){var n;return e.state="fetching",n=r.google(),n.get("https://classroom.googleapis.com/v1/courses").then(function(e){return n.get_user().then(function(e){return a.set("google_classroom_google_user_id",e,!0),u()})}).catch(function(t){return e.state="error"})})},e.open_course_dialog=function(e){return s.open(e)}}])},function(e,t,n){(function(e){var t,r,i;r=n(24),i=n(14),t=n(61),ng.controller("CommentController",["$scope","$rootScope","$window","$interval","Comment","CommentsHelper","AnnotationColors","Gravatar","Undo","Mixpanel","PageState","Pusher","FileCache","ngDialog","AnnotationState",function(t,n,i,o,a,s,l,c,u,d,f,h,p,g,m){var v,_,y;switch(t.placeholder_text="Write a reply...",t.colors=l.colors(),t.font_sizes=l.font_sizes(),t.stroke_sizes=l.stroke_sizes(),t.toggle_reply_limit=function(){return t.limit_replies=!t.limit_replies,t.$emit("height_changed")},t.limit_replies=t.commentObj.replies.length>1,t.is_reply=function(){return null!=t.commentObj.parent_comment_id},t.can_edit=function(){var e,n;return!t.commentObj.readonly&&(!(!t.commentObj.embedded||"owner"!==f.document.permissions)||!!f.has_permission("edit")&&(null!=(e=t.commentObj.author)?e.id:void 0)===(null!=(n=t.current_user)?n.id:void 0))},t.editable_focusable=function(){var e,n;return!t.commentObj.readonly&&(!(!t.commentObj.embedded||"owner"!==f.document.permissions)||(null!=(e=t.commentObj.author)?e.id:void 0)===(null!=(n=t.current_user)?n.id:void 0))},t.destroy=function(){return a.remove_and_upsert_comment(t.commentObj)},t.commentObj.new_comment===!0&&s.is_immediately_created(t.commentObj)&&("Image"===t.commentObj.annotation_type?(a.upsert_comment_with_attachment(t.commentObj,t.commentObj.attachment_blob),t.attachment_url=t.commentObj.attachment_url):a.upsert(t.commentObj)),t.$on("old_highlight_migration_finished",function(e,n){if(n===t.commentObj.id)return a.upsert(t.commentObj)}),t.gravatar_exists=!1,null!=t.commentObj.author&&(v=c.exists(t.commentObj.author.md5_email),v.then(function(){return t.gravatar_exists=!0},function(){return t.gravatar_exists=!1})),t.convert_to_comment=function(){return t.commentObj.annotation_type="Comment",t.commentObj.new_comment=!0,n.$broadcast("comment_updated")},y=function(){var e;return e=r(t.commentObj.created_at),e.isValid()?(t.created_ago=e.fromNow(),t.created_formatted=e.format("h:mma dddd, MMMM Do YYYY")):(t.created_ago="",t.created_formatted="")},y(),setInterval(function(){if(y(),"Comment"===t.commentObj.annotation_type)return t.$digest()},3e5),t.clicked_author=function(){return n.$broadcast("clicked_author",t.commentObj.author.id)},_=null,t.$on("videojs-finishRecord",function(e,n){return a.upsert_comment_with_attachment(t.commentObj,n.recordedData),"function"==typeof _&&_(),t.attachment_url=URL.createObjectURL(n.recordedData),t.$emit("height_changed")}),t.$on("videojs-error",function(e,n,r){return t.audio_error=r||!0,d.track_api("VideoJS Error",{error:r})}),t.$on("videojs-deviceError",function(e,t){var n;return"PermissionDeniedError"===(null!=(n=t.deviceErrorCode)?n.name:void 0)?g.open({template:'<p>Please allow microphone access in order to create audio comment</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',
plain:!0}):g.open({template:'<p>Audio comment is not supported in your browser.</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0})}),t.$on("webcam-finishRecord",function(e,n){return"Desktop"===t.commentObj.annotation_type&&(t.commentObj.annotation_type="Video",t.commentObj.referring_to.is_desktop=!0),a.upsert_comment_with_attachment(t.commentObj,n),"function"==typeof _&&_(),t.attachment_url=URL.createObjectURL(n),t.$emit("height_changed")}),t.$on("webcam-declinedPrompt",function(e,n){return"PermissionDeniedError"===n.name?g.open({template:'<p>Please allow camera/microphone to create a video comment</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0}):g.open({template:'<p>Video recording is not supported in your browser.</p> <p>Please use Chrome or Firefox for recording video comments!</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0}),t.destroy()}),t.$on("webcam-incompatibleError",function(e){return g.open({template:'<p>Video recording is not supported in your browser.</p> <p>Please use the latest versions of Chrome or Firefox for recording video comments!</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0}),t.destroy()}),t.$on("webcam-missingExtensionError",function(e){return g.open({template:'<p>To record your desktop for a comment, you need the Kami Desktop Extension for Chrome.</p> <div class="ngdialog-buttons"> <button id="chrome-install-dekstop" type="button" class="ngdialog-button ngdialog-button-primary" ng-click="install_extension()">Add to Chrome</button> </div>',plain:!0,controller:["$scope",function(e){return e.install_extension=function(t){return function(){return chrome.webstore.install("https://chrome.google.com/webstore/detail/jkahddofhbcgdndobkkhbhggjjmcoiel",function(){e.closeThisDialog(),i.location.reload()},function(e){})}}(this)}]}),t.destroy()}),t.$on("webcam-desktopError",function(e){return g.open({template:'<p>To use desktop capture, please select a source to record from and allow Audio from the dialog menu.</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0}),t.destroy()}),t.commentObj.annotation_type){case"Audio":case"Video":case"Image":case"Desktop":return p.serve(p.cacheURL(t.commentObj.id),!0).then(function(e){return t.attachment_url=URL.createObjectURL(e)}).catch(function(){return _=t.$watch(function(t){var n;return null!=(n=e.last(t.commentObj.attachments))?n.attachment_url:void 0},function(e){if(e)return t.attachment_url=e})})}}])}).call(t,n(2))},function(e,t,n){(function(e,t){ng.controller("CommentsController",["$scope","$rootScope","Comment","CommentsRealtimeService","CommentsHelper","AnnotationState","PageState","$timeout","$q",function(n,r,i,o,a,s,l,c,u){var d,f,h,p,g,m,v;return d=function(){return n.collab_filtered_annotations=[],n.comments=[],n.highlights=[],n.texts=[],n.autographs=[],n.drawings=[],n.form_fields=[],n.images=[],n.annotation_count={}},d(),n.annotation_state=s,p={},h=null,f=null,v=!1,n.$on("documentloaded",function(){var e;return h=u.defer(),f=null!=(e=PDFViewerApplication.pdfDocument)?e.getKamiInfo().then(function(e){var t;try{return JSON.parse(e)}catch(e){return t=e,null}}):void 0}),n.$on("documentclose",function(){return d(),p={},i.clear(),v=!1}),n.$on("document_init",function(){return h.resolve(l.document),i.load(l.document),o.init_realtime(n.current_user.channel)}),n.$on("comment_loaded",function(){return v=!0}),e(window).on("pagerendered",function(e){var r;if("switched_copy"!==l.source&&(r=e.originalEvent.detail.pageNumber,!p[r]))return p[r]=!0,h.promise.then(function(e){var o;return o=n.current_user,f.then(function(o){return PDFViewerApplication.pdfDocument.getPage(r).then(function(a){return a.getAnnotations().then(function(a){return n.$apply(function(){return t.each(a,function(t){var n;if(n=t.kamiComment,null!=(null!=n?n.id:void 0)){if(null!=i.all[n.id])return;if(v&&n.document_identifier===e.document_identifier)return;return i.create_embedded_comment(e,t,o,n,r)}return i.add_pdf_comment(e,t,o,r)})})})})})})}),g=function(){return n.annotation_count=a.annotation_page_count(n.collab_filtered_annotations),r.$broadcast("total_annotation_count",n.collab_filtered_annotations.length,n.collab_filtered_annotations)},m=function(){return n.collab_filtered_annotations=i.collab_filtered_comments(),n.comments=a.filter_comments(n.collab_filtered_annotations),n.highlights=a.filter_highlights(n.collab_filtered_annotations),n.texts=a.filter_texts(n.collab_filtered_annotations),n.autographs=a.filter_autographs(n.collab_filtered_annotations),n.drawings=a.filter_drawings(n.collab_filtered_annotations),n.form_fields=a.filter_form_fields(n.collab_filtered_annotations),n.images=a.filter_images(n.collab_filtered_annotations),n.equations=a.filter_equations(n.collab_filtered_annotations),g()},n.$on("comment_updated",m),n.$on("filtered_collaborator",m),n.$on("clear",function(){return n.clear()}),n.clear=function(){return e("[editable]").trigger("save"),n.$broadcast("save_equations"),i.clear_empty_comments()},n.$watch("annotation_state.annotation_mode",function(){return n.clear()})}])}).call(t,n(1),n(2))},function(e,t,n){ng.controller("CreateCustomerController",["$scope","CreateCustomerAPI","$q","Mixpanel",function(e,t,n,r){var i,o,a,s,l,c,u,d;for(u=StripeCheckout.configure({key:"pk_live_4Um7jdwvkvSu3W7kBwiR2svS",image:"images/icon128.png",token:function(e){return i.resolve(e)}}),i=null,a=void 0,s=/\+/g,c=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(s," "))},l=window.location.search.substring(1),d={};a=c.exec(l);)d[o(a[1])]=o(a[2]);return e.email=d.email,e.note=d.note,e.product=d.product,e.for=d.for,e.popupStripe=function(){return e.errors=null,i=n.defer(),u.open({name:"Kami",email:e.email,allowRememberMe:!1,panelLabel:"Pay for Kami"}),i.promise.then(function(n){return e.purchase_successful="processing",t.create({stripe_token:n.id,email:e.email,note:e.note,product:e.product,for:e.for},function(t){return e.purchase_successful=!0,e.purchased=!0,r.track("Customer Creation Successful")},function(t){var n,i;return n=null!=(i=t.data)?i.errors:void 0,e.purchase_successful=!1,(null!=n?n.length:void 0)>0?e.errors=n||["Network error, please try again"]:void 0===(null!=n?n.length:void 0)&&(e.errors=["Network error, please try again"]),r.track("Customer Creation Failed")})})}}])},function(e,t){var n;n=!1,ng.controller("DictionaryPopupController",["$scope","SubscriptionManagerFactory","Dictionary","DictionaryAPI","Mixpanel",function(e,t,r,i,o){var a,s,l,c;return c=t.for_scope(e),e.error=!1,s=function(t){var n,r,i,a,s,l,c,u,d,f;for(c=[],u=[],s=[],d=/(slang)|(informal)|(colloquial)|(surname)/i,f=/(proper noun)|(symbol)|(numeral)|(number)|(infix)/i,r=0,i=t.length;r<i;r++)n=t[r],a=n.meaning,l=n.part_of_speech,s.includes(l)||f.test(l)||d.test(a)?u.push(n):(c.push(n),s.push(l));return e.definitions=c.concat(u),e.definitions.length?o.track("Dictionary Fetch Success",{title:e.title}):o.track("Dictionary Fetch Not Found",{title:e.title})},a=function(t){if(e.error=!1,(null!=t?t.length:void 0)&&(e.display_popup("definition"),e.title!==t))return e.clear_data(),e.title=t,i.define({id:t}).$promise.then(function(e){return s(e.definitions)},function(t){return o.track("Dictionary Fetch Network Failed",{title:e.title}),e.error="Network Error"})},l=function(t){if(n&&(null!=t?t.length:void 0))return e.display_popup("translation"),e.clear_data(),e.title="Translatingâ¦"},e.clear_data=function(){return e.title=null,e.definitions=null},c.add(r.watch_definition_requests(a)),c.add(r.watch_translate_requests(l))}])},function(e,t,n){(function(e){var t,r,i;t=n(497),i=n(14),r=n(134),ng.controller("DocumentController",["$scope","$rootScope","$window","User","Document","Gravatar","$q","Undo","Pusher","Mixpanel","PageState","GoogleDrive","$timeout","DocumentManager","NaclWorker","Comment","URLParams","DownloadDialog","ShareDialog","AutographManagementDialog","RecentFileManager","FileCache","PremiumRequiredDialog","OAuthManager","OfflineSync","SyncQueue","ngDialog","LoadingErrorDialog","FileBrowserDialog","NotificationSettingsDialog","NewsDialog","LicensesHelper","AnnotationState","DocumentRealtimeService","EnterCouponDialog","SettingsFactory","CreateAssignmentDialog","AddPagesDialog",function(t,n,o,a,s,l,c,u,d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I,M,L,N,j,F,B){var U,z,q,H,V;return"undefined"!=typeof __insp&&null!==__insp&&__insp.push(["pageUrl","https://web.kamihq.com/web/viewer.html"]),H={},t.page_state=h,V=function(){return a.show().then(function(e){return t.current_user=e,I.update_license(e)})},V(),t.$on("refresh_user",V),t.$on("documentloaded",function(){return U(z)}),t.$on("documentclose",function(){return h.document&&d.instance.unsubscribe("presence-"+h.document.channel),h.clear_reload(),u.clear(),v.clearCache()}),t.$on("offline_sync_finished",function(){if(null!=h.document)return _.load(h.document),s.show(e.pick(h.document,"id","document_identifier","fingerprint")).then(function(e){return h.document=e})}),U=function(e){return V().then(function(){return e()})},t.$on("authenticated_user",function(){return V()}),z=function(){var n,r;if("undefined"!=typeof PDFView&&null!==PDFView?PDFView.documentFingerprint:void 0)return h.clear_reload(),r=h.apply_next_load_params(),n=r.force_new_copy?(r.document_identifier=i.v4(),r.copy_type="user_copy",c.when(r)):r.document_identifier?c.when(r):s.index_fingerprint(PDFView.documentFingerprint).then(function(t){var n;return n=t.documents,1===n.length&&"google"!==n[0].copy_type?(r.document_identifier=n[0].document_identifier,c.when(r)):n.length>0?O.open({documents:t,action:"select_copy",title:"You have previously annotated this document"}).closePromise.then(function(t){return"new_copy"===t.value||"$escape"===t.value?(r.document_identifier=i.v4(),r.copy_type="user_copy",r):e.extend(t.value,{source:r.source})}):(r.document_identifier=i.v4(),c.when(r))}).catch(function(e){return r.document_identifier=i.v4(),r.copy_type="user_copy",c.when(r)}),n.then(function(n){var r;if(r=n.document_identifier)return PDFView.pdfDocument.transport.getPassword().then(function(i){var o;return o={document_identifier:r,fingerprint:PDFView.documentFingerprint,name:h.document_name(),copy_type:n.copy_type||("googledrive"===n.source?"google":"user_copy"),parent_id:n.parent_id,source:h.source,source_url:h.source_url,force_set_name:e.startsWith(h.source,"googledrive"),google_sync_user_id:"googledrive"===h.source?h.google_user_id:null,pdf_password:"googledrive"===h.source?i:null},u.clear(),s.show(o).catch(function(e){return e.status<400||e.status>=500?o:D.open("share_error")}).then(function(i){var o,a,l,c,u,m;return h.document=i,h.document_state="loaded",null!=y.open_window&&t.open_window(y.open_window),h.push_state(),H={document_identifier:h.document.document_identifier,document_id:h.document.id,name:h.document.name,user_name:null!=(c=t.current_user)?c.name:void 0,user_id:null!=(u=t.current_user)?u.id:void 0,source:h.source,document_info:"undefined"!=typeof PDFViewerApplication&&null!==PDFViewerApplication?PDFViewerApplication.documentInfo:void 0},f.document_properties=H,f.track("Document Loaded",angular.extend({collaborators:null!=(m=h.document.collaborating_users)?m.length:void 0,ads_visible:t.ads_visible,ads_enabled:t.ads_enabled},H)),k.add({document_identifier:h.document.document_identifier,source:h.source,google_user_id:h.google_user_id,parent_id:h.parent_id,filename:h.filename,document_name:h.document_name(),file_url:h.file_url}),t.$broadcast("document_init"),L.init_realtime(t.current_user.channel),o=function(){if("filepicker"===h.source){try{p.record_if_file_in_drive(h.filename,h.filesize,i)}catch(e){a=e}return h.document.document_identifier}return n.force_new_copy?(n.force_new_copy=!1,o=r):h.document_cache_key}(),null!=o&&PDFViewerApplication.pdfDocument.getData().then(function(e){return C.addPdf("https://localfile.kamihq.com/"+encodeURIComponent(o),e)}),t.online_collaborators={},l=d.instance.subscribe("presence-"+h.document.channel),l.bind("pusher:subscription_succeeded",function(e){return g(function(){return e.each(function(e){return t.online_collaborators[e.id]=!0})})}),l.bind("pusher:member_added",function(n){return g(function(){var r;if(t.online_collaborators[n.id]=!0,r=e.findIndex(h.document.collaborating_users,{id:n.id}),r===-1)return s.show(e.pick(h.document,"id","document_identifier","fingerprint")).then(function(e){return h.document.collaborating_users=e.collaborating_users})})}),l.bind("pusher:member_removed",function(e){return g(function(){return t.online_collaborators[e.id]=!1})})})})})},t.update_document_settings=m.update_document_settings,t.switch_copy=function(t){if(h.document_identifier!==t.document_identifier)return h.add_next_load_params(e.extend(t,{source:"switched_copy"})),U(function(){return n.$broadcast("documentclose"),z()})},t.share_allowed=function(){return notable.support_xhr2()&&!I.has_flag("disable_sharing")},t.open_shortcuts_modal=function(){return n.$broadcast("show-shortcut-modal")},t.open_window=function(e,n){switch(null==n&&(n=null),e){case"show_download":return f.track("Open Download Dialog",{from:"toolbar"}),b.open(t.current_user);case"autograph_management":return x.open();case"news_dialog":return R.open();case"notification_settings":return P.open();case"enter_coupon":return N.open()}},t.premium_required=function(e){return S.open(e)},t.filter_out=function(e){return e.filtered_out=!e.filtered_out,t.$broadcast("filtered_collaborator"),f.track("Filtered Collaborator",angular.extend({filtered_name:e.name,filtered_user_id:e.id,filtered_out:e.filtered_out?"Filtered Out":"Filtered In"},H))},t.gravatar_image=function(e){return l.image(e)},t.toggle_dropdown=function(e){return t.show_dropdown=e===t.show_dropdown?null:e},t.has_feature=function(e){return I.has_feature(e)},t.feature_enabled=function(e){return I.has_flag(e)},t.print=function(n,r){var i,o;return o=e.find(window.navigator.plugins,function(e){return"Chrome PDF Viewer"===(null!=e?e.name:void 0)}),i=(null!=r?r.metaKey:void 0)||(null!=r?r.ctrlKey:void 0)||!o,b.print(t.current_user,n,i)},t.isTwoPageMode=function(){return TwoPageViewMode.active},t.show_share=function(){return w.open(),t.toggle_dropdown(null),SecondaryToolbar.close()},t.hideComments=!1,t.toggle_comments=function(){return t.hideComments=!t.hideComments,n.$broadcast("toggle_comments",t.hideComments)},t.undo_service=u,q=function(e){return f.track("Log Out",{success:!0,circumstance:e}),PDFViewerApplication.close(),a.logout().finally(function(){return E.google().logout(),n.$broadcast("logout")})},t.logout=function(e,t){return t?q(e):($.sync_now(),confirm("Are you sure you want to log out?\n")?T.length()?A.openConfirm({template:r,controller:["$scope","$timeout",function(e,t){return e.$watch(function(){return T.length()},function(n){if(0===n)return t(function(){return e.confirm()})})}]}).then(function(){return q(e)}):q(e):void 0)},t.clicked_premium=function(e){return null==e&&(e="header_toolbar"),f.track("Clicked Buy Premium",{from:e})},t.insert_image=function(e,t,r){var o,a,s,l;if(null==t&&(t="image"),null==r&&(r=function(){}),!I.has_feature("image"))return void S.open("image");if(e){if(a=15728640,e.size>a)return s=notable.bytes_to_string(e.size),void A.open({template:"<h4><center>File too large</center></h4> <p>Cannot insert image because file size "+s+' exceeds maximum file size (15MB)</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0});l=PDFJS.createObjectURL(e),o=new Image,o.src=l,o.onerror=function(){return n.$apply(function(){return A.open({template:'<h4><center>Invalid Image</center></h4> <p>Cannot insert image because it is corrupted or not in a supported format</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0})})},o.onload=function(){return n.$apply(function(){return SecondaryToolbar.close(),M.set_annotation_mode(t),M.extra_annotation_params={autograph:{id:i.v4(),autograph_image_url:l,blob:e}},r(o)})}}},t.logo_click=function(){if(!notable.is_embed)return o.open("https://www.kamihq.com","_blank"),f.track("Clicked Logo")},t.show_teacher_features=function(){var e,n,r,i;return"school"===(null!=(e=t.current_user)&&null!=(n=e.user_profile)?n.usage_purpose:void 0)&&"student"!==(null!=(r=t.current_user)&&null!=(i=r.user_profile)?i.school_role:void 0)},t.open_assignment_dialog=function(){return F.open()},t.can_edit=function(){return h.has_permission("can_edit")},t.add_pages=function(){return B.open("document")}}])}).call(t,n(2))},function(e,t){ng.controller("DocumentTitleBarController",["$scope","PageState","DocumentManager","GoogleDrive","Sync","KeyCodes","Undo",function(e,t,n,r,i,o,a){var s;return e.$watch("page_state.document.name",function(t){return e.document_name=t}),e.get_drive_folder=function(){var e,t;return(null!=(e=i.drive.folder)?e.title:void 0)||(null!=(t=i.drive.folder)?t.name:void 0)||"My Drive"},e.readonly=function(){return!t.has_permission("edit")},e.save_document_name=function(){return 0===e.document_name.trim().length?e.document_name=e.page_state.document.name:e.document_name!==e.page_state.document.name?s(e.document_name):void 0},s=function(i){var o;return o=e.page_state.document.name,t.google_document&&r.patch_file({id:t.google_document.id,title:i},t.google_user_id),n.update_document_name(i),a.add(function(){return s(o)})},e.document_name_keydown=function(t){return t.keyCode!==o.enter||t.shiftKey?t.keyCode===o.escape?(e.document_name=e.page_state.document.name,t.target.blur()):void 0:t.target.blur()},e.move_drive_folder=function(){return i.drive.move_drive_folder()}}])},function(e,t){ng.controller("EmbedCodeController",["$scope","PageState",function(e,t){return e.$watch("page_state.document.embed_url",function(){if(t.document)return e.embed_code="<iframe width='1000' height='800' src='"+t.document.embed_url+"' frameborder='0' allowfullscreen></iframe>"})}])},function(e,t){ng.controller("ErrorViewController",["$scope",function(e){return Detectizr.detect(),e.debug_browser_info=Detectizr.browser,e.debug=function(){var t;return"User: "+(null!=(t=e.current_user)?t.email:void 0)+" Browser: "+e.debug_browser_info.browser+" "+e.debug_browser_info.browserVersion+" "+notable.operating_system()+"\nPage State: "+JSON.stringify(e.page_state)}}])},function(e,t){ng.controller("ForgotPasswordController",["$scope","UserAPI","URLParams",function(e,t,n){return e.reset_password=function(){return t.reset_password({user:{reset_password_token:n.reset_password_token,password:e.password}},function(){return e.errors=[],e.reset_password_done=!0},function(t){e.errors=t.data.errors})}}])},function(e,t){ng.controller("GuestUserRequestController",["$scope","$rootScope","SettingsFactory","User","Mixpanel","MixpanelHelper","OfflineSync","ABTestService",function(e,t,n,r,i,o,a,s){var l;return e.show_email_request=!1,l=function(t){return e.ask_for_email_only=s.get_random("ask_for_email_only",2),e.show_email_request=!0,i.track("Guest User Request Shown",{from:t}),r.show().then(function(t){return e.name="Guest User"!==t.name?t.name:null,e.email=t.email}),a.sync_now()},e.close=function(){return e.show_email_request=!1,i.track("Guest User Request Closed")},e.$on("clicked_author",function(t,n){if(n===e.current_user.id&&e.current_user.guest_user)return l("clicking author")}),e.$on("created_comment",function(){if(e.current_user.guest_user)return r.show().then(function(e){var t;if(e.guest_user)return t=parseInt(n.get("comment_created_count",0)),t%10===1&&l("creating 10 annotations"),n.set("comment_created_count",t+1)})}),e.show_login=function(){return i.track("Guest User Request Clicked Login"),e.show_email_request=!1,t.$broadcast("guest_login")},e.submit_email=function(){return r.show().then(function(t){return i.track("Guest User Request Submitted"),t.name=e.name,t.email=e.email,r.update(t).then(function(t){return e.show_email_request=!1,o.track_signup(t,"Notable Guest Sign Up"),i.track("Guest User Request Sign Up Succeeded")},function(t){return e.errors=t||["Network error, please try again"],o.track_signup_error(e.errors,e.email),i.track("Guest User Request Sign Up Failed",{user_email:e.email,user_name:e.name,errors:e.errors})})})}}])},function(e,t,n){(function(e){ng.controller("KamiController",["$scope","$rootScope","User","UserLocal","PageState","GoogleDrive","$timeout","DocumentManager","URLParams","SettingsFactory","LicensesHelper","OAuthManager","EnterCouponDialog","SpotlightState","Onboarding","CreateAssignmentDialog","ExtensionHook",function(t,n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v){var _,y,b,w,x;if(notable.is_web&&f.google().login({immediate:!0}),b=function(){var e;return o.change_state("loading"),e={disable_push_state:!0},null!=c.source&&(e.source=c.source),"edmodo_script"===c.source&&(e.copy_type="edmodo_script"),null!=c.file&&(e.source_url=c.file),o.add_next_load_params(e)},w=function(e){var t,n,r;null!=e&&d.update_license(e),n=!1;try{r=angular.fromJson(c.state)}catch(e){r=null}switch(c.redirect?c.force_login||notable.redirect_if_needed(c):null!=r?(n=!0,b(),a.load_document(r)):null==c.document_identifier||c.file?c.file&&(n=!0,b(),v.is_installed?l.open_url(c.file):bootstrapPdfJsLoad(c.file)):(n=!0,b(),l.open_file(c.document_identifier)),c.license_key&&d.apply_license_key(c.license_key).then(function(){return alert("Your license has been added, please refresh the page.")}),c.open_dialog){case"enter_coupon_dialog":h.open();break;case"create_assignment":m.open()}return t=window.location.hash.substring(1),t=parseQueryString(t),null!=t.comment_id&&p.set_clicked_annotation_id(t.comment_id),n},c.user&&notable.is_embed)try{x=JSON.parse(c.user),i.update(x)}catch(e){}return y=function(){return r.show().then(w)},window.PDFJS_INITIALIZED?y():e(window).on("pdfjs-initialized",y),_=t.$on("features_updated",function(){return g.resume_if_needed(),_()}),t.$on("authenticated_user",function(){return("undefined"!=typeof PDFView&&null!==PDFView?PDFView.documentFingerprint:void 0)?n.$broadcast("documentloaded"):r.show().then(w)}),window.addEventListener("popstate",function(e){if(!w())return PDFViewerApplication.close(),o.change_state("none"),document.title="Kami"})}])}).call(t,n(1))},function(e,t){ng.controller("MigrateBillingController",["$scope","MigrateBillingAPI","$q","Mixpanel","URLParams",function(e,t,n,r,i){var o,a;return a=StripeCheckout.configure({key:"pk_live_4Um7jdwvkvSu3W7kBwiR2svS",token:function(e){return o.resolve(e)}}),o=null,e.email=i.email,e.auth_code=i.auth_code,r.override_user_id=i.user_id,r.track("Billing Migration"),e.popupStripe=function(){return o=n.defer(),a.open({name:"Kami",email:e.email,allowRememberMe:!1,panelLabel:"Update Billing Info"}),o.promise.then(function(n){return e.purchase_successful="processing",t.create({stripe_token:n.id,auth_code:e.auth_code},function(t){return e.purchase_successful=!0,e.purchased=!0,r.track("Billing Migration Successful")},function(t){var n,i;return n=null!=(i=t.data)?i.errors:void 0,e.purchase_successful=!1,(null!=n?n.length:void 0)>0?e.errors=n||["Network error, please try again"]:void 0===n.length&&(e.errors=["Network error, please try again"]),r.track("Billing Migration Failed")})})}}])},function(e,t,n){var r;r=n(540),ng.controller("NewsIndicatorController",["$scope","localStorageService","ngDialog","NewsDialog",function(e,t,n,r){var i;return i=function(){var n,r;if(n=42,r=t.get("seen_news_version"),!r||r<n)return e.show_indicator=!0,t.set("seen_news_version",n)},i(),e.open_news=function(){return e.show_indicator=!1,r.open()}}]),ng.factory("NewsDialog",["ngDialog","Mixpanel",function(e,t){var n;return n=function(){return t.track("Open Dialog NewsDialog"),e.open({template:r,overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:n}}])},function(e,t,n){(function(e){ng.controller("NotablePremiumStripeController",["$scope","User","LicensesHelper","Mixpanel","$q","ngDialog","$timeout","Stripe","ABTestService","URLParams",function(t,n,r,i,o,a,s,l,c,u){var d,f,h,p;return t.user=null,null!=u.education&&(t.education=!0),null!=u.work&&(t.work=!0),null==u.education&&null==u.work&&(t.all_plans=!0),t.prices={standard:{month:2,year:18},premium:{month:5,year:50},work:{month:20,year:180},teacher:{year:99}},h=function(e){return null==e&&(e=!1),n.show(e).then(function(e){var n,o;return t.user=e,r.update_license(e),n=r.get_purchased_license(),(null!=n?n.active:void 0)?t.license_type=r.humanize(n):t.license_type=r.humanize(),t.public_mail_provider=!0,(null!=(o=e.domain_properties)?o.public_mail_provider:void 0)||(t.public_mail_provider=!1,t.prices={standard:{month:2,year:18},premium:{month:10,year:50},work:{month:20,year:180},teacher:{year:99}}),i.track("Viewed Premium Page",{public_mail_provider:t.public_mail_provider})}).catch(function(){if(!t.user)return window.location="viewer.html?force_login=true&redirect=upgrade.html"})},h(),p=function(){var t;return t='<div class="block-ui"><div class="block-msg"><h1>Processing...</h1></div></div>',e("body").append(t)},d=function(){return e(".block-ui").remove()},f=function(e){var n,r;return"cancelled"===e?i.track("Purchase Cancelled"):(n=null!=e&&null!=(r=e.data)?r.errors:void 0,t.showErrors(n),i.track("Purchase Error",{error:t.errors[0]}),h()),o.reject(e)},t.showErrors=function(n){return(null!=n?n.length:void 0)>0?t.errors=n||["Network error, please try again"]:void 0===(null!=n?n.length:void 0)&&(t.errors=["Network error, please try again"]),s(function(){return e("html,body").animate({scrollTop:e(".errors").offset().top},"slow")},100)},t.purchase=function(e,n){var r,i;return!t.user||t.user.guest_user?void(window.location="viewer.html?force_login=true&redirect=upgrade.html"):(r=null!=(i=t.prices[e])?i[n]:void 0,null==r&&f("Unknown pack "+e+" or period "+n),p(),l.purchase(r,e,n).then(function(){return a.open({template:"success_dialog",data:{pack:e}}),h(!0)}).catch(f).finally(d))},t.features=[{name:"Basic Annotation Tools",standard:!0,pro:!0,work:!0,teacher:!0,school:!0},{name:"Collaborators",standard:0,pro:"Up to 5",work:"Unlimited",teacher:"Unlimited",school:"Unlimited"},{name:"Auto Save to Google Drive",standard:!0,pro:!0,work:!0,teacher:!0,school:!0},{name:"Remove Ads",standard:!0,pro:!0,work:!0,teacher:!0,school:!0},{name:"Add Shapes, Audio & Images",standard:"Shapes Only",pro:!0,work:!0,teacher:!0,school:!0},{name:"Convert Files to PDF",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Merge and Split PDFs",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Add Images",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Add New Pages",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Text To Speech",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Voice Typing",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Video and Voice Comments",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Dictionary",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Equation Tool",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Digital Signing",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Google Team Drive",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"Advanced Export Options",standard:!1,pro:!0,work:!0,teacher:!0,school:!0},{name:"OCR",standard:"15 pages and less",pro:!0,work:!0,teacher:!0,school:!0},{name:"Bates Numbering",standard:!1,pro:!1,work:!0,teacher:!0,school:!0},{name:"Works with Google Classroom",restrict:t.work,standard:!1,pro:!1,work:!1,teacher:!0,school:!0},{name:"Support",standard:"Community Support",pro:"Premium Email Support",work:"Phone Support",teacher:"Premium Email Support",school:"Onboarding support with webinar and training offered to suit your needs"},{name:"License Sharing",restrict:t.work,standard:!1,pro:!1,work:!1,teacher:"Share your license with your classes (one license per teacher)",school:"Share license across your entire school or district"}]}])}).call(t,n(1))},function(e,t,n){(function(e,t){ng.controller("OnboardingDialogController",["$scope","ngDialog","Onboarding","User","$q","$timeout","KeyCodes","Mixpanel","CouponAPI","start_step","end_step","properties_data","preClose",function(n,r,i,o,a,s,l,c,u,d,f,h,p){var g,m,v,_,y,b,w,x;return n.step=d,n.purpose={reset:function(){return this.value=null,this.value_toggle_state=!1,this.emphasize=!1},set:function(e){return this.emphasize=!1,e=e.toLowerCase(),this.value!==e&&y(1),this.value=e,null!==e&&(this.value_toggle_state=!0),c.track("Onboarding Set Field Value",{field:"purpose",value:e,step:n.step})},is_valid:function(){return null!==this.value}},n.work_industry={reset:function(){return this.value=null,this.value_toggle_state=!1,this.other_value=null,this.other_value_toggle_state=!1,this.emphasize=!1},set:function(e){return this.emphasize=!1,e=e.toLowerCase(),this.value!==e&&y(2),this.value=e,null!==e&&(this.value_toggle_state=!0),this.other_value=null,"other"===e&&(this.other_value_toggle_state=!0),c.track("Onboarding Set Field Value",{field:"work_industry",value:e,step:n.step})},show:function(){return"work"===n.purpose.value},options:["Education","Business","Arts & Film","Legal Services","Technology","Medical/Health","Other"],is_valid:function(){return!!this.show()&&(null!==this.value&&("other"!==this.value||null!==this.other_value&&this.other_value_toggle_state!==!0))}},n.ask_if_k12={reset:function(){return this.value=null,this.emphasize=!1},set:function(e){return this.emphasize=!1,e===!0?n.purpose.set("school"):this.value=e},show:function(){return n.work_industry.is_valid()&&"education"===n.work_industry.value},is_valid:function(){return!!this.show()&&null!==this.value}},n.school_role={reset:function(){return this.value=null,this.value_toggle_state=!1,this.other_value=null,this.other_value_toggle_state=!1,this.emphasize=!1},set:function(e){return this.emphasize=!1,e=e.toLowerCase(),this.value!==e&&y(3),this.value=e,null!==e&&(this.value_toggle_state=!0),this.other_value=null,"other"===e&&(this.other_value_toggle_state=!0),c.track("Onboarding Set Field Value",{field:"school_role",value:e,step:n.step})},set_other:function(e){return this.other_value=e,this.other_value_toggle_state=!1},show:function(){return"school"===n.purpose.value},other_options:["Principal","Advisor/Consultant","Technology Officer","School Administrator","District Administrator","Not Listed"],is_valid:function(){return!!this.show()&&(null!==this.value&&("other"!==this.value||null!==this.other_value&&this.other_value_toggle_state!==!0))}},n.ask_if_technology_officer={reset:function(){return this.value=null,this.emphasize=!1},set:function(e){return this.emphasize=!1,e!==this.value&&y(4),e===!0?(n.school_role.set("other"),n.school_role.other_value="Technology Officer",n.school_role.other_value_toggle_state=!1):this.value=e},show:function(){return n.school_role.is_valid()&&"teacher"===n.school_role.value&&null===this.value},is_valid:function(){return null!==this.value}},n.institute={reset:function(){return this.value=null,this.value_toggle_state=!1,this.emphasize=!1},set:function(){var e,t;return this.value?(this.emphasize=!1,this.value_toggle_state=!0,t=this.value,c.track("Onboarding Set Field Value",{field:"institute",value:t,step:n.step})):(e=document.getElementById("onboarding-institute-input"),e.focus(),void e.parentNode.classList.add("is-dirty"))},enter_to_save:function(e){var t;if(e.keyCode&&e.keyCode===l.enter&&!e.shiftKey)return this.set(),null!=(t=e.target)?t.blur():void 0},show:function(){return"teacher"===n.school_role.value?n.ask_if_technology_officer.is_valid():n.school_role.is_valid()&&"student"!==n.school_role.value;
},is_valid:function(){return!!this.show()&&(this.value&&this.value_toggle_state)}},n.subject={reset:function(){return this.values=[],this.emphasize=!1},show:function(){return"teacher"===n.school_role.value&&n.institute.is_valid()},show_options:function(t){var n,r,i;return n=a.defer(),i=e.clone(this.subjects_list,!0),r=e.chain(i).filter(function(e){var n;return t?(n=e.text.toLowerCase().indexOf(t.toLowerCase()),n>-1&&(e.index=n,!0)):(e.index=0,!0)}).sortBy("index").value(),s(function(){return n.resolve(r)},0),n.promise},added:function(e){this.emphasize=!1},is_valid:function(){return!!this.show()},subjects_list:[{text:"Chemistry"},{text:"Biology"},{text:"Physics"},{text:"Geography"},{text:"Gym"},{text:"Programming"},{text:"Astronomy"},{text:"Geology"},{text:"Engineering"},{text:"English"},{text:"Spanish"},{text:"Mathematics"},{text:"Science"},{text:"Linguistics"},{text:"French"},{text:"Japanese"},{text:"Chinese"},{text:"Arabic"},{text:"Korean"},{text:"German"},{text:"Dutch"},{text:"Russian"},{text:"History"},{text:"Art"},{text:"Design"},{text:"Technology"},{text:"Computing"},{text:"Social Studies"},{text:"Cooking"},{text:"Sport Science"},{text:"Materials"},{text:"Music"},{text:"Sex Ed"},{text:"Accounting"},{text:"Business"},{text:"Finance"},{text:"Economics"},{text:"Religious Studies"},{text:"Psychology"},{text:"Humanities"},{text:"Sport"},{text:"Health"},{text:"All"}]},x=function(){if(!n.purpose.is_valid())return"purpose";if("work"===n.purpose.value){if(!n.work_industry.is_valid())return"work_industry";if("education"===n.work_industry.value&&!n.ask_if_k12.is_valid())return"ask_if_k12"}else if("school"===n.purpose.value){if(!n.school_role.is_valid())return"school_role";if("teacher"===n.school_role.value&&!n.ask_if_technology_officer.is_valid())return"ask_if_technology_officer";if("student"===n.school_role.value)return!0;if(!n.institute.is_valid())return"institute";if("teacher"===n.school_role.value&&!n.subject.is_valid())return"subject"}return!0},n.show_submit_1=function(){var e;return e=x(),e===!0},p.add(function(e){var t;if(!e&&(t=x(),t!==!0))return n[t].emphasize?(n[t].emphasize=!1,s(function(){return n[t].emphasize=!0},200)):n[t].emphasize=!0}),n.shadow_clicked=function(e){var n;if("onboarding-dialog-click-container"===e.target.id)return n=t("#onboarding-dialog-scroll-container"),n.animate({scrollTop:n[0].scrollHeight},500)},n.submit_1=function(){var r;return t("#step-1-submit").addClass("spinner"),t("#step-1-submit").html(""),r=m(),c.track("Onboarding Clicked Submit",{custom_fields:r,step:n.step}),r===!1?v():o.show().then(function(o){return o.user_profile=o.user_profile||{},e.extend(o.user_profile,r),i.finish(o).then(function(){return i.notify_onboarding_finished(1,null),"teacher"===n.school_role.value&&n.step+1<=f?n.step++:(i.notify_onboarding_finished(1,null),n.closeThisDialog(!0))},function(e){return n.closeThisDialog(!0),i.notify_onboarding_finished(1,e),c.track("Onboarding Submission Failed",{custom_fields:r,err:e,step:n.step}),t("#step-1-submit").removeClass("spinner")})},function(e){return n.closeThisDialog(!0),i.notify_onboarding_finished(1,e),t("#step-1-submit").removeClass("spinner")})},n.enter_to_save=function(e,t){var n;if(e.keyCode===l.enter&&!e.shiftKey)return t.other_value&&(t.other_value_toggle_state=!1),null!=(n=e.target)?n.blur():void 0},m=function(){var e;if(e={user_segmentation:"other",usage_purpose:null,school_role:null,work_industry:null,subjects:null,institute:null},!n.purpose.is_valid())return!1;if(e.usage_purpose=n.purpose.value,"work"===n.purpose.value){if(!n.work_industry.is_valid())return!1;e.work_industry="other"===n.work_industry.value?n.work_industry.value+"-"+n.work_industry.other_value:n.work_industry.value,e.user_segmentation="other"}else if("school"===n.purpose.value){if(!n.school_role.is_valid())return!1;if(e.school_role="other"===n.school_role.value?n.school_role.value+"-"+n.school_role.other_value:n.school_role.value,e.user_segmentation=n.school_role.value,"student"!==n.school_role.value&&(e.institute=n.institute.value||"N/A","teacher"===n.school_role.value)){if(e.institute=n.institute.value||"N/A",!n.subject.is_valid())return!1;e.subjects=n.subject.values.reduce(function(e,t,n){return e.push(t.text),e},[])}}return e},v=function(e){return c.track("Onboarding Submit Validation Failed",{err:e,step:n.step}),alert("Something went wrong =( \n\n"+e)},n.discovery={reset:function(){return this.value=null,this.value_toggle_state=!1,this.other_value=null,this.other_value_toggle_state=!1},set:function(e){return e=e.toLowerCase(),this.value!==e&&y(7),this.value=e,null!==e&&(this.value_toggle_state=!0),this.other_value=null,"other"===e&&(this.other_value_toggle_state=!0),c.track("Onboarding Set Field Value",{field:"discovery",value:e,step:n.step})},show:function(){return"student"!==n.school_role.value&&2===n.step},is_valid:function(){return!!this.show()&&(null!==this.value&&("other"!==this.value||null!==this.other_value&&this.other_value_toggle_state!==!0))},method_lists:{base_list:["Google search","Chrome web store","GSuite apps store","Media/Blogs","Other"],teacher_list:["Teacher referral","Student referral","My school is using it","FETC","ISTE"],work_list:["Colleague referral"],college_list:["Professor referral","Classmate referral","My college is using it"],personal_list:["Friend referral","Randomly found it"]},get_methods_list:function(){switch(n.purpose.value){case"work":return this.method_lists.teacher_list.concat(this.method_lists.base_list);case"college":return this.method_lists.college_list.concat(this.method_lists.base_list);case"school":return this.method_lists.teacher_list.concat(this.method_lists.base_list);case"personal":return this.method_lists.personal_list.concat(this.method_lists.base_list);default:return this.method_lists.base_list}}},n.promo_code={reset:function(){return this.value=null,this.entered=!1,this.value_toggle_state=!1,this.promo_message=null,this.promo_error=!1},set:function(){var e,t;return t=this.value,c.track("Onboarding Set Field Value",{field:"promo_code",value:t,step:n.step}),this.value&&"N/A"!==this.value?(e=this,u.create({coupon_code:e.value}).$promise.then(function(t){var r;return r=t.success_text,e.set_promo_message(r,!1),e.value_toggle_state=!0,e.entered=!0,c.track("Onboarding Set Promo Code Succeed",{field:"promo_code",value:e.value,step:n.step}),a.resolve()},function(t){var r,i,o;return r=null!=(i=t.data)&&null!=(o=i.errors)?o.join():void 0,e.set_promo_message(r,!0),c.track("Onboarding Set Promo Code Failed",{field:"promo_code",value:e.value,err:t,step:n.step}),a.reject()})):(this.value="N/A",this.set_promo_message(null,!1),this.value_toggle_state=!0,a.resolve())},set_promo_message:function(e,t){return this.promo_message=e,this.promo_error=t},enter_to_save:function(e){var t;if(e.keyCode&&e.keyCode===l.enter&&!e.shiftKey)return this.set(),null!=(t=e.target)?t.blur():void 0},skip:function(){return this.value="N/A",this.set()},show:function(){return n.discovery.is_valid()},is_valid:function(){return!this.promo_error}},n.show_submit_2=function(){return!!n.discovery.is_valid()&&!!n.promo_code.is_valid()},n.submit_2=function(){return n.discovery.is_valid()?n.promo_code.value&&!n.promo_code.entered?n.promo_code.set().then(function(){return b()},function(){}):b():v("Invalid entry for discovery method!")},b=function(){var t;return t={discovery:null!=n.discovery.other_value?n.discovery.value+"-"+n.discovery.other_value:n.discovery.value},c.track("Onboarding Clicked Submit",{custom_fields:t,step:n.step}),o.show().then(function(r){return e.extend(r.user_profile,t),i.finish(r,2).then(function(){return n.closeThisDialog(!0),i.notify_onboarding_finished(2,null,n.promo_code.entered)},function(e){return n.closeThisDialog(!0),i.notify_onboarding_finished(2,e),c.track("Onboarding Submission Failed",{custom_fields:t,err:e,step:n.step})})},function(e){return n.closeThisDialog(!0),i.notify_onboarding_finished(2,e)})},w=[n.purpose,n.work_industry,n.ask_if_k12,n.school_role,n.ask_if_technology_officer,n.institute,n.subject,n.discovery,n.promo_code],g=["usage_purpose","work_industry","placeholder","school_role","placeholder","institute","subjects","discovery"],y=function(e,t){var n,r,i,o,a;for(t=t||w.length-1,a=[],n=r=i=e,o=t;i<=o?r<=o:r>=o;n=i<=o?++r:--r)a.push(w[n].reset());return a},_=function(){var e,t,n,r,i,o,a;for(a=[],n=r=0,o=g.length-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r)if(i=h[g[n]],null!=i){if("subjects"===g[n])try{e=i.map(function(e){return{text:e.trim()}}),w[n].values=e}catch(e){t=e;continue}else 0===i.indexOf("other-")?(w[n].value="other",w[n].other_value=i.substring(6)):w[n].value=i;a.push(w[n].value_toggle_state=!0)}else a.push(void 0);return a},y(0),_()}])}).call(t,n(2),n(1))},function(e,t){ng.controller("OnlineStatusController",["$scope",function(e){var t,n,r;return r=1,t=2,n=3,e.status=n,e.$on("pusher:connected",function(){return e.status=r}),e.$on("pusher:connecting_in",function(){return e.status=n}),e.$on("pusher:connecting",function(){return e.status=t}),e.$on("pusher:unavailable",function(){return e.status=n}),e.$on("pusher:disconnected",function(){return e.status=n}),e.$on("pusher:failed",function(){return e.status=n}),e.$watch("status",function(){return e.what=function(){switch(e.status){case r:return"Online";case t:return"Connecting";default:return"Offline"}}()})}])},function(e,t,n){(function(e){var t;t=n(14),ng.controller("OpenDropdownController",["$scope","$window","Mixpanel","PageState","GoogleDrive","Sync","RecentFileManager","DocumentManager","DocumentAPI","FileBrowserDialog","Document",function(n,r,i,o,a,s,l,c,u,d,f){return n.loading=!1,n.switch_copy=function(e){var r,a;if("new_copy"===e&&(e={document_identifier:t.v4(),copy_type:"user_copy"}),o.document.document_identifier!==e.document_identifier)return i.track("Switch Tracked Copy",{copies_count:null!=(r=o.document)&&null!=(a=r.copies)?a.count:void 0,document_identifier:e.document_identifier,copy_type:e.copy_type}),n.loading=!0,n.$parent.switch_copy(e)},n.$on("document_init",function(){return n.loading=!1,n.load_recents()}),n.load_recents=function(){var e;return e=function(){return n.recent_files=l.get()},l.refresh().then(e).catch(e)},n.$watch("show_dropdown",function(){var e;if("open_dropdown"===n.show_dropdown&&(n.recent_files=l.get(),o.document&&(null!=(e=n.document_with_copies)?e.document_identifier:void 0)!==o.document.document_identifier))return n.document_with_copies=null,u.show({document_identifier:o.document.document_identifier}).$promise.then(function(e){return n.document_with_copies=e})}),n.open_all_copies=function(){return f.index_fingerprint(PDFView.documentFingerprint).then(function(e){return d.open({documents:e,action:"select_copy",title:"Tracked Copies"}).closePromise.then(function(e){if("$escape"!==e.value)return n.switch_copy(e.value)})})},n.remove_recent=function(e,t){return e.stopPropagation(),t.hide=!0,l.remove_and_unset(t).then(function(){n.load_recents()},function(e){t.hide=!1}),i.track("Removed Recent File",{file_name:t.filename,document_identifier:t.document_identifier})},n.$on("total_annotation_count",function(t,n,r){var i;if(null!=o.document&&null!=o.document.copies)return i=e.find(o.document.copies,{document_identifier:o.document.document_identifier}),null!=i?i.comments_count=n:void 0}),n.copy_title=function(e){var t;return t=function(){switch(e.copy_type){case"google":return"Google Drive";case"fingerprint":return"Global";default:return""}}(),t+" Copy - "+e.name},n.is_extension=notable.is_extension,n.file_can_open=function(e){return l.file_can_open(e)},n.open_gdrive_picker=function(){return a.pick_file_and_load()},n.open_gdrive_parent_picker=function(){return a.pick_file_and_load(o.google_user_id,o.parent_id)},n.get_drive_folder=function(){var e,t;return(null!=(e=s.drive.folder)?e.title:void 0)||(null!=(t=s.drive.folder)?t.name:void 0)||"My Drive"},n.open_dropbox_picker=function(){return notable.is_extension?r.confirm("Dropbox won't work in Kami's Chrome Extension but it will work in the Web App.\nClick OK to go to https://web.kamihq.com/")&&r.open("https://web.kamihq.com/web/viewer.html","_blank"):l.open_dropbox_picker(),null},n.open_box_picker=function(){return notable.is_extension?r.confirm("Box won't work in Kami's Chrome Extension but it will work in the Web App.\nClick OK to go to https://web.kamihq.com/")&&r.open("https://web.kamihq.com/web/viewer.html","_blank"):l.open_box_picker(),null},n.open_file=function(){return l.open_file_picker()},n.open_recent_file=function(e){return l.open_recent_file(e)},n.open_file_browser=function(){return d.open()}}])}).call(t,n(2))},function(e,t,n){var r;r=n(544),ng.directive("openFile",function(){return{restrict:"E",templateUrl:r,replace:!0,controller:"OpenScreenController"}}),ng.controller("OpenScreenController",["$scope","$window","GoogleDrive","PageState","$timeout","RecentFileManager","Mixpanel","DocumentManager","ngDialog","AddPagesDialog",function(e,t,n,r,i,o,a,s,l,c){var u,d;return e.page_state=r,e.is_extension=notable.is_extension,d=function(){return e.recent_files=o.get()},o.refresh().then(d).catch(d),e.clear_recent=function(){if(window.confirm("Clear all recent files?"))return o.clear(),e.recent_files=[],a.track("Removed All Recent Files")},e.remove_recent=function(e,t){return e.stopPropagation(),o.remove_by_document_identifier(t.document_identifier),t.hide=!0,o.remove_and_unset(t).then(function(e){},function(e){t.hide=!1}),a.track("Removed Recent File",{file_name:t.filename,document_identifier:t.document_identifier})},u=!1,e.open_gdrive_picker=function(){if(!u)return u=!0,i(function(){return u=!1},500),n.pick_file_and_load()},e.open_dropbox_picker=function(){return notable.is_extension?t.confirm("Dropbox won't work in Kami's Chrome Extension but it will work in the Web App.\nClick OK to go to https://web.kamihq.com/")&&t.open("https://web.kamihq.com/web/viewer.html","_blank"):o.open_dropbox_picker(),null},e.open_box_picker=function(){return notable.is_extension?t.confirm("Box won't work in Kami's Chrome Extension but it will work in the Web App.\nClick OK to go to https://web.kamihq.com/")&&t.open("https://web.kamihq.com/web/viewer.html","_blank"):o.open_box_picker(),null},e.file_can_open=function(e){return o.file_can_open(e)},e.open_file=function(){return o.open_file_picker()},e.open_recent_file=function(e){return o.open_recent_file(e)},e.open_tool=function(e){return a.track("Open Tool",{tool:e}),window.open("https://tools.kamihq.com/"+e),!0},e.new_blank_page=function(){return c.open("open screen").then(function(e){if(null!=e?e.value:void 0)return r.add_next_load_params({force_new_copy:!0}),s.open_url("pdf_samples/"+e.value+".pdf?force_new_copy=true",{}).then(function(){return a.track("New Page Open Success",{})},function(e){return a.track("New Page Open Failure",{error:e})})})}}])},function(e,t){ng.controller("PageNumberController",["$scope",function(e){return e.update=function(t){return e.$apply(function(){return e.page=t})}}])},function(e,t,n){var r;r=n(24),ng.controller("PremiumBadgeController",["$scope","Mixpanel","LicensesHelper","$rootScope",function(e,t,n,i){return e.clicked_premium=function(e){return null==e&&(e="header_toolbar"),t.track("Clicked Buy Premium",{from:e})},i.$on("features_updated",function(){var t,i,o;return o=n.get_current_license(),e.license_type=n.humanize(o),"Education"===e.license_type&&(e.license_type="Schools"),"trial"===(null!=o?o.status:void 0)&&(i=r(o.valid_to),t=i.diff(r(),"days"),e.days_until_trial_ends=function(){switch(t){case 0:case 1:return i.fromNow();default:return"in "+t+" days"}}()),e.license_show_upgrade="Basic"===e.license_type||null!=e.days_until_trial_ends})}])},function(e,t){ng.controller("PromotionsController",["$scope","EmailPromotionsAPI","Mixpanel","URLParams",function(e,t,n,r){return e.email=r.email,n.override_user_id=r.user_id,n.track("Promotions 3 Month Viewed"),e.promotion="processing",t.threemonth({email_token:r.email_token}).$promise.then(function(t){return e.promotion="successful",n.track("Promotions 3 Month Successful")},function(t){var r,i;return e.promotion="error",r=null!=(i=t.data)?i.errors:void 0,n.track("Promotions 3 Month Failed",{errors:r}),(null!=r?r.length:void 0)>0?e.errors=function(){switch(!1){case"Could not find user from token"!==(null!=r?r[0]:void 0):return["Looks like the special code in your email expired. Flick us an email and we'll help you out: support@kamihq.com"];case null==r:return r;default:return["Network error, please try again"]}}():r?void 0:e.errors=["Network error, please try again"]})}])},function(e,t){ng.controller("PromptFileUploadController",["$scope","GoogleDrive","User","PageState","Mixpanel","SettingsFactory","GoogleAuth","OAuthManager","PromptFileUploadService",function(e,t,n,r,i,o,a,s,l){var c;return e.state=l.state,e.page_state=r,e.$watch("state.auto_upload_google_drive",function(t,n){if(t!==n&&null!=n)return e.state.auto_upload_google_drive?a.authorize_now({offline:!0}).then(function(e){return a.get_credentials()}).then(function(t){return o.set("auto_upload_google_drive",e.state.auto_upload_google_drive,!0),o.set("auto_upload_google_drive_id",t.id,!0),e.upload_to_drive()},function(t){return e.state.auto_upload_google_drive=!1}):(o.set("auto_upload_google_drive",e.state.auto_upload_google_drive,!0),o.destroy("auto_upload_google_drive_id",!0)),i.track("Toggle Auto-upload Google Drive",e.state.auto_upload_google_drive)}),c=null,e.upload_to_drive=function(){var n;return i.track("Prompt File Upload Dialog Upload To Drive"),e.uploading=!0,n=o.get("auto_upload_google_drive_id",null),c=t.upload_to_drive(n),c.then(function(){return e.uploading=!1,l.close()},function(t){return t?e.uploading="error":l.close(!0)})},e.cancel_upload=function(){return null!=c?c.abort():void 0},e.dismiss=function(){return i.track("Prompt File Upload Dialog Dismissed"),l.close(!0)},e.check_auth_then_upload=function(){var t,n;return e.uploading="checking",t=o.get("auto_upload_google_drive_id",null),n={immediate:!0,user_id:t},s.google(t).login(n).then(function(t){return e.upload_to_drive()},function(t){return e.uploading="auth"})},e.$on("uploaded_to_drive",function(){return l.close()}),e.uploading=!1,e.$on("document_init",function(){r.document.file_url||"googledrive"===r.source||"google"===r.document.copy_type||"edmodo_script"===r.source||o.get("auto_upload_google_drive",!1)&&l.open_and_upload(!0)}),l.on_upload_prompted(function(t){return t?e.check_auth_then_upload():e.upload_to_drive()}),e.$on("uploaded_to_drive",function(){return l.close()})}])},function(e,t){ng.controller("SavingProgressController",["$scope","Undo","Sync",function(e,t,n){return e.status=function(){return n.kami.status()},e.undo=function(){return t.undo()},e.show_undo=function(){return t.hasUndo()}}])},function(e,t,n){var r;r=n(134),ng.controller("SettingsController",["$scope","SettingsFactory","User","Mixpanel","LicensesHelper","localStorageService","SyncQueue","ngDialog","OfflineSync","OAuthManager","Onboarding","GoogleAuth","CouponAPI","ExtensionHook",function(e,t,n,i,o,a,s,l,c,u,d,f,h,p){var g,m;return m=function(t){return null==t&&(t=!1),n.show(t).then(function(t){var n;return e.user=t,o.update_license(t),e.license_type=o.get_license_type(),e.license_status=null!=(n=o.get_current_license())?n.status:void 0,e.license_show_upgrade="Basic"===e.license_type||"trial"===e.license_status,e.licenses=t.licenses.filter(function(e){return e.active})})},m(),e.$on("settings-updated",function(){return e.autoload=t.get("autoload",!0),e.notifications=t.get("notifications",!0),e.email_notifications=t.get("email_notifications",!0),e.google_drive_autosync=t.get("google_drive_autosync",!0)&&o.has_feature("google_auto_sync"),e.theme=t.get("new_theme_enabled",!0)?"light":"dark",e.auto_upload_google_drive=t.get("auto_upload_google_drive",!1),e.allow_pan_with_touch=t.get("allow_pan_with_touch",!0)}),i.track("Options Page"),e.$watch("autoload",function(n,r){if(n!==r&&null!=r)return t.set("autoload",e.autoload,!0),i.track("Toggle Autoload",e.autoload)}),e.$watch("notifications",function(n,r){if(n!==r&&null!=r)return t.set("notifications",e.notifications,!0),i.track("Toggle Notifications",e.notifications)}),e.$watch("email_notifications",function(n,r){if(n!==r&&null!=r)return t.set("email_notifications",e.email_notifications,!0),i.track("Toggle Email Notifications",e.email_notifications)}),e.$watch("google_drive_autosync",function(n,r){if(n!==r&&null!=r)return o.has_feature("google_auto_sync")?(t.set("google_drive_autosync",e.google_drive_autosync,!0),i.track("Toggle Google Drive Autosync",e.google_drive_autosync)):(e.google_drive_autosync_premium_required=!0,e.google_drive_autosync=!1)}),e.$watch("theme",function(n,r){if(n!==r&&null!=r)return t.set("new_theme_enabled","light"===e.theme,!0),i.track("Toggle Theme",{theme:e.theme})}),e.allow_pan_with_touch=!0,e.$watch("allow_pan_with_touch",function(e,n){if(e!==n&&null!=n)return t.set("allow_pan_with_touch",e,!0),i.track("Toggle Allow Pan With Touch",{allow:e})}),e.switch_auto_upload_g_drive=function(){if(e.auto_upload_google_drive!==t.get("auto_upload_google_drive",!1))return e.auto_upload_google_drive?f.authorize_now({offline:!0}).then(function(e){return f.get_credentials()}).then(function(n){return t.set("auto_upload_google_drive",e.auto_upload_google_drive,!0),t.set("auto_upload_google_drive_id",n.id,!0)},function(t){return e.auto_upload_google_drive=!1}):(t.set("auto_upload_google_drive",e.auto_upload_google_drive,!0),t.destroy("auto_upload_google_drive_id",!0)),i.track("Toggle Auto-upload Google Drive",e.auto_upload_google_drive)},e.apply_license=function(){return e.errors=null,e.successful_update=!1,e.license_key?(i.track("Entered License Key",{key:e.license_key}),o.apply_license_key(e.license_key).then(function(){return m(!0),e.successful_update=!0,i.track("Applied License",{key:e.license_key})},function(t){return e.errors=t||["Could not save, please try again"],i.track("Applying License Error",{errors:e.errors[0]})})):(e.errors=["Please enter a license key"],i.track("Applying License Error",{errors:e.errors[0]}))},e.apply_coupon=function(){return e.errors=null,e.successful_update=!1,h.create({coupon_code:e.coupon_code}).$promise.then(function(t){return m(!0),e.successful_update=!0,e.messages=[t.success_text]},function(t){var n;e.errors=null!=(n=t.data)?n.errors:void 0})},e.go_home=function(){return window.location="viewer.html"},e.update_user=function(){return e.continue_disabled=!0,e.successful_update=!1,e.errors=null,e.user?(t.save(!0),n.update(e.user).then(function(){return e.continue_disabled=!1,e.successful_update=!0},function(t){return e.continue_disabled=!1,e.errors=t||["Could not save, please try again"]})):void(window.location="viewer.html")},e.restart_onboarding=function(){return d.restart(1,1)},d.watch_onboarding_finished(function(e){return m(!0)}),g=function(){var t;return i.track("Log Out",{success:!0}),t=a.get("login_source"),n.logout().finally(function(){return u.google().logout()}).finally(function(){return e.go_home()})},e.logout=function(){if(c.sync_now(),confirm("Are you sure you want to log out?\n"))return s.length()?l.openConfirm({template:r,controller:["$scope","$timeout",function(e,t){return e.changes=function(){return s.length()},e.$watch("changes()",function(n){if(0===n)return t(function(){return e.confirm()})})}]}).then(function(){return g()}):g()},e.is_extension_installed=function(){return!!p.is_installed||!(notable.is_web||notable.is_embed)},e.humanize_license=function(e){return o.humanize(e)}}])},function(e,t,n){(function(e){var t;t=n(61),ng.controller("SignUpInController",["$scope","$rootScope","User","UserAPI","Mixpanel","MixpanelHelper","AuthorizeManager","Authentication","ABTestService","PageState","GoogleAuth","URLParams","UserLocal","DocumentManager","localStorageService","LicensesHelper",function(n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v){var _,y;return n.is_extension=notable.is_extension,i.show().then(function(t){return n.user=t,t&&!h.force_login?s.init_user(t):(n.show_prompt=!0,e.includes(["upgrade.html"],h.redirect)?n.errors=["Please log in with your email address before upgrading"]:void 0)},function(){var e,t,r;if(n.show_prompt=!0,0===(null!=(e=h.state)?e.indexOf("boxoauth"):void 0))return t=h.state,r=t.slice(t.indexOf("|")+1),"boxoauth"!==r&&(d.source="box",g.open_url(r)),n.box_login_step_2(h.code)}),n.$watch("show_prompt",function(){var e,t;if(!n.show_prompt)return notable.redirect_if_needed(h);if(r.$broadcast("CloseOpenDialog"),!n.no_auto_login){try{return t=angular.fromJson(h.state),e={authuser:t.authuser,user_id:t.userId,from_user_action:!1},void y(e)}catch(e){}return u.org_bias().then(function(e){return a.track("Show Authentication Dialog",{show_guest:n.show_guest,has_org_bias:e})},function(){return a.track("Show Authentication Dialog",{show_guest:n.show_guest})}),h.embed&&!n.user?n.skip_signup():notable.is_extension&&null==n.current_user?n.we_are="first_install_page":void 0}}),n.$on("user_authentication_failed",function(){return n.logout("user_authentication_failed",!0)}),n.$on("guest_login",function(){return n.show_prompt=!0}),n.show_guest="sharedfile"===h.source,n.continue_disabled=!1,n.we_are="logging_in",_=function(e){return i.show(!0).then(e,e)},n.login_or_signup=function(r){return null==r&&(r=!1),_(function(i){var u,d;return n.continue_disabled=!0,"logging_in"===n.we_are||r===!0?(c.deauthenticate(),u=l.login({email:n.email,password:n.password,migrate_authentication_token:null!=i?i.authentication_token:void 0}),u.then(function(e){return n.user=e,s.track_login(n.user),n.show_prompt=!1,n.continue_disabled=!1,m.set("login_source","email")},function(e){if(n.show_prompt=!0,n.continue_disabled=!1,!r)return n.email&&n.password?o.exists_by_email({email:n.email},function(){return null!=e[0]&&"Invalid login credentials"===e[0]&&(n.errors=["Email is correct but invalid password."]),s.track_login_error(n.errors,n.email)},function(t){return 404===t.status?(n.we_are="signing_up",n.errors=[],a.track("Signing Up",{email:n.email})):(n.errors=e,s.track_login_error(n.errors,n.email))}):(n.errors=e,s.track_login_error(n.errors,n.email))})):n.signing_up?void 0:(n.signing_up=!0,d=l.signup({name:n.name,email:n.email,md5_email:t(n.email),password:n.password},i),d.then(function(e){if(n.user=e,s.track_signup(n.user),n.show_prompt=!1,n.continue_disabled=!1,n.signing_up=!1,h.license_key)return v.apply_license_key(h.license_key)},function(t){return n.show_prompt=!0,n.continue_disabled=!1,n.signing_up=!1,e.indexOf(t,"Email has already been taken")>-1&&(n.login_or_signup(!0),n.we_are="signing_up"),n.errors=t,s.track_signup_error(n.errors,{email:n.email})}))})},n.skip_signup=function(){return null!=n.current_user?void(n.show_prompt=!1):(n.continue_disabled=!0,l.create_guest().then(function(e){return n.user=e,s.track_guest_signup(n.user),n.show_prompt=!1,n.continue_disabled=!1,m.set("login_source","email")},function(e){return n.show_prompt=!0,n.continue_disabled=!1,n.errors=["Network error, please try again"],s.track_guest_signup_error(n.errors)}))},n.forgot_password=function(){return n.continue_disabled=!0,l.process_forgot_password(n.email).then(function(){return n.errors=[],n.continue_disabled=!1,n.password_reset_sent=!0},function(e){return n.errors=e,n.continue_disabled=!1})},n.google_login_button=function(){return y({from_user_action:!0})},y=function(t){return n.google_disabled=!0,f.login(n.current_user,e.assignIn({scope:["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/classroom.courses","https://www.googleapis.com/auth/classroom.coursework.me","https://www.googleapis.com/auth/classroom.coursework.students"]},t)).then(function(e){return n.user=e,r.$broadcast("authenticated_user"),e.new_user?s.track_signup(e,"Google"):s.track_login(e,"Google"),n.show_prompt=!1,n.google_disabled=!1,m.set("login_source","google")},function(e){var t,r,i,o,s;return n.show_prompt=!0,n.google_disabled=!1,n.errors=null!=e&&null!=(r=e.data)?r.errors:void 0,(null!=(i=n.errors)?i.length:void 0)||(null!=e&&(t=null!=(o=null!=(s=e.message)?s:e.code)?o:e.statusText,"access_denied"===t&&(t="You have to click Allow in order to sign in with Google")),null==t&&(t="Login failed. Please check your internet connection and try again"),"cancelled"!==(null!=e?e.code:void 0)&&(n.errors=[t])),a.track("Google Login Failed",{current_user:n.current_user,errors:n.errors})})},n.box_login=function(){var e;return e="https://www.box.com/api/oauth2/authorize?response_type=code&client_id=z8usf9bza4b6y9y5h3g1bcm9l70kfihl&redirect_uri=",("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0)?(n.box_disabled=!0,e+=encodeURIComponent(chrome.identity.getRedirectURL("box")),chrome.identity.launchWebAuthFlow({url:e,interactive:!0},function(e){var t;return t=parseQueryString(e.slice(e.indexOf("?")+1)),n.box_login_step_2(t.code)})):(e+=encodeURIComponent("https://web.kamihq.com/web/viewer.html"),h.file?e=e+"&state=boxoauth|"+encodeURIComponent(h.file):e+="&state=boxoauth",window.location=e)},n.box_login_step_2=function(e){var t,o;return n.box_disabled=!0,t=i.login_box({authorization_code:e,migrate_authentication_token:null!=(o=n.current_user)?o.authentication_token:void 0}),t.then(function(e){return n.user=e,r.$broadcast("authenticated_user"),e.new_user?s.track_signup(e,"Box"):s.track_login(e,"Box"),n.show_prompt=!1,n.box_disabled=!1,m.set("login_source","box")},function(e){return a.track("Box Login API Network Error"),n.show_prompt=!0,n.box_disabled=!1,n.errors=e})},n.$watch("we_are",function(e,t){if(t!==e)return n.errors=[]}),n.$on("logout",function(){return n.no_auto_login=!0,n.show_prompt=!0})}])}).call(t,n(2))},function(e,t,n){n(190),ng.controller("SyncController",["$scope","Sync","PageState","$rootScope","GoogleDrive","DownloadDialog","Mixpanel","LicensesHelper","PremiumRequiredDialog","PromptFileUploadService","SettingsFactory","GoogleClassroomCourseWorkService","RecentFileManager",function(e,t,n,r,i,o,a,s,l,c,u,d,f){return e.sync_status=function(e){var n;return n=t[e].unsync_count,0===n?"All changes saved":n+" unsaved change"+(n>1?"s":"")},e.unsync_count=function(e){return t[e].unsync_count},e.last_sync=function(e){var n,r;if(n=null!=(r=t[e].last_sync)?r.fromNow():void 0,null!=n)return"Last saved "+n},e.sync_now=function(e){return t[e].sync_now()},e.syncing_status=function(e){switch(t[e].syncing_status){case"syncing":return"Saving...";case"error":return"Save Failed";default:return"Save Now"}},e.$on("settings-updated",function(){return e.google_drive_autosync_enabled=u.get("google_drive_autosync",!0)&&s.has_feature("google_auto_sync")}),e.toggle_drive_auto_sync=function(){return s.has_feature("google_auto_sync")?(e.google_drive_autosync_enabled=!e.google_drive_autosync_enabled,u.set("google_drive_autosync",e.google_drive_autosync_enabled,!0),a.track("Toggle Google Drive Autosync",e.google_drive_autosync_enabled)):l.open("google_auto_sync")},e.drive_auto_sync_enabled=function(){return t[type].auto_sync_enabled()},e.service_enabled=function(e){return t[e].enabled()},e.gdrive_upload_text=function(){return e.should_upload_as_copy()?"Create your own copy":"Upload"},e.uploading=!1,e.upload=function(t){return e.uploading=!0,a.track("Sync Menu Upload",{dest:t}),e.should_upload_as_copy()?i.create_drive_copy(e.current_user).finally(function(){return e.uploading=!1}):c.open_and_upload(),e.toggle_dropdown(null)},e.$on("uploaded_to_drive",function(){return e.uploading=!1}),e.should_upload_as_copy=function(){var e,t;return"googledrive"===n.source||"google"===(null!=(e=n.document)?e.copy_type:void 0)||"owner"!==(null!=(t=n.document)?t.permissions:void 0)},e.show_export=function(){return a.track("Open Download Dialog",{from:"advanced_export_sync_dropdown"}),o.open(e.current_user),e.toggle_dropdown(null)},e.download=function(){return a.track("Open Download Dialog",{from:"download_sync_dropdown"}),o.open(e.current_user,{action:"export",dest:"local",type:"annotation"}),e.toggle_dropdown(null)},e.open_drive_folder=function(){var e,r,o,s,l;return i.open_folder(null!=(e=null!=(r=t.drive.folder)?r.id:void 0)?e:n.parent_id,null!=(o=null!=(s=t.drive.file)?s.id:void 0)?o:null!=(l=n.document)?l.document_identifier:void 0),
a.track("Google Drive Open Folder")},e.get_drive_folder=function(){var e,n;return(null!=(e=t.drive.folder)?e.title:void 0)||(null!=(n=t.drive.folder)?n.name:void 0)||"My Drive"},e.move_drive_folder=function(){return t.drive.move_drive_folder()},e.classroom_coursework=d,e.$on("document_init",function(){if(t.init(),!notable.is_embed)return e.classroom_coursework.lookup_coursework()}),e.$on("upload_to_google_drive_completed",function(e,r){return t.init(),t.drive.sync_now(),r.old_document_identifier&&f.remove_by_document_identifier(r.old_document_identifier),f.add({document_identifier:n.document.document_identifier,source:n.source,google_user_id:n.google_user_id,parent_id:n.parent_id,filename:n.filename,document_name:n.document_name(),file_url:n.file_url})}),e.classroom_button_disabled=function(){return e.classroom_coursework.status.progress}}])},function(e,t,n){(function(e){ng.controller("TooltipController",["$scope","TooltipScope","AnnotationColors","CommentsHelper","SVGHelper","Comment","$timeout",function(t,n,r,i,o,a,s){var l,c;n.$on("render-tooltip",function(e,n){return t.$comment_scope=n,t.commentObj=n.commentObj,t.tick=!1,t.$digest()}),c=function(){var e,n;return e=null!=(n=t.commentObj)?n.content:void 0,null!=e&&(e.indexOf("<polyline")>-1||e.indexOf("<line")>-1)},t.colors=r.colors(),t.$on("annotation_colors_updated",function(){return t.colors=r.colors()}),t.get_color=function(e){return t.colors[e]},t.line_styles=function(){return c()?r.line_styles.concat(r.marker_styles):r.line_styles},t.is_highlight=function(){return i.is_highlight(t.commentObj)},t.can_copy=function(){return i.can_copy(t.commentObj)},t.can_edit=function(){var e;return null!=(e=t.$comment_scope)?e.can_edit():void 0},t.can_move=function(){return i.can_move(t.commentObj)},t.has_color=function(){return i.has_color(t.commentObj)},t.has_size=function(){return i.has_size(t.commentObj)},t.has_opacity=function(){return i.has_opacity(t.commentObj)},t.has_line=function(){return i.is_drawing(t.commentObj)&&"fill"!==t.commentObj.referring_to.font_size},t.has_fill_color=function(){return i.has_fill_color(t.commentObj)},t.has_rotate=function(){return i.has_rotate(t.commentObj)},t.convert_to_comment=function(){return t.$comment_scope.convert_to_comment(),n.$broadcast("hide-tooltip")},t.font_sizes=function(){var e,n;return"Drawing"===(null!=(n=t.commentObj)?n.annotation_type:void 0)?(e=t.commentObj.content,c()?r.stroke_sizes():r.shape_sizes()):r.font_sizes()},t.opacity_values=function(){return r.opacity_values()},t.to_percentage=notable.decimal_to_percent,t.destroy=function(){return a.remove_and_upsert_comment(t.commentObj),n.$broadcast("hide-tooltip")},t.dash_array=function(e){return r.dash_array(e)},l=function(){var n;switch(n=t.commentObj,null!=n?n.annotation_type:void 0){case"Text":return e("#text-"+n.id);case"Autograph":return e(".autographBody#comment-"+n.id);case"Drawing":return o.get_element(n);case"Equation":return e(".equationBody#comment-"+n.id);default:return e()}},t.is_selected=function(e){var n;if(null!=t.commentObj)switch(n=l(),e){case"normal":return!n.attr("stroke-dasharray");case"dash":return n.attr("stroke-dasharray");case"arrow-start":return n.attr("marker-start");case"arrow-end":return n.attr("marker-end")}},t.select_line_style=function(e){var n;if(null!=t.commentObj){switch(n=l(),e){case"normal":n.removeAttr("stroke-dasharray");break;case"dash":n.attr("stroke-dasharray",r.dash_array(e));break;case"arrow-start":t.is_selected(e)?n.removeAttr("marker-start"):(n.attr("marker-start","url(#ArrowStart)"),o.ensure_markers(n));break;case"arrow-end":t.is_selected(e)?n.removeAttr("marker-end"):(n.attr("marker-end","url(#ArrowEnd)"),o.ensure_markers(n))}o.update_content(t.commentObj)}},t.marker_start=function(e){switch(e){case"arrow-start":return t.line_style===e?"url(#TooltipArrowStartHighlight)":"url(#TooltipArrowStart)"}},t.marker_end=function(e){switch(e){case"arrow-end":return t.line_style===e?"url(#TooltipArrowEndHighlight)":"url(#TooltipArrowEnd)"}},t.hover=function(e){return t.line_style=e},t.hoverOut=function(){return t.line_style=null},t.set_referring_to=function(e,n){return t.commentObj.referring_to[e]=n,a.upsert(t.commentObj)},t.property_updated=function(e){if("font_size"===e||"opacity"===e)return a.upsert(t.commentObj)},t.rotate_left=function(){var e,n,r,i,o,a,s,c,u,d,f,h;return u=t.commentObj.referring_to,d=null!=(r=parseInt(u.rotation))?r:0,n=d,d-=90,d=(d+=360)%360,e=l(),c=notable.coordinates_for_centered_rotation(n,d,u.x,u.y,null!=(i=null!=(o=e.outerWidth(!0))?o:u.width)?i:0,null!=(a=null!=(s=e.outerHeight(!0))?s:u.height)?a:0),f=c[0],h=c[1],null!=f&&(u.x=f),null!=h&&(u.y=h),t.set_referring_to("rotation",d)},t.after_copy=function(){return notable.apply(t,function(){return t.tick=!0}),s(function(){return n.$broadcast("hide-tooltip")},500)}}])}).call(t,n(1))},function(e,t,n){(function(e){var t;t=n(24),ng.controller("TrialPremiumController",["$scope","LicenseAPI","LicensesHelper","Mixpanel","User","ngDialog","$rootScope",function(n,r,i,o,a,s,l){var c,u;return l.$on("features_updated",function(){var e,r,o;if(n.trial_license=i.get_trial_license(),null!=(o=n.trial_license)?o.active:void 0)return null!=n.trial_license.valid_to?(r=t(n.trial_license.valid_to),e=r.diff(t(),"days"),n.days_until_trial_ends=function(){switch(e){case 0:case 1:return r.fromNow();default:return"in "+e+" days"}}()):n.days_until_trial_ends="never. Aren't you lucky"}),u=function(){return e.blockUI({message:'<h1 class="processing">Processing...</h1>'})},c=function(){return e.unblockUI()},n.start_trial=function(){return n.user||(window.location="viewer.html?redirect=upgrade.html"),n.premium_trial_error=!1,r.add_social_license({}).$promise.then(function(e){return n.trial_license=e,a.show(!0),o.track("Started Premium Trial"),s.open({template:"trial_success_dialog"})}).catch(function(e){var t;return n.premium_trial_error=!0,e=null!=(t=e.data)?t.errors:void 0,"Already Redeemed"===(null!=e?e[0]:void 0)?n.showErrors(["You've already redeemed the trial"]):n.showErrors(e),o.track("Premium Trial Error",{error:e})}).finally(function(){return e.unblockUI()})},n.start_teacher_trial=function(){return n.user||(window.location="viewer.html?redirect=upgrade.html"),n.premium_trial_error=!1,r.add_teacher_trial_license({}).$promise.then(function(e){return n.trial_license=e,a.show(!0),o.track("Started Teacher Trial"),s.open({template:"teacher_trial_success_dialog"})}).catch(function(e){var t;return n.premium_trial_error=!0,e=null!=(t=e.data)?t.errors:void 0,"Already Redeemed"===(null!=e?e[0]:void 0)?n.showErrors(["You've already redeemed the trial"]):n.showErrors(e),o.track("Teacher Trial Error",{error:e})}).finally(function(){return e.unblockUI()})}}])}).call(t,n(1))},function(e,t,n){(function(e,t){var r;r=n(11),ng.controller("TTSController",["$scope","DirectiveHelper","$q",function(n,i,o){var a,s,l,c,u,d,f,h,p,g,m,v;return h="tts-highlight-"+Math.floor(1e7*Math.random()),f=e.once(function(){return notable.get_highlighter(h,"textContent")}),n.highlights=[],m=null,a=null,v=!1,p=null,g=0,s=function(){var e;try{return f().removeAllHighlights(),r.getSelection().removeAllRanges()}catch(t){return void(e=t)}},c=function(e,n,r){var a,s,l,c,u,d,p,g,m,v,_,y,b,w;try{f().highlightSelection(h,{containerElementId:"textLayer"+e,selection:n})}catch(e){s=e}for(c=t("."+h),m=t("#textLayer"+e),u=[],_={width:m.innerWidth(),height:m.innerHeight()},v=t("#pageContainer"+e).offset(),d=0,g=c.length;d<g;d++)if(l=c[d],l=t(l),!l.data("no-perceived-width")){switch(y=i.pos_relative_to_container(l,v),w=l.closest("[data-transform-scale-x]").data("transform-scale-x"),w||(w=1),Math.abs(PDFView.pageRotation)){case 90:b=notable.reset_scale(_.width-l.height())-y.left,p=y.top;break;case 270:b=y.left,p=notable.reset_scale(_.height-l.width())-y.top;break;case 180:b=notable.reset_scale(_.height-l.height())-y.top,p=notable.reset_scale(_.width-l.width())-y.left;break;default:b=y.top,p=y.left}u.push({x:p,y:b,text:l.text(),height:notable.reset_scale(l.height()),width:notable.reset_scale(l.outerWidth())*w})}return r?(a=o.defer(),i.coalesce_worker.coalesce(u,a.resolve),a.promise):o.when(u)},l=function(e,n,r,a){var l,u,d;return null==r.focusNode?o.reject():(l=t(r.focusNode.parentElement),u=i.page_no(l),d=c(u,r,a).then(function(t){return{id:e,referring_to:{page_no:u,highlighted_positions:t,user_action:"highlight",color:n},annotation_type:"tts"}}),s(),d)},u=function(e,t){var n,i,o,s,l,c,u,d,f,h,m;try{if(!p){for(h=0,l=0,d=e.length;l<d&&(f=e[l],o=h+f.toString().length,!(t<o));l++)h=o;t-=h,p=f.cloneRange(),p.collapse(!0)}for(p.moveStart("character",t-g),g=t,f=p.cloneRange(),f.expand("character"),n=f.toString(),s=c=1;c<=5&&(!/^[^\s\(\)\\\/\[\]\{\}\-\?!@#$%^&*_+=;:'",.<>|]/g.test(n)||/^%E2%80%8B/g.test(encodeURIComponent(n)));s=++c)f.moveStart("character",-1),f.moveEnd("character",-1),f.expand("character"),n=f.toString();for(f.expand("word"),m=f.toString(),s=u=1;u<=5&&(!/[^\s\(\)\\\/\[\]\{\}\-\?!@#$%^&*_+=;:'",.<>|]$/g.test(m)||/%E2%80%8B&/g.test(encodeURIComponent(m)));s=++u)f.moveEnd("character",-1),m=f.toString();return a=a||r.getSelection(),a.setSingleRange(f),a}catch(e){return void(i=e)}},n.$on("TTSSpeakingStart",function(t){return v=!0,a=null,p=null,g=0,m=e.map(r.getSelection().saveRanges().ranges),l("tts-selction","rgba(100, 110, 255, 0.7)",r.getSelection(),!0).then(function(e){return n.highlights[0]=e})}),n.$on("TTSSpeakingStop",function(){return v=!1,a=null,m=null,g=0,p=null,n.highlights=[]}),d=function(e){var t;return t=u(m,e),l("tts-word-"+e,"rgba(100, 255, 110, 1)",t,!1).then(function(e){return n.highlights[1]=e})},n.$on("TTSSpeakingEvent",function(e,t){if(v)return"word"===t.name?d(t.charIndex):void 0})}])}).call(t,n(2),n(1))},function(e,t,n){(function(e){ng.controller("TTSSettingsController",["$scope","tts","LicensesHelper",function(t,n,r){var i,o,a,s;if(t.enabled=!1,n.isEnabled())return t.enabled=r.has_feature("tts"),t.settings=n.getSettings(),a=e.debounce(function(){return n.setSettings(t.settings)},300),s=function(n){return e.assign(t.settings,n),a()},t.voice={name:null!=(i=t.settings.speechSynthesisVoice)?i:"Default Voice"},t.setVoice=function(e){return t.voice=e},t.voices=[{name:"Default Voice"}],n.getVoices().then(function(n){return"Default Voice"===t.voice.name&&n.length>0&&t.setVoice(n[0]),t.voices=e.union(t.voices,n)}),t.$watch("voice",function(e){var t;return t=e.name,"Default Voice"===t&&(t=null),s({speechSynthesisVoice:t})}),t.reset_rate=function(){return t.rate=1},t.rate=null!=(o=t.settings.rate)?o:1,t.$watch("rate",function(e){return s({rate:parseFloat(e)})})}])}).call(t,n(2))},function(e,t){ng.controller("UninstallFeedbackController",["$scope","Mixpanel","URLParams",function(e,t,n){var r;return t.override_user_id=n.user_id,r={},n.user_id&&(r=angular.extend(r,{user_id:n.user_id})),n.email&&(r=angular.extend(r,{email:n.email})),t.track("Uninstalled Extension",r),e.user_id=n.user_id,e.email=n.email}])},function(e,t,n){var r;r=n(513),n(185),ng.factory("AddPagesDialog",["$rootScope","DocumentManager","ProcessDocumentService","ngDialog","PageState","LicensesHelper","PremiumRequiredDialog","Mixpanel",function(e,t,n,i,o,a,s,l){var c;return c=function(e){var t;if("open screen"!==e){if(!o.has_permission("can_edit"))return;if(!a.has_feature("add_new_pages"))return s.open("add_new_pages")}return t=function(){return i.open({data:{from:e},template:r,controller:"AddPagesController",overlay:!1,className:"add-pages-dialog",showClose:!1,appendTo:"#outerContainer"})},"open screen"===e?t().closePromise:n.check_file("Add Pages",t)},{open:c}}]),ng.controller("AddPagesController",["$scope","GoogleDrive","ProcessDocumentService","PageState","PDFProcessingAPI","OAuthManager","Mixpanel",function(e,t,r,i,o,a,s){return e.data=e.ngDialogData,e.number_of_pages=1,e.page_type="blank",e.status="normal",e.error_msg=null,e.done=function(){var n,o,a,s,l,c,u,d,f,h;if("open screen"===e.data.from||"processing"===e.status)return e.closeThisDialog(e.page_type);if(e.error_msg=null,parseInt(e.number_of_pages)>100)return e.status="error",void(e.error_msg="- A maximum of 100 pages can be added at one time!");for(d=[],o=a=1,f=PDFViewerApplication.pdfDocument.numPages;1<=f?a<=f:a>=f;o=1<=f?++a:--a)d.push({document_identifier:i.document.document_identifier,page_no:o});for(o=s=1,h=e.number_of_pages;1<=h?s<=h:s>=h;o=1<=h?++s:--s)d.push({document_identifier:e.page_type,page_no:1});return n=function(t){return t[e.page_type]={template:e.page_type},t},u=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push({pages:d,destination:t});return i},c=function(){return e.status="normal",t.load_document({action:"open",ids:[i.document.document_identifier],userId:i.google_user_id}),e.closeThisDialog()},l=function(t){return e.status="error",e.error_msg=t},e.status="processing",r.start_processing("splitmerge",c,l,n,u)},e.get_preview=function(){switch(e.page_type){case"blank":return n(216);case"lined":return n(218);case"grid":return n(217);case"music":return n(219);default:return null}}}])},function(e,t,n){(function(e){var t;t=n(521),n(195),ng.factory("AutographManagementDialog",["ngDialog",function(e){var n;return n=function(){return e.open({template:t,controller:"AutographManagementController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:n}}]),ng.controller("AutographManagementController",["$scope","Autograph","AnnotationState","Mixpanel","User","AutographAPI","$timeout","Pusher","Jimp","SettingsFactory","$q","DirectiveHelper",function(t,n,r,i,o,a,s,l,c,u,d,f){var h,p,g,m,v;return t.state="main",p=function(r){return null==r&&(r=!1),n.all().then(function(i){if(t.autographs=e.sortBy(i,"id"),e.each(i,function(e){return n.get_autograph_url(e).then(function(n){return t.thumb_urls[e.id]=n})}),r)return t.select(t.autographs.length-1)})},t.thumb_urls={},p(),t.error=null,g=function(e){var t,n;return t=d.defer(),n=new FileReader,n.addEventListener("loadend",function(e){var r;return r=n.result,PDFJS.getDocument(r).then(function(e){return e.getPage(1).then(function(e){var n,r,i,o,a;return n=2,o=e.rotate,a=e.getViewport(n,o),r=document.createElement("canvas"),i=r.getContext("2d"),r.width=Math.floor(a.width),r.height=Math.floor(a.height),i.save(),i.fillStyle="rgb(255, 255, 255)",i.fillRect(0,0,r.width,r.height),i.restore(),e.render({canvasContext:i,viewport:a,intent:"print"}).then(function(){return r.toBlob(function(e){return t.resolve(e)},"image/png")})})}).catch(function(e){return t.reject(e)})}),n.readAsArrayBuffer(e),t.promise},t.submit=function(e){var n,r,o;if(t.error=null,t.enhance_error=null,t.processing=!1,t.enhance=!1,t.contrast=100,t.state="enhance",n=function(e){return t.original_file=e,t.original_file_url=PDFJS.createObjectURL(e),t.current_file_url=t.original_file_url,c.enhance(t.original_file).then(function(e){return t.enhanced_file=e,t.enhanced_file_url=PDFJS.createObjectURL(e),t.update_enhance()}).catch(function(n){return i.track("Autograph Error",{type:"enhance",error:n}),t.upload(e)}).finally(function(){return t.processing=!1})},e)return r=15728640,e.size>r?(o=notable.bytes_to_string(e.size),void(t.error="Error: File size "+o+" exceeds maximum file size (15MB)")):"application/pdf"===e.type?g(e).then(function(e){return n(e)}).catch(function(e){return i.track("Autograph Error",{type:"render_pdf",error:e}),t.error="Error: Could not render PDF"}):n(e)},t.update_enhance=function(){return t.enhance?t.enhance_error?(t.error=t.enhance_error,t.enhance=!1):t.enhanced_file?t.current_file_url=t.enhanced_file_url:t.processing=!0:t.current_file_url=t.original_file_url},t.rotate=function(){return i.track("Autograph Rotate"),t.processing=!0,c.rotate(t.original_file,90).then(function(e){return t.original_file=e,t.original_file_url=PDFJS.createObjectURL(e)}).then(function(){if(t.enhanced_file)return c.rotate(t.enhanced_file,90).then(function(e){return t.enhanced_file=e,t.enhanced_file_url=PDFJS.createObjectURL(e),t.update_enhance()})}).catch(function(e){return t.error=e,i.track("Autograph Error",{type:"rotate",error:e})}).finally(function(){return t.processing=!1})},t.upload_enhance=function(){var e;return t.enhance?(e=t.enhanced_file,i.track("Autograph Upload",{enhanced:!0})):(e=t.original_file,i.track("Autograph Upload",{enhanced:!1})),t.upload(e)},t.upload=function(e){if(e)return t.error=null,t.state="uploading",i.track("Upload Autograph"),v(e).catch(function(t){return i.track("Autograph Error",{type:"autocrop",error:t}),v(e)})},v=function(e){return n.create(e).then(function(){return p(!0),t.state="main"},function(e,n){return t.error="Error: Invalid file.\n Please make sure you have selected a valid image or PDF file",t.state="main"},function(e){return t.upload_percentage=Math.round(e.loaded/e.total*100)})},t.insert=function(e){var o;return null==e&&(e=t.selected),i.track("Select Autograph"),o=t.autographs[e],n.notify_used(o),r.set_annotation_mode("autograph",!1),f.reject_input("clear"),r.extra_annotation_params={autograph:o,autograph_id:o.id,width:100*(o.aspect_ratio||1),height:100},t.closeThisDialog()},t.delete_autograph=function(e){return i.track("Delete Autograph"),n.delete(e).$promise.then(p)},t.draw=function(){return i.track("Autograph Draw"),t.signaturePad.clear(),t.error=null,t.hide_help=!1,t.state="draw"},t.signaturePad={},t.upload_drawing=function(){return i.track("Autograph Draw Upload"),t.signaturePad.getBlob().then(t.upload)},t.phone=function(){return t.show_email_message=!1,i.track("Autograph Phone"),t.error=null,t.state="phone",a.get_link().$promise.then(function(e){return t.mobile_link=e.url})},t.mobile_link="Processing...",t.copy_text="Copy",m=e.debounce(function(){return t.$apply(function(){return t.copy_text="Copy"})},2e3),t.after_copy=function(){return i.track("Autograph Phone Copied Link"),t.copy_text="Copied",m()},o.show().then(function(e){var n;return t.user_email=e.email,n=l.channel(e.channel),n.bind("autograph-created",h),t.$on("$destroy",function(){return n.unbind("autograph-created",h)})}),t.email_disabled=!1,t.email_text="Email me the link",t.send_email=function(){return t.show_email_message=!0,i.track("Autograph Phone Send Email"),a.send_email({email:t.user_email}),t.email_disabled=!0,t.email_text="Email sent",s(function(){return t.email_disabled=!1,t.email_text="Email me the link"},5e3)},h=function(){return t.$apply(function(){return p(!0),t.state="main"})},t.cancel=function(){return t.state="main",t.error=null},t.selected=u.get("autograph_last_selected_index",0),t.select=function(e){return t.selected=e,u.set("autograph_last_selected_index",e,!0)},t.draw_started=function(){return t.hide_help=!0}}])}).call(t,n(2))},function(e,t,n){var r;r=n(523),n(196),ng.factory("ClassroomCourseDialog",["ngDialog",function(e){var t;return t=function(t){return e.open({template:r,controller:"ClassroomCourseDialogController",overlay:!1,className:"",showClose:!0,appendTo:"#outerContainer",data:{course:t}})},{open:t}}]),ng.controller("ClassroomCourseDialogController",["$scope","GoogleAuth","OAuthManager","SettingsFactory",function(e,t,n,r){var i,o,a;return i="https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.coursework.students",o=e.ngDialogData,e.course=o.course,a=null,e.load_course_work=function(){var o;return o=r.get("google_classroom_google_user_id",null),t.authorize_if_needed({scope:i,user_id:o,message:"Click to allow Kami to access your courses on Google Classroom",from_user_action:!0}).then(function(t){return a=n.google(o),a.get("https://classroom.googleapis.com/v1/courses/"+e.course.id+"/courseWork").then(function(t){return e.course_work_list=t.courseWork})})},e.load_course_work()}])},function(e,t,n){var r;r=n(525),ng.factory("ColorPaletteDialog",["ngDialog",function(e){var t;return t=function(){return e.open({template:r,controller:"ColorPaletteController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("ColorPaletteController",["$scope","AnnotationColors","$rootScope","AnnotationState",function(e,t,n,r){return e.reset_default=function(){return e.all_colors=t.all_colors,e.palette_colors=t.colors(),e.selected_palette_color_index=e.palette_colors.indexOf(r.annotation_color_value[r.annotation_mode])},e.reset_default(),e.select_palette_color=function(t){return e.selected_palette_color_index=t},e.set_as_color=function(t){return e.palette_colors[e.selected_palette_color_index]=t},e.save=function(){return t.set_colors(e.palette_colors),e.closeThisDialog()},e.close=function(){return e.closeThisDialog()}}])},function(e,t,n){(function(e,t){var r;r=n(526),n(197),ng.factory("CreateAssignmentDialog",["ngDialog","LicensesHelper","PremiumRequiredDialog",function(e,t,n){var i;return i=function(){return t.has_feature("google_classroom_integration")?e.open({template:r,controller:"CreateAssignmentDialogController",overlay:!1,className:"",showClose:!0,appendTo:"#outerContainer"}):n.open("google-classroom-integration")},{open:i}}]),ng.controller("CreateAssignmentDialogController",["$scope","GoogleDrive","User","PageState","Mixpanel","GoogleAuth","OAuthManager","KamiClassroomAPI","DownloadDialog","SettingsFactory","$q","$timeout","GoogleDriveUploadService","URLParams","PDFProcessingAPI","ngDialog","GoogleDriveManualSyncService",function(n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,_){var y,b,w,x;return y="https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.rosters.readonly",a.track("Open Dialog CreateAssignmentDialog"),n.now_time=moment().format("YYYY-MM-DD[T]HH:mm"),n.state="loading",n.publish_states=[{id:"PUBLISHED",label:"Published"},{id:"DRAFT",label:"Draft"}],n.assignment={materials:[],courses:[],students:[],state:[{id:"PUBLISHED"}]},n.course_selector_settings={displayProp:"name",showCheckAll:!1,showUncheckAll:!1,showEnableSearchButton:!1,smartButtonMaxItems:3},n.student_selector_settings={displayProp:"name",showCheckAll:!0,showUncheckAll:!0,showEnableSearchButton:!1,selectedToTop:!0,smartButtonTextProvider:function(e){return function(e){return 1===e.length?"1 Student":e.length+" Students"}}(this)},n.student_selector_text={selectionCount:"Students",checkAll:"Select All",uncheckAll:"Deselect All",buttonDefaultText:"All Students",dynamicButtonTextSuffix:"Students"},n.publish_selector_settings={showCheckAll:!1,showUncheckAll:!1,showEnableSearchButton:!1,selectedToTop:!1,selectionLimit:1,smartButtonMaxItems:2,idProperty:"id"},w=null,b=null,n.find_courses=function(){var t,r;return b=d.get("primary_google_user_id",null),r=null,b?(t=[],g.class_alternate_id&&t.push(c.course_search({alternate_id:g.class_alternate_id}).$promise.then(function(e){return r=e.classroom_course_id},function(){return f.resolve()})),t.push(s.authorize_if_needed({scope:y,user_id:b,message:"Click to allow Kami to access your courses on Google Classroom",show_close:!0}).then(function(e){return w=l.google(b),w.get("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE").then(function(e){return n.courses=e.courses})})),f.all(t).then(function(){var t;return r&&(t=e.find(n.courses,function(e){return e.id===r}))&&(n.assignment.courses=[t]),n.state="create_assignment"})):n.state="link_account"},n.find_courses(),n.choose_link_account=function(){return a.track("CreateAssignmentDialog Link Account Start"),s.authorize_now({scope:y,message:"Click to allow Kami to access your courses on Google Classroom",from_user_action:!0,force:!0,offline:!0}).then(function(e){return n.state="loading",w=l.google(),w.get_user().then(function(e){return d.set("primary_google_user_id",e,!0),n.find_courses(),a.track("CreateAssignmentDialog Link Account Succeeded")})})},function(){var e;if(o.document)return e="google"===o.document.copy_type&&"googledrive"===o.source&&o.google_user_id===b,e?(n.assignment.materials.push({driveFile:{id:o.document.document_identifier},shareMode:"STUDENT_COPY",title:o.document.name,sync_drive_file:!0}),a.track("CreateAssignmentDialog File Attached",{using:"auto_attached_open_file",valid_drive_file:!0,assignment:n.assignment})):(n.assignment.materials.push({upload_opened_file:!0,shareMode:"STUDENT_COPY",source:o.source,title:o.document.name}),a.track("CreateAssignmentDialog File Attached",{using:"auto_attached_open_file",valid_drive_file:!1,assignment:n.assignment}))}(),n.remove_material=function(t){return e.remove(n.assignment.materials,function(e){return e===t})},n.assign_button_disabled=function(){var e,t,r,i,o;return n.assign_promise||!((null!=(e=n.assignment)&&null!=(t=e.courses)?t.length:void 0)>0&&(null!=(r=n.assignment)&&null!=(i=r.title)?i.length:void 0)>1)||(null!=(o=n.assignment.materials)?o.length:void 0)<1},n.$watch("assignment.courses",function(t){var r,i;return 1===t.length?(r=t[0].id,n.students=[{name:"Loading...",disabled:!0}],i=function(t,n){return null==n&&(n=[]),w.get("https://classroom.googleapis.com/v1/courses/"+r+"/students?pageSize=50"+(t?"&pageToken="+t:"")).then(function(t){return t.nextPageToken?i(t.nextPageToken,e.concat(n,t.students)):e.concat(n,t.students)})},i(null).then(function(t){return function(t){if(1===n.assignment.courses.length&&n.assignment.courses[0].id===r)return n.students=e.map(t,function(e){return{id:e.profile.id,name:e.profile.name.fullName}})}}(this))):(n.students=null,n.assignment.students=[])},!0),n.$watch("assignment.state",function(e){if(0===e.length&&(n.assignment.state=[n.publish_states[0]]),"PUBLISHED"===n.assignment.state[0].id)return n.assignment.scheduled_time=null},!0),n.$watch("assignment.scheduled_time",function(e){if(e)return n.assignment.state=[n.publish_states[1]]},!0),x=function(e,t,n){var r;return r={folder:{id:t},user_id:n},a.track("CreateAssignmentDialog Begin Processing Material",{material:e,step:"Upload to Drive"}),p.upload(e.title,e.upload_blob,r).then(function(t){return e.upload_blob=null,e.progress_percent=null,e.driveFile={id:t.id},a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Upload to Drive"})},null,function(t){return e.progress_percent=Math.round(t.loaded/t.total*100)})},n.assign=function(){var o,l;return a.track("CreateAssignmentDialog Assign Start",{assignment:n.assignment}),o=s.ensure_serverside_auth({user_id:b,scope:y}),l=o.then(function(o){return function(){return i.show().then(function(i){return r.create_folder("Kami Assignments",b).then(function(r){return f.all(e.map(n.assignment.materials,function(e){var n;return e.error=null,e.upload_opened_file?(a.track("CreateAssignmentDialog Begin Processing Material",{material:e,step:"Upload Opened File"}),n=f.defer(),u.open(i,{action:"export",dest:"drive",type:"annotation",folder:{id:r},google_user_id:b,callback:function(t,r){return r.close(),e.upload_opened_file=!1,e.driveFile={id:t.google_file_upload_id},a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Upload Opened File"}),n.resolve()}}),n.promise):e.export_google_doc_link?(a.track("CreateAssignmentDialog Begin Processing Material",{material:e,step:"Export Google Doc"}),n=f.defer(),t.ajax(e.export_google_doc_link,{headers:{Authorization:"Bearer "+w.get_token()},xhrFields:{responseType:"blob"},success:function(t,i,o){return e.upload_blob=t,x(e,r,b).then(function(){return a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Export Google Doc"}),n.resolve()},function(e){return n.reject(e)})},error:function(e,t,r){return n.reject(t,r)}}),n.promise):e.upload_blob?x(e,r,b):e.sync_drive_file?(a.track("CreateAssignmentDialog Begin Processing Material",{material:e,step:"Sync Drive File"}),_.sync({document_identifier:e.driveFile.id,google_user_id:b,file_name:e.title,message:"Kami needs permission to create the files for this assignment"}).then(function(t){return a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Sync Drive File"})}).catch(function(t){return 404===t.status?a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Sync Drive File",info:"Silent sync failure (file not opened)"}):(a.track("CreateAssignmentDialog Failed Processing Material",{material:e,step:"Sync Drive File",error:t}),f.reject(t))})):e.copy_drive_file?(a.track("CreateAssignmentDialog Begin Processing Material",{material:e,step:"Copy Drive File"}),w.post("https://www.googleapis.com/drive/v2/files/"+e.driveFile.id+"/copy?supportsTeamDrives=true",{parents:[{id:r}]}).then(function(t){return e.driveFile.id=t.id,a.track("CreateAssignmentDialog Finish Processing Material",{material:e,step:"Copy Drive File"})})):f.resolve()})).then(function(){return f.all(e.map(n.assignment.materials,function(e){var t;return e.needs_conversion?(t=f.defer(),m.create({job_type:"convert",documents:{file:{filename:e.title,gdrive_file:{id:e.driveFile.id,google_access_token:w.get_auth_response().access_token}}},output_format:"pdf",output_documents:[{destination:{service:"google-drive",parent_id:r,final_file_name:e.title+".pdf",google_access_token:w.get_auth_response().access_token}}]}).$promise.then(function(n){var r;return(r=function(){return m.show({id:n.id}).$promise.then(function(i){switch(i.status){case"done":return e.driveFile.id=i.output_documents[0].destination.google_file_id,t.resolve();case"error":return e.error="Conversion Failed. This file may be corrupted or not in a supported format.",t.reject({type:"conversion",status:status,error:i.error_type,error_message:i.user_message,conversion_job_id:n.id,material:e});default:return h(r,2e3)}},function(){return h(r,2e3)})})()},function(n){return e.error="Conversion Failed",t.reject({type:"conversion",status:status,error:error,conversion_job_id:n.id,material:e})}),t.promise):f.resolve()}))})})})}}(this)),n.assign_promise=l.then(function(){return f.all(e.map(n.assignment.courses,function(t){var r,i,o,s,l;return n.assignment.students.length>0&&(s={studentIds:e.map(n.assignment.students,function(e){return e.id})}),n.assignment.due_date&&(r=moment(n.assignment.due_date).utcOffset(0),i={month:r.month()+1,day:r.date(),year:r.year()},o={hours:r.hour(),minutes:r.minutes()}),n.assignment.scheduled_time&&(l=moment(n.assignment.scheduled_time).toISOString()),w.post("https://classroom.googleapis.com/v1/courses/"+t.id+"/courseWork",{title:n.assignment.title,description:n.assignment.description,workType:"ASSIGNMENT",state:n.assignment.state[0].id,maxPoints:100,materials:e.map(n.assignment.materials,function(t){return{driveFile:e.pick(t,"shareMode","driveFile")}}),assigneeMode:n.assignment.students.length>0?"INDIVIDUAL_STUDENTS":"ALL_STUDENTS",individualStudentsOptions:s,dueDate:i,dueTime:o,scheduledTime:l}).then(function(e){return n.coursework_response=e,c.register_coursework({course_id:t.id,course_work_id:e.id}).$promise.then(function(t){return a.track("CreateAssignmentDialog Assign Succeeded",{assignment:n.assignment,coursework_response:e}),n.state="created"})})}))}).catch(function(e){return"conversion"===e.type?n.state="create_assignment":n.state="error",a.track("CreateAssignmentDialog Assign Failed",{assignment:n.assignment,error:e,fatal:!0})}).finally(function(){return n.assign_promise=null})},n.try_again=function(){return n.state="create_assignment",a.track("CreateAssignmentDialog Try Again Button Clicked",{assignment:n.assignment})},n.open_coursework_classroom=function(){return n.coursework_response.alternateLink?window.open(n.coursework_response.alternateLink):window.open(n.assignment.courses[0].alternateLink)},n.open_gdrive_picker=function(){return r.pick_file(b).then(function(t){var r,i;return r=t.docs[0],i={driveFile:{id:r.id},shareMode:"STUDENT_COPY",title:r.name},w.get("me/files",{id:i.driveFile.id,fields:"id,mimeType,title,exportLinks,capabilities,owners"}).then(function(t){var o,s;if(e.startsWith(r.mimeType,"application/vnd.google-apps"))i.export_google_doc_link=t.exportLinks["application/pdf"];else if("application/pdf"!==r.mimeType)i.needs_conversion=!0;else if(t.capabilities.canEdit&&t.capabilities.canShare)i.sync_drive_file=!0;else{
if(!t.capabilities.canCopy)return v.open({template:"<h4><center>File cannot be shared</center></h4> <p>This file cannot be attached to this Assignment because you do not have permission to share it. Please contact the owner ("+(null!=(o=t.owners)&&null!=(s=o[0])?s.displayName:void 0)+") and ask them to allow you to share this document.</p> <div class='ngdialog-buttons'> <button type='button' class='ngdialog-button ngdialog-button-primary' ng-click='closeThisDialog()''>OK</button> </div>",plain:!0}),void a.track("CreateAssignmentDialog File Attachment Failed",{using:"google_drive_picker",material:i,file_info:t,reason:"No Permissions"});i.copy_drive_file=!0}return n.assignment.materials.push(i),a.track("CreateAssignmentDialog File Attached",{using:"google_drive_picker",material:i})})})},n.attach_local_file=function(t){return e.each(t,function(e){var t,r;return t=!1,r=new FileReader,r.onload=function(){var t,i;return t=function(t){var r;return r={upload_blob:e,shareMode:"STUDENT_COPY",title:e.name,needs_conversion:t},n.assignment.materials.push(r),a.track("CreateAssignmentDialog File Attached",{using:"local_file_picker",material:r})},i=PDFJS.getDocument(r.result),i.then(function(){return i.destroy(),t(!1)},function(e){return i.destroy(),t(!0)})},r.readAsArrayBuffer(e)})}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e,t){var r;r=n(528),ng.factory("DownloadDialog",["ngDialog","$rootScope","PageState","Mixpanel",function(t,n,i,o){var a,s,l,c;return s=o.document_properties,a=!1,n.$on("comment_updated",function(t,n){if(!a)return a=e.some(n,function(e){return!e.readonly})}),n.$on("documentclose",function(){return a=!1}),l=function(e,n){return null==n&&(n={}),n.has_annotation=a,n.user=e,t.open({template:r,controller:"DownloadController",data:n,overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},c=function(e,t,n){return null==t&&(t="original"),a&&"annotation"===t||!i.has_permission("download")?l(e,{action:"print",on_side:!0,force_fallback:n}):(PDFViewerApplication.requestPrint(n),o.track("Print PDF completed",angular.extend({has_annotation:a,inline:"original"},s)))},{open:l,print:c}}]),ng.controller("DownloadController",["$scope","SettingsFactory","PageState","$window","Mixpanel","Pusher","User","DocumentManager","DocumentUploader","$rootScope","GoogleAuth","GoogleDrive","Comment","$timeout","PremiumRequiredDialog","LicensesHelper",function(n,r,i,o,a,s,l,c,u,d,f,h,p,g,m,v){var _,y,b,w,x,k,C,S,E,$,T,A,D;if(S=a.document_properties,n.page_state=i,_=null,y=null,w=null,D=null,b=n.ngDialogData,C=b.has_annotation,n.has_permission=i.has_permission("download"),x=function(e,t,r){var o;return null==t&&(t=!1),(o=function(){var o;return n.show_export=!0,n.export_dest=e,o=function(){var s,l,u;return n.export_job_id=null,a.track("Export PDF",angular.extend({destination:e},S)),i.export_status="exporting",s=c.export_pdf(i.document,{inline_comments:t,google_user_id:null!=(l=r.google_user_id)?l:i.google_user_id,user_channel:b.user.channel,parent_id:null!=(u=r.folder)?u.id:void 0,destination:function(){switch(e){case"google_drive":return"drive";case"print":return"print";default:return}}(),pages:r.pages,file_name:r.file_name}),_=s.abort,s.then(function(o){var s;switch(a.track("Export PDF Completed",angular.extend({export_job_id:n.export_job_id},S)),e){case"download":n.download=function(){var e;return e=new DownloadManager,e.downloadUrl(o.file_url,"Kami Export - "+r.file_name+".pdf")},n.download();break;case"print":n.print_progress={text:"Preparing for printing 0%",value:0},s=c.print_pdf(o.file_url,b.force_fallback).then(function(){return a.track("Print PDF completed",angular.extend({has_annotation:C,inline:t},S)),n.close()},function(e){a.track("Print PDF error",angular.extend({has_annotation:C,inline:t,error:e},S))},function(e){var t,r;return t=e.progress,r=e.total,t<r?n.print_progress={text:"Preparing for printing "+Math.floor(100*t/r)+"%",value:Math.floor(100*t/r)}:n.print_progress={text:"Printing...",value:100}}),y=s.abort}return i.export_status="exported",d.$broadcast("DocumentExported"),"function"==typeof b.callback?b.callback(o,n):void 0},function(e){var t;return"undefined"!=typeof(null!=(t=e.error_data)?t.google_auth_failure:void 0)?(a.track("Export PDF Authorization Shown",angular.extend({export_job_id:n.export_job_id},S)),f.authorize_with_dialog({user_id:e.error_data.google_auth_failure,scope:e.error_data.google_auth_failure_required_scope,reason:"export_error",offline:!0}).then(o).catch(function(e){return n.close()})):(i.export_status="export_error",i.export_error_message="GoogleExportDomainPolicyException"===e.error_type?'Sorry, we cannot upload this file because your administrator has disabled 3rd party Google Drive apps. Please ask your administrator to allow Google Drive apps by opening the Google Apps control panel and going to Apps > Google Apps > Settings for Drive and making sure "Allow users to install Google Drive apps" in the "Data Access" menu is enabled.':"ExportNoFileException"===e.error_type?"This document is no longer shared. Please ask the owner to share the document again.":null!=n.export_job_id||null!=e.error_type?"An error occurred while exporting your PDF, please try again later":"Please check your internet connection and try again.",a.track("Export PDF Error",angular.extend({export_job_id:n.export_job_id},S)))},function(e){return n.export_job_id=e.export_id})},i.document.file_url||"google"===i.document.copy_type&&("googledrive"===i.source||"googledriveexport"===i.source)?o():(D=u.upload(),D.then(function(){return o()}))})()},n.options={file_name:i.document.name,method:"local",option:"original",warning_message:null,pages:"all",folder:b.folder,google_user_id:b.google_user_id},E=n.options,A=function(e){return n.show_export=!0,n.export_dest="google_drive",D=u.upload("google_drive",e),D.then(function(t){var r,o,a,s;return i.export_status="exported","function"==typeof b.callback&&b.callback({google_file_upload_id:t.id},n),r=null!=t&&null!=(o=t.parents)&&null!=(a=o[0])?a.id:void 0,null==r?e.folder=null:(null!=(s=e.folder)?s.id:void 0)!==r?h.get_file(r).then(function(t){return e.folder=t}):void 0})},T=function(){return 0!==PDFViewerApplication.pageRotation&&E.on_side===!0?E.warning_message="Note: Page rotation is not supported with Annotations on Side.":E.warning_message=null},T(),n.$watch("page_state.document",function(){var e,t,n,o;if((null!=(e=i.document)?e.document_identifier:void 0)&&(o=null!=(t=r.get("download_settings"))?t[null!=(n=i.document)?n.document_identifier:void 0]:void 0))return E.method=o.method,E.option=o.option}),k=function(e){return l.show().then(function(t){var n,r,o;return a.track("Export Annotation to .txt"),o="https://web.kamihq.com/api/documents/"+encodeURIComponent(null!=(r=i.document)?r.document_identifier:void 0)+"/export?User-Id="+encodeURIComponent(t.id)+"&User-Token="+encodeURIComponent(t.authentication_token),n=new DownloadManager,n.downloadUrl(o,"Kami Export - "+e.file_name+".txt")})},n.start_exporting=function(e){var n;switch(a.track("Export PDF Started",angular.extend({dest:e.method,mode:e.option,on_side:e.on_side===!0,has_annotation:C,pages:e.pages},S)),C||0!==PDFViewerApplication.pageRotation||"text"===e.method||"all"!==e.pages||(e.option="original"),"drive"!==e.method&&(e.file_name=i.document.name),n=e.file_name.trim().slice(-4),".pdf"!==n&&(e.file_name+=".pdf"),e.method){case"local":switch(e.option){case"original":t("#download").click();break;case"annotation":x("download",e.on_side,e);break;case"text":k(e)}break;case"drive":switch(e.option){case"original":A(e);break;case"annotation":x("google_drive",e.on_side,e)}}return!1},n.close=function(){return n.cancel(),n.closeThisDialog()},n.cancel=function(){if(i.export_status="none",null!=D&&D.abort(),D=null,"function"==typeof _&&_(),"function"==typeof y&&y(),n.show_export=!1,"print"===n.export_dest)return n.closeThisDialog()},n.check_close=function(){if(!n.show_export||"exported"===i.export_status||"none"===i.export_status)return n.close()},n.open_drive=function(){var e,t;return a.track("Export PDF Open Drive",S),h.open_folder(null!=(e=null!=(t=E.folder)?t.id:void 0)?e:i.parent_id)},n.choose_folder=function(){return h.pick_folder(i.google_user_id).then(function(e){return E.folder=e.file,E.google_user_id=e.google_user_id})},n.current_folder=function(){var e,t;return e=null!=(t=E.folder)?t.name:void 0,null!=e?e+"/":""},n.show_more=!1,n.custom_pages=null,n.numPages=PDFViewerApplication.pdfDocument.numPages,n.numAnnotatedPages=e.uniq(e.map(p.collab_filtered_comments(),"referring_to.page_no")).length,n.update_custom_pages=function(){var t,r,i,o;return n.focus_custom_pages_input=!0,n.options.pages=n.custom_pages,(null!=(i=n.custom_pages)?i.length:void 0)?(r=e.map(n.custom_pages.split(","),function(t){return e.map(t.split("-"),e.flow(e.trim,Number))}),o=!0,r=function(){var e,i,a;for(a=[],e=0,i=r.length;e<i&&(t=r[e],t=function(){switch(t.length){case 1:return t=[t[0],t[0]];case 2:return t;default:return o=!1}}(),o);e++){if(t[0]<1||t[1]>n.numPages||t[0]>t[1]||isNaN(t[0])||isNaN(t[1])){o=!1;break}a.push(t)}return a}(),n.more_options.custom_pages_input.$setValidity("value",o)):n.more_options.custom_pages_input.$setValidity("value",!0)},n.custom_pages_blur=function(){var e;if(!(null!=(e=n.custom_pages)?e.length:void 0))return n.options.pages="all"},n.$watch("options.pages",function(e,t){if(e!==t)return n.options.pages!==n.custom_pages?n.more_options.custom_pages_input.$setValidity("value",!0):void 0}),$=function(){var e;return e=r.get("download_settings",{}),e[i.document.document_identifier]={method:E.method,option:E.option},r.set("download_settings",e)},n.$watch("options.method",function(e,t){if(e!==t)return $()}),n.$watch("options.option",function(e,t){return e!==t&&$(),T()}),n.has_permission)switch(b.action){case"print":return x("print",b.on_side,E);case"export":return E.method=b.dest,E.option=b.type,null!=b.opt&&e.assign(E,b.opt),n.start_exporting(E)}}])}).call(t,n(2),n(1))},function(e,t,n){var r;r=n(529),ng.factory("DriveUploadRequiredDialog",["ngDialog","$q","PageState",function(e,t,n){var i;return i=function(i){var o;return"googledrive"!==n.source&&"google"!==n.document.copy_type||"googledriveexport"===n.source?(o=e.open({data:i,template:r,controller:"DriveUploadRequired",overlay:!1,className:"drive-upload-required-dialog",showClose:!1,appendTo:"#outerContainer"}),o.closePromise):t.reject()},{open:i}}]),ng.controller("DriveUploadRequired",["$scope","PromptFileUploadService","GoogleDrive","PageState","User",function(e,t,n,r,i){return e.upload=function(){return"googledriveexport"===r.source?n.create_drive_copy(i.current_user()).then(function(){return e.closeThisDialog("copy")},function(){return e.closeThisDialog(!1)}):(t.open_and_upload(),e.closeThisDialog(!0))}}])},function(e,t,n){var r;r=n(530),n(198),ng.factory("EnterCouponDialog",["ngDialog",function(e){var t;return t=function(){return e.open({template:r,controller:"EnterCouponDialogController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("EnterCouponDialogController",["CouponAPI","LicensesHelper","Mixpanel","User","$scope",function(e,t,n,r,i){var o,a,s,l;return i.state="initial",i.save=function(){var e;return i.state="saving",i.message=null,e=i.license_key,o(e).catch(function(t){return a(e).catch(function(e){return i.state="error",i.message="Unable to apply the given license/coupon"})})},o=function(t){return e.create({coupon_code:t}).$promise.then(function(e){return s(e.success_text),n.track("Applied Coupon",{key:t})})},a=function(e){return t.apply_license_key(e).then(function(){return s("License has been successfully applied"),n.track("Applied License",{key:e})})},s=function(e){return i.state="applied",i.message=e,l()},l=function(){return r.show(!0).then(function(e){return t.update_license(e)})}}])},function(e,t,n){var r;r=n(531),ng.factory("ExtensionRequiredDialog",["ngDialog",function(e){var t;return t=function(t){return e.open({data:{feature:t},template:r,controller:"ExtensionRequiredDialog",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("ExtensionRequiredDialog",["$scope","Mixpanel",function(e,t){var n;return n=e.ngDialogData,e.feature=n.feature,e.title="undefined"!=typeof chrome&&null!==chrome?"Install Chrome Extension":"Install Google Chrome",e.body="undefined"!=typeof chrome&&null!==chrome?"Install the extension to use "+e.feature:e.feature+" is only available on Google Chrome",e.install=function(){return"undefined"!=typeof chrome&&null!==chrome?(t.track("Clicked Install Extension",{from:"ExtensionRequiredDialog",feature:n.feature}),chrome.webstore.install("https://chrome.google.com/webstore/detail/ecnphlgnajanjnkcmbpancdjoidceilk",function(){return notable.apply(e,function(){return t.track("Completed Inline Install"),SettingsFactory.set("install_extension_dismissed",(new Date).getTime(),!0)})},function(){return notable.apply(e,function(){return t.track("Rejected Inline Install")})})):window.open("https://www.google.com/chrome/browser/"),e.closeThisDialog()}}])},function(e,t,n){(function(e){var t,r;t=n(24),r=n(532),n(199),ng.factory("FileBrowserDialog",["ngDialog",function(e){var t;return t=function(t){return e.open({template:r,controller:"FileBrowserController",overlay:!1,className:"",data:t,showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("FileBrowserController",["$scope","DocumentAPI","DocumentManager","PageState","GoogleDrive","$filter","$timeout",function(n,r,i,o,a,s,l){var c,u;return n.loaded=!0,u=function(r){var i;return n.loaded=!0,n.total_documents=null!=r&&null!=(i=r.meta)?i.total:void 0,n.documents=e.map(null!=r?r.documents:void 0,function(e){var n;return n=t(e.updated_at),e.updated_at_friendly=n.calendar(null,{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[Last] dddd",nextWeek:"dddd [at] LT",sameElse:"L"}),e.updated_at_formatted=n.format("h:mma dddd, MMMM Do YYYY"),e})},n.query_documents=function(){return"select_copy"===n.action?n.documents=s("orderBy")(n.documents,n.query.order):(n.loaded=!1,n.promise=r.index(n.query).$promise,n.promise.then(u))},n.page_changed=function(e){return e&&(e+=n.query.page,e>0&&e<=n.maxPage&&(n.query.page=e)),n.selected=null,n.query_documents()},n.query={order:"-updated_at",limit:10,page:1,filter:"uploaded"},n.change_order=function(e){return n.query.order===e?n.query.order="-"+e:n.query.order==="-"+e?n.query.order=e:n.query.order=e,n.query_documents()},n.selected=null,c=n.ngDialogData,n.action=null!=c?c.action:void 0,n.title=(null!=c?c.title:void 0)||"Shared Files",u(null!=c?c.documents:void 0),"select_copy"===n.action?(n.open_document=function(e){return n.closeThisDialog(e)},n.create_new_copy=function(){return n.closeThisDialog("new_copy")}):(n.query_documents(),n.open_document=function(e){switch(n.closeThisDialog(),o.add_next_load_params({document_identifier:e.document_identifier,source:"kamibrowser",google_user_id:e.google_sync_user_id,parent_id:e.parent_id,filename:e.document_name}),e.copy_type){case"fingerprint":case"user_copy":case"embed_api":return i.open_file(e.document_identifier);case"google":return a.load_document({id:e.document_identifier,userId:e.google_sync_user_id,filename:e.document_name,parent_id:e.parent_id})}}),n.select_document=function(e){return n.selected=e},n.maxPage=0,n.getPageNumbers=function(){var e,t,r;for(t=Math.ceil(n.total_documents/n.query.limit),n.maxPage=t||0,r=[],e=1;e<=n.maxPage;)r.push(e),e++;return r}}])}).call(t,n(2))},function(e,t,n){var r;r=n(533),ng.factory("GoogleAuthorizationDialog",["ngDialog",function(e){var t;return t=function(t){return e.openConfirm({template:r,controller:"GoogleAuthorizationController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer",data:t})},{open:t}}]),ng.controller("GoogleAuthorizationController",["$scope","Mixpanel","OAuthManager","GoogleAuth","User",function(e,t,n,r,i){var o,a;return o=e.ngDialogData,e.data=o,e.mailto=notable.get_support_mailto("GoogleAuthorizationDialog "+JSON.stringify(o)),"authorize"===o.status?t.track("Show Authorize Button",o):"error"===o.status&&t.track("Show Authorize Error",o),e.google_plus_profile=null,a=function(){if(null!=o.user_id)return n.google().get("plus/v1/people/"+o.user_id,{key:"AIzaSyDvDaPkScYZhDbHcx-xlqHiJluM7LCpK74"}).then(function(t){var n;return null!=(null!=(n=t.image)?n.url:void 0)&&(t.image.url=t.image.url.replace(/sz=50$/g,"")),e.google_plus_profile=t})},a(),e.popup_authorize=function(n){var s;return null==n&&(n=!1),e.error_type=null,t.track("Click Authorize Button",{force_authenticated_user:n}),o.status="loading",s=n&&null!=o.authenticated_user_id?(angular.extend({},o,{user_id:o.authenticated_user_id}),o.authenticated_user_id=null):o,r.authorize_now(s).then(function(t){return e.confirm(t)},function(n){var r,s,l,c;return e.error_type=null!=(s=null!=n?n.code:void 0)?s:null!=n?n.error:void 0,"cancelled"===e.error_type||"access_denied"===e.error_type?(o.message="You must click ALLOW.\n\nScroll down the pop up to see the Allow button.",o.status="authorize",t.track("Show Authorize Button",o)):"wrong_user"===e.error_type?(a(),o.message="Different Google Account.\n\n\nSorry, we expected you to log into a different Google account to \n\nopen this file. Please make sure you select the right Google Account.\n\n\nIf you are opening this link sent by someone else, please ask the\n\ndocument owner to use the share the Kami share link instead.",o.status="authorize",o.authenticated_user_id=null!=n?n.authenticated_user_id:void 0,t.track("Show Authorize Button",angular.extend({expected_user_id:null!=n?n.expected_user_id:void 0,authenticated_user_id:null!=n?n.authenticated_user_id:void 0},o))):(o.status="error",o.message=null!=(l=null!=n?n.message:void 0)?l:"Unable to authorize Google",o.message+=function(){switch(e.error_type){case"The domain policy has disabled third-party Drive apps"===(null!=n?n.message:void 0):return"\n\nPlease contact your IT Admin to whitelist this app in the Google Admin Console.";case 403:case 404:case 503:return c=null,i.show().then(function(e){return c=e.id}),r=o.user_id,"\n\nuser_id: "+c+(r?", google_user_id: "+r:"");default:return"\n\nPlease make sure you're online and try again."}}(),t.track("Show Authorize Error",o))})},e.close=function(){return t.track("Close Authorize Window"),e.closeThisDialog({error:{message:"Authorization cancelled",code:"cancelled"}})}}])},function(e,t,n){var r;r=n(537),ng.factory("LoadingDialog",["ngDialog","Mixpanel",function(e,t){var n;return n=function(t){var n;return n={title:"Loading",message:t},e.open({template:r,overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer",ariaRole:"alertdialog",controller:["$scope",function(e){return e.data=n}]})},{open:n}}])},function(e,t,n){(function(e){var t;t=n(538),ng.factory("LoadingErrorDialog",["ngDialog","Mixpanel","PageState",function(n,r,i){var o;return o=function(o,a){var s;return s=function(){switch(o){case"embed_error":return{title:"Error",message:"There was an error processing this document."};case"share_error":return{title:"File not available",message:"This document is no longer shared. Please ask the owner to share the document again."};case"google_drive_network_error":return{title:"Error reaching Google Drive",message:"Kami was unable to contact Google Drive to load this document. Please check that Google Drive is not blocked or try again later."};case"pdfjs":return"InvalidPDFException"===(null!=a?a.name:void 0)?{title:"Invalid or corrupted PDF file",message:"This document is invalid or corrupted. Please make sure it is a valid PDF file."}:"MissingPDFException"===(null!=a?a.name:void 0)?{title:"Missing PDF file",message:"This file is not available.",error:a.message}:"UnexpectedResponseException"===(null!=a?a.name:void 0)?0===a.status?{title:"Network Error",message:"There was a network error while loading the document.",error:a.message}:{title:"Unexpected server response",message:"Unexpected response was received while loading the document.",error:a.message}:{title:"Unable to load file",message:"An unexpected error occurred. Please contact our support team.",error:JSON.stringify(a)}}}(),null==s&&(s={title:"Failed to load file",message:"An unexpected error occurred. Please check your internet connection and try again."}),n.open({template:t,overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer",ariaRole:"alertdialog",controller:["$scope",function(t){return t.data=s,t.mailto=notable.get_support_mailto("Loading Error "+o+" "+JSON.stringify(a)+"\n"+JSON.stringify(e.pick(i.document,["document_identifier","id","name"]))),t.is_embed=notable.is_embed}]}),r.track_api("open_loading_error_dialog",{error_type:o,error:a})},{open:o}}])}).call(t,n(2))},function(e,t,n){var r;r=n(541),n(200),ng.factory("NotificationSettingsDialog",["ngDialog",function(e){var t;return t=function(){return e.open({template:r,controller:"NotificationSettingsController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("NotificationSettingsController",["$scope","PageState","DocumentManager",function(e,t,n){var r,i,o;return e.document=t.document,e.title="Notification Settings - "+t.document.name,(r=e.document).notification_settings||(r.notification_settings={}),e.document.notification_settings.email=null==(i=e.document.notification_settings.email)||i,e.document.notification_settings.gcm=null==(o=e.document.notification_settings.gcm)||o,e.saving=!1,e.save=function(){return e.saving=!0,n.update_document_settings().then(function(){return e.saving=!1,e.closeThisDialog()},function(){return e.saving=!1})}}])},function(e,t,n){(function(e,t){var r;r=n(545),ng.factory("PremiumRequiredDialog",["ngDialog","User","LicensesHelper",function(t,n,i){var o,a;return o=function(e,o){var a,s,l,c,u,d,f,h;return h=(null!=(s=n.current_user())&&null!=(l=s.user_profile)?l.usage_purpose:void 0)||"school",f=null!=(c=n.current_user())&&null!=(u=c.user_profile)?u.school_role:void 0,d="school"===h?"education":i.get_required_plan(e),a=i.get_feature_object(e),t.open({data:{feature:e,feature_object:a,school_role:f,for_work:o,usage_purpose:h,required_plan:d},template:r,controller:"PremiumRequiredController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})},a="body:not(.feature-premium) .required-feature-premium, body:not(.feature-work) .required-feature-work",e("html").on("mouseup",a,function(t){var n;return n=e(t.currentTarget),o(n.data("feature-name"),n.is(".required-feature-work")),!1}),{open:o}}]),ng.controller("PremiumRequiredController",["$rootScope","$scope","User","Mixpanel","$timeout","$sce","LicensesHelper","Onboarding",function(e,n,r,i,o,a,s,l){var c;return c=n.ngDialogData,n.feature=c.feature,n.feature_list=t.filter(c.feature_list,function(e){return null!=e.message}),n.usage_purpose=c.usage_purpose,n.school_role=c.school_role,n.required_plan=s.humanize(c.required_plan),n.feature_name=c.feature_object.name,n.has_video=c.feature_object.video,n.trustSrc=function(e){return function(e){return a.trustAsResourceUrl(e)}}(this),n.feature_video=c.feature_object.video+"?rel=0&amp;showinfo=0",n.message=c.feature_object.message,n.redeemed=t.find(r.current_user().licenses,function(e){return e.license_type===c.required_plan}),n.trial_message=n.redeemed?"Trial Unavailable":"Start Free Trial",n.restart_onboarding=function(){return l.restart(1,1)},l.watch_onboarding_finished(function(t){var i,o,a;return a=r.current_user(),n.usage_purpose=null!=(i=a.user_profile)?i.usage_purpose:void 0,n.school_role=null!=(o=a.user_profile)?o.school_role:void 0,n.required_plan="school"===usage_purpose?"education":s.humanize(s.get_required_plan(feature)),e.$broadcast("refresh_user")}),i.track("Show Premium Required",{feature:n.feature,active_features:s.active_features}),r.show().then(function(e){return e.properties["wants_"+n.feature]=!0,r.update(e)}),n.start_required_trial=function(){return i.track("Clicked Start Trial",{from:n.feature}),s.apply_trial_license(c.required_plan).then(function(e){n.redeemed=!0,n.trial_message="Activated!",i.track("Started Trial",{from:n.feature,value:e}),r.show(!0).then(function(e){return s.update_license(e)})},function(e){i.track("Start Trial Error",{from:n.feature,reason:e}),n.redeemed=!0,n.trial_message="Something went wrong"})},n.buy_premium=function(){},n.view_plans=function(){var e;i.track("Clicked Buy Premium",{from:n.feature}),e=function(){switch(n.usage_purpose){case"school":return"upgrade.html?education=1";default:return"upgrade.html?work=1"}}(),window.open(e,"_blank")}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.factory("PromptDialog",["ngDialog","SettingsFactory",function(e,t){var n,r,i,o,a;return i=864e5,r=null,o=function(t,n){var i,o;return i=n.name,r=e.open({template:t,controller:"PromptDialogController",overlay:!1,className:null!=(o=n.className)?o:"",showClose:!1,appendTo:"#outerContainer",data:n})},n=function(e){return(Date.now()-e)/i},a=function(e,i){var a,s,l,c,u;if(!r){if(l=i.name,s=t.get(l+"_last_shown"),!s)return o(e,i);if("ok"!==t.get(l+"_last_action"))return u=0|t.get(l+"_show_count"),"default"===i.days_to_wait&&(i.days_to_wait=function(e){return 7*Math.max(e,4)}),a=null!=(c="function"==typeof i.days_to_wait?i.days_to_wait(u):void 0)?c:i.days_to_wait,null!=a&&n(s)>a?o(e,i):void 0}},{open:o,open_once:a}}]),ng.controller("PromptDialogController",["$scope","Mixpanel","SettingsFactory",function(t,n,r){var i,o,a,s;return a=t.ngDialogData,t.options=a,o=a.name,n.track("Open Dialog "+o,a),r.set(o+"_last_shown",(new Date).getTime(),!0),s=0|r.get(o+"_show_count"),r.set(o+"_show_count",s+1),i=function(e){return function(i){return a.action=e,a.action_value=i,n.track("Dialog "+o,a),t.closeThisDialog(a),r.set(o+"_last_action",e,!0)}},t.ok=i("ok"),t.close=i("close"),t.cancel=i("cancel"),t.make_stars=function(n){var r;return t.hoverRating=0,t.stars=e.map(function(){r=[];for(var e=1;1<=n?e<=n:e>=n;1<=n?e++:e--)r.push(e);return r}.apply(this),function(e){return{active:function(){return t.hoverRating>0?t.hoverRating>=e:a.rating>=e},click:function(){return a.rating=e},hover:function(){return t.hoverRating=e},hoverEnd:function(){return t.hoverRating=0}}})},t.ratingMessage=function(){var e;return 0===t.hoverRating?0===a.rating?"Click to rate":"":null!=(e=a.ratingName)?e[t.hoverRating]:void 0}}])}).call(t,n(2))},function(e,t,n){var r;r=n(547),n(201),ng.directive("promptFileUpload",function(){return{templateUrl:r,replace:!0,controller:"PromptFileUploadController"}})},function(e,t,n){var r;r=n(548),ng.factory("ReadOnlyFileDialog",["ngDialog",function(e){var t;return t=function(){return e.open({name:"read_only_file",template:r,controller:"ReadOnlyFileDialogController",overlay:!1,className:"",showClose:!0,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("ReadOnlyFileDialogController",["$scope","GoogleDrive","User","PageState","Mixpanel","GoogleClassroomCourseWorkService",function(e,t,n,r,i,o){var a,s;return e.owner_name=null!=(a=r.google_document)&&null!=(s=a.ownerNames)?s[0]:void 0,i.track("Open Dialog ReadOnlyFileDialog"),e.classroom_file=o.status.classroom_file,e.classroom_coursework=o,e.upload=function(){return i.track("ReadOnlyFileDialog create copy"),n.show().then(function(n){return e.closeThisDialog(),t.create_drive_copy(n)})},e.unsubmit_classroom=function(){return i.track("ReadOnlyFileDialog Classroom Unsubmit"),o.reclaim().then(function(){return e.closeThisDialog()})}}])},function(e,t,n){var r;r=n(550),n(189),ng.factory("RemoveUploadDialog",["ngDialog","$q","PageState",function(e,t,n){var i;return i=function(i){var o;return n.document.file_url?(o=e.open({data:i,template:r,controller:"RemoveUploadController",overlay:!1,className:"remove-upload-dialog",showClose:!1,appendTo:"#outerContainer"}),o.closePromise):t.reject()},{open:i}}]),ng.controller("RemoveUploadController",["$scope","Document","PageState","Mixpanel",function(e,t,n,r){var i;return i=e.ngDialogData,e.status="normal",e.remove_upload=function(){return e.status="processing",t.remove_upload({document_identifier:n.document.document_identifier}).then(function(t){return n.export_status=null,n.upload_percentage_text=null,n.upload_percentage_value=null,n.document.file_url=t.file_url,r.track("Remove upload",{document_identifier:n.document.document_identifier,success:!0}),e.closeThisDialog(!0)},function(t){return alert("We could not delete the file, please check your internet connection."),e.closeThisDialog(!1)})},e.keep_upload=function(){return e.closeThisDialog(!1)}}])},function(e,t,n){(function(e,t){var r,i;i=n(551),r='<button id="google-drive-kami-share" onclick=" var scope = parent.angular.element(\'.share-dialog\').scope().change_to_kami_share(); ">Share using Kami</button>',ng.factory("ShareDialog",["ngDialog",function(e){var t;return t=function(){return e.open({template:i,controller:"ShareController",overlay:!1,className:"share-dialog",showClose:!1,appendTo:"#outerContainer"})},{open:t}}]),ng.controller("ShareController",["$q","$scope","GoogleAuth","PageState","Mixpanel","Document","DocumentManager","DocumentUploader","User","Gravatar","$timeout","$rootScope","LicensesHelper",function(n,i,o,a,s,l,c,u,d,f,h,p,g){var m,v,_,y,b,w,x,k,C,S,E;return s.track("Share Document",s.document_properties),y=g.has_flag("allow_google_share"),i.page_state=a,i.is_google=y&&"google"===a.document.copy_type,S=null,v=function(){return o.authorize_if_needed({user_id:a.google_user_id,from_user_action:!0,scope:"https://www.googleapis.com/auth/drive.file"}).then(function(t){return b.then(function(n){var o,s,l,c,u;return o=t.access_token,c=new MutationObserver(function(e){if(e[0].removedNodes.length)return i.is_google&&i.closeThisDialog(),this.disconnect()}),c.observe(document.body,{childList:!0}),null===S?S=new gapi.drive.share.ShareClient:e('[class^="shr-q-shr-r"]').remove(),S.setOAuthToken(o),S.setItemIds([null!=(u=a.google_document)?u.id:void 0]),S.showSettingsDialog(),l=e("div[guidedhelpid=share_dialog]"),l.prepend(r),s=e(".shr-c-shr-d-shr-r"),s.css("padding-bottom","60px")})})},i.is_google&&(m=n.defer(),b=m.promise,a.gapi_loaded?gapi.load("drive-share",{callback:m.resolve}):_=p.$on("gapi_loaded",function(){return gapi.load("drive-share",{callback:m.resolve}),_()}),v()),i.change_to_kami_share=function(){return i.$apply(function(){return i.is_google=!1,e('[class^="shr-q-shr-r"]').remove()})},i.update_document_settings=c.update_document_settings,i.gravatar_image=function(e){return f.image(e)},i.remove_upload=function(){var e;if(confirm("Are you sure you want to delete the file?"))return e=!1,l.remove_upload({document_identifier:a.document.document_identifier}).then(function(t){return a.export_status=null,a.upload_percentage_text=null,a.upload_percentage_value=null,a.document.file_url=t.file_url,e=!0},function(e){return alert("We could not delete the file, please check your internet connection.")}),s.track("Remove upload",{document_identifier:a.document.document_identifier,success:e})},E=null,i.upload=function(e){return null==e&&(e="notable_sharing"),E=u.upload(e)},i.abort_upload=function(){return null!=E&&"function"==typeof E.abort?E.abort():void 0},i.upload_and_share=function(){return"owner"===a.document.permissions?i.upload().then(function(){return a.document.privacy="with_file",a.document.link_sharing="readwrite",i.update_document_settings()}):a.export_status="no_upload_permission_error"},i.sharing_permission_download=null==(w=null!=(x=a.document.sharing_permissions)?x.download:void 0)||w,i.update_sharing_permissions=function(){return a.document.sharing_permissions=t.assign({},a.document.sharing_permissions,{download:i.sharing_permission_download}),i.update_document_settings()},i.has_work=g.has_feature("work"),i.show_embed=!1,i.copy_text="Copy",k=t.debounce(function(){return i.$apply(function(){return i.copy_text="Copy"})},2e3),i.after_copy=function(){return s.track("Copied Share Link"),i.copy_text="Copied",k()},i.copy_text_embed="Copy",C=t.debounce(function(){return i.$apply(function(){return i.copy_text_embed="Copy"})},2e3),i.after_copy_embed=function(){
return s.track("Copied Embed Link"),i.copy_text_embed="Copied",C()}}])}).call(t,n(1),n(2))},function(e,t,n){var r;r=n(560),n(131),ng.factory("TrialEndedBanHammerDialog",["ngDialog",function(e){var t;return t=function(t){return e.open({template:r,controller:"TrialEndedBanHammerController",overlay:!1,className:"",showClose:!1,closeByEscape:!1,closeByDocument:!1,appendTo:"#outerContainer",data:{state:t}})},{open:t}}]),ng.controller("TrialEndedBanHammerController",["$rootScope","$scope","ngDialog","User","LicenseAPI","Mixpanel",function(e,t,n,r,i,o){return t.state=t.ngDialogData.state||"welcome",t.work_form={},t.schools_form={},o.track("TrialEndedBanHammer Dialog Shown"),t.submit_work_form=function(n){if(n)return t.processing=!0,i.add_work_license({work_form:t.work_form},function(n){return function(n){return o.track("TrialEndedBanHammer Dialog Submit Form",{type:"work",form:t.work_form}),r.show(!0).then(function(){return e.$broadcast("refresh_user"),t.state="finish"})}}(this),function(e){return function(e){return e.length>0?t.errors=e||["Network error, please try again"]:void 0===e.length?t.errors=["Network error, please try again"]:void 0}}(this)).$promise.finally(function(){return t.processing=!1})},t.change_state=function(e){return o.track("TrialEndedBanHammer Dialog Change State",{previous_state:t.state,new_state:e}),t.state=e},t.close=function(){return o.track("TrialEndedBanHammer Dialog Closed"),t.closeThisDialog()}}])},function(e,t,n){(function(e){var t;t=n(561),n(202),ng.factory("UpgradeDialog",["ngDialog",function(e){var n;return n=function(n,r,i){return null==r&&(r=!0),null==i&&(i=null),e.open({template:t,controller:"UpgradeDialogController",overlay:!1,className:"",showClose:!1,closeByEscape:!1,closeByDocument:!1,appendTo:"#outerContainer",data:{state:n,show_close:r,called_from:i}})},{open:n}}]),ng.controller("UpgradeDialogController",["$scope","Stripe","ngDialog","User","Mixpanel",function(t,n,r,i,o){var a,s,l,c;return t.state=t.ngDialogData.state||"pro",t.show_close=t.ngDialogData.show_close,t.billing_cycle={value:"year"},s=null,o.track("Open Dialog UpgradeDialog",{show_close:t.ngDialogData.show_close,called_from:t.ngDialogData.called_from}),i.show().then(function(n){return t.user=e.pick(n,["name","email"]),e.assign(t.user,{contactMethod:"email"}),n.public_mail_provider?t.prices={month:5,year:50}:t.prices={month:10,year:90}}),l=function(){return s=r.open({template:"<h1>Processing...</h1>",plain:!0,showClose:!1,closeByEscape:!1,closeByDocument:!1,className:"ngdialog-theme-default upgrade-dialog-processing"})},a=function(){return s.close()},t.upgrade_now=function(){var e;return l(),e="year"===t.billing_cycle.value?t.prices.year:t.prices.month,n.purchase(e,"premium",t.billing_cycle.value).then(function(){return t.state="success",i.show(!0)}).catch(function(e){var n;if("cancelled"!==e)return t.state="error",t.errorMessage=[].concat(null!=e&&null!=(n=e.data)?n.errors:void 0).join(". "),c()}).finally(a)},t.try_again=function(){return t.state="pro"},c=function(){return t.mailto=notable.get_support_mailto("UpgradeDialog: "+t.errorMessage)}}])}).call(t,n(2))},function(e,t,n){var r;r=n(563),n(131),ng.factory("WelcomeDialog",["ngDialog",function(e){var t;return t=function(t){return e.open({template:r,controller:"WelcomeDialogController",overlay:!1,className:"",showClose:!1,closeByEscape:!1,closeByDocument:!1,appendTo:"#outerContainer",data:{state:t}})},{open:t}}]),ng.controller("WelcomeDialogController",["$rootScope","$scope","ngDialog","User","LicenseAPI","Mixpanel",function(e,t,n,r,i,o){return t.state=t.ngDialogData.state||"welcome",t.work_form={},t.schools_form={},o.track("Open Dialog Welcome"),t.submit_work_form=function(n){if(n)return t.processing=!0,i.add_work_license({work_form:t.work_form},function(n){return function(n){return o.track("Welcome Dialog Submit Form",{type:"work",form:t.work_form}),t.closeThisDialog(),r.show(!0).then(function(){return e.$broadcast("refresh_user")})}}(this),function(e){return function(e){return t.processing=!1,e.length>0?t.errors=e||["Network error, please try again"]:void 0===e.length?t.errors=["Network error, please try again"]:void 0}}(this))},t.submit_schools_form=function(n){if(n)return t.processing=!0,i.add_schools_license({schools_form:t.schools_form},function(n){return function(n){return o.track("Welcome Dialog Submit Form",{type:"school",form:t.schools_form}),t.closeThisDialog(),r.show(!0).then(function(){return e.$broadcast("refresh_user")})}}(this),function(e){return function(e){return t.processing=!1,e.length>0?t.errors=e||["Network error, please try again"]:void 0===e.length?t.errors=["Network error, please try again"]:void 0}}(this))},t.change_state=function(e){return o.track("Welcome Dialog Change State",{previous_state:t.state,new_state:e}),t.state=e}}])},function(e,t,n){(function(e,t){ng.directive("adsense",["$rootScope","$timeout","LicensesHelper","User","SubscriptionManagerFactory",function(n,r,i,o,a){return function(r,s,l){var c,u,d,f,h,p,g,m,v;return v=a.for_directive(r,s),r.ads_visible=!1,r.ads_enabled=!1,h=null,window.googletag={},window.googletag.cmd=[],u=1200,c=850,p=function(e){return function(){var e,t,n;return e=document.createElement("script"),e.async=!0,e.type="text/javascript",n="https:"===document.location.protocol,e.src=(n?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}(),googletag.cmd.push(function(){var t,n,r;return"student"!==(null!=(t=e.user_segmentation)?t.segment:void 0)&&"school"!==(null!=(n=e.user_profile)?n.usage_purpose:void 0)||googletag.pubads().setTagForChildDirectedTreatment(1),r=googletag.sizeMapping().addSize([0,0],[]).addSize([c,200],[120,600]).addSize([u,200],[160,600]).build(),googletag.defineSlot("/98338996/right-side",[160,600],"div-gpt-ad").defineSizeMapping(r).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.enableServices(),googletag.cmd.push(function(){return googletag.display("div-gpt-ad")})})},m=function(){if(r.ads_enabled&&r.ads_visible&&(null===h||Date.now()-h>18e4))return googletag.cmd.push(function(){return googletag.pubads().refresh()}),h=Date.now()},notable.is_web&&o.show().then(function(t){var n;if(!i.has_feature("no_ads")&&!i.has_flag("no_ads")&&!(null!=(n=t.domain_properties)?n.new_onboarding:void 0)&&"rtl"!==e("html").prop("dir"))return r.ads_enabled=!0,p(t),d()}),n.$on("features_updated",function(){if(i.has_feature("no_ads")||i.has_flag("no_ads"))return r.ads_visible=!1,r.ads_enabled=!1}),r.$on("documentloaded",function(){return m()}),r.$on("comment_updated",function(){return m()}),g=null,d=function(){var e;if(r.ads_enabled)return e=document.documentElement.clientWidth,e<c?r.ads_visible=!1:(r.ads_visible=!0,m()),g=e},f=t.debounce(d,50),v.$(window).on("resize",f)}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e,t){var r,i;i=n(514),r=n(511),ng.directive("annotationAutograph",["DirectiveHelper","Comment","Autograph",function(n,o,a){return{restrict:"E",templateUrl:i,scope:!0,link:function(i,s,l){var c,u,d,f,h,p,g,m,v,_,y,b,w,x;if(s.one("$destroy",function(){return i.$destroy()}),null!=(y=s.get(0))&&y.addEventListener("touchstart",function(e){return e.preventDefault()},{passive:!1}),p="Image"===i.commentObj.annotation_type,p?(i.$watch("attachment_url",function(){return i.autograph_image_url=i.attachment_url}),i.commentObj.kamiImageId&&PDFViewerApplication.pdfDocument.getPage(i.commentObj.referring_to.page_no).then(function(e){return e.objs.get(i.commentObj.kamiImageId,function(e){var t;return t=r(e),i.$apply(function(){return i.attachment_url=t.blobUrl,i.attachment_blob=t.blob})})})):a.get_autograph_url(i.commentObj.autograph).then(function(e){return i.autograph_image_url=e}),d=0,c=0,u=2,g=d+c+u,f=i.commentObj.referring_to.page_no,i.$watch("commentObj.referring_to",function(e,t){if(!angular.equals(e,t))return _()},!0),h=null!=(b=null!=(w=i.commentObj.autograph)?w.aspect_ratio:void 0)?b:i.commentObj.referring_to.width/i.commentObj.referring_to.height,x=n.get_skew_ratio(s),i.handleStyle={transform:"scale("+1/x+")"},v=null,_=function(){var e,t,n,r,o,a;return o=i.commentObj.referring_to.x-g,a=i.commentObj.referring_to.y-g,r=i.commentObj.referring_to.width||100*((null!=(t=i.commentObj.autograph)?t.aspect_ratio:void 0)||1),e=i.commentObj.referring_to.height||100,s.css({left:o+"px",top:a+"px",width:r+"px",height:e+"px",transform:"rotate("+(null!=(n=i.commentObj.referring_to.rotation)?n:0)+"deg)"}),s.find(".comment").css({padding:d+"px",borderWidth:c+"px"})},_(),i.can_edit())return m="",e(s[0]).resizable({restrict:{restriction:t("#textLayer"+i.commentObj.referring_to.page_no)[0],endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},edges:{top:".handle-right, .handle-bottom",left:".handle-right, .handle-bottom",bottom:".handle-right, .handle-bottom",right:".handle-right, .handle-bottom"},onstart:function(e){return s.addClass("dragging")},onmove:function(e){var n,r,o,a,s,l,c,u,d;return d=e.target,u=notable.rotate(notable.screen_to_pdf({x:e.dx,y:e.dy}),notable.deg2rad(-(null!=(c=i.commentObj.referring_to.rotation)?c:0))),o=u.x,a=u.y,l=parseFloat(d.style.width)+o,s=parseFloat(d.style.height)+a,Math.abs(o)<.01&&(o=0),Math.abs(a)<.01&&(a=0),r=e.interaction.downTargets,null!=r&&t(r).hasClass("handle-bottom")?l=s*h:s=l/h,n=40,l<n&&(l=n),s<n&&(s=n),d.style.width=l+"px",d.style.height=s+"px"},onend:function(e){var t;return s.removeClass("dragging"),t=e.target,notable.apply(i,function(){return i.commentObj.referring_to.width=parseFloat(t.style.width),i.commentObj.referring_to.height=parseFloat(t.style.height),i.commentObj.embedded&&i.commentObj.kamiImageId?o.upsert_comment_with_attachment(i.commentObj,i.attachment_blob):o.upsert(i.commentObj)})}}).draggable({restrict:{restriction:t("#textLayer"+i.commentObj.referring_to.page_no)[0],endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},onstart:function(e){if(m=s.css("transform"),"none"===m)return m=""},onmove:function(e){var t,n,r,i,o,a;return i=e.target,r=notable.screen_to_pdf({x:e.dx,y:e.dy}),t=r.x,n=r.y,o=(s.data("x")||0)+t,a=(s.data("y")||0)+n,i.style.transform="translate3d("+o+"px, "+a+"px, 0px) "+m,s.data("x",o),s.data("y",a)},onend:function(e){var t,n,r;return t=e.target,n=s.data("x"),r=s.data("y"),t.style.transform=m,s.data("x",0),s.data("y",0),notable.apply(i,function(){return i.commentObj.referring_to.x=i.commentObj.referring_to.x+n,i.commentObj.referring_to.y=i.commentObj.referring_to.y+r,i.commentObj.embedded&&i.commentObj.kamiImageId?o.upsert_comment_with_attachment(i.commentObj,i.attachment_blob):o.upsert(i.commentObj)})}}).on("up",notable.remove_cursor_styling)}}}])}).call(t,n(25),n(1))},function(e,t,n){var r,i;i=n(515),r=/(youtu\.be\/)|(youtube\.com\/(watch\?|embed\/|playlist\?))\S+/,ng.directive("annotationComment",function(){return{templateUrl:i,replace:!0,controller:["$scope","Comment","CommentsHelper","Mixpanel",function(e,t,n,i){return e.get_replies_length=function(){var t,n,r,i,o;if(r=0,e.commentObj.deleted_at)return r;for(i=e.commentObj.replies,t=0,n=i.length;t<n;t++)o=i[t],o.deleted_at||r++;return r},e.new_reply={value:""},e.$watch("new_reply.value",function(r,o){if(n.can_update_isnt_empty(r,o)&&r!==e.placeholder_text)return t.insert_reply(e.commentObj.id,r,"Comment",e.current_user),e.new_reply.value="",i.track("New Reply",i.document_properties)}),e.youtube_src=function(){var t;if(e.commentObj.content)return t=r.exec(e.commentObj.content),null!=t?t[0]:void 0}}],link:function(e,t,n){return e.$watch("commentObj.annotation_type",function(t,n){if("Audio"===t)return e.$on("videojs-loaded",function(){return e.$apply(function(){return e.status="loaded"})}),e.$on("videojs-stopRecord",function(){return e.$apply(function(){return e.status="loading"})}),e.status="loading"})}}})},function(e,t,n){var r;r=n(516),ng.directive("annotationCommentPointer",["Comment","AnnotationColors",function(e,t){return{templateUrl:r,replace:!0,scope:!0,link:function(n,r,i){return r.one("$destroy",function(){return n.$destroy()}),n.backgroundColor=function(){var e,t;return e=n.commentObj.referring_to.color,t=notable.hex_to_rgb(e),"rgba("+t.r+", "+t.g+", "+t.b+", 0.8)"},n.pointerScale=function(){var e;return e=notable.page_scale(),e<1?"scale("+1/e+")":""},n.commentBodyTransform=function(){var e;return e=notable.page_scale(),e>1?"scale("+1/e+")":"none"},n.get_color=function(e){return t.colors()[e]},n.set_color=function(t){return n.commentObj.referring_to.color=n.get_color(t),e.upsert(n.commentObj)}}}}])},function(e,t){ng.directive("annotationEditHandler",function(){return{scope:!0,controller:["$scope","Comment",function(e,t){return e.$on("editing_end",function(e){var n;return(null!=(n=e.targetScope.commentObj.content)?n.length:void 0)?t.upsert(e.targetScope.commentObj):"Audio"!==e.targetScope.commentObj.annotation_type&&"Video"!==e.targetScope.commentObj.annotation_type&&"Desktop"!==e.targetScope.commentObj.annotation_type?t.remove_and_upsert_comment(e.targetScope.commentObj):void 0})}]}})},function(e,t,n){var r;r=n(517),n(186),ng.directive("annotationEquation",["SubscriptionManagerFactory","Comment","SymbolPicker","$timeout",function(e,t,i,o){return{restrict:"E",templateUrl:r,scope:!0,link:function(r,a,s){return n.e(1).then(function(s){(function(s){var l,c,u,d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E,$;if(n(181),n(571),x=e.for_directive(r,a),a.one("$destroy",function(){return r.$destroy()}),u=r.commentObj.referring_to.page_no,g=null!=(_=a.find(".math-input"))?_[0]:void 0,h=null!=(y=a.find(".math-latex"))?y[0]:void 0,C=s("<textarea />"),g&&h)return f=function(){return notable.apply(r,function(){return r.$emit("editing_start",r.commentObj)}),S.edit(r.mathField.latex())},d=function(){return notable.apply(r,function(){return r.$emit("editing_end")}),b(),S.clear()},w=function(e){if(s(g).css({color:r.commentObj.referring_to.color,"background-color":r.commentObj.referring_to.fillColor,"font-size":r.commentObj.referring_to.font_size}),e&&r.mathField)return r.mathField.reflow()},v=function(){var e;return a.css({left:r.commentObj.referring_to.x+"px",top:r.commentObj.referring_to.y+"px",transform:"rotate("+(null!=(e=r.commentObj.referring_to.rotation)?e:0)+"deg)"})},v(),r.$watch("commentObj.referring_to",function(e,t){if(!angular.equals(e,t))return v(),w(!0)},!0),b=function(){var e;if(e=r.mathField.latex(),r.commentObj.content!==e)return e&&e.length>0?(r.commentObj.content=e,t.upsert(r.commentObj)):t.remove_and_upsert_comment(r.commentObj)},r.$on("save_equations",function(){return b()}),$=function(){if(r.commentObj.content)return r.mathField.latex(r.commentObj.content)},E=function(){var e;return e=i.get("equation"),e&&k(e),x.add(i.on_create("equation",k))},k=function(e){return e.add_event("on_select_symbol",function(e){var t;if(s(m).is(":focus"))return e.mq_command_html?(t=C.html(e.mq_command_html).text(),r.mathField.typedText(t)):e.mq_command_write?r.mathField.write(e.mq_command_write):e.mq_command_cmd?r.mathField.cmd(e.mq_command_cmd):e.mq_command_type&&r.mathField.typedText(e.mq_command_type),S.edit(r.mathField.latex())})},S={stack:[],currentIndex:0,undo:function(){var e;if(this.currentIndex>1)return this.currentIndex--,e=this.stack[this.currentIndex-1],r.mathField.latex(e)},redo:function(){var e;if(this.stack.length>this.currentIndex)return e=this.stack[this.currentIndex],r.mathField.latex(e),this.currentIndex++},edit:function(e){return this.stack.length=this.currentIndex,this.stack.push(e),this.currentIndex++},clear:function(){return this.stack.length=0,this.currentIndex=0}},c=function(e){var t,n;return t=e.ctrlKey||e.metaKey,t&&90===e.which?e.shiftKey?S.redo():S.undo():(n=r.mathField.latex(),o(function(){var e;if(e=r.mathField.latex(),e!==n)return S.edit(e)},0))},r.$watch("commentObj.content",function(e,t){if(e!==t&&e!==r.mathField.latex())return $()}),l=MathQuill.getInterface(2),m=null,w(),r.can_edit()?(r.mathField=l.MathField(g,{spaceBehavesLikeTab:!0,handlers:{enter:function(){return b(),r.mathField.blur(),s("#viewerContainer").focus()}}}),p=r.mathField.el(),m=s(p).find("textarea")[0],m.addEventListener("blur",d),m.addEventListener("focus",f),m.addEventListener("keydown",c),$(),r.commentObj.new_comment&&r.mathField.focus(),E(),r.$on("$destroy",function(){if(s(m).is(":focus"))return b()})):(r.mathField=l.StaticMath(g),$())}).call(this,n(1))}.bind(null,n)).catch(n.oe)}}}])},function(e,t,n){(function(e){var t;t=n(536),ng.directive("annotationShortcuts",["ngDialog","AnnotationState","PremiumRequiredDialog","LicensesHelper","SubscriptionManagerFactory","KeyCodes",function(n,r,i,o,a,s){return{scope:!0,link:function(l,c,u){var d;return d=a.for_directive(l,c),l.$on("show-shortcut-modal",function(){return n.open({template:t,overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer"})}),d.$(document).on("keydown",function(t){var n;if(l.current_user){if(null!=document.activeElement&&!e(document.activeElement).is("#viewerContainer")&&!e(document.activeElement).is("body"))return!0;if(t.keyCode===s["forward-slash"]&&t.shiftKey){if(null!=e("#shortcuts-dialog").get(0))return;return l.$broadcast("show-shortcut-modal"),t.preventDefault(),t.stopPropagation(),!1}if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return!0;switch(n=null,t.keyCode){case s[1]:n="highlight";break;case s[2]:n="strikethrough";break;case s[3]:n="underline";break;case s[4]:n="comment";break;case s[5]:n="text";break;case s[6]:if(!o.has_feature("drawing"))return i.open("drawing");n="drawing";break;case s[7]:if(!o.has_feature("shape"))return i.open("shape");n="shape";break;case s[8]:return o.has_feature("autograph")?l.open_window("autograph_management"):i.open("signing");case s[9]:n="eraser";break;case s[0]:n="normal";break;default:return!0}return notable.apply(l,function(){return r.set_annotation_mode(n)}),t.preventDefault(),t.stopPropagation()}})}}}])}).call(t,n(1))},function(e,t,n){(function(e,t){var r;r=n(518),ng.directive("annotationText",["TooltipScope","Comment","SubscriptionManagerFactory",function(n,i,o){return{restrict:"E",templateUrl:r,scope:!0,link:function(r,a,s){var l,c,u,d,f,h,p,g,m,v,_,y,b,w,x;if(x=o.for_directive(r,a),a.one("$destroy",function(){return r.$destroy()}),u=5,l=2,c=2,m=u+l+c,f=r.commentObj.referring_to.page_no,d=a.find(".comment"),r.nowrap=!1,g=function(){var e,t,n;switch(t=PDFViewerApplication.pdfViewer.getPageView(f-1),n=0,e=0,PDFView.pageRotation){case 0:case 180:n=notable.reset_scale(t.width),e=notable.reset_scale(t.height);break;case 90:case 270:n=notable.reset_scale(t.height),e=notable.reset_scale(t.width)}return[n,e]},p=function(){var e,t,n,i,o,s,l,c,u,d,f,h,p,m;switch(e=g(),m=e[0],o=e[1],t=a[0].offsetHeight,r.commentObj.referring_to.rotation%360){case 180:case-180:return n=parseFloat(null!=(s=a[0].style.left)?s:a.css("left")),i=parseFloat(null!=(l=a[0].style.top)?l:a.css("top")),[n,i];case 270:case-90:return n=parseFloat(null!=(c=a[0].style.top)?c:a.css("top")),i=parseFloat(null!=(u=a[0].style.left)?u:a.css("left")),[n,m-i];case 90:case-270:return n=parseFloat(null!=(d=a[0].style.top)?d:a.css("top")),i=parseFloat(null!=(f=a[0].style.left)?f:a.css("left")),[o-n,i];default:return n=parseFloat(null!=(h=a[0].style.left)?h:a.css("left")),i=parseFloat(null!=(p=a[0].style.top)?p:a.css("top")),[m-n,o-i]}},w=function(){var e,t,n,i,o,s,l,c;return s=p(),i=s[0],n=s[1],t=d.outerWidth(),e=d.outerHeight(),null==r.commentObj.referring_to.width?t+u>=i?(r.nowrap=!1,r.commentObj.referring_to.width=i):r.nowrap=!0:r.nowrap=!1,e>=n&&(c=parseFloat(null!=(l=r.commentObj.referring_to.y)?l:a.css("top")),o=c-(e-n)-u,o>=0&&(r.commentObj.referring_to.y=o)),e>a.outerHeight()&&(r.commentObj.referring_to.height=e+u),a.css("maxWidth",i),a.css("maxHeight",n)},r.$watch("commentObj.referring_to",function(e,t){return r.clamp_update?void(r.clamp_update=!1):(angular.equals(e,t)||b(e.rotation!==t.rotation),_(e.font_size,t.font_size),w())},!0),_=function(e,t){var n,i,o,s,l,c,u,f,h;if(e!==t&&(null!=(u=r.commentObj.content)?u.length:void 0))return h=parseInt(e)/parseInt(t),s=a.width()-d.width(),o=a.height()-d.height(),f=p(),i=f[0],n=f[1],c=d.width()*h+s,l=d.height()*h+o,r.commentObj.referring_to.width=Math.min(c,i),r.commentObj.referring_to.height=Math.min(l,n)},v=r.commentObj.content,h=function(){var e,t,n,o;if(r.commentObj.content!==v)return v=r.commentObj.content,(null!=(n=r.commentObj.content)?n.length:void 0)?(o=p(),t=o[0],e=o[1],null==r.commentObj.referring_to.width&&(r.commentObj.referring_to.width=Math.min(a.outerWidth(),t)),null==r.commentObj.referring_to.height&&(r.commentObj.referring_to.height=Math.min(d.outerHeight(),e)),i.upsert(r.commentObj)):i.remove_and_upsert_comment(r.commentObj)},r.$on("editing_end",h),r.$on("editing_updated",w),x.add(n.$on("hide-tooltip",function(t,n){var i,o;if(n)return o=e("#tooltip"),(null!=(i=o.scope().commentObj)?i.id:void 0)===r.commentObj.id?h():void 0})),y=null,b=function(e){var t,n,i,o,s,c,d,f,h,p,v,_,y,b,w;if(y=r.commentObj.referring_to.width,i=r.commentObj.referring_to.height,_=((null!=(p=r.commentObj.referring_to.rotation)?p:0)+360)%360,e){switch(b=r.commentObj.referring_to.x,w=r.commentObj.referring_to.y,v=g(),h=v[0],f=v[1],c=d=0,_){case 0:o=Math.max(h-y,0),s=Math.max(f-i,0);break;case 90:c=i,o=h,s=Math.max(f-y,0);break;case 180:c=y,o=h,d=i,s=f;break;case 270:o=Math.max(h-i,0),d=y,s=f}t=o<c?o:Math.min(Math.max(c,b),o),n=s<d?s:Math.min(Math.max(d,w),s),t===b&&n===w||(r.clamp_update=!0,r.commentObj.referring_to.x=t,r.commentObj.referring_to.y=n)}switch(_){case 0:b=r.commentObj.referring_to.x-m,w=r.commentObj.referring_to.y-m;break;case 90:b=r.commentObj.referring_to.x+m,w=r.commentObj.referring_to.y-m;break;case 180:b=r.commentObj.referring_to.x+m,w=r.commentObj.referring_to.y+m;break;case 270:b=r.commentObj.referring_to.x-m,w=r.commentObj.referring_to.y+m}return a.css({left:b+"px",top:w+"px",width:y+"px",height:i+"px",transform:"rotate("+_+"deg)"}),a.attr("offset-value",m),a.find(".comment").css({fontSize:r.commentObj.referring_to.font_size,padding:u+"px",borderWidth:l+"px",lineHeight:r.commentObj.referring_to.font_size+1}),a.data({beforeDragLeft:b,beforeDragTop:w})},b(),r.can_edit())return t(a[0]).resizable({restrict:{restriction:e("#pageContainer"+r.commentObj.referring_to.page_no)[0],endOnly:!1},edges:{top:".handle-right",left:".handle-right",bottom:".handle-right",right:".handle-right"},onstart:function(e){return a.addClass("dragging")},onmove:function(t){var n,i,o,a,s,l,c,f,h,g,m,v,_;return v=t.target,g=notable.rotate(notable.screen_to_pdf({x:t.dx,y:t.dy}),notable.deg2rad(-(null!=(h=r.commentObj.referring_to.rotation)?h:0))),o=g.x,a=g.y,_=parseFloat(v.style.width)||e(v).outerWidth(),_+=o,s=parseFloat(v.style.height)||e(v).outerHeight(),s+=a,i=40,n=27,m=p(),c=m[0],l=m[1],f=Math.max(n,parseFloat(d.height()+u)),_<i&&(_=i),_>c&&(_=c),s<f&&(s=f),s>l&&(s=l),v.style.width=_+"px",v.style.height=s+"px"},onend:function(e){var t;return a.removeClass("dragging"),t=e.target,notable.apply(r,function(){return r.commentObj.referring_to.width=parseFloat(t.style.width),r.commentObj.referring_to.height=parseFloat(t.style.height),i.upsert(r.commentObj)})}}).on("up",notable.remove_cursor_styling)}}}])}).call(t,n(1),n(25))},function(e,t,n){var r;r=n(519),ng.directive("annotationsToolbar",["Mixpanel",function(e){return{restrict:"E",templateUrl:r,replace:!0,controller:"AnnotationSelector"}}])},function(e,t){ng.directive("autofocusUponLoading",function(){return function(e,t,n){var r;return r=function(){return setTimeout(function(){return t.focus()},100)},e.$watch("show_prompt",function(t,n){if(e.show_prompt===!0)return r(),e.$on("documentloaded",function(){return r()})})}})},function(e,t){ng.directive("autofocusUponSigningUp",function(){return function(e,t,n){return e.$watch("we_are",function(){if("signing_up"===e.we_are)return setTimeout(function(){return t.focus()},50)})}})},function(e,t,n){(function(e){ng.directive("autographHover",["DirectiveHelper","TooltipScope","SubscriptionManagerFactory","$timeout",function(t,n,r,i){return function(o,a){var s,l,c,u,d,f,h;return h=r.for_directive(o,a),l={hover:!1,clicked:!1,tool:!1},d=null,a.on("mousemove mouseleave",function(e){if(c(e),d&&i.cancel(d),"mouseleave"!==e.type)return d=i(function(){return f(e)},200)}),c=function(e){return"mouse"===e.type.slice(0,5)?l.hover="mousemove"===e.type:"focus"!==e.type&&"blur"!==e.type||(l.clicked="focus"===e.type),s()?a.removeClass("hover"):u()?void n.$broadcast("start-triangle-listener",e):a.is(".hover")?void 0:a.addClass("hover")},a.find(".comment").focus(c).blur(c),s=function(){return!l.hover&&!l.clicked&&!l.tool},u=function(){return!l.hover&&!l.clicked&&l.tool},f=function(r){var i,s;return i=e("#viewer"),r.pageY=a.offset().top,r=t.event_relative_to_container(i,r),s=notable.pdf_to_screen({x:a.outerWidth(),y:a.outerHeight()}).y,r.height=Math.abs(s),n.$broadcast("show-tooltip",o,r),l.tool=!0},h.add(n.$on("hide-tooltip",function(){return l.tool=!1,c({type:"mouse-fake-leave"})}))}}])}).call(t,n(1))},function(e,t,n){var r;r=n(522),ng.directive("autographSelector",["AnnotationState",function(e){return{restrict:"E",templateUrl:r,replace:!0,scope:!0,transclude:!0,controller:"AutographSelectorController"}}]),ng.controller("AutographSelectorController",["$scope","$timeout","Autograph","AnnotationState","LicensesHelper","AutographManagementDialog","PremiumRequiredDialog","User",function(e,t,n,r,i,o,a,s){var l;return l="Sign Document",e.recent_autographs=[],e.tooltip_message=l,e.tooltip_visible=!1,e.load_recent_autographs=function(){return n.all().then(function(t){var r;return r=n.autographs_last_used_at()||[],t.sort(function(e,t){var n,i;return e=null!=(n=r.find(function(t){return t.id===e.id}))?n:{last_used:0},t=null!=(i=r.find(function(e){return e.id===t.id}))?i:{last_used:0},t.last_used-e.last_used}),e.recent_autographs=t.slice(0,2)})},e.autograph_enabled=function(){return i.has_feature("autograph")},e.open_autograph_management_window=function(){return e.autograph_enabled()?e.open_window("autograph_management"):a.open("autograph")},e.trigger_user_feedback=function(){return e.tooltip_visible=!0,e.tooltip_message="Click on the document to insert",t(function(){return e.tooltip_visible=!1,e.tooltip_message=l},2e3)},e.$on("clicked-recent-signature",e.trigger_user_feedback),e.$on("autographs-updated",e.load_recent_autographs),t(function(){return s.show().then(function(){return e.load_recent_autographs()})},3e3)}])},function(e,t,n){var r;r=n(524),ng.directive("classroomOpenScreen",["AnnotationState",function(e){return{restrict:"E",templateUrl:r,replace:!0,scope:!0,controller:"ClassroomOpenScreenController"}}])},function(e,t,n){(function(e,t){var r;r=n(11),ng.directive("clickAddAnnotations",["DirectiveHelper","AnnotationState","PageState","Autograph","AppendAnnotation","SubscriptionManagerFactory","Mixpanel","KeyCodes","Comment",function(n,i,o,a,s,l,c,u,d){return{restrict:"A",scope:!0,link:function(c,f,h){var p,g,m,v,_,y,b;return b=l.for_directive(c,f),f.one("$destroy",function(){return c.$destroy()}),c.$parent.$on("editing_start",function(){return n.reject_input("edit")}),c.$parent.$on("editing_end",function(){return n.reject_input("clear")}),p=null,g=function(e){return c.$apply(function(){if(e.keyCode===u.escape)return i.set_annotation_mode("normal")})},v=function(t){var r,o,l,c,u,d,h,g,m;return null===p&&(p=e('<div class="autograph-ghost"> <p class="helper-message"> Click To Drop </p> <img /> </div>'),r=p.find("img"),a.get_autograph_url(i.extra_annotation_params.autograph).then(function(e){return r.attr("src",e)}),i.extra_annotation_params.width&&i.extra_annotation_params.height?r.attr({width:notable.restore_scale(i.extra_annotation_params.width),height:notable.restore_scale(i.extra_annotation_params.height)}):r.on("load",function(){var t,n,i;return n={height:r[0].naturalHeight,width:r[0].naturalWidth},i={height:e(window).height(),width:e(window).width()},t={height:e(f).height(),width:e(f).width()},null!=r?r.attr(s.calculateSizeBounds(n,i,t)):void 0}),f.append(p)),d=notable.get_clicked_page_xy(t,f),c=n.page_no(f),o=e("#pageContainer"+c),u=o.width(),l=o.height(),g=notable.restore_scale(d.left).toFixed(2),m=notable.restore_scale(d.top).toFixed(2),h=notable.adjust_for_rotation(g,m,0,0,u,l),g=h[0],m=h[1],p.css({left:g+"px",top:m+"px"})},m=function(e){if(p)return p.remove(),p=null},c.$watch(function(){return i.annotation_mode},function(e,t){if("autograph"===e||"image"===e||"autograph"===t||"image"===t)return e===t&&"text"!==e&&"equation"!==e?void i.set_annotation_mode("normal"):"autograph"===e||"image"===e?(b.$(document).on("keydown",g),f.on("mousemove",v),f.on("mouseleave",m)):(p&&(p.remove(),p=null),b.$(document).off("keydown",g),f.off("mousemove",v),f.off("mouseleave",m))}),y=function(){return t.find(d.all(),function(e){var t;return e.new_comment===!0&&("Video"===(t=e.annotation_type)||"Audio"===t||"Desktop"===t)})},_=function(t){var a,l,u,d,h,m;if(("comment"===(d=i.annotation_mode)||"autograph"===d||"text"===d||"image"===d||"equation"===d)&&o.document&&!r.getSelection().toString().length&&!(HandTool.handTool.active||(null!=(h=PDFViewerApplication.pdfViewer)?h.isInPresentationMode:void 0)||e(t.target).closest("annotation-text").length>0||e(t.target).closest("annotation-equation").length>0||n.reject_input("click")||"comment"===i.annotation_mode&&("video"===(m=i.comment_submode)||"audio"===m||"desktop"===m)&&y()))return p&&(p.remove(),p=null,b.$(document).off("keydown",g)),u=notable.get_clicked_page_xy(t,f),l=n.page_no(f),a={width:notable.reset_scale(f.width()),height:notable.reset_scale(f.height())},c.$apply(function(){return s.append(u,l,a)}),"autograph"===i.annotation_mode||"image"===i.annotation_mode?(i.set_annotation_mode("normal"),n.reject_input("click")):void 0},f.on("mouseup",_)}}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.directive("clickShadowToExit",["Mixpanel",function(t){return function(n,r,i){if(null!=i.clickShadowToExit)return r.on("mouseup",function(o){if(0===r.find(".container").has(o.target).length)return n.$apply(function(){return e.isFunction(n.$eval(i.clickShadowToExit))?n.$eval(i.clickShadowToExit)():n.$eval(i.clickShadowToExit+" = false"),t.track("Click Shadow To Exit",{property:i.clickShadowToExit})})})}}])}).call(t,n(2))},function(e,t,n){(function(e){var t;t=n(507),ng.directive("clickToCopy",function(){return{transclude:!0,scope:{clickToCopy:"=",afterCopy:"&"},template:"<ng-transclude></ng-transclude>",link:function(r,i,o){var a,s,l;return s=function(){return"function"==typeof r.afterCopy?r.afterCopy():void 0},l=function(){var e,t;return e="chrome"===Detectizr.browser.name&&Detectizr.browser.major>43,t="firefox"===Detectizr.browser.name&&Detectizr.browser.major>=41,e||t},("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0)||l()?i.click(function(){var t,n;return n=r.clickToCopy,t=e("<textarea/>").text(n),e("body").append(t),t.select(),document.execCommand("copy"),t.remove(),r.$apply(s)}):(t.config({swfPath:n(208)}),a=new t(i),a.on("ready",function(){return a.on("copy",function(e){var t;return t=e.clipboardData,t.setData("text/plain",r.clickToCopy)}),a.on("aftercopy",function(){return r.$apply(s)})}))}}})}).call(t,n(1))},function(e,t){ng.directive("closeDropdowns",function(){return function(e,t,n){var r;return r=function(t){var n;if(!(null!=(n=PDFViewerApplication.pdfViewer)?n.isInPresentationMode:void 0)&&null!=e.show_dropdown&&PDFViewerApplication.pdfViewer.container.contains(t.target))return notable.apply(e,function(){return e.show_dropdown=null})},window.addEventListener("touchend",r,!1),window.addEventListener("click",r,!1)}})},function(e,t,n){(function(e,t){ng.directive("collisionDetection",["$filter","SubscriptionManagerFactory",function(n,r){return{scope:!0,link:function(i,o,a){var s,l,c,u,d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E;return C=r.for_directive(i,o),_=10,y=8,S=33,l=!1,f=function(){var e;if(l)return null!=(e=console.debug)?e.apply(console,arguments):void 0},u=function(t){var n,r;return r=null!=(n=e("#comment-"+t.id).get(0))?n.clientHeight:void 0,r=0!==r?r:e("#comment-"+t.id).height(),e("#comment-"+t.id).hasClass("spotlight")&&(r-=43),
r},b={},w=function(t){var n,r,i,o;return null!=b[t]?b[t]:(r=e("#pageContainer"+t),0===r.length?{}:(n=notable.get_absolute_pos(r),o=PDFViewerApplication.pdfViewer._pages[t-1].viewport,i={x:n.left,y:n.top-S,height:o.height,width:o.width},b[t]=i,i))},c=function(e){var n,r,i,o,a,s,l,c,d,f;switch(i=E(e),r=i+u(e),n=notable.get_anchor_page_no(),d=null,f=null,n){case 3:e.referring_to.page_no%2===1?(d=e.referring_to.page_no,f=e.referring_to.page_no+2):(d=e.referring_to.page_no+1,f=e.referring_to.page_no+3);break;case 2:e.referring_to.page_no%2===0?(d=e.referring_to.page_no,f=e.referring_to.page_no+2):(d=e.referring_to.page_no+1,f=e.referring_to.page_no+3);break;default:d=e.referring_to.page_no,f=e.referring_to.page_no+1}for(s=0,l={},c=5;s<2*c;)if(o=null,s%2===0?d>0&&(o=d):PDFViewerApplication.pdfViewer.pagesCount>=f&&(o=f),o){if(a=w(o),1===o&&(a.height+=a.y,a.y=0),t.inRange(i,a.y,a.y+a.height+y+1)&&(l.top_page=o),t.inRange(r,a.y,a.y+a.height+y+1)&&(l.bottom_page=o),null!=l.top_page&&null!=l.bottom_page)break;s%2===0?d-=n>=2?2:1:f+=n>=2?2:1,s+=1}else s+=1;return null==l.top_page||l.bottom_page?null==l.bottom_page||l.top_page||(l.top_page=l.bottom_page):l.bottom_page=l.top_page,l},s=function(t){var n,r,i,o;switch(n=t.referring_to.y,PDFView.pageRotation){case 0:n=t.referring_to.y;break;case 90:n=t.referring_to.x;break;case 180:r=(null!=(i=e("#pageContainer"+t.referring_to.page_no).get(0))?i.clientHeight:void 0)||e("#pageContainer"+t.referring_to.page_no).height()||0,n=notable.reset_scale(r)-t.referring_to.y;break;case 270:r=(null!=(o=e("#pageContainer"+t.referring_to.page_no).get(0))?o.clientHeight:void 0)||e("#pageContainer"+t.referring_to.page_no).height()||0,n=notable.reset_scale(r)-t.referring_to.x}return n},E=function(e){var t;return t=s(e),w(e.referring_to.page_no).y+notable.restore_scale(t)+(e.y_offset||0)},d=function(e,t){var n,r;return r=E(e)+u(e)+_,n=E(t),r+1>n},h=function(e,n,r,i){var o,a,s,l,c,d,h,p,g,m,v,y;if(n.length>1){for(m=r/n.length,s=i/n.length,d=Math.floor(m-s),f("cogs",m,"-",s,"=",d),v=t.first(n),o=e[e.indexOf(v)-1],y=E(v)+d,a=null!=o?E(o)+u(o)+_:0,0>d&&y<a&&(p=y-a,f("moving upwards causing more overlaps",d,p),p=Math.abs(p),d+=p),g=[],l=0,c=n.length;l<c;l++)h=n[l],f(h.id+" y_offset",h.y_offset,"move_by",d),g.push(h.y_offset=h.y_offset+d);return g}},g=0,p=0,v=[],m=function(e){var t;return g+=E(e),t=s(e),p+=w(e.referring_to.page_no).y+t*notable.page_scale(),v.push(e)},x=function(e){var t,r,o,a,l,y,x,k,C,S,$,T,A,D,O,P,R,I,M,L;if(0!==i.comments.length){for(b={},o=i.comments,o=n("orderBy")(o,["referring_to.page_no",s]),I=null,x=0,S=o.length;x<S;x++)r=o[x],r.y_offset=0,r.x_offset=0,r.page_y_pos=w(r.referring_to.page_no).y,null!=I?(E(I)+u(I)+_>E(r)&&(O=E(I)+u(I)-E(r),f(r.id+": set comment y_offset",r.referring_to.y*notable.page_scale(),O),r.y_offset=O+_),I=r):I=r;for(g=0,p=0,v=[],I=null,k=0,$=o.length;k<$;k++)r=o[k],null!=I?(d(I,r)?(0===v.length&&m(I),m(r)):(h(o,v,p,g),p=0,g=0,v=[]),I=r):I=r;for(h(o,v,p,g),t=w(notable.get_anchor_page_no()),L=[],C=0,T=o.length;C<T;C++)if(r=o[C],a=null,y=c(r),y.top_page&&y.bottom_page){for(l=A=0,M=Math.abs(y.bottom_page-y.top_page);0<=M?A<=M:A>=M;l=0<=M?++A:--A)P=y.bottom_page-l,R=w(P),D=R.x+R.width-(t.x+t.width),a=null!=a?Math.max(D,a):D;L.push(r.x_offset=a)}return L}},k=t.debounce(function(e){return notable.apply(i,function(){return x(e)})},200),i.$on("comment_updated",function(){return k("comments")}),i.$on("comment_moved",function(){return k("comments")}),i.$on("height_changed",function(){return k("height_changed")}),i.$on("toggle_comments",function(){return k("toggle_comments")}),C.$(window).on("pagerotated",function(){return k("pagerotated")}),C.$(window).on("textlayerrendered",function(){return k("textlayerrendered")}),C.$(window).on("scalechange",function(){return k("scalechange")}),C.$(window).on("resize",function(){return k("resize")})}}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.directive("colorizeInitials",["Colorize","PageState",function(t,n){return function(r,i,o){var a,s,l;return a=null,l=function(e){var n;return n=t.by_index(e),i.attr("style","background-color: #"+n)},s=function(t){return e.findIndex(n.document.collaborating_users,function(e){return parseInt(e.id)===parseInt(t)})},o.$observe("colorizeInitials",function(e){var o,c;return"function"==typeof a&&a(),(null!=(o=n.document)&&null!=(c=o.collaborating_users)?c.length:void 0)&&s(e)!==-1?l(s(e)):(a=r.$watch(function(){var e,t;return null!=(e=n.document)&&null!=(t=e.collaborating_users)?t.length:void 0},function(){var t,r;if(null!=(r=n.document)?r.collaborating_users:void 0)return t=s(e),t!==-1?("function"==typeof a&&a(),l(t)):void 0}),i.attr("style","background-color: #"+t.by_index(0)))})}}])}).call(t,n(2))},function(e,t,n){(function(e){ng.directive("commentSpotlight",["SpotlightState","SubscriptionManagerFactory","$timeout",function(t,n,r){return{priority:1,link:function(i,o,a){var s,l,c,u,d,f,h;return h=n.for_directive(i,o),s=function(t,n){var a,l;if(null==n&&(n=!1),!i.hideComments){if(a=null!=(l=i.calc_where_comment_goes(!1,t))?l:NaN,!t)return o.removeClass("aligned");if(o.addClass("aligned"),isNaN(a))return PDFView.page=i.commentObj.referring_to.page_no,r(function(){return s(t,n)},50);if(n)return a-=e(window).height()/4,e("#viewerContainer").animate({scrollTop:a},200)}},u=function(e){if(!i.hideComments)return e?o.addClass("dim-comment"):o.removeClass("dim-comment")},f=function(e){return e?o.addClass("spotlight"):o.removeClass("spotlight")},c=function(){return h.$(window).off("mousedown",l)},d=function(){return c(),h.$(window).one("mousedown",l)},l=function(n){return t.hovered_annotation_id===i.commentObj.id?void d():o[0]===n.target||e.contains(o[0],n.target)?void d():i.$apply(function(){return t.set_clicked_annotation_id(null)})},o.on("mouseenter",function(e){return i.$apply(function(){return t.set_hovered_annotation_id(i.commentObj.id)}),f(!0)}),o.on("mouseleave",function(e){if(i.$apply(function(){return t.set_hovered_annotation_id(null)}),t.clicked_annotation_id!==i.commentObj.id)return f(!1)}),o.on("click",function(e){if(t.clicked_annotation_id!==i.commentObj.id)return i.$apply(function(){return t.set_clicked_annotation_id(i.commentObj.id)})}),h.add(t.watch_clicked_annotation_id(function(e,n,r){var o;return o=i.commentObj.id,e===o?(s(!0,r),f(!0),d()):n===o&&(s(!1),o!==t.hovered_annotation_id&&f(!1),c()),null===e||e===o?u(!1):null!==e?u(!0):void 0})),h.add(t.watch_hovered_annotation_id(function(e,n){var r;return r=i.commentObj.id,e===r?f(!0):n===r&&r!==t.clicked_annotation_id?f(!1):void 0})),h.add(function(){if(t.clicked_annotation_id===i.commentObj.id&&t.set_clicked_annotation_id(null),t.hovered_annotation_id===i.commentObj.id)return t.set_hovered_annotation_id(null)})}}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.directive("detectStylus",["SettingsFactory","AnnotationState",function(t,n){return{link:function(r,i,o){return i[0].addEventListener("pointerdown",function(i){var o;if(n.is_drawing_mode()||"eraser"===n.annotation_mode)return"pen"===i.pointerType&&(o=t.get("allow_pan_with_touch",!0),e("[touch-action]").removeAttr("touch-action"),n.pan_with_touch!==o)?r.$apply(function(){var e,i;return n.pan_with_touch=o,i=document.querySelector("#snackbar"),e={message:"Stylus Detected. Touch Scrolling is Enabled.",timeout:5e3,actionText:"disable",actionHandler:function(){return i.MaterialSnackbar.cleanup_(),r.$apply(function(){return t.set("allow_pan_with_touch",!1),n.pan_with_touch=!1})}},i.MaterialSnackbar.showSnackbar(e)}):void 0},{capture:!0})}}}])}).call(t,n(1))},function(e,t,n){(function(e){var t;t=n(527),n(188),ng.directive("dictionaryPopup",["SubscriptionManagerFactory","SelectionHelper","$timeout",function(n,r,i){return{scope:!0,restrict:"E",templateUrl:t,link:function(t,o,a){var s,l,c,u,d,f,h,p,g;p=n.for_directive(t,o),t.popup_below=!0,u=o.children(),l=u.find(".mdl-card"),c=function(){return u.css("display","none")},h=function(){return u.css("display","")},u.find(".close").on("click",c),s=null,g=function(t){var n,r;if(r=o[0],n=t.target,!e.contains(r,n))return i.cancel(s),s=i(function(){return p.$(window).off("mouseup touchend",g),c()},100)},d=function(){return p.$(window).on("mouseup touchend",g)},f=function(n){var i,o,a,s,c,d,f,h,p;return d=r.get_bounding_client_rect(),h=e("#viewerContainer"),c=h.scrollTop(),s=h.scrollLeft(),p=window.innerHeight,t.popup_below=p-d.bottom>d.top,i=d.left+d.width/2-n/2,i+=s,f=t.popup_below?d.bottom:d.top,f-=h.offset().top,f+=c,a=h[0].scrollHeight,o=t.popup_below?a-f:f,u.css({top:f+"px",left:i+"px"}),l.css({"max-height":o+"px"})},t.display_popup=function(e){var t;switch(i.cancel(s),e){case"dictionary":t=300;break;case"translation":t=500;break;default:t=300}return f(t),d(),u.css({width:t+"px"}),h()}}}}])}).call(t,n(1))},function(e,t){ng.directive("disappearAfter",function(){return function(e,t,n){var r;return r=null!=n.disappearAfter?n.disappearAfter:5,setTimeout(function(){return t.addClass("disappear")},1e3*r),t.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){return t.hide()})}})},function(e,t,n){(function(e){ng.directive("documentloaded",["$rootScope","$timeout",function(t,n){return function(r,i,o){return e(window).on("firstpage",function(){return n(function(){return t.$broadcast("documentloaded")})}),e(window).on("documentclose",function(){return n(function(){return t.$broadcast("documentclose")})})}}])}).call(t,n(1))},function(e,t,n){(function(e){n(510),ng.directive("dropIt",["$parse",function(t){return function(t,n,r){var i;return i=r.changeAction,e(n).dropit({beforeShow:function(){return t.$apply(function(){return"function"==typeof t[i]?t[i](!0):void 0})},beforeHide:function(){return t.$apply(function(){return"function"==typeof t[i]?t[i](!1):void 0})}})}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.directive("editable",["$timeout","$sanitize","$filter","CommentsHelper","KeyCodes","ReadOnlyFileDialog",function(t,n,r,i,o,a){return{restrict:"A",require:"?ngModel",link:function(i,s,l,c){var u,d,f,h,p,g,m,v,_,y,b,w;if(c)return m=function(){return s.closest(".new-reply").length>0},v=function(){return i.is_reply()},g=function(){return!(v()||m())},p=!1,s.on("keydown",function(e){return"false"===l.editable?(e.preventDefault(),e.stopImmediatePropagation(),a.open(),!1):_(e)?(e.preventDefault(),e.stopImmediatePropagation(),document.execCommand("insertText",!1,"    "),!1):void 0}),i.$watch("editable_focusable",function(){if(i.editable_focusable()||m())return s.wysiwyg({dragAndDropImages:!1,activeToolbarClass:null,toolbarSelector:null})}),d=function(e){return l.linkify?r("linky")(e,"_blank",{contenteditable:"false"}):n(e)},c.$render=function(){var e;return e=d(c.$viewValue),s.html(e),h(!0),w()},w=function(){if(""===i.commentObj.content&&g())return t(function(){return s.focus()},200)},s.blur(function(t){var n;return n=e("#tooltip"),(!n.visible()||i.commentObj.id!==n.scope().commentObj.id||0!==s.cleanHtml().length)&&(p||b(),p=!1,!0)}),s.keydown(function(e){if(u(e))return e.preventDefault(),e.stopPropagation()}),s.closest(".commentBody").find(".required-feature-premium, .required-feature-work").mousedown(function(e){return p=!0}),s.keyup(function(e){if(y(),u(e))return b(),p=!0,s.blur(),!1}),u=function(e){return l.enterToExit&&e.keyCode===o.enter&&!e.shiftKey||e.keyCode===o.escape},_=function(e){return e.keyCode===o.tab},s.focus(function(){return f()}),s.get(0).addEventListener("paste",function(e){var t;return e.preventDefault(),t=e.clipboardData.getData("text/plain"),document.execCommand("insertText",!1,t)}),b=function(){return notable.apply(i,function(){return y(),s.html(d(s.cleanHtml()))}),s.trigger("save"),h(),notable.apply(i,function(){return i.$emit("editing_end")})},y=function(){var t;return t=e.trim(s.cleanHtml()),c.$setViewValue(t),notable.apply(i,function(){return i.$emit("editing_updated")})},f=function(){if(l.linkify?s.html(n(c.$viewValue)):s.html(n(s.html())),s.addClass("textarea-lookalike"),notable.apply(i,function(){return i.$emit("editing_start",i.commentObj)}),m()&&e.trim(s.html())===i.placeholder_text)return s.removeClass("placeholder"),s.text("")},h=function(t){return s.removeClass("textarea-lookalike"),g()||v()?s.css("height",""):m()&&""===e.trim(s.text())?(s.addClass("placeholder"),s.text(i.placeholder_text)):void 0},i.$on("$destroy",function(){if(s.is(":focus"))return b()})}}}])}).call(t,n(1))},function(e,t){ng.directive("embedUninstallSurvey",function(){return{restrict:"E",link:function(e,t,n){return null!=e.user_id?t.append('<iframe src="https://notablepdf.wufoo.com/embed/z1dj5eue1mwqe52/def/Field5='+e.user_id+"&Field7="+e.email+'" height="585" allowTransparency="true" frameborder="0" scrolling="no" style="width:100%;border:none">\n  <a href="https://notablepdf.wufoo.com/forms/z1dj5eue1mwqe52/def/Field5='+e.user_id+"&Field7="+e.email+'">Fill out my Wufoo form!</a>\n</iframe>'):t.append('<iframe src="https://notablepdf.wufoo.com/embed/z1dj5eue1mwqe52/" height="585" allowTransparency="true" frameborder="0" scrolling="no" style="width:100%;border:none">\n  <a href="https://notablepdf.wufoo.com/forms/z1dj5eue1mwqe52/">Fill out my Wufoo form!</a>\n</iframe>')}}})},function(e,t){ng.directive("enterLicenseField",function(){return{restrict:"A",link:function(e,t,n){var r,i,o,a,s,l,c,u;return i=function(){return e.license_key},l=function(n){return t.val(n),e.license_key=n},r=function(e){var t,n,r,i,o,a;if(null!=e==!1||0===e.length)return e;if(r=e.charAt(0),r>="0"&&r<="9"){for(n=0,a="",i=0,o=e.length;i<o;i++)t=e[i],4===n&&(a+="-",n=0),"-"!==t&&(a+=t,n++);return a}},c=function(e,n){var r,i;return r=t[0],void 0!==r.setSelectionRange?(r.focus(),r.setSelectionRange(e,n)):void 0!==r.createTextRange?(i=r.createTextRange(),i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i.select()):void 0},s=0,a=0,u=function(){var e;return e=t[0],s=void 0!==e.selectionStart?e.selectionStart:-1,a=void 0!==e.selectionEnd?e.selectionEnd:-1},o=function(e){var n;if(!(s<0||a<0))return n=t[0],c(s+e,a+e)},e.auto_correct_license=function(){var e,t,n,a;if(n=i(),e=r(n),u(),null!=e!=!1&&e!==n)return l(e),a=0,e.length>n.length&&(t=e[s-1],"-"===t&&(a=1)),o(a)}}}})},function(e,t){ng.directive("enterToSave",["KeyCodes",function(e){return{restrict:"A",link:function(t,n,r){var i;return i=r.enterToSave,(null!=i?i.length:void 0)||(i="save"),n.on("keydown",function(n){if(n.keyCode===e.enter)return"function"==typeof t[i]?t[i]():void 0})}}}])},function(e,t,n){(function(e){ng.directive("equationHover",["DirectiveHelper","TooltipScope","SubscriptionManagerFactory","$timeout",function(t,n,r,i){return function(o,a){var s,l,c,u,d,f,h;return h=r.for_directive(o,a),l={hover:!1,clicked:!1,tool:!1},d=null,a.on("mousemove mouseleave",function(e){if(c(e),d&&i.cancel(d),"mouseleave"!==e.type)return d=i(function(){return f(e)},200)}),c=function(e){return"mouse"===e.type.slice(0,5)?l.hover="mousemove"===e.type:"focus"!==e.type&&"blur"!==e.type||(l.clicked="focus"===e.type),s()?a.removeClass("hover"):u()?void n.$broadcast("start-triangle-listener",e):a.is(".hover")?void 0:a.addClass("hover")},a.find(".comment").focus(c).blur(c),s=function(){return!l.hover&&!l.clicked&&!l.tool},u=function(){return!l.hover&&!l.clicked&&l.tool},f=function(r){var i,s;return i=e("#viewer"),r.pageY=a.offset().top,r=t.event_relative_to_container(i,r),s=notable.pdf_to_screen({x:a.outerWidth(),y:a.outerHeight()}).y,r.height=Math.abs(s),n.$broadcast("show-tooltip",o,r),l.tool=!0},h.add(n.$on("hide-tooltip",function(){return l.tool=!1,c({type:"mouse-fake-leave"})}))}}])}).call(t,n(1))},function(e,t){ng.directive("fbShareGenerate",function(){return function(e,t,n){return t.click(function(){var t,n;return n=e.page_state.document.share_url,t="Check out this file on Kami",window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(n)+"&t="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436")})}})},function(e,t){ng.directive("filedrag",["$timeout","PageState",function(e,t){return function(n,r,i){var o,a;if(a=function(e){var r;return e.stopPropagation(),e.preventDefault(),"loaded"===t.document_state?n.$broadcast("drop_file",{page:"undefined"!=typeof PDFViewerApplication&&null!==PDFViewerApplication&&null!=(r=PDFViewerApplication.pdfViewer)?r.currentPageNumber:void 0,e:e}):(t.add_next_load_params({source:"drop"}),window.webViewerChange({target:{files:e.dataTransfer.files,id:"fileInput"}}))},o=function(e){return e.stopPropagation(),e.preventDefault()},r[0].addEventListener("drop",a,!1),r.on("dragenter dragstart dragend dragleave dragover drag",o,!1),Modernizr.draganddrop)return r.on("dragenter dragover",function(t){return function(n){var i;if(i=n.originalEvent.dataTransfer.items,null==i||0!==i.length&&"file"===i[0].kind)return e.cancel(t.dragTimer),r.addClass("dropping")}}(this)),r.on("drop",function(t){return function(){return t.dragTimer=e(function(){return r.removeClass("dropping")},1e3)}}(this)),r.on("dragend dragleave",function(t){return function(){return t.dragTimer=e(function(){return r.removeClass("dropping")},25)}}(this))}}])},function(e,t){ng.directive("focusMe",["$timeout","$parse",function(e,t){return function(n,r,i){var o;return o=t(i.focusMe),n.$watch(o,function(t){if(t)return e(function(){return r[0].focus()})}),r.bind("blur",function(){return n.$apply(o.assign(n,!1))})}}])},function(e,t,n){(function(e,t){ng.directive("formField",["DirectiveHelper","GroupedFormFields","SubscriptionManagerFactory","$timeout","Comment",function(n,r,i,o,a){return{scope:!0,link:function(o,s,l){var c,u,d,f,h,p,g,m,v;return m=i.for_directive(o,s),u=s.data("annotation-id"),d=s.data("annotation-name"),c=function(){return s.data("annotation-has-parent")===!0},f=function(){return s.data("annotation-parent-name")},g=function(){var t,r,i,l;return r=s.find("input[type=checkbox]").length||s.find("input[type=radio]").length?"button_widget":s.find("select").length?"choice_widget":s.find("input[type=text]").length||s.find("textarea").length?"text_widget":null,t=e.find(o.form_fields,function(e){return e.referring_to.annotation_name===d}),null==t&&(i=n.page_no(s),l=n.pos_relative_to_page(s,i),a.create_comment({annotation_type:"FormField",page_no:i,content:s.children().val(),referring_to:{annotation_id:u,annotation_name:d,input_type:r},x:l.left,y:l.top}),t=e.findLast(a.all(),function(e){return e.referring_to.annotation_name===d})),t},p=function(){return s.find("[type=checkbox], [type=radio]")},h=null,v=function(e){var t,n;if(null==e&&(e=null),null==h&&(h=g()),t=p(),n=h.content,t.length?h.content=t[0].checked.toString():null!=e&&(h.content=e.target.value),h.content!==n)return a.upsert(h)},m.add(r.on_change(function(e){var n,r;if(e.target.name===f())return n=p(),t.contains(s[0],null!=e?e.target:void 0)||null!=n&&null!=(r=n[0])&&(r.checked=!1),v()})),s.on("change",function(e){return c()?o.$apply(function(){return r.broadcast_change(e)}):o.$apply(function(){return v(e)})})}}}])}).call(t,n(2),n(1))},function(e,t){ng.directive("grayAvatar",["$timeout",function(e){return function(e,t,n){return t.focus(function(){return t.closest(".comment-wrapper").siblings(".author").find(".avatar").removeClass("grayed-out")}),t.blur(function(){return t.closest(".comment-wrapper").siblings(".author").find(".avatar").addClass("grayed-out")})}}])},function(e,t){ng.directive("guestLoginClick",["$rootScope",function(e){return function(t,n,r){return n.click(function(){return e.$apply(function(){return e.$broadcast("guest_login")}),!0})}}])},function(e,t,n){var r;r=n(534),ng.directive("helpDropdown",function(){return{restrict:"A",templateUrl:r,scope:!0,link:function(e,t,n){return e.hanger=n.hanger,e.short=n.short}}})},function(e,t){ng.directive("highlightSpotlight",["SpotlightState",function(e){return{priority:2,link:function(e,t,n){if("Comment"!==e.commentObj.annotation_type)return t.off("click")}}}])},function(e,t,n){(function(e){ng.directive("highlightWrapper",["DirectiveHelper","TooltipScope","SubscriptionManagerFactory","$timeout",function(t,n,r,i){return function(o,a){var s,l,c,u,d,f,h,p,g,m;if(h=r.for_directive(o,a),s=o.commentObj.annotation_type,"tts"!==s&&"Comment"!==s)return p=33,g=60,m=20,c={hover:!1,tool:!1},d=null,a.on("mousemove mouseleave",function(e){if(u(e),"Comment"!==o.commentObj.annotation_type&&(d&&i.cancel(d),"mouseleave"!==e.type))return d=i(function(){return f(e)},200)}),u=function(e){"mouse"===e.type.slice(0,5)&&(c.hover="mousemove"===e.type),l()||!c.hover&&c.tool&&n.$broadcast("start-triangle-listener",e)},l=function(){return!c.hover&&!c.tool},f=function(r){var i;return i=e("#viewer"),r=t.event_relative_to_container(i,r),n.$broadcast("show-tooltip",o,r,m,30),c.tool=!0},h.add(n.$on("hide-tooltip",function(){return c.tool=!1,u({type:"mouse-fake-leave"})}))}}])}).call(t,n(1))},function(e,t,n){ng.directive("initializeDocumentState",["URLParams","User","PageState",function(e,t,n){return{scope:!0,link:function(r,i,o){var a;return a=function(){if(!(PDFViewerApplication.url||e.file&&"null"!==e.file||e.state||e.document_identifier||DEFAULT_URL))return n.change_state("none",!0)},t.show().then(a),r.$on("authenticated_user",a)}}}])},function(e,t){ng.directive("installToDrive",["Mixpanel","GoogleAuth",function(e,t){return{link:function(n,r,i){return n.drive_message="Install to Google Drive",r.click(function(){return e.track("Clicked Install Google Drive"),t.authorize_now({offline:!0}).then(function(){return e.track("Successfully installed Drive"),n.drive_message="Success! Installed to Drive."},function(t){return n.drive_message="Please click Accept button to install",e.track("Install Google Drive Error",{error:n.drive_message})})})}}}])},function(e,t,n){(function(e,t){ng.directive("intercom",["User",function(n){return function(r,i,o){var a,s;return r.intercom_disabled=!0,s=function(){return function(){var t,n,r,i,o;o=window,r=o.Intercom,i=function(){var e,n;e=t.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://widget.intercom.io/widget/xsvhocj1",n=t.getElementsByTagName("script")[0],n.parentNode.insertBefore(e,n)},"function"==typeof r?(r("reattach_activator"),r("update",intercomSettings)):(t=document,n=function(){n.c(arguments)},n.q=[],n.c=function(e){n.q.push(e)},o.Intercom=n,e(document).ready(i))}()},a=function(){return n.show().then(function(e){var n,i;return e.intercom_properties?r.intercom_disabled?(r.intercom_disabled=!1,r.arrow="up",s(),window.Intercom("boot",t.extend({app_id:"xsvhocj1",user_id:e.id,name:e.name,email:e.email,guest_user:e.guest_user,os:notable.os(),operating_system:notable.operating_system(),version:"2.0.9593-20180301035713",version_name:notable.version_name,using:notable.getDeployment(),custom_launcher_selector:"#custom-intercom",created_at:Date.parse(e.created_at)/1e3},e.intercom_properties)),window.Intercom("onUnreadCountChange",function(e){return r.$apply(function(){return e>0?(r.unread=!0,r.count=e):r.unread=!1})}),window.Intercom("onShow",function(){return r.$apply(function(){return r.arrow="down"})}),window.Intercom("onHide",function(){return r.$apply(function(){return r.arrow="up"})}),i=setTimeout(function(){clearInterval(n)},3e4),n=setInterval(function(){return r.$apply(function(){window.Intercom.booted&&(r.intercom_loaded=!0,clearInterval(n),clearTimeout(i))})},100)):void 0:r.intercom_disabled=!0})},a(),r.$on("refresh_user",function(e){return function(){if(r.intercom_disabled)return a()}}(this))}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){var t;t=n(535),ng.factory("InvalidFileDialog",["ngDialog",function(e){var n;return n=function(n){return e.open({template:t,controller:"InvalidFileController",overlay:!1,className:"",showClose:!1,appendTo:"#outerContainer",data:{exception:n}})},{open:n}}]),window.invalid_pdf_error=function(e){var t,n;return n=angular.element(document.body).injector().get("InvalidFileDialog"),(t=angular.element(document.body).injector().get("$timeout"))(function(){return n.open(e)})},ng.controller("InvalidFileController",["$scope","ConvertFile","PageState","Mixpanel","LicensesHelper","DocumentManager","$timeout","$sce","User","PremiumRequiredDialog",function(t,n,r,i,o,a,s,l,c,u){var d,f,h,p;return t.domain_industry=null!=(f=c.current_user())&&null!=(h=f.domain_properties)?h.industry:void 0,p=function(){var r,a,s,c,d;return o.has_feature("conversion")?(t.exception=t.ngDialogData.exception,r=null!=(a=t.exception)&&null!=(s=a.source)&&null!=(c=s.contentType)&&null!=(d=c.split(";"))?d[0]:void 0,e.includes(["application/json","text/html"],r)?(t.conversion_state="iframe",void n.get_text().then(function(e){return t.iframe_src=l.trustAsHtml(e)})):(t.error_message=t.exception.message,t.conversion_state="initial",i.track("Show File Conversion"))):(u.open("conversion"),void t.closeThisDialog())},p(),d=null,t.upload_and_convert=function(){var e,o;return t.conversion_state="uploading",t.upload_percentage_text="Uploading 0%",t.upload_percentage_value=0,e=null!=(o=r.next_load_params.filename)?o:r.document_name(),d=n.convert(e),d.then(function(e){return r.add_next_load_params({source:"conversion",document_identifier:e}),a.open_file(e),i.track("File Converted",{success:!0}),t.conversion_state=null,t.upload_percentage_text=null,t.upload_percentage_value=null,t.closeThisDialog()},function(e){return"upload"===e.type?(i.track("File Conversion Upload Error",{success:!1,status:e.status,error:e.error}),t.upload_percentage_text="0%",t.upload_percentage_value=0,t.conversion_state="upload_error"):(i.track("File Conversion Error",{success:!1,status:e.status,error:e.error,job_id:e.conversion_job_id}),t.upload_percentage_text="0%",t.upload_percentage_value=0,"ConversionProcessor::InvalidFormat"===e.error?(t.conversion_state="conversion_error_format",t.conversion_error_message=e.error_message):(t.conversion_state="conversion_error",t.conversion_error_message=null),t.conversion_job_id=e.conversion_job_id)},function(e){return e.processing?(t.upload_percentage_text="Processing...",t.upload_percentage_value=100):(t.upload_percentage_value=Math.round(e.loaded/e.total*100),t.upload_percentage_text="Uploading "+t.upload_percentage_value+"%")})},t.abort_convert=function(){return null!=d&&"function"==typeof d.abort&&d.abort(),t.conversion_state=null,t.upload_percentage_text=null,t.upload_percentage_value=null},t.download_file=function(){return n.download()}}])}).call(t,n(2))},function(e,t,n){(function(e){var t;t=n(539),ng.directive("localstoreDisabledWarning",["Mixpanel","localStorageService",function(n,r){return{restrict:"E",scope:!0,templateUrl:t,controller:["$scope",function(t){return t.show_localstore_warning=!1,t.$on("LocalStorageModule.notification.warning",function(e,n){if("LOCAL_STORAGE_NOT_SUPPORTED"===n&&!r.isSupported&&!r.cookie.isSupported)return t.open()}),t.open=e.once(function(){return t.show_localstore_warning=!0,n.track("LS Disabled Warning Shown")}),t.close=function(){return t.show_localstore_warning=!1,n.track("LS Disabled Warning Dismissed")},t.open_guide=function(){return n.track("LS Disabled Warning Open Guide"),window.open("https://help.kamihq.com/chrome/kami-keeps-asking-me-to-login-or-authenticate-myself","_blank")}}]}}])}).call(t,n(2))},function(e,t){ng.directive("mdlParse",["$timeout",function(e){return function(t,n){return e(function(){return componentHandler.upgradeElements(n[0])},0)}}])},function(e,t){ng.directive("notableTheme",["SettingsFactory","URLParams","LicensesHelper",function(e,t,n){return{scope:!0,link:function(r,i,o){var a,s,l,c;return c=function(){try{return JSON.parse(t.viewer_options)}catch(e){}}(),null==c&&(c={}),notable.is_embed&&i.addClass("embed-theme"),a=function(){var t,n;return c&&notable.is_embed?(("dark"===(null!=c?c.theme:void 0)||(null!=c&&null!=(n=c.theme)?n.indexOf("dark-theme"):void 0)>-1)&&i.removeClass("light-theme"),"light"!==(null!=c?c.theme:void 0)&&i.addClass(c.theme+"-theme"),(null!=c?c.show_save:void 0)===!1&&i.addClass("hide-save"),(null!=c?c.show_print:void 0)===!1&&i.addClass("hide-print"),(null!=c?c.show_help:void 0)===!1&&i.addClass("hide-help"),void((null!=c?c.show_menu:void 0)===!1&&i.addClass("hide-menu"))):(t=e.get("new_theme_enabled"),t===!1?i.removeClass("light-theme"):i.addClass("light-theme"))},a(),s=r.$on("settings-updated",function(e,t){if(t)return a(),s()}),l=function(){var e,t;i.removeClass(function(e,t){return/^feature-/.test(t)}),t=[];for(e in n.active_features)t.push(i.addClass("feature-"+e));return t},r.$on("features_updated",l)}}}])},function(e,t){ng.directive("ntHtmlInclude",["$templateRequest",function(e){return{restrict:"A",priority:400,compile:function(t,n){var r;return r=n.ntHtmlInclude,e(r).then(function(e){return t.html(e)})}}}])},function(e,t){ng.directive("ntRadioValue",["$parse",function(e){return{scope:!0,link:function(t,n,r){var i;if(null!=r.ntRadioValue&&null!=r.ntRadioBind)return t.$watch(r.ntRadioBind,function(e,t){return e===r.ntRadioValue?n.addClass("selected"):n.removeClass("selected")}),i=e(r.ntRadioBind),n.click(function(e){return t.$apply(function(){return i.assign(t,r.ntRadioValue)})})}}}])},function(e,t,n){(function(e,t){ng.directive("ocr",["$rootScope","$compile","NaclWorker","PageState","LicensesHelper","localStorageService",function(n,r,i,o,a,s){var l,c;return c=notable.is_extension?"/content/web/notablecompiled/2.0.9593-20180301035713/notable_worker.js":"/web/notablecompiled/2.0.9593-20180301035713/notable_worker.js",c=location.protocol+"//"+location.host+"/"+c,l=operative({calculateTextFlow:function(e,t,n){var r,i;return i={items:e,styles:{"fake-font":{fontFamily:"sans-serif"}}},r=new pdfjsTextLayoutEvaluator.TextLayoutEvaluator,r.calculateTextFlow(t,i.items,i.styles),n(i)}},[c]),function(n,r,c){return e(window).on("textlayerrendered",function(r){var c,u,d,f,h,p,g,m,v,_;if(!a.has_flag("integrated_ocr")){if(f=r.originalEvent.detail.pageNumber,d=f-1,h=PDFViewerApplication.pdfViewer.getPageView(d),p=h.pdfPage,u=(null!=(_=h.textLayer.textContent)?_.items.length:void 0)>0)return;return i.detectWords(p).then(function(r){var i,a,s;if(r.items.length)return s=p.getViewport(1),a=t.map(r.items,function(e){var n,r;return n=1/CSS_UNITS,e=t.clone(e),e.x*=n,e.y*=n,e.width*=n,e.height*=n,e.y+=e.height,r=PDFJS.Util.transform(PDFJS.Util.inverseTransform(s.transform),[1,0,0,e.height,e.x,e.y]),{str:". ",coalesceType:"char",dir:"ltr",structure:[],width:e.width,height:e.height,transform:r,items:[],fontName:"fake-font"}}),i={x:0,y:0,width:s.width,height:s.height},l.calculateTextFlow(a,i,function(t){var r,i;if(t.items.length>1)return i=h.textLayer,i.renderingDone=!1,i.divContentDone=!1,h.textLayer.setTextContent(t),h.textLayer.render(),r=e('<div class="textlayer-ocred">Scanned OCR</div>'),r.click(function(){return n.$apply(function(){return n.$broadcast("open_ocr_beta_message")})}),e(h.textLayer.textLayerDiv).append(r),n.$apply(function(){return o.ocr_processed=!0})})})}if(c=s.get("ocr_dismissed"),!c||!c.includes(null!=(g=o.document)?g.document_identifier:void 0)){if(f=r.originalEvent.detail.pageNumber,d=f-1,h=PDFViewerApplication.pdfViewer.getPageView(d),p=h.pdfPage,u=(null!=(m=h.textLayer.textContent)?m.items.length:void 0)>0,u||t.isEmpty(null!=(v=p.objs)?v.objs:void 0))return;return n.$apply(function(){return o.can_ocr=!0})}})}}])}).call(t,n(1),n(2))},function(e,t,n){var r,i,o,a,s,l;s=n(542),o=null,i=null,r=null,a=function(e,t){return null==t&&(t=9e5),o.MaterialSnackbar.cleanup_(),setTimeout(function(){o.MaterialSnackbar.showSnackbar({message:e,timeout:t})},1e3)},l=function(e){return i.MaterialProgress.setProgress(e)},ng.directive("ocrBeta",["SettingsFactory","GoogleDrive","Mixpanel","PageState","ProcessDocumentService","LicensesHelper","PremiumRequiredDialog","$timeout","$interval","localStorageService",function(e,t,n,c,u,d,f,h,p,g){return{restrict:"E",scope:!0,templateUrl:s,controller:["$scope",function(e){return e.run_ocr=function(){var i,o,s,h,g,m,v,_,y;if("processing"!==e.status)return n.track("OCR Started",{document_identifier:c.document.document_identifier,is_kami_file:!!c.document.file_url}),v=PDFViewerApplication.pdfDocument.numPages,v>15&&!d.has_feature("ocr")?f.open("ocr"):(m=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],
i.push({destination:t});return i},g=function(){return p.cancel(r),n.track("OCR Success",{document_identifier:c.document.document_identifier,is_kami_file:!!c.document.file_url}),a("OCR Complete!",5e3),l(100),e.status="done",t.load_document({action:"open",ids:[c.document.document_identifier],userId:c.google_user_id})},h=function(t){return n.track("OCR Error",{document_identifier:c.document.document_identifier,is_kami_file:!!c.document.file_url}),e.status="error",p.cancel(r),a("Something went wrong while running OCR",5e3)},s=1e4,o=0,y=500,_=function(){return o<s-y?(o+=y,l(Math.floor(o/s*99))):p.cancel(r)},i=function(){return s=1e3*(.232*v+10),a("Running OCR..."),e.status="processing",r=p(_,y),u.start_processing("ocr",g,h,void 0,m)},e.status="checking",u.check_file("OCR",i))},e.page_state=c,e.show_beta_message=!1,e.$watch("page_state.can_ocr",function(t,n){if(t===!0&&!notable.is_embed)return e.open()}),e.open=function(t){var r,a;return null==t&&(t="automatic"),e.show_beta_message=!0,e.status="normal",o=document.querySelector("#snackbar"),i=document.querySelector("#ocr-progress"),n.track("OCR Beta Message Shown",{open_from:t,name:null!=(r=c.document)?r.name:void 0,document_identifier:null!=(a=c.document)?a.document_identifier:void 0})},e.close=function(){var t,r,i,o;return e.show_beta_message=!1,t=g.get("ocr_dismissed")||[],t.push(null!=(r=c.document)?r.document_identifier:void 0),g.set("ocr_dismissed",t),n.track("OCR Beta Message Dismissed",{name:null!=(i=c.document)?i.name:void 0,document_identifier:null!=(o=c.document)?o.document_identifier:void 0})},e.$on("$destroy",function(){return p.cancel(r),null!=o?o.MaterialSnackbar.cleanup_():void 0})}]}}])},function(e,t,n){(function(e){var t;t=n(11),ng.directive("pageFileDrop",["DirectiveHelper","AnnotationState","PageState","ngDialog","AppendAnnotation","PremiumRequiredDialog","LicensesHelper",function(t,n,r,i,o,a,s){return{restrict:"A",link:function(r,l,c){var u,d,f,h;return u=function(r,i){var a,s,c,u,d,f;return n.extra_annotation_params.width&&n.extra_annotation_params.height||(s={height:i.naturalHeight,width:i.naturalWidth},f={height:e(window).height(),width:e(window).width()},a={height:e(l).height(),width:e(l).width()},o.calculateSizeBounds(s,f,a)),d=notable.get_clicked_page_xy(r,l),u=t.page_no(l),c={width:notable.reset_scale(l.width()),height:notable.reset_scale(l.height())},o.append(d,u,c)},h=function(e,t){var n;return n=e.dataTransfer.files,i.open({template:"<h4><center>Are you sure you want to open</center></h4> <br/> <p><center><small><i>"+t.name+'</i></small></center></p> <br/> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="confirm();closeThisDialog();">OPEN</button> <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">CANCEL</button> </div>',plain:!0,controller:["$scope","PageState",function(e,t){return e.confirm=function(){return t.add_next_load_params({source:"drop"}),window.webViewerChange({target:{files:n,id:"fileInput"}})}}]})},f=function(e){var t,i,o,l,c,d;if(e.preventDefault(),e.stopPropagation(),t=null!=(o=e.dataTransfer)&&null!=(l=o.files)?l[0]:void 0)return"image/"===t.type.substring(0,6)?s.has_feature("image")?(i=n.annotation_mode,r.insert_image(null!=(c=e.dataTransfer)&&null!=(d=c.files)?d[0]:void 0,"droppingImage",function(t){return u(e,t),n.set_annotation_mode(i)})):a.open("image",!1):h(e,t)},d=function(e){return e.preventDefault(),e.stopPropagation()},l[0].addEventListener("drop",f,!1),r.$on("drop_file",function(e,n){if(n.page===t.page_no(l))return f(n.e)}),l.on("dragenter dragstart dragend dragleave dragover drag",d,!1)}}}])}).call(t,n(1))},function(e,t,n){(function(e){var t;n(512),t=function(){function e(e,t,n,r){i.DOM.zoomTarget=e,i.DOM.actionArea=t,i.DOM.container=n,i.config=r||i.config,this.enable()}var t,n,r,i,o,a,s,l,c;return r=null,i={config:{zoomDampingFactor:1e3,MAX_SCALE:10,MIN_SCALE:.25,page:".page",pageId:"pageContainer",textLayer:".textLayer",pageLeftOffset:55,pageMarginTop:8},DOM:{targetArea:null,actionArea:null,container:null},state:{},originalState:{frameFree:!0,pinchState:"end",numberofPointers:0,actionAreaOffset:null,initialScroll:null,initialPageOffset:null,finalPageOffset:null,zoomCenter:null,initialDistance:0,zoomScale:1,translation:{x:0,y:0}},eventHooks:{pinchStart:[],pinchMove:[],pinchEnd:[]},resetState:function(){this.state=JSON.parse(JSON.stringify(this.originalState))}},t={isIpad:(null!=(o=Detectizr.browser)&&null!=(a=o.userAgent)?a.indexOf("ipad"):void 0)!==-1,isIphone:(null!=(s=Detectizr.browser)&&null!=(l=s.userAgent)?l.indexOf("iphone"):void 0)!==-1},c={zoomPan:function(e,t,n,r){var o,a;return a=" scale("+e+") ",o=" translate("+n+"px , "+r+"px) ",i.DOM.zoomTarget.style.webkitTransform=i.DOM.zoomTarget.style.transform=a+o},setTransformOrigin:function(e){return i.DOM.zoomTarget.style.transformOrigin=e.x+"px "+e.y+"px"},render:function(e){return PDFViewerApplication.setZoom(e)},cancelRender:function(){return PDFViewerApplication.pdfViewer.cancelAllRendering()},scroll:function(e,t){return i.DOM.container.scrollLeft=e>0?e:0,i.DOM.container.scrollTop=t>0?t:0},setContainerBounds:function(){if(!t.isIpad&&!t.isIphone)return i.DOM.container.style.overflowX="hidden"},unsetContainerBounds:function(){return i.DOM.container.style.overflowX="auto"},unsetTransform:function(){return i.DOM.zoomTarget.style.webkitTransform=i.DOM.zoomTarget.style.transform=null,i.DOM.zoomTarget.style.transformOrigin=null}},n={initialise:function(){i.resetState(),r=r||new window.PinchZoomDetector(i.DOM.actionArea,{threshold:5}),this.events.init()},destroy:function(){return r.destroy()},runHooks:function(e,t){var n,r,o,a,s,l;for(s=i.eventHooks[e],l=[],o=0,a=s.length;o<a;o++){r=s[o];try{l.push(r.callback.call(null,t))}catch(e){n=e,l.push(void 0)}}return l},events:{pointersChange:function(e){var t;null!=i.state.zoomCenter?(t=n.calculations.calculateZoomCenterOffset(e),i.state.zoomCenter.x+=t.x,i.state.zoomCenter.y+=t.y):(i.state.actionAreaOffset=i.DOM.actionArea.getBoundingClientRect(),i.state.zoomCenter=n.calculations.calculateZoomCenter(e)),i.state.initialDistance=n.calculations.calculateAverageDistance(e)/i.state.zoomScale,c.setTransformOrigin(i.state.zoomCenter),i.state.numberOfPointers=e.touches.length},pinchStart:function(e){i.state.pinchState="start",n.runHooks("pinchStart",e),c.setContainerBounds(),c.cancelRender(),this.pointersChange(e)},pinchMove:function(e){if(!(e.touches.length<2))if("end"===i.state.pinchState||i.state.numberOfPointers===e.touches.length){if(e.stopImmediatePropagation(),e.preventDefault(),"end"===i.state.pinchState)return void this.pinchStart(e);i.state.pinchState="move",n.runHooks("pinchMove",e),i.state.zoomScale=n.calculations.calculateZoomScale(e),i.state.translation=n.calculations.calculateTranslation(e),i.state.frameFree&&(window.requestAnimationFrame(function(){"move"===i.state.pinchState&&(c.zoomPan(i.state.zoomScale,i.state.zoomCenter,i.state.translation.x,i.state.translation.y),i.state.frameFree=!0)}),i.state.frameFree=!1)}else this.pointersChange(e)},pinchEnd:function(e){var t,r;"end"!==i.state.pinchState&&(e.preventDefault(),i.state.pinchState="end",n.runHooks("pinchEnd",{zoomRatio:i.state.zoomScale,translation:i.state.translation,initialZoomScale:PDFViewerApplication.pdfViewer.currentScaleValue}),c.unsetContainerBounds(),t=PDFViewerApplication.page,i.state.initialPageOffset=n.calculations.calculatePageOffset(t),c.render(i.state.zoomScale),c.unsetTransform(),i.state.initialScrollOffset={x:i.DOM.container.scrollLeft,y:i.DOM.container.scrollTop},i.state.finalPageOffset=n.calculations.calculatePageOffset(t),r=n.calculations.calculateScroll(),c.scroll(r.x,r.y),i.resetState())},init:function(){var e;e=this,r.on("pinchmove",function(t){var n;return(null!=(n=PDFViewerApplication.pdfPresentationMode)?n.active:void 0)||e.pinchMove(t),!0}),r.on("pinchend",function(t){if(!(t.touches.length>1))return e.pinchEnd(t)})}},calculations:{calculateZoomCenter:function(e){var t,n;return t=e.center.x-i.state.actionAreaOffset.left,n=e.center.y-i.state.actionAreaOffset.top,{x:t,y:n}},calculateZoomCenterOffset:function(e){var t,n,r,o;return r=i.state.translation.x*i.state.zoomScale+i.state.zoomCenter.x,o=i.state.translation.y*i.state.zoomScale+i.state.zoomCenter.y,t=this.calculateZoomCenter(e),n={x:(t.x-r)/i.state.zoomScale,y:(t.y-o)/i.state.zoomScale}},calculateAverageDistance:function(e){var t,n,r,i,o,a,s,l;if(e.touches.length<2)return 0;for(o={x:e.center.x,y:e.center.y},l=0,s=e.touches,t=n=0,r=s.length;n<r;t=++n)a=s[t],i={x:a.clientX,y:a.clientY},l+=this.calculateAbsoluteDistance(i,o);return l/e.touches.length*2},calculateAbsoluteDistance:function(e,t){var n,r;return n=e.x-t.x,r=e.y-t.y,Math.sqrt(n*n+r*r)},calculateZoomScale:function(e){var t,n;n=1;try{if(n=Math.round(this.calculateAverageDistance(e)/i.state.initialDistance*i.config.zoomDampingFactor)/i.config.zoomDampingFactor,t=PDFViewerApplication.pdfViewer.currentScaleValue,n>1){if(n*t>i.config.MAX_SCALE)return n=i.config.MAX_SCALE/t}else if(n*t<i.config.MIN_SCALE)return n=i.config.MIN_SCALE/t}finally{return n}},calculateTranslation:function(e){var t,n,r;return t=this.calculateZoomCenter(e),n=(t.x-i.state.zoomCenter.x)/i.state.zoomScale,r=(t.y-i.state.zoomCenter.y)/i.state.zoomScale,{x:n,y:r}},calculateScroll:function(){var e,t;return e=i.state.finalPageOffset.x-i.state.initialPageOffset.x+i.state.initialScrollOffset.x,t=i.state.finalPageOffset.y-i.state.initialPageOffset.y+i.state.initialScrollOffset.y,{x:e,y:t}},calculatePageOffset:function(e){var t,n;return e=e||PDFViewerApplication.page,t=document.getElementById(i.config.pageId+e),n=t.getBoundingClientRect(),{x:n.left,y:n.top}}}},e.prototype.enable=function(){return this.state===!0?this:("complete"===document.readyState||"interactive"===document.readyState?n.initialise():window.addEventListener("load",function(){return n.initialise()}),this.state=!1,this)},e.prototype.disable=function(){return this.state===!1?this:(n.destroy(),this.state=!1,this)},e.prototype.addHook=function(e,t,n){var r;return r=i.eventHooks[t],null!=r&&"function"==typeof n&&r.push({name:e,callback:n}),this},e.prototype.dropHook=function(e,t){var n,r;if(n=i.eventHooks[t],null!=n)for(r=0;r<n.length;)n[r].name===e&&(arr.pop(),--r),++r;return this},e.prototype.state=!1,e}(),ng.directive("pinchZoom",["Mixpanel","PinchZoomState","AnnotationState",function(n,r,i){return function(o,a,s){var l,c,u,d;d=document.querySelector("#viewer"),l=document.querySelector("#viewer"),c=a[0],u=new t(d,l,c),u.addHook("notify-pinchstart","pinchStart",function(e){return r.firePinchStart()}),u.addHook("notify-pinchend","pinchEnd",function(e){return r.firePinchEnd()}),u.addHook("record-mixpanel","pinchEnd",function(e){return e.annotationState=i.annotation_mode,n.track_api("pinch",e)}),u.addHook("reset-interactjs","pinchEnd",function(t){return e.resetPointerState(),null})}}]),window.interact=e}).call(t,n(25))},function(e,t){ng.directive("pointerColorPicker",["SubscriptionManagerFactory","$timeout",function(e,t){return{link:function(e,n,r){var i,o;return i=500,o=null,n.on("mouseenter",function(){if(null==o)return o=t(function(){return o=null,n.addClass("hover")},i)}),n.on("mouseleave",function(){return null!=o&&t.cancel(o),o=null,n.removeClass("hover")})}}}])},function(e,t,n){(function(e,t){ng.directive("positionLayer",["$timeout","PinchZoomState","SubscriptionManagerFactory",function(n,r,i){return{scope:!0,link:function(o,a,s){var l,c,u,d,f,h,p,g,m,v;return g=i.for_directive(o,a),f=e.once(function(){return notable.scrollbarSize()}),d=function(){var e,n;return e=t("#pageContainer"+notable.get_anchor_page_no()),n=e.offset().left-t("#viewer").offset().left,n+e.outerWidth(!1)},v=function(){return t("#viewer").outerWidth()>=t("#pageContainer1").outerWidth(!1)?t("#viewer").outerWidth()-d()-f():0},h=function(e){return e?t("#commentsLayer").css({opacity:""}):t("#commentsLayer").css({opacity:0})},u=function(){var e;if(0!==t("#pageContainer1").length)return e=v(),e<50?t("#viewerContainer").addClass("page-bigger-than-viewport"):t("#viewerContainer").removeClass("page-bigger-than-viewport"),t("#commentsLayer").css({left:d()+"px",width:e+"px"})},m=function(e){var n,r,i;return t("#viewer .twoPageContainer .page").css({"margin-left":""}),i=parseInt(null!=(r=t("#annotation-toolbar"))?r.css("width"):void 0)||0,n=i+55,t("#viewer > .page, #viewer > .twoPageContainer").css({"margin-left":e<n?n+"px":e+"px"})},l=function(){var e,n;return n=t(".page").outerWidth(!1),TwoPageViewMode.active&&(n*=2),e=(t("#viewer").width()-n-(t(".commentBody").width()||240))/2,0>e&&(e=0),e},p=function(){m(l()),u()},c=e.debounce(p,50),o.$on("comment_updated",c),o.$on("toggle_comments",c),g.$(window).on("pagesinit scalechange pagerotated",p),g.$(window).on("resize",c),g.$(window).on("twopageview-changed twopageview-coverpagechanged",p),g.$(window).on("toolbarchanged",p),g.add(r.watchStart(function(){return h(!1)})),g.add(r.watchEnd(function(){var e;return e=1e3*(parseFloat(getComputedStyle(document.getElementById("commentsLayer")).transitionDuration)||.1),t("#commentsLayer").addClass("notransition"),n(function(){return p(),h(!0),n(function(){return t("#commentsLayer").removeClass("notransition")},0)},e)}))}}}])}).call(t,n(2),n(1))},function(e,t,n){var r;r=n(546),ng.directive("profileDropdown",function(){return{restrict:"A",templateUrl:r,scope:!0,link:function(e,t,n){return e.hanger=n.hanger,e.short=n.short}}})},function(e,t,n){(function(e){ng.directive("promptOpener",["$rootScope","User","PromptDialog","AppRater","ABTestService","WelcomeDialog","UpgradeDialog","SettingsFactory","PageState","localStorageService","TrialEndedBanHammerDialog","LicensesHelper",function(t,n,r,i,o,a,s,l,c,u,d,f){return function(r){var o,u;if(!notable.is_embed)return o=864e5,u=0,r.$on("document_init",function(){return n.show().then(function(e){return u=(Date.now()-new Date(e.created_at).getTime())/o})}),t.$on("app_rater_score",function(e,t){if("student"!==r.user.user_profile.school_role)return t.score>30&&t.session>9?i.showRate():void 0}),t.$on("settings-updated",function(t,r){if(r)return n.show().then(function(t){var n,r,i,u,f;if((null!=(i=t.domain_properties)?i.ban_onboarding:void 0)&&null==t.current_license)return e.find(t.licenses,{tag:"work_trial_form",active:!1})?s.open("pro",!1,"ban_onboarding"):d.open();if((null!=(u=t.domain_properties)?u.new_onboarding:void 0)&&null==t.current_license&&"sharedfile"!==c.source&&"sharedfile"!==(null!=(f=c.next_load_params)?f.source:void 0))if(e.find(t.licenses,{tag:"work_trial_form"})){if(o=864e5,n=function(e){return(Date.now()-e)/o},r=l.get("upgrade_dialog_last_shown"),n(r)>1)return s.open("pro",!0,"work_trial_expired"),l.set("upgrade_dialog_last_shown",(new Date).getTime(),!0)}else if(!e.find(t.licenses,{tag:"schools_trial_form"}))return a.open()})})}}])}).call(t,n(2))},function(e,t,n){var r;r=n(549),ng.directive("recentlyUsedAutograph",["AnnotationState",function(e){return{restrict:"E",templateUrl:r,replace:!0,scope:!0,link:function(e,t,n){return t.on("dragstart",function(t){return t.preventDefault(),e.$apply(e.insert_autograph)})},controller:["$scope","Autograph","DirectiveHelper",function(t,n,r){return t.autograph_clicked=function(e){return e.stopPropagation(),t.$emit("clicked-recent-signature"),t.insert_autograph()},t.insert_autograph=function(){var i;return i=t.autograph,n.notify_used(i),e.set_annotation_mode("autograph",!1),r.reject_input("clear"),e.extra_annotation_params={autograph:i,autograph_id:i.id,width:100*(i.aspect_ratio||1),height:100}}}]}}])},function(e,t){ng.directive("referenceSpotlight",["SpotlightState","DirectiveHelper","SubscriptionManagerFactory",function(e,t,n){return{priority:1,link:function(r,i,o){var a,s;return s=n.for_directive(r,i),a=function(e){return e?i.addClass("spotlight"):i.removeClass("spotlight")},i.on("click",function(n){var i;if(i=r.commentObj.id,i===e.clicked_annotation_id){if(r.hideComments)return;i=null}return t.reject_input("clear"),r.$apply(function(){return e.set_clicked_annotation_id(i)})}),i.on("mouseenter",function(t){return r.$apply(function(){return e.set_hovered_annotation_id(r.commentObj.id)})}),i.on("mouseleave",function(t){return r.pointer_dragging===!0||r.$apply(function(){return e.set_hovered_annotation_id(null)})}),s.add(e.watch_clicked_annotation_id(function(e,t){return e===r.commentObj.id?a(!0):t===r.commentObj.id?a(!1):void 0})),s.add(e.watch_hovered_annotation_id(function(t,n){return t===r.commentObj.id?a(!0):n===r.commentObj.id&&r.commentObj.id!==e.clicked_annotation_id?a(!1):void 0}))}}}])},function(e,t,n){(function(e){ng.directive("restoreAutograph",["$timeout","$compile","DirectiveHelper","SubscriptionManagerFactory",function(t,n,r,i){var o,a;return a=e('<annotation-autograph class="autographBody hover-resize" autograph-hover></annotation-autograph>'),o=n(a),function(t,n,a){var s,l,c,u;return u=i.for_directive(t,n),l=t.commentObj.referring_to.page_no,s=null,c=function(){if(r.text_layer_is_loaded(l))return null!=s&&s.remove(),o(t,function(n,r){return s=n,n.attr("id","comment-"+t.commentObj.id),e("#notableAnnotationLayer"+l+"-top").append(n)})},t.$on("$destroy",function(){return null!=s?s.remove():void 0}),u.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===l&&c(),!0}),c()}}])}).call(t,n(1))},function(e,t,n){(function(e,t,r){ng.directive("restoreDrawings",["DirectiveHelper","$compile","SVGHelper","SubscriptionManagerFactory","AnnotationSelectionState","AnnotationState","$timeout",function(n,r,i,o,a,s,l){var c,u,d,f;return c=e(document.createElementNS("http://www.w3.org/2000/svg","g")),d={},"normal"===s.annotation_mode&&"select"===s.selection_submode||(d["pointer-events"]="visiblePainted"),c.attr(d),u=r(c),f=function(a,c,d){var f,h,p,g,m,v;return v=o.for_directive(a,c),p=a.commentObj.referring_to.page_no,g=!1,h=null,a.old_content=null,a.$watch("commentObj.content",function(e){if(e&&g)return a.restore_svg()}),a.$watch("commentObj.referring_to",function(n,r){var o,s,l,c;if(n&&g){if(c=h.find("[class~=shape]"),!(null!=c?c.length:void 0))return;if(t.isEqual(n,r))return;return n.opacity!==r.opacity&&c.attr({"stroke-opacity":n.opacity,"fill-opacity":n.opacity}),n.font_size===r.font_size&&n.color===r.color||(a.commentObj.content.indexOf("<polyline")>-1?c.attr({"stroke-width":n.font_size,stroke:n.color}):"fill"===n.font_size?c.attr({fill:n.color,stroke:"none"}):c.attr({fill:"none","stroke-width":n.font_size,stroke:n.color}),i.ensure_markers(c)),n.x===r.x&&n.y===r.y||n.translated_coord&&(l=i.pixel_to_viewbox(e("#painting"+p),{x:n.x,y:n.y}),o=l.x,s=l.y,c.attr("dx",o),c.attr("dy",s),c.attr({transform:"translate("+o.toFixed(2)+","+s.toFixed(2)+")"})),a.old_content=i.update_content(a.commentObj,{no_upsert:!0})}},!0),f=function(e){var t,n,r;for(t=0,n=e.length;t<n;t++)if(r=e[t],"defs"!==r.nodeName.toLowerCase()&&!r.classList.contains("point-handle"))return r},a.restore_svg=function(){var t,o,l,c,u,d,g,m,v,_,y,b,w,x;if(a.old_content!==a.commentObj.content&&a.commentObj.content.length){for(a.old_content=a.commentObj.content,h.find(".shape, .drawing, desc").remove(),w=e.parseXML("<root>"+a.commentObj.content+"</root>"),w=w.childNodes[0],h.attr({class:f(w.childNodes).className}),v=w.childNodes,b=[],c=0,d=v.length;c<d;c++)if(m=v[c],"defs"!==m.nodeName.toLowerCase()&&"desc"!==m.nodeName.toLowerCase()){for(x=e(document.createElementNS("http://www.w3.org/2000/svg",m.nodeName.toLowerCase())),_=m.attributes,u=0,g=_.length;u<g;u++)t=_[u],n.valid_svg_attribute(t.name)&&x.attr(t.name,t.value);if(a.commentObj.referring_to.translated_coord)y=i.pixel_to_viewbox(e("#painting"+p),{x:a.commentObj.referring_to.x,y:a.commentObj.referring_to.y}),o=y.x,l=y.y,x.attr("dx",o),x.attr("dy",l),x.attr({transform:"translate("+o+","+l.toFixed(2)+")"});else if(x.hasClass("point-handle"))continue;r(x[0])(a),h.append(x),"normal"===s.annotation_mode&&"select"===s.selection_submode?b.push(h.removeAttr("pointer-events")):b.push(void 0)}else b.push(void 0);return b}},m=function(){if(n.text_layer_is_loaded(p)&&!g)return g=!0,v.$(window).off("textlayerrendered",m),u(a,function(t){return h=t,h.attr({id:"g-"+a.commentObj.id}),a.restore_svg(h),e("#painting"+p).append(h),a.commentObj.referring_to.translated_coord||l(function(){return i.update_content(a.commentObj,{no_upsert:!0})},0),v.add(function(){return h.remove()})})},v.$(window).on("textlayerrendered",m),m()},{scope:!0,link:f}}]),n(133),ng.directive("setupPolyline",["DirectiveHelper","$timeout","TooltipScope","SVGHelper","Comment","AnnotationState","Mixpanel","SubscriptionManagerFactory","GlobalPointerListener",function(t,n,i,o,a,s,l,c,u){var d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E,$;return $=function(e,t){var n,r;return r=e.closest("svg"),t.x/=r.width()/r.data("viewbox_width"),t.y/=r.height()/r.data("viewbox_height"),n=notable.deg2rad(r.data("rotation")),notable.rotate(t,-n)},h=function(e,t){return parseFloat(e.attr(t))||0},m=function(){switch(s.annotation_mode){case"shape":case"normal":return!0;case"highlight":return"shape"===s.highlight_submode;default:return!1}},r("g.shape").draggable({restrict:{restriction:"svg",elementRect:{left:.25,right:.75,top:.25,bottom:.75}},onstart:function(t){var n,r,i,o;if(m()&&(l.track_api("Dragged annotation",{type:"Drawing",via:"direct"}),o=t.target,r=e(o),null!=(i=r.scope())?i.can_edit():void 0))return e("body").addClass("dragging"),n=r.find("[class~=shape]"),n.data("dragging",!0)},onmove:function(t){var n,r,i,o,a,s,l;if(m()&&(l=t.target,o=e(l),n=o.find("[class~=shape]"),null!=(a=o.scope())?a.can_edit():void 0))return s=$(o,{x:t.dx,y:t.dy}),r=s.x,i=s.y,r+=h(n,"dx"),i+=h(n,"dy"),n.attr({dx:r.toFixed(2),dy:i.toFixed(2)}),n.attr({transform:"translate("+r.toFixed(2)+","+i.toFixed(2)+")"}),S(n)},onend:function(t){var n,r,i,a,s;if(m()&&(s=t.target,r=e(s),null!=(i=r.scope())?i.can_edit():void 0))return e("body").removeClass("dragging"),n=r.find("[class~=shape]"),n.data("dragging",!1),a=r.scope(),a.$apply(function(){var e;if(e=n.data("hovering"),e&&v(n),a.old_content=o.update_content(a.commentObj),e)return _(n,a.can_edit())})}}).on("up",notable.remove_cursor_styling),x=function(t){var n,r,i,o;if(m())return l.track_api("Dragged annotation",{type:"Drawing",via:"direct"}),o=t.target,i=e(o),e("body").addClass("dragging"),r=i.parent(),n=r.find("[class~=shape]"),n.data("dragging",!0)},w=function(t){var n,r,i,a,s;if(m()&&(s=t.target,i=e(s),r=i.parent(),e("body").removeClass("dragging"),n=r.find("[class~=shape]"),0!==n.length))return n.data("dragging",!1),a=r.scope(),a.$apply(function(){var e;if(e=n.data("hovering"),e&&v(n),a.old_content=o.update_content(a.commentObj),e)return _(n,a.can_edit())})},r("g.shape.shape-rectangle .point-handle").draggable({restrict:{restriction:"svg",elementRect:{left:.5,right:.5,top:.5,bottom:.5}},onstart:x,onmove:function(t){var n,r,i,o,a,s,l,c,u,d,f,p,g,v,_,y,b;if(m()&&(_=t.target,d=e(_),c=d.parent(),0!==c.length))return g=$(c,{x:t.dx,y:t.dy}),o=g.x,l=g.y,n=c.find("[class~=shape]"),n.data("dragging",!0),v=d.attr("id").match(/point-handle-(\d)-(\d)/),y=v[0],p=v[1],f=v[2],f=parseFloat(f),p=parseFloat(p),i=h(n,"dx"),s=h(n,"dy"),r=i,a=s,b=h(n,"width"),u=h(n,"height"),0===f?(a=s+l,u-=l):2===f&&(u+=l),0===p?(r=i+o,b-=o):2===p&&(b+=o),b<5&&(b=5,0===p&&(r-=o)),u<5&&(u=5,0===f&&(a-=l)),n.attr({width:b.toFixed(2),height:u.toFixed(2),x:0,y:0,dx:r,dy:a,transform:"translate("+r.toFixed(2)+","+a.toFixed(2)+")"}),S(n)},onend:w}).on("up",notable.remove_cursor_styling),E=!1,k=0,C=0,y=0,b=0,d=0,f=0,r("g.shape.shape-line .point-handle").draggable({restrict:{restriction:"svg",elementRect:{left:.5,right:.5,top:.5,bottom:.5}},onstart:function(t){var n,r,i,o,a,s,c,u;if(m())return l.track_api("Dragged annotation",{type:"Drawing",via:"direct"}),c=t.target,o=e(c),e("body").addClass("dragging"),r=o.parent(),n=r.find("[class~=shape]"),n.data("dragging",!0),s=o.attr("id").match(/point-handle-(\d)/),u=s[0],a=s[1],a=parseInt(a)||0,k=h(n,"x"+a),C=h(n,"y"+a),i=1===a?2:1,y=h(n,"x"+i),b=h(n,"y"+i),d=h(n,"dx"),f=h(n,"dy"),null},onmove:function(t){var n,r,i,o,a,s,l,c,u,p,g,v,_,w,x,T,A,D,O,P,R,I,M,L,N,j,F,B,U,z,q;if(m()&&(D=t.target,E=t.shiftKey,u=e(D),c=u.parent(),0!==c.length))return _=$(c,{x:t.dx,y:t.dy}),o=_.x,l=_.y,n=c.find("[class~=shape]"),n.data("dragging",!0),i=h(n,"dx"),s=h(n,"dy"),w=u.attr("id").match(/point-handle-(\d)/),O=w[0],v=w[1],v=parseInt(v)||0,k+=o,C+=l,R=h(n,"x1"),F=h(n,"y1"),L=h(n,"x2"),z=h(n,"y2"),E?(x=notable.snap_line(y,b,k,C),p=x[0],g=x[1],T=Math.min(p,y),A=Math.min(g,b),1===v?(I=p,B=g,N=y,q=b):2===v&&(N=p,q=g,I=y,B=b),r=d+T,a=f+A):(1===v?(I=R+o,B=F+l,N=L,q=z):2===v&&(N=L+o,q=z+l,I=R,B=F),T=Math.min(I,N),A=Math.min(B,q),r=i+T,a=s+A),P=I-T,M=N-T,j=B-A,U=q-A,n.attr({x1:P,y1:j,x2:M,y2:U,dx:r,dy:a,transform:"translate("+r.toFixed(2)+","+a.toFixed(2)+")"}),S(n)},onend:w}).on("up",notable.remove_cursor_styling),r("g.shape.shape-ellipse .point-handle").draggable({restrict:{restriction:"svg",elementRect:{left:.5,right:.5,top:.5,bottom:.5}},onstart:x,onmove:function(t){var n,r,i,o,a,s,l,c,u,d,f,p,g,v,_,y,b;if(m()&&(y=t.target,u=e(y),c=u.parent(),0!==c.length))return p=$(c,{x:t.dx,y:t.dy}),o=p.x,l=p.y,n=c.find("[class~=shape]"),n.data("dragging",!0),g=u.attr("id").match(/point-handle-(\d)-(\d)/),b=g[0],f=g[1],d=g[2],d=parseFloat(d),f=parseFloat(f),i=h(n,"dx"),s=h(n,"dy"),r=i,a=s,v=h(n,"rx"),_=h(n,"ry"),o/=2,l/=2,0===d?(_-=l,a=s+2*l):2===d&&(_+=l),0===f?(v-=o,r=i+2*o):2===f&&(v+=o),v<5&&(v=5,0===f&&(r-=o)),_<5&&(_=5,0===d&&(a-=l)),n.attr({cx:v.toFixed(2),cy:_.toFixed(2),rx:v.toFixed(2),ry:_.toFixed(2),x:0,y:0,dx:r,dy:a,transform:"translate("+r.toFixed(2)+","+a.toFixed(2)+")"}),S(n)},onend:w}).on("up",notable.remove_cursor_styling),g=e(document.createElementNS("http://www.w3.org/2000/svg","circle")),g.attr({class:"point-handle",fill:"blue",stroke:"white"}),p=function(e,n){var r,i,o,a;return r=e.parent().find("#"+n),0===r.length&&(r=g.clone(),e.parent().append(r),i=notable.reset_scale(4),o=t.get_skew_ratio(e),i*=o,a=notable.reset_scale(1),a*=o,r.attr({id:n,r:i,"stroke-width":a})),r},S=function(e){var t,n,r,i,o,a,s,l,c,u,d,f,g,m,v,_,y,b,w,x,k,C,S;switch(e.prop("tagName").toLowerCase()){case"rect":for(b=h(e,"x"),k=h(e,"y"),r=h(e,"dx"),i=h(e,"dy"),y=h(e,"width"),o=h(e,"height"),b+=r,k+=i,g=[],a=l=0;l<=2;a=++l)g.push(function(){var t,n;for(n=[],s=t=0;t<=2;s=++t)1===a&&1===s||n.push(p(e,"point-handle-"+a+"-"+s).attr({cx:b+y/2*a,cy:k+o/2*s}));return n}());return g;case"line":return w=h(e,"x1"),C=h(e,"y1"),x=h(e,"x2"),S=h(e,"y2"),r=h(e,"dx"),i=h(e,"dy"),p(e,"point-handle-1").attr({cx:w+r,cy:C+i}),p(e,"point-handle-2").attr({cx:x+r,cy:S+i});case"ellipse":for(t=h(e,"cx"),n=h(e,"cy"),v=h(e,"rx"),_=h(e,"ry"),r=h(e,"dx"),i=h(e,"dy"),t+=r,n+=i,d=[[0,1],[1,0],[2,1],[1,2]],m=[],c=0,u=d.length;c<u;c++)f=d[c],a=f[0],s=f[1],m.push(p(e,"point-handle-"+a+"-"+s).attr({cx:t+v*(a-1),cy:n+_*(s-1)}));return m}},_=function(t,n){var r,i;if(!e("#tooltip").is(".is-dragging")&&!e("body").is(".dragging")&&!t.data("hovering")&&"eraser"!==s.annotation_mode)return t.data("hovering",!0),i=t.attr("stroke"),t.data("stroke",i),r=t.attr("fill"),t.data("fill",r),null!=i&&"none"!==i?(t.attr("stroke","#009688"),o.ensure_markers(t)):t.attr("fill","#009688"),n?S(t):void 0},v=function(e,t){if(!t){if(!e.data("hovering"))return;if(e.data("dragging"))return}return e.data("hovering",!1),e.data("dragging",!1),e.attr("stroke",e.data("stroke")),e.attr("fill",e.data("fill")),o.ensure_markers(e),e.parent().find("[class~=point-handle]").remove()},function(r,s,l){var d,f,h,p;p=c.for_directive(r,s),d=function(t){var o;if(r.commentObj&&r.can_edit()&&(o=document.activeElement,null==o||!o.hasAttribute("editable")))return 46===t.keyCode||8===t.keyCode?(p.$(window).off("keydown",d),e("#g-"+r.commentObj.id).hide(),i.$broadcast("hide-tooltip"),n(function(){return a.remove_and_upsert_comment(r.commentObj)},500),t.preventDefault()):void 0},n(function(){return o.ensure_markers(s),s.parent().hover(function(){return _(s,r.can_edit()),p.$(window).on("keydown",d)},function(){return v(s),p.$(window).off("keydown",d)})},0),f=null,s.on("mousemove mouseleave",function(e){if(f&&n.cancel(f),"mouseleave"!==e.type)return f=n(function(){return h(e)},200)}),p.add(u.on_touch_start(function(t,n){if(!e(n.target).closest(s.parent()).length)return v(s,!0)})),h=function(n){var o;return o=e("#viewer"),n=t.event_relative_to_container(o,n),i.$broadcast("show-tooltip",r,n,null,20)}}}])}).call(t,n(1),n(2),n(25))},function(e,t,n){(function(e){ng.directive("restoreEquation",["$timeout","$compile","DirectiveHelper","SubscriptionManagerFactory",function(t,n,r,i){var o,a;return a=e('<annotation-equation class="equationBody comment" equation-hover></annotation-equation>'),o=n(a),function(t,n,a){var s,l,c,u;return u=i.for_directive(t,n),l=t.commentObj.referring_to.page_no,s=null,c=function(){if(r.text_layer_is_loaded(l))return null!=s&&s.remove(),o(t,function(n,r){return s=n,n.attr("id","comment-"+t.commentObj.id),e("#notableAnnotationLayer"+l+"-top").append(n)})},t.$on("$destroy",function(){return null!=s?s.remove():void 0}),u.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===l&&c(),!0}),c()}}])}).call(t,n(1))},function(e,t,n){(function(e,t){ng.directive("restoreFormField",["DirectiveHelper","Comment","Mixpanel","SubscriptionManagerFactory",function(n,r,i,o){return function(a,s,l){var c,u,d;return d=o.for_directive(a,s),u=a.commentObj.referring_to.page_no,c=a.commentObj.referring_to.annotation_name,a.setup=function(){var o,s,l,d;if(l=e(".annotationLayer").find('[data-annotation-name="'+c+'"]'),s=l.children(),0!==s.length)return o=s.find("[type=checkbox], [type=radio]"),o.length?o[0].checked="true"===a.commentObj.content:s.val(a.commentObj.content),d=s.data("annotation-annotation_name")||[],t.includes(d,c)||(d.push(c),s.data("annotation-names",d)),a.commentObj.referring_to.annotation_name!==l.data("annotation-name")&&(a.commentObj.referring_to.annotation_name=l.data("annotation-name"),r.upsert(a.commentObj)),u!==n.page_no(l)?i.track("FormField Invalid Page Number",{comment_id:a.commentObj.id,referring_to:a.commentObj.referring_to,element_page_no:n.page_no(l)}):void 0},d.$(window).on("pagerendered",function(e){var t,n;if((null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===u)return a.setup()}),a.setup(),d.add(function(){var n,r,i,o,a;if(i=e(".annotationLayer").find('[data-annotation-name="'+c+'"]'),r=i.children(),a=r.data("annotation-names"))return a=t.reject(a,function(e){return e===c}),0===a.length?(r.removeData("annotation-names"),n=r.find("[type=checkbox], [type=radio]"),n.length?n[0].checked="true"===i.attr("data-annotation-value"):r.val(i.attr("data-annotation-value"))):(r.data("annotation-names",a),o=a[a.length-1],e("[data-annotation-name="+o+"]").scope().setup())})}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e,t){ng.directive("restoreHighlights",["$timeout","DirectiveHelper","PageState",function(n,r,i){return{priority:-100,link:function(i,o,a){var s,l,c,u,d,f,h,p,g,m,v,_;if(p=i.commentObj.referring_to,p.serialized_highlight)return s=p.page_no,_=function(){return e("#textLayer"+s).data("loaded")===!0&&e("#textLayer"+s).length},null==i.highlighter_id&&(i.highlighter_id="highlight-"+Math.floor(1e7*Math.random())),d=i.highlighter_id,u=null,c=function(e){var t,n,r,i,o,a;for(n=0,a=null!=(o=e.attr("class"))?o.split(/\s+/):void 0,r=0,i=a.length;r<i;r++)t=a[r],t.match(/^highlight\-[0-9]+$/)&&(n+=1);return n>1},f=t.once(function(){return u=notable.get_highlighter("comment-highlighted "+d)}),m=function(){if(_())return f(),n(function(){return u.deserialize(p.serialized_highlight),h(),i.$broadcast("highlight_restored")},50)},i.$on("$destroy",function(){return v()}),g=function(){var t,n,r,i;for(i=e(".comment-highlighted."+d),t=0,n=i.length;t<n;t++)r=i[t],e(r).hasClass("new-highlight")||(r=e(r),c(r)?r.removeClass(d+" spotlight"):r.removeClass(r.attr("class")));return u.removeAllHighlights();
},v=function(){return g(),e(window).off("textlayerrendered scalechange",l)},e("#pageContainer"+s).attr("data-force-load",s),h=function(){var t,n,o,a,l,c,u,f,h,p;if(t=function(e){var t,n,r,i,o,a,s,l,c,u;for(t=[],n=null,a=function(e){return!/\S/.test(e)},o=function(e,t,n){return null==n&&(n=5),e.x+e.width+n>=t.x},c=function(e,t,n){return null==n&&(n=1),n>=Math.abs(l.y-r.y)},u=function(){return n?(t.push(n),n=null):l?t.push(l):void 0},i=0,s=e.length;i<s;i++)r=e[i],l&&c(l,r,r.height/4)&&(o(l,r)||a(l))?(n||(n=l),n.width+=r.width,n.text+=r.text):u(),l=r;return u(),t},i.can_edit()&&(h=e("."+d).text(),o=e("."+d),e(o).length)){for(a=[],f=e(o),l=0,c=f.length;l<c;l++)n=f[l],n=e(n),n.data("no-perceived-width")||(u=r.pos_relative_to_page(n,s),p=n.closest("[data-transform-scale-x]").data("transform-scale-x"),p||(p=1),a.push({x:u.left,y:u.top,text:n.text(),height:notable.reset_scale(n.height()),width:notable.reset_scale(n.outerWidth())*p}));a=t(a),i.$$phase?(i.commentObj.referring_to={user_action:"highlight",x:a[0].x,y:a[0].y,page_no:i.commentObj.referring_to.page_no,selected_text:h,highlighted_positions:a},i.$broadcast("old_highlight_migration_finished",i.commentObj.id)):i.$apply(function(){return i.commentObj.referring_to={user_action:"highlight",x:a[0].x,y:a[0].y,page_no:i.commentObj.referring_to.page_no,selected_text:h,highlighted_positions:a},i.$broadcast("old_highlight_migration_finished",i.commentObj.id)}),v()}},m(),l=function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===s&&m(),!0},e(window).on("textlayerrendered scalechange",l)}}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.directive("restoreNewHighlights",["CommentsHelper","DirectiveHelper","SubscriptionManagerFactory","$timeout","$compile",function(t,n,r,i,o){return{link:function(a,s,l){var c,u,d,f,h,p;if(null!=a.commentObj)return p=r.for_directive(a,s),d=a.commentObj.referring_to,c=d.page_no,u="highlight-"+a.$id,a.$watch("commentObj.referring_to.color",function(t){var n;if(t)return n=e("."+u+".comment-highlighted"),n.removeClass("spotlight"),n.css({backgroundColor:t})}),h=function(){var r,s,l,h,p,g,m,v,_,y,b,w,x,k,C,S,E;if(d.highlighted_positions&&t.is_type_highlight(d.user_action)&&n.text_layer_is_loaded(c)){for(null==a.highlighter_id&&(a.highlighter_id=u),f(),p=[],k=d.highlighted_positions,m=0,_=k.length;m<_;m++)h=k[m],C=h.y,v=h.x,S=b=h.width,r=y=h.height,x=e("#pageContainer"+c).width(),w=e("#pageContainer"+c).height(),l=e('<div class="'+u+" comment-highlighted "+d.user_action+' new-highlight" style="top:'+C+"px; left:"+v+"px; height:"+r+"px; width:"+S+'px;"></div>'),"strikethrough"!==d.user_action&&"underline"!==d.user_action||(g=l.clone(),g.removeClass(),g.css({"points-events":"none",position:"absolute"}),p.push(g),s="strikethrough"===d.user_action?.5:1,l.css({top:C+r*s+"px",height:2,marginTop:2*s*-1})),l.css({backgroundColor:d.color}),p.push(l);return E=e('<highlight-wrapper class="highlight-wrapper" reference-spotlight highlight-spotlight></highlight-wrapper>'),E.attr("id","wrapper-"+u),o(E.get(0))(a),E.append(p),e("#notableAnnotationLayer"+c+"-bottom").append(E),i(function(){return a.$broadcast("highlight_restored")},0)}},f=function(){return e("#wrapper-"+u).remove()},h(),a.$on("old_highlight_migration_finished",function(){return d=a.commentObj.referring_to,h()}),p.add(f),p.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===c&&h(),!0})}}}])}).call(t,n(1))},function(e,t,n){(function(e,t,n){ng.directive("restorePointer",["$timeout","CommentsHelper","Comment","SubscriptionManagerFactory","$compile","$rootScope",function(r,i,o,a,s,l){var c;return c=s(e("<annotation-comment-pointer></annotation-comment-pointer>")),{priority:-100,scope:!0,link:function(s,u,d){var f,h,p,g,m,v,_,y;if(y=a.for_directive(s,u),v=s.commentObj.referring_to,!v.serialized_highlight&&!i.is_type_highlight(v.user_action))return f=v.page_no,p=function(){return e("#pageContainer"+f).data("loaded")===!0},m=s.pointer_id="pointer-"+Math.floor(1e7*Math.random()),h=null,g=null,s.$watch("commentObj.referring_to.x",function(e){return null!=g?g.css({left:e+"px"}):void 0}),s.$watch("commentObj.referring_to.y",function(e){return null!=g?g.css({top:e+"px"}):void 0}),_=function(){var n,a;if(e("#pageContainer"+f).length)return e("#"+m+"-wrapper").remove(),a=v.y,n=v.x,c(s,function(c){if(g=c,g.css({top:a+"px",left:n+"px"}),g.attr({id:m+"-wrapper"}),g.find(".pointer").attr({id:m}),g.find(".commentBody").css({transform:"scale("+1/notable.page_scale()+")"}),g.appendTo(e("#notableAnnotationLayer"+f+"-top")),r(function(){return s.$broadcast("pointer_restored")},50),s.can_edit())return h=t(g[0]).ignoreFrom(".commentBody").draggable({restrict:{restriction:e("#textLayer"+f)[0],elementRect:{left:0,right:1,top:0,bottom:1}},onstart:function(t){return e(t.target).addClass("dragging")},onmove:function(e){var t,n,r,i,o,a;return s.pointer_dragging=!0,i=e.target,r=notable.screen_to_pdf({x:e.dx,y:e.dy}),t=r.x,n=r.y,o=(u.data("x")||0)+t,a=(u.data("y")||0)+n,i.style.transform="translate3d("+o+"px, "+a+"px, 0px)",u.data("x",o),u.data("y",a)},onend:function(t){var n,r,a;return n=t.target,e(n).removeClass("dragging"),r=u.data("x"),a=u.data("y"),n.style.transform="",u.data("x",0),u.data("y",0),s.$apply(function(){if(s.pointer_dragging=!1,s.commentObj.referring_to.x+=r,s.commentObj.referring_to.y+=a,!i.is_empty(s.commentObj.content))return o.upsert(s.commentObj),l.$broadcast("comment_moved")})}}).on("up",notable.remove_cursor_styling)})},_=n.debounce(_,50),y.add(function(){return e("#"+m+"-wrapper").remove(),null!=h?h.unset():void 0}),p()&&_(),y.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===f&&_(),!0})}}}])}).call(t,n(1),n(25),n(2))},function(e,t,n){(function(e){ng.directive("scrollToAnnotationOnClick",["ScrollToAnnotation",function(e){return function(t,n,r){return n.click(function(n){return n.stopPropagation(),e(t.commentObj)})}}]),ng.service("ScrollToAnnotation",["$rootScope","SpotlightState",function(t,n){var r;return r=33,function(i){var o,a,s,l,c,u,d,f;if(c=i.referring_to.page_no,"Comment"!==(d=i.annotation_type)&&"Audio"!==d){if(l=e("#pageContainer"+c),0===l.length&&c>0)return PDFView.page=c;if(u=notable.get_absolute_pos(l).top-r,a=u+notable.restore_scale(i.referring_to.y),!a&&c>0)return PDFView.page=c;switch(a-=e(window).height()/2,e("#viewerContainer").animate({scrollTop:a},200),i.annotation_type){case"Highlight":case"Strikethrough":case"Underline":return n.set_clicked_annotation_id(i.id,!1),setTimeout(function(){return n.set_clicked_annotation_id("nothing",!1)},2e3);case"Text":return e("#text-"+i.id).addClass("hover"),setTimeout(function(){return e("#text-"+i.id).removeClass("hover")},2e3);case"Autograph":case"Image":return e("#comment-"+i.id).addClass("hover"),setTimeout(function(){return e("#comment-"+i.id).removeClass("hover")},2e3);case"FormField":return s=e(".annotationLayer").find('[data-annotation-name="'+i.referring_to.annotation_name+'"]'),s=s.find("[type=checkbox], [type=radio]").length?s.find("[type=checkbox], [type=radio]").next("span").first():s.find("select, textarea, input"),s.css({outline:"2px solid #0096fd"}),setTimeout(function(){return s.css({outline:""})},2e3)}}else{if(o=null!=(f=i.parent_comment_id)?f:i.id,e("#pageContainer"+c).data("loaded")===!0)return t.$apply(function(){return n.set_clicked_annotation_id(o,!0)});if(n.set_clicked_annotation_id(o,!0),c>0)return PDFView.page=c}}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.directive("secondaryToolbarToggleDropdown",function(){return function(t,n,r){return n.click(function(i){var o;if(o=n.find(".secondaryToolbarButtonContainer").get(0),!o||!e.contains(o,i.target))return notable.apply(t,function(){return t.toggle_dropdown(r.secondaryToolbarToggleDropdown)})})}})}).call(t,n(1))},function(e,t){ng.directive("selectAllUponClick",["$timeout",function(e){return{scope:!0,link:function(e,t,n){var r;return e.$watch(n.selectAllUponClick,function(e){if((null!=e?e.length:void 0)>0)return setTimeout(function(){return t.get(0).select()},50)}),(null!=(r=e.$eval(n.selectAllUponClick))?r.length:void 0)>0&&setTimeout(function(){return t.get(0).select()},50),t.click(function(e){return this.select()})}}}])},function(e,t,n){(function(e,t){var r;r=n(11),ng.directive("selectText",["DirectiveHelper","AnnotationState","PageState","AnnotationColors","Comment","SubscriptionManagerFactory","tts","LicensesHelper","PremiumRequiredDialog","ExtensionRequiredDialog","Mixpanel","Dictionary","SelectionHelper",function(n,i,o,a,s,l,c,u,d,f,h,p,g){return{scope:!0,link:function(a,m,v){var _,y,b,w,x,k,C,S,E,$,T,A,D,O;return D=l.for_directive(a,m),m.one("$destroy",function(){return a.$destroy()}),a.annotation_state=i,$=0,C=null,S="highlight-"+Math.floor(1e7*Math.random()),E=e.once(function(){return $=n.page_no(m),C=notable.get_highlighter(S,"textContent")}),D.$(window).on("textlayerrendered",function(e){var t,r;return(null!=e&&null!=(t=e.originalEvent)&&null!=(r=t.detail)?r.pageNumber:void 0)===n.page_no(m)&&E(),!0}),D.$(window).on("mouseup",function(e){var n,r;if("normal"===a.annotation_state.annotation_mode&&"dictionary"===a.annotation_state.selection_submode&&!g.is_any_text_selected()&&(r=t(e.target).parents(".textLayer"),r.attr("id")==="textLayer"+$&&(n=e.target,t(n).hasClass("word"))))return g.select_node(n)}),_=function(){return null!=C&&C.removeAllHighlights(),r.getSelection().removeAllRanges()},D.$(document).on("keyup",function(e){if(27===e.keyCode)return _(),a.$apply(function(){return a.$broadcast("clear")}),n.reject_input("clear")}),a.$watch("annotation_state.annotation_mode",function(e,t){if(e!==t)return"normal"===t&&"normal"!==i.selection_submode?r.getSelection().removeAllRanges():"comment"===e||"highlight"===e||"strikethrough"===e||"underline"===e?T():void 0}),k=function(){var e,n;return e=r.getSelection(),n=t(e.anchorNode).parents(".textLayer"),n.attr("id")!=="textLayer"+$?"":e.toString()},x=function(e,t){var n;if(n={user_action:"comment"===a.annotation_state.annotation_mode?"highlight":a.annotation_state.annotation_mode,x:e[0].x,y:e[0].y,page_no:$,selected_text:t,highlighted_positions:e,color:a.annotation_state.current_annotation_color()},"comment"===a.annotation_state.annotation_mode)switch(i.comment_submode){case"video":n.annotation_type="Video";break;case"audio":n.annotation_type="Audio";break;case"desktop":n.annotation_type="Desktop"}return s.create_comment(n),a.$digest(),_()},A=function(e){var t;return c.isEnabled()?void(u.has_feature("tts")?c.speakCurrentSelection():(d.open("tts"),t="normal",i.set_annotation_mode(t))):(h.track("TTS Not Enabled"),t="normal",i.set_annotation_mode(t),notable.is_extension||f.open("Text to Speech"),void 0)},y=function(e){var r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,_;if(C.highlightSelection(S,{containerElementId:"textLayer"+$}),a=t("."+S),a.length){for(s=[],g=t(a),l=0,u=g.length;l<u;l++)r=g[l],r=t(r),r.data("no-perceived-width")||(p=n.pos_relative_to_page(r,$),_=r.closest("[data-transform-scale-x]").data("transform-scale-x"),_||(_=1),o=notable.reset_scale(r.outerWidth())*_,i=notable.reset_scale(r.height()),d=t("#pageContainer"+$),h=notable.reset_scale(d.width()),f=notable.reset_scale(d.height()),m=notable.revert_rotated_coordinates(p.left,p.top,o,i,h,f),c=m[0],v=m[1],s.push({x:c,y:v,text:r.text(),height:i,width:o}));return n.coalesce_worker.coalesce(s,function(t){return x(t,e)})}},b=function(e){var t;switch(e=notable.trim(e,/[`'"ââ:â¢!,;:\s\.\+\-\/\(\)\\]/),t=/^[^\s]*\s*[^\s]*\s*[^\s]*$/i.test(e)){case!0:return w(e);case!1:return O(e)}},w=function(e){return p.display_definition(e)},O=function(e){return p.display_translation(e)},T=e.debounce(function(){var e,t;if(("comment"===(e=a.annotation_state.annotation_mode)||"highlight"===e||"strikethrough"===e||"underline"===e||"tts"===e||"normal"===a.annotation_state.annotation_mode&&"dictionary"===a.annotation_state.selection_submode)&&(t=k(),t.length&&!n.reject_input("comment"===a.annotation_state.annotation_mode)))switch(a.annotation_state.annotation_mode){case"tts":return A(t);case"normal":if("dictionary"===a.annotation_state.selection_submode)return b(t);break;case"comment":case"highlight":case"strikethrough":case"underline":return y(t)}},50),m.bind("mouseup touchend",function(e){var n;if(C&&(null!=C&&C.removeAllHighlights(),!(t(e.target).closest("annotation-text").length>0)&&o.document&&!(HandTool.handTool.active||(null!=(n=PDFViewerApplication.pdfViewer)?n.isInPresentationMode:void 0))))return T()})}}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e,t){n(187),ng.directive("setupAnnotationSelection",["SubscriptionManagerFactory","AnnotationState","AnnotationSelectionHelper","DirectiveHelper","AnnotationSelectionState","WindowKeyListeners","KeyCodes","$timeout","SVGHelper","PinchZoomState","ngDialog","SelectedBox","SelectionBox","SelectionView","Mixpanel",function(n,r,i,o,a,s,l,c,u,d,f,h,p,g,m){return{scope:!0,link:function(u,v,_){var y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I,M,L,N,j,F,B,U,z,q;return q=n.for_directive(u,v),I=o.page_no(v),u.$watch(function(){return r.annotation_mode},function(e,t){return"normal"===e&&"select"===r.selection_submode?(b(),q.$(window).on("pagerendered",M)):"normal"===t&&"select"===r.selection_submode?(E(),q.$(window).off("pagerendered",M)):void 0}),u.$watch(function(){return r.selection_submode},function(e,t){return"select"===e&&"normal"===r.annotation_mode?(b(),q.$(window).on("pagerendered",M)):"select"===t&&"normal"===r.annotation_mode?(E(),q.$(window).off("pagerendered",M)):void 0}),M=function(e){var t,n;if((null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===I){if(q.$(window).off("pagerendered",M),"normal"!==r.annotation_mode||"select"!==r.selection_submode)return;return E(),b(),q.$(window).on("pagerendered",M)}},b=function(){var e,t;if(!z.active)return B(),F(),z.active=!0,v.children().css({"pointer-events":"none"}),v.find("g").removeAttr("pointer-events"),v.attr("touch-action","none"),$.on(),z.selected_box=new h(I),q.add(null!=(e=z.selected_box)?e.destructor:void 0),t=rangy.getSelection(),null!=t?t.removeAllRanges():void 0},E=function(){var e,t,n;if(z.active)return S(),C(),null!=(e=z.selected_box)&&e.destructor(),q.remove(null!=(t=z.selected_box)?t.destructor:void 0),null!=(n=z.selection_box)&&n.destructor(),U(),v.children().css({"pointer-events":""}),v.find("g").attr({"pointer-events":"visiblePainted"}),v.removeAttr("touch-action"),$.off()},z={selected_box:null,selection_box:null,active:!1,quad_tree:[],selection_limits:null,comments_preselected:[],selection_rectangle:{x1:null,y1:null,x2:null,y2:null},is_dragging:!1,held_ctrl:!1,last_pointer_id:null,destroy_pinchzoom_listener:null},R=e.cloneDeep(z),y=function(){return g.set_inactive(),a.set([],I)},U=function(){return y(),z=e.cloneDeep(R)},x=function(t,n){var r,o;return g.set_inactive(),r=i.get_annotations_from_box(z.selection_rectangle,I,z.quad_tree),n||0===r.length||(o=e.maxBy(r,function(e){return e.created_at}),r=[o]),t?a.add(r,I):a.set(r,I),g.set_active(),u.$apply()},j=function(){var e;return e=i.get_annotations_from_box(z.selection_rectangle,I,z.quad_tree),e.length!==z.comments_preselected.length&&(g.set_inactive(i.get_selected_elements(z.comments_preselected)),g.set_active(i.get_selected_elements(e))),z.comments_preselected=e},A=function(e){var t;if(e.preventDefault(),1===e.which)return v[0].addEventListener("pointermove",D),v[0].addEventListener("lostpointercapture",O),z.last_pointer_id=e.pointerId,v[0].setPointerCapture(z.last_pointer_id),t=notable.get_clicked_page_xy(e,v),z.selection_rectangle.x1=notable.restore_scale(t.left),z.selection_rectangle.y1=notable.restore_scale(t.top),z.held_ctrl=e.ctrlKey||e.metaKey,0===a.get().length||z.held_ctrl||!z.selected_box.in_bounds(t.left,t.top)?(z.held_ctrl||y(),z.selection_box=new p(I),z.comments_preselected=[]):(z.is_dragging=!0,z.selection_limits=i.get_comments_limits(a.get(),I)),z.quad_tree=i.construct_quad_tree(I),a.fire_select_action(I,"pointer down")},D=function(e){var t,n;return e.preventDefault(),t=notable.get_clicked_page_xy(e,v),z.selection_rectangle.x2=notable.restore_scale(t.left),z.selection_rectangle.y2=notable.restore_scale(t.top),z.is_dragging?(g.translate_xy(z.selection_limits,z.selection_rectangle,I),z.selected_box.transform_translate(z.selection_limits,z.selection_rectangle)):(null!=(n=z.selection_box)&&n.draw(z.selection_rectangle),j())},O=function(e){var t,n,r,o,s;if(e.preventDefault(),v[0].removeEventListener("pointermove",D),v[0].removeEventListener("lostpointercapture",O),z.last_pointer_id)try{v[0].releasePointerCapture(z.last_pointer_id),z.last_pointer_id=null}catch(e){t=e}return r=notable.get_clicked_page_xy(e,v),z.selection_rectangle.x2=notable.restore_scale(r.left),z.selection_rectangle.y2=notable.restore_scale(r.top),n=!(z.selection_rectangle.x1===z.selection_rectangle.x2&&z.selection_rectangle.y1===z.selection_rectangle.y2),z.is_dragging&&n?(s=g.set_xy(z.selection_limits,z.selection_rectangle,I),u.$apply(function(){return s()}),z.selected_box.draw(),m.track("Dragged Selection")):x(z.held_ctrl,n),null!=(o=z.selection_box)&&o.destructor(),z.selection_box=null,z.is_dragging=!1,z.comments_preselected=[],a.get().length>0?z.selection_limits=i.get_comments_limits(a.get(),I):z.selection_limits=null},T=function(e){var t;return z.is_dragging||(v[0].removeEventListener("pointermove",D),v[0].removeEventListener("lostpointercapture",O),null!=(t=z.selection_box)&&t.destructor(),z.is_dragging=!1,g.set_inactive(i.get_selected_elements(z.comments_preselected)),z.comments_preselected=[]),!1},B=function(){return v[0].addEventListener("pointerdown",A),v.contextmenu(T),z.destroy_pinchzoom_listener=d.watchStart(T),q.add(z.destroy_pinchzoom_listener)},S=function(){var e;if(v[0].removeEventListener("pointerdown",A),v[0].removeEventListener("pointermove",D),v[0].removeEventListener("lostpointercapture",O),v.off("contextmenu"),z.last_pointer_id)try{v[0].releasePointerCapture(z.last_pointer_id),z.last_pointer_id=null}catch(t){e=t}return q.add(z.destroy_pinchzoom_listener),"function"==typeof z.destroy_pinchzoom_listener&&z.destroy_pinchzoom_listener(),z.destroy_pinchzoom_listener=null},P=[],k=function(){var e;return e=i.filter_author(a.get(),"owner"),i.delete_annotations(e),g.set_inactive(),a.set([],I),m.track("Delete Selection")},w=function(e,n){var r,o,s;if(PDFViewerApplication.pdfViewer.currentPageNumber===I&&(r=a.get(),r&&r.length>0))return o=JSON.stringify({kamiAnnotationsCopy:!0,selection:i.generate_copy(r,I)}),e?(e.originalEvent.clipboardData.setData("text/plain",o),e.preventDefault()):(s=t("<input class='annotation-selection-clipboard'>"),t("body").append(s),s.val(o).select(),document.execCommand("copy"),s.remove()),m.track("Copy Selection",{from_key_board:null!=e})},L=30,N=function(e,t){var n,r,o,s;if(PDFViewerApplication.pdfViewer.currentPageNumber===I){try{if(s=JSON.parse(t),!s.kamiAnnotationsCopy)return;o=s.selection,e.preventDefault()}catch(e){return void(n=e)}if(o&&o.length>0)return o.length>L?void f.openConfirm({template:"<p>You have "+o.length+" items in your clipboard but can only paste a maximum of "+L+" items at one time!</p> <div class='ngdialog-buttons'> <button type='button' class='ngdialog-button ngdialog-button-primary' ng-click='closeThisDialog()''>OK</button> </div>",plain:!0}):(r=i.paste_comments(o,I),c(function(){return g.set_inactive(),a.set(r,I),g.set_active(),a.fire_select_action(I,"paste")},50),m.track("Paste Selection"))}},$={listeners:[],on:function(){return this.listeners.push(u.$on("comment_updated",function(){var e,t,n;if(e=i.filter_active(a.get()),e&&e.length&&(null!=(t=e[0])&&null!=(n=t.referring_to)?n.page_no:void 0)===I)return a.set(e,I)})),this.listeners.push(u.$on("something",function(){return null}))},off:function(){var e,t,n,r,i;for(r=this.listeners,i=[],e=0,t=r.length;e<t;e++)n=r[e],i.push(n());return i}},F=function(){var e,t,n,r;for(P.push(s.watch_key_down(l.delete,!1,k)),P.push(s.watch_key_down(l.backspace,!1,k)),P.push(s.watch_copy(w)),P.push(s.watch_paste(N)),r=[],t=0,n=P.length;t<n;t++)e=P[t],r.push(q.add(e));return r},C=function(){var e,t,n,r;for(r=[],t=0,n=P.length;t<n;t++)e=P[t],r.push(e());return r}}}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e){ng.directive("setUpComment",["SubscriptionManagerFactory",function(t){return{scope:!0,link:function(n,r,i){var o,a,s,l,c,u,d,f;return d=t.for_directive(n,r),c=n.commentObj.referring_to,a=c.page_no,l=function(){return e("#pageContainer"+a).data("loaded")===!0},o=null,u=function(){if(e("#pageContainer"+a).length&&null==o&&(o=e("#pageContainer"+a)),null!=o)return n.calc_where_comment_goes(!0)},f=33,s=!1,n.calc_where_comment_goes=function(e,t){var i,a,l,u;if(null==e&&(e=!1),null==t&&(t=null),null!=o){switch(null!=t&&(s=t),u=n.commentObj.page_y_pos||notable.get_absolute_pos(o).top-f,l=c.y,PDFView.pageRotation){case 0:l=c.y;break;case 90:l=c.x;break;case 180:l=notable.reset_scale(o.height())-c.y;break;case 270:l=notable.reset_scale(o.height())-c.x}return a=u+l*notable.page_scale()+(s?0:n.commentObj.y_offset||0),i=n.commentObj.x_offset||0,e?(r.css({transitionDuration:"0ms",top:a+"px",left:i+"px",visibility:"visible"}),setTimeout(function(){return r.css({transitionDuration:""})},100)):r.css({top:a+"px",left:i+"px",visibility:"visible"}),a}},n.$watch("commentObj.y_offset",function(){return n.calc_where_comment_goes()}),n.$watch("commentObj.x_offset",function(){return n.calc_where_comment_goes()}),l()&&u(),d.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===a&&u(),!0})}}}])}).call(t,n(1))},function(e,t,n){(function(e){var t;t=n(24),ng.directive("setupDrawing",["DirectiveHelper","AnnotationState","AnnotationColors","Comment","Mixpanel","PinchZoomState","Undo","SubscriptionManagerFactory","SVGHelper",function(t,n,r,i,o,a,s,l,c){return{scope:!0,link:function(r,o,u){var d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I,M,L,N,j,F,B,U,z,q;return B=l.for_directive(r,o),q=o.data("viewbox_width"),z=o.data("viewbox_height"),F=!1,_=null,U=null,T=0,S=null,x=null,w=null,k=null,C=null,m=null,I=null,d=notable.is_embed?0:2e3,b=function(e){return"mouse"===e.type.slice(0,5)&&0!==e.button},y=function(){return"drawing"===n.annotation_mode},n.pan_with_touch||o.attr("touch-action","none"),o[0].addEventListener("touchstart",function(e){if("pen"===C&&n.pan_with_touch)return e.preventDefault()},{passive:!1,capture:!1}),o[0].addEventListener("pointerdown",function(e){if(n.pan_with_touch)return C=e.pointerType},{capture:!0}),j=function(e){if(!b(e)&&y()&&null==m&&("pen"===C||!n.pan_with_touch))return m=e.pointerId,e.preventDefault(),h(),F=e.shiftKey,_=null,o.append(g()),$(e),B.$(document).on("keyup",f)},o[0].addEventListener("pointerdown",j),p=function(e){if(!b(e)&&y()&&null!=m&&e.pointerId===m)return e.preventDefault(),$(e)},o[0].addEventListener("pointermove",p),v=function(e){if(e.preventDefault(),B.$(document).off("keyup",f),null!=m){if(m!==e.pointerId)return;return $(e),m=null,U=null,P(),N(),r.$apply(function(){return D()})}},o[0].addEventListener("pointerup",v),o[0].addEventListener("pointercancel",v),N=function(){return k=n.opacity,x=n.drawing_stroke_size,w=n.current_annotation_color()},D=function(){return S=s.add(function(){return h(),A(Snap(o[0]).innerSVG(),T),T=0,o.empty(),notable.unsafe_to_close=null},S)},A=function(e,t){return s.add(function(){var n;return T=t,n=Snap.parse(e),Snap(o[0]).append(n),P(),D()})},P=function(){return h(),notable.unsafe_to_close="setup_drawing",I=setTimeout(function(e){return function(){return O(),T=0,o.empty()}}(this),d)},h=function(){if(I)return clearTimeout(I),I=null},O=function(){if(notable.unsafe_to_close=null,!(T<1))return r.$apply(function(){var e,n,r,a;return r=t.page_no(o),e=c.calculate_children_svg_bounds(o,!0),c.normalize_temporary_svg_content(o,!0),a=Snap(o[0]).innerSVG(),n=i.create_comment({undo_unique_id:S,user_action:"click",page_no:r,content:a,x:e.left.toFixed(2),y:e.top.toFixed(2),annotation_type:"drawing",referring_to:{opacity:k,color:w,font_size:x,shape:"drawing",translated_coord:!0}}),S=null})},g=function(){return U=e(document.createElementNS("http://www.w3.org/2000/svg","polyline")),U.attr({fill:"none","fill-opacity":n.opacity,"stroke-opacity":n.opacity,"stroke-width":n.drawing_stroke_size,stroke:n.current_annotation_color()}),U.attr({"stroke-linejoin":"round","stroke-linecap":"round","fill-rule":"nonzero","setup-polyline":"",class:"shape"})},L=!1,M=[],$=function(e){if(M.push({event:e,svg_element:U}),!L)return L=!0,requestAnimationFrame(E)},f=function(e){if(null==e&&(e=null),null==e||27===e.keyCode)return M.push({event:"cancel_drawing"}),L?void 0:(L=!0,requestAnimationFrame(E))},B.add(a.watchStart(f)),R=function(){if(!(T<1))return h(),r.$$postDigest(function(){return O(),T=0,o.empty()})},r.$watch(function(){return n.annotation_mode},function(e,t){if("drawing"===t&&("eraser"===e||"normal"===e))return R()}),r.$watch(function(){return n.drawing_stroke_size},function(e,t){if(e!==t&&"drawing"===n.annotation_mode)return R()}),r.$watch(function(){return n.opacity},function(e,t){if(e!==t&&"drawing"===n.annotation_mode)return R()}),r.$watch(function(){return n.annotation_color_value.drawing},function(e,t){if(e!==t&&"drawing"===n.annotation_mode)return R()}),E=function(){var e,n,r,i,a,s,l,c,u,d,f,h,p,g,v,y,b,w,x,k,C,S,E,$;if(L=!1,M.length>0){for(v=o.offset(),g=[],r=[],c=0,f=M.length;c<f;c++)if(l=M[c],"pointermove"===l.event.type)if(l.event&&null!=l.event.getCoalescedEvents)if(n=l.event.getCoalescedEvents(),n&&n.length>0)for(u=0,h=n.length;u<h;u++)e=n[u],r.push({svg_element:l.svg_element,event:e});else r.push(l);else r.push(l);else r.push(l);for(d=0,p=r.length;d<p;d++){if(l=r[d],s=l.event,"cancel_drawing"===s){null!=U&&U.remove(),U=null,m=null,g=[],P();break}a=l.svg_element,x=[s.pageX,s.pageY],E=x[0],$=x[1],E-=v.left,$-=v.top,E+=document.body.scrollLeft,$+=document.body.scrollTop,k=t.rotate_point(E,$,o),E=k[0],$=k[1],y=E/o.width(),b=$/o.height(),C=q*y,S=z*b,T+=1,g.push(C.toFixed(2)+","+S.toFixed(2))}return M=[],g.length>0?(i=F?_:a.attr("points"),null==i&&(i=g[0]),w=i+" "+g.join(" "),null==_&&(_=w),a.attr("points",w)):void 0}}}}}])}).call(t,n(1))},function(e,t,n){(function(e,t){ng.directive("setupEraser",["Comment","SVGHelper","AnnotationState","PinchZoomState","SubscriptionManagerFactory",function(n,r,i,o,a){return function(s,l,c){var u,d,f,h,p,g,m,v;return v=a.for_directive(s,l),p=null,h=!1,f=!1,d=null,l[0].addEventListener("touchstart",function(e){if("pen"===d&&i.pan_with_touch)return e.preventDefault()},{passive:!1,capture:!1}),l[0].addEventListener("pointerdown",function(e){if(i.pan_with_touch)return d=e.pointerType},{capture:!0}),u=function(e){return"mouse"===e.pointerType.slice(0,5)&&0!==e.button},m=function(t,i){var o,a,s,c;if(l=e(document.elementFromPoint(t,i)),"svg"!==l[0].nodeName)return a=null!=(s=l.scope())?s.commentObj:void 0,a&&(null!=(c=l.scope())?c.can_edit():void 0)?"Drawing"===a.annotation_type&&"polyline"===l[0].nodeName?(l.remove(),o=r.get_element(a),0===o.length?n.remove_and_upsert_comment(a):(a.referring_to.translated_coord&&r.normalize_svg_content(o,!0),r.update_content(a))):n.remove_and_upsert_comment(a):void 0},g=function(e){var t,n,r,i,o,a,s,l,c;if(m(e.clientX,e.clientY),p&&(e.clientX!==p[0]||e.clientY!==p[1])&&(t=Math.sqrt(Math.pow(e.clientX-p[0],2)+Math.pow(e.clientY-p[1],2)),i=Math.ceil(t)-1,i>1))for(s=(e.clientX-p[0])/i,c=(e.clientY-p[1])/i,a=p[0],l=p[1],n=r=1,o=i;1<=o?r<o:r>o;n=1<=o?++r:--r)a+=s,l+=c,m(a,l);return p=[e.clientX,e.clientY]},t(l[0]).on("down",function(e){if(!("pen"!==e.originalEvent.pointerType&&i.pan_with_touch||u(e)))return"eraser"!==i.annotation_mode||f?void 0:(h=!0,p=null,g(e))}).on("move",function(e){if("eraser"===i.annotation_mode&&h&&!f)return g(e)}).on("up mouseleave",function(e){return h=!1,p=null}),v.add(o.watchStart(function(){return f=!0})),v.add(o.watchEnd(function(){return f=!1}))}}])}).call(t,n(1),n(25))},function(e,t,n){(function(e){ng.directive("setupInTextlayer",["$timeout","$compile","DirectiveHelper","SubscriptionManagerFactory",function(t,n,r,i){var o,a;return a=e("<annotation-text ng-style='{backgroundColor: commentObj.referring_to.fillColor}' class='hover-resize' text-hover></annotation-text>"),o=n(a),function(t,n,a){var s,l,c,u;return u=i.for_directive(t,n),l=t.commentObj.referring_to.page_no,s=null,c=function(){if(r.text_layer_is_loaded(l))return null!=s&&s.remove(),o(t,function(n,r){return s=n,n.attr("id","text-"+t.commentObj.id),e("#notableAnnotationLayer"+l+"-top").append(n)})},u.add(function(){return null!=s?s.remove():void 0}),u.$(window).on("textlayerrendered scalechange",function(e){var t,n;return(null!=e&&null!=(t=e.originalEvent)&&null!=(n=t.detail)?n.pageNumber:void 0)===l&&c(),!0}),c()}}])}).call(t,n(1))},function(e,t,n){(function(e,t){var r;r=n(24),ng.directive("setupShape",["DirectiveHelper","AnnotationState","AnnotationColors","Comment","Mixpanel","PinchZoomState","SubscriptionManagerFactory","SVGHelper",function(n,r,i,o,a,s,l,c){return function(i,a,u){var d,f,h,p,g,m,v,_,y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I;return A=l.for_directive(i,a),R=a.data("viewbox_width"),P=a.data("viewbox_height"),k=!1,T=!1,g=null,D=null,x=0,$=null,y=!1,O=1,v=null,_=null,r.pan_with_touch||a.attr("touch-action","none"),m=function(e){if("mouse"===e.type.slice(0,5)&&0!==e.button)return!1;switch(r.annotation_mode){case"shape":return!0;case"highlight":return"shape"===r.highlight_submode;default:return!1}},p=function(){switch(r.annotation_mode){case"highlight":return"rectangle";default:return r.drawing_shape}},E=function(){switch(r.annotation_mode){case"highlight":return"fill";default:return r.shape_stroke_size}},S=function(){switch(r.annotation_mode){case"highlight":return"0.3";default:return r.opacity}},f=function(){return r.current_annotation_color()},e(a[0]).draggable({onstart:function(e){if(m(e))return k=!0,$=p(),T=e.shiftKey,g=null,a.append(d()),x=0},onmove:function(e){if(m(e)&&k)return T=e.shiftKey,b(e)},onend:function(e){var t;if(m(e)&&k)return k=!1,t=C(),D.remove(),D=null,t?void 0:h(e)}}).on("mousedown touchstart pointerdown",function(e){if(m(e)&&!k)return y=e}).on("mouseup touchend pointerup",function(e){var t;if(m(e)&&!k&&y){if("touchend"===e.type){if("touchstart"!==y.type||y.touches.length!==(t=e.changedTouches.length)||1!==t||!I(y.touches[0].clientX,y.touches[0].clientY,e.changedTouches[0].clientX,e.changedTouches[0].clientY))return}else{if("touchstart"===y.type)return;if(!I(y.x,y.y,e.x,e.y))return}return h(e),y=!1}}).on("up",notable.remove_cursor_styling),I=function(e,t,n,r){return Math.abs(e-n)<=O&&Math.abs(t-r)<=O},h=function(e){switch($=p()){case"rectangle":case"ellipse":a.append(d()),w(e);break;default:return!1}return C(!0),D.remove(),D=null,!0},C=function(e){return!(x<=1&&!e)&&(i.$apply(function(){var e,t,r,i,a;return r=n.page_no(D),i=c.pos_relative_to_drawing(D,r),t=D.attr("fill-opacity")||D.attr("stroke-opacity")||"1.0",t=parseFloat(t),c.normalize_svg_content([D.get(0)],!0),a=Snap(D[0]).outerSVG(),e=o.create_comment({user_action:"click",page_no:r,color:D.attr("stroke")||D.attr("fill")||"#000000",font_size:D.attr("stroke-width")||"fill",content:a,x:i.left,y:i.top,referring_to:{opacity:t,shape:$,translated_coord:!0}})}),!0)},d=function(){var e,n;switch($){case"rectangle":D=t(document.createElementNS("http://www.w3.org/2000/svg","rect"));break;case"line":D=t(document.createElementNS("http://www.w3.org/2000/svg","line"));break;case"ellipse":D=t(document.createElementNS("http://www.w3.org/2000/svg","ellipse"))}return n=E(),"fill"===n?"line"!==$?D.attr({fill:f()}):D.attr({fill:"none","stroke-width":"6px",stroke:f()}):D.attr({fill:"none","stroke-width":n,stroke:f()}),e=S(),D.attr({"stroke-opacity":e,"fill-opacity":e,"stroke-linejoin":"round","fill-rule":"nonzero","setup-polyline":"",class:"shape shape-"+$})},A.add(s.watchStart(function(){if("shape"===r.annotation_mode)return k=!1,D&&D.remove(),
D=null,y=!1})),b=function(e){var t,r,i,o,s,l,c,u,d,f,h,p;switch(t=a.offset(),o=[e.pageX,e.pageY],d=o[0],h=o[1],d-=t.left,h-=t.top,d+=document.body.scrollLeft,h+=document.body.scrollTop,s=n.rotate_point(d,h,a),d=s[0],h=s[1],r=d/a.width(),i=h/a.height(),c=R*r,u=P*i,null==g&&(g={x:c,y:u}),$){case"rectangle":D.attr({x:Math.min(c,g.x).toFixed(2),y:Math.min(u,g.y).toFixed(2),width:Math.abs(c-g.x).toFixed(2),height:Math.abs(u-g.y).toFixed(2)});break;case"ellipse":D.attr({cx:((c+g.x)/2).toFixed(2),cy:((u+g.y)/2).toFixed(2),rx:(Math.abs(c-g.x)/2).toFixed(2),ry:(Math.abs(u-g.y)/2).toFixed(2)});break;case"line":f=c,p=u,T&&(l=notable.snap_line(g.x,g.y,f,p),f=l[0],p=l[1]),D.attr({x1:g.x.toFixed(2),y1:g.y.toFixed(2),x2:f,y2:p})}return x+=1},w=function(e){var t,r,i,o,s,l,c,u,d,f;if("touchend"===e.type){if(e.changedTouches.length>1)return;e=e.changedTouches[0]}switch(t=a.offset(),o=[e.pageX,e.pageY],d=o[0],f=o[1],d-=t.left,f-=t.top,d+=document.body.scrollLeft,f+=document.body.scrollTop,s=n.rotate_point(d,f,a),d=s[0],f=s[1],r=d/a.width(),i=f/a.height(),c=R*r,u=P*i,l=10,$){case"rectangle":return D.attr({x:(c-l/2).toFixed(2),y:(u-l/2).toFixed(2),width:l,height:l});case"ellipse":return D.attr({cx:c.toFixed(2),cy:u.toFixed(2),rx:l,ry:l})}}}}])}).call(t,n(25),n(1))},function(e,t,n){var r,i;r=n(237),i=n(559),ng.directive("setupTooltip",["DirectiveHelper","TooltipScope","$timeout","AnnotationState","SubscriptionManagerFactory",function(e,t,n,o,a){return{link:function(i,s){var l,c,u,d;return d=a.for_directive(i,s),l=s.find("#tooltip"),c=new r(e,t,n,l,o),d.add(t.$on("start-triangle-listener",c.start_triangle_listener)),d.add(t.$on("show-tooltip",c.show)),d.add(t.$on("hide-tooltip",c.hide)),null!=(u=s.get(0))?u.addEventListener("touchstart",function(e){return e.preventDefault()},{passive:!1}):void 0},templateUrl:i}}])},function(e,t,n){(function(e,t){var r;n(92),r=n(126),ng.directive("signaturePad",["$q",function(n){return{template:"<canvas></canvas>",scope:{signaturePad:"=",width:"=",height:"=",onStart:"&"},link:function(i,o,a){var s,l,c;return s=o.find("canvas")[0],i.width&&(s.width=i.width),i.height&&(s.height=i.height),c=new r(s),l=i.signaturePad||{},e.assign(l,{clear:function(){return c.clear()},isEmpty:function(){return c.isEmpty()},getBlob:function(){var e;return e=n.defer(),s.toBlob(e.resolve),e.promise},canvas:s,toDataURL:function(){return c.toDataURL()},fromDataURL:function(e){return c.fromDataURL(e)}}),t(s).on("touchstart mousedown",function(){return i.$apply(function(){return i.onStart()})})}}}])}).call(t,n(2),n(1))},function(e,t,n){var r;r=n(552),ng.directive("signupDialog",function(){return{restrict:"E",templateUrl:r,controller:"SignUpInController"}})},function(e,t){ng.directive("sliderBind",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(n,r,i){var o,a;return a=i.sliderBind,o=e(a),r.on("input",function(){var e;return e=1-this.value/100,n.$apply(function(){return o.assign(n,e)})}),n.$watch(a,function(e,n){return t(function(){var t;return t=100*(1-e),r[0].MaterialSlider.change(t)},0)})}}}])},function(e,t,n){(function(e){var t;t=n(553),n(191),ng.service("SpeechIndicatorHelper",["$rootScope","$timeout",function(t,n){var r,i,o,a;r=t.$new(!0),o="focused-comment",i=function(){var t,n,i,a,s;return t=document.activeElement,n=null!=t&&t.hasAttribute("editable")?null!=(i=e(t).scope().commentObj)?i.id:void 0:null,s=null!=(a=null!=t?t.getAttribute("speech-input-tag"):void 0)?a:null,r.$broadcast(o,n,s)},this.on_focus_change=function(e){return r.$on(o,function(t,n,r){return e(n,r)})},a=function(e){return i()},document.addEventListener("focus",a,!0),document.addEventListener("blur",a,!0)}]),ng.directive("speechIndicator",["PremiumRequiredDialog","LicensesHelper","SubscriptionManagerFactory","SpeechRecognitionService","SpeechIndicatorHelper","$timeout",function(e,n,r,i,o,a){return{templateUrl:t,scope:!0,link:function(t,s,l){var c,u,d,f;if(u="voice_typing",t.is_supported=i.is_supported(),t.feature_visible=n.has_flag(u),t.is_supported&&t.feature_visible)return f=r.for_directive(t,s),c=null,t.is_active=!1,t.is_running=!1,f.add(o.on_focus_change(function(e,n){var r,i,o;return r=null!=(i=s.attr("speech-input-tag"))?i:null,t.is_active=null!=e&&e===(null!=(o=t.commentObj)?o.id:void 0)&&n===r})),f.add(i.on_start(function(){return t.is_running=!0,a.cancel(c)})),f.add(i.on_end(function(){return t.is_running=!1,a.cancel(c)})),s.closest(".page").length&&(d=function(){var e;return e=notable.page_scale(),s.css({transform:"scale("+(e>1?1:1/e)+")"})},f.$(window).on("textlayerrendered scalechange",d),d()),n.has_feature(u)||s.on("mouseup",function(t){return e.open(u)}),s.on("mousedown",function(e){var r;if(e.preventDefault(),n.has_feature(u))return a.cancel(c),r=i.is_running(),t.is_running=!r,r?i.stop():i.start(),c=a(function(){return t.is_running=r},400)})}}}])}).call(t,n(1))},function(e,t){ng.directive("speechInput",["SubscriptionManagerFactory","SpeechRecognitionService",function(e,t){return{restrict:"A",link:function(n,r,i){var o,a,s,l,c,u,d,f,h,p,g,m,v,_,y,b,w,x,k,C,S;return o=3,C=e.for_directive(n,r),d=!1,S=null,f=!1,_="Â­",u=new RegExp(_+"([^"+_+"]*)"+_,"g"),t.on_start(function(){var e,n,i;if(document.activeElement===r[0])return d=!0,y(),i=t.listen(h),C.add(i),S=i,e=s(),f=9!==(n=e.charCodeAt(0))&&10!==n&&11!==n&&12!==n&&13!==n&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&8192!==n&&8193!==n&&8194!==n&&8195!==n&&8196!==n&&8197!==n&&8198!==n&&8199!==n&&8200!==n&&8201!==n&&8202!==n&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&12288!==n&&65279!==n}),t.on_end(function(){if(d=!1,null!=S)return C.remove(S),S(),S=null,document.activeElement===r[0]?(y(),p(),v()):p()}),h=function(e,t){var i;return document.activeElement!==r[0]?(p(),void n.$emit("editing_updated")):(g(),v(),null!=e&&e.length>0&&(i=f?" ":"",c(""+i+e),f=!1,y()),(null!=t?t.length:void 0)&&(i=f?" ":"",c(""+_+i+t+_)),n.$emit("editing_updated"))},c=function(e){var t,n,r,i,a,s,c;return s=window.getSelection(),n=s.focusNode,t=n.textContent,r=s.focusOffset,i=t.substring(0,r),c=t.substring(r),n.textContent=""+i+e+c,0===t.length&&n.nodeType!==o&&(n=l(n,e)),a=s.getRangeAt(0),a.setStart(n,r+e.length),a.setEnd(n,r+e.length)},m=function(e,t){var n,r,i,a,s;for(a=e.childNodes,n=0,r=a.length;n<r;n++)i=a[n],(null!=(s=i.childNodes)?s.length:void 0)&&m(i,t),i.nodeType===o&&(i.data=i.data.replace(u,t))},p=function(e){return null==e&&(e=r[0]),m(e,"$1")},g=function(e){return null==e&&(e=r[0]),m(e,"")},l=function(e,t){var n,r,i,o,a,s;for(o=e.childNodes,n=0,r=o.length;n<r;n++){if(i=o[n],i.textContent===t)return i;if((null!=(a=i.childNodes)?a.length:void 0)&&(s=l(i,t),null!=s))return s}},r.on("blur",function(e){return t.stop()}),a=function(e){if(d)return e.preventDefault()},r.on("mousedown",a),r.on("keydown",a),b=null,x=null,w=0,k=0,y=function(){var e;return e=window.getSelection(),b=e.anchorNode,x=e.focusNode,w=e.anchorOffset,k=e.focusOffset},v=function(){var e,t,n,r;if(null!=b&&null!=x)return e=Math.min(w,b.length),e=Math.max(e,0),t=Math.min(k,x.length),t=Math.max(t,0),n=document.createRange(),n.setStart(b,e),n.setEnd(x,t),r=window.getSelection(),r.removeAllRanges(),r.addRange(n)},s=function(){var e,t,n;if(window.getSelection){if(n=window.getSelection(),n.rangeCount>0)return t=n.getRangeAt(0).cloneRange(),t.collapse(!0),t.setStart(r[0],0),t.toString().slice(-1)}else if(n=document.selection&&"Control"!==n.type)return t=n.createRange(),e=t.duplicate(),e.moveToElementText(r[0]),e.setEndPoint("EndToStart",t),e.text.slice(-1);return null},p()}}}])},function(e,t,n){var r;r=n(554),n(192),ng.directive("stylerPalette",["AnnotationSelectionState","AnnotationSelectionHelper","SubscriptionManagerFactory","AnnotationColors","$timeout","WindowKeyListeners","KeyCodes","Mixpanel",function(e,t,n,i,o,a,s,l){return{restrict:"E",scope:!0,replace:!0,templateUrl:r,link:function(r,c,u){var d;return d=n.for_directive(r,c),r.visible=!1,r.contained_properties={},d.add(e.watch_all(function(){var n;return n=t.filter_author(e.get(),"owner"),n.length>0?(r.visible=!0,r.contained_properties=t.contained_properties(n),r.contained_properties.hasOwnProperty("color")&&null===r.contained_properties.color&&(r.contained_properties.color="silver"),r.contained_properties.hasOwnProperty("fillColor")&&null===r.contained_properties.fillColor&&(r.contained_properties.fillColor="silver"),r.contained_properties.hasOwnProperty("rotation")&&null!==r.contained_properties.rotation&&(r.contained_properties.rotation=(r.contained_properties.rotation+=360)%360,r.contained_properties.rotation=r.contained_properties.rotation.toString()),r.contained_properties.hasOwnProperty("opacity")&&null!==r.contained_properties.opacity?r.contained_properties.opacity=(1*r.contained_properties.opacity).toString():void 0):(r.visible=!1,r.contained_properties={})})),r.modify_property=function(n,i){var a,s;return s={},s[n]=i,a=t.filter_author(e.get(),"owner"),t.set_properties(a,s),r.contained_properties[n]=i,o(function(){return e.fire_properties_changed(s)},0),l.track("Modify Selection Properties",{properties:s})},r.copied=!1,r.copy_selection=function(){return a.fire_copy(),r.copied=!0,o(function(){return r.copied=!1},400)},r.delete_selection=function(){return a.fire_key_down(s.backspace,!1,!1)},r.annotation_colors=i,r.font_size=null,r.thickness=null,r.opacity=null,r.rotation=null}}}])},function(e,t,n){(function(e,t){ng.factory("SVGHelper",["Comment","DirectiveHelper",function(n,r){var i,o,a,s,l,c,u,d,f,h,p,g,m;return s=function(t){return null==t?e():e("#g-"+t.id).find("[class~=shape]")},g=function(r,i){var o,a,s,l,c;return c=e("#g-"+r.id),r.referring_to.translated_coord||(u(c.children(),!0),r.referring_to.translated_coord=!0),s=c.find("[class~=point-handle]"),s.remove(),a=t.map(c.children(),function(e){return Snap(e).outerSVG()}).join(""),l=h(c,r.referring_to.page_no),c.append(s),r.referring_to.x=l.left,r.referring_to.y=l.top,r.content=a,(null!=i?i.no_upsert:void 0)||(o=t.clone(r),n.upsert(o)),a},p=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h,p;switch(e.tagName){case"polyline":if(c=null!=(u=e.getAttribute("points"))?u.split(" "):void 0){for(r=[],a=0,s=c.length;a<s;a++)l=c[a],n=l.split(","),n[0]=(n[0]-t.left).toFixed(2),n[1]=(n[1]-t.top).toFixed(2),r.push(n.join(","));return e.setAttribute("points",r.join(" "))}break;case"rect":return e.setAttribute("x",0),e.setAttribute("y",0);case"line":return d=parseFloat(e.getAttribute("x1")),h=parseFloat(e.getAttribute("y1")),f=parseFloat(e.getAttribute("x2")),p=parseFloat(e.getAttribute("y2")),e.setAttribute("x1",d-t.left),e.setAttribute("y1",h-t.top),e.setAttribute("x2",f-t.left),e.setAttribute("y2",p-t.top);case"ellipse":return i=parseFloat(e.getAttribute("cx")),o=parseFloat(e.getAttribute("cy")),e.setAttribute("cx",i-t.left),e.setAttribute("cy",o-t.top)}},u=function(e,t){var n,r,i,o,a,s,l,c,u,d,f,h;for(r={left:null,top:null},s=0,u=e.length;s<u;s++)h=e[s],"defs"!==h.nodeName&&(h.classList.contains("point-handle")||(n=h.getBBox(),(n.x<r.left||null==r.left)&&(r.left=n.x),(n.y<r.top||null==r.top)&&(r.top=n.y)));for(l=0,d=e.length;l<d;l++)if(h=e[l],"defs"!==h.nodeName)try{p(h,r)}catch(e){a=e}if(t)for(c=0,f=e.length;c<f;c++)h=e[c],"defs"!==h.nodeName&&(i=(parseFloat(h.getAttribute("dx")||0)+r.left).toFixed(2),o=(parseFloat(h.getAttribute("dy")||0)+r.top).toFixed(2),h.setAttribute("dx",i),h.setAttribute("dy",o),h.setAttribute("transform","translate("+i+","+o+")"));return r},d=function(e,t){var n,r,o,a,s,l,c,u,d,f;for(n=i(e),f=e.children(),s=0,c=f.length;s<c;s++){d=f[s];try{p(d,n)}catch(e){a=e}}if(t)for(l=0,u=f.length;l<u;l++)d=f[l],r=(parseFloat(d.getAttribute("dx")||0)+n.left).toFixed(2),o=(parseFloat(d.getAttribute("dy")||0)+n.top).toFixed(2),d.setAttribute("dx",r),d.setAttribute("dy",o),d.setAttribute("transform","translate("+r+","+o+")");return n},c=function(n,r){var i,o;switch(i=document.createElementNS("http://www.w3.org/2000/svg","marker"),t.each({viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:r,markerHeight:r,markerUnits:"userSpaceOnUse",orient:"auto",class:n},function(e,t){return i.setAttribute(t,e)}),o=document.createElementNS("http://www.w3.org/2000/svg","path"),n){case"ArrowStart":o.setAttribute("d","M 10 10 L 0 5 L 10 0 z");break;case"ArrowEnd":o.setAttribute("d","M 0 0 L 10 5 L 0 10 z")}return i.appendChild(o),e(i)},m=function(e,t){var n;if(n=e.get(0))return n.setAttribute("markerWidth",t),n.setAttribute("markerHeight",t)},o=function(t,n,r,i){var o,a,s,l,u,d,f,h,p;if(s=t.attr(n),null!=s)return o=t.parent().find("defs"),0===o.length&&(o=e(o=document.createElementNS("http://www.w3.org/2000/svg","defs")),t.parent().append(o)),h=s.match(/url\(#(.*?)(_.*)?\)/),p=h[0],f=h[1],d=f+"_"+i,u=o.find("."+f),t.attr(n,"url(#"+d+")"),a=parseInt(t.attr("stroke-width")),l=2*a,l=l>4?l:4,0===u.length?(u=c(f,l),o.append(u)):m(u,l),u.attr({id:d,fill:r})},a=function(e){var t,n;return t=e.attr("stroke"),n=e.parent().attr("id"),o(e,"marker-start",t,n),o(e,"marker-end",t,n)},i=function(e,t){var n,r,i,o;return n=e[0].getBBox(),i={left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height},t&&(o=l(e),r={width:notable.reset_scale(e.width()),height:notable.reset_scale(e.height())},i.left=i.left*r.width/o.width,i.right=i.right*r.width/o.width,i.top=i.top*r.height/o.height,i.bottom=i.bottom*r.height/o.height),i},f=function(e,t){var n,r;return r={x:null,y:null},n=l(e),r.x=t.x*n.width/notable.reset_scale(e.width()),r.y=t.y*n.height/notable.reset_scale(e.height()),r},l=function(e){var t,n,r;return t=e.closest("svg"),n=t[0].getAttribute("viewBox").split(" "),r={width:Math.abs(n[0]-n[2]),height:Math.abs(n[1]-n[3])}},h=function(t,n){var r,i,o,a;return r=t[0].getBBox(),o=e("#painting"+n),a=l(o),i={width:notable.reset_scale(o.width()),height:notable.reset_scale(o.height())},{left:r.x*i.width/a.width,top:r.y*i.height/a.height}},{get_element:s,normalize_svg_content:u,normalize_temporary_svg_content:d,update_content:g,ensure_markers:a,calculate_children_svg_bounds:i,pixel_to_viewbox:f,get_viewbox_dimensions:l,pos_relative_to_drawing:h}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e,t,r){var i,o;i=n(555),n(193),o=n(14),ng.directive("symbolPicker",["SubscriptionManagerFactory","SettingsFactory","Mixpanel",function(n,o,a){return{restrict:"E",templateUrl:i,link:function(n,i,s){var l,c,u,d,f,h;return f="recent_symbols_"+n.container_id,n.recents=[],l=function(t){var n;return n=o.get(f,[]),n.unshift(t),n=e.uniqBy(n,function(e){return e.key}),n.length>8&&n.pop(),o.set(f,n),u()},c=function(){return o.destroy(f),n.recents=[]},u=function(){return n.recents=o.get(f,[])},u(),n.all_symbols=e.cloneDeep(n.symbols_list),n.search_term="",n.exclude_symbols=function(e){var t,r;return!n.search_term||(r=n.search_term.toLowerCase(),t=e.key.toLowerCase(),~t.indexOf(r))},n.sort_symbols=function(e){var t,r,i;return n.search_term?(i=n.search_term.toLowerCase(),r=e.key.toLowerCase(),t=r.indexOf(i),t>-1?t:9999):null!=e.importance?e.importance:9999},n.seach_updated=function(){return null},n.select_symbol=function(e){return n.hooks.select_symbol(e),l(e),a.track("Symbol Picker Select Symbol",{symbol:e,searchTerm:n.search_term})},n.on_search_focus=function(){return d.set_old_element()},n.on_search_blur=function(){return d.focus_old_element()},n.symbol_container_mousedown=function(){return t(document.activeElement).closest(".symbol-picker").length?n.on_search_blur():d.old_element=null},d={old_element:null,set_old_element:function(){if(!t(document.activeElement).closest(".symbol-picker").length)return this.old_element=document.activeElement},focus_old_element:function(){var e;return null!=(e=this.old_element)?e.focus():void 0}},n.prevent_default=function(e){return e.preventDefault(),e.stopPropagation()},n.close=n.hooks.close,n.symbols=n.symbols_list,h={x:null,y:null},n.ui_config.draggable&&n.ui_config.header&&r("#"+n.container_id,{allowFrom:".header"}).draggable({restrict:{restriction:"parent",elementRect:{top:0,left:0,bottom:1,right:1}},onstart:function(e){return h.x=e.clientX,h.y=e.clientY},onmove:function(e){var t,n;return t=e.clientX-h.x,n=e.clientY-h.y,i.css("transform","translate("+t+"px,"+n+"px)")},onend:function(e){var t,r,o,a;return t=e.clientX-h.x,o=e.clientY-h.y,r=parseInt(i.css("left"))+t,a=parseInt(i.css("top"))+o,i.css({transform:"",left:r,top:a}),h={x:null,y:null},n.hooks.move(r,a)}}),i.css({left:n.ui_config.starting_position[0],top:n.ui_config.starting_position[1]})}}}])}).call(t,n(2),n(1),n(25))},function(e,t,n){var r;r=n(556),ng.directive("syncDropdown",function(){return{restrict:"E",templateUrl:r}})},function(e,t,n){(function(e){ng.directive("textHover",["DirectiveHelper","TooltipScope","SubscriptionManagerFactory","$timeout",function(t,n,r,i){return function(o,a){var s,l,c,u,d,f,h;return h=r.for_directive(o,a),l={hover:!1,clicked:!1,tool:!1},d=null,a.on("mousemove mouseleave",function(e){if(c(e),d&&i.cancel(d),"mouseleave"!==e.type)return d=i(function(){return f(e)},200)}),c=function(e){return"mouse"===e.type.slice(0,5)?l.hover="mousemove"===e.type:"focus"!==e.type&&"blur"!==e.type||(l.clicked="focus"===e.type),s()?a.removeClass("hover"):u()?void n.$broadcast("start-triangle-listener",e):a.is(".hover")?void 0:a.addClass("hover")},a.find(".comment").focus(c).blur(c),s=function(){return!l.hover&&!l.clicked&&!l.tool},u=function(){return!l.hover&&!l.clicked&&l.tool},f=function(r){var i,s;return i=e("#viewer"),r.pageY=a.find(".comment").offset().top,r=t.event_relative_to_container(i,r),s=notable.pdf_to_screen({x:a.outerWidth(),y:a.outerHeight()}).y,r.height=Math.abs(s),n.$broadcast("show-tooltip",o,r),l.tool=!0},h.add(n.$on("hide-tooltip",function(){return l.tool=!1,c({type:"mouse-fake-leave"})}))}}])}).call(t,n(1))},function(e,t,n){var r;r=n(557),ng.directive("toolSelector",["AnnotationState","tts","Mixpanel","ExtensionRequiredDialog","LicensesHelper",function(e,t,n,i,o){return{restrict:"E",templateUrl:r,transclude:!0,scope:{annotationType:"@",hideTooltip:"@",tooltip:"@",wide:"@"},replace:!0,controller:["$scope","PremiumRequiredDialog","ToolVisibility",function(r,a,s){return r.tool_items=r.$parent.tool_items,r.tool_visible=s.is_tool_visible(r.annotationType),r.toggle_off=!1,r.annotation_state=e,r.annotation_toolbar_detailed=function(){return r.$parent.annotation_toolbar_detailed},r.toggle_annotation_mode=function(s){var l,c,u;if(n.track("Toggle Annotation Mode",{to:s,from:e.annotation_mode}),null==(u=r.tool_items[s])||!u.unselectable){if("tts"!==s&&s===r.annotationType&&e.annotation_mode===s)return"normal"===s&&(r.annotation_state.selection_submode="normal"),r.toggle_off=!r.toggle_off;if(r.hideTooltip&&(r.tooltip_visible=!1),"normal"===s&&"select"===r.annotation_state.selection_submode&&(r.annotation_state.selection_submode="normal"),"equation"===s&&!o.has_feature("equation"))return a.open("equation"),s="normal",void e.set_annotation_mode(s);"tts"===e.annotation_mode&&"tts"!==s&&t.stop(),"tts"===s&&(c=r.toggle_off,l=e.annotation_mode,t.isEnabled()?o.has_feature("tts")?t.isSpeaking()?t.stop():(t.speakCurrentSelection(),l===s&&(r.toggle_off=!c)):(a.open("tts"),s="normal",e.set_annotation_mode(s)):(n.track("TTS Not Enabled"),s="normal",e.set_annotation_mode(s),notable.is_extension||i.open("Text to Speech"))),"shape"===s?o.has_feature("shape")?e.set_annotation_mode(s):a.open("shape"):e.set_annotation_mode(s),r.toggle_off=!1}}}]}}])},function(e,t,n){(function(e,t){var r;r=n(558),ng.directive("toolSelectorExpanded",["$timeout","SubscriptionManagerFactory","AnnotationState","AnnotationColors","ColorPaletteDialog","LicensesHelper","SymbolPicker","mathematicalSymbolsList","Mixpanel","PremiumRequiredDialog",function(n,i,o,a,s,l,c,u,d,f){return{restrict:"E",templateUrl:r,replace:!0,link:function(n,r,h){var p,g,m;return m=i.for_directive(n,r),p=o,g=e.debounce(function(){var e,i,o,a,s,l;if(n.annotationType===p.annotation_mode)return i=parseInt(r.css("height")),s=null!=(o=r.parent())?o.position().top:void 0,a=t("#annotation-toolbar").height(),e=15,a-=e,i+s>a?(l=i>a?s*-1:a-s-i,r.css({top:l+"px"})):r.css({top:""})},10),n.$watch("annotation_state.annotation_mode",function(e,t){return e===n.annotationType?(m.$(window).off("resize",g),g(),m.$(window).on("resize",g)):t===n.annotationType?(m.$(window).off("resize",g),n.transparency_state=!1):void 0}),n.$watch("toggle_off",function(e,t){if(e===!1)return g()}),g(),n.stroke_sizes=a.stroke_sizes(),n.dropit_state=!1,n.toggle_dropit_state=function(e){return n.dropit_state=e},n.font_sizes=a.font_sizes(),n.colors=a.colors(),n.$on("annotation_colors_updated",function(){return n.colors=a.colors()}),n.toggle_transparency_state=function(e){return"toggle"===e?n.transparency_state=!n.transparency_state:n.transparency_state=e},n.change_sub_mode=function(e){if("dictionary"===e){if(!l.has_feature("dictionary"))return f.open("dictionary");d.track("Dictionary Selected")}switch("select"===e&&d.track("Enter Select Annotation Mode"),p.annotation_mode){case"comment":return"audio"!==e||l.has_feature("audio_comment")?"video"!==e&&"desktop"!==e||l.has_feature("video_comment")?p.comment_submode=e:void f.open("video_comment"):void f.open("audio_comment");case"highlight":return p.highlight_submode=e;default:return p.selection_submode=e}},n.change_shape=function(e){return p.drawing_shape=e},n.get_color=function(e){return n.colors[e]},n.get_recent_colors=function(){return p.get_recent_colors(n.annotationType)},n.set_recent_color=function(e){return p.set_recent_colors(n.annotationType,e)},n.select_color=function(e,t){return t&&n.set_recent_color(e),o.set_annotation_color_value(n.annotationType,e)},n.edit_colors=function(){return s.open()},n.parseInt=function(e){return parseFloat(e)||e},n.change_stroke_size=function(e){return"drawing"===p.annotation_mode?p.drawing_stroke_size=e:"shape"===p.annotation_mode?p.shape_stroke_size=e:void 0},n.get_stroke_size=function(){return"drawing"===p.annotation_mode?p.drawing_stroke_size:"shape"===p.annotation_mode?p.shape_stroke_size:null},n.palette_opened=!1,n.toggle_symbols_palette=function(){var e,t,i;return t=c.get("equation"),t?t.trigger_close(!0):(e=function(){return n.palette_opened=!1},i=c.createNew({id:"equation",title:"Mathematical Symbols",class_name:"equation-symbol-picker",draggable:!1,header:!1,starting_position:["100%",0],symbols_list:u,container:r,hooks:{on_close:e}}),n.palette_opened=!0,d.track("Open Mathematical Symbol Picker"))},n.prevent_default=function(e){return e.preventDefault(),e.stopPropagation()},n.feature_enabled=function(e){return l.has_feature(e)}}}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e,t){ng.directive("tooltipDraggable",["DirectiveHelper","TooltipScope","SVGHelper","Comment","Mixpanel",function(n,r,i,o,a){return function(r,s){var l,c;l=function(){var l,u,d,f,h,p,g,m,v,_,y;return d=0,f=0,l=null,u=null,v=null,y=null,_=null,g=0,m=0,p=0,h="",e(s.find(".move")[0]).draggable(!0).on("dragstart",function(e){var i,o,c,b;if(a.track_api("Dragged annotation",{type:r.commentObj.annotation_type,via:"tooltip"}),s.addClass("is-dragging"),i=t("#g-"+r.commentObj.id),i.get(0)?(l=i.find(".shape"),u=i.closest("svg")):(l=t("#text-"+r.commentObj.id),l.get(0)||(l=t("#comment-"+r.commentObj.id)),o=n.page_no(l),u=t("#textLayer"+o)),(null!=l?l.length:void 0)>0)return d=parseInt(l.attr("dx"))||0,f=parseInt(l.attr("dy"))||0,v={x:e.pageX,y:e.pageY},y={top:parseFloat(null!=(c=s[0].style.top)?c:s.css("top")),left:parseFloat(null!=(b=s[0].style.left)?b:s.css("left"))},_=l[0].getBoundingClientRect(),g=u[0].getBoundingClientRect(),m=g.right-g.left,p=g.bottom-g.top,h=l.css("transform"),"none"===h?h="":void 0}).on("dragmove",function(e){var t,n,r,i,o,a,b,w,x,k,C,S;if((null!=l?l.length:void 0)>0)return n=e.pageX-v.x,r=e.pageY-v.y,o=_.left+n,x=_.top+r,k=_.right-_.left,i=_.bottom-_.top,o-=g.left,x-=g.top,w=o+k,t=x+i,o<0?n-=o:w>m&&(n-=w-m),x<0?r-=x:t>p&&(r-=t-p),a=c({x:n,y:r},u),C=a[0],S=a[1],b=[C+d,S+f],C=b[0],S=b[1],u.is("svg")?l.attr({transform:"translate("+C.toFixed(2)+","+S.toFixed(2)+")",dx:C.toFixed(2),dy:S.toFixed(2)}):(l.css({transform:"translate3d("+C+"px,"+S+"px,0px) "+h}),l.data({dx:C,dy:S})),s[0].style.left=y.left+n+"px",s[0].style.top=y.top+r+"px"}).on("dragend",function(e){var t,n;return s.removeClass("is-dragging"),u.is("svg")?notable.apply(r,function(){return i.update_content(r.commentObj)}):(t=l.data("dx"),n=l.data("dy"),l.css({transform:h}),notable.apply(r,function(){return r.commentObj.referring_to.x+=t,r.commentObj.referring_to.y+=n,o.upsert(r.commentObj)})),l=u=null}).on("up",notable.remove_cursor_styling)},c=function(e,t){var n,r,i,o,a,s;return r=[e.x,e.y],a=r[0],s=r[1],t.is("svg")?(a=a/t.width()*t.data("viewbox_width"),s=s/t.height()*t.data("viewbox_height"),n=notable.deg2rad(t.data("rotation")),i=notable.rotate({x:a,y:s},-n),a=i.x,s=i.y):(o=notable.screen_to_pdf({x:a,y:s}),a=o.x,s=o.y),[a,s]},l()}}])}).call(t,n(25),n(1))},function(e,t){ng.directive("trackPremiumClick",["Mixpanel",function(e){return function(t,n,r){return n.click(function(){return e.track("Clicked to Premium page"),!0})}}])},function(e,t,n){(function(e){ng.directive("undo",["Undo","TooltipScope",function(t,n){return function(r,i,o){return i.keydown(function(r){var i;if(!e(r.target).closest(".comment").length&&"documentNameInput"!==r.target.id)return i=r.ctrlKey||r.metaKey,i&&90===r.which?(r.shiftKey?t.redo():t.undo(),n.$broadcast("hide-tooltip"),r.preventDefault(),!1):void 0})}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.directive("updateAnnotationCount",["SubscriptionManagerFactory",function(t){return{scope:!0,link:function(n,r,i){var o,a;return a=t.for_directive(n,r),o=function(){var t,r,i,o,a,s,l,c,u,d;d=[],s=n.annotation_count;for(a in s)t=s[a],u=e("#thumbnailContainer"+a),r=u.find(".annotation-count"),r.length?r.text(t):(r=e('<div data-page-no="'+a+'" class="annotation-count badge">'+t+"</div>"),r.appendTo(u)),d.push(a);for(l=e(".annotation-count"),c=[],i=0,o=l.length;i<o;i++)t=l[i],d.indexOf(t.dataset.pageNo)===-1?c.push(e(t).remove()):c.push(void 0);return c},n.$watch("annotation_count",o),a.$(window).on("pagesinit",o)}}}])}).call(t,n(1))},function(e,t,n){n(203),n(204),ng.directive("videojsRecord",["$timeout","$q",function(e,t){var r,i;return i=null,r=new(window.AudioContext||window.webkitAudioContext),function(t,o,a){return n.e(0).then(function(s){(function(s){var l,c,u,d,f;return f=n(81),window.WaveSurfer=n(179),n(184),n(180),n(182),n(573),n(574),u=null,o.addClass("video-js"),c=t.$eval(a.videojsRecord),t.$on("$destroy",function(){if(u&&u.recorder&&u.recorder.isRecording())return u.recorder.destroy()}),c.new?(u=f(o[0],{controls:!0,controlBar:{volumeMenuButton:!1,fullscreenToggle:!1},width:220,height:60,plugins:{wavesurfer:{src:"live",waveColor:"black",progressColor:"#2E732D",cursorWidth:1,msDisplayMax:20,hideScrollbar:!0,audioContext:r},record:{audio:!0,video:!1,maxLength:300,audioEngine:"libvorbis.js"}}},function(){return i&&i.recorder.isRecording()&&(i.recorder.stop(),i=null),e(function(){return u.on("deviceReady",function(){return e(function(){return u.recorder.start(),i=u},10)}),u.recorder.getDevice()},10)}),l=["deviceReady","deviceError","startRecord","stopRecord","finishRecord"],s.each(l,function(e){return u.on(e,function(){if("stopRecord"!==e&&"finishRecord"!==e||null!=u&&u.recorder.stopDevice(),t.$emit("videojs-"+e,u),"stopRecord"!==e)return t.$emit("videojs-loaded",null)})})):(d=t.$watch(c.src,function(n){if(n)return u=f(o[0],{src:n,controls:!0,controlBar:{volumeMenuButton:!1,fullscreenToggle:!1},width:220,height:60,plugins:{wavesurfer:{src:n,waveColor:"black",progressColor:"#2E732D",cursorWidth:1,msDisplayMax:20,hideScrollbar:!0,audioContext:r}}}),u.on("error",function(n,r){return e(function(){return t.$emit("videojs-error",u,r)})}),d(),u.ready(function(){return t.$emit("videojs-loaded",null)})}),t.$apply())}).call(this,n(2))}.bind(null,n)).catch(n.oe)}}])},function(e,t,n){ng.directive("videojsYoutube",["$timeout","$q",function(e,t){var r;return r=null,function(e,t,r){if(!notable.is_extension)return n.e(0).then(function(i){var o;return o=n(81),n(183),t.addClass("video-js"),e.$watch(r.videojsYoutube,function(e){return o(t[0],{controls:!1,controlBar:{BigPlayButton:!1},width:220,height:200,techOrder:["youtube"],autoplay:!1,sources:[{type:"video/youtube",src:e}],youtube:{ytControls:2}})})}.bind(null,n)).catch(n.oe)}}])},function(e,t,n){ng.directive("warnClose",["Sync","Mixpanel","SubscriptionManagerFactory",function(e,t,n){return function(r,i,o){var a,s;return s=n.for_directive(r,i),s.$(window).on("beforeunload",function(){var e;return e=document.activeElement,null!=e&&e.hasAttribute("editable")?"It looks like you're editing a comment. Please finish editing by clicking out before you leave":notable.unsafe_to_close?"You have changes which have not yet been saved":void 0}),a=0,s.$(window).on("beforeunload",function(){return r.$apply(function(){var n;if(e.kami.sync_now(),notable.is_web&&e.kami.unsync_count>0)return t.track("Unload page with unsaved changes",{offline_sync_queue:e.kami.unsync_count}),n="You have changes which have not yet been saved.\n\nPlease click to stay on the page and we will reattempt saving.",a>0&&(n+="\n\nIf this message comes up again, check your internet connection."),a+=1,n})})}}])},function(e,t,n){(function(e){var t,r,i,o,a,s,l,c;n(194),c=n(562),o="video/webm; codecs=vp9",r="video/webm; codecs=vp8",i="undefined"!=typeof MediaRecorder&&null!==MediaRecorder?MediaRecorder.isTypeSupported(o):void 0,t="undefined"!=typeof MediaRecorder&&null!==MediaRecorder?MediaRecorder.isTypeSupported(r):void 0,s={video:{width:{ideal:720}},audio:!0},l={video:{mediaSource:"screen",width:{ideal:1080}}},a={video:!1,audio:!0},ng.directive("webcamRecorder",["$timeout","$q","webcamTimer","OfflineSync","Mixpanel",function(n,a,u,d,f){return{templateUrl:c,link:function(n,a,c){var h,p,g,m,v,_,y;if(p=null,g=null,v=null,y=a.find("#webcam-video")[0],m=[],_={mimeType:o,bitsPerSecond:5e5},n.options=n.$eval(c.webcamRecorderAttributes),n.recording_time=0,n.max_time=3e5,n.open_device_input=function(e){return navigator.mediaDevices.getUserMedia(e).then(function(e){return g=e,n.start_recording(),y.muted=!0,y.srcObject=g,y.onloadedmetadata=function(){return y.play()}},function(e){return n.$emit("webcam-declinedPrompt",e)})},n.start_recording=function(){var e,t;return p?(e=g.getTracks(),e[0].enabled=!0,null!=(t=e[1])&&(t.enabled=!0),p.resume(),u.start(),f.track("Resume Webcam Recording")):(p=new MediaRecorder(g,_),p.ondataavailable=function(e){return m.push(e.data)},n.$apply(function(){return p.start(),u.clear(),u.on_update(function(e){if(n.recording_time=e,n.recording_time>=n.max_time-1e3)return n.stop_recording(!0)}),u.start(),f.track("Start Webcam Recording")}))},n.pause_recording=function(){var e,t;return p.pause(),e=g.getTracks(),e[0].enabled=!1,null!=(t=e[1])&&(t.enabled=!1),u.pause(),f.track("Pause Webcam Recording")},n.stop_recording=function(t){var r,i;if(p)return p.onstop=function(e){return m.push(e.data),t?n.save_recording():n.delete_recording(),u.clear(),f.track("Stop Webcam Recording")},r=g.getTracks(),r[0].stop(),null!=(i=r[1])&&i.stop(),e(window).off("kami_desktop_capture_success kami_desktop_capture_failure"),"inactive"!==p.state?p.stop():void 0},n.save_recording=function(){var e;return e=new Blob(m,{type:_.mimeType}),f.track("Save Webcam Recording",{size:e.size}),v=window.URL.createObjectURL(e),n.set_recorded_video(v),n.$emit("webcam-finishRecord",e)},n.set_recorded_video=function(e){return y.srcObject=null,y.src=e,y.onloadedmetadata=null,y.controls=!0,y.muted=!1,y.onloadedmetadata=function(){return y.currentTime=99999999999999}},n.delete_recording=function(){window.URL.revokeObjectURL(v),y.srcObject=null,y.src=null},n.download_recording=function(){var e;if(v=v||n.$eval(n.options.src))return e=document.createElement("a"),e.style="display: none",e.href=v,e.download="recorded_video.webm",document.body.appendChild(e),e.click(),document.body.removeChild(e)},n.media_recorder_state=function(){return p?p.state:"inactive"},n.sync_progress=function(){var e,t,r;if(("Video"===(null!=(e=d.sync_progress.job)?e.args.annotation_type:void 0)||"Desktop"===(null!=(t=d.sync_progress.job)?t.args.annotation_type:void 0))&&(null!=(r=d.sync_progress.job)?r.args.id:void 0)===n.commentObj.id)return d.sync_progress.progress;
},n.options.new)if(i||t){if(!i){if(!t)return n.emit("webcam-incompatibleError");_.mimeType=r}if(n.options.desktop)if(f.track("Start Desktop Recording"),window.chrome){if(h={video:{mandatory:{chromeMediaSource:"desktop",maxWidth:1080}},audio:!1},!document.getElementById("kami_desktop_ready"))return void n.$emit("webcam-missingExtensionError");e(window).on("kami_desktop_capture_success",function(e){h.video.mandatory.chromeMediaSourceId=e.detail,n.open_device_input(h)}),e(window).on("kami_desktop_capture_failure",function(){n.$emit("webcam-desktopError")}),window.dispatchEvent(new CustomEvent("kami_desktop_capture_request"))}else navigator.userAgent.toLowerCase().indexOf("firefox")>-1?n.open_device_input(l):n.$emit("webcam-incompatibleError");else n.open_device_input(s)}else n.$emit("webcam-incompatibleError");else i||t?(n.$watch(n.options.src,function(e){if(e)return n.set_recorded_video(e)}),n.recording_incompatible=!1):n.recording_incompatible=!0;return n.$on("$destroy",function(){return e(window).off("kami_desktop_capture_success kami_desktop_capture_failure"),n.stop_recording(!1),u.clear()})}}}]),ng.factory("webcamTimer",["$interval",function(e){var t,n,r,i,o,a,s,l,c,u,d;return u=0,n=0,c=0,i=null,d=[],s=function(){var e,t,r,i;for(i=[],t=0,r=d.length;t<r;t++)e=d[t],i.push(e(u+n));return i},l=function(t){return null==t&&(t=200),c=Date.now(),i=e(function(){return n=Date.now()-c,s()},t)},a=function(){return i&&e.cancel(i),n=Date.now()-c,u+=n,n=0,s()},t=function(){return i&&e.cancel(i),s(),c=0,n=0,u=0,d=[]},r=function(){return u+n},o=function(e){return d.push(e)},{start:l,pause:a,clear:t,get_time:r,on_update:o}}]),ng.filter("millisecondsToDateTime",function(){return function(e){return new Date(1970,0,1).setSeconds(e/1e3)}})}).call(t,n(1))},function(e,t,n){(function(e,t){var r,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=n(14),ng.factory("AnnotationSelectionHelper",["Comment","CommentsHelper","PageState","SVGHelper","User",function(o,a,s,l,c){var u,d,f,h,p,g,m,v,_,y,b,w;return u=n(508).QuadTree,d=["Text","Drawing","Autograph","Image","Equation"],p=function(e){return{x1:notable.reset_scale(e.x1),y1:notable.reset_scale(e.y1),x2:notable.reset_scale(e.x2),y2:notable.reset_scale(e.y2)}},f=function(e,t,n){var r,i;return!!e.referring_to&&(e.referring_to.page_no===n&&(r=e.referring_to.x,i=e.referring_to.y,(t.x1<=r&&r<=t.x2||t.x1>=r&&r>=t.x2)&&(t.y1<=i&&i<=t.y2||t.y1>=i&&i>=t.y2)))},h=function(e,t){var n,r,i,o,a,s,l;return null==t&&(t={x:1,y:1}),r=g(e),"Drawing"===e.annotation_type?(n=r.get(0).getBBox(),l=parseInt((null!=(i=r.children())?i.attr("stroke-width"):void 0)||"0px"),{width:(null!=(o=n.width+l)?o:0)*t.x,height:(null!=(a=n.height+l)?a:0)*t.y,thickness_x:(null!=l?l:0)*t.x,thickness_y:(null!=l?l:0)*t.y}):"Text"===e.annotation_type?(l=null!=(s=null!=r?r.attr("offset-value"):void 0)?s:0,{width:r.width()+2,height:r.height()+2,thickness_x:2*l,thickness_y:2*l}):{width:r.width(),height:r.height()}},w=function(e,t,n){return e.referring_to.page_no=t,e.referring_to.x=parseFloat(e.referring_to.x)+n.x,e.referring_to.y=parseFloat(e.referring_to.y)+n.y},y=function(t){var n,r,i,o,a,s,l;return o=e("#pageContainer"+t).offset(),r=notable.reset_scale(e(window).width()/2-o.left-20+20*Math.random()),i=notable.reset_scale(e(window).height()/2-o.top-20+20*Math.random()),a=notable.reset_scale(e("#pageContainer"+t).width()-20),n=notable.reset_scale(e("#pageContainer"+t).height()-20),s=Math.min(r,a),l=Math.min(i,n),{x:s,y:l}},g=function(t){var n;return n=function(){switch(t.annotation_type){case"Text":return"text";case"Drawing":return"g";case"Equation":case"Autograph":case"Image":return"comment";default:return t.annotation_type.toLowerCase()}}(),e("#"+n+"-"+t.id)},m=function(t,n){var r,i,o,a;return n&&(i=e("#painting"+n),o=l.get_viewbox_dimensions(i),a={x:notable.reset_scale(i.width())/o.width,y:notable.reset_scale(i.height())/o.height}),r=t.reduce(function(e,t){var n,r,i,o,s,l,c,u,d,f,p,g,m,v;if(t.is_bound)p=t.left,m=t.top,g=t.right,v=t.bottom;else switch(n=h(t,a),r=(t.referring_to.rotation+360)%360){case 90:p=parseFloat(t.referring_to.x)-n.height+(null!=(i=n.thickness_y)?i:0)/2,m=parseFloat(t.referring_to.y)-(null!=(o=n.thickness_x)?o:0)/2,g=p+n.height,v=m+n.width;break;case 180:p=parseFloat(t.referring_to.x)-n.width+(null!=(s=n.thickness_x)?s:0)/2,m=parseFloat(t.referring_to.y)-n.height+(null!=(l=n.thickness_y)?l:0)/2,g=p+n.width,v=m+n.height;break;case 270:p=parseFloat(t.referring_to.x)-(null!=(c=n.thickness_y)?c:0)/2,m=parseFloat(t.referring_to.y)-n.width+(null!=(u=n.thickness_x)?u:0)/2,g=p+n.height,v=m+n.width;break;default:p=parseFloat(t.referring_to.x)-(null!=(d=n.thickness_x)?d:0)/2,m=parseFloat(t.referring_to.y)-(null!=(f=n.thickness_y)?f:0)/2,g=p+n.width,v=m+n.height}return(p<e.left||null==e.left)&&(e.left=p),(g>e.right||null==e.right)&&(e.right=g),(m<e.top||null==e.top)&&(e.top=m),(v>e.bottom||null==e.bottom)&&(e.bottom=v),e},{left:null,top:null,right:null,bottom:null,is_bound:!0})},_=function(e){var n;return n=o.collab_filtered_comments(),n=t.filter(n,{referring_to:{page_no:e}}),n=t.filter(n,function(e){var t,n;return!("Image"===e.annotation_type&&(null==(t=e.attachments)||!t.length))&&(n=e.annotation_type,i.call(d,n)>=0)})},v=function(e,t){var n,r,i,o,a;for(a=null,r=0,i=t.length;r<i;r++)if(n=t[r],b[e]&&b[e].hasOwnProperty(n.annotation_type)){if(o=b[e][n.annotation_type],"rotation"===e&&(n.referring_to[o]=n.referring_to[o]||0,n.referring_to[o]=(n.referring_to[o]+360)%360),a){if(n.referring_to[o]===a)continue;a=null;break}a=n.referring_to[o]}return void 0===a&&(a="rotation"===e?0:"opacity"===e?1:null),a},b={color:{Text:"color",Drawing:"color",Equation:"color"},fillColor:{Text:"fillColor",Equation:"fillColor"},font_size:{Equation:"font_size",Text:"font_size"},thickness:{Drawing:"font_size"},opacity:{Drawing:"opacity"},rotation:{Text:"rotation",Equation:"rotation",Autograph:"rotation",Image:"rotation"}},{get_annotations_from_box:function(e,t,n){var r,o,a,s;return e=p(e),n?(r={x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x1-e.x2),height:Math.abs(e.y1-e.y2)},s=n.retrieve(r),a=s.reduce(function(e,t){return e.push(t.comment),e},[])):(o=_(t),a=o.reduce(function(n,r){var o;return f(r,e,t)&&(o=r.annotation_type,i.call(d,o)>=0)&&n.push(r),n},[])),a},delete_annotations:function(e){var t,n,i,a,s;for(n=r.v4(),s=[],i=0,a=e.length;i<a;i++)t=e[i],t.group_id=n,s.push(o.remove_and_upsert_comment(t));return s},generate_copy:function(e,n){var r;return r=t.cloneDeep(e),r=t.map(r,function(e){return{annotation_type:e.annotation_type,content:e.content,referring_to:e.referring_to,attachments:e.attachments,original_bounds:m([e],n)}})},paste_comments:function(e,n){var i,a,s,l,c,u,d,f,h,p,g,v,_,b,x,k;if(n===("undefined"!=typeof PDFViewerApplication&&null!==PDFViewerApplication&&null!=(x=PDFViewerApplication.pdfViewer)?x.currentPageNumber:void 0)){if(v=t.map(e,function(e){return e.original_bounds}),i=m(v),g=this.get_comments_limits(e,n,i),c=r.v4(),b=[],g)for(_=y(n),l={x:(i.left+i.right)/2,y:(i.top+i.bottom)/2},k={x:_.x-l.x,y:_.y-l.y},k.x=Math.min(Math.max(g.min_x,k.x),g.max_x),k.y=Math.min(Math.max(g.min_y,k.y),g.max_y),u=0,h=e.length;u<h;u++)a=e[u],w(a,n,k),a=o.reconstruct_comment(a,c,n),o.add_comment(a),o.upsert(a),b.push(a);else for(d=f=0,p=e.length;f<p;d=++f)a=e[d],_=y(n),s=a.original_bounds,k={x:_.x-(s.right+s.left)/2,y:_.y-(s.top+s.bottom)/2},w(a,n,k),a=o.reconstruct_comment(a,c,n),o.add_comment(a),o.upsert(a),b.push(a);return b}},get_selected_elements:function(e){var t,n,r,i,o,a,s;for(n=null!=(s=c.current_user())?s.id:void 0,i={owner:[],collaborator:[],all:function(){return this.owner.concat(this.collaborator)}},o=0,a=e.length;o<a;o++)t=e[o],r=g(t),t.author.id===n?i.owner.push(r):i.collaborator.push(r);return i},shift_comments:function(e,t,n){var i,a,s,l,c;for(a=r.v4(),c=[],s=0,l=e.length;s<l;s++)i=e[s],i.group_id=a,w(i,t,n),o.add_comment(i),c.push(o.upsert(i));return c},construct_quad_tree:function(t){var n,r,o,a,s,c,f,p,g,m,v,y,b,w,x,k,C,S,E,$,T,A,D,O,P,R;switch(g=_(t),b=e("#pageContainer"+t),k=e("#painting"+t),P=l.get_viewbox_dimensions(k),R={x:notable.reset_scale(k.width())/P.width,y:notable.reset_scale(k.height())/P.height},PDFViewerApplication.pageRotation){case 90:case 270:x=b.innerHeight(),w=b.innerWidth();break;case 180:case 0:x=b.innerWidth(),w=b.innerHeight()}for(n={x:0,y:0,width:notable.reset_scale(x),height:notable.reset_scale(w)},C=new u(n,1,8),m=0,y=g.length;m<y;m++)if(r=g[m],S=r.annotation_type,!(i.call(d,S)<0)){switch(o=h(r,R),f=parseFloat(r.referring_to.x)-(null!=(E=o.thickness_x)?E:0)/2,p=parseFloat(r.referring_to.y)-(null!=($=o.thickness_y)?$:0)/2,s=(r.referring_to.rotation+360)%360){case 90:f=f-o.height+(null!=(T=o.thickness_y)?T:0),p=p,c=o.height,a=o.width;break;case 180:f=f-o.width+(null!=(A=o.thickness_x)?A:0),p=p-o.height+(null!=(D=o.thickness_y)?D:0),c=o.width,a=o.height;break;case 270:f=f,p=p-o.width+(null!=(O=o.thickness_x)?O:0),c=o.height,a=o.width;break;default:f=f,p=p,c=o.width,a=o.height}v={x:f,y:p,width:c,height:a,id:r.id,comment:r},C.insert(v)}return C},get_comments_limits:function(t,n,r){var i,o,a,s;switch(o=e("#pageContainer"+n),PDFViewerApplication.pageRotation){case 90:case 270:s=o.height(),a=o.width();break;case 180:case 0:s=o.width(),a=o.height()}return s=notable.reset_scale(s),a=notable.reset_scale(a),r=r||m(t,n),!(Math.abs(r.top-r.bottom)>a||Math.abs(r.right-r.left)>s)&&(i={min_x:r.left*-1,min_y:r.top*-1,max_x:s-r.right,max_y:a-r.bottom})},set_properties:function(e,t){var n,i,a,s,l,c,u,d,f,h,p;a=r.v4(),f=[];for(l in t)u=t[l],c=b[l],c&&f.push(function(){var t,r,l,f,m,v,_,y,b;for(b=[],t=0,r=e.length;t<r;t++)n=e[t],d=c[n.annotation_type],d&&n.referring_to[d]!==u&&("rotation"===d&&(u=parseInt(u),i=g(n),s=null!=(l=parseInt(n.referring_to.rotation))?l:0,y=notable.coordinates_for_centered_rotation(s,u,n.referring_to.x,n.referring_to.y,null!=(f=null!=(m=i.outerWidth(!0))?m:n.referring_to.width)?f:0,null!=(v=null!=(_=i.outerHeight(!0))?_:n.referring_to.height)?v:0),h=y[0],p=y[1],null!=h&&(n.referring_to.x=h),null!=p&&(n.referring_to.y=p)),n.referring_to[d]=u,n.group_id=a,o.add_comment(n),b.push(o.upsert(n)));return b}());return f},contained_properties:function(e){var t,n,r,o,a,s,l;n={};for(a in b)for(s=b[a],r=0,o=e.length;r<o;r++)if(t=e[r],l=t.annotation_type,i.call(Object.keys(s),l)>=0){n[a]=v(a,e);break}return n},filter_active:function(e,n){var r;return r=_(n),t.intersectionBy(e,r,"id")},filter_author:function(e,n){var r,i,o;return"owner"===n?(r=null!=(i=c.current_user())?i.id:void 0,t.filter(e,function(e){return e.author.id===r})):"collaborator"===n?(r=null!=(o=c.current_user())?o.id:void 0,t.filter(e,function(e){return e.author.id!==r})):"string"==typeof n?t.filter(e,function(e){return e.author.id!==n}):e},get_bounds:m}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.factory("AnnotationSelectionState",["$rootScope","AnnotationSelectionHelper",function(t,n){var r,i,o,a,s,l,c,u,d,f,h,p,g,m,v,_,y,b,w;return r=t.$new(!0),o=[],l={owner:[],collaborator:[],all:function(){return this.owner.concat(this.collaborator)}},m=function(e,t){return o=e,l=n.get_selected_elements(o),c(t)},i=function(t,r){return o=e.union(t,o),l=n.get_selected_elements(o),c(r)},g=function(t,r,i){return o=e.pullAllBy(o,t,"id"),l=n.get_selected_elements(o),i?a(r):c(r)},v=function(t,n,r){return o=e.pullAllBy(o,t,"id"),o=e.concat(o,t),r?u(n):s(n)},t.$on("comment_updated",function(t,n){var r,i,a;if(n&&n.length>0&&o.length>0)return a=null,r=e.filter(n,function(e){return a=null!=a?a:e.referring_to.page_no,null!==e.deleted_at}),r.length>0&&g(r,a,!0),a=null,i=e.filter(n,function(t){return null===t.deleted_at&&(a=null!=a?a:t.referring_to.page_no,e.some(o,function(n){return n.id===t.id&&!e.isEqual(n.referring_to,t.referring_to)}))}),i.length>0?v(i,a,!0):void 0}),f=function(e){return o},h=function(){return l},p=function(t){return e.includes(o,t)},c=function(e){return e&&r.$emit("annotations_selected_page_"+e),r.$emit("annotations_selected")},a=e.debounce(c,100),u=function(e){return r.$emit("annotations_selected_properties_change",e)},s=e.debounce(u,100),d=function(e,t){return r.$emit("selection_action_change",{page_no:e,action:t})},_=function(e,t){return r.$on("annotations_selected_page_"+e,function(){return t()})},y=function(e){return r.$on("annotations_selected",function(){return e()})},b=function(e){return r.$on("annotations_selected_properties_change",function(t,n){return e(n)})},w=function(e){return r.$on("selection_action_change",function(t,n){return e(n)})},{set:m,add:i,get:f,get_elements:h,is_comment_selected:p,watch:_,watch_all:y,fire_properties_changed:u,fire_select_action:d,watch_properties_change:b,watch_select_action:w}}])}).call(t,n(2))},function(e,t,n){(function(e){var t;t=n(520),ng.factory("AppRater",["$rootScope","localStorageService","SettingsFactory","Mixpanel","User","PromptDialog",function(n,r,i,o,a,s){var l,c,u,d,f,h,p,g;return f=new Date,d=f.getDay()+"-"+f.getMonth()+"-"+f.getYear(),p=r.get("app_rater_session"),u=i.get("app_rater_shown",!1),u&&(i.set("AppRater_last_action","ok",!0),i.destroy("app_rater_shown",!0)),c=i.get("app_rater_show_time"),c&&(i.set("AppRater_last_shown",(new Date).getTime(),!0),i.destroy("app_rater_show_time",!0)),l=function(e){var t,i;return i=r.get("app_rater_session_count"),d!==p&&(void 0===i?i=1:i+=1,r.set("app_rater_session_count",i),p=d,r.set("app_rater_session",d)),t=r.get("app_rater_action_score"+e),r.set("app_rater_action_score",t),n.$broadcast("app_rater_score",{score:t,session:i})},notable.is_embed||(n.$on("DocumentExported",function(){return l(8)}),e(window).on("documentloaded",function(){return l(2)}),n.$on("created_comment",function(){return l(1)})),h=function(){var e;return e=function(){switch(notable.getDeployment()){case"extension":return"https://chrome.google.com/webstore/detail/kami-formerly-notable-pdf/ecnphlgnajanjnkcmbpancdjoidceilk/reviews?hl=en-US&utm_source=appRater";case"web":return"https://chrome.google.com/webstore/detail/kami-formerly-notable-pdf/iljojpiodmlhoehoecppliohmplbgeij/reviews?hl=en-US&utm_source=appRater"}}(),window.open(e,"_blank")},g=function(){return a.show().then(function(e){var n;return null!=(n=s.open_once(t,{name:"AppRater",days_to_wait:"default",className:"app-rater-dialog",feedback:"",rating:e.properties.rating||0,ratingName:["","Very Poor","Poor","Fair","Good","Excellent"]}))?n.closePromise.then(function(e){var t;if(t=e.value,"ok"===t.action&&(t.rating&&a.show().then(function(e){return e.properties.rating=rating,a.update(e)}),t.feedback&&o.track_api("AppRater Submit Feedback",{rating:t.rating,feedback:t.feedback}),t.action_value))return h()}):void 0})},{showRate:g}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.factory("Autograph",["AutographLocal","AutographAPI","$q","$http","$rootScope",function(t,n,r,i,o){var a,s;return s={},a=function(t){var n;return n=r.defer(),e.ajax(t,{xhrFields:{responseType:"blob"},success:function(e,t,r){return n.resolve(e)},error:function(e,t,r){return n.reject(t,r)}}),n.promise},{all:function(){var e,i;return e=r.defer(),i=n.all({},function(){var n;return n=i.autographs,t.save_autographs(n),e.resolve(n)},function(n){return t.exists()?e.resolve(t.all()):e.reject(n)}),e.promise},notify_used:function(e){return t.notify_used(e),o.$broadcast("autographs-updated")},autographs_last_used_at:function(){return t.autographs_last_used_at()},create:function(t){var n,a,l;return n=r.defer(),a=new FormData,a.append("autograph_image",t),l=e.ajax({type:"POST",url:"https://web.kamihq.com/api/autographs",data:a,headers:{"USER-TOKEN":i.defaults.headers.common["USER-TOKEN"],"USER-ID":i.defaults.headers.common["USER-ID"]},cache:!1,processData:!1,contentType:!1,success:function(e,t,r){return n.resolve(e)},error:function(e,t,r){return n.reject(t,r)},xhr:function(){var t;return t=e.ajaxSettings.xhr(),t.upload&&t.upload.addEventListener("progress",function(e){return n.notify({loaded:e.loaded,total:e.total})},!1),t}}),n.promise.then(function(e){return o.$broadcast("autographs-updated"),s[e.id]=PDFJS.createObjectURL(t),e})},delete:function(e){var t;return t=n.delete({id:e}),t.$promise.then(function(){return o.$broadcast("autographs-updated")}),t},get_autograph_url:function(e){return s[e.id]?r.when(s[e.id]):s[e.id]=a(e.autograph_image_url).then(function(e){return PDFJS.createObjectURL(e)}).catch(function(){return e.autograph_image_url})}}}])}).call(t,n(1))},function(e,t,n){ng.factory("AuthorizationAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/authorizations",{},{all:{method:"GET"},check:{method:"GET",url:t+"/authorizations/check"},create:{method:"POST"}})}])},function(e,t,n){ng.factory("AutographAPI",["$resource","Pusher",function(e,t){var n,r;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},e(r+"/autographs",{socket_id:n},{all:{method:"GET"},delete:{method:"DELETE",url:r+"/autographs/:id"},get_link:{method:"GET",url:r+"/autographs/get_link"},send_email:{method:"POST",url:r+"/autographs/send_email"}})}])},function(e,t,n){ng.factory("CommentAPI",["$resource","Pusher",function(e,t){var n,r;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},e(r+"/documents/:document_identifier/comments/:id",{document_identifier:"@document_identifier",id:"@id",socket_id:n},{all:{method:"GET",params:{include_deleted:!0}},upsert:{method:"PUT"},show:{method:"GET"}})}])},function(e,t,n){ng.factory("CommentAttachmentAPI",["$resource","Pusher",function(e,t){var n,r;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},e(r+"/documents/:document_identifier/comments/:comment_id/attachments/:id",{document_identifier:"@document_identifier",comment_id:"@comment_id",id:"@id",socket_id:n},{upsert:{method:"PUT"}})}])},function(e,t,n){ng.factory("CouponAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/coupons",{},{create:{method:"POST"}})}])},function(e,t,n){ng.factory("CreateCustomerAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/customers",{},{create:{method:"POST"}})}])},function(e,t,n){ng.factory("DocumentAPI",["$resource","Pusher",function(e,t){var n,r;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},e(r+"/documents/:id",{id:"@document_identifier",socket_id:n},{index:{url:r+"/documents",method:"GET"},show:{url:r+"/documents/:document_identifier",method:"GET"},recent:{url:r+"/documents/recent",method:"GET"},update:{method:"PUT"},export_pdf:{url:r+"/documents/:id/export_pdf",method:"POST"},notify_upload:{url:r+"/documents/:id/notify_upload",method:"POST"},create_alias:{url:r+"/documents/:id/create_alias",method:"POST"},unset_last_opened_at:{url:r+"/documents/:document_identifier/unset_last_opened_at",method:"DELETE"}})}])},function(e,t,n){ng.factory("EmailPromotionsAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/email/promotions/activate_3_promotion",{},{threemonth:{method:"GET"}})}])},function(e,t,n){ng.factory("EventAPI",["$resource",function(e){var t,n;return t="https://web.kamihq.com/api",n=e(t+"/events",{},{create:{method:"POST"},alias:{url:t+"/events/alias",method:"POST"},has_org_bias:{url:t+"/events/has_org_bias",method:"GET",params:{os:notable.os()}}})}])},function(e,t,n){ng.factory("KamiClassroomAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/classroom",{},{register_coursework:{method:"POST",url:t+"/classroom/register_coursework"},google_drive_search:{method:"GET",url:t+"/classroom/google_drive_search"},course_search:{method:"GET",url:t+"/classroom/course_search"}})}])},function(e,t,n){ng.factory("LicenseAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/licenses",{},{add_social_license:{url:t+"/licenses/add_social_license",method:"POST"},apply_license:{url:t+"/licenses/apply_license",method:"POST"},add_schools_license:{url:t+"/licenses/add_schools_license",method:"POST"},add_work_license:{url:t+"/licenses/add_work_license",method:"POST"},add_teacher_trial_license:{url:t+"/licenses/add_teacher_trial_license",method:"POST"}})}])},function(e,t,n){ng.factory("MigrateBillingAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/migratebilling",{},{create:{method:"POST"}})}])},function(e,t,n){ng.factory("PDFProcessingAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/pdf_processing",{},{create:{method:"POST"},show:{url:t+"/pdf_processing/:id",method:"GET",params:{id:"@id"}}})}])},function(e,t,n){ng.factory("PerformanceMetricsAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/performance_metrics",{},{create:{method:"POST"}})}])},function(e,t,n){ng.factory("S3API",["$resource",function(e){var t,n;return t="https://web.kamihq.com/api",n=e(""+t,{},{get_policy:{url:t+"/s3_signing?encryption=AES256",method:"GET"}})}])},function(e,t,n){ng.factory("SettingsAPI",["$resource","Pusher",function(e,t){var n,r,i;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},i=e(r+"/settings/main",{socket_id:n},{show:{method:"GET"},update:{method:"PUT"}})}])},function(e,t,n){ng.factory("SubscriptionAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/subscriptions",{},{all:{method:"GET"},create:{method:"POST"},update:{method:"PUT",url:t+"/subscriptions/:id",params:{id:"@id"}},change_plan:{method:"PUT",url:t+"/subscriptions/change_plan"},delete:{method:"DELETE",url:t+"/subscriptions/:id"}})}])},function(e,t,n){ng.factory("UserAPI",["$resource","Pusher",function(e,t){var n,r,i;return r="https://web.kamihq.com/api",n=function(){var e,n;return null!=(e=t.instance)&&null!=(n=e.connection)?n.socket_id:void 0},i=e(r+"/users",{socket_id:n},{create:{method:"POST"},update:{url:r+"/users/:id",method:"PUT",params:{id:"@id"}},show:{url:r+"/users/:id",method:"GET",params:{id:"@id"}},login:{url:r+"/login",method:"POST"},logout:{url:r+"/logout",method:"DELETE"},exists_by_email:{url:r+"/users/by-email",method:"GET"},login_oauth2:{url:r+"/login/oauth2",method:"POST"},login_box:{url:r+"/login/box",method:"POST"},send_forgot_password:{url:r+"/passwords",method:"POST"},reset_password:{url:r+"/passwords",method:"PUT"},gcm_upsert:{url:r+"/users/:id/gcm/:registration_id",method:"PUT",params:{id:"@id",registration_id:"@registration_id"}},gcm_destroy:{url:r+"/users/:id/gcm/:registration_id",method:"DELETE",params:{id:"@id",registration_id:"@registration_id"}}})}])},function(e,t){ng.factory("BrowserDetection",function(){var e;return Detectizr.detect(),e=Detectizr.browser||{}})},function(e,t,n){(function(e){var t,r,i;r=n(24),i=n(14),t=n(61),ng.factory("Comment",["CommentLocal","CommentAPI","$q","Sync","$rootScope","CommentsHelper","Undo","$timeout","Mixpanel","User","PageState","AnnotationState","ReadOnlyFileDialog","PromptFileUploadService","LicensesHelper","NotifyService",function(n,o,a,s,l,c,u,d,f,h,p,g,m,v,_,y){var b,w,x,k,C,S;return w={},S=[],k=null,x={},C=null,b={clear:function(){return x={},w={},C=null},load:function(t){return C=t.document_identifier,o.all({document_identifier:C}).$promise.then(function(r){return function(i){var o;return k=[],o=e.filter(i.comments,function(e){return e.deleted_at?(k.push(e.id),!1):(c.remove_deleted_replies(e),!0)}),r.add_embedded_comments(k),n.create_all(t,o,i.authors),o}}(this),function(e){return function(t){return n.show_all(C)||a.reject(t),e.add_embedded_comments()}}(this)).then(function(n){return e.each(w,function(e){if(e.document_identifier===t.document_identifier&&!e.readonly)return e.content=null,delete w[e.id]}),e.each(n,function(e){return w[e.id]=e})}).then(function(){return l.$broadcast("comment_loaded"),l.$broadcast("comment_updated",e.values(w))})},_upsert_one:function(e){return e.document_identifier=C,s.upsert_comment(e)},_upsert_all:function(t){return this._upsert_one(t),e.map(t.replies,function(e){return function(t){return e._upsert_all(t)}}(this))},upsert_now:function(e){var t,r,i,o;return p.has_permission("edit")?(o=e.undo_unique_id,delete e.undo_unique_id,t=e.group_id,delete e.group_id,delete e.attachment_url,delete e.attachment_blob,delete e.kamiImageId,i=c.get_root_parent(e,w),null==i.embedded&&null==e.embedded||this._upsert_all(i),r=n.upsert(e),angular.equals(r,e)?void 0:(u.add(function(n){return function(){return r&&!r.deleted_at?(r.group_id=t,n.add_comment(r),n.upsert_now(r)):(e.group_id=t,n.remove_comment(e),n.upsert_now(e))}}(this),o,t),this._upsert_one(e),l.$broadcast("comment_updated"),e.deleted_at?f.track_api("Delete Annotation",c.comment_properties(e)):e.new_comment?(f.track_perdoc("Create Annotation",c.comment_properties(e)),delete e.new_comment,l.$broadcast("created_comment")):f.track_api("Modify Annotation",c.comment_properties(e)))):void m.open()},upsert:function(t){var n;return v.open_if_needed(),null==x[n=t.id]&&(x[n]=e.debounce(function(e){return function(t){return d(function(){return t.deleted_at&&delete x[t.id],e.upsert_now(t)})}}(this),10,{maxWait:30})),x[t.id](t)},upsert_comment_with_attachment:function(e,t){var r;return delete e.new_comment,delete e.kamiImageId,e.document_identifier=C,n.upsert(e),r=s.upsert_comment_with_attachment(e,t),u.add(function(t){return function(){return t.remove_comment(e),t.upsert_now(e)}}(this)),f.track_perdoc("Create Annotation",c.comment_properties(e))},show:function(e,t){var r,i;return r=a.defer(),i=o.show({document_identifier:e,id:t},function(){return n.upsert(i),r.resolve(i)},function(e){return r.reject(e)}),r.promise},all:function(){return w},insert:function(n,o,a,s){var l,c,u,d;return c=n.id||i.v4(),o=function(){switch(o){case"highlight":return"shape"===a?"Drawing":"Highlight";case"strikethrough":return"Strikethrough";case"underline":return"Underline";case"comment":return"Comment";case"text":return"Text";case"equation":return"Equation";case"autograph":return"Autograph";case"drawing":case"shape":return"Drawing";case"image":return"Image";default:return o}}(),l={id:c,undo_unique_id:n.undo_unique_id,author:{id:s.id,name:s.name,md5_email:t(null!=(u=s.email)?u:"")},author_id:s.id,document_identifier:p.document.document_identifier,document_id:p.document.id,created_at:r().format(),content:null!=(d=n.content)?d:"",annotation_type:o,referring_to:{user_action:n.user_action,page_no:n.page_no,x:n.x,y:n.y,selected_text:null!=n.selected_text?n.selected_text:void 0,highlighted_positions:n.highlighted_positions,color:n.color,font_size:n.font_size,width:n.width,height:n.height},new_comment:!0,parent_comment_id:null,replies:[],y_offset:0,attachment_blob:n.attachment_blob,attachment_url:n.attachment_url},e.extend(l,n.extra_params),e.extend(l.referring_to,n.referring_to),this.add_comment(l),l},reconstruct_comment:function(e,n,o){var a,s,l;return l=h.current_user(),e.referring_to.page_no=o,{id:i.v4(),group_id:null!=n?n:i.v4(),author:{id:l.id,name:l.name,md5_email:t(null!=(a=l.email)?a:"")},author_id:l.id,document_identifier:p.document.document_identifier,document_id:p.document.id,created_at:r().format(),content:null!=(s=e.content)?s:"",annotation_type:e.annotation_type,referring_to:e.referring_to,new_comment:!0,parent_comment_id:null,replies:[],y_offset:0,attachments:e.attachments}},insert_reply:function(e,n,o,a,s){var l,c;if(null==s&&(s=null),p.has_permission("edit"))return c={id:i.v4(),author:{id:a.id,name:a.name,md5_email:t(null!=(l=a.email)?l:"")},author_id:a.id,document_identifier:p.document.document_identifier,document_id:p.document.id,created_at:r().format(),content:null!=n?n:"",annotation_type:null!=o?o:"Comment",referring_to:null!=s?s:{},parent_comment_id:e,replies:[]},this.add_comment(c),this.upsert(c),c},add_comment:function(t){var n,r,i;if(t.deleted_at=null,null!=t.parent_comment_id){if(r=w[t.parent_comment_id],null==r)return;i=r.replies,n=e.findIndex(i,{id:t.id}),n===-1?i.push(t):i[n]=t}else w[t.id]=t;return l.$broadcast("comment_updated",[t])},remove_comment:function(t){var n,r,i;return t.deleted_at=new Date,null!=t.parent_comment_id?(i=null!=(r=w[t.parent_comment_id])?r.replies:void 0,n=e.findIndex(i,{id:t.id}),n!==-1&&(i[n]={id:t.id,deleted_at:t.deleted_at})):delete w[t.id],l.$broadcast("comment_updated",[t])},remove_and_upsert_comment:function(e){if(this.remove_comment(e),!e.new_comment)return this.upsert(e)},clear_empty_comments:function(){var t,n,r,i;for(i=e.filter(w,function(e){var t,n;return 0===(null!=e&&null!=(t=e.content)?t.length:void 0)&&("Comment"===(n=null!=e?e.annotation_type:void 0)||"Text"===n||"Equation"===n)}),n=0,r=i.length;n<r;n++)t=i[n],delete w[t.id];if(i.length)return l.$broadcast("comment_updated",i)},create_embedded_comment:function(t,n,i,o,a){var s,l;if(c.validate_comment(o))return s={id:o.id,author:{id:o.author.id,name:o.author.name,md5_email:o.author.md5_email},author_id:o.author.id,document_identifier:o.document_identifier,document_id:t.id,created_at:r(n.creationDate).format(),content:o.content,annotation_type:o.annotation_type,referring_to:o.referring_to,replies:[],autograph:o.autograph,parent_comment_id:o.parent_comment_id,embedded:!0},null!=o.attachments&&(s.attachments=o.attachments),null!=o.kamiImageId&&(s.kamiImageId=o.kamiImageId),null!=(l=s.referring_to)&&(l.page_no=a),S.push(s),null!=k&&this.add_embedded_comments(k),e.each(o.replies,function(e){return function(r){return r.parent_comment_id=o.id,e.create_embedded_comment(t,n,i,r,a)}}(this))},add_embedded_comments:function(e){var t,n,r;for(null==e&&(e=[]),n=0,r=S.length;n<r;n++)t=S[n],e.indexOf(t.id)===-1&&this.add_comment(t);return S=[],null},add_pdf_comment:function(e,t,n,o){var a,s,l,c,u,d,f;if(u=function(){switch(t.subtype){case"Text":return"Comment"}}())return c=function(e){var t;return t=e.toString(16),1===t.length?"0"+t:t},a=function(e){var t;switch(null!=e?e.length:void 0){case 1:return t=c(e[0]),"#"+t+t+t;case 3:return"#"+c(e[0])+c(e[1])+c(e[2]);default:return null}},s=function(e){var t;return t=r(e),t.isValid()?t.format():null},d=(t.rect[0]+t.rect[2])/2,f=(t.rect[1]+t.rect[3])/2,l=PDFViewerApplication.pdfViewer.getPageView(o-1),d*=CSS_UNITS,f*=CSS_UNITS,f=l.height/l.scale-f,this.add_comment({id:i.v4(),author:{name:t.title},document_identifier:e.document_identifier,document_id:e.id,created_at:s(t.creationDate),content:t.contents,annotation_type:u,referring_to:{color:a(t.color),page_no:o,x:d,y:f},replies:[],embedded:!0,readonly:!0})},collab_filtered_comments:function(){return c.filter_out_collaborators(w)},create_comment:function(e){var t,n;return p.has_permission("edit")?(n=e.annotation_type||g.annotation_mode,t=function(){switch(g.annotation_mode){case"normal":return g.selection_submode;case"highlight":return g.highlight_submode;case"comment":return g.comment_submode;default:return"normal"}}(),this.insert(e,n,t,h.current_user())):void m.open()}},l.$on("comment_upsert_success",function(t,r){var i,o,a,s,l,c;if(i=e.find(b.all(),{id:r.server_comment.id})){for(i.attachment_url&&(delete i.attachment_url,delete i.attachment_blob),i.attachments=r.server_comment.attachments,l=i.attachments,a=0,s=l.length;a<s;a++)o=l[a],c=e.find(r.sent_comment.attachments,{id:o.id}),o.attachment_url=o.attachment_url||c.attachment_url;return n.upsert(i)}}),l.$on("comment_upsert_failure",function(t,r){var i;if(403===r.error.status){i=e.find(b.all(),{id:r.upserted_comment.id});try{return b.remove_comment(i),n.destroy(i)}finally{y.comment_failed({comment:r.upserted_comment,error:r.error})}}}),b}])}).call(t,n(2))},function(e,t,n){ng.factory("DictionaryAPI",["$resource",function(e){var t;return t="https://web.kamihq.com/api",e(t+"/definitions/:id",{},{define:{}})}])},function(e,t){ng.factory("Document",["DocumentAPI","DocumentLocal","Gravatar","$q","OfflineSync","$timeout","LicensesHelper",function(e,t,n,r,i,o,a){return{show:function(o){return e.update({update_opened:!0},o).$promise.then(function(e){
var r,i,o,s,l;for(s=e.collaborating_users,r=function(e,r){var i;return i=n.exists(e.md5_email),i.then(function(){return e.gravatar_exists=!0,t.create(r)},function(){})},i=0,o=s.length;i<o;i++)l=s[i],l.gravatar_exists=!1,r(l,e);return t.create(e),a.update_document_features(e.extra_features),e},function(e){var n;return 401===(null!=e?e.status:void 0)?r.reject(e):(n=null,t.exists(o.document_identifier)&&(n=t.show(o.document_identifier)),i.document_update_later(o),n||r.reject(e))})},index_fingerprint:function(t){return e.index({fingerprint:t}).$promise},update:function(t){return e.update(t).$promise},remove_upload:function(t){return e.update({document_identifier:t.document_identifier,file:null}).$promise}}}])},function(e,t,n){var r;r=n(509).FileCache,ng.factory("FileCache",function(){return new r})},function(e,t){ng.factory("FingerprintDismissFactory",["localStorageService","PageState",function(e,t){var n,r,i;return n={},r=function(){var r;return n=e.get("dismissed_"+(null!=(r=t.document)?r.fingerprint:void 0))||{}},i=function(){var r;return e.set("dismissed_"+(null!=(r=t.document)?r.fingerprint:void 0),n)},{dismissed:function(e){return r(),n[e]||!1},dismiss:function(e){return r(),n[e]=!0,i()}}}])},function(e,t,n){ng.factory("GCM",["SettingsFactory","UserAPI","$q",function(e,t,n){var r;return r=["185741998891"],{get:function(t){var r;return r=n.defer(),("undefined"!=typeof chrome&&null!==chrome?chrome.gcm:void 0)&&t?(e.get("gcm.registration_id")?r.resolve(e.get("gcm.registration_id")):this.upsert(t).then(function(e){return r.resolve(e)}),r.promise):(r.reject(),r.promise)},upsert:function(i){var o;return o=n.defer(),("undefined"!=typeof chrome&&null!==chrome?chrome.gcm:void 0)&&i?(chrome.gcm.register(r,function(n){return chrome.runtime.lastError?(o.reject(chrome.runtime.lastError),o.promise):t.gcm_upsert({id:i.id,registration_id:n}).$promise.then(function(){return e.set("gcm.registration_id",n),o.resolve(n)},function(){return o.reject(n)})}),o.promise):(o.reject(),o.promise)},destroy:function(i){var o;return o=n.defer(),("undefined"!=typeof chrome&&null!==chrome?chrome.gcm:void 0)&&i?(chrome.gcm.register(r,function(n){return chrome.gcm.unregister(function(){return chrome.runtime.lastError?(o.reject(chrome.runtime.lastError),o.promise):t.gcm_destroy({id:i.id,registration_id:n}).$promise.finally(function(){return e.destroy("gcm.registration_id"),o.resolve(n)})})}),o.promise):(o.reject(),o.promise)}}}])},function(e,t){ng.factory("AutographLocal",["localStorageService",function(e){var t,n;return t="autographs",n="autographs_used_at",{autographs_last_used_at:function(){return e.get(n)},notify_used:function(t){var r,i,o,a;return r=(new Date).getTime(),a=null!=(o=this.autographs_last_used_at())?o:[{id:t.id,last_used:r}],i=a.find(function(e){return e.id===t.id}),null!=i?i.last_used=r:(i={id:t.id,last_used:r},a.push(i)),e.set(n,a)},save_autographs:function(n){return e.set(t,n)},all:function(){return e.get(t)},exists:function(){return null!=e.get(t)}}}])},function(e,t,n){(function(e){ng.factory("CommentLocal",["localStorageService","CommentsHelper",function(t,n){var r,i,o,a;return i=function(e){return"comment-"+e},o={},a=function(e,n){return 0===n.length?t.remove(i(e)):t.set(i(e),n),o[e]=n},r=function(e){return(null!=o[e]?o[e]:o[e]=t.get(i(e)))||[]},{create_all:function(e,t,r){var i,o,s;for(o=0,s=t.length;o<s;o++)i=t[o],n.server_to_local_comment(e,i,r);return a(e.document_identifier,angular.copy(t))},upsert:function(t){var n,r,i,o,s;return t.deleted_at?this.destroy(t):(t=angular.copy(t),s=this.show_all(t.document_identifier),n=e.findIndex(s,{id:t.parent_comment_id||t.id}),i=null,n===-1?s.push(t):t.parent_comment_id?(o=s[n].replies,r=e.findIndex(o,{id:t.id}),r===-1?o.push(t):(i=o[r],o[r]=t)):(i=s[n],s[n]=t),a(t.document_identifier,s),i)},show_all:r,destroy:function(t){var n,r,i,o,s;return s=this.show_all(t.document_identifier),n=e.findIndex(s,{id:t.parent_comment_id||t.id}),i=null,n!==-1&&(t.parent_comment_id?(o=s[n].replies,r=e.findIndex(o,{id:t.id}),r!==-1&&(i=o[r],o.splice(r,1))):(i=s[n],s.splice(n,1)),a(t.document_identifier,s)),i}}}])}).call(t,n(2))},function(e,t){ng.factory("DocumentLocal",["localStorageService","$rootScope",function(e,t){var n,r;return r=function(e){return"document-"+e},t.$on("LocalStorageModule.notification.error",function(e,t){if(/exceeded/i.test(t))return n()}),n=function(){var t,n,r,i,o;for(i=e.keys(),o=[],t=0,r=i.length;t<r;t++)n=i[t],/^document\-/.test(n)||/^comment\-/.test(n)?o.push(e.remove(n)):o.push(void 0);return o},{exists:function(t){return null!=e.get(r(t))},show:function(t){return e.get(r(t))},create:function(t){return e.set(r(t.document_identifier),t)},update:function(t){return e.set(r(t.document_identifier),t)}}}])},function(e,t,n){(function(e){var t;t=n(61),ng.factory("UserLocal",["localStorageService",function(n){var r;return r="user",{update:function(e){return delete e.password,delete e.password_confirmation,null!=e.email&&(e.md5_email=t(e.email)),n.set(r,e),e},update_merge:function(t){var i;return i=n.get(r)||{},e.extend(i,t),n.set(r,i),i},show:function(){var e;if(e=n.get(r),e&&e.properties&&e.id&&e.authentication_token)return e}}}])}).call(t,n(2))},function(e,t,n){(function(e){ng.factory("mathematicalSymbolsList",function(){return[{key:"alpha",icon_html:"Î±",size:1,name:"alpha",mq_command_write:"\\alpha"},{key:"beta",icon_html:"Î²",size:1,name:"beta",mq_command_write:"\\beta"},{key:"gamma",icon_html:"Î³",size:1,name:"gamma",mq_command_write:"\\gamma"},{key:"delta",icon_html:"Î´",size:1,name:"delta",mq_command_write:"\\delta"},{key:"epsilon",icon_html:"Îµ",size:1,name:"epsilon",mq_command_write:"\\epsilon"},{key:"zeta",icon_html:"Î¶",size:1,name:"zeta",mq_command_write:"\\zeta"},{key:"eta",icon_html:"Î·",size:1,name:"eta",mq_command_write:"\\eta"},{key:"theta",icon_html:"Î¸",size:1,name:"theta",mq_command_write:"\\theta"},{key:"pi",icon_html:"ð",size:1,name:"pi",mq_command_write:"\\pi"},{key:"infinity",icon_html:"â",size:1,name:"inifinity",mq_command_write:"\\infty"},{key:"change triangle delta",icon_html:"Î",size:1,name:"delta triangle",mq_command_write:"\\Delta"},{key:"lambda",icon_html:"Î»",size:1,name:"lamda",mq_command_write:"\\lambda"},{key:"mu",icon_html:"Î¼",size:1,name:"mu",mq_command_write:"\\mu"},{key:"sigma",icon_html:"Ï",size:1,name:"sigma",mq_command_write:"\\sigma"},{key:"phi",icon_html:"Î¦",size:1,name:"phi",mq_command_write:"\\phi"},{key:"plus",icon_html:"+",size:1,name:"plus",mq_command_write:"+"},{key:"minus",icon_html:"-",size:1,name:"minus",mq_command_write:"-"},{key:"multiply times",icon_html:"Ã",size:1,name:"multiply",mq_command_write:"\\times"},{key:"divide",icon_html:"Ã·",size:1,name:"divide",mq_command_write:"\\div"},{key:"equals",icon_html:"=",size:1,name:"equals",mq_command_write:"="},{key:"plus minus plusminus",icon_html:"Â±",size:1,name:"plus minus",mq_command_write:"\\pm"},{key:"minus plus minusplus",icon_html:"â",size:1,name:"minus plus",mq_command_write:"\\mp"},{key:"not equals",icon_html:"â ",size:1,name:"not equals",mq_command_write:"\\neq"},{key:"root squareroot",icon_html:"âx",size:2,name:"squareroot",mq_command_write:"\\sqrt{}"},{key:"nth root",icon_html:"nâx",size:2,name:"nth root",mq_command_write:"\\sqrt[]{}"},{key:"power exponent superscript",icon_html:"^",size:1,name:"exponent",mq_command_type:"^"},{key:"subscript",icon_html:"a<sub>b</sub>",size:1,name:"subscript",mq_command_type:"_"},{key:"less than",icon_html:"<",size:1,name:"less than",mq_command_write:"<"},{key:"greater than",icon_html:">",size:1,name:"larger than",mq_command_write:">"},{key:"less than equals",icon_html:"â¤",size:1,name:"less than equals",mq_command_write:"\\leq"},{key:"greater than equals",icon_html:"â¥",size:1,name:"larger than equals",mq_command_write:"\\geq"},{key:"approximately equals",icon_html:"â",size:1,name:"approximately equals",mq_command_write:"\\approx"},{key:"fractions divide",icon_html:"<sup>a</sup>&frasl;<sub>b</sub>",size:2,name:"fraction",mq_command_cmd:"/"},{key:"absolute positive",icon_html:"|x|",size:1,name:"absolute value",mq_command_write:"|x|"},{key:"vertical line pipe",icon_html:"|x",size:1,name:"pipe",mq_command_write:"|"},{key:"sigma summation limit",icon_html:"âi",size:2,name:"summation",mq_command_write:"\\sum_{}^{} {}"},{key:"pi product limit",icon_html:"âi",size:2,name:"product",mq_command_write:"\\prod_{}^{} {}"},{key:"logorithm",icon_html:"log",size:2,name:"log",mq_command_write:"\\log_{}"},{key:"limit",icon_html:"lim",size:2,name:"limit",mq_command_write:"\\lim_{n\\to\\infty}"},{key:"integral limit",icon_html:"â«i",size:2,name:"integral",mq_command_write:"\\int_{}^{}"},{key:"to right arrow",icon_html:"â",size:1,name:"to arrow",mq_command_write:"\\to"},{key:"degree angle",icon_html:"Â°",size:1,name:"degree",mq_command_write:"\\degree"},{key:"right angle",icon_html:"â",size:1,name:"right angle",mq_command_html:"&angrt;"},{key:"angle",icon_html:"â ",size:1,name:"angle",mq_command_write:"\\angle"},{key:"spherical angle",icon_html:"â¢",size:1,name:"spherical angle",mq_command_html:"&angsph;"},{key:"measured angle",icon_html:"â¡",size:1,name:"measured angle",mq_command_write:"\\measuredangle"},{key:"congruent equals approximately",icon_html:"â",size:1,name:"congruent",mq_command_html:"&cong;"},{key:"not congruent not equals approximately",icon_html:"â",size:1,name:"not congruent",mq_command_html:"&ncong;"},{key:"segment up top overline",icon_html:'<span style="text-decoration: overline;">ab</span>',size:2,name:"segment",mq_command_write:"\\overline{}"},{key:"quarter note quarter-note music",icon_html:"â©",size:1,name:"quarter-note",mq_command_html:"&#9833;"},{key:"eighth eight note eighth-note music",icon_html:"âª",size:1,name:"eighth-note",mq_command_html:"&#9834;"},{key:"beamed eighth-note eight note music",icon_html:"â«",size:1,name:"beamed-eighth-note",mq_command_html:"&#9835;"},{key:"beamed sixteenth-note sixteeth note music",icon_html:"â¬",size:1,name:"beamed-sixteenth-note",mq_command_html:"&#9836;"},{key:"flat note music",icon_html:"â­",size:1,name:"flat",mq_command_html:"&#9837;"},{key:"natural note music",icon_html:"â®",size:1,name:"natural",mq_command_html:"&#9838;"},{key:"sharp note music",icon_html:"â¯",size:1,name:"sharp",mq_command_html:"&#9839;"}]}),ng.filter("trust_icon_html",["$sce","mathematicalSymbolsList",function(t,n){return function(r){return e.find(n,{icon_html:r})?t.trustAsHtml(r):r}}])}).call(t,n(2))},function(e,t,n){(function(e){ng.factory("RecentFileList",["localStorageService",function(t){var n,r,i,o,a;return n=function(t){var n,r,o,s,l;if("switched_copy"!==t.source){for(r=i(),o=s=0,l=r.length;s<l;o=++s)if(n=r[o],e.every(["document_identifier","source","file_url"],function(e){var r,i;return(null!=(r=t[e])?r:null)===(null!=(i=n[e])?i:null)})){r.splice(o,1);break}return r.unshift(t),r=e.uniqBy(r,"document_identifier"),r.length>20&&(r.length=20),a(r)}},i=function(){var n;return e.uniqBy(null!=(n=t.get("recent_files"))?n:[],"document_identifier")},o=function(t){var n,r;if(r=i(),n=e.findIndex(r,function(e){return e.document_identifier===t.document_identifier&&e.source===t.source&&e.file_url===t.file_url}),n>=0)return r.splice(n,1),a(r)},r=function(){return t.remove("recent_files")},a=function(e){return t.set("recent_files",e)},{add:n,get:i,remove:o,clear:r}}])}).call(t,n(2))},function(e,t,n){(function(e,t){ng.factory("RecentFileManager",["PageState","DocumentManager","DocumentAPI","GoogleDrive","FileCache","RecentFileList","Mixpanel","ngDialog",function(n,r,i,o,a,s,l,c){var u,d,f,h,p,g,m,v,_,y,b,w,x,k,C,S;return d=[],u=function(e){return s.add(e)},g=function(){return e.reverse(e.sortBy(s.get(),"last_opened_at"))},x=function(e){return s.remove(e)},C=function(t){var n,r;return r=this.get(),n=e.find(r,{document_identifier:t}),this.remove(n)},k=function(e){return x(e),i.unset_last_opened_at({document_identifier:e.document_identifier}).$promise},f=function(){return s.clear()},v=function(){return Dropbox.choose({success:function(e){window.location="viewer.html?source=dropbox&file="+encodeURIComponent(e[0].link)},cancel:function(){},linkType:"direct",multiselect:!1,extensions:[".pdf"]})},m=function(){var e,t;return t={clientId:"z8usf9bza4b6y9y5h3g1bcm9l70kfihl",linkType:"direct",multiselect:!1},e=new BoxSelect(t),e.success(function(e){var t;return t="https://kamicors.kamihq.com//"+e[0].url,window.location="viewer.html?source=box&file="+encodeURIComponent(t)}),e.launchPopup()},_=function(){t("#fileInput").click()},y=function(e){var t;if(l.track("Opened Recent File",{file_name:e.filename,document_identifier:e.document_identifier}),!h(e))return void S(e);switch(e.last_opened_at=Date.now(),n.add_next_load_params({document_identifier:e.document_identifier,source:e.source,google_user_id:e.google_user_id,parent_id:e.parent_id,filename:e.document_name,file_url:e.file_url}),e.source){case"googledriveexport":return o.load_document({id:e.document_identifier,userId:e.google_user_id,filename:e.document_name,parent_id:e.parent_id});case"googledrive":return o.load_document({id:e.document_identifier,userId:e.google_user_id,filename:e.document_name,parent_id:e.parent_id});case"filepicker":return notable.support_caches()?r.open_file(e.document_identifier):_();case"dropbox":return v();case"box":return m();default:if(null!=e.file_url||null!=e.source_url)return r.open_url(null!=(t=e.file_url)?t:e.source_url);if(null!=e.document_identifier)return r.open_file(e.document_identifier)}},p=function(t){var n,r;return r="https://localfile.kamihq.com/"+encodeURIComponent(t),n=e.findIndex(d,{url:r}),!(n===-1)},w=function(){return a.getCachedFiles().then(function(e){return d=e})},S=function(e){c.open({template:'<div> <div class="close" ng-click="cancel()"></div> <h3><center>File is not available</center></h3> <br/> <p> This file was opened from another device or is no longer on this computer. <br/><br/> To prevent this in the future you can enable auto-upload of files to Google Drive or share your files on the Kami Cloud. </p> <br/> <div class="buttons" ng-show="!auto_upload_selected()"> <center> <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" mdl-parse ng-click="enable_auto_upload()">Enable Auto Upload</button> </center> </div> </div>',showClose:!1,controller:["PromptFileUploadService","$scope",function(e,t){return t.auto_upload_selected=function(){return e.state.auto_upload_google_drive},t.enable_auto_upload=function(){return e.state.auto_upload_google_drive=!0,t.closeThisDialog()},t.cancel=function(){return t.closeThisDialog()}}],plain:!0}),l.track("Clicked Unopenable Recent File",{file_name:e.filename,document_identifier:e.document_identifier})},b=function(){var t;return w(),t=g(),i.recent().$promise.then(function(n){var r,i;return i=e.map(n.documents,function(e){var t,n;return n=function(){switch(e.copy_type){case"google":return"googledrive";default:return e.copy_type}}(),t=Date.parse(e.last_opened_at),{document_identifier:e.document_identifier,document_name:e.name,file_url:e.file_url,last_opened_at:t,source:n,source_url:e.source_url,google_user_id:e.google_sync_user_id,parent_id:e.parent_id,cloud_hosted:e.cloud_hosted}}),r=e.unionBy(i,t,"document_identifier"),e.sortBy(r,"last_opened_at"),r=r.slice(0,19),r=e.map(r,function(e){return e.can_be_opened=h(e),e}),e.each(r,function(e){return u(e)}),s.get()})},h=function(e){return!!("user_copy"!==e.source||e.file_url||e.source_url||e.cloud_hosted)||p(e.document_identifier)},{add:u,get:g,remove:x,remove_by_document_identifier:C,remove_and_unset:k,clear:f,open_dropbox_picker:v,open_box_picker:m,open_file_picker:_,open_recent_file:y,file_can_open:h,file_in_cache:p,reload_cached_files:w,unable_to_open_dialog:S,refresh:b}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e,t){ng.factory("SelectedBox",["AnnotationSelectionHelper","AnnotationSelectionState",function(n,r){var i;return i=function(){function i(t){this.box_element=e('<div class="selected-box"></div>'),this.page_no=t,e("#pageContainer"+t).append(this.box_element),this.destroy_draw_listener=r.watch(t,this.draw.bind(this)),this.destroy_properties_listener=r.watch_properties_change(this.draw.bind(this)),this.destroy_watch_action_listener=r.watch_select_action(function(e){return function(n){if(n.page_no!==t)return e.draw()}}(this))}return i.prototype.destructor=function(){var e;return null!=(e=this.box_element)&&e.remove(),"function"==typeof this.destroy_draw_listener&&this.destroy_draw_listener(),"function"==typeof this.destroy_properties_listener&&this.destroy_properties_listener(),"function"==typeof this.destroy_watch_action_listener?this.destroy_watch_action_listener():void 0},i.prototype.in_bounds=function(e,t){var n,r,i,o,a,s,l;switch(r=parseInt(this.box_element.css("outline-width")),i=this.box_element.offset(),a=this.box_element.parent().offset(),n={top:i.top-a.top-r,left:i.left-a.left-r},n.bottom=n.top+this.box_element.height()+2*r,n.right=n.left+this.box_element.width()+2*r,o=notable.get_page_dimensions(notable.page_scale(),PDFViewerApplication.pageRotation,this.page_no),e=notable.restore_scale(e),t=notable.restore_scale(t),PDFViewerApplication.pageRotation){case 90:s=o.width-t,l=e;break;case 180:s=o.width-e,l=o.height-t;break;case 270:s=t,l=o.height-e;break;default:s=e,l=t}return n.left<=s&&s<=n.right&&n.top<=l&&l<=n.bottom},i.prototype.transform_translate=function(e,n){var r,i,o,a,s;switch(a=n.x2-n.x1,s=n.y2-n.y1,e&&(e=t.mapValues(e,function(e){return notable.restore_scale(e)}),r={}),PDFViewerApplication.pageRotation){case 90:i=s*-1,o=a,e&&(r.min_x=e.max_y*-1,r.max_x=e.min_y*-1,r.min_y=e.min_x,r.max_y=e.max_x);break;case 180:i=a*-1,o=s*-1,e&&(r.min_x=e.max_x*-1,r.max_x=e.min_x*-1,r.min_y=e.max_y*-1,r.max_y=e.min_y*-1);break;case 270:i=s,o=a*-1,e&&(r.min_x=e.min_y,r.max_x=e.max_y,r.min_y=e.max_x*-1,r.max_y=e.min_x*-1);break;default:i=a,o=s,r=e}return e&&(i=Math.max(i,r.min_x),i=Math.min(i,r.max_x),o=Math.max(o,r.min_y),o=Math.min(o,r.max_y)),this.box_element.css({transform:"translate("+i+"px,"+o+"px)"})},i.prototype.draw=function(){var e,i,o,a,s,l,c,u,d;if(c=r.get(),c=t.filter(c,function(e){return function(t){return t.referring_to.page_no===e.page_no}}(this)),c.length>0)switch(a=notable.get_page_dimensions(notable.page_scale(),PDFViewerApplication.pageRotation,this.page_no),l=n.get_bounds(c,this.page_no),e=0===(null!=(s=n.filter_author(c,"owner"))?s.length:void 0),l=t.mapValues(l,function(e){return notable.restore_scale(e)}),PDFViewerApplication.pageRotation){case 90:o=a.width-l.bottom,u=l.left,d=l.bottom-l.top,i=l.right-l.left;break;case 180:o=a.width-l.right,u=a.height-l.bottom,d=l.right-l.left,i=l.bottom-l.top;break;case 270:o=l.top,u=a.height-l.right,d=l.bottom-l.top,i=l.right-l.left;break;default:o=l.left,u=l.top,d=l.right-l.left,i=l.bottom-l.top}else e=!1,o=0,u=0,d=0,i=0;if(this.box_element.css({transform:"",left:o,top:u,width:d,height:i}),this.box_element.removeClass("collaborator-comments"),e)return this.box_element.addClass("collaborator-comments")},i}()}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.factory("SelectionBox",["AnnotationSelectionHelper","AnnotationSelectionState",function(t,n){var r;return r=function(){function t(t){this.box_element=e('<div class="selection-box"></div>'),this.page_no=t,e("#pageContainer"+t).append(this.box_element)}return t.prototype.destructor=function(){var e;return null!=(e=this.box_element)?e.remove():void 0},t.prototype.draw=function(e){var t,n,r,i,o;switch(r=notable.get_page_dimensions(notable.page_scale(),PDFViewerApplication.pageRotation,this.page_no),PDFViewerApplication.pageRotation){case 90:n=r.width-Math.max(e.y1,e.y2)+"px",i=Math.min(e.x1,e.x2)+"px",o=Math.abs(e.y2-e.y1)+"px",t=Math.abs(e.x2-e.x1)+"px";break;case 180:n=r.width-Math.max(e.x1,e.x2)+"px",i=r.height-Math.max(e.y1,e.y2)+"px",o=Math.abs(e.x2-e.x1)+"px",t=Math.abs(e.y2-e.y1)+"px";break;case 270:n=Math.min(e.y1,e.y2)+"px",i=r.height-Math.max(e.x1,e.x2)+"px",o=Math.abs(e.y2-e.y1)+"px",t=Math.abs(e.x2-e.x1)+"px";break;default:n=Math.min(e.x1,e.x2)+"px",i=Math.min(e.y1,e.y2)+"px",o=Math.abs(e.x2-e.x1)+"px",t=Math.abs(e.y2-e.y1)+"px"}return this.box_element.css({left:n,top:i,width:o,height:t})},t}()}])}).call(t,n(1))},function(e,t,n){(function(e){ng.factory("SelectionView",["AnnotationSelectionHelper","AnnotationSelectionState","SVGHelper",function(t,n,r){return{set_active:function(e){var t,r,i,o,a,s,l,c;for(e=null!=e?e:n.get_elements(),s=e.owner,r=0,o=s.length;r<o;r++)t=s[r],t.addClass("annotation-selected");for(l=e.collaborator,c=[],i=0,a=l.length;i<a;i++)t=l[i],c.push(t.addClass("collaborator-annotation-selected"));return c},set_inactive:function(e){var t,r,i,o,a;for(e=null!=e?e:n.get_elements(),o=e.all(),a=[],r=0,i=o.length;r<i;r++)t=o[r],t.removeClass("annotation-selected"),a.push(t.removeClass("collaborator-annotation-selected"));return a},translate_xy:function(t,i,o){var a,s,l,c,u,d,f,h,p,g;for(h=notable.reset_scale(i.x2-i.x1),p=notable.reset_scale(i.y2-i.y1),t&&(h=Math.min(Math.max(t.min_x,h),t.max_x),p=Math.min(Math.max(t.min_y,p),t.max_y)),g=r.pixel_to_viewbox(e("#pageContainer"+o).find("#painting"+o),{x:h,y:p}),u=n.get_elements().all(),d=[],l=0,c=u.length;l<c;l++)s=u[l],f=s.css("transform"),a="g"===s.get(0).tagName?null:notable.decompose_matrix(f),f=f.replace("none",""),f=f.replace(/matrix\(.*?\)/g,""),f=f.replace(/translate\(.*?\)/g,""),a&&a.rotation?(f=f.replace(/rotate\(.*?\)/g,""),f+="translate("+h+"px, "+p+"px) rotate("+a.rotation+"rad)"):f+="g"===s.prop("tagName")?"translate("+g.x+"px, "+g.y+"px)":"translate("+h+"px, "+p+"px)",d.push(s.css("transform",f));return d},set_xy:function(e,r,i){var o,a,s,l,c,u,d;for(u=notable.reset_scale(r.x2-r.x1),d=notable.reset_scale(r.y2-r.y1),e&&(u=Math.min(Math.max(e.min_x,u),e.max_x),d=Math.min(Math.max(e.min_y,d),e.max_y)),l=n.get_elements().all(),a=0,s=l.length;a<s;a++)o=l[a],c=o.css("transform"),c=c.replace("none",""),c=c.replace(/matrix\(.*?\)/g,""),c=c.replace(/translate\(.*?\)/g,""),o.css("transform",c);return function(){var e;return e=t.filter_author(n.get(),"owner"),t.shift_comments(e,i,{x:u,y:d})}}}}])}).call(t,n(1))},function(e,t,n){(function(e){ng.factory("SettingsFactory",["localStorageService","SettingsAPI","Pusher","$q","$timeout","OfflineSync","$rootScope",function(t,n,r,i,o,a,s){var l,c,u,d,f,h,p,g,m;return u=function(e){return"settings."+e},g={},p=function(){var e;return e=g,a.settings_update_later({settings:e}),g={}},c=e.debounce(p,1e3,{maxWait:2e3,leading:!0}),h=function(){return n.show().$promise.then(function(e){var n,r,i;r=e.settings;for(n in r)i=r[n],t.set(u(n),i);s.$broadcast("settings-updated",!0)}).catch(function(t){return f.cache=new e.memoize.Cache})},l=null,d=function(e){return l=r.channel(e.channel),null!=l?l.bind("settings-reload",h):void 0},m=function(){return null!=l?l.unbind("settings-reload",h):void 0},f=e.memoize(function(e){return m(),d(e),h()},function(e){return null!=e?e.id:void 0}),s.$on("user_authentication_success",function(e,t){return f(t)}),{get:function(e,n){var r;return null==n&&(n=null),r=t.get(u(e)),null!=r?r:n},set:function(e,n,r){return null==r&&(r=!1),t.set(u(e),n),r&&(g[e]=n,c()),s.$broadcast("settings-updated",!1)},destroy:function(e,n){if(null==n&&(n=!1),t.remove(u(e)),n)return g[e]=null,c()},save:function(e){return null==e&&(e=!1),e?(c.cancel(),p()):c()},load:h}}])}).call(t,n(2))},function(e,t,n){(function(e){ng.factory("Stripe",["SubscriptionAPI","Mixpanel","User","$q",function(t,n,r,i){var o,a,s,l,c;return l=StripeCheckout.configure({key:"pk_live_4Um7jdwvkvSu3W7kBwiR2svS",image:"images/icon128.png"}),c=function(e){var t;return t=i.defer(),e.token=t.resolve,e.closed=function(){return t.reject("cancelled")},l.open(e),t.promise},s=function(a,s,l){return null==a?i.reject("Unknown final_price"):(n.track("Clicked Purchase Button",{price:a,type:"subscription",pack:s,period:l}),r.show(!0).then(function(r){return null!=r.current_license?t.all().$promise.then(function(i){var c;return c=e.filter(i.subscriptions,{status:"active"}),0===c.length?o(s,l,a,null!=r?r.email:void 0):t.change_plan({pack:s,period:l,price:100*a}).$promise.then(function(){return n.track("Upgrade Successful",{price:a,type:"subscription",pack:s,period:l})})}):o(s,l,a,null!=r?r.email:void 0)}))},o=function(r,i,o,s){return c({name:"Kami "+e.capitalize("premium"===angular.lowercase(r)?"Pro":r),description:e.capitalize(a(i))+" Subscription",email:s,amount:100*o,allowRememberMe:!1,panelLabel:"Pay {amount} / "+i}).then(function(e){return t.create({stripe_token:e.id,pack:r,period:i,price:100*o}).$promise.then(function(e){return n.track("Purchase Successful",{price:o,type:"subscription",pack:r,period:i})})})},a=function(e){switch(e){case"year":return"yearly";case"month":return"monthly";case"lifetime":return"lifetime";default:return"monthly"}},{purchase:s}}])}).call(t,n(2))},function(e,t,n){(function(e,t){var n=function(e,t){return function(){return e.apply(t,arguments)}};ng.factory("SubscriptionManagerFactory",function(){var r,i,o,a,s,l,c,u;return u=e,a=function(){return null},r=function(){function e(e,t){this.subscriptions=e,this.subject=t,this.off=n(this.off,this),this.one=n(this.one,this),this.on=n(this.on,this),this._id=n(this._id,this)}return e.prototype._id=function(e,t){return{subject:this.subject,event_name:e,listener:t}},e.prototype.on=function(e,t){var n;return n=this._id(e,t),this.subscriptions.add_with_id(n,function(n){return function(){return n.subject.off(e,t)}}(this)),this.subject.on(e,t)},e.prototype.one=function(e,t){var n;return n=this._id(e,t),this.subscriptions.add_with_id(n,function(n){return function(){return n.subject.off(e,t)}}(this)),this.subject.one(e,function(n){return function(r){return n.off(e,t),t(r)}}(this))},e.prototype.off=function(e,t){var n,r;return n=this._id(e,t),null!=(r=this.subscriptions.remove(n))?r.unsubscribe():void 0},e}(),i=function(){function e(e,t,n){this.id=e,this.origin=n,this.unsubscribe=t}return e}(),o=function(){function e(){this.$=n(this.$,this),this.unsubscribe=n(this.unsubscribe,this),this.remove=n(this.remove,this),this.add=n(this.add,this),this.add_with_id=n(this.add_with_id,this),this._subscriptions=[],this.unsubscribe=t.once(this.unsubscribe)}return e.prototype.add_with_id=function(e,t){var n;this._subscriptions.push(new i(e,t,n))},e.prototype.add=function(e){var t;return t=e,this.add_with_id(t,e)},e.prototype.remove=function(e){var n,r,i,o,a;for(o=this._subscriptions,r=n=0,i=o.length;n<i;r=++n)if(a=o[r],t.isEqual(a.id,e))return this._subscriptions.splice(r,1)[0];return null},e.prototype.unsubscribe=function(){var e,t,n,r;for(n=this._subscriptions,e=0,t=n.length;e<t;e++)r=n[e],r.unsubscribe()},e.prototype.$=function(e){var t;return t=u(e),new r(this,t)},e}(),s=function(){return new o},l=function(e,t){var n;return n=c(e),t.one("$destroy",n.unsubscribe),n},c=function(e){var t;return t=s(),e.$on("$destroy",t.unsubscribe),t},{create:s,for_directive:l,for_scope:c}})}).call(t,n(1),n(2))},function(e,t,n){(function(e,t){ng.factory("SymbolPicker",["$rootScope","$compile",function(n,r){var i,o,a,s,l,c,u;return l={},o=function(){function i(e){null==e&&(e={}),this.set_config(e),this.set_events(e),this.create_scope(),this.compile_element(e),this.trigger_open()}return i.prototype.set_config=function(e){var t,n;return this.config={},this.config.id=null!=(t=e.id)?t:uuid.v4(),this.config.title=(null!=(n=e.title)?n.length:void 0)>25?e.title.substring(0,25):e.title,this.config.class_name=e.class_name,this.config.starting_position=e.starting_position||[0,0],this.config.header=null==e.header||e.header,this.config.draggable=null==e.draggable||e.draggable,this.config.delete_on_close=null==e.delete_on_close||!!e.delete_on_close,this.config.symbols_list=e.symbols_list},i.prototype.set_events=function(e){var t,n,r,i;if(this.reset_event_hooks(),e.hooks&&"object"==typeof e.hooks){r=e.hooks,i=[];for(n in r)t=r[n],i.push(this.add_event(n,t));return i}},i.prototype.reset_event_hooks=function(){return this.stored_event_hooks={on_move:[],on_close:[],on_open:[],on_select_symbol:[]}},i.prototype.create_scope=function(){var t;return this.scope=n.$new(!0),t=this,e.assign(this.scope,{title:t.config.title,symbols_list:t.config.symbols_list,container_id:"symbol-picker-"+t.config.id,visible:!1,ui_config:{starting_position:t.config.starting_position,draggable:t.config.draggable,header:t.config.header},hooks:{close:t.trigger_close.bind(t),move:function(e,n){return t.run_hooks("on_move",[e,n])},select_symbol:function(e){return t.run_hooks("on_select_symbol",[e])}}})},i.prototype.compile_element=function(e){var n,i,o,a,s;return o="symbol-picker-"+this.config.id,n="symbol-picker "+(null!=(s=this.config.class_name)?s:""),this.element=t("<symbol-picker id='{{container_id}}' class='"+n+"' ng-show='visible'></symbol-picker>"),i=r(this.element)(this.scope),a=e.container||t("body"),a.append(i)},i.prototype.run_hooks=function(e,t){var n,r,i,o;if(this.stored_event_hooks[e])for(r=this.stored_event_hooks[e],i=0,o=r.length;i<o;i++)n=r[i],n.apply(null,t);return null},i.prototype.clean_up=function(){return this.element.remove(),this.reset_event_hooks(),this.scope.$destroy(),delete l[this.config.id],s(this.config.id)},i.prototype.trigger_close=function(e){return this.scope.visible=!1,null!=e?e?(this.run_hooks("on_close",[!0]),this.clean_up()):this.run_hooks("on_close",[!1]):this.config.delete_on_close?(this.run_hooks("on_close",[!0]),this.clean_up()):this.run_hooks("on_close",[!1])},i.prototype.trigger_open=function(){return this.scope.visible=!0,this.run_hooks("on_open")},i.prototype.add_event=function(e,t){var n;return this.stored_event_hooks[e]?(this.stored_event_hooks[e].push(t),n=function(n){return function(){return n.remove_event(e,t)}}(this)):null},i.prototype.remove_event=function(e,t){var n,r,i,o,a;if(this.stored_event_hooks[e])for(r=this.stored_event_hooks[e],i=o=0,a=r.length;o<a;i=++o)if(n=r[i],n===t){r.splice(i,1);break}return null},i}(),i=n.$new(!0),c=function(e,t){return i.$on("create",function(n,r){if(r.id===e)return t(r.symbolPicker)})},a=function(e,t){return i.$broadcast("create",{id:e,symbolPicker:t})},u=function(e,t){return i.$on("destroy",function(n,r){if(r.id===e)return t(r.symbolPicker)})},s=function(e){return i.$broadcast("destroy",{id:e})},{createNew:function(e){var t;return(null!=e?e.id:void 0)&&l[e.id]?this.get(e.id):(t=new o(e),l[t.config.id]=t,a(t.config.id,t),t)},get:function(e){return l[e]},on_create:c,on_destroy:u}}])}).call(t,n(2),n(1))},function(e,t,n){(function(e){var t,r;t=n(24),r=n(14),ng.factory("Sync",["OfflineSync","$rootScope","GoogleDrive","PageState","Document","Pusher","DocumentAPI","User","Mixpanel","GoogleAuth","$q","GoogleDriveManualSyncService",function(n,r,i,o,a,s,l,c,u,d,f,h){var p,g,m,v,_,y;return m={},p=function(t,n){return m[t]=e.assign({syncing_status:!1,unsync_count:0,last_sync:null,init:function(){},enabled:function(){return!1},sync_now:function(){},status:function(){},upsert_comment:function(e){}},n)},p("kami",{enabled:function(){return!0},sync_now:function(){return n.sync_now()},status:function(){return this.unsync_count>0?n.is_backing_off()?"queued_offline":"saving":"saved"}}),p("drive",{auto_sync:!1,init:function(){if(this.enabled())return i.get_file(o.document.document_identifier,o.google_user_id).then(function(e){return function(t){return e.file=t}}(this)),null!=o.parent_id&&i.get_file(o.parent_id,o.google_user_id).then(function(e){return function(t){return e.folder=t}}(this)),c.show().then(function(e){return function(t){var n;return n=s.channel(t.channel+"-"+o.document.channel),null!=n&&n.bind("google-sync-started",function(t){return r.$apply(function(){return e.syncing_status="syncing"})}),null!=n&&n.bind("google-sync-completed",function(t){return r.$apply(function(){return e.sync_completed()})}),null!=n?n.bind("google-sync-error",function(t){return r.$apply(function(){var n,r;return e.syncing_status=!1,"undefined"!=typeof(null!=t?t.google_auth_failure:void 0)?(n={required_scope:t.google_auth_failure_required_scope,unsync_count:e.unsync_count},u.track("Google Sync PDF Authorization Shown",n),r=1===e.unsync_count?"You have one unsaved change.\n\n":e.unsync_count>1?"You have "+e.unsync_count+" unsaved changes.\n\n":"",
d.authorize_with_dialog({user_id:t.google_auth_failure,scope:t.google_auth_failure_required_scope,message:r+"Allow Kami to save changes to Google Drive",reason:"sync_error",offline:!0}).then(function(){return u.track("Google Sync PDF Authorization Successful"),e.sync_now()}).catch(function(n){return e.syncing_status="error",o.export_status="export_error",u.track("Google Sync PDF Error",{data:t,authorize_error:n})})):(e.syncing_status="error",o.export_status="export_error",u.track("Google Sync PDF Error",{data:t}))})}):void 0}}(this))},enabled:function(){return"googledrive"===o.source&&o.has_permission("edit")},sync_now:function(){return this.syncing_status="syncing",PDFView.pdfDocument.transport.getPassword().then(function(e){return function(t){return h.sync({document_identifier:o.document.document_identifier,file_name:o.document.name,google_user_id:o.google_user_id,password:t}).then(function(){return e.sync_completed()}).catch(function(t){return e.syncing_status="error",f.reject(t)})}}(this))},sync_completed:function(){return u.track_api("Google Sync PDF Successful"),this.syncing_status=!1,this.unsync_count=0,this.last_sync=t()},move_drive_folder:function(){return u.track("Google Drive Clicked Move Folder"),i.pick_folder(o.google_user_id,{picker_title:"Move "+o.document_name()}).then(function(t){return function(n){var r;return i.patch_file(e.omitBy({id:t.file.id,addParents:n.file.id,removeParents:null!=(r=t.folder)?r.id:void 0},e.isNil),n.google_user_id).then(function(e){return t.folder=n.file,t.file=e,o.parent_id=n.file.id,u.track("Google Drive Move Folder Successful")})}}(this))},upsert_comment:function(e){return this.unsync_count++}}),_=function(e){return n.comment_upsert_later(e),m.kami.upsert_comment(e),m.drive.upsert_comment(e)},y=function(e,t){return n.upsert_comment_with_attachment_later(e,t)},g=function(){return m.kami.init(),m.drive.init()},v=function(){return m.kami.unsync_count=n.queue_length(/comment/)},r.$on("sync_tick",function(){return v()}),r.$on("sync_enqueued_offline",function(){return v()}),r.$on("sync_successful",function(){return v(),m.kami.last_sync=t()}),r.$on("sync_successful",function(){return v(),m.kami.last_sync=t()}),e.assign(m,{init:g,upsert_comment:_,upsert_comment_with_attachment:y})}]),ng.service("OfflineSync",["SyncQueue","CommentAPI","DocumentAPI","EventAPI","$rootScope","$timeout","Authentication","Pusher","PageState","$q","SettingsAPI","KamiUploadService","FileCache","CommentAttachmentAPI","MixpanelParams","$http","$injector",function(t,n,i,o,a,s,l,c,u,d,f,h,p,g,m,v,_){var y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I;return k=!1,a.$on("pusher:connected",function(){var e,n;return n=t.length(),e=y(),(k||n>0)&&e.then(function(){return a.$broadcast("offline_sync_finished")}),k=!0}),S=function(){return!0},R=function(e,t,n){var r,i;return null==t&&(t={}),null==n&&(n=null),r=m.get_event_data(e,t),i=o.create(r).$promise,i.catch(function(){return r.value=angular.extend({offline_event:!0},r.value),angular.extend(r,{created_at:(new Date).toISOString()}),this.event_later(r)}),i.finally(function(){if(n)return n()})},w=0,$=function(){return w=0},P=null,x=function(){if(null==P)return w+=1,S()?P=s(function(){return P=null,y()},I()):void 0},this.is_backing_off=function(){return null!=P},I=function(){var e;return e=Math.pow(4,w),e>256&&(e=256),1e3*e},A=function(){return S()?E():a.$broadcast("sync_enqueued_offline")},O=null,E=function(){return a.$broadcast("sync_tick"),null!=O?O:0===t.length()?d.when():(a.$broadcast("sync_saving"),O=y(),O.finally(function(){return O=null}),O.then(function(){return a.$broadcast("sync_successful")}).catch(function(){return a.$broadcast("sync_enqueued_offline"),d.reject()}))},C=function(t){var l,c,u,g,m;switch(t.task){case"document_update":return i.update(t.args).$promise;case"event_create":return o.create(t.args).$promise;case"settings_update":return f.update(t.args).$promise;case"comment_upsert":return m=null,t.args.attachment_blob||t.blob_url?(l={Audio:"audio_recording",Image:"image",Video:"video_recording",Desktop:"video_recording"},c=null!=t.blob_url?v({url:t.blob_url,method:"GET",responseType:"blob"}):d.reject(),m=c.then(function(e){return e.data}).catch(function(e){return p.serve(p.cacheURL(t.args.id),!0)}).then(function(e){return T(t,0),h.upload("comment-attachment-"+t.args.id,e)}).then(function(n){var i;return T(null,null),i=e.cloneDeep(t.args),delete i.attachment_url,delete i.attachment_blob,i.attachments=[{attachment_type:l[t.args.annotation_type],document_identifier:t.args.document_identifier,id:r.v4(),attachment_url:n.file_url}],d.resolve(i)},function(e,t){return d.reject(e,t)},function(e){return T(t,Math.round(e.loaded/e.total*100))})):(u=d.defer(),s(function(){var n;return n=e.cloneDeep(t.args),u.resolve(n)},0),m=u.promise),g=m.then(function(e){return n.upsert(e).$promise.then(function(t){return d.resolve({server_comment:t,sent_comment:e})},function(t){return d.reject({comment:e,error:t})})}).then(function(e){if(a.$emit("comment_upsert_success",e),t.args.attachment_blob)return URL.revokeObjectURL(t.blob_url)}).catch(function(e){return a.$emit("comment_upsert_failure",{upserted_comment:e.comment,error:e.error}),e.error instanceof PDFJS.MissingPDFException&&t.args.attachment_blob?void R("Sync Error",{message:"Unable to find cached attachment file for comment "+t.args.id,comment_id:t.args.id,job:t,error:e.error}):d.reject(e.error)});default:return R("Sync Error",{job:t}),null}},D={job:null,progress:null},T=function(e,t){return D.job=e,D.progress=t},y=function(){var e,n,r,i;return a.$broadcast("sync_tick"),(n=t.peek())?(i=function(e){return $(),t.pop_if(n).then(y)},e=function(e){return function(t){switch(null!=t?t.status:void 0){case 401:return l.ensure_authenticated(),x(),d.reject();case 404:return R("Sync Error",{message:"Got 404, ignoring",job:n}),i(e);case 403:return R("Sync Error",{message:"Got 403, ignoring",job:n}),i(e);case 413:return R("Sync Error",{message:"Got 413, ignoring",job:n}),i(e);default:return x(),d.reject()}}},r=C(n),null===r?(R("Sync Error",{message:"Null promise for job",job:n}),t.pop_if(n).then(y)):r.then(function(){return i(n.task)}).catch(e(n.task))):d.when()},b=function(e){return t.push(e).then(A,function(t){return R("Sync Error",{job:e,error:t,message:"Unable to enqueue job, trying to run once"}),C(e)})},this.comment_upsert_later=function(e){return b({task:"comment_upsert",args:e})},this.document_update_later=function(e){return b({task:"document_update",args:e})},this.event_later=function(e){return b({task:"event_create",args:e})},this.settings_update_later=function(e){return b({task:"settings_update",args:e})},this.upsert_comment_with_attachment_later=function(e,t){var n,r;return r=null,n=null,t&&(p.addBlob(p.cacheURL(e.id),t).catch(function(e){return R("Sync Error",{error:e,message:"Unable to save attachment to cache"})}),r=PDFJS.createObjectURL(t),n=t.type),b({task:"comment_upsert",args:e,blob_url:r,blob_type:n})},this.sync_now=function(){return E()},this.queue_length=function(n){return null==n&&(n=null),n?e.sumBy(t.queue(),function(e){return n.test(e.task)?1:0}):t.length()},this.sync_progress=D,null}]),ng.factory("SyncQueue",["localStorageService","$q",function(t,n){var r,i,o;return r="offline_sync_queue",i=function(){return t.get(r)||[]},o=function(e){return t.set(r,e)},i(),{lock:function(e){var t,r;try{return r=i(),e(r),o(r),n.when()}catch(e){return t=e,n.reject(t)}},push:function(e){return this.lock(function(t){return t.push(e)})},insert_after:function(t,n){return this.lock(function(r){var i;return i=e.findIndex(r,t),r.splice(i+1,0,n)})},pop_if:function(e){return this.lock(function(t){if(angular.equals(t[0],e))return t.shift()})},peek:function(){return i()[0]},length:function(){return i().length},queue:function(){return i()}}}])}).call(t,n(2))},function(e,t,n){(function(e,t){var r;r=n(11),ng.factory("tts",["$q","SettingsFactory","$rootScope","Mixpanel",function(n,i,o,a){var s,l,c,u,d,f,h,p,g,m,v,_,y,b,w;return b=[],u=function(){return window.SpeechSynthesisUtterance&&window.speechSynthesis},g=function(t){var n,r;if(b&&b.length>0)return y(),o.$broadcast("TTSSpeakingStart"),e.last(b).onend=function(){return o.$apply(function(){return y(),o.$broadcast("TTSSpeakingStop")})},e.reduce(b,function(e,n,r){return n.onerror=function(e){return o.$apply(function(){return m()})},n.onboundary=function(r){var i;if("boundary"===r.type&&!(r.charIndex+e>t))return i=n.text.search(/\S/),o.$broadcast("TTSSpeakingEvent",{name:"word",charIndex:r.charIndex+e+i})},b.length===r+1&&(n.onend=function(){return o.$apply(function(){return y(),o.$broadcast("TTSSpeakingStop")})}),window.speechSynthesis.speak(n),e+n.text.length+1},0),(null!=(n=l())&&null!=(r=n.speechSynthesisVoice)?r.localService:void 0)===!0?o.$broadcast("TTSSpeakingEvent",{name:"word",charIndex:0}):void 0},y=function(){return d()?t(document.body).addClass("tts-speaking"):t(document.body).removeClass("tts-speaking")},h=function(e){var t,n,r,i,o,a,s,c,u;for(a=l(),m(),t=_(e),b=[],n=0,i=t.length;n<i;n++){for(s=t[n],c=new window.SpeechSynthesisUtterance,c.text=s,c.rate=a.rate||1,r=0,o=w.length;r<o;r++)if(u=w[r],u.name===a.speechSynthesisVoice){c.voice=u;break}b.push(c)}return g(e.length)},p=function(){var n,i,o,a,s,l,c,u,d,f,p,g;if(f=r.getSelection(),f.trim(),0!==f.toString().length){for(f.expand("word"),p=f.toString(),d=[],a=s=0,l=f.rangeCount-1;0<=l?s<=l:s>=l;a=0<=l?++s:--s)d=d.concat(f.getRangeAt(a).getNodes());return d=e.filter(d,function(e){var n;try{return"block"===t(e).css("display")}catch(e){return n=e,!1}}),d.length>0&&(null!=(c=p.split(" "))?c.length:void 0)>1?(n=e.reduce(d,function(e,t){return e+=/\W/.test(t.innerText)?t.innerText+"\n":""},""),g=n.replace(/\n/g,""),g.indexOf(p)!==-1?(u=g.split(p),o=u[0],i=u[1],n=n.substring(o.length,n.length),n=n.substring(0,n.length-i.length-1),h(n)):h(p)):h(p)}},m=function(){return window.speechSynthesis.cancel(),b=[],y(),o.$broadcast("TTSSpeakingStop")},d=function(){return window.speechSynthesis.speaking||window.speechSynthesis.pending},w=[],c=function(){var e;return w=window.speechSynthesis.getVoices(),w.length?(w=s(w),n.resolve(w)):(e=n.defer(),window.speechSynthesis.onvoiceschanged=function(){return w=window.speechSynthesis.getVoices(),w=s(w),e.resolve(w)},e.promise)},s=function(t){var n;return n=e.orderBy(t,["localService","default"],["desc","desc"]),n=e.orderBy(n,[function(e){return"en-US"===e.lang&&e.localService===!0?1:0}],["desc"])},l=function(){return i.get("tts",{})},f=function(e){return i.set("tts",e)},_=function(t,n){var r;return null==t&&(t=""),null==n&&(n=180),r=v(t,".",n),r=e.map(r,function(e){return v(e,",",n)}),r=e.flattenDeep(r),r=e.map(r,function(e){return v(e," ",n)}),r=e.flattenDeep(r),r=e.map(r,function(e){return e.length<n+20?e:t.match(new RegExp(".{1,"+(n+20)+"}","g"))}),r=e.flattenDeep(r)},v=function(t,n,r){var i,o,a,s,l,c,u;if(t.length<r)return[t];for(o=t.split(n),s=[],a=0,u=o.length;a<u;a++)i=o[a],c=e.last(s)||"",c.length+n.length+i.length>r?s.push(i):(l=s.pop(),l&&l.length>0?s.push([l,i].join(n)):s.push(i));return s},{speak:h,speakCurrentSelection:p,stop:m,isSpeaking:d,getVoices:c,getSettings:l,setSettings:f,isEnabled:u}}])}).call(t,n(2),n(1))},function(e,t){ng.factory("User",["localStorageService","UserAPI","UserLocal","$q","Gravatar","Authentication","GCM","LicensesHelper","SettingsFactory","$rootScope",function(e,t,n,r,i,o,a,s,l,c){var u,d,f,h;return u=null,d=c.$new(!0),h="user-updated",f=function(e){return u=e,d.$broadcast(h,e)},{create:function(i){return t.create({user:i}).$promise.then(function(t){return f(t),n.update(t),a.upsert(t),e.remove("logged_out"),s.update_license(t),l.load().then(function(){return t})},function(e){var t;return r.reject(null!=e&&null!=(t=e.data)?t.errors:void 0)})},update:function(i){return o.ensure_authenticated(i),t.update(i).$promise.then(function(t){return f(t),n.update(t),e.remove("logged_out"),t},function(e){var t;return r.reject(null!=e&&null!=(t=e.data)?t.errors:void 0)})},show:function(e){var a,s,l,c;return null==e&&(e=!1),l=function(e){return e.gravatar_exists=!1,i.exists(e.md5_email).then(function(){return e.gravatar_exists=!0,!0},function(e){}).finally(function(){return n.update(e)}),e},e?t.show({id:null!=(s=n.show())?s.id:void 0}).$promise.then(function(e){return l(e),n.update(e),f(e),e},function(e){return r.reject(c)}):(c=n.show(),c?(l(c),a=o.ensure_authenticated(c),a.catch(function(e){}),f(c),r.when(c)):r.reject())},login:function(i){return t.login({user:i}).$promise.then(function(t){return f(t),n.update(t),a.upsert(t),e.remove("logged_out"),s.update_license(t),l.load().then(function(){return t})},function(e){var t;return e.status===-1?r.reject(["Unable to connect to the server. Please check your connection and try again"]):r.reject(null!=e&&null!=(t=e.data)?t.errors:void 0)})},login_oauth2:function(i){return t.login_oauth2(i).$promise.then(function(t){return f(t),n.update(t),a.upsert(t),e.remove("logged_out"),s.update_license(t),l.load().then(function(){return t})},function(e){var t;return!(null!=e&&null!=(t=e.data)?t.errors:void 0)&&e.status>=500&&(e.data={errors:["An unknown error occured while signing in. Please try again"]}),r.reject(e)})},login_box:function(i){return t.login_box(i).$promise.then(function(t){return f(t),n.update(t),a.upsert(t),e.remove("logged_out"),s.update_license(t),l.load().then(function(){return t})},function(e){var t;return r.reject(null!=e&&null!=(t=e.data)?t.errors:void 0)})},logout:function(){var r;return f(null),r=n.show(),e.clearAll(),t.logout({user:r}).$promise.finally(function(){return a.destroy(r).finally(function(){return o.deauthenticate(),e.set("logged_out",!0)})})},current_user:function(){return u},watch_current_user:function(e){return d.$on(h,function(t,n){return e(n)})}}}])},function(e,t,n){(function(e,t){ng.factory("WindowKeyListeners",function(){var n,r,i,o,a,s,l;return n={},e(window).keydown(function(e){return i(e.keyCode,e.ctrlKey||e.metaKey)}),e(document).on("copy",function(e){return r(e,e.originalEvent.clipboardData.getData("text/plain"))}),e(document).on("paste",function(e){return o(e,e.originalEvent.clipboardData.getData("text/plain"))}),i=function(e,t,r){var i,o,a,s,l,c;if(a=e+"-"+t,n[a]){for(l=n[a],c=[],o=0,s=l.length;o<s;o++)i=l[o],c.push("function"==typeof i?i():void 0);return c}},r=function(e,t){var r,i,o,a,s,l;if(o="copy",n[o]){for(s=n[o],l=[],i=0,a=s.length;i<a;i++)r=s[i],l.push("function"==typeof r?r(e,t):void 0);return l}},o=function(e,t){var r,i,o,a,s,l;if(o="paste",n[o]){for(s=n[o],l=[],i=0,a=s.length;i<a;i++)r=s[i],l.push("function"==typeof r?r(e,t):void 0);return l}},s=function(e,r,i){var o,a;return o=e+"-"+r,n[o]=null!=(a=n[o])?a:[],n[o].push(i),function(){if(n[o]&&n[o].length)return t.remove(n[o],function(e){return e===i})}},a=function(e){var r,i;return r="copy",n[r]=null!=(i=n[r])?i:[],n[r].push(e),function(){if(n[r]&&n[r].length)return t.remove(n[r],function(t){return t===e})}},l=function(e){var r,i;return r="paste",n[r]=null!=(i=n[r])?i:[],n[r].push(e),function(){if(n[r]&&n[r].length)return t.remove(n[r],function(t){return t===e})}},{fire_key_down:i,fire_copy:r,watch_key_down:s,watch_copy:a,watch_paste:l}})}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.filter("collaborator",["User",function(t){var n;return n=e.memoize(function(t,n){var r;if(null!=t)return r=e.orderBy(t,["name"],["asc"]),r=e.sortBy(r,function(e){return e.name===n?0:1})}),function(e){var r;return r=t.current_user(),n(e,null!=r?r.name:void 0)}}])}).call(t,n(2))},function(e,t){ng.filter("initials",function(){var e;return e=2,function(t){var n,r,i,o,a,s;if(i="","Guest User"===t)return"?";if(null!=t)for(a=t.split(" "),n=0,o=a.length;n<o&&(s=a[n],r=s.charAt(0),"("===r||(i+=r,i.length!==e));n++);return i.toUpperCase()}})},function(e,t){ng.filter("translateSource",function(){return function(e){if(!(null!=e?e.length:void 0))return"Web";switch(e){case"googledrive":return"Google Drive";case"googledriveexport":return"Google Drive";case"filepicker":return"Local File";case"dropbox":return"Dropbox";case"box":return"Box";case"conversion":return"Kami Cloud";case"sharedfile":return"Shared File";case"notification":return"Kami Cloud";case"embed_api":return"Kami Cloud";case"embed":return"Kami Cloud";default:return e}}})},function(e,t,n){var r=[].slice;ng.factory("Jimp",["$q",function(e){var t,i,o;return o=n(205),o=location.protocol+"//"+location.host+"/"+o,i=operative({enhance:function(e,t){Jimp.read(e).then(function(e){return e.greyscale().contrast(.95).autocrop().scan(0,0,e.bitmap.width,e.bitmap.height,function(e,t,n){if(this.bitmap.data[n]>150)return this.bitmap.data[n]=0,this.bitmap.data[n+1]=0,this.bitmap.data[n+2]=0,this.bitmap.data[n+3]=0}).color([{apply:"darken",params:[15]}]).getBuffer(Jimp.MIME_PNG,function(e,n){return t({result:new Blob([n],{type:Jimp.MIME_PNG})})})}).catch(function(e){return t({error:e.toString()})})},rotate:function(e,t,n){Jimp.read(e).then(function(e){return e.rotate(t).getBuffer(Jimp.MIME_PNG,function(e,t){return n({result:new Blob([t],{type:Jimp.MIME_PNG})})})}).catch(function(e){return n({error:e.toString()})})}},[o]),t=function(t){return function(){var n,o,a,s;return a=arguments[0],n=2<=arguments.length?r.call(arguments,1):[],o=e.defer(),s=new FileReader,s.addEventListener("loadend",function(){return i[t].apply(i,[s.result].concat(r.call(n))).then(function(e){return e.error?o.reject(e.error):o.resolve(e.result)})}),s.readAsArrayBuffer(a),o.promise}},{enhance:t("enhance"),crop:t("crop"),rotate:t("rotate")}}])},function(e,t,n){(function(e){ng.service("ABTestService",["SettingsFactory","EventAPI","$q",function(t,n,r){return this.get_random=function(e,n){var r;return null==n&&(n=10),r=0,null!=t.get(e)?(r=t.get(e),r%=n):(r=this.random_number()%n,t.set(e,r,!0)),r},this.has_no_org_bias=function(){return this.org_bias().then(function(e){if(e===!0)return r.reject()})},this.org_bias=e.once(function(){return n.has_org_bias().$promise.then(function(e){return null!=e?e.has_org_bias:void 0})}),this.random_number=function(){var e,t;return null!=(null!=(t=window.crypto)?t.getRandomValues:void 0)&&(e=new Uint32Array(1),window.crypto.getRandomValues(e),null!=e[0])?e[0]:1e6*Math.random()},null}])}).call(t,n(2))},function(e,t,n){(function(e){ng.service("AnnotationColors",["SettingsFactory","$rootScope",function(t,n){return this.default_colors=["#F1FF00","#00FF36","#FF009C","#FF0000","#00F0FF","#D800FF","#FFC800","#ffffff","#000000"],this.colors=function(){return t.get("annotation_colors",this.default_colors)},this.set_colors=function(e){return t.set("annotation_colors",e,!0),n.$broadcast("annotation_colors_updated")},this.font_sizes=e.memoize(function(){return["8px","10px","12px","14px","16px","18px","20px","24px","28px","32px","36px","46px","50px","55px","60px","70px","80px","90px","100px","110px","120px","130px","140px","160px","180px"]}),this.stroke_sizes=e.memoize(function(){return["0.1px","0.25px","0.5px","1px","2px","4px","6px","8px","10px","12px"]}),this.shape_sizes=e.memoize(function(){return["fill","0.1px","0.25px","0.5px","1px","2px","4px","6px","8px","10px","12px"]}),this.opacity_values=e.memoize(function(){return[.1,.2,.3,.4,.5,.6,.8,.9,1]}),this.all_colors=["#ffffff","#e2e2e2","#c6c6c6","#aaaaaa","#8d8d8d","#717171","#555555","#383838","#1c1c1c","#000000","#a8f1ff","#aedbff","#bcb8ff","#e0a6ff","#ffb4de","#ffbcbc","#ffd1b4","#ffeeaa","#ffff9a","#e4f9c1","#63e5ff","#6ebeff","#877fff","#c661ff","#ff79c2","#ff8888","#ffac79","#ffe067","#ffff49","#cef28f","#2bd5ff","#3aa1ff","#5a51ff","#ab29ff","#ff48a6","#ff5b5b","#ff8a47","#ffce2f","#fffd07","#b6e565","#00c1f7","#1285ff","#362cff","#9000ff","#f3228a","#ff3737","#ff6c20","#ffba04","#fff200","#9dd241","#00a8e0","#006af5","#1b11ff","#7400f4","#d7066f","#ff1b1b","#ff5103","#eea300","#ffdc00","#83b925","#008cc1","#004fcf","#0800da","#5800cb","#b10053","#e90808","#f43900","#d08800","#d6b700","#689a10","#00668c","#00369b","#000094","#3a0087","#800037","#ac0000","#c42500","#9f6700","#ab9200","#4c7602"],this.shapes=["rectangle","line","ellipse"],this.line_styles=["normal","dash"],this.marker_styles=["arrow-start","arrow-end"],this.highlighter_submodes=["normal","shape"],this.highlighter_names={normal:"Text",shape:"Overlay"},this.dash_array=function(e){switch(e){case"normal":return;case"dash":return"15, 8"}},null}])}).call(t,n(2))},function(e,t,n){(function(e){ng.factory("AnnotationState",["SettingsFactory","AnnotationColors",function(t,n){var r,i;return i=function(e,n){var r;return r=t.get(e,n),/^\d+px$/.test(r)?r:n},r={annotation_mode:null,selection_submode:null,highlight_submode:null,comment_submode:null,annotation_color_value:{highlight:t.get("annotation_color_highlight_value",n.colors()[0]),strikethrough:t.get("annotation_color_strikethrough_value",n.colors()[0]),underline:t.get("annotation_color_underline_value",n.colors()[0]),comment:t.get("annotation_color_comment_value",n.colors()[0]),text:t.get("annotation_color_text_value",n.colors()[8]),equation:t.get("annotation_color_text_value",n.colors()[8]),drawing:t.get("annotation_color_drawing_value",n.colors()[8]),shape:t.get("annotation_color_shape_value",n.colors()[8])},text_font_size:i("text_font_size","12px"),drawing_stroke_size:i("drawing_stroke_size","1px"),shape_stroke_size:i("shape_stroke_size","1px"),drawing_shape:t.get("drawing_shape","rectangle"),opacity:t.get("opacity",1),extra_annotation_params:null,pan_with_touch:!1,current_annotation_color:function(){return this.annotation_color_value[this.annotation_mode]},set_annotation_color_value:function(e,n){return this.annotation_color_value[e]=n,t.set("annotation_color_"+e+"_value",n)},get_recent_colors:function(e){var r,i;return i=this,r=n.colors(),t.get("annotation_recent_colors_"+e,[i.annotation_color_value[e],r[1],r[2]])},set_recent_colors:function(e,n){var r,i;return i=this.get_recent_colors(e),r=i.indexOf(n),r===-1&&(i.unshift(n),i.pop()),t.set("annotation_recent_colors_"+e,i)},save:function(e,n){return t.set(e,n)},set_annotation_mode:function(n,r){return null==r&&(r=!0),this.annotation_mode=n,this.extra_annotation_params=null,r&&t.set("annotation_mode",n),e(document.body).removeClass(function(e,t){return(t.match(/annotation-mode-\S+/)||[]).join(" ")}).addClass("annotation-mode-"+n)},is_drawing_mode:function(){switch(this.annotation_mode){case"drawing":return!0;default:return!1}},is_shape_mode:function(){switch(this.annotation_mode){case"shape":case"eraser":return!0;case"highlight":return"shape"===this.highlight_submode;default:return!1}},is_annotation_selection_mode:function(){return"normal"===this.annotation_mode&&"select"===this.selection_submode},should_mouse_passthrough_annotations:function(){switch(this.annotation_mode){case"tts":return!0;case"normal":return"dictionary"===this.selection_submode;default:return!1}}},r.set_annotation_mode(t.get("annotation_mode","normal")),r.selection_submode=t.get("selection_submode","normal"),"select"===r.selection_submode&&(r.selection_submode="normal"),r.highlight_submode=t.get("highlight_submode","normal"),r.comment_submode=t.get("comment_submode","normal"),r}])}).call(t,n(1))},function(e,t,n){(function(e){ng.service("AppendAnnotation",["AnnotationState","Comment",function(t,n){return this.calculateSizeBounds=function(e,n,r){var i,o,a,s,l,c;return c=notable.restore_scale(e.width),l=notable.restore_scale(e.height),s=Math.min(n.width,r.width)/2,a=Math.min(n.height,r.height)/2,c>s&&(l*=s/c,c=s),l>a&&(c*=a/l,l=a),null==(i=t.extra_annotation_params).width&&(i.width=notable.reset_scale(c)),null==(o=t.extra_annotation_params).height&&(o.height=notable.reset_scale(l)),{width:c,height:l}},this.calculatePositionBounds=function(e,n){var r,i;if(r=e.width-t.extra_annotation_params.width,i=e.height-t.extra_annotation_params.height,n.x<0&&(n.x=0),n.y<0&&(n.y=0),n.x>r&&(n.x=r),n.y>i)return n.y=i},this.append=function(r,i,o){var a;switch(a={user_action:"click",x:r.left,y:r.top,page_no:i,color:t.current_annotation_color()},t.annotation_mode){case"image":case"droppingImage":this.calculatePositionBounds(o,a),e.assign(a,{width:t.extra_annotation_params.width,height:t.extra_annotation_params.height,annotation_type:"Image",referring_to:{rotation:-PDFViewerApplication.pageRotation},attachment_blob:t.extra_annotation_params.autograph.blob,attachment_url:t.extra_annotation_params.autograph.autograph_image_url});break;case"autograph":e.assign(a,{width:t.extra_annotation_params.width,height:t.extra_annotation_params.height,extra_params:t.extra_annotation_params,referring_to:{rotation:-PDFViewerApplication.pageRotation}});break;case"text":switch(PDFViewerApplication.pageRotation){case 0:a.y-=parseInt(t.text_font_size)/2+3;break;case 90:a.x-=parseInt(t.text_font_size)/2+3;break;case 180:a.y+=parseInt(t.text_font_size)/2+3;break;case 270:a.x+=parseInt(t.text_font_size)/2+3}a.font_size=t.text_font_size,a.referring_to={rotation:-PDFViewerApplication.pageRotation};break;case"equation":a.font_size=t.text_font_size,a.referring_to={rotation:-PDFViewerApplication.pageRotation};break;case"comment":switch(t.comment_submode){case"video":a.annotation_type="Video";break;case"audio":a.annotation_type="Audio";break;case"desktop":a.annotation_type="Desktop"}}return n.create_comment(a)},null}])}).call(t,n(2))},function(e,t){ng.service("Authentication",["UserAPI","$http","$rootScope","UserLocal","Pusher","$q","LicensesHelper",function(e,t,n,r,i,o,a){var s,l,c,u,d,f;return f=null,l={},n.$on("pusher:connected",function(){return c(f)}),d=function(){return!i.instance||"connected"===i.instance.connection.state},c=function(t){return d()&&t?null!=l[t.authentication_token]?o.when(l[t.authentication_token]):e.show({id:t.id}).$promise.then(function(e){return t=r.update_merge(e),l[t.authentication_token]=!0,a.update_license(t),n.$broadcast("user_authentication_success",t),n.$broadcast("refresh_user")},function(e){if(401===(null!=e?e.status:void 0))return l[t.authentication_token]=!1,u(),n.$broadcast("user_authentication_failed")}):o.reject()},s=function(e){return e?(t.defaults.headers.common["USER-TOKEN"]=e.authentication_token,t.defaults.headers.common["USER-ID"]=e.id,i.instance.config.auth={headers:{"USER-TOKEN":e.authentication_token,"USER-ID":e.id}},c(e)):o.reject()},u=function(){return t.defaults.headers.common["USER-TOKEN"]="",t.defaults.headers.common["USER-ID"]="",i.instance.config.auth={headers:{"USER-TOKEN":"","USER-ID":""}}},this.ensure_authenticated=function(e){return e?f=e:e=f,s(e)},this.deauthenticate=function(){return u()},null}]),ng.factory("timeoutHttpIntercept",["$rootScope","$q",function(e,t){return{request:function(e){return e.timeout=3e4,e}}}]),ng.config(["$httpProvider",function(e){return e.defaults.headers.common["USER-TOKEN"]="",e.defaults.headers.common["USER-ID"]="",e.interceptors.push("timeoutHttpIntercept")}])},function(e,t){ng.service("AuthorizeManager",["$rootScope","$q","User","UserAPI","Authentication",function(e,t,n,r,i){var o;return this.signup=function(r,a){var s,l,c;return l=t.defer(),r.name&&r.email&&r.password?(a?(i.ensure_authenticated(a),a.name=r.name,a.email=r.email,a.password=r.password,c=n.update(a),c.then(function(e){return l.resolve(e)},function(e){return l.reject(e)})):(s=n.create(r),s.then(function(t){return e.$broadcast("authenticated_user"),l.resolve(t)},function(e){return l.reject(e)})),l.promise):(l.reject([o(r,["name","email","password"])]),l.promise)},this.login=function(r){var i,a;return i=t.defer(),r.email&&r.password?(a=n.login(r),a.then(function(t){return e.$broadcast("authenticated_user"),i.resolve(t)},function(e){return i.reject(e)}),i.promise):(i.reject([o(r,["email","password"])]),i.promise)},this.process_forgot_password=function(e){var n,i;return n=t.defer(),e?(i=r.send_forgot_password({user:{email:e}},function(){return n.resolve()},function(e){return n.reject(e.data.errors)}),n.promise):(n.reject([o({email:e},["email"])]),n.promise)},o=function(e,t){var n,r,i,o,a,s,l,c,u,d;for(r=[],o=0,s=t.length;o<s;o++)u=t[o],e[u]||r.push(u);if(0===r.length)return"valid";for(d=function(e){switch(e){case 0:return"";case r.length-1:return" and";default:return","}},c="",i=a=0,l=r.length;a<l;i=++a)n=r[i],c+=d(i)+" "+n;return"Please fill in your"+c},this.create_guest=function(){var r,i;return i=t.defer(),r=n.create({}),r.then(function(t){return e.$broadcast("authenticated_user"),i.resolve(t)},function(e){return i.reject(e)}),i.promise},null}])},function(e,t){ng.service("Colorize",function(){var e;return e=["28a144","2159d6","d62408","ffcf00","21aa29","ffbc07","ff9e1c","f6502f","ed3a40","a32b93","b33859","a13397","524993","0f69b5","0080ae","0d59ab","007cbf","00b4d6","00a686","007b63"],this.by_index=function(t){var n;return n=t%e.length,e[n]},null})},function(e,t,n){(function(e,t){ng.service("CommentsHelper",["PageState",function(n){var r,i,o;return this.filter_highlights=function(t){return e.filter(t,this.is_highlight.bind(this))},this.filter_comments=function(t){return e.filter(t,function(e){return"Comment"===e.annotation_type||"Audio"===e.annotation_type||"Video"===e.annotation_type||"Desktop"===e.annotation_type})},this.filter_texts=function(t){return e.filter(t,{annotation_type:"Text"})},this.filter_equations=function(t){return e.filter(t,{annotation_type:"Equation"})},this.filter_autographs=function(t){return e.filter(t,{annotation_type:"Autograph"})},this.filter_drawings=function(t){return e(t).filter({annotation_type:"Drawing"}).sortBy("created_at").value()},this.filter_form_fields=function(t){return e.filter(t,{annotation_type:"FormField"})},this.filter_images=function(t){return e.filter(t,{annotation_type:"Image"})},this.filter_out_collaborators=function(t){var r,i;return r=null!=(i=n.document)?i.collaborating_users:void 0,r?e.filter(t,function(e){var t,n,i;for(t=0,n=r.length;t<n;t++)if(i=r[t],i.filtered_out===!0&&e.author.id===i.id)return!1;return!0}):t},this.annotation_page_count=function(e){var t,n,r,i;for(n={},r=0,i=e.length;r<i;r++)t=e[r],n[t.referring_to.page_no]?n[t.referring_to.page_no]+=1:n[t.referring_to.page_no]=1;return n},this.is_type_highlight=function(e){var t;return"highlight"===(t=angular.lowercase(e))||"strikethrough"===t||"underline"===t},this.is_highlight=function(e){return this.is_type_highlight(null!=e?e.annotation_type:void 0)},this.is_comment=function(e){return"Comment"===(null!=e?e.annotation_type:void 0)},this.is_text=function(e){return"Text"===(null!=e?e.annotation_type:void 0)},this.is_autograph=function(e){return"Autograph"===(null!=e?e.annotation_type:void 0)},this.is_drawing=function(e){return"Drawing"===(null!=e?e.annotation_type:void 0)},this.is_form_field=function(e){return"FormField"===(null!=e?e.annotation_type:void 0)},this.is_audio=function(e){return"Audio"===e.annotation_type},this.is_image=function(e){return"Image"===e.annotation_type},this.is_immediately_created=function(e){return this.is_drawing(e)||this.is_highlight(e)||this.is_autograph(e)||this.is_form_field(e)||this.is_image(e)},r={Highlight:{can_copy:!0,can_move:!1,has_color:!0,has_size:!1,has_opacity:!1},Text:{can_copy:!1,can_move:!0,has_color:!0,has_size:!0,has_fill_color:!0,has_rotate:!0,has_opacity:!1},Autograph:{can_copy:!1,can_move:!0,has_color:!1,has_size:!1,has_rotate:!0,has_opacity:!1},Drawing:{can_copy:!1,can_move:!0,has_color:!0,has_size:!0,has_opacity:!0},Image:{can_copy:!1,can_move:!0,has_color:!1,has_size:!1,has_rotate:!0,has_opacity:!1},Equation:{can_copy:!1,can_move:!0,has_color:!0,has_size:!0,has_fill_color:!0,has_rotate:!0,has_opacity:!1}},i=function(e){return function(t){var n;if(null!=t)return n=r[t.annotation_type],null!=n?n:e.is_highlight(t)?r.Highlight:void 0}}(this),this.can_copy=function(e){var t;return null!=(t=i(e))?t.can_copy:void 0},this.can_move=function(e){var t;return(null!=(t=i(e))?t.can_move:void 0)&&!("Autograph"===(null!=e?e.annotation_type:void 0)&&e.embedded)},this.has_color=function(e){var t;return null!=(t=i(e))?t.has_color:void 0},this.has_size=function(e){var t;return null!=(t=i(e))?t.has_size:void 0},this.has_fill_color=function(e){var t;return null!=(t=i(e))?t.has_fill_color:void 0},this.has_opacity=function(e){var t;return null!=(t=i(e))?t.has_opacity:void 0},this.has_rotate=function(e){
var t;return(null!=(t=i(e))?t.has_rotate:void 0)&&!("Autograph"===(null!=e?e.annotation_type:void 0)&&e.embedded)},this.is_empty=function(e){return"string"==typeof e&&(e=t("<div>").html(e)),""===t.trim(t(e).text())},this.can_update=function(e,t){return e!==t&&null!=e&&""!==e},this.can_update_isnt_empty=function(e,t,n){return"Drawing"===n?this.can_update(e,t):this.can_update(e,t)&&!this.is_empty(e)},this.comment_properties=function(e){var t;return t={document_id:n.document.id,document_name:n.document.name,comment_id:e.id,annotation_type:e.annotation_type,user_action:e.referring_to.user_action,color:e.referring_to.color},this.is_comment(e)&&angular.extend(t,{comment_type:null!=e.parent_comment_id?"Reply":"Comment"}),t},this.server_to_local_comment=function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p,g;null==n&&(n=[]),d=t.referring_to;for(u in d)g=d[u],t.referring_to.hasOwnProperty(u)&&["page_no","x","y"].indexOf(u)>-1&&(t.referring_to[u]=parseFloat(g));if(null==t.author)for(i=0,s=n.length;i<s;i++)r=n[i],t.author_id===r.id&&(t.author=r);if(null==t.author)for(f=e.collaborating_users,o=0,l=f.length;o<l;o++)r=f[o],t.author_id===r.id&&(t.author=r);if(t.replies)for(h=t.replies,a=0,c=h.length;a<c;a++)p=h[a],this.server_to_local_comment(e,p,n);return t},o=["id","annotation_type","content","referring_to","author"],this.validate_comment=function(t){return null!=t&&e.every(o,e.partial(e.has,t))},this.remove_deleted_replies=function(e){var t,n,r,i;for(t=null!=(n=e.replies)?n.length:void 0,i=[];t-- >0;)r=e.replies[t],r.deleted_at?i.push(e.replies.splice(t,1)):i.push(this.remove_deleted_replies(r));return i},this.get_root_parent=function(e,t){var n;for(n=e;null!=n.parent_comment_id;)n=t[n.parent_comment_id];return n},null}])}).call(t,n(2),n(1))},function(e,t){ng.service("CommentsRealtimeService",["Pusher","PageState","NotifyService","CommentsHelper","Comment","CommentLocal","$timeout",function(e,t,n,r,i,o,a){var s,l,c;return c=null,this.init_realtime=function(n){return this.stop_realtime(),c=e.channel(n+"-"+t.document.channel),null!=c&&c.bind("comment-upsert",l),null!=c?c.bind("comment-destroy",s):void 0},this.stop_realtime=function(){return null!=c&&c.unbind("comment-upsert",l),null!=c?c.unbind("comment-destroy",s):void 0},l=function(e){return e.comment=angular.fromJson(e.comment),n.comment_upsert(e),i.show(t.document.document_identifier,e.comment.id).catch(function(t){return e.comment}).then(function(n){return r.server_to_local_comment(t.document,n),null!=n.deleted_at?(o.destroy(e.comment),i.remove_comment(e.comment)):i.add_comment(n)})},s=function(e){return e.comment=angular.fromJson(e.comment),a(function(){return n.comment_destroy(e),o.destroy(e.comment),i.remove_comment(e.comment)})},null}])},function(e,t){ng.service("ConvertFile",["$q","$timeout","KamiUploadService","PDFProcessingAPI","PageState",function(e,t,n,r,i){return this.convert=function(o){var a,s,l;return l=null,a=!1,s=e.defer(),e.when(PDFTransport.getData()).then(function(e){var c;return c=PDFJS.createBlob(e,"application/octet-stream"),l=n.upload(o,c),l.then(function(e){return s.notify({processing:!0}),r.create({job_type:"convert",documents:{file:{file_url:e.file_url}},output_format:"pdf",output_documents:[{destination:{service:"kami",kami_document_identifier:i.next_load_params.document_identifier}}]}).$promise.then(function(e){var n;return(n=function(){if(!a)return r.show({id:e.id}).$promise.then(function(r){switch(r.status){case"done":return s.resolve(r.output_documents[0].destination.kami_document_identifier);case"error":return s.reject({type:"conversion",status:status,error:r.error_type,error_message:r.user_message,conversion_job_id:e.id});default:if(a)return;return t(n,2e3)}},function(){return t(n,2e3)})})()},function(e){return s.reject({type:"conversion",status:status,error:error,conversion_job_id:e.id})})},function(e,t){return s.reject({type:"upload",status:e,error:t})},function(e){return s.notify(e)})}),s.promise.abort=function(){return a=!0,"undefined"!=typeof uploadPromise&&null!==uploadPromise?uploadPromise.abort():void 0},s.promise},this.get_text=function(){return e.when(PDFTransport.getData()).then(function(e){return new TextDecoder("utf-8").decode(e)})},this.download=function(){var e;return e=new DownloadManager,PDFTransport.getData().then(function(t){var n,r;return r=PDFViewerApplication.url.split("#")[0].split("/").pop(),n=PDFJS.createBlob(t),e.downloadData(n,r)})},null}])},function(e,t){ng.service("Dictionary",["$rootScope","LicensesHelper","PremiumRequiredDialog",function(e,t,n){var r,i,o,a,s;return i="dictionary",r="define_word",a="translate_text",o=e.$new(!0),s=function(){var e;return e=t.has_feature(i),e||n.open(i),e},this.display_definition=function(e){s()&&o.$broadcast(r,e)},this.display_translation=function(e){s()&&o.$broadcast(a,e)},this.watch_definition_requests=function(e){return o.$on(r,function(t,n){return e(n)})},this.watch_translate_requests=function(e){return o.$on(a,function(t,n){return e(n)})},null}])},function(e,t,n){(function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};ng.service("DirectiveHelper",["$timeout","$rootScope",function(r,i){var o,a;return this.text_layer_is_loaded=function(t){return e("#textLayer"+t).data("loaded")===!0&&e("#textLayer"+t).length},this.page_no=function(e){return e.closest(".page").data("pageNo")},this.rotate_point=function(e,t,n){var r,i,o;switch(o=n.data("rotation")){case 90:e=n.height()-e,r=[t,e],e=r[0],t=r[1];break;case-90:t=n.width()-t,i=[t,e],e=i[0],t=i[1];break;case 180:e=n.width()-e,t=n.height()-t}return[e,t]},this.valid_svg_attributes=["setup-polyline","fill","stroke","stroke-width","stroke-opacity","fill-opacity","stroke-linejoin","stroke-linecap","fill-rule","points","transform","dx","dy","cx","cy","rx","ry","x","y","width","height","x1","x2","y1","y2","class","stroke-dasharray","marker-start","marker-end"],this.valid_svg_attribute=function(e){return n.call(this.valid_svg_attributes,e)>=0},this.event_relative_to_page=function(e,t){return e.is(".page")||(e=e.closest(".page")),this.event_relative_to_container(e,t)},this.event_relative_to_container=function(e,t){var n;return n=e.offset(),{x:t.pageX-n.left,y:t.pageY-n.top}},o=null,a=!1,this.reject_input=function(e){return!!a||("insert"===o&&"edit"!==e?(notable.apply(i,function(){return i.$broadcast("clear")}),o="clear",a=!0,setTimeout(function(){return a=!1},200),!0):(o=t.includes(["click","select","edit"],e)?"insert":"clear",!1))},this.pos_relative_to_page=function(t,n){var r,i;return r=notable.get_absolute_pos_jquery(e("#pageContainer"+n)),i=notable.get_absolute_pos_jquery(t),{left:notable.reset_scale(i.left-r.left),top:notable.reset_scale(i.top-r.top)}},this.pos_relative_to_container=function(e,t){var n;return n=e.offset(),{left:notable.reset_scale(n.left-t.left),top:notable.reset_scale(n.top-t.top)}},this.coalesce_worker=operative({coalesce:function(e,t){var n,r,i,o,a,s,l,c,u,d;for(n=[],r=null,s=function(e){return!/\S/.test(e)},a=function(e,t,n){return null==n&&(n=5),e.x+e.width+n>=t.x},u=function(e,t,n){return null==n&&(n=1),n>=Math.abs(c.y-i.y)},d=function(){return r?(n.push(r),r=null):c?n.push(c):void 0},o=0,l=e.length;o<l;o++)i=e[o],c&&u(c,i,i.height/4)&&(a(c,i)||s(c))?(r||(r=c),r.width+=i.width,r.text+=i.text):d(),c=i;return d(),t(n)}}),this.get_skew_ratio=function(e){var t,n;return t=this.page_no(e),n=PDFViewerApplication.pdfViewer.getPageView(t-1),n?n.skewRatio:1},null}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.service("DocumentManager",["$q","Document","Pusher","DocumentAPI","$timeout","PageState","Mixpanel","LoadingErrorDialog","LoadingDialog","URLParams","PDFProcessingAPI","ExtensionHook",function(t,n,r,i,o,a,s,l,c,u,d,f){var h,p,g;this.export_pdf=function(e,n){var r,a;return a=t.defer(),r=!1,PDFView.pdfDocument.transport.getPassword().then(function(t){var s;return i.export_pdf({id:e.id,document_identifier:e.document_identifier,file_name:null!=(s=n.file_name)?s:e.name,google_user_id:n.google_user_id,inline_comments:n.inline_comments,password:t,page_rotation:PDFViewerApplication.pageRotation,destination:n.destination,parent_id:n.parent_id,pages:n.pages}).$promise.then(function(e){var t;return a.notify(e),(t=function(){if(!r)return d.show({id:e.id}).$promise.then(function(e){switch(e.status){case"done":return a.resolve(e);case"error":return a.reject(e);default:if(r)return;return o(t,2e3)}},function(){return o(t,2e3)})})()},function(e){return a.reject(e)})}),a.promise.abort=function(){return r=!0},a.promise},g=function(n,r,i){var o,a,s,l,c;return o=4,c=PDFViewerApplication.pdfViewer.getPageView(0).pdfPage.getViewport(o),l=c.height>c.width,a=t.defer(),s=PDFJS.getDocument(r),s.onPassword=function(e){return PDFViewerApplication.pdfDocument.transport.getPassword().then(function(t){return e(t)})},s.onProgress=function(e){var t,n;return t=e.loaded,n=e.total,a.notify({progress:t,total:n+1})},s.then(function(t){var r;return Promise.all(e.map(function(){r=[];for(var e=1,n=t.numPages;1<=n?e<=n:e>=n;1<=n?e++:e--)r.push(e);return r}.apply(this),function(e){var r,a;return r=document.createElement("canvas"),a=document.createElement("div"),a.appendChild(r),n.appendChild(a),t.getPage(e).then(function(t){var n,s,u,d,f,h,p,g,m,v;return n=1,1===e&&(h=document.createElement("style"),h.textContent="@supports ((size:A4) and (size:1pt 1pt)) { @page { size: "+c.width+"pt "+(c.height+1)+"pt; } #printContainer { height: 100% } }",i.body.appendChild(h)),v=t.getViewport(o),p=v.width,f=v.height,d=f>p,l!==d?(m=(t.rotate+90)%360,g=[f,p],p=g[0],f=g[1]):m=t.rotate,v=t.getViewport(o,m),u=r.getContext("2d"),r.width=Math.floor(p)*n,r.height=Math.floor(f)*n,r.style.width=100*n+"%",r.style.height=100*n+"%",s="scale("+1/n+", "+1/n+")",PDFJS.CustomStyle.setProp("transform",r,s),PDFJS.CustomStyle.setProp("transformOrigin",r,"0% 0%"),a.style.width="100%",a.style.height="100%",u.save(),u.fillStyle="rgb(255, 255, 255)",u.fillRect(0,0,r.width,r.height),u.restore(),u.scale(n,n),t.render({canvasContext:u,viewport:v,intent:"print"})})})).then(function(){return a.resolve()}).catch(function(e){return a.reject(e)})}),a.promise},h=function(e){var n,r,i,a;return i=t.defer(),a=document.createElement("iframe"),n=!1,r=function(){return document.body.removeChild(a)},a.onload=function(){var t;if(!n)return t=document.createElement("div"),t.id="printContainer",g(t,e,this.contentDocument).then(function(e){return function(){if(!n)return i.notify({100:100,100:100}),e.contentDocument.body.appendChild(t),e.contentWindow.focus(),e.contentWindow.print(),o(function(){return r(),i.resolve()},100)}}(this),function(e){return i.reject(e)},function(e){if(!n)return i.notify(e)})},a.style.visibility="hidden",a.style.position="fixed",a.style.right="0",a.style.bottom="0",a.src="print.html",document.body.appendChild(a),i.promise.abort=function(){var e;return e=!0,r(),i.reject("aborted")},i.promise},this.print_pdf=function(e,n){var r;return r=t.defer(),n?h(e).then(r.resolve,r.reject,r.notify):PDFViewerApplication.printWithPDFium(function(){return e},function(e){return r.notify({progress:e,total:100})}).then(r.resolve,function(){return h(e).then(r.resolve,r.reject,r.notify)}),r.promise},this.update_document_settings=function(){return n.update(e.pick(a.document,["privacy","link_sharing","id","document_identifier","sharing_permissions","notification_settings"])).then(function(t){return e.assign(a.document,e.pick(t,["privacy","link_sharing","file_url","share_url","embed_url","sharing_permissions","notification_settings"])),s.track("Update Document Settings",angular.extend({privacy:a.document.privacy,link_sharing:a.document.link_sharing},s.document_properties))},function(e){return alert("We could not update the document settings. Please check your internet connection."),s.track("Update Document Settings Failed",s.document_properties)})},this.update_document_name=function(t){n.update({document_identifier:a.document.document_identifier,name:t,force_set_name:!0}).then(function(t){return e.assign(a.document,e.pick(t,["name"])),s.track("Update Document Name",s.document_properties)},function(e){return alert("We could not update the document name. Please check your internet connection."),s.track("Update Document Name Failed",s.document_properties)}),a.filename=t,a.document_name()},p=function(e,n){return t.when(PDFViewerApplication.notable_open(e,n)).catch(function(r){return"Worker was destroyed"===(null!=r?r.message:void 0)?t.resolve("Loading Cancelled"):0!==e.lastIndexOf("https://localfile.kamihq.com/",0)&&"InvalidPDFException"!==r.name?(s.track_api("CORS Loading Fallback Attempt",{url:e,args:n}),f.is_installed?f.open_url(e):t.when(PDFViewerApplication.notable_open("https://kamicors.kamihq.com/"+e,n))):t.reject(r)})},this.open_file=function(r){return function(i,s){var d;return null==s&&(s={}),d=null,a.change_state("loading"),s={document_identifier:i,source:u.source},n.show(s).then(function(e){return p("https://localfile.kamihq.com/"+encodeURIComponent(i)).catch(function(n){var a;return null!=e.file_url||null!=e.source_url?(null!=d&&d.close(),p(null!=(a=e.file_url)?a:e.source_url)):"processing"!==e.file_status?t.reject({status:404}):(null==d&&(d=c.open("File is processing, please wait.")),void o(function(){return r.open_file(i,s)},2e3))})}).catch(function(n){var r,o;return r=function(n){return a.change_state("none"),a.next_load_params={},403===(null!=n?n.status:void 0)||404===(null!=n?n.status:void 0)?notable.is_embed?l.open("embed_error",s):"googledrive"===s.source?l.open("google_drive_network_error",s):l.open("share_error",s):l.open("pdfjs",e.assign({},n,s)),t.reject(n)},401===(o=null!=n?n.status:void 0)||403===o||404===o?r(n):p("https://localfile.kamihq.com/"+encodeURIComponent(i)).catch(r)})}}(this),this.open_url=function(n,r,o){var s;return null==o&&(o={}),a.change_state("loading"),s=null!=o.document_cache_key?(a.add_next_load_params({document_cache_key:o.document_cache_key}),p("https://localfile.kamihq.com/"+encodeURIComponent(o.document_cache_key))):t.reject(),s.catch(function(s){return p(n,r).catch(function(r){return a.change_state("none"),r instanceof PDFJS.InvalidPDFException?o.from_drive?i.show({document_identifier:o.fileId}).$promise.then(function(e){return a.add_next_load_params({source:"conversion"}),e.file_url?p(e.file_url):t.reject()}).catch(function(){return window.invalid_pdf_error(r),t.reject(r)}):(window.invalid_pdf_error(r),t.reject(r)):(l.open("pdfjs",e.assign({url:n,extra_args:o},r)),t.reject(r))})})}}])}).call(t,n(2))},function(e,t){ng.service("DocumentRealtimeService",["Pusher","PageState","$timeout",function(e,t,n){var r,i;return i=null,this.init_realtime=function(n){return this.stop_realtime(),i=e.channel(t.document.channel),null!=i?i.bind("document-upsert",r):void 0},this.stop_realtime=function(){return null!=i?i.unbind("document-upsert",r):void 0},r=function(e){return e.document=angular.fromJson(e.document),n(function(){return t.document.name=e.document.name,t.filename=e.document.name,t.document_name(),t.document.copy_type=e.document.copy_type})},null}])},function(e,t,n){(function(e){ng.service("DocumentUploader",["PageState","Mixpanel","KamiUploadService","GoogleDriveUploadService","$q","DocumentAPI","$timeout",function(t,n,r,i,o,a,s){var l,c,u;return this.upload=function(e,r){var i,o;return null==e&&(e="notable_sharing"),t.export_status="uploading",t.upload_percentage_text="Waiting for authorization",t.upload_percentage_value=0,i=null!=(o=null!=r?r.file_name:void 0)?o:t.document_name(),l(t.document.document_identifier,i,e,r,{progress:function(e){return e.processing?(t.upload_percentage_text="Processing...",t.upload_percentage_value=100):(t.upload_percentage_value=Math.round(e.loaded/e.total*100),t.upload_percentage_text="Uploading "+t.upload_percentage_value+"%")},complete:function(r){return n.track("File Uploaded",angular.extend({success:!0,service:e},n.document_properties)),t.export_status="uploaded",t.upload_percentage_text="Uploaded",t.upload_percentage_value=100,"google_drive"!==e&&(t.document.file_url=r.file_url,t.document.share_url=r.share_url,t.document.embed_url=r.embed_url),r},error:function(r){return n.track("File Uploaded",angular.extend({success:!1,status:r.status,error:r.error,service:e},n.document_properties)),t.upload_percentage_text="0%",t.upload_percentage_value=0,t.export_status="upload_error",t.export_error_message="domainPolicy"===r.error?'Sorry, we cannot upload this file because your administrator has disabled 3rd party Google Drive apps. Please ask your administrator to allow Google Drive apps by opening the Google Apps control panel and going to Apps > Google Apps > Settings for Drive and making sure "Allow users to install Google Drive apps" in the "Data Access" menu is enabled.':"Please check your internet connection and try again."}})},l=function(e,t,n,r,i){var a,s;return s=null,a=o.when(PDFView.pdfDocument.getData()).then(function(a){var l,d;return l=PDFJS.createBlob(a,"application/pdf"),d="google_drive"===n?c:u,s=d(e,t,l,r),s.then(i.complete,function(e){return i.error(e),o.reject()},i.progress)}),a.abort=function(){return null!=s?s.abort():void 0},a},u=function(t,n,i){var l,c,u;return c=o.defer(),l=!1,u=r.upload(n,i),u.then(function(n){var r;return r=n.file_key,c.notify({processing:!0}),a.notify_upload({document_identifier:t,key:r}).$promise.then(function(){var n;return(n=function(){if(!l)return a.update({document_identifier:t}).$promise.then(function(e){return null!==e.file_url?c.resolve(e):s(n,2e3)},function(t){return e.includes([404,401,403],null!=t?t.status:void 0)?c.reject(null!=t?t.status:void 0):s(n,2e3)})})()},function(){return c.reject(status,error)})},function(e,t){return c.reject(e,t)},function(e){return c.notify(e)}),c.promise.abort=function(){return l=!0,u.abort(),c.reject("aborted")},c.promise},c=function(e,t,n,r){return i.upload(t,n,r)},null}])}).call(t,n(2))},function(e,t,n){(function(e){var t;t=n(14),ng.service("ExtensionHook",["SettingsFactory","PageState","User","$rootScope","$q",function(n,r,i,o,a){var s,l,c,u,d,f,h,p,g,m;this.is_installed=!1,this.extension_id=null,u={},this.open_url=function(e){return function(n){var i,o;if(null!=e.extension_id)return r.change_state("loading"),o=t.v4(),chrome.runtime.sendMessage(e.extension_id,{id:o,"load-pdf-url":n}),i=a.defer(),u[o]=i,i}}(this),h=function(e,t,n){return n.onmessage=function(n){return f(e,t,n.data)},n.postMessage("ready")},f=function(e,t,n){var i;return i=function(){return r.add_next_load_params({filename:PDFJS.getFilenameFromUrl(t),filesize:n.byteLength,source:"extension",source_url:t}),PDFViewerApplication.open(n),u[e].resolve(),u[e]=null},window.PDFJS_INITIALIZED?i():window.addEventListener("pdfjs-initialized",i,!1)},s=function(e,t,n){var r;return r=PDFViewerApplication.loadingBar,null!=r&&r.hide(),u[e].reject(n),u[e]=null},m=function(e,t,n){var r;if(r=PDFViewerApplication.loadingBar,null!=r)return r.show(),r.percent=n.loaded/n.total,r.loaded(n.loaded,n.total)},g=function(e){return function(){return o.$on("settings-updated",function(){if(null!=e.extension_id)return chrome.runtime.sendMessage(e.extension_id,{settings:{autoload:n.get("autoload",!0),fileSchemeRequestDisabled:n.get("fileSchemeRequestDisabled",!1)}})}),i.watch_current_user(function(t){if(null!=e.extension_id)return chrome.runtime.sendMessage(e.extension_id,{user:t})}),window.addEventListener("message",function(e){var t,n,r,i,o,a;if(t=e.data,"object"==typeof t)return r=t.id,a=t.url,"kami-extension-pdf-transfer"in t?(i=e.ports[0],h(r,a,i)):"kami-extension-file-load-progress"in t?(o=t.progress,m(r,a,o)):"kami-extension-file-load-error"in t?(n=t.error,s(r,a,n)):void 0})}}(this),p=["ecnphlgnajanjnkcmbpancdjoidceilk","lodjbngldcpejfnhmjkljfdinellpnji"];for(l=0,d=p.length;l<d&&(c=p[l],e.ajax({url:"chrome-extension://"+c+"/hello",async:!1,complete:function(e){return function(t){if(200===t.status)return e.is_installed=!0,e.extension_id=c,g()}}(this)}),!this.is_installed);l++);}])}).call(t,n(1))},function(e,t){ng.service("FeatureHelper",function(){var e,t;return e={basic:{name:"Basic"},standard:{name:"Standard"},premium:{name:"Pro"},pro:{name:"Pro"},work:{name:"Work"},education:{name:"Schools"},shape:{name:"Shape",video:"https://www.youtube.com/embed/AItZWeY5Sq0"},drawing:{name:"Drawing"},no_ads:{name:"No Ads"},google_auto_sync:{name:"Google Auto Save",message:"Upgrade your plan to automatically save your changes back to Google Drive"},tts:{name:"Text To Speech",video:"https://www.youtube.com/embed/oRmRniFXXx8"},dictionary:{name:"Dictionary",video:"https://www.youtube.com/embed/4kxFH9rHt5s"},equation:{name:"Equation",video:"https://www.youtube.com/embed/wsH11xNhY0E"},google_classroom_integration:{name:"Google Classroom Integration",video:"https://www.youtube.com/embed/PTJLe_CALWk"},autograph:{name:"Signature",video:"https://www.youtube.com/embed/wS_6jdv2KU0"},conversion:{name:"Conversion",message:"Upgrade your plan to enable support for Word, Powerpoint, Image files, and more."},image:{name:"Insert Image",video:"https://www.youtube.com/embed/SbFpZwGEAzw"},export:{name:"Advanced Export"},team_drive:{name:"Team Drive",message:"Team Drive support is available in Kami Education and Pro. To upgrade click below or contact your IT Administrator."},add_new_pages:{name:"Add Pages"},video_comment:{name:"Video Comment"},audio_comment:{name:"Audio Comment"},voice_typing:{name:"Voice Typing"},ocr:{name:"OCR",message:"OCR on the Free and Standard plans is limited to 15 page documents. Upgrade to run OCR on documents with more pages."}},t={name:"this tool"},this.get_feature=function(n){return e[n]||t}})},function(e,t,n){(function(e){var t;t=n(42),ng.factory("GoogleAuth",["$rootScope","localStorageService","$q","$http","$timeout","OAuthManager","Mixpanel","User","AuthorizationAPI","GoogleAuthorizationDialog","MixpanelHelper",function(n,r,i,o,a,s,l,c,u,d,f){var h,p,g,m,v,_,y,b;return y=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"].join(" "),g=function(t){var n;return n="authorize_if_needed"===t.reason&&!t.from_user_action&&!t.show_close,d.open(e.extend({status:"authorize",disableClose:n},t))},h=function(t){var n;return null==t&&(t={}),n=t.from_user_action&&!s.google(t.user_id).check_token()?p(t):s.google(t.user_id).get_tokeninfo().then(function(n){return t.user_id&&t.user_id!==n.user_id?i.reject():t.scope&&e.difference(t.scope.split(/\s+/),n.scope.split(/\s+/)).length?i.reject():t.skip_cache?i.reject():t.authuser?i.reject():s.google(t.user_id).get_auth_response()}).catch(function(n){return(null!=n?n.status:void 0)<=0?i.reject(e.extend(n,{error_source:"authorize_if_needed"})):notable.is_extension?p(e.assign({update_authorization:!1},t)):s.google(t.user_id).login(e.assign({immediate:!0},t))}).catch(function(n){return(null!=n?n.status:void 0)<=0?i.reject(e.extend(n,{error_source:"authorize_if_needed_2"})):g(e.extend({reason:"authorize_if_needed",error:n},t))})},m=function(e){return u.create({oauth_provider:"google",authorization_code:e.code,redirect_uri:e.redirect_uri}).$promise},b=function(n,r){var i;return i=h(e.assignIn({skip_cache:!0,update_authorization:!1},r)),i.then(function(e){var r;return c.login_oauth2({oauth_provider:"google",authorization_code:e.code,access_token:e.access_token,redirect_uri:null!=(r=e.redirect_uri)?r:t.settings.redirect_uri,migrate_authentication_token:null!=n?n.authentication_token:void 0})})},p=function(e){return null==e&&(e={}),e.scope?e.scope+=" "+["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"].join(" "):e.scope=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"].join(" "),s.google(e.user_id).login(e).then(function(t){return e.user_id?s.google(e.user_id).get_user().then(function(n){return n!==e.user_id?i.reject({code:"wrong_user",expected_user_id:e.user_id,authenticated_user_id:n}):t}):t}).then(function(o){var a;return null==(a=e.update_authorization)||a?c.show().then(function(e){var a;return e.email?i.reject():c.login_oauth2({oauth_provider:"google",authorization_code:o.code,access_token:o.access_token,redirect_uri:null!=(a=o.redirect_uri)?a:t.settings.redirect_uri,migrate_authentication_token:null!=e?e.authentication_token:void 0}).then(function(e){return e.new_user?f.track_signup(e,"Google"):f.track_login(e,"Google"),r.set("login_source","google"),n.$broadcast("authenticated_user")})}).catch(function(){if(o.code)return m(o)}).then(function(){return o}):o}).catch(function(e){return"cancelled"===(null!=e?e.code:void 0)?l.track("Google Authorize iFrame Closed",{error:e}):l.track("Google Authorize Rejected",{error:e}),i.reject(e)})},_=function(){var e;return e=t("google"),e.api("me")},v=function(e){return null==e&&(e={}),u.check({google_user_id:e.user_id,ensure_scopes:e.scope}).$promise.catch(function(e){if("undefined"!=typeof e.data.google_auth_failure)return g({user_id:e.data.google_auth_failure,scope:e.data.google_auth_failure_missing_scopes,message:"Kami needs permission to create the files for this assignment",reason:"ensure_serverside_auth",offline:!0})})},{authorize_with_dialog:g,authorize_if_needed:h,authorize_now:p,login:b,get_credentials:_,ensure_serverside_auth:v}}])}).call(t,n(2))},function(e,t){ng.service("GoogleClassroomCourseWorkService",["PageState","KamiClassroomAPI","$q","Sync","User","Pusher","OAuthManager","GoogleAuth","$rootScope","Mixpanel","ngDialog",function(e,t,n,r,i,o,a,s,l,c,u){var d,f;return f="https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.me",this.status={},this.fetch_coursework_info=function(){return this.status.state="authorizing",s.authorize_if_needed({scope:f,user_id:e.google_user_id,message:"Click to allow Kami to access your courses on Google Classroom"}).then(function(t){return function(r){var i;return t.status.state="fetching",i=a.google(e.google_user_id),n.all({course_work:i.get("https://classroom.googleapis.com/v1/courses/"+t.status.course_data.classroom_course_id+"/courseWork/"+t.status.course_data.classroom_course_work_id),student_submission:i.get("https://classroom.googleapis.com/v1/courses/"+t.status.course_data.classroom_course_id+"/courseWork/"+t.status.course_data.classroom_course_work_id+"/studentSubmissions?userId=me")}).then(function(e){var n;return null!=(null!=(n=e.student_submission)?n.studentSubmissions:void 0)?(t.status.state="loaded",t.status.classroom_file=!0,t.status.course_work_info=e.course_work,t.status.student_submission_info=e.student_submission.studentSubmissions[0]):t.status.course_data=null}).catch(function(e){return t.status.state="error",c.track("Google Classroom Load Failed",{error:e})})}}(this)).catch(function(e){return function(t){return e.status.state="error",c.track("Google Classroom Authorization Failed",{error:t})}}(this))},this.lookup_coursework=function(){var n;return this.status={},this.status.state="initial",(n=function(r){return function(){return t.google_drive_search({google_drive_id:e.document.document_identifier,google_user_id:e.google_user_id}).$promise.then(function(e){return r.status.course_data=e,r.fetch_coursework_info()}).catch(function(e){var t;"undefined"!=typeof(null!=(t=e.data)?t.google_auth_failure:void 0)&&s.authorize_with_dialog({user_id:e.data.google_auth_failure,scope:e.data.google_auth_failure_required_scope,message:"Please authorize Kami with Google to allow turning in this assignment",reason:"classroom_lookup_error",offline:!0}).then(function(e){return function(){return c.track("Google Classroom Authorization Successful"),n()}}(this)).catch(function(e){return c.track("Google Classroom Authorization Failed",{error:e})})})}}(this))()},this.can_be_turned_in=function(){var e,t,n;return"CREATED"===(null!=(e=this.status.student_submission_info)?e.state:void 0)||"RECLAIMED_BY_STUDENT"===(null!=(t=this.status.student_submission_info)?t.state:void 0)||"RETURNED"===(null!=(n=this.status.student_submission_info)?n.state:void 0)},this.turn_in_label=function(){var e;return"RETURNED"===(null!=(e=this.status.student_submission_info)?e.state:void 0)?"Resubmit":"Turn In"},this.turn_in=function(){var t;return t="saved"!==r.kami.status()?(c.track("Google Classroom Unsaved Changes Warning"),u.openConfirm({template:'<p>You have unsaved changes. Please check your internet connection and ensure changes are saved before turning in.</p> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> <button type="button" class="ngdialog-button" ng-click="confirm()">Turn in anyway.</button> </div>',plain:!0})):n.resolve(),t.then(function(t){return function(){return t.status.progress="Saving to Google Drive...",t.status.error=null,s.authorize_if_needed({scope:f,user_id:e.google_user_id,message:"Click to allow Kami to access your courses on Google Classroom"}).then(function(e){return t.turn_in_internal()})}}(this))},this.turn_in_internal=function(){return c.track("Google Classroom Turnin Start",{course_work_id:this.status.course_data.classroom_course_work_id,course_id:this.status.course_data.classroom_course_id,student_submission_id:this.status.student_submission_info.id}),i.show().then(function(t){return function(n){return r.drive.sync_now().then(function(){var n;return t.status.progress="Turning In...",n=a.google(e.google_user_id),n.post("https://classroom.googleapis.com/v1/courses/"+t.status.course_data.classroom_course_id+"/courseWork/"+t.status.course_data.classroom_course_work_id+"/studentSubmissions/"+t.status.student_submission_info.id+":turnIn").then(function(){return t.status.progress=null,t.fetch_coursework_info(),e.google_document.editable=!1,c.track("Google Classroom Turnin Successful",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id})}).catch(function(e){return t.status.progress=null,t.status.error="Error while turning in to Google Classroom, please try again",c.track("Google Classroom Turnin Failed",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id,error:e,error_stage:"classroom_turnin",fatal:!0})})},function(e){var n,r;return t.status.progress=null,"cancelled"===(null!=e&&null!=(n=e.error)?n.code:void 0)?t.status.error="Kami needs access to your Google Drive so we can turn in the file. Click turn in again and allow access in the popup.":"The user does not have sufficient permissions for this file."===(null!=e&&null!=(r=e.error_data)?r.error:void 0)?(t.status.error="This assignment has already been turned in. Unsubmit it with the button below then turn in again.",t.fetch_coursework_info(),c.track("Google Classroom Turnin Failed",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id,error:e,error_stage:"sync_file",fatal:!1})):(t.status.error="Error while saving to Google Drive",c.track("Google Classroom Turnin Failed",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id,error:e,error_stage:"sync_file",fatal:!0}))})}}(this))},this.can_be_reclaimed=function(){var e;return"TURNED_IN"===(null!=(e=this.status.student_submission_info)?e.state:void 0)},this.reclaim=function(){return this.status.progress="Unsubmitting...",this.status.error=null,s.authorize_if_needed({scope:f,user_id:e.google_user_id,message:"Click to allow Kami to access your courses on Google Classroom"}).then(function(t){return function(r){var i;return c.track("Google Classroom Reclaim Start",{
course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id}),i=a.google(e.google_user_id),i.post("https://classroom.googleapis.com/v1/courses/"+t.status.course_data.classroom_course_id+"/courseWork/"+t.status.course_data.classroom_course_work_id+"/studentSubmissions/"+t.status.student_submission_info.id+":reclaim").then(function(){return t.status.progress=null,t.fetch_coursework_info(),e.google_document.editable=!0,c.track("Google Classroom Reclaim Successful",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id})}).catch(function(e){return t.status.progress=null,t.status.error="Failed to unsubmit file.",c.track("Google Classroom Reclaim Failed",{course_work_id:t.status.course_data.classroom_course_work_id,course_id:t.status.course_data.classroom_course_id,student_submission_id:t.status.student_submission_info.id,error:e,error_stage:"classroom_reclaim"}),n.reject(e)})}}(this))},d={NEW:"Not Done",CREATED:"Not Done",TURNED_IN:"Done",RETURNED:"Returned by Teacher",RECLAIMED_BY_STUDENT:"Unsubmitted"},this.classroom_status_to_human=function(e){return d[e]},null}])},function(e,t,n){(function(e,t){var r;r=n(42),ng.factory("GoogleDrive",["$q","GoogleAuth","PageState","DocumentManager","DocumentUploader","OAuthManager","Mixpanel","$rootScope","DownloadDialog","DocumentAPI","$timeout","$injector","SettingsFactory","LicensesHelper","PremiumRequiredDialog",function(n,i,o,a,s,l,c,u,d,f,h,p,g,m,v){var _,y,b,w,x,k,C,S,E,$,T,A,D,O,P,R,I,M,L,N,j;return S=null,E=null,$=function(){return null!=S&&S.setVisible(!1),S=null,null!=E?E.reject({error:"canceled"}):void 0},e("body").on("click",".picker-dialog-bg",$),D=n.defer(),A=D.promise,o.gapi_loaded?gapi.load("picker",{callback:D.resolve}):k=u.$on("gapi_loaded",function(){return gapi.load("picker",{callback:D.resolve}),k()}),R=function(t,r,o){return null==t&&(t=null),null==r&&(r=null),null==o&&(o=!0),i.authorize_if_needed({user_id:t,from_user_action:o,scope:"https://www.googleapis.com/auth/drive.readonly"}).then(function(i){var o,a;return o=i.access_token,a=n.defer(),E=a,A.then(function(){var n,i,s,l,c,u,d,f,h;return c=function(e){var t;switch("folder"===(null!=(t=e.docs)?t[0].type:void 0)&&(E=null,a.reject({error:"cannot_pick_folder"})),e.action){case"picked":return E=null,a.resolve(e);case"canceled":return E=null,a.reject({error:"canceled"})}},h=Math.max(e(window).width()-50,600),i=Math.max(e(window).height()-50,500),l=new google.picker.DocsView(google.picker.ViewId.PDFS).setIncludeFolders(!0).setLabel("PDFs"),n=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setLabel("My Drive"),u=new google.picker.DocsView(google.picker.ViewId.RECENTLY_PICKED).setIncludeFolders(!1).setLabel("Recent"),f=new google.picker.DocsView(google.picker.ViewId.DOCS).setEnableTeamDrives(!0).setLabel("Team Drives"),d=new google.picker.DocsView(google.picker.ViewId.DOCS).setStarred(!0).setLabel("Starred"),r?(l.setParent(r),n.setParent(r)):(l.setOwnedByMe(!0),n.setOwnedByMe(!0)),r?(s=null,C(r,t).then(function(e){return s=e}).finally(function(){return S=(new google.picker.PickerBuilder).addView(n).addView(l).addView(f).addView(u).addView(d).setTitle((null!=s?s.title:void 0)||(null!=s?s.name:void 0)||null).setOAuthToken(o).setDeveloperKey("AIzaSyDvDaPkScYZhDbHcx-xlqHiJluM7LCpK74").setAppId(notable.API_CONSOLE_PROJECT_ID).setCallback(c).setSize(h,i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).build(),S.setVisible(!0)})):(S=(new google.picker.PickerBuilder).addView(n).addView(l).addView(f).addView(u).addView(d).setOAuthToken(o).setDeveloperKey("AIzaSyDvDaPkScYZhDbHcx-xlqHiJluM7LCpK74").setAppId(notable.API_CONSOLE_PROJECT_ID).setCallback(c).setSize(h,i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).build(),S.setVisible(!0))}),a.promise})},I=function(e,n,r){return null==e&&(e=null),null==n&&(n=null),null==r&&(r=!0),$(),R(e,n,r).then(function(n){return l.google(e).get_user().then(function(e){return T(t.extend({},n.docs[0],{userId:e}))},function(e){return i.authorize_with_dialog({additional_message:"Unable to load document",message:"Allow Google Drive to load file",reason:"picker_get_user",error:e}).then(function(){return I()})})})},M=function(t,r){return null==t&&(t=null),null==r&&(r={}),$(),i.authorize_if_needed({user_id:t,from_user_action:!0,scope:"https://www.googleapis.com/auth/drive.readonly"}).then(function(i){var o,a;return o=i.access_token,a=n.defer(),E=a,A.then(function(){var n,i,s,c,u,d;return i=function(e){var n,r;switch(e.action){case"canceled":return E=null,a.reject({error:"canceled"});case"picked":return E=null,n=null!=(r=e.docs)?r[0]:void 0,n?l.google(t).get_user().then(function(e){return a.resolve({file:n,google_user_id:e})}):a.reject(e)}},u=new google.picker.DocsView(google.picker.ViewId.FOLDERS).setOwnedByMe(!0).setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder").setLabel("My Drive"),c=new google.picker.DocsView(google.picker.ViewId.FOLDERS).setEnableTeamDrives(!0).setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder").setLabel("Team Drives"),s=new google.picker.DocsView(google.picker.ViewId.RECENTLY_PICKED),d=Math.max(e(window).width()-50,600),n=Math.max(e(window).height()-50,500),S=(new google.picker.PickerBuilder).addView(u).addView(c).addView(s).setTitle(r.picker_title||"Select Folder").disableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setSelectableMimeTypes("application/vnd.google-apps.folder").setOAuthToken(o).setDeveloperKey("AIzaSyDvDaPkScYZhDbHcx-xlqHiJluM7LCpK74").setAppId("185741998891").setCallback(i).setSize(d,n).build(),S.setVisible(!0)}),a.promise})},C=function(e,t){return null==t&&(t=null),i.authorize_if_needed({user_id:t,message:"Allow Google Drive to load file"}).then(function(n){return l.google(t).get("me/files",{id:e})})},_=function(e){var t,r,s;return r=e.ids?e.ids[0]:e.id?e.id:e.exportIds?e.exportIds[0]:void 0,s=e.userId,null==s&&(t=e.authuser),i.authorize_if_needed({user_id:s,authuser:t,message:"Allow Google Drive to load file"}).then(function(t){var i;return i=t.access_token,C(r,s).then(function(t){var c,u,d;if(d="",null!=t.teamDriveId&&!m.has_feature("team_drive"))return v.open("team_drive"),void o.change_state("none");if("exportLinks"in t)d="https://kamicors.kamihq.com/"+t.exportLinks["application/pdf"];else{if(!("downloadUrl"in t))return"application/vnd.google-apps.folder"===t.mimeType?n.reject({error:{message:"Kami can only open individual files, not folders. Please return to Google Drive and choose a file instead."}}):n.reject({error:{message:"This file could not be loaded. The owner has disabled downloads for this file, which is required for Kami to work. Please contact the owner and ask them to enable downloads."}});d=t.downloadUrl,u=parseFloat(t.fileSize)}return c=d+"&auth="+i,l.google(s).get_user().then(function(n){var i,s,l;o.add_next_load_params({document_identifier:t.id,filename:t.title,parent_id:null!=(s=t.parents)&&null!=(l=s[0])?l.id:void 0,google_user_id:n,gdrive_load_state:e,source:"exportLinks"in t?"googledriveexport":"googledrive",copy_type:"google",google_document:t}),"application/pdf"===t.mimeType&&(i=t.md5Checksum),u>0?a.open_url(c,{length:u},{from_drive:!0,document_cache_key:i,fileId:r}):a.open_url(c,null,{from_drive:!0,document_cache_key:i,fileId:r})})}).catch(function(e){var r;return"Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."===(null!=e&&null!=(r=e.error)?r.message:void 0)&&(e.auth_response=t,e.hello_js_state=localStorage.getItem("hello"),e.local_storage_used=JSON.stringify(localStorage).length,localStorage.setItem("hello",null),e.error.message="Sorry, something went wrong. Please try loading the file again.  If this error persists, contact support. (Error Code #1)"),n.reject(e)})})},T=function(e){return c.track("Google File Load Started",{state:e}),o.change_state("loading"),_(e).catch(function(r){var s,l,u,d;if((null!=r?r.status:void 0)<=0)return s=e.ids?e.ids[0]:e.id?e.id:e.exportIds?e.exportIds[0]:void 0,o.add_next_load_params(t.pickBy({document_identifier:s,filename:e.filename,parent_id:e.parent_id,gdrive_load_state:e,source:"googledrive",copy_type:"google"})),void a.open_file(s,{source:"googledrive"});switch(c.track("Google File Load Failed",{state:e,error:r}),null!=r&&null!=(u=r.error)?u.code:void 0){case 401:l=i.authorize_with_dialog({user_id:e.userId,additional_message:"Permission Error",message:"Allow Google Drive to load file",reason:"load_document_401",error:r});break;case 404:l=i.authorize_with_dialog({user_id:e.userId,additional_message:"Permission Error",message:"Allow Google Drive to load file",scope:"https://www.googleapis.com/auth/drive.readonly",reason:"load_document_404",error:r});break;case"cancelled":return n.reject(r);default:return i.authorize_with_dialog({status:"error",user_id:e.userId,additional_message:"Google Drive Error",message:null!=r&&null!=(d=r.error)?d.message:void 0,reason:"load_document_error",error:r}),n.reject(r)}return l.then(function(){return _(e)}).catch(function(t){var r,a;return o.change_state("none"),"cancelled"!==(null!=t&&null!=(r=t.error)?r.code:void 0)&&i.authorize_with_dialog({status:"error",user_id:e.userId,additional_message:"Google Drive Error",message:null!=t&&null!=(a=t.error)?a.message:void 0,reason:"load_document_error_final",error:t}),n.reject(t)})})},O=function(e,t){null==e&&(e=null),null==t&&(t=null),null!=e&&null!=t?window.open("https://drive.google.com/drive/blank?action=locate&id="+t+"&parent="+e,"_blank"):null!=e&&null==t?window.open("https://drive.google.com/drive/folders/"+e,"_blank"):window.open("https://drive.google.com/","_blank")},P=function(e,t){return null==t&&(t=null),l.google(t).patch("me/files",e).catch(function(){return i.authorize_if_needed({user_id:t,scope:"https://www.googleapis.com/auth/drive"}).then(function(){return l.google(t).patch("me/files",e)})})},b=function(e){return c.track("Google Drive Create Copy Started"),w("Kami Uploads").then(function(t){return d.open(e,{action:"export",dest:"drive",type:"annotation",opt:{file_name:e.name+" - "+o.document.name},folder:{id:t},callback:function(e,t){return c.track("Google Drive Upload As Copy Completed"),t.close(),T({userId:e.google_user_id,id:e.google_file_upload_id})}}).closePromise},function(e){return c.track("Google Drive Upload As Copy Failed",e),n.reject(e)})},j=function(e){var t,r,a,l,d,p;return null==e&&(e=null),c.track("Google Drive Upload As Alias Started"),l={file_name:o.document.name,method:"drive",option:"original",pages:"all",folder:{},user_id:e},p=null,t=null,r=null,a=null,d=w("Kami Uploads",e).then(function(t){return l.folder.id=r=t,e&&(l.user_id=e),a=s.upload("google_drive",l)},function(e){return n.reject(e)}).then(function(e){return p=e,o.export_status="exported",f.create_alias({document_identifier:o.document.document_identifier,copy_type:"google",new_document_identifier:e.id}).$promise},function(e){return n.reject(e)}).then(function(r){return t=r,e?n.resolve({id:e}):i.get_credentials()},function(t){return(null!=p?p.id:void 0)&&x(p.id,e),n.reject(t)}).then(function(e){return h(function(){var n;return n=o.document.document_identifier,f.update({document_identifier:t.document_identifier,google_sync_user_id:null!=e?e.id:void 0}),o.set_uploaded_to_drive(t.document_identifier,null!=e?e.id:void 0,p,r),u.$broadcast("upload_to_google_drive_completed",{old_document_identifier:n})}),c.track("Google Drive Upload As Alias Completed"),n.resolve()},function(e){return c.track("Google Drive Upload As Alias Failed",e),n.reject(e)}),d.abort=function(){return null!=a?a.abort():void 0},d},w=function(e,t){var r,o;return o={show_close:!0},t&&(o.user_id=t),r=l.google(t),i.authorize_if_needed(o).then(function(t){return r.service.api("me/folders","get",{q:"title='"+e+"' and mimeType='application/vnd.google-apps.folder' and trashed=false"})},function(e){return n.reject(e)}).then(function(t){var i,o;return o=t.data||[],o.length<1?r.service.api("me/folders","post",{name:e}).then(function(e){return n.resolve(e.id)},function(e){return n.reject(e)}):(i=o[0].id,n.resolve(i))},function(e){return n.reject(e)})},x=function(e,t){var r,o;return o={show_close:!0},t&&(o.user_id=t),r=l.google(t),i.authorize_if_needed(o).then(function(t){return r.service.api("drive/v2/files/"+e+"?supportsTeamDrives=true","delete")},function(e){return n.reject(e)})},N=function(e,t){var i,o;return i=n.defer(),o=r("google"),o.api("me/files","get",{q:"title='"+e+"'"}).then(function(n){var r,o,a,s,l;if(!n.data||n.data.length<1)return i.reject("no file found");for(a=[],s=n.data,r=0,o=s.length;r<o;r++)l=s[r],l.name===e&&parseInt(l.fileSize)===t&&a.push(l);return a.length>0?i.resolve(a):i.reject("no file found")},function(e){return i.reject(e)}),i.promise},L=function(e,t,r){var o;return o=null,i.get_credentials().then(function(n){return o=n,N(e,t)},function(r){var i;return 403===(null!=(i=r.error)?i.code:void 0)?(o="hello.js failed to get user credentials",N(e,t)):n.reject(r)}).then(function(e){return c.track_api("Google Drive File Search",{user_google_credentials:o,drive_files:e,files_count:e.length,document:r})},function(e){return null})},y=function(e,t){var r,o;return o={show_close:!0,google_user_id:t},r=l.google(t),i.authorize_if_needed(o).then(function(t){return r.service.api("drive/v2/files/"+e+"?supportsTeamDrives=true","get")},function(e){return n.reject(e)})},{pick_file:R,pick_file_and_load:I,load_document:T,pick_folder:M,get_file:C,open_folder:O,create_folder:w,patch_file:P,create_drive_copy:b,upload_to_drive:j,delete_file:x,search_for_file:N,record_if_file_in_drive:L,check_if_file_exists:y}}])}).call(t,n(1),n(2))},function(e,t,n){(function(e){ng.service("GoogleDriveManualSyncService",["GoogleAuth","$q","DocumentAPI","PDFProcessingAPI","Mixpanel","$timeout",function(t,n,r,i,o,a){return this.sync=function(s){var l,c;return l=n.defer(),c=function(){return r.export_pdf(e.extend({destination:"drive",drive_sync:!0,new_client:!0},s)).$promise.then(function(e){var n;return l.notify(e),(n=function(){return i.show({id:e.id}).$promise.then(function(e){var r,i;switch(e.status){case"done":return l.resolve(e);case"error":return"undefined"!=typeof(null!=(i=e.error_data)?i.google_auth_failure:void 0)?(r={required_scope:e.error_data.google_auth_failure_required_scope},o.track("Google Sync PDF Authorization Shown",r),t.authorize_with_dialog({user_id:e.error_data.google_auth_failure,scope:e.error_data.google_auth_failure_required_scope,message:s.message||"Allow Kami to save changes to Google Drive",reason:"sync_error",offline:!0}).then(function(e){return function(){return o.track("Google Sync PDF Authorization Successful"),c()}}(this))):l.reject(e);default:return a(n,2e3)}},function(){return a(n,2e3)})})()}).catch(function(e){return l.reject(e)})},c(),l.promise},null}])}).call(t,n(2))},function(e,t,n){(function(e){ng.service("GoogleDriveUploadService",["GoogleAuth","$q",function(t,n){return this.upload=function(r,i,o){var a,s;return s=n.defer(),a=!1,s.promise.abort=function(){return a=!0,s.reject("aborted")},t.authorize_if_needed({show_close:!0,user_id:o.user_id||o.google_user_id}).then(function(t){var n,l;if(n=t.access_token,!a)return l=new FileReader,l.onload=function(){var t,i,c,u,d,f,h,p,g;return i="-------314159265358979323846",d="\r\n--"+i+"\r\n",c="\r\n--"+i+"--",u="application/pdf",f={title:r,mimeType:u},null!=(null!=(p=o.folder)?p.id:void 0)&&(f.parents=[{kind:"drive#parentReference",id:o.folder.id}]),t=btoa(l.result),h=d+"Content-Type: application/json\r\n\r\n"+JSON.stringify(f)+d+"Content-Type: "+u+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+t+c,g=e.ajax({type:"POST",url:"https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart&supportsTeamDrives=true",headers:{Authorization:"Bearer "+n,"Content-Type":'multipart/mixed; boundary="'+i+'"'},data:h,cache:!1,contentType:!1,processData:!1,success:function(e,t,n){return s.resolve(e)},error:function(e,t,n){var r,i,o;return n=(null!=(r=e.responseJSON)&&null!=(i=r.error)&&null!=(o=i.errors[0])?o.reason:void 0)||n,s.reject({status:t,error:n})},xhr:function(){var t;return t=e.ajaxSettings.xhr(),t.upload&&t.upload.addEventListener("progress",function(e){return s.notify({loaded:e.loaded,total:e.total})},!1),t}}),s.promise.abort=function(){return a=!0,g.abort(),s.reject("aborted")}},l.readAsBinaryString(i)}).catch(function(e){return s.reject(e)}),s.promise},null}])}).call(t,n(1))},function(e,t,n){(function(e){var t;t=n(61),ng.service("Gravatar",["$resource","$q","$rootScope","localStorageService",function(t,n,r,i){var o,a,s,l,c,u,d,f,h,p;return s=i.get("gravatar_exists")||{},f=function(){return i.set("gravatar_exists",s)},l={},d=i.get("gravatar_images")||{},h=function(){return i.set("gravatar_images",d)},p={user_email:"",user_token:""},a="https://kamicors.kamihq.com/http://gravatar.com/avatar/",o=a+":md5",r.$on("LocalStorageModule.notification.error",function(e,t){if(/exceeded/i.test(t))return i.remove("gravatar_images")}),c=t(o,{d:"404",s:"1"},{exists:{method:"GET",headers:p,cache:!0}}),this.exists=function(e){return e?(l[e]||(l[e]=c.exists({md5:e}).$promise.then(function(){s[e]=!0,f()},function(t){return t.status===-1?s[e]?n.when():n.reject():(s[e]=!1,f(),n.reject())})),l[e]):n.reject()},u={},this.image=function(t){var n,r;return t?(r=""+a+t+"?d=404",n=function(){if(!u[t])return u[t]=!0,"crossOrigin"in new Image?e("<img />").prop("crossOrigin","anonymous").prop("src",r).on("load",function(){var e,n,r;return e=document.createElement("canvas"),n=e.getContext("2d"),e.width=this.width,e.height=this.height,n.drawImage(this,0,0,this.width,this.height),r=e.toDataURL(),d[t]=r,h()}):void 0},t in d?(n(),d[t]):s[t]?(n(),r):""):""},null}])}).call(t,n(1))},function(e,t){ng.service("GroupedFormFields",["$rootScope",function(e){var t;return t=e.$new(!0),{broadcast_change:function(e){return t.$broadcast("change",e)},on_change:function(e){return t.$on("change",function(t,n){return e(n)})}}}])},function(e,t,n){(function(e){var t;t=n(14),ng.service("KamiUploadService",["S3API","$q",function(n,r){var i;return i="https://web.kamihq.com/api",this.upload=function(i,o){var a,s;return s=r.defer(),notable.support_xhr2()?(a=!1,s.promise.abort=function(){return a=!0,s.reject("aborted")},n.get_policy().$promise.then(function(n){var r,l,c,u;if(!a)return r=new FormData,u=t.v4(),l=u+"/"+i,r.append("key",l),r.append("AWSAccessKeyId",n.access_key_id),r.append("acl","public-read"),r.append("policy",n.policy),r.append("signature",n.signature),r.append("success_action_status","201"),r.append("x-amz-server-side-encryption","AES256"),r.append("file",o,i),c=e.ajax({type:"POST",url:"https://"+n.bucket_name+".s3.amazonaws.com",data:r,cache:!1,contentType:!1,processData:!1,success:function(e,t,n){return s.resolve({file_key:l,file_url:e.querySelector("Location").textContent})},error:function(e,t,n){return s.reject({status:t,error:n})},xhr:function(){var t;return t=e.ajaxSettings.xhr(),t.upload&&t.upload.addEventListener("progress",function(e){return s.notify({loaded:e.loaded,total:e.total})},!1),t}}),s.promise.abort=function(){return a=!0,c.abort(),s.reject("aborted")}}).catch(function(e){return s.reject(e)}),s.promise):void s.reject("Upload not supported on the browser")},null}])}).call(t,n(1))},function(e,t){ng.service("KeyCodes",function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,space:32,"left-arrow":37,"right-arrow":39,"up-arrow":38,"down-arrow":40,escape:27,z:90,"forward-slash":191,c:67,v:86,delete:46}})},function(e,t,n){(function(e){ng.service("LicensesHelper",["$q","LicenseAPI","$rootScope","$timeout","FeatureHelper",function(t,n,r,i,o){var a,s,l,c,u,d,f,h,p,g,m,v,_;return p=null,_=null,f=[],d=Object.create(null),g=[],m=null,v=[],h=[],s="paid",c="standard",l="premium",u="work",a="education",this.update_document_features=function(e){return g=e,this.update_features()},this.update_license=function(t){return p=e.sortBy(t.licenses,function(e){return!e.active}),_=t.current_license,f=e.filter(p,"active"),m=t.feature_matrix,v=t.license_flags,h=t.client_feature_flags,this.update_features()},this.update_features=function(t,n){var i,o;o=e.clone(d);for(i in d)delete d[i];if(e.each(e.flatten([v,g]),function(e){return d[e]=!0}),!e.isEqual(o,d))return r.$broadcast("features_updated",d,o),r.$broadcast("refresh_user")},this.get_required_plan=function(e){var t;return t=s,(null!=m?m.standard.includes(e):void 0)?t=c:(null!=m?m.premium.includes(e):void 0)?t=l:(null!=m?m.work.includes(e):void 0)?t=u:(null!=m?m.education.includes(e):void 0)&&(t=a),t},this.get_feature_matrix=function(){return m},this.get_feature_list=function(e){return null!=m?m[e]:void 0},this.get_feature_object=function(e){return o(e)},this.get_feature_list_objects=function(t){return e.map(null!=m?m[t]:void 0,this.get_feature_object)},this.apply_trial_license=function(e){var t;return t=function(){switch(e){case l:return n.add_social_license;case u:return n.add_work_license;case a:return n.add_teacher_trial_license;default:return"Super"}}(),t().$promise},this.get_trial_license=function(){return e.find(p,{status:"trial"})},this.get_purchased_license=function(){return e.find(p,{status:"paid"})},this.has_active_subscription=function(){var e;return null!=(e=this.get_purchased_license())?e.active:void 0},this.apply_license_key=function(e){return n.apply_license({license_key:e}).$promise.catch(function(e){var n;return t.reject(null!=e&&null!=(n=e.data)?n.errors:void 0)})},this.humanize=function(e){var t,n;return null==e&&(e=null),null==e?"Basic":(t="",t=e.license_type?e.license_type:e,n=function(){switch(t){case c:return"Standard";case l:return"Pro";case u:return"Work";case a:return"Education";default:return"Super"}}(),"trial"===e.status&&(n+=" Trial"),n)},this.get_license_type=function(){return this.humanize(_)},this.get_current_license=function(){return _},this.has_feature=function(e){return d[e]},this.has_flag=function(e){return h.includes(e)},this.active_features=d,null}])}).call(t,n(2))},function(e,t,n){(function(e){var t;t=n(14),ng.service("Mixpanel",["EventAPI","OfflineSync","localStorageService","PageState","MixpanelParams",function(n,r,i,o,a){var s;return s=function(e){return function(){var n;return e.override_user_id?null:i.get("events.alias_uuid")?i.get("events.alias_uuid"):(n=t.v4(),i.set("events.alias_uuid",n),n)}}(this),this.override_user_id=null,this.track=function(e,t,n){return null==t&&(t={}),null==n&&(n=null),this.track_api(e,t,n)},this.track_perdoc=function(e,t,n){return null==t&&(t={}),null==n&&(n=null),this.track_api(e,t,n)},this.track_api=function(){var e,t;return t=function(e,t,i){var o,l;return null==t&&(t={}),null==i&&(i=null),o=a.get_event_data(e,t,this.override_user_id,s()),l=n.create(o).$promise,l.catch(function(){return o.value=angular.extend({offline_event:!0},o.value),angular.extend(o,{created_at:(new Date).toISOString()}),r.event_later(o)}),l.finally(function(){if(i)return i()})},e=window.requestIdleCallback||function(e,t){return null==t&&(t={}),e()},function(n,r,i){var a,s,l,c;return null==r&&(r={}),null==i&&(i=null),angular.extend({document_id:null!=(l=o.document)?l.id:void 0,document_identifier:null!=(c=o.document)?c.document_identifier:void 0},r),null!=i?t(n,r,i):(a=function(){return t(n,r)},s={timeout:3e3},e(a,s))}}(),this.register_user=function(e){},this.alias_user=function(){var t;return t={alias_uuid:s(),user_id:this.override_user_id},t=e.pickBy(t),n.alias(t)},null}]),ng.service("MixpanelParams",["BrowserDetection","$injector",function(n,r){return this.session_id=t.v4(),this.get_event_data=function(r,i,o,a){var s,l,c;return null==i&&(i={}),s=n,delete i.token,c=e.pickBy({browser:s.name+" "+s.version,os:notable.os(),operating_system:notable.operating_system(),version:"2.0.9593-20180301035713",version_name:notable.version_name,using:notable.getDeployment(),session_id:this.session_id}),l={uuid:t.v4(),name:r,alias_uuid:a,user_id:o,value:angular.extend(c,i)},e.pickBy(l)},null}])}).call(t,n(2))},function(e,t,n){(function(e){ng.service("MixpanelHelper",["Mixpanel","User",function(t,n){var r;return r=function(e){var r;return r="using_"+notable.getDeployment(),e.properties[r]||(e.properties[r]=!0,n.update(e)),t.register_user(e)},this.init_user=function(e){return r(e)},this.track_login=function(e,n){return null==n&&(n=null),t.track("Logged In",{success:!0,oauth_provider:n}),this.init_user(e),t.alias_user(e)},this.track_signup=function(e,n){return null==n&&(n=null),r(e),t.alias_user(e),t.track("Signed Up",{success:!0,oauth_provider:n})},this.track_guest_signup=function(e){return r(e),t.alias_user(e),t.track("Guest User Created",{success:!0})},this.track_login_error=function(e,n){return t.track("Login error",{errors:e,email:n})},this.track_signup_error=function(e,n){return t.track("Signup Error",{errors:e,email:n})},this.track_guest_signup_error=function(e,n){return t.track("Guest Signup Error",{errors:e})},e(window).on("twopageview-changed",function(e){return function(){return t.track("TwoPageView Changed",{enabled:TwoPageViewMode.active})}}(this)),e(window).on("twopageview-coverpagechanged",function(e){return function(){return t.track("TwoPageView Toggle Coverpage",{showCoverPage:TwoPageViewMode.showCoverPage})}}(this)),null}])}).call(t,n(1))},function(e,t,n){(function(e){var t;t=function(t,n,r,i){var o,a,s,l,c,u,d,f,h,p;return"chrome"!==Detectizr.browser.name?{start_worker:function(){},postAction:function(){return r.reject()}}:(("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0)&&(n=chrome.extension.getURL(n)),c=r.defer(),l=c.promise,s=null,p=null,h=function(){var r;return s=document.createElement("div"),p=document.createElement("embed"),s.style.width=0,s.style.height=0,p.width=0,p.height=0,p.type="application/x-pnacl",p.src=n,s.appendChild(p),document.body.appendChild(s),s.addEventListener("load",function(){return c.resolve()},!0),r=e.debounce(function(e){e.lengthComputable&&e.total>0},100),s.addEventListener("progress",r,!0),s.addEventListener("message",o,!0),s.addEventListener("crash",function(n){return i.track("NaclWorker crashed",e.assign({worker_name:t},n.data)),f()},!0)},f=function(){return c=r.defer(),l=c.promise,document.body.removeChild(s),h()},u={},o=function(e){var t;switch(t=e.data,t.type){case"log":break;case"reply":return u[t.id].resolve(t.data),delete u[t.id]}},a=0,d=function(e,t){var n,i;return n=r.defer(),i=++a,u[i]=n,l.then(function(){var n;return n={id:i,action:e,data:t},p.postMessage(n)}),n.promise},{start_worker:h,postAction:d})},ng.factory("NaclWorker",["$q","Mixpanel",function(r,i){var o,a,s,l,c,u,d,f,h,p,g,m;return f=n(206),n(220),d=t("ocr",f,r,i),u=n(207),n(221),c=t("jpeg",u,r,i),p={},a=function(){return p={}},o=2,h=function(e){var t,n,r,i;return t=document.createElement("canvas"),r=e.rotate,i=e.getViewport(o,r),n=t.getContext("2d"),t.width=Math.floor(i.width),t.height=Math.floor(i.height),n.save(),n.fillStyle="rgb(255, 255, 255)",n.fillRect(0,0,t.width,t.height),n.restore(),e.render({canvasContext:n,viewport:i,intent:"print"}).then(function(){return t})},d.postAction("init",{tessdata_dir:"/http",iterator_level:2}).then(function(e){}),m=e.once(function(){return d.start_worker()}),l=function(t,n){var i;return null==n&&(n=!1),m(),i=PDFView.documentFingerprint+":"+t.pageNumber,!n&&i in p?r.when(p[i]):h(t).then(function(t){var n,r,a;return r=t.getContext("2d"),a=r.getImageData(0,0,t.width,t.height),n=a.data.buffer,d.postAction("detectWords",{width:t.width,height:t.height,data:n}).then(function(t){var n;return n=function(t){return t.items=e.map(t.items,function(e){return e.x*=CSS_UNITS/o,e.y*=CSS_UNITS/o,e.width*=CSS_UNITS/o,e.height*=CSS_UNITS/o,n(e),e})},n(t),p[i]=t,t})})},g=e.once(function(){return c.start_worker()}),s=function(e){return g(),c.postAction("decodeImage",e)},{detectWords:l,clearCache:a,decodeImage:s}}])}).call(t,n(2))},function(e,t){ng.service("NotifyService",["ScrollToAnnotation","$window","localStorageService","SettingsFactory","User","Mixpanel",function(e,t,n,r,i,o){var a,s,l,c;return a=function(){return null!=n.get("extension_installed")},s=function(){return n.get("extension_installed_user")},c=function(){return r.get("notifications",!0)},l=!1,this.comment_upsert=function(n){var r,u,d,f,h,p,g,m,v;if(r=n.comment,!Notify.needsPermission()&&Notify.isSupported()&&!(a()&&(null!=(h=s())?h.id:void 0)===(null!=(p=i.current_user())?p.id:void 0)||notable.is_extension)&&r.author.id!==(null!=(g=i.current_user())?g.id:void 0)&&c()&&!l)return v=function(){switch(angular.lowercase(r.annotation_type)){case"comment":return r.parent_comment_id?"Reply":"Comment";default:return r.annotation_type}}(),d=["a","e","i","o","u"].indexOf(v.toLowerCase().charAt(0))>-1,m="Kami - New "+v+" Added",u=r.author.name+" just added "+(d?"an":"a")+" "+v+" in "+r.document.name,null!=r.referring_to.page_no&&(u+=", page "+r.referring_to.page_no),f=new Notify(m,{icon:"images/icon256_square.png",tag:r.id,body:u,notifyShow:function(){return l=!0},notifyError:function(){return l=!1},notifyClose:function(){return l=!1,o.track("Closed Notification",{comment_id:r.id,annotation_type:r.annotation_type,type:"pusher"})},notifyClick:function(){return l=!1,t.focus(),e(r),o.track("Clicked Notification",{comment_id:r.id,annotation_type:r.annotation_type,type:"pusher"}),f.close()}}),f.show(),o.track("Showed Notification",{comment_id:r.id,annotation_type:r.annotation_type,type:"pusher"})},this.comment_destroy=function(e){return null},this.comment_failed=function(e){var t,n,r;if(t=e.comment,!Notify.needsPermission()&&Notify.isSupported()&&c()&&!l)return n=e.error,r=new Notify(t.annotation_type+" failed to upload",{icon:"images/icon256_square.png",tag:t.id,body:n,notifyShow:function(){return l=!0},notifyError:function(){return l=!1},notifyClose:function(){return l=!1,o.track("Closed Notification",{comment_id:t.id,annotation_type:t.annotation_type,type:"comment failed"})},notifyClick:function(){return l=!1}}),r.show(),o.track("Showed Notification",{comment_id:t.id,annotation_type:t.annotation_type,type:"comment failed"})},null}])},function(e,t,n){(function(e){var t;t=n(42),ng.factory("OAuthManager",["$q","$http","$rootScope","localStorageService","$timeout",function(n,r,i,o,a){var s,l;return t.init({google:"185741998891-u4avuqh55aeohgskilrb9oblsa6hrjmu.apps.googleusercontent.com"},{scope:["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"],response_type:"token code",oauth_proxy:"https://web.kamihq.com/api/authorizations",redirect_uri:notable.is_extension?"https://web.kamihq.com/web/redirect.html":"redirect.html",chrome_ext_id:"ecnphlgnajanjnkcmbpancdjoidceilk",popup:{height:800}}),l={},s=function(i){var o;return o=i?"google-"+i:"google",l[o]||(l[o]=function(i){var o,s,l,c,u,d,f,h,p,g,m,v,_;return t.services[i]=t.services.google,g=t(i),p=null,_=null,d=function(){return _&&n.when(_),u().then(function(){return _})},c=function(){var e;return null!=(e=g.getAuthResponse())?e.access_token:void 0},l=function(){return g.getAuthResponse()},v=function(e){if(e.expires_in)return p&&a.cancel(p),p=a(function(){f({immediate:!0})},1e3*e.expires_in)},m=function(e){var n,r;return _=null,e.expires_at&&(e.expires=e.expires_at),t.utils.store(i,e),null!=(n=window.gapi)&&null!=(r=n.auth)&&r.setToken(e),v(e)},f=function(t){var r,i;return t.user_id&&(t.authuser=-1),t.immediate&&(t.display="none",r=g.getAuthResponse()),t.offline&&(t=e.assign({force:!0,access_type:"offline"},t)),i=e.pick(e.assign({include_granted_scopes:!0},t),["display","response_type","client_id","user_id","authuser","scope","force","access_type","offline","immediate","include_granted_scopes"]),n.when(g.login(i)).then(function(e){var t;return t=e.authResponse,m(t),_=t.user_id,
t},function(e){var t;return r&&s(r)&&m(r),n.reject(null!=(t=null!=e?e.error:void 0)?t:e)})},h=function(){return p&&a.cancel(p),n.when(g.logout())},u=function(){var e;return e=c(),e?r.get("https://www.googleapis.com/oauth2/v1/tokeninfo?access_token="+encodeURIComponent(e)).then(function(e){var t;return t=e.data,v(t),_=t.user_id,t}):n.reject()},s=function(e){return null==e&&(e=g.getAuthResponse()),e&&e.access_token&&e.expires>(new Date).getTime()/1e3},o=function(t){return function(r,i){return n.when(g.api(r,t,i)).catch(function(t){return e.extend(t,{request:{path:r,data:i,auth_state:l()}}),n.reject(t)})}},{service:g,get_token:c,get_auth_response:l,set_auth_response:m,login:f,logout:h,get_tokeninfo:u,get_user:d,check_token:s,get:o("get"),put:o("put"),post:o("post"),patch:o("patch")}}(o))},{google:s}}])}).call(t,n(2))},function(e,t,n){var r;r=n(543),ng.service("Onboarding",["ngDialog","localStorageService","User","$q","$rootScope","LicensesHelper","LicenseAPI","Mixpanel",function(e,t,n,i,o,a,s,l){var c,u;u=2,this.needs_onboarding=function(){return n.show().then(function(e){return null!=e.user_profile.onboarded?i.reject():n.show(!0)},function(){return i.reject()}).then(function(e){return{onboarded:null!=e.user_profile.onboarded,user:e}},function(){return{onboarded:!0}})},this.start=function(e){e?(delete e.user_profile.onboarded,n.update(e)):(n.show().then(function(e){return delete e.user_profile.onboarded,n.update(e)}),this.show(!1))},this.finish=function(e,t){var r;if(null==t&&(t=1),e)return e.user_profile.onboarded=e.user_profile.onboarded instanceof Array?e.user_profile.onboarded:[],e.user_profile.onboarded.indexOf(t)===-1&&e.user_profile.onboarded.push(t),r={id:e.id,authentication_token:e.authentication_token,user_profile:e.user_profile},n.update(r);throw new Error("must provide user object")},this.resume_if_needed=function(e){return function(){return!notable.is_embed&&e.needs_onboarding().then(function(t){var n,r,i,o,a;if(r=(null!=(i=t.user)?i.user_profile:void 0)||{},n=null!=(o=t.user)&&null!=(a=o.domain_properties)?a.industry:void 0,"Education"!==n||r.usage_purpose||(r.usage_purpose="school"),!t.onboarded)return e.show(!1,1,1,r)})}}(this),this.show=function(t,i,o,a){return null==t&&(t=!0),null==i&&(i=1),null==o&&(o=2),null==a&&(a={}),!notable.is_embed&&void n.show().then(function(n){var s;return!!n.email&&(l.track("Onboarding Started"),s={callbacks:[],add:function(e){return this.callbacks.push(e)},close:function(e){var t,n,r,i;n=this.callbacks,r=[];for(t in n)i=n[t],r.push(i(e));return r}},e.open({template:r,overlay:!1,closeByEscape:t,closeByDocument:t,className:"",showClose:!1,appendTo:"#outerContainer",controller:"OnboardingDialogController",preCloseCallback:function(e){return null==e&&(e=!1),l.track("Onboarding Close",{closable:t}),s.close(e||t),e||t},resolve:{start_step:function(){return i},end_step:function(){return o},properties_data:function(){return a},preClose:function(){return s}}}))})},this.restart=function(e,t){var r;return r=this,n.show(!0).then(function(n){return r.show(!0,e,t,n.user_profile)},function(){return!0})},c=o.$new(!0),this.notify_onboarding_finished=function(e,t,n){return null==e&&(e=1),null==t&&(t=null),null==n&&(n=!1),t?c.$broadcast("onboarding_finished_error",{step:e,err:t}):(c.$broadcast("onboarding_finished",{step:e}),o.$broadcast("refresh_user"),e===u?c.$broadcast("onboarding_final_finished",{step:e,coupon_entered:n}):void 0)},this.notify_onboarding_aborted=function(e){return c.$broadcast("onboarding_aborted",{step:e})},this.watch_onboarding_final_finished=function(e){return c.$on("onboarding_final_finished",function(t,n){var r;try{e(n)}catch(e){r=e}})},this.watch_onboarding_finished=function(e){return c.$on("onboarding_finished",function(t,n){var r;try{e(n)}catch(e){r=e}})}}])},function(e,t,n){(function(e,t){ng.service("PageState",["$rootScope","URLParams",function(n,r){var i,o,a;this.gapi_loaded=!1,this.document_state=null,this.force_open_screen=!1,this.change_state=function(e,t){if(null==t&&(t=!1),t&&null===this.document_state||!t)return this.document_state=e,this.force_open_screen=!1},e(window).on("document_opening",function(e){return function(t){return e.change_state("loading"),i()}}(this)),i=function(e){return function(){var t;if(t=e.next_load_params,null!=t&&!t.disable_push_state&&!notable.is_embed)switch(t.source){case"googledrive":case"googledriveexport":return history.pushState(null,"","");default:if(!notable.is_extension||null!=t.source)return history.pushState(null,"","")}}}(this),this.clear_reload=function(){return this.document=null,this.source=null,this.google_user_id=null,this.google_document=null,this.upload_percentage_text=null,this.upload_percentage_value=null,this.export_status="none",this.filename=null,this.parent_id=null,this.can_ocr=!1,this.file_url=null,this.document_identifier=null,this.disable_notifications=!1,this.disable_push_state=!1,this.document_cache_key=null},this.next_load_params={document_identifier:r.document_identifier,source:r.source,google_user_id:r.user_id,parent_id:r.parent_id,file_url:null!=(o=r.file)?o:window.DEFAULT_URL,filename:r.filename,disable_notifications:r.disable_notifications,force_new_copy:r.force_new_copy};try{a=JSON.parse(null!=r?r.state:void 0)}catch(e){a=null}return a&&(this.next_load_params.source="googledrive",this.next_load_params.google_user_id=a.userId),this.add_next_load_params=function(e){return null==this.next_load_params&&(this.next_load_params={}),t.extend(this.next_load_params,e)},this.apply_next_load_params=function(){var e;return e=this.next_load_params,t.forEach(e,function(e){return function(t,n){if("document_identifier"!==n)return e[n]=t}}(this)),this.next_load_params={},e},this.push_state=function(){var e,n,r,i;if(!this.disable_push_state&&!notable.is_embed)switch(this.source){case"googledrive":case"googledriveexport":return a={ids:[this.document.document_identifier],action:"open",userId:this.google_user_id},e=notable.encode_query_string({state:JSON.stringify(a),filename:this.filename}),i=this.document_name()||"",history.replaceState(null,i,"viewer.html?"+e);case"dropbox":return null;case"box":return null;default:if(!notable.is_extension||null!=this.source)return e=notable.encode_query_string(t.pickBy({source:this.source,document_identifier:null!=(n=null!=(r=this.document)?r.document_identifier:void 0)?n:this.document_identifier,file:this.file_url,filename:this.filename,disable_notifications:this.disable_notifications})),i=this.document_name()||"",history.replaceState(null,i,"viewer.html?"+e)}},n.$on("gapi_loaded",function(e){return function(){return e.gapi_loaded=!0}}(this)),this.document_name=function(){var e,n,r,i,o;return e=function(){var e;e=PDFView.url;try{return decodeURIComponent(PDFJS.getFilenameFromUrl(e))||e}catch(t){return e}},n=t.compact([this.filename,null!=(r=this.document)?r.name:void 0,null!=(i=PDFView.pdfDocument)?i.contentDispositionFilename:void 0,e(),null!=(o=PDFView.documentInfo)?o.Title:void 0])[0],document.title=n,n},this.has_permission=function(e){var t;return!!this.document&&("edit"===e?this.google_document?this.google_document.editable:"viewer"!==this.document.permissions:!this.document.file_url||"owner"===this.document.permissions||(null!=(t=this.document.sharing_permissions)?t[e]:void 0)!==!1)},this.set_uploaded_to_drive=function(e,t,r,i){return this.source="googledrive",this.document.document_identifier=e,this.document.copy_type="google",this.parent_id=i,this.google_user_id=t,this.google_document=r,this.disable_push_state=!1,this.push_state(),n.$broadcast("uploaded_to_drive")},null}])}).call(t,n(1),n(2))},function(e,t,n){ng.service("PerformanceMetrics",["PerformanceMetricsAPI",function(e){return this.reportMetrics=function(t){var n;return Detectizr.detect(),n=Detectizr.browser||{},t=angular.extend({browser:n.name,browser_version:n.version,os:notable.os(),version:"2.0.9593-20180301035713",version_name:notable.version_name,using:notable.getDeployment()},t),e.create({data:t})},null}])},function(e,t){ng.service("PinchZoomState",["$rootScope","$timeout",function(e,t){var n,r;return n=e.$new(!0),r={firePinchStart:function(){return n.$broadcast("pinch-start")},firePinchMove:function(){return n.$broadcast("pinch-move")},firePinchEnd:function(){return n.$broadcast("pinch-end")},watchStart:function(e){return n.$on("pinch-start",function(){return e()})},watchMove:function(e){return n.$on("pinch-move",function(){return e()})},watchEnd:function(e){return n.$on("pinch-end",function(){return e()})}}}])},function(e,t){ng.service("ProcessDocumentService",["$rootScope","PageState","PDFProcessingAPI","PromptFileUploadService","OAuthManager","GoogleDrive","GoogleAuth","$timeout","RemoveUploadDialog","DriveUploadRequiredDialog",function(e,t,n,r,i,o,a,s,l,c){var u,d,f;f=null,u=function(e,n){return t.document.file_url?(l.open({header:"Remove uploaded file to enable "+(e||"this feature"),message:"The uploaded file and shared link (if enabled) needs to be removed. You can share this file again after processing."}).then(function(e){if(e)return"function"==typeof n?n():void 0}),Mixpanel.track(e+" Shared File",{document_identifier:t.document.document_identifier})):"function"==typeof n?n():void 0},d=function(e,n,r,o){var a,s,l,c,u;return s={},a=[],u=i.google(t.google_user_id).get_token(),s[t.document.document_identifier]={gdrive_file:{id:t.document.document_identifier,google_access_token:u},password:n},a.push({service:"google-drive",final_file_name:t.document.name,google_access_token:u,google_user_id:t.google_user_id,parent_id:t.parent_id,google_file_id:t.document.document_identifier,drive_sync:!0}),t.document.file_url&&a.push({service:"kami",final_file_name:t.document.name,kami_document_identifier:t.document.document_identifier}),l="function"==typeof r?r(s):void 0,c="function"==typeof o?o(a):void 0,{job_type:e,documents:l||s,output_documents:c||a}},this.check_file=function(n,r){return"googledrive"!==t.source&&"google"!==t.document.copy_type||"googledriveexport"===t.source?("function"==typeof f&&f(),c.open({message:"This file must first be re-uploaded to Google Drive in order to use "+(n||"this feature")}).then(function(i){var a,l,c,d;if(i)return c=0,a=20,d=2e3,"copy"===i.value?(e.$on("document_init",function(){}),(l=function(){var e;if(c<a)return c++,"googledrive"!==t.source&&"google"!==(null!=(e=t.document)?e.copy_type:void 0)||"googledriveexport"===t.source?s(l,d):u(n,r)})()):f=e.$on("uploaded_to_drive",function(){return"function"==typeof f&&f(),(l=function(){if(c<a)return c++,o.check_if_file_exists(t.document.document_identifier,t.google_user_id).then(function(e){return u(n,r)},function(e){return s(l,d)})})()})})):u(n,r)},this.start_processing=function(e,r,i,o,l){return a.authorize_if_needed({show_close:!0,user_id:t.google_user_id}).then(function(e){return PDFView.pdfDocument.transport.getPassword()}).then(function(t){var r,i;return i=d(e,t,o,l),r=n.create(i).$promise},function(e){return i(e)}).then(function(e){var t,o;return o=2e3,(t=function(){return n.show({id:e.id}).$promise.then(function(n){switch(n.status){case"done":return"function"==typeof r?r(e.id):void 0;case"error":return"function"==typeof i?i(e.id):void 0;default:return s(t,o)}},function(){return s(t,o)})})()},function(e){return i(e)})}}])},function(e,t){ng.service("PromptFileUploadService",["$rootScope","User","PageState","GoogleDrive","SettingsFactory","Mixpanel",function(e,t,n,r,i,o){var a;return a=e.$new(!0),this.state={dialog_visible:!1,dismissed:!1,auto_upload_google_drive:i.get("auto_upload_google_drive",!1),centered:!1,title:null},this.open=function(e,t){if(null==t&&(t=!1),this.state.dismissed&&!t||(this.state.dialog_visible=!0),e)return this.state.centered=e.centered,this.state.title=e.title},this.close=function(e){if(null==e&&(e=!1),this.state.dialog_visible=!1,e)return this.state.dismissed=!0},this.open_and_upload=function(e){return null==e&&(e=!1),this.state.dialog_visible=!0,a.$broadcast("upload-prompted",e)},this.open_if_needed=function(e){if(!(n.document.file_url||"googledrive"===n.source||"edmodo_script"===n.source||"google"===n.document.copy_type||this.state.dialog_visible||this.state.dismissed||i.get("auto_upload_google_drive",!1)))return o.track("Prompt File Upload Dialog Opened"),this.open(e)},this.on_upload_prompted=function(e){return a.$on("upload-prompted",function(t,n){return e(n)})},null}])},function(e,t,n){var r;r=n(503),ng.service("Pusher",["$rootScope","$http",function(e,t){var n;return this.instance=new r("6efeb969e2322423e818",{encrypted:!0,authEndpoint:"https://web.kamihq.com/api/pusher/auth",auth:{headers:{"USER-TOKEN":t.defaults.headers.common["USER-TOKEN"],"USER-ID":t.defaults.headers.common["USER-ID"]}},unavailable_timeout:3e3,disableStats:!0}),this.channel=function(e){return e?this.instance.channel(e)||this.instance.subscribe(e):void 0},this.instance.connection.bind("connected",function(){return e.$apply(function(){return e.$broadcast("pusher:connected")})}),this.instance.connection.bind("connecting_in",function(t){return e.$apply(function(){return e.$broadcast("pusher:connecting_in")})}),this.instance.connection.bind("connecting",function(){return e.$apply(function(){return e.$broadcast("pusher:connecting")})}),this.instance.connection.bind("unavailable",function(){return e.$apply(function(){return e.$broadcast("pusher:unavailable")})}),this.instance.connection.bind("disconnected",function(){return e.$apply(function(){return e.$broadcast("pusher:disconnected")})}),this.instance.connection.bind("failed",function(){return e.$apply(function(){return e.$broadcast("pusher:failed")})}),this.is_online=function(){var e,t;switch(null!=(e=this.instance)&&null!=(t=e.connection)?t.state:void 0){case"initialized":case"connecting":case"connected":return!0;default:return!1}},n=null,document.addEventListener("visibilitychange",function(e){return function(){return document.hidden?n=setTimeout(function(){return e.instance.disconnect()},6e5):(n&&clearTimeout(n),e.instance.connect())}}(this)),null}])},function(e,t,n){var r;r=n(11),ng.service("SelectionHelper",function(){this.get_selected_text=function(){var e;return e=r.getSelection(),e.toString()},this.is_any_text_selected=function(){var e;return e=r.getSelection(),e.toString()},this.select_node=function(e){var t,n;return t=r.createRange(),t.selectNodeContents(e),n=r.getSelection(),n.setSingleRange(t)},this.get_bounding_client_rect=function(){var e,t,n,i,o,a,s,l,c;for(c=r.getSelection(),c.trim(),a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,t={top:o,right:a,bottom:a,left:o},l=c.getAllRanges(),n=0,i=l.length;n<i;n++)s=l[n],e=s.nativeRange.getBoundingClientRect(),t.top=Math.min(t.top,e.top),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom),t.left=Math.min(t.left,e.left);return t.width=t.right-t.left,t.height=t.bottom-t.top,t}})},function(e,t){ng.service("SpeechRecognitionService",["Mixpanel","$rootScope","ngDialog",function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p,g,m,v;m="result-event",v="start-event",d="end-event",f=t.$new(!0),o=!1,a=!1,g=null,p=0,h=0,i=function(e){return function(){if("webkitSpeechRecognition"in window)g=new webkitSpeechRecognition;else{if(!("SpeechRecognition"in window))return;g=new SpeechRecognition}return a=!0,g.continuous=!0,g.interimResults=!0,g.onstart=u,g.onend=s,g.onerror=l,g.onresult=c}}(this),u=function(){return o=!0,f.$apply(function(){return f.$broadcast(v)}),p=0,e.track("Started voice typing")},s=function(){if(o=!1,f.$apply(function(){return f.$broadcast(d)}),p+=h,p>0)return e.track("Stopped voice typing",{num_words_transcribed:p})},l=function(e){switch(e.error){case"not-allowed":return n.open({template:'<p>Please allow Kami to access your microphone for voice typing.</p> <img src="images/microphone-permission-chrome.gif" style="width: 100%; margin: 24px 0;"/> <div class="ngdialog-buttons"> <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click="closeThisDialog()">OK</button> </div>',plain:!0})}},c=function(e){var t,n,i,o,a,s;for(s="",n="",t=i=o=e.resultIndex,a=e.results.length-1;o<=a?i<=a:i>=a;t=o<=a?++i:--i)e.results[t].isFinal?s+=e.results[t][0].transcript:n+=e.results[t][0].transcript;return p+=r(s),h=r(n),f.$apply(function(){return f.$broadcast(m,s,n)})},r=function(e){var t,n;return e=null!=e?e.trim():void 0,(null!=e?e.length:void 0)&&null!=(t=null!=(n=e.split(/\s+/))?n.length:void 0)?t:0},this.listen=function(e){if(a)return f.$on(m,function(t,n,r){return e(n,r)})},this.on_start=function(e){if(a)return f.$on(v,function(t){return e()})},this.on_end=function(e){if(a)return f.$on(d,function(t){return e()})},this.start=function(){if(a&&!o)return g.start()},this.stop=function(){if(a)return g.stop()},this.is_running=function(){return o},this.is_supported=function(){return a},i()}])},function(e,t){ng.service("SpotlightState",["$rootScope",function(e){var t;t=e.$new(!0),this.clicked_annotation_id=null,this.hovered_annotation_id=null,this.set_clicked_annotation_id=function(e){return function(n,r){var i;i=e.clicked_annotation_id,n!==i&&(e.clicked_annotation_id=n,t.$broadcast("clicked_annotation_id",n,i,r))}}(this),this.set_hovered_annotation_id=function(e){return function(n){var r;r=e.hovered_annotation_id,n!==r&&(e.hovered_annotation_id=n,t.$broadcast("hovered_annotation_id",n,r))}}(this),this.watch_clicked_annotation_id=function(e){return function(n){return n(e.clicked_annotation_id,null,!0),t.$on("clicked_annotation_id",function(e,t,r,i){return n(t,r,i)})}}(this),this.watch_hovered_annotation_id=function(e){return function(n){return n(e.hovered_annotation_id,null),t.$on("hovered_annotation_id",function(e,t,r){return n(t,r)})}}(this),e.$on("editing_start",function(e){return function(t,n){var r;if("Comment"===n.annotation_type)return r=null!=n.parent_comment_id?n.parent_comment_id:n.id,e.set_clicked_annotation_id(r)}}(this))}])},function(e,t){ng.service("ToolVisibility",["URLParams",function(e){var t,n;return n=function(){try{return JSON.parse(e.viewer_options)}catch(e){return void(t=e)}}(),null==n&&(n={}),this.is_tool_visible=function(e){var t;return!notable.is_embed||(null!=(t=n.tool_visibility)?t[e]:void 0)!==!1},null}])},function(e,t){ng.factory("TooltipScope",["$rootScope",function(e){return e.$new(!0)}])},function(e,t,n){(function(e){var t;t=n(14),ng.service("Undo",["Mixpanel",function(n){var r,i,o,a;return a=[],i=[],o=!1,r=!1,this.add=function(e,n,s){return n=n||t.v4(),s=s||t.v4(),o?i.push({task:e,group_id:s}):(this.replaceUndo(e,n,s)||a.push({task:e,undo_unique_id:n,group_id:s}),a.length>100&&a.shift(),r||(i=[])),n},this.replaceUndo=function(e,t,n){var r;for(r=0;r<a.length;){if(a[r].undo_unique_id===t)return a[r].task=e,a[r].group_id=n,!0;r++}return!1},this.undo=function(t){var r,i;if(!t||(r=e.last(a),(null!=r?r.group_id:void 0)===t))return n.track("Undo"),i=a.pop(),o=!0,null!=i&&"function"==typeof i.task&&i.task(),(null!=i?i.group_id:void 0)&&this.undo(i.group_id),o=!1},this.redo=function(t){var o,a;if(!t||(o=e.last(i),(null!=o?o.group_id:void 0)===t))return n.track("Redo"),a=i.pop(),r=!0,null!=a&&"function"==typeof a.task&&a.task(),(null!=a?a.group_id:void 0)&&this.redo(a.group_id),r=!1},this.clear=function(){return a=[],i=[]},this.hasUndo=function(){return a.length>0},this.hasRedo=function(){return i.length>0},this.isUndoing=function(){return o},this.isRedoing=function(){return r},null}])}).call(t,n(2))},function(e,t,n){(function(e){ng.factory("URLParams",function(){var t,n;return n={},t=function(){var t,r,i,o,a,s,l;for(t in n)l=n[t],delete n[t];for(r=void 0,a=/([^&=]+)=?([^&]*)/g,o=window.location.search.substring(1);r=a.exec(o);)t=decodeURIComponent(r[1]),l=decodeURIComponent(r[2]),n[t]=l,i=/^kami_(.+)$/.exec(t),i&&(n[i[1]]=l);if(null!=n.source&&(s=["box","conversion","drop","dropbox","embed","embed_api","filepicker","googledrive","notification","sharedfile","switched_copy","extension_pdfhandler","edmodo_script"],!e.includes(s,n.source)))return delete n.source},window.addEventListener("popstate",t,!0),t(),n})}).call(t,n(2))},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},,,function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},,function(e,t,n){"use strict";var r;!function(i){function o(e,t,n){var r,i,o,a,s,l,c,u,v,_=0,y=[],b=0,w=!1,x=[],k=[],C=!1,S=!1;if(n=n||{},r=n.encoding||"UTF8",v=n.numRounds||1,o=m(t,r),v!==parseInt(v,10)||1>v)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,l=z,c=q,a=160,u=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(l=function(t,n){return H(t,n,e)},c=function(t,n,r,i){var o,a;if("SHA-224"===e||"SHA-256"===e)o=(n+65>>>9<<4)+15,a=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");o=(n+129>>>10<<5)+31,a=32}for(;t.length<=o;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[o]=4294967295&n,t[o-1]=n/4294967296|0,r=t.length,n=0;n<r;n+=a)i=H(t.slice(n,n+a),i,e);if("SHA-224"===e)t=[i[0],i[1],i[2],i[3],i[4],i[5],i[6]];else if("SHA-256"===e)t=i;else if("SHA-384"===e)t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[i[0].a,i[0].b,i[1].a,i[1].b,i[2].a,i[2].b,i[3].a,i[3].b,i[4].a,i[4].b,i[5].a,i[5].b,i[6].a,i[6].b,i[7].a,i[7].b]}return t},u=function(e){return e.slice()},"SHA-224"===e)s=512,a=224;else if("SHA-256"===e)s=512,a=256;else if("SHA-384"===e)s=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");s=1024,a=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var E=6;if(l=V,u=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},"SHA3-224"===e)s=1152,a=224;else if("SHA3-256"===e)s=1088,a=256;else if("SHA3-384"===e)s=832,a=384;else if("SHA3-512"===e)s=576,a=512;else if("SHAKE128"===e)s=1344,a=-1,E=31,S=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");s=1088,a=-1,E=31,S=!0}c=function(e,t,n,r,i){n=s;var o,a=E,l=[],c=n>>>5,u=0,d=t>>>5;for(o=0;o<d&&t>=n;o+=c)r=V(e.slice(o,o+c),r),t-=n;for(e=e.slice(o),t%=n;e.length<c;)e.push(0);for(o=t>>>3,e[o>>2]^=a<<24-o%4*8,e[c-1]^=128,r=V(e,r);32*l.length<i&&(e=r[u%5][u/5|0],l.push((255&e.b)<<24|(65280&e.b)<<8|(16711680&e.b)>>8|e.b>>>24),!(32*l.length>=i));)l.push((255&e.a)<<24|(65280&e.a)<<8|(16711680&e.a)>>8|e.a>>>24),u+=1,0===64*u%n&&V(null,r);return l}}i=U(e),this.setHMACKey=function(t,n,o){var u;if(!0===w)throw Error("HMAC key already set");if(!0===C)throw Error("Cannot set HMAC key after calling update");if(!0===S)throw Error("SHAKE is not supported for HMAC");if(r=(o||{}).encoding||"UTF8",n=m(n,r)(t),t=n.binLen,n=n.value,u=s>>>3,o=u/4-1,u<t/8){for(n=c(n,t,0,U(e),a);n.length<=o;)n.push(0);n[o]&=4294967040}else if(u>t/8){for(;n.length<=o;)n.push(0);n[o]&=4294967040}for(t=0;t<=o;t+=1)x[t]=909522486^n[t],k[t]=1549556828^n[t];i=l(x,i),_=s,w=!0},this.update=function(e){var t,n,r,a=0,c=s>>>5;for(t=o(e,y,b),e=t.binLen,n=t.value,t=e>>>5,r=0;r<t;r+=c)a+s<=e&&(i=l(n.slice(r,r+c),i),a+=s);_+=a,y=n.slice(a>>>5),b=e%s,C=!0},this.getHash=function(t,n){var r,o,s,l;if(!0===w)throw Error("Cannot call getHash after setting HMAC key");if(s=g(n),!0===S){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");a=s.shakeLen}switch(t){case"HEX":r=function(e){return d(e,a,s)};break;case"B64":r=function(e){return f(e,a,s)};break;case"BYTES":r=function(e){return h(e,a)};break;case"ARRAYBUFFER":try{o=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return p(e,a)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(l=c(y.slice(),b,_,u(i),a),o=1;o<v;o+=1)!0===S&&0!==a%32&&(l[l.length-1]&=4294967040<<24-a%32),l=c(l,a,0,U(e),a);return r(l)},this.getHMAC=function(t,n){var r,o,m,v;if(!1===w)throw Error("Cannot call getHMAC without first setting HMAC key");switch(m=g(n),t){case"HEX":r=function(e){return d(e,a,m)};break;case"B64":r=function(e){return f(e,a,m)};break;case"BYTES":r=function(e){return h(e,a)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return p(e,a)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return o=c(y.slice(),b,_,u(i),a),v=l(k,U(e)),v=c(o,a,s,v,a),r(v)}}function a(e,t){this.a=e,this.b=t}function s(e,t,n){var r,i,o,a,s,l=e.length;if(t=t||[0],n=n||0,s=n>>>3,0!==l%2)throw Error("String of HEX type must be in byte increments");for(r=0;r<l;r+=2){if(i=parseInt(e.substr(r,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(a=(r>>>1)+s,o=a>>>2;t.length<=o;)t.push(0);t[o]|=i<<8*(3-a%4)}return{value:t,binLen:4*l+n}}function l(e,t,n){var r,i,o,a,s=[],s=t||[0];for(n=n||0,i=n>>>3,r=0;r<e.length;r+=1)t=e.charCodeAt(r),a=r+i,o=a>>>2,s.length<=o&&s.push(0),s[o]|=t<<8*(3-a%4);return{value:s,binLen:8*e.length+n}}function c(e,t,n){var r,i,o,a,s,l,c=[],u=0,c=t||[0];if(n=n||0,t=n>>>3,-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(i=0;i<e.length;i+=4){for(s=e.substr(i,4),o=a=0;o<s.length;o+=1)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s[o]),a|=r<<18-6*o;for(o=0;o<s.length-1;o+=1){for(l=u+t,r=l>>>2;c.length<=r;)c.push(0);c[r]|=(a>>>16-8*o&255)<<8*(3-l%4),u+=1}}return{value:c,binLen:8*u+n}}function u(e,t,n){var r,i,o,a=[],a=t||[0];for(n=n||0,r=n>>>3,t=0;t<e.byteLength;t+=1)o=t+r,i=o>>>2,a.length<=i&&a.push(0),a[i]|=e[t]<<8*(3-o%4);return{value:a,binLen:8*e.byteLength+n}}function d(e,t,n){var r="";t/=8;var i,o;for(i=0;i<t;i+=1)o=e[i>>>2]>>>8*(3-i%4),r+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return n.outputUpper?r.toUpperCase():r}function f(e,t,n){var r,i,o,a="",s=t/8;for(r=0;r<s;r+=3)for(i=r+1<s?e[r+1>>>2]:0,o=r+2<s?e[r+2>>>2]:0,o=(e[r>>>2]>>>8*(3-r%4)&255)<<16|(i>>>8*(3-(r+1)%4)&255)<<8|o>>>8*(3-(r+2)%4)&255,i=0;4>i;i+=1)a+=8*r+6*i<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-i)&63):n.b64Pad;return a}function h(e,t){var n,r,i="",o=t/8;for(n=0;n<o;n+=1)r=e[n>>>2]>>>8*(3-n%4)&255,i+=String.fromCharCode(r);return i}function p(e,t){var n,r=t/8,i=new ArrayBuffer(r);for(n=0;n<r;n+=1)i[n]=e[n>>>2]>>>8*(3-n%4)&255;return i}function g(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!==e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function m(e,t){var n;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":n=s;break;case"TEXT":n=function(e,n,r){var i,o,a,s,l,c=[],u=[],d=0,c=n||[0];if(n=r||0,a=n>>>3,"UTF8"===t)for(i=0;i<e.length;i+=1)for(r=e.charCodeAt(i),u=[],128>r?u.push(r):2048>r?(u.push(192|r>>>6),u.push(128|63&r)):55296>r||57344<=r?u.push(224|r>>>12,128|r>>>6&63,128|63&r):(i+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(i)),u.push(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r)),o=0;o<u.length;o+=1){for(l=d+a,s=l>>>2;c.length<=s;)c.push(0);c[s]|=u[o]<<8*(3-l%4),d+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(i=0;i<e.length;i+=1){for(r=e.charCodeAt(i),"UTF16LE"===t&&(o=255&r,r=o<<8|r>>>8),l=d+a,s=l>>>2;c.length<=s;)c.push(0);c[s]|=r<<8*(2-l%4),d+=2}return{value:c,binLen:8*d+n}};break;case"B64":n=c;break;case"BYTES":n=l;break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=u;break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return n}function v(e,t){return e<<t|e>>>32-t}function _(e,t){return 32<t?(t-=32,new a(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new a(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function y(e,t){return e>>>t|e<<32-t}function b(e,t){var n=null,n=new a(e.a,e.b);return n=32>=t?new a(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new a(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function w(e,t){var n=null;return n=32>=t?new a(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new a(0,e.a>>>t-32)}function x(e,t,n){return e&t^~e&n}function k(e,t,n){return new a(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function C(e,t,n){return e&t^e&n^t&n}function S(e,t,n){return new a(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function E(e){return y(e,2)^y(e,13)^y(e,22)}function $(e){var t=b(e,28),n=b(e,34);return e=b(e,39),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function T(e){return y(e,6)^y(e,11)^y(e,25)}function A(e){var t=b(e,14),n=b(e,18);return e=b(e,41),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function D(e){return y(e,7)^y(e,18)^e>>>3}function O(e){var t=b(e,1),n=b(e,8);return e=w(e,7),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function P(e){return y(e,17)^y(e,19)^e>>>10}function R(e){var t=b(e,19),n=b(e,61);return e=w(e,6),new a(t.a^n.a^e.a,t.b^n.b^e.b)}function I(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function M(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function L(e,t,n,r,i){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function N(e,t){var n,r,i;return n=(65535&e.b)+(65535&t.b),r=(e.b>>>16)+(t.b>>>16)+(n>>>16),i=(65535&r)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(n>>>16),new a((65535&r)<<16|65535&n,i)}function j(e,t,n,r){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b),o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i>>>16),s=(65535&o)<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(o>>>16),o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i>>>16),new a((65535&o)<<16|65535&i,s)}function F(e,t,n,r,i){var o,s,l;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b)+(65535&i.b),s=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(i.b>>>16)+(o>>>16),l=(65535&s)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(65535&i.a)+(s>>>16),s=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(i.a>>>16)+(o>>>16),new a((65535&s)<<16|65535&o,l)}function B(e){var t,n=0,r=0;for(t=0;t<arguments.length;t+=1)n^=arguments[t].b,r^=arguments[t].a;return new a(r,n)}function U(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new a(3418070365,n[0]),new a(1654270250,n[1]),new a(2438529370,n[2]),new a(355462360,n[3]),new a(1731405415,n[4]),new a(41048885895,n[5]),new a(3675008525,n[6]),new a(1203062813,n[7])];break;case"SHA-512":n=[new a(t[0],4089235720),new a(t[1],2227873595),new a(t[2],4271175723),new a(t[3],1595750129),new a(t[4],2917565137),new a(t[5],725511199),new a(t[6],4215389547),new a(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)]}return n}function z(e,t){var n,r,i,o,a,s,l,c=[];for(n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=0;80>l;l+=1)c[l]=16>l?e[l]:v(c[l-3]^c[l-8]^c[l-14]^c[l-16],1),s=20>l?L(v(n,5),r&i^~r&o,a,1518500249,c[l]):40>l?L(v(n,5),r^i^o,a,1859775393,c[l]):60>l?L(v(n,5),C(r,i,o),a,2400959708,c[l]):L(v(n,5),r^i^o,a,3395469782,c[l]),a=o,o=i,i=v(r,30),r=n,n=s;return t[0]=I(n,t[0]),t[1]=I(r,t[1]),t[2]=I(i,t[2]),t[3]=I(o,t[3]),t[4]=I(a,t[4]),t}function q(e,t,n,r){var i;for(i=(t+65>>>9<<4)+15;e.length<=i;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[i]=4294967295&t,e[i-1]=t/4294967296|0,t=e.length,i=0;i<t;i+=16)r=z(e.slice(i,i+16),r);return r}function H(e,t,n){var r,i,o,s,l,c,u,d,f,h,p,g,m,v,_,y,b,w,B,U,z,q,H,V=[];if("SHA-224"===n||"SHA-256"===n)h=64,g=1,q=Number,m=I,v=M,_=L,y=D,b=P,w=E,B=T,z=C,U=x,H=W;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");h=80,g=2,q=a,m=N,v=j,_=F,y=O,b=R,w=$,B=A,z=S,U=k,H=G}for(n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],p=0;p<h;p+=1)16>p?(f=p*g,d=e.length<=f?0:e[f],f=e.length<=f+1?0:e[f+1],V[p]=new q(d,f)):V[p]=v(b(V[p-2]),V[p-7],y(V[p-15]),V[p-16]),d=_(u,B(s),U(s,l,c),H[p],V[p]),f=m(w(n),z(n,r,i)),u=c,c=l,l=s,s=m(o,d),o=i,i=r,r=n,n=m(d,f);return t[0]=m(n,t[0]),t[1]=m(r,t[1]),t[2]=m(i,t[2]),t[3]=m(o,t[3]),t[4]=m(s,t[4]),t[5]=m(l,t[5]),t[6]=m(c,t[6]),t[7]=m(u,t[7]),t}function V(e,t){var n,r,i,o,s=[],l=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=B(t[(r>>>1)%5][(r>>>1)/5|0],new a((255&e[r+1])<<24|(65280&e[r+1])<<8|(16711680&e[r+1])>>>8|e[r+1]>>>24,(255&e[r])<<24|(65280&e[r])<<8|(16711680&e[r])>>>8|e[r]>>>24));for(n=0;24>n;n+=1){for(o=U("SHA3-"),r=0;5>r;r+=1)s[r]=B(t[r][0],t[r][1],t[r][2],t[r][3],t[r][4]);for(r=0;5>r;r+=1)l[r]=B(s[(r+4)%5],_(s[(r+1)%5],1));for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=B(t[r][i],l[r]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)o[i][(2*r+3*i)%5]=_(t[r][i],Y[r][i]);for(r=0;5>r;r+=1)for(i=0;5>i;i+=1)t[r][i]=B(o[r][i],new a(~o[(r+1)%5][i].a&o[(r+2)%5][i].a,~o[(r+1)%5][i].b&o[(r+2)%5][i].b));t[0][0]=B(t[0][0],K[n])}return t}var W,G,Y,K;W=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],G=[new a(W[0],3609767458),new a(W[1],602891725),new a(W[2],3964484399),new a(W[3],2173295548),new a(W[4],4081628472),new a(W[5],3053834265),new a(W[6],2937671579),new a(W[7],3664609560),new a(W[8],2734883394),new a(W[9],1164996542),new a(W[10],1323610764),new a(W[11],3590304994),new a(W[12],4068182383),new a(W[13],991336113),new a(W[14],633803317),new a(W[15],3479774868),new a(W[16],2666613458),new a(W[17],944711139),new a(W[18],2341262773),new a(W[19],2007800933),new a(W[20],1495990901),new a(W[21],1856431235),new a(W[22],3175218132),new a(W[23],2198950837),new a(W[24],3999719339),new a(W[25],766784016),new a(W[26],2566594879),new a(W[27],3203337956),new a(W[28],1034457026),new a(W[29],2466948901),new a(W[30],3758326383),new a(W[31],168717936),new a(W[32],1188179964),new a(W[33],1546045734),new a(W[34],1522805485),new a(W[35],2643833823),new a(W[36],2343527390),new a(W[37],1014477480),new a(W[38],1206759142),new a(W[39],344077627),new a(W[40],1290863460),new a(W[41],3158454273),new a(W[42],3505952657),new a(W[43],106217008),new a(W[44],3606008344),new a(W[45],1432725776),new a(W[46],1467031594),new a(W[47],851169720),new a(W[48],3100823752),new a(W[49],1363258195),new a(W[50],3750685593),new a(W[51],3785050280),new a(W[52],3318307427),new a(W[53],3812723403),new a(W[54],2003034995),new a(W[55],3602036899),new a(W[56],1575990012),new a(W[57],1125592928),new a(W[58],2716904306),new a(W[59],442776044),new a(W[60],593698344),new a(W[61],3733110249),new a(W[62],2999351573),new a(W[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],K=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)],Y=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],r=function(){return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)},function(e,t,n){(function(e,t){/**!
 * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * FileAPI Flash shim for old browsers not supporting FormData
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */
!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(e){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,r){e.__listeners[n]=r,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,r,i){n(this),this.__url=r;try{e.apply(this,[t,r,i])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,e.apply(this,[t,"_fix_for_ie_crossdomain__",i]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,r){if("__setXHR_"===t){n(this);var i=r(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=r,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var r=arguments[0],i={url:n.__url,jsonp:!1,cache:!0,complete:function(e,r){e&&angular.isString(e)&&e.indexOf("#2174")!==-1&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&t(n,"status",function(){return 0===r.status&&e&&"abort"!==e?500:r.status}),void 0!==r.statusText&&t(n,"statusText",function(){return r.statusText}),t(n,"readyState",function(){return 4}),void 0!==r.response&&t(n,"response",function(){return r.response});var i=r.responseText||(e&&0===r.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return i}),t(n,"response",function(){return i}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};i.data={},i.files={};for(var o=0;o<r.data.length;o++){var a=r.data[o];null!=a.val&&null!=a.val.name&&null!=a.val.size&&null!=a.val.type?i.files[a.key]=a.val:i.data[a.key]=a.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function n(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function r(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function i(n){var r=0,i=0;if(e)return t(n).offset();if(n.offsetParent)do r+=n.offsetLeft-n.scrollLeft,i+=n.offsetTop-n.scrollTop,n=n.offsetParent;while(n);return{left:r,top:i}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=r(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var o,a,s,l,c,u=document.createElement("script"),d=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)o=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)a=window.FileAPI.jsPath;else for(s=0;s<d.length;s++)if(c=d[s].src,l=c.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),l>-1){a=c.substring(0,l+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=a),u.setAttribute("src",o||a+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(u)}FileAPI.ngfFixIE=function(e,t,o){if(!r())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var a=function(){var r=t.parent();e.attr("disabled")?r&&r.removeClass("js-fileapi-wrapper"):(t.attr("__ngf_flash_")||(t.unbind("change"),t.unbind("click"),t.bind("change",function(e){s.apply(this,[e]),o.apply(this,[e])}),t.attr("__ngf_flash_","true")),r.addClass("js-fileapi-wrapper"),n(e)||(r.css("position","absolute").css("top",i(e[0]).top+"px").css("left",i(e[0]).left+"px").css("width",e[0].offsetWidth+"px").css("height",e[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",e.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),t.css("width",e[0].offsetWidth+"px").css("height",e[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))};e.bind("mouseenter",a);var s=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var r={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",r)));var i;"load"===r.type?(e.onloadend&&e.onloadend(n("loadend",r)),i=n("load",r),e.onload&&e.onload(i),e.dispatchEvent(i)):"progress"===r.type?(i=n("progress",r),e.onprogress&&e.onprogress(i),e.dispatchEvent(i)):(i=n("error",r),e.onerror&&e.onerror(i),e.dispatchEvent(i))};this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,r)},this.readAsText=function(e){FileAPI.readAsText(e,r)}}),/**!
 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var n=angular.module("ngFileUpload",[]);n.version="12.2.13",n.service("UploadBase",["$http","$q","$timeout",function(e,t,r){function i(n){function i(e){c.notify&&c.notify(e),u.progressFunc&&r(function(){u.progressFunc(e)})}function o(e){return null!=n._start&&s?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function l(){e(n).then(function(e){if(s&&n._chunkSize&&!n._finished&&n._file){var t=n._file&&n._file.size||0;i({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),a.upload(n,!0)}else n._finished&&delete n._finished,c.resolve(e)},function(e){c.reject(e)},function(e){c.notify(e)})}n.method=n.method||"POST",n.headers=n.headers||{};var c=n._deferred=n._deferred||t.defer(),u=c.promise;return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,i(o(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,i(o(e)))},!1))}}),s?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,l()):n.resumeSizeUrl?e.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),l()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),l()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),l()):l(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,n)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,n)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return n.__XHR&&r(function(){n.__XHR.abort()}),u},u.xhr=function(e){return n.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(n.xhrFn),u},a.promisesCount++,u.finally&&u.finally instanceof Function&&u.finally(function(){a.promisesCount--}),u}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=this;a.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var s=this.isResumeSupported();this.isUploadInProgress=function(){return a.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&s){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function r(t,i,o){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))t.append(o,i);else if(a.isFile(i)){var s=n(i,t),l=o.split(",");l[1]&&(s.ngfName=l[1].replace(/^\s+|\s+$/g,""),o=l[0]),e._fileKey=e._fileKey||o,t.append(o,s,s.ngfName||s.name)}else if(angular.isObject(i)){if(i.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+o;i.$$ngfCircularDetection=!0;try{for(var c in i)if(i.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==e.objectKey?"[i]":e.objectKey;i.length&&parseInt(c)>-1&&(u=null==e.arrayKey?u:e.arrayKey),r(t,i[c],o+u.replace(/[ik]/g,c))}}finally{delete i.$$ngfCircularDetection}}else t.append(o,i)}function l(){e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,i=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var o=t[n];e.formDataAppender?e.formDataAppender(i,n,o):r(i,o,n)}return i})}return t||(e=o(e)),e._isDigested||(e._isDigested=!0,l()),i(e)},this.http=function(t){return t=o(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=a.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),i=e.headers("content-type")||"image/WebP",o=new window.Blob([t],{type:i}),a=n.match(/.*\/(.+?)(\?.*)?$/);a.length>1&&(o.name=a[1]),r.resolve(o)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=n.version}]),n.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,r,i){function o(e,t,n){var i=[l.emptyPromise()];return angular.forEach(e,function(r,o){0===r.type.indexOf("image/jpeg")&&l.attrGetter("ngfFixOrientation",t,n,{$file:r})&&i.push(l.happyPromise(l.applyExifRotation(r),r).then(function(t){e.splice(o,1,t)}))}),r.all(i)}function a(e,t,n,i){var o=l.attrGetter("ngfResize",t,n);if(!o||!l.isResizeSupported()||!e.length)return l.emptyPromise();if(o instanceof Function){var a=r.defer();return o(e).then(function(r){s(r,e,t,n,i).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})}return s(o,e,t,n,i)}function s(e,t,n,i,o){function a(r,a){if(0===r.type.indexOf("image")){if(e.pattern&&!l.validatePattern(r,e.pattern))return;e.resizeIf=function(e,t){return l.attrGetter("ngfResizeIf",n,i,{$width:e,$height:t,$file:r})};var c=l.resize(r,e);s.push(c),c.then(function(e){t.splice(a,1,e)},function(e){r.$error="resize",(r.$errorMessages=r.$errorMessages||{}).resize=!0,r.$errorParam=(e?(e.message?e.message:e)+": ":"")+(r&&r.name),o.$ngfValidations.push({name:"resize",valid:!1}),l.applyModelValidation(o,t)})}}for(var s=[l.emptyPromise()],c=0;c<t.length;c++)a(t[c],c);return r.all(s)}var l=i;return l.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=l.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},l.attrGetter=function(t,n,r,i){var o=this.getAttrWithDefaults(n,t);if(!r)return o;try{return i?e(o)(r,i):e(o)(r)}catch(e){if(t.search(/min|max|pattern/i))return o;throw e}},l.shouldUpdateOn=function(e,t,n){var r=l.attrGetter("ngfModelOptions",t,n);return!r||!r.updateOn||r.updateOn.split(" ").indexOf(e)>-1},l.emptyPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},l.rejectPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},l.happyPromise=function(e,n){var i=r.defer();return e.then(function(e){i.resolve(e)},function(e){t(function(){throw e}),i.resolve(n)}),i.promise},l.updateModel=function(n,r,i,s,c,u,d){function f(o,a,c,d,f){r.$$ngfPrevValidFiles=o,r.$$ngfPrevInvalidFiles=a;var h=o&&o.length?o[0]:null,p=a&&a.length?a[0]:null;n&&(l.applyModelValidation(n,o),n.$setViewValue(f?h:o)),s&&e(s)(i,{$files:o,$file:h,$newFiles:c,$duplicateFiles:d,$invalidFiles:a,$invalidFile:p,$event:u});var g=l.attrGetter("ngfModelInvalid",r);g&&t(function(){e(g).assign(i,f?p:a)}),t(function(){})}function h(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<v.length;n++)if(e(t,v[n]))return!0;for(n=0;n<_.length;n++)if(e(t,_[n]))return!0;return!1}if(c){m=[],y=[];for(var n=0;n<c.length;n++)t(c[n])?y.push(c[n]):m.push(c[n])}}function p(e){return angular.isArray(e)?e:[e]}function g(){function e(){t(function(){f(x?v.concat(w):w,x?_.concat(b):b,c,y,k)},S&&S.debounce?S.debounce.change||S.debounce:0)}var o=C?m:w;a(o,r,i,n).then(function(){C?l.validate(m,x?v.length:0,n,r,i).then(function(t){w=t.validsFiles,b=t.invalidsFiles,e()}):e()},function(){for(var t=0;t<o.length;t++){var n=o[t];if("resize"===n.$error){var r=w.indexOf(n);r>-1&&(w.splice(r,1),b.push(n)),e()}}})}var m,v,_,y=[],b=[],w=[];v=r.$$ngfPrevValidFiles||[],_=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(v=p(n.$modelValue));var x=l.attrGetter("ngfKeep",r,i);m=(c||[]).slice(0),"distinct"!==x&&l.attrGetter("ngfKeepDistinct",r,i)!==!0||h(r,i);var k=!x&&!l.attrGetter("ngfMultiple",r,i)&&!l.attrGetter("multiple",r);if(!x||m.length){l.attrGetter("ngfBeforeModelChange",r,i,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:m,$duplicateFiles:y,$event:u});var C=l.attrGetter("ngfValidateAfterResize",r,i),S=l.attrGetter("ngfModelOptions",r,i);l.validate(m,x?v.length:0,n,r,i).then(function(e){d?f(m,[],c,y,k):(S&&S.allowInvalid||C?w=m:(w=e.validFiles,b=e.invalidFiles),l.attrGetter("ngfFixOrientation",r,i)&&l.isExifSupported()?o(w,r,i).then(function(){g()}):g())})}},l}]),n.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return e.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(e)}function o(e,t,n,r,o,s,l,c){function u(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return y("ngfChange")||y("ngfSelect")}function f(t){if(c.shouldUpdateOn("change",n,e)){var i=t.__files_||t.target&&t.target.files,o=[];if(!i)return;for(var a=0;a<i.length;a++)o.push(i[a]);c.updateModel(r,n,e,d(),o.length?o:null,t)}}function h(e,r){function i(t){e.attr("id","ngf-"+t),r.attr("id","ngf-label-"+t)}for(var o=0;o<t[0].attributes.length;o++){var a=t[0].attributes[o];"type"!==a.name&&"class"!==a.name&&"style"!==a.name&&("id"===a.name?(i(a.value),b.push(n.$observe("id",i))):e.attr(a.name,a.value||"required"!==a.name&&"multiple"!==a.name?a.value:a.name))}}function p(){if(u())return t;var e=angular.element('<input type="file">'),n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),h(e,n),a.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}function g(n){if(t.attr("disabled"))return!1;if(!y("ngfSelectDisabled",e)){var r=m(n);if(null!=r)return r;v(n);try{u()||document.body.contains(k[0])||(a.push({el:t,ref:k.parent()}),document.body.appendChild(k.parent()[0]),k.bind("change",f))}catch(e){}return i(navigator.userAgent)?setTimeout(function(){k[0].click()},0):k[0].click(),!1}}function m(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return x=t[0].clientX,w=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,r=t[0].clientY;if(Math.abs(n-x)>20||Math.abs(r-w)>20)return e.stopPropagation(),e.preventDefault(),!1}return!0}}function v(t){c.shouldUpdateOn("click",n,e)&&k.val()&&(k.val(null),c.updateModel(r,n,e,d(),null,t,!0))}function _(e){if(k&&!k.attr("__ngf_ie10_Fix_")){if(!k[0].parentNode)return void(k=null);e.preventDefault(),e.stopPropagation(),k.unbind("click");var t=k.clone();return k.replaceWith(t),k=t,k.attr("__ngf_ie10_Fix_","true"),k.bind("change",f),k.bind("click",_),k[0].click(),!1}k.removeAttr("__ngf_ie10_Fix_")}var y=function(e,t){return c.attrGetter(e,n,t)};c.registerModelChangeValidator(r,n,e);var b=[];y("ngfMultiple")&&b.push(e.$watch(y("ngfMultiple"),function(){k.attr("multiple",y("ngfMultiple",e))})),y("ngfCapture")&&b.push(e.$watch(y("ngfCapture"),function(){k.attr("capture",y("ngfCapture",e))})),y("ngfAccept")&&b.push(e.$watch(y("ngfAccept"),function(){k.attr("accept",y("ngfAccept",e))})),b.push(n.$observe("accept",function(){k.attr("accept",y("accept"))}));var w=0,x=0,k=t;u()||(k=p()),k.bind("change",f),u()?t.bind("click",v):t.bind("click touchstart touchend",g),navigator.appVersion.indexOf("MSIE 10")!==-1&&k.bind("click",_),r&&r.$formatters.push(function(e){return null!=e&&0!==e.length||k.val()&&k.val(null),e}),e.$on("$destroy",function(){u()||k.parent().remove(),angular.forEach(b,function(e){e()})}),s(function(){for(var e=0;e<a.length;e++){var t=a[e];document.body.contains(t.el[0])||(a.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,k,f)}var a=[];return{restrict:"AEC",require:"?ngModel",link:function(i,a,s,l){o(i,a,s,l,e,t,n,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,r,i,o,a,s,l){function c(e){var a=t.attrGetter("ngfNoObjectUrl",o,r);t.dataUrl(e,a).finally(function(){n(function(){var t=(a?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;l?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}n(function(){var n=r.$watch(o[a],function(n){var u=s;if("ngfThumbnail"===a&&(u||(u={width:i[0].naturalWidth||i[0].clientWidth,height:i[0].naturalHeight||i[0].clientHeight}),0===u.width&&window.getComputedStyle)){var d=getComputedStyle(i[0]);d.width&&d.width.indexOf("px")>-1&&d.height&&d.height.indexOf("px")>-1&&(u={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))})}return angular.isString(n)?(i.removeClass("ng-hide"),l?i.css("background-image","url('"+n+"')"):i.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(i[0]))||l&&0!==n.type.indexOf("image")?i.addClass("ng-hide"):u&&t.isResizeSupported()?(u.resizeIf=function(e,i){return t.attrGetter("ngfResizeIf",o,r,{$width:e,$height:i,$file:n})},t.resize(n,u).then(function(e){c(e)},function(e){throw e})):c(n))});r.$on("$destroy",function(){n()})})}n.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,function(n){r.dataUrl(n,!0).finally(function(){if(i++,i===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var o=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(o)return o;var a=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||e.size<2e4)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var o;try{o=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl="",a.reject()})}t(function(){if(e.$ngfBlobUrl=o,o){a.resolve(o,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:o,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var s=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),r.blobUrlsTotalSize-=s.size}}})}else{var s=new FileReader;s.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,a.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},s.onerror=function(){t(function(){e.$ngfDataUrl="",a.reject()})},s.readAsDataURL(e)}}else t(function(){e[i?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),o=i?e.$$ngfDataUrlPromise=a.promise:e.$$ngfBlobUrlPromise=a.promise,o.finally(function(){delete e[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},r}]),n.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfSrc",e.attrGetter("ngfResize",o,r),!1)}}}]),n.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfBackground",e.attrGetter("ngfResize",o,r),!0)}}}]),n.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){var a=e.attrGetter("ngfSize",o,r);t(e,n,r,i,o,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",o,r))}}}]),n.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),n.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var o=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!o?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&o?i?t.trustAsResourceUrl(o):o:n)||"")}}])}(),n.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var o=0;o<i.length;o++){var a=r(i[o]);a.regexp?(t+="("+a.regexp+")",o<i.length-1&&(t+="|")):n=n.concat(a.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function i(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var o=e;return o.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");i=null!=e.type&&o.test(e.type)||null!=e.name&&o.test(e.name)}for(var a=n.excludes.length;a--;){var s=new RegExp(n.excludes[a],"i");i=i&&(null==e.type||s.test(e.type))&&(null==e.name||s.test(e.name))}return i},o.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},o.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(r){if(e.$dirty){var i=r;r&&!angular.isArray(r)&&(i=[r]),o.validate(i,0,e,t,n).then(function(){o.applyModelValidation(e,i)})}return r})},o.applyModelValidation=function(e,t){i(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},o.getValidationAttr=function(e,t,n,r,i){var a="ngf"+n[0].toUpperCase()+n.substr(1),s=o.attrGetter(a,e,t,{$file:i});if(null==s&&(s=o.attrGetter("ngfValidate",e,t,{$file:i}))){var l=(r||n).split(".");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},o.validate=function(e,n,r,i,a){function s(t,n,s){if(e){for(var l=e.length,c=null;l--;){var h=e[l];if(h){var p=o.getValidationAttr(i,a,t,n,h);null!=p&&(s(h,p,l)||(u.indexOf(t)===-1?(h.$error=t,(h.$errorMessages=h.$errorMessages||{})[t]=!0,h.$errorParam=p,f.indexOf(h)===-1&&f.push(h),d||e.splice(l,1),c=!1):e.splice(l,1)))}}null!==c&&r.$ngfValidations.push({name:t,valid:c})}}function l(n,s,l,h,p){function g(t,r,i){function o(o){if(o())if(u.indexOf(n)===-1){if(r.$error=n,(r.$errorMessages=r.$errorMessages||{})[n]=!0,r.$errorParam=i,f.indexOf(r)===-1&&f.push(r),!d){var a=e.indexOf(r);a>-1&&e.splice(a,1)}t.resolve(!1)}else{var s=e.indexOf(r);s>-1&&e.splice(s,1),t.resolve(!0)}else t.resolve(!0)}null!=i?h(r,i).then(function(e){o(function(){return!p(e,i)})},function(){o(function(){return c("ngfValidateForce",{$file:r})})}):t.resolve(!0)}var m=[o.emptyPromise(!0)];e&&(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var r=t.defer();return m.push(r.promise),!l||null!=e.type&&0===e.type.search(l)?void("dimensions"===n&&null!=o.attrGetter("ngfDimensions",i)?o.imageDimensions(e).then(function(t){g(r,e,c("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){r.resolve(!1)}):"duration"===n&&null!=o.attrGetter("ngfDuration",i)?o.mediaDuration(e).then(function(t){g(r,e,c("ngfDuration",{$file:e,$duration:t}))},function(){r.resolve(!1)}):g(r,e,o.getValidationAttr(i,a,n,s,e))):void r.resolve(!0)}));var v=t.defer();return t.all(m).then(function(e){for(var t=!0,i=0;i<e.length;i++)if(!e[i]){t=!1;break}r.$ngfValidations.push({name:n,valid:t}),v.resolve(t)}),v.promise}r=r||{},r.$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(e){e.valid=!0});var c=function(e,t){return o.attrGetter(e,i,a,t)},u=(o.attrGetter("ngfIgnoreInvalid",i,a)||"").split(" "),d=o.attrGetter("ngfRunAllValidations",i,a);if(null==e||0===e.length)return o.emptyPromise({validFiles:e,invalidFiles:[]});e=void 0===e.length?[e]:e.slice(0);var f=[];s("pattern",null,o.validatePattern),s("minSize","size.min",function(e,t){return e.size+.1>=o.translateScalars(t)}),s("maxSize","size.max",function(e,t){return e.size-.1<=o.translateScalars(t)});var h=0;if(s("maxTotalSize",null,function(t,n){return h+=t.size,!(h>o.translateScalars(n))||(e.splice(0,e.length),!1)}),s("validateFn",null,function(e,t){return t===!0||null===t||""===t}),!e.length)return o.emptyPromise({validFiles:[],invalidFiles:f});var p=t.defer(),g=[];return g.push(l("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),g.push(l("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),g.push(l("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),g.push(l("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),g.push(l("dimensions",null,/image/,function(e,t){return o.emptyPromise(t)},function(e){return e})),g.push(l("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-o.ratioToFloat(n[i]))<.01&&(r=!0);return r})),g.push(l("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-o.ratioToFloat(t)<1e-4})),g.push(l("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-o.ratioToFloat(t)>-1e-4})),g.push(l("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=o.translateScalars(t)})),g.push(l("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=o.translateScalars(t)})),g.push(l("duration",null,/audio|video/,function(e,t){return o.emptyPromise(t)},function(e){return e})),g.push(l("validateAsyncFn",null,null,function(e,t){return t},function(e){return e===!0||null===e||""===e})),t.all(g).then(function(){if(d)for(var t=0;t<e.length;t++){var r=e[t];r.$error&&e.splice(t--,1)}d=!1,s("maxFiles",null,function(e,t,r){return n+r<t}),p.resolve({validFiles:e,invalidFiles:f})}),p.promise},o.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void i.reject("not image"):void o.dataUrl(e).then(function(t){function r(){var t=s[0].naturalWidth||s[0].clientWidth,n=s[0].naturalHeight||s[0].clientHeight;s.remove(),e.$ngfWidth=t,e.$ngfHeight=n,i.resolve({width:t,height:n})}function o(){s.remove(),i.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].clientWidth?r():l++>10?o():a())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");s.on("load",r),s.on("error",o);var l=0;a(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){i.reject("load error")})}),e.$ngfDimensionPromise=i.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},o.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void i.reject("not media"):void o.dataUrl(e).then(function(t){function r(){var t=s[0].duration;e.$ngfDuration=t,s.remove(),i.resolve(t)}function o(){s.remove(),i.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].duration?r():l>10?o():a())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",r),s.on("error",o);var l=0;a(),angular.element(document.body).append(s)},function(){i.reject("load error")})}),e.$ngfDurationPromise=i.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},o}]),n.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,r=function(e,t,n,r,i){var o=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*o,height:t*o,marginX:e*o-n,marginY:t*o-r}},i=function(e,i,o,a,s,l,c,u){var d=t.defer(),f=document.createElement("canvas"),h=document.createElement("img");return h.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(h),h.onload=function(){var e=h.width,t=h.height;if(h.parentNode.removeChild(h),null!=u&&u(e,t)===!1)return void d.reject("resizeIf");try{if(l){var p=n.ratioToFloat(l),g=e/t;g<p?(i=e,o=i/p):(o=t,i=o*p)}i||(i=e),o||(o=t);var m=r(e,t,i,o,c);f.width=Math.min(m.width,i),f.height=Math.min(m.height,o);var v=f.getContext("2d");v.drawImage(h,Math.min(0,-m.marginX/2),Math.min(0,-m.marginY/2),m.width,m.height),d.resolve(f.toDataURL(s||"image/WebP",a||.934))}catch(e){d.reject(e)}},h.onerror=function(){h.parentNode.removeChild(h),d.reject()},h.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],o=atob(r[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var l=new window.Blob([s],{type:i});return l.name=t,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,r){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var o=t.defer();return n.dataUrl(e,!0).then(function(t){i(t,r.width,r.height,r.quality,r.type||e.type,r.ratio,r.centerCrop,r.resizeIf).then(function(i){if("image/jpeg"===e.type&&r.restoreExif!==!1)try{i=n.restoreExif(t,i)}catch(e){setTimeout(function(){throw e},1)}try{var a=n.dataUrltoBlob(i,e.name,e.size);o.resolve(a)}catch(e){o.reject(e)}},function(t){"resizeIf"===t&&o.resolve(e),o.reject(t)})},function(e){o.reject(e)}),o.promise},n}]),function(){function e(e,n,r,i,o,a,s,l,c,u){function d(){return n.attr("disabled")||_("ngfDropDisabled",e)}function f(t,n,r){if(t){var i;try{i=t&&t.getData&&t.getData("text/html")}catch(e){}m(t.items,t.files,_("ngfAllowDir",e)!==!1,_("multiple")||_("ngfMultiple",e)).then(function(e){e.length?h(e,n):p(r,i).then(function(e){h(e,n)})})}}function h(t,n){l.updateModel(i,r,e,_("ngfChange")||_("ngfDrop"),t,n)}function p(t,n){if(!l.shouldUpdateOn(t,r,e)||"string"!=typeof n)return l.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){i.push(n)});var o=[],a=[];if(i.length){angular.forEach(i,function(e){o.push(l.urlToBlob(e).then(function(e){a.push(e)}))});var s=u.defer();return u.all(o).then(function(){s.resolve(a)},function(e){s.reject(e)}),s.promise}return l.emptyPromise()}function g(e,t,n,r){var i=_("ngfDragOverClass",e,{$event:n}),o="dragover";if(angular.isString(i))o=i;else if(i&&(i.delay&&(x=i.delay),i.accept||i.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=i.pattern||_("ngfPattern",e,{$event:n}),c=a.length;c--;){if(!l.validatePattern(a[c],s)){o=i.reject;break}o=i.accept}else o=i.accept}r(o)}function m(t,n,i,o){function a(e,t){var n=u.defer();if(null!=e)if(e.isDirectory){var r=[l.emptyPromise()];if(f){var i={type:"directory"};i.name=i.path=(t||"")+e.name,h.push(i)}var o=e.createReader(),s=[],g=function(){o.readEntries(function(i){try{i.length?(s=s.concat(Array.prototype.slice.call(i||[],0)),g()):(angular.forEach(s.slice(0),function(n){h.length<=c&&p<=d&&r.push(a(n,(t?t:"")+e.name+"/"))}),u.all(r).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(e){n.reject(e)}},function(e){n.reject(e)})};g()}else e.file(function(e){try{e.path=(t?t:"")+e.name,f&&(e=l.rename(e,e.path)),h.push(e),p+=e.size,n.resolve()}catch(e){n.reject(e)}},function(e){n.reject(e)});return n.promise}var c=l.getValidationAttr(r,e,"maxFiles");null==c&&(c=Number.MAX_VALUE);var d=l.getValidationAttr(r,e,"maxTotalSize");null==d&&(d=Number.MAX_VALUE);var f=_("ngfIncludeDir",e),h=[],p=0,g=[l.emptyPromise()];if(t&&t.length>0&&"file:"!==s.location.protocol)for(var m=0;m<t.length;m++){if(t[m].webkitGetAsEntry&&t[m].webkitGetAsEntry()&&t[m].webkitGetAsEntry().isDirectory){var v=t[m].webkitGetAsEntry();if(v.isDirectory&&!i)continue;null!=v&&g.push(a(v))}else{var y=t[m].getAsFile();null!=y&&(h.push(y),p+=y.size)}if(h.length>c||p>d||!o&&h.length>0)break}else if(null!=n)for(var b=0;b<n.length;b++){var w=n.item(b);if((w.type||w.size>0)&&(h.push(w),p+=w.size),h.length>c||p>d||!o&&h.length>0)break}var x=u.defer();return u.all(g).then(function(){if(o||f||!h.length)x.resolve(h);else{for(var e=0;h[e]&&"directory"===h[e].type;)e++;x.resolve([h[e]])}},function(e){x.reject(e)}),x.promise}var v=t(),_=function(e,t,n){return l.attrGetter(e,r,t,n)};if(_("dropAvailable")&&a(function(){e[_("dropAvailable")]?e[_("dropAvailable")].value=v:e[_("dropAvailable")]=v}),!v)return void(_("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));null==_("ngfSelect")&&l.registerModelChangeValidator(i,r,e);var y,b=null,w=o(_("ngfStopPropagation")),x=1;n[0].addEventListener("dragover",function(t){if(!d()&&l.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),w(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}a.cancel(b),y||(y="C",g(e,r,t,function(r){y=r,n.addClass(y),_("ngfDrag",e,{$isDragging:!0,$class:y,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),w(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),w(e)&&t.stopPropagation(),b=a(function(){y&&n.removeClass(y),y=null,_("ngfDrag",e,{$isDragging:!1,$event:t})},x||100))},!1),n[0].addEventListener("drop",function(t){
!d()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),w(e)&&t.stopPropagation(),y&&n.removeClass(y),y=null,f(t.dataTransfer,t,"dropUrl"))},!1),n[0].addEventListener("paste",function(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&_("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&l.shouldUpdateOn("paste",r,e)&&f(t.clipboardData||t.originalEvent.clipboardData,t,"pasteUrl")},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&_("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}n.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(t,n,r,i,o,a){return{restrict:"AEC",require:"?ngModel",link:function(s,l,c,u){e(s,l,c,u,t,n,r,i,o,a)}}}]),n.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),n.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,o,a){if(t()){var s=e(r.attrGetter("ngfDropAvailable",a));n(function(){s(i),s.assign&&s.assign(i,!0)})}}}])}(),n.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:return e.transform(0,-1,1,0,0,n)}}function r(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}var i=e;return i.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&i.isResizeSupported()},i.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,o=2;o<i;){var a=r.getUint16(o,!1);if(o+=2,65505===a){if(1165519206!==r.getUint32(o+=2,!1))return n.resolve(t);var s=18761===r.getUint16(o+=6,!1);o+=r.getUint32(o+4,s);var l=r.getUint16(o,s);o+=2;for(var c=0;c<l;c++)if(274===r.getUint16(o+12*c,s)){var u=r.getUint16(o+12*c+8,s);return u>=2&&u<=8&&(r.setUint16(o+12*c+8,1,s),t.fixedArrayBuffer=e.target.result),t.orientation=u,n.resolve(t)}}else{if(65280!==(65280&a))break;o+=r.getUint16(o,!1)}}return n.resolve(t)},n.promise},i.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return i.emptyPromise(e);var o=t.defer();return i.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?o.resolve(e):void i.dataUrl(e,!0).then(function(a){var s=document.createElement("canvas"),l=document.createElement("img");l.onload=function(){try{s.width=t.orientation>4?l.height:l.width,s.height=t.orientation>4?l.width:l.height;var a=s.getContext("2d");n(a,t.orientation,l.width,l.height),a.drawImage(l,0,0);var c=s.toDataURL(e.type||"image/WebP",.934);c=i.restoreExif(r(t.fixedArrayBuffer),c);var u=i.dataUrltoBlob(c,e.name);o.resolve(u)}catch(e){return o.reject(e)}},l.onerror=function(){o.reject()},l.src=a},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise},i.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,r,i,o,a="",s="",l="",c=0;do t=e[c++],n=e[c++],s=e[c++],r=t>>2,i=(3&t)<<4|n>>4,o=(15&n)<<2|s>>6,l=63&s,isNaN(n)?o=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),t=n=s="",r=i=o=l="";while(c<e.length);return a},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255===t[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),o=r.slice(0,i),a=r.slice(i),s=o;return s=s.concat(t),s=s.concat(a)},n.slice2Segments=function(e){for(var t=0,n=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var r=256*e[t+2]+e[t+3],i=t+r+2,o=e.slice(t,i);n.push(o),t=i}if(t>e.length)break}return n},n.decode64=function(e){var t,n,r,i,o,a="",s="",l=0,c=[],u=/[^A-Za-z0-9\+\/\=]/g;u.exec(e),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=this.KEY_STR.indexOf(e.charAt(l++)),i=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=r<<2|i>>4,n=(15&i)<<4|o>>2,a=(3&o)<<6|s,c.push(t),64!==o&&c.push(n),64!==s&&c.push(a),t=n=a="",r=i=o=s="";while(l<e.length);return c},n.restore(e,t)},i}])}).call(t,n(1),n(1))},function(e,t,n){n(498),e.exports="ngFileUpload"},,,,function(e,t,n){/*!
 * Pusher JavaScript Library v3.2.4
 * http://pusher.com/
 *
 * Copyright 2016, Pusher
 * Released under the MIT licence.
 */
!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1);e.exports=r.default},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw"You must pass your app key when you instantiate Pusher."}var i=n(2),o=n(9),a=n(23),s=n(38),l=n(39),c=n(40),u=n(12),d=n(5),f=n(62),h=n(8),p=n(42),g=function(){function e(t,n){var u=this;r(t),n=n||{},this.key=t,this.config=o.extend(f.getGlobalConfig(),n.cluster?f.getClusterConfig(n.cluster):{},n),this.channels=p.default.createChannels(),this.global_emitter=new a.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new s.default(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:l.default.INFO,version:d.default.VERSION}),this.config.disableStats||(this.timelineSender=p.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+i.default.TimelineTransport.name}));var g=function(e){var t=o.extend({},u.config,e);return c.build(i.default.getDefaultStrategy(t),t)};this.connection=p.default.createConnectionManager(this.key,o.extend({getStrategy:g,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){u.subscribeAll(),u.timelineSender&&u.timelineSender.send(u.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=u.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||u.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",function(){u.channels.disconnect()}),this.connection.bind("disconnected",function(){u.channels.disconnect()}),this.connection.bind("error",function(e){h.default.warn("Error",e)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.log=function(t){e.logToConsole&&window.console&&window.console.log&&window.console.log(t)},e.getClientFeatures=function(){return o.keys(o.filterObject({ws:i.default.Transports.ws},function(e){return e.isSupported({})}))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isEncrypted(),t=this.timelineSender;this.timelineSenderTimer=new u.PeriodicTimer(6e4,function(){t.send(e)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t){return this.global_emitter.bind(e,t),this},e.prototype.unbind=function(e,t){return this.global_emitter.unbind(e,t),this},e.prototype.bind_all=function(e){return this.global_emitter.bind_all(e),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e),t&&"connected"===this.connection.state&&t.unsubscribe())},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.isEncrypted=function(){return"https:"===i.default.getProtocol()||Boolean(this.config.encrypted)},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=i.default,e.ScriptReceivers=i.default.ScriptReceivers,e.DependenciesReceivers=i.default.DependenciesReceivers,e.auth_callbacks=i.default.auth_callbacks,e}();t.__esModule=!0,t.default=g,i.default.setup(g)},function(e,t,n){"use strict";var r=n(3),i=n(7),o=n(14),a=n(15),s=n(16),l=n(4),c=n(17),u=n(18),d=n(25),f=n(26),h=n(27),p=n(28),g={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:l.ScriptReceivers,DependenciesReceivers:r.DependenciesReceivers,getDefaultStrategy:f.default,Transports:u.default,transportConnectionInitializer:h.default,HTTPFactory:p.default,TimelineTransport:c.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():r.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:i.default,jsonp:o.default}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new s.default(e,t)},createScriptRequest:function(e){return new a.default(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var e=this.getXHRAPI();return new e},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return d.Network},createWebSocket:function(e){var t=this.getWebSocketAPI();return new t(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};t.__esModule=!0,t.default=g},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(6);t.DependenciesReceivers=new r.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),t.Dependencies=new o.default({cdn_http:i.default.cdn_http,cdn_https:i.default.cdn_https,version:i.default.VERSION,suffix:i.default.dependency_suffix,receivers:t.DependenciesReceivers})},function(e,t){"use strict";var n=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,o=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=o,{number:t,id:n,name:r,callback:o}},e.prototype.remove=function(e){delete this[e.number]},e}();t.ScriptReceiverFactory=n,t.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(e,t){"use strict";var n={VERSION:"3.2.4",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""};t.__esModule=!0,t.default=n},function(e,t,n){"use strict";var r=n(4),i=n(2),o=function(){function e(e){this.options=e,this.receivers=e.receivers||r.ScriptReceivers,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var o=i.default.createScriptRequest(r.getPath(e,t)),a=r.receivers.create(function(t){if(r.receivers.remove(a),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var i=function(e){e||o.cleanup()},s=0;s<n.length;s++)n[s](t,i)}});o.send(a)}},e.prototype.getRoot=function(e){var t,n=i.default.getDocument().location.protocol;return t=e&&e.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}();t.__esModule=!0,t.default=o},function(e,t,n){"use strict";var r=n(8),i=n(2),o=function(e,t,n){var o,a=this;o=i.default.createXHR(),o.open("POST",a.options.authEndpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var s in this.authOptions.headers)o.setRequestHeader(s,this.authOptions.headers[s]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e,t=!1;try{e=JSON.parse(o.responseText),t=!0}catch(e){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+o.responseText)}t&&n(!1,e)}else r.default.warn("Couldn't get auth info from your webapp",o.status),n(!0,o.status)},o.send(this.composeQuery(t)),o};t.__esModule=!0,t.default=o},function(e,t,n){"use strict";var r=n(9),i=n(1),o={debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];i.default.log&&i.default.log(r.stringify.apply(this,arguments))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=r.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(n):window.console.log&&window.console.log(n)),i.default.log&&i.default.log(n)}};t.__esModule=!0,t.default=o},function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var o=t[i];for(var a in o)o[a]&&o[a].constructor&&o[a].constructor===Object?e[a]=r(e[a]||{},o[a]):e[a]=o[a]}return e}function i(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(b(arguments[t]));return e.join(" : ")}function o(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function a(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function s(e){var t=[];return a(e,function(e,n){t.push(n)}),t}function l(e){var t=[];return a(e,function(e){t.push(e)}),t}function c(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function u(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function d(e,t){var n={};return a(e,function(e,r){n[r]=t(e)}),n}function f(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function h(e,t){var n={};return a(e,function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)}),n}function p(e){var t=[];return a(e,function(e,n){t.push([n,e])}),t}function g(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function m(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function v(e){return d(e,function(e){return"object"==typeof e&&(e=b(e)),encodeURIComponent(w.default(e.toString()))})}function _(e){var t=h(e,function(e){return void 0!==e}),n=u(p(v(t)),x.default.method("join","=")).join("&");return n}function y(e){var t=[],n=[];return function e(r,i){var o,a,s;switch(typeof r){case"object":if(!r)return null;for(o=0;o<t.length;o+=1)if(t[o]===r)return{$ref:n[o]};if(t.push(r),n.push(i),"[object Array]"===Object.prototype.toString.apply(r))for(s=[],o=0;o<r.length;o+=1)s[o]=e(r[o],i+"["+o+"]");else{s={};for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=e(r[a],i+"["+JSON.stringify(a)+"]"))}return s;case"number":case"string":case"boolean":return r}}(e,"$")}function b(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(y(e))}}var w=n(10),x=n(11);t.extend=r,t.stringify=i,t.arrayIndexOf=o,t.objectApply=a,t.keys=s,t.values=l,t.apply=c,t.map=u,t.mapObject=d,t.filter=f,t.filterObject=h,t.flatten=p,t.any=g,t.all=m,t.encodeParamsObject=v,t.buildQueryString=_,t.decycleObject=y,t.safeJSONStringify=b},function(e,t,n){"use strict";function r(e){return f(u(e))}t.__esModule=!0,t.default=r;for(var i=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={},s=0,l=o.length;s<l;s++)a[o.charAt(s)]=s;var c=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|63&t):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|63&t)},u=function(e){return e.replace(/[^\x00-\x7F]/g,c)},d=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)];return r.join("")},f=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,d)}},function(e,t,n){"use strict";var r=n(12),i={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new r.OneOffTimer(0,e)},method:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}};t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function r(e){window.clearTimeout(e)}function i(e){window.clearInterval(e)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(13),s=function(e){function t(t,n){e.call(this,setTimeout,r,t,function(e){return n(),null})}return o(t,e),t}(a.default);t.OneOffTimer=s;var l=function(e){function t(t,n){e.call(this,setInterval,i,t,function(e){return n(),e})}return o(t,e),t}(a.default);t.PeriodicTimer=l},function(e,t){"use strict";var n=function(){function e(e,t,n,r){var i=this;this.clear=t,this.timer=e(function(){i.timer&&(i.timer=r(i.timer))},n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}();t.__esModule=!0,t.default=n},function(e,t,n){"use strict";var r=n(8),i=function(e,t,n){void 0!==this.authOptions.headers&&r.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),a=o.createElement("script");e.auth_callbacks[i]=function(e){n(!1,e)};var s="Pusher.auth_callbacks['"+i+"']";a.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+"&"+this.composeQuery(t);var l=o.getElementsByTagName("head")[0]||o.documentElement;l.insertBefore(a,l.firstChild)};t.__esModule=!0,t.default=i},function(e,t){"use strict";var n=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}();t.__esModule=!0,t.default=n},function(e,t,n){"use strict";var r=n(9),i=n(2),o=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t=r.buildQueryString(this.data),n=this.url+"/"+e.number+"?"+t;this.request=i.default.createScriptRequest(n),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}();t.__esModule=!0,t.default=o},function(e,t,n){"use strict";var r=n(2),i=n(4),o=function(e,t){return function(n,o){var a="http"+(t?"s":"")+"://",s=a+(e.host||e.options.host)+e.options.path,l=r.default.createJSONPRequest(s,n),c=r.default.ScriptReceivers.create(function(t,n){i.ScriptReceivers.remove(c),l.cleanup(),n&&n.host&&(e.host=n.host),o&&o(t,n)});l.send(c)}},a={name:"jsonp",getAgent:o};t.__esModule=!0,t.default=a},function(e,t,n){"use strict";var r=n(19),i=n(21),o=n(20),a=n(2),s=n(3),l=n(9),c=new i.default({file:"sockjs",urls:o.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:s.Dependencies.getPath("sockjs",{encrypted:t.encrypted}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),u={isSupported:function(e){var t=a.default.isXDRSupported(e.encrypted);return t}},d=new i.default(l.extend({},r.streamingConfiguration,u)),f=new i.default(l.extend({},r.pollingConfiguration,u));r.default.xdr_streaming=d,r.default.xdr_polling=f,r.default.sockjs=c,t.__esModule=!0,t.default=r.default},function(e,t,n){"use strict";var r=n(20),i=n(21),o=n(9),a=n(2),s=new i.default({urls:r.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(a.default.getWebSocketAPI())},isSupported:function(){return Boolean(a.default.getWebSocketAPI())},getSocket:function(e){return a.default.createWebSocket(e)}}),l={urls:r.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};t.streamingConfiguration=o.extend({getSocket:function(e){return a.default.HTTPFactory.createStreamingSocket(e)}},l),t.pollingConfiguration=o.extend({getSocket:function(e){return a.default.HTTPFactory.createPollingSocket(e)}},l);var c={isSupported:function(){return a.default.isXHRSupported()}},u=new i.default(o.extend({},t.streamingConfiguration,c)),d=new i.default(o.extend({},t.pollingConfiguration,c)),f={ws:s,xhr_streaming:u,xhr_polling:d};t.__esModule=!0,t.default=f},function(e,t,n){"use strict";function r(e,t,n){var r=e+(t.encrypted?"s":""),i=t.encrypted?t.hostEncrypted:t.hostUnencrypted;return r+"://"+i+n}function i(e,t){var n="/app/"+e,r="?protocol="+o.default.PROTOCOL+"&client=js&version="+o.default.VERSION+(t?"&"+t:"");return n+r}var o=n(5);t.ws={getInitial:function(e,t){return r("ws",t,i(e,"flash=false"))}},t.http={getInitial:function(e,t){var n=(t.httpPath||"/pusher")+i(e);return r("http",t,n)}},t.sockjs={getInitial:function(e,t){return r("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return i(e)}}},function(e,t,n){"use strict";var r=n(22),i=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,i){return new r.default(this.hooks,e,t,n,i)},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(11),o=n(9),a=n(23),s=n(8),l=n(2),c=function(e){function t(t,n,r,i,o){e.call(this),this.initialize=l.default.transportConnectionInitializer,this.hooks=t,this.name=n,this.priority=r,this.key=i,this.options=o,this.state="new",this.timeline=o.timeline,this.activityTimeout=o.activityTimeout,this.id=this.timeline.generateUniqueID()}return r(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return i.default.defer(function(){e.onError(t),e.changeState("closed")}),!1}return this.bindListeners(),s.default.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(i.default.defer(function(){t.socket&&t.socket.send(e)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return o.extend({cid:this.id},e)},t}(a.default);t.__esModule=!0,t.default=c},function(e,t,n){"use strict";var r=n(24),i=function(){function e(e){this.callbacks=new r.default,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_all=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_all=function(e,t){return this.callbacks.remove(e,t),this},e.prototype.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].fn.call(r[n].context||window,t);else this.failThrough&&this.failThrough(e,t);return this},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function r(e){return"_"+e}var i=n(9),o=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[r(e)]},e.prototype.add=function(e,t,n){var i=r(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(!e&&!t&&!n)return void(this._callbacks={});var o=e?[r(e)]:i.keys(this._callbacks);t||n?this.removeCallback(o,t,n):this.removeAllCallbacks(o)},e.prototype.removeCallback=function(e,t,n){i.apply(e,function(e){this._callbacks[e]=i.filter(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)},e.prototype.removeAllCallbacks=function(e){i.apply(e,function(e){delete this._callbacks[e]},this)},e}();t.__esModule=!0,t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(23),o=function(e){function t(){e.call(this);var t=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1))}return r(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(i.default);t.NetInfo=o,t.Network=new o},function(e,t){"use strict";var n=function(e){var t;return t=e.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,":http_fallback_loop"]]]]]};t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.encrypted?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),i.Dependencies.load(e.hooks.file,{encrypted:e.options.encrypted},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()}var i=n(3);t.__esModule=!0,t.default=r},function(e,t,n){"use strict";var r=n(29),i=n(31);i.default.createXDR=function(e,t){return this.createRequest(r.default,e,t)},t.__esModule=!0,t.default=i.default},function(e,t,n){"use strict";var r=n(30),i={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new r.RequestTimedOut),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};t.__esModule=!0,t.default=i},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.BadEventName=r;var i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.RequestTimedOut=i;var o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.TransportPriorityTooLow=o;var a=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.TransportClosed=a;var s=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.UnsupportedTransport=s;var l=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.UnsupportedStrategy=l},function(e,t,n){"use strict";var r=n(32),i=n(33),o=n(35),a=n(36),s=n(37),l={createStreamingSocket:function(e){return this.createSocket(o.default,e)},createPollingSocket:function(e){return this.createSocket(a.default,e)},createSocket:function(e,t){return new i.default(e,t)},createXHR:function(e,t){return this.createRequest(s.default,e,t)},createRequest:function(e,t,n){return new r.default(e,t,n)}};t.__esModule=!0,t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(2),o=n(23),a=262144,s=function(e){function t(t,n,r){e.call(this),this.hooks=t,this.method=n,this.url=r}return r(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},i.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(i.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return n!==-1?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>a},t}(o.default);t.__esModule=!0,t.default=s},function(e,t,n){"use strict";function r(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function i(e,t){return e.base+"/"+t+"/xhr_send"}function o(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"t="+ +new Date+"&n="+f++}function a(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function s(e){return Math.floor(Math.random()*e)}function l(e){for(var t=[],n=0;n<e;n++)t.push(s(32).toString(32));return t.join("")}var c=n(34),u=n(11),d=n(2),f=1,h=function(){function e(e,t){this.hooks=e,this.session=s(1e3)+"/"+l(8),this.location=r(t),this.readyState=c.default.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==c.default.OPEN)return!1;try{return d.default.createSocketRequest("POST",o(i(this.location,this.session))).start(e),!0}catch(e){return!1}},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=c.default.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){if(200===e.status){this.readyState===c.default.OPEN&&this.onActivity();var t,n=e.data.slice(0,1);switch(n){case"o":t=JSON.parse(e.data.slice(1)||"{}"),
this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var r=0;r<t.length;r++)this.onEvent(t[r]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}},e.prototype.onOpen=function(e){this.readyState===c.default.CONNECTING?(e&&e.hostname&&(this.location.base=a(this.location.base,e.hostname)),this.readyState=c.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===c.default.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=d.default.createSocketRequest("POST",o(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(t){u.default.defer(function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();t.__esModule=!0,t.default=h},function(e,t){"use strict";var n;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(n||(n={})),t.__esModule=!0,t.default=n},function(e,t){"use strict";var n={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}};t.__esModule=!0,t.default=n},function(e,t){"use strict";var n={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}};t.__esModule=!0,t.default=n},function(e,t,n){"use strict";var r=n(2),i={getRequest:function(e){var t=r.default.getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close()}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}};t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=n(9),i=n(11),o=n(39),a=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(r.extend({},t,{timestamp:i.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(o.default.ERROR,e)},e.prototype.info=function(e){this.log(o.default.INFO,e)},e.prototype.debug=function(e){this.log(o.default.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,i=r.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(i,function(e,r){e||n.sent++,t&&t(e,r)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}();t.__esModule=!0,t.default=a},function(e,t){"use strict";var n;!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(n||(n={})),t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return function(t){return[e.apply(this,arguments),t]}}function i(e){return"string"==typeof e&&":"===e.charAt(0)}function o(e,t){return t[e.slice(1)]}function a(e,t){if(0===e.length)return[[],t];var n=c(e[0],t),r=a(e.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function s(e,t){if(!i(e))return[e,t];var n=o(e,t);if(void 0===n)throw"Undefined symbol "+e;return[n,t]}function l(e,t){if(i(e[0])){var n=o(e[0],t);if(e.length>1){if("function"!=typeof n)throw"Calling non-function "+e[0];var r=[u.extend({},t)].concat(u.map(e.slice(1),function(e){return c(e,u.extend({},t))[0]}));return n.apply(this,r)}return[n,t]}return a(e,t)}function c(e,t){return"string"==typeof e?s(e,t):"object"==typeof e&&e instanceof Array&&e.length>0?l(e,t):[e,t]}var u=n(9),d=n(11),f=n(41),h=n(30),p=n(55),g=n(56),m=n(57),v=n(58),_=n(59),y=n(60),b=n(61),w=n(2),x=w.default.Transports;t.build=function(e,t){var n=u.extend({},C,t);return c(e,n)[1].strategy};var k={isSupported:function(){return!1},connect:function(e,t){var n=d.default.defer(function(){t(new h.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},C={extend:function(e,t,n){return[u.extend({},t,n),e]},def:function(e,t,n){if(void 0!==e[t])throw"Redefining symbol "+t;return e[t]=n,[void 0,e]},def_transport:function(e,t,n,r,i,o){var a=x[n];if(!a)throw new h.UnsupportedTransport(n);var s,l=!(e.enabledTransports&&u.arrayIndexOf(e.enabledTransports,t)===-1||e.disabledTransports&&u.arrayIndexOf(e.disabledTransports,t)!==-1);s=l?new p.default(t,r,o?o.getAssistant(a):a,u.extend({key:e.key,encrypted:e.encrypted,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},i)):k;var c=e.def(e,t,s)[1];return c.Transports=e.Transports||{},c.Transports[t]=s,[void 0,c]},transport_manager:r(function(e,t){return new f.default(t)}),sequential:r(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new g.default(n,t)}),cached:r(function(e,t,n){return new v.default(n,e.Transports,{ttl:t,timeline:e.timeline,encrypted:e.encrypted})}),first_connected:r(function(e,t){return new b.default(t)}),best_connected_ever:r(function(){var e=Array.prototype.slice.call(arguments,1);return new m.default(e)}),delayed:r(function(e,t,n){return new _.default(n,{delay:t})}),if:r(function(e,t,n,r){return new y.default(t,n,r)}),is_supported:r(function(e,t){return function(){return t.isSupported()}})}},function(e,t,n){"use strict";var r=n(42),i=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return r.default.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=n(43),i=n(44),o=n(47),a=n(48),s=n(49),l=n(50),c=n(51),u=n(53),d=n(54),f={createChannels:function(){return new d.default},createConnectionManager:function(e,t){return new u.default(e,t)},createChannel:function(e,t){return new c.default(e,t)},createPrivateChannel:function(e,t){return new l.default(e,t)},createPresenceChannel:function(e,t){return new s.default(e,t)},createTimelineSender:function(e,t){return new a.default(e,t)},createAuthorizer:function(e,t){return new o.default(e,t)},createHandshake:function(e,t){return new i.default(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new r.default(e,t,n)}};t.__esModule=!0,t.default=f},function(e,t,n){"use strict";var r=n(11),i=n(9),o=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,o){var a=this;o=i.extend({},o,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(e,t,n,o),l=null,c=function(){s.unbind("open",c),s.bind("closed",u),l=r.default.now()},u=function(e){if(s.unbind("closed",u),1002===e.code||1003===e.code)a.manager.reportDeath();else if(!e.wasClean&&l){var t=r.default.now()-l;t<2*a.maxPingDelay&&(a.manager.reportDeath(),a.pingDelay=Math.max(t/2,a.minPingDelay))}};return s.bind("open",c),s},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}();t.__esModule=!0,t.default=o},function(e,t,n){"use strict";var r=n(9),i=n(45),o=n(46),a=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){e.unbindListeners();var n;try{n=i.processHandshake(t)}catch(t){return e.finish("error",{error:t}),void e.transport.close()}"connected"===n.action?e.finish("connected",{connection:new o.default(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=i.getCloseAction(t)||"backoff",r=i.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(r.extend({transport:this.transport,action:e},t))},e}();t.__esModule=!0,t.default=a},function(e,t){"use strict";t.decodeMessage=function(e){try{var t=JSON.parse(e.data);if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){if(!(e instanceof SyntaxError))throw e}return t}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},t.encodeMessage=function(e){return JSON.stringify(e)},t.processHandshake=function(e){if(e=t.decodeMessage(e),"pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},t.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},t.getCloseError=function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(9),o=n(23),a=n(45),s=n(8),l=function(e){function t(t,n){e.call(this),this.id=t,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return r(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),s.default.debug("Event sent",r),this.send(a.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=a.decodeMessage(t)}catch(n){e.emit("error",{type:"MessageParseError",error:n,data:t.data})}if(void 0!==n){switch(s.default.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){i.objectApply(t,function(t,n){e.transport.unbind(n,t)})};i.objectApply(t,function(t,n){e.transport.bind(n,t)})},t.prototype.handleCloseEvent=function(e){var t=a.getCloseAction(e),n=a.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t)},t}(o.default);t.__esModule=!0,t.default=l},function(e,t,n){"use strict";var r=n(2),i=function(){function e(e,t){this.channel=e;var n=t.authTransport;if("undefined"==typeof r.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=t,this.authOptions=(t||{}).auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},e.prototype.authorize=function(t,n){return e.authorizers=e.authorizers||r.default.getAuthorizers(),e.authorizers[this.type].call(this,r.default,t,n)},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=n(2),i=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(r.default.TimelineTransport.getAgent(this,e),t)},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(50),o=n(8),a=n(52),s=function(e){function t(t,n){e.call(this,t,n),this.members=new a.default}return r(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,function(e,t){if(!e){if(void 0===t.channel_data)return o.default.warn("Invalid auth response for channel '"+r.name+"', expected 'channel_data' field"),void n("Invalid auth response");var i=JSON.parse(t.channel_data);r.members.setMyID(i.user_id)}n(e,t)})},t.prototype.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t),this.emit("pusher:subscription_succeeded",this.members));break;case"pusher_internal:member_added":var n=this.members.addMember(t);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(t);r&&this.emit("pusher:member_removed",r);break;default:i.default.prototype.handleEvent.call(this,e,t)}},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(i.default);t.__esModule=!0,t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(42),o=n(51),a=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.authorize=function(e,t){var n=i.default.createAuthorizer(this,this.pusher.config);return n.authorize(e,t)},t}(o.default);t.__esModule=!0,t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(23),o=n(30),a=n(8),s=function(e){function t(t,n){e.call(this,function(e,n){a.default.debug("No callbacks on "+t+" for "+e)}),this.name=t,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return r(t,e),t.prototype.authorize=function(e,t){return t(!1,{})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new o.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1},t.prototype.handleEvent=function(e,t){0===e.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===e&&(this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(i.default);t.__esModule=!0,t.default=s},function(e,t,n){"use strict";var r=n(9),i=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;r.objectApply(this.members,function(n,r){e(t.get(r))})},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}();t.__esModule=!0,t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(23),o=n(12),a=n(8),s=n(9),l=n(2),c=function(e){function t(t,n){var r=this;e.call(this),this.key=t,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var i=l.default.getNetwork();i.bind("online",function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)}),i.bind("offline",function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()}),this.updateStrategy()}return r(t,e),t.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isEncrypted=function(){return this.encrypted},t.prototype.startConnecting=function(){var e=this,t=function(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var e=this.abandonConnection();e.close()}},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new o.OneOffTimer(e||0,function(){t.disconnectInternally(),t.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new o.OneOffTimer(this.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new o.OneOffTimer(this.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.handlesActivityChecks()||(this.activityTimer=new o.OneOffTimer(this.activityTimeout,function(){e.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return s.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{ssl_only:t(function(){e.encrypted=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},t.prototype.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;"connected"===r&&(r+=" with new socket ID "+t.socket_id),a.default.debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(i.default);t.__esModule=!0,t.default=c},function(e,t,n){"use strict";function r(e,t){return 0===e.indexOf("private-")?o.default.createPrivateChannel(e,t):0===e.indexOf("presence-")?o.default.createPresenceChannel(e,t):o.default.createChannel(e,t)}var i=n(9),o=n(42),a=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=r(e,t)),this.channels[e]},e.prototype.all=function(){return i.values(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){i.objectApply(this.channels,function(e){e.disconnect()})},e}();t.__esModule=!0,t.default=a},function(e,t,n){"use strict";function r(e,t){return o.default.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var i=n(42),o=n(11),a=n(30),s=n(9),l=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return r(new a.UnsupportedStrategy,t);if(this.priority<e)return r(new a.TransportPriorityTooLow,t);var o=!1,l=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),c=null,u=function(){l.unbind("initialized",u),l.connect()},d=function(){c=i.default.createHandshake(l,function(e){o=!0,p(),t(null,e)})},f=function(e){p(),t(e)},h=function(){p();var e;e=s.safeJSONStringify(l),t(new a.TransportClosed(e))},p=function(){l.unbind("initialized",u),l.unbind("open",d),l.unbind("error",f),l.unbind("closed",h)};return l.bind("initialized",u),l.bind("open",d),l.bind("error",f),l.bind("closed",h),l.initialize(),{abort:function(){o||(p(),c?c.close():l.close())},forceMinPriority:function(e){o||n.priority<e&&(c?c.close():l.close())}}},e}();t.__esModule=!0,t.default=l},function(e,t,n){"use strict";var r=n(9),i=n(11),o=n(12),a=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return r.any(this.strategies,i.default.method("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,i=0,o=this.timeout,a=null,s=function(l,c){c?t(null,c):(i+=1,n.loop&&(i%=r.length),i<r.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),a=n.tryStrategy(r[i],e,{timeout:o,failFast:n.failFast},s)):t(!0))};return a=this.tryStrategy(r[i],e,{timeout:o,failFast:this.failFast},s),{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var i=null,a=null;return n.timeout>0&&(i=new o.OneOffTimer(n.timeout,function(){a.abort(),r(!0)})),a=e.connect(t,function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))}),{abort:function(){i&&i.ensureAborted(),a.abort()},forceMinPriority:function(e){a.forceMinPriority(e)}}},e}();t.__esModule=!0,t.default=a},function(e,t,n){"use strict";function r(e,t,n){var r=a.map(e,function(e,r,i,o){return e.connect(t,n(r,o))});return{abort:function(){a.apply(r,o)},forceMinPriority:function(e){a.apply(r,function(t){t.forceMinPriority(e)})}}}function i(e){return a.all(e,function(e){return Boolean(e.error)})}function o(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var a=n(9),s=n(11),l=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return a.any(this.strategies,s.default.method("isSupported"))},e.prototype.connect=function(e,t){return r(this.strategies,e,function(e,n){return function(r,o){return n[e].error=r,r?void(i(n)&&t(!0)):(a.apply(n,function(e){e.forceMinPriority(o.transport.priority)}),void t(null,o))}})},e}();t.__esModule=!0,t.default=l},function(e,t,n){"use strict";function r(e){return"pusherTransport"+(e?"Encrypted":"Unencrypted")}function i(e){var t=l.default.getLocalStorage();if(t)try{var n=t[r(e)];if(n)return JSON.parse(n)}catch(t){a(e)}return null}function o(e,t,n){var i=l.default.getLocalStorage();if(i)try{i[r(e)]=u.safeJSONStringify({timestamp:s.default.now(),transport:t,latency:n})}catch(e){}}function a(e){var t=l.default.getLocalStorage();if(t)try{delete t[r(e)]}catch(e){}}var s=n(11),l=n(2),c=n(56),u=n(9),d=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.encrypted,r=i(n),l=[this.strategy];if(r&&r.timestamp+this.ttl>=s.default.now()){var u=this.transports[r.transport];u&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),l.push(new c.default([u],{timeout:2*r.latency+1e3,failFast:!0})))}var d=s.default.now(),f=l.pop().connect(e,function r(i,c){i?(a(n),l.length>0?(d=s.default.now(),f=l.pop().connect(e,r)):t(i)):(o(n,c.transport.name,s.default.now()-d),t(null,c))});return{abort:function(){f.abort()},forceMinPriority:function(t){e=t,f&&f.forceMinPriority(t)}}},e}();t.__esModule=!0,t.default=d},function(e,t,n){"use strict";var r=n(12),i=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,i=this.strategy,o=new r.OneOffTimer(this.options.delay,function(){n=i.connect(e,t)});return{abort:function(){o.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}();t.__esModule=!0,t.default=i},function(e,t){"use strict";var n=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},e.prototype.connect=function(e,t){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(e,t)},e}();t.__esModule=!0,t.default=n},function(e,t){"use strict";var n=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},e}();t.__esModule=!0,t.default=n},function(e,t,n){"use strict";var r=n(5);t.getGlobalConfig=function(){return{wsHost:r.default.host,wsPort:r.default.ws_port,wssPort:r.default.wss_port,httpHost:r.default.sockjs_host,httpPort:r.default.sockjs_http_port,httpsPort:r.default.sockjs_https_port,httpPath:r.default.sockjs_path,statsHost:r.default.stats_host,authEndpoint:r.default.channel_auth_endpoint,authTransport:r.default.channel_auth_transport,activity_timeout:r.default.activity_timeout,pong_timeout:r.default.pong_timeout,unavailable_timeout:r.default.unavailable_timeout}},t.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}])})},,,,function(e,t,n){var r;/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface
 * Copyright (c) 2009-2016 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.3.0
 */
!function(i,o){"use strict";var a,s,l,c=i,u=c.document,d=c.navigator,f=c.setTimeout,h=c.clearTimeout,p=c.setInterval,g=c.clearInterval,m=c.getComputedStyle,v=c.encodeURIComponent,_=c.ActiveXObject,y=c.Error,b=c.Number.parseInt||c.parseInt,w=c.Number.parseFloat||c.parseFloat,x=c.Number.isNaN||c.isNaN,k=c.Date.now,C=c.Object.keys,S=c.Object.prototype.hasOwnProperty,E=c.Array.prototype.slice,$=function(){var e=function(e){return e};if("function"==typeof c.wrap&&"function"==typeof c.unwrap)try{var t=u.createElement("div"),n=c.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=c.unwrap)}catch(e){}return e}(),T=function(e){return E.call(e,0)},A=function(){var e,t,n,r,i,a,s=T(arguments),l=s[0]||{};for(e=1,t=s.length;e<t;e++)if(null!=(n=s[e]))for(r in n)S.call(n,r)&&(i=l[r],a=n[r],l!==a&&a!==o&&(l[r]=a));return l},D=function(e){var t,n,r,i;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;n<r;n++)S.call(e,n)&&(t[n]=D(e[n]));else{t={};for(i in e)S.call(e,i)&&(t[i]=D(e[i]))}return t},O=function(e,t){for(var n={},r=0,i=t.length;r<i;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},P=function(e,t){var n={};for(var r in e)t.indexOf(r)===-1&&(n[r]=e[r]);return n},R=function(e){if(e)for(var t in e)S.call(e,t)&&delete e[t];return e},I=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},M=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},L=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},N=function(){var e,t;try{throw new y}catch(e){t=e}return t&&(e=t.sourceURL||t.fileName||L(t.stack)),e},j=function(){var e,t,n;if(u.currentScript&&(e=u.currentScript.src))return e;if(t=u.getElementsByTagName("script"),1===t.length)return t[0].src||o;if("readyState"in(t[0]||document.createElement("script")))for(n=t.length;n--;)if("interactive"===t[n].readyState&&(e=t[n].src))return e;return"loading"===u.readyState&&(e=t[t.length-1].src)?e:(e=N())?e:o},F=function(){var e,t,n,r=u.getElementsByTagName("script");for(e=r.length;e--;){if(!(n=r[e].src)){t=null;break}if(n=M(n),null==t)t=n;else if(t!==n){t=null;break}}return t||o},B=function(){var e=M(j())||F()||"";return e+"ZeroClipboard.swf"},U=function(){var e=/win(dows|[\s]?(nt|me|ce|xp|vista|[\d]+))/i;return!!d&&(e.test(d.appVersion||"")||e.test(d.platform||"")||(d.userAgent||"").indexOf("Windows")!==-1)},z=function(){return null==c.opener&&(!!c.top&&c!=c.top||!!c.parent&&c!=c.parent)}(),q="html"===u.documentElement.nodeName,H={bridge:null,version:"0.0.0",pluginType:"unknown",sandboxed:null,disabled:null,outdated:null,insecure:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},V="11.0.0",W={},G={},Y=null,K=0,X=0,J={ready:"Flash communication is established",error:{"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-insecure":"Flash will be unable to communicate due to a protocol mismatch between your `swfPath` configuration and the page","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity","browser-unsupported":"The browser does not support the required HTML DOM and JavaScript features"}},Z=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],Q=["flash-sandboxed","flash-disabled","flash-outdated","flash-insecure","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],ee=new RegExp("^flash-("+Q.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),te=new RegExp("^flash-("+Q.filter(function(e){return"flash-disabled"!==e}).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),ne={swfPath:B(),trustedDomains:c.location.host?[c.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,fixLineEndings:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},re=function(e){"object"!=typeof e||!e||"length"in e||C(e).forEach(function(t){if(/^(?:forceHandCursor|title|zIndex|bubbleEvents|fixLineEndings)$/.test(t))ne[t]=e[t];else if(null==H.bridge)if("containerId"===t||"swfObjectId"===t){if(!be(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");ne[t]=e[t]}else ne[t]=e[t]});{if("string"!=typeof e||!e)return D(ne);if(S.call(ne,e))return ne[e]}},ie=function(){return et(),{browser:A(O(d,["userAgent","platform","appName","appVersion"]),{isSupported:oe()}),flash:P(H,["bridge"]),zeroclipboard:{version:nt.version,config:nt.config()}}},oe=function(){return!!(u.addEventListener&&c.Object.keys&&c.Array.prototype.map)},ae=function(){return!!(H.sandboxed||H.disabled||H.outdated||H.unavailable||H.degraded||H.deactivated)},se=function(e,t){var n,r,i,s={};if("string"==typeof e&&e?i=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||C(e).forEach(function(t){var n=e[t];"function"==typeof n&&nt.on(t,n)}),i&&i.length&&t){for(n=0,r=i.length;n<r;n++)e=i[n].replace(/^on/,""),s[e]=!0,W[e]||(W[e]=[]),W[e].push(t);if(s.ready&&H.ready&&nt.emit({type:"ready"}),s.error){for(oe()||nt.emit({type:"error",name:"browser-unsupported"}),n=0,r=Q.length;n<r;n++)if(H[Q[n].replace(/^flash-/,"")]===!0){nt.emit({type:"error",name:Q[n]});break}a!==o&&nt.version!==a&&nt.emit({type:"error",name:"version-mismatch",jsVersion:nt.version,swfVersion:a})}}return nt},le=function(e,t){var n,r,i,o,a;if(0===arguments.length?o=C(W):"string"==typeof e&&e?o=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||C(e).forEach(function(t){var n=e[t];"function"==typeof n&&nt.off(t,n)}),o&&o.length)for(n=0,r=o.length;n<r;n++)if(e=o[n].replace(/^on/,""),a=W[e],a&&a.length)if(t)for(i=a.indexOf(t);i!==-1;)a.splice(i,1),i=a.indexOf(t,i);else a.length=0;return nt},ce=function(e){var t;return t="string"==typeof e&&e?D(W[e])||null:D(W)},ue=function(e){var t,n,r;if(e=we(e),e&&!Te(e))return"ready"===e.type&&H.overdue===!0?nt.emit({type:"error",name:"flash-overdue"}):(t=A({},e),Ee.call(this,t),"copy"===e.type&&(r=Ne(G),n=r.data,Y=r.formatMap),n)},de=function(){var e=ne.swfPath||"",t=e.slice(0,2),n=e.slice(0,e.indexOf("://")+1);return"\\\\"===t?"file:":"//"===t||""===n?c.location.protocol:n},fe=function(){var e,t,n=H.sandboxed;return oe()?(et(),"boolean"!=typeof H.ready&&(H.ready=!1),void(H.sandboxed!==n&&H.sandboxed===!0?(H.ready=!1,nt.emit({type:"error",name:"flash-sandboxed"})):nt.isFlashUnusable()||null!==H.bridge||(t=de(),t&&t!==c.location.protocol?nt.emit({type:"error",name:"flash-insecure"}):(e=ne.flashLoadTimeout,"number"==typeof e&&e>=0&&(K=f(function(){"boolean"!=typeof H.deactivated&&(H.deactivated=!0),H.deactivated===!0&&nt.emit({type:"error",name:"flash-deactivated"})},e)),H.overdue=!1,Me())))):(H.ready=!1,void nt.emit({type:"error",name:"browser-unsupported"}))},he=function(){nt.clearData(),nt.blur(),nt.emit("destroy"),Le(),nt.off()},pe=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,nt.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&S.call(n,r)&&"string"==typeof n[r]&&n[r]&&(G[r]=Qe(n[r]))},ge=function(e){"undefined"==typeof e?(R(G),Y=null):"string"==typeof e&&S.call(G,e)&&delete G[e]},me=function(e){return"undefined"==typeof e?D(G):"string"==typeof e&&S.call(G,e)?G[e]:void 0},ve=function(e){if(e&&1===e.nodeType){s&&(Ve(s,ne.activeClass),s!==e&&Ve(s,ne.hoverClass)),s=e,He(e,ne.hoverClass);var t=e.getAttribute("title")||ne.title;if("string"==typeof t&&t){var n=Re(H.bridge);n&&n.setAttribute("title",t)}var r=ne.forceHandCursor===!0||"pointer"===We(e,"cursor");Je(r),Xe()}},_e=function(){var e=Re(H.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),s&&(Ve(s,ne.hoverClass),Ve(s,ne.activeClass),s=null)},ye=function(){return s||null},be=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},we=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=l),A(e,{type:t,target:e.target||s||null,relatedTarget:e.relatedTarget||null,currentTarget:H&&H.bridge||null,timeStamp:e.timeStamp||k()||null});var n=J[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&A(e,{target:null,version:H.version}),"error"===e.type&&(ee.test(e.name)&&A(e,{target:null,minimumVersion:V}),te.test(e.name)&&A(e,{version:H.version}),"flash-insecure"===e.name&&A(e,{pageProtocol:c.location.protocol,swfProtocol:de()})),"copy"===e.type&&(e.clipboardData={setData:nt.setData,clearData:nt.clearData}),"aftercopy"===e.type&&(e=je(e,Y)),e.target&&!e.relatedTarget&&(e.relatedTarget=xe(e.target)),ke(e)}},xe=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?u.getElementById(t):null},ke=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var t=e.target,n="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:o,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:o,i=Ge(t),a=c.screenLeft||c.screenX||0,s=c.screenTop||c.screenY||0,l=u.body.scrollLeft+u.documentElement.scrollLeft,d=u.body.scrollTop+u.documentElement.scrollTop,f=i.left+("number"==typeof e._stageX?e._stageX:0),h=i.top+("number"==typeof e._stageY?e._stageY:0),p=f-l,g=h-d,m=a+p,v=s+g,_="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,A(e,{srcElement:t,fromElement:n,toElement:r,screenX:m,screenY:v,pageX:f,pageY:h,clientX:p,clientY:g,x:p,y:g,movementX:_,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},Ce=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},Se=function(e,t,n,r){r?f(function(){e.apply(t,n)},0):e.apply(t,n)},Ee=function(e){if("object"==typeof e&&e&&e.type){var t=Ce(e),n=W["*"]||[],r=W[e.type]||[],i=n.concat(r);if(i&&i.length){var o,a,s,l,u,d=this;for(o=0,a=i.length;o<a;o++)s=i[o],l=d,"string"==typeof s&&"function"==typeof c[s]&&(s=c[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(l=s,s=s.handleEvent),"function"==typeof s&&(u=A({},e),Se(s,l,[u],t))}return this}},$e=function(e){var t=null;return(z===!1||e&&"error"===e.type&&e.name&&Z.indexOf(e.name)!==-1)&&(t=!1),t},Te=function(e){var t=e.target||s||null,n="swf"===e._source;switch(delete e._source,e.type){case"error":var r="flash-sandboxed"===e.name||$e(e);"boolean"==typeof r&&(H.sandboxed=r),"browser-unsupported"===e.name?A(H,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}):Q.indexOf(e.name)!==-1?A(H,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,insecure:"flash-insecure"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(a=e.swfVersion,A(H,{disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ke();break;case"ready":a=e.swfVersion;var i=H.deactivated===!0;A(H,{sandboxed:!1,disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:i,ready:!i}),Ke();break;case"beforecopy":l=t;break;case"copy":var o,c,u=e.relatedTarget;!G["text/html"]&&!G["text/plain"]&&u&&(c=u.value||u.outerHTML||u.innerHTML)&&(o=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o),c!==o&&e.clipboardData.setData("text/html",c)):!G["text/plain"]&&e.target&&(o=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",o));break;case"aftercopy":Ae(e),nt.clearData(),t&&t!==qe()&&t.focus&&t.focus();break;case"_mouseover":nt.focus(t),ne.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&De(A({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),De(A({},e,{type:"mouseover"})));break;case"_mouseout":nt.blur(),ne.bubbleEvents===!0&&n&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&De(A({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),De(A({},e,{type:"mouseout"})));break;case"_mousedown":He(t,ne.activeClass),ne.bubbleEvents===!0&&n&&De(A({},e,{type:e.type.slice(1)}));break;case"_mouseup":Ve(t,ne.activeClass),ne.bubbleEvents===!0&&n&&De(A({},e,{type:e.type.slice(1)}));break;case"_click":l=null,ne.bubbleEvents===!0&&n&&De(A({},e,{type:e.type.slice(1)}));break;case"_mousemove":ne.bubbleEvents===!0&&n&&De(A({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},Ae=function(e){if(e.errors&&e.errors.length>0){var t=D(e);A(t,{type:"error",name:"clipboard-error"}),delete t.success,f(function(){nt.emit(t)},0)}},De=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,r=n&&n.ownerDocument||u,i={view:r.defaultView||c,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},o=A(i,e);n&&r.createEvent&&n.dispatchEvent&&(o=[o.type,o.canBubble,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,o),t._source="js",n.dispatchEvent(t)))}},Oe=function(){var e=ne.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=ne.swfObjectId+"_fallbackContent";X=p(function(){var e=u.getElementById(n);Ye(e)&&(Ke(),H.deactivated=null,nt.emit({type:"error",name:"swf-not-found"}))},t)}},Pe=function(){var e=u.createElement("div");return e.id=ne.containerId,e.className=ne.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Ze(ne.zIndex),e},Re=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Ie=function(e){return"string"==typeof e&&e?e.replace(/["&'<>]/g,function(e){switch(e){case'"':return"&quot;";case"&":return"&amp;";case"'":return"&apos;";case"<":return"&lt;";case">":return"&gt;";default:return e}}):e},Me=function(){var e,t=H.bridge,n=Re(t);if(!t){var r=ze(c.location.host,ne),i="never"===r?"none":"all",o=Be(A({jsVersion:nt.version},ne)),a=ne.swfPath+Fe(ne.swfPath,ne);q&&(a=Ie(a)),n=Pe();var s=u.createElement("div");n.appendChild(s),u.body.appendChild(n);var l=u.createElement("div"),d="activex"===H.pluginType;l.innerHTML='<object id="'+ne.swfObjectId+'" name="'+ne.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+a+'"')+">"+(d?'<param name="movie" value="'+a+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+i+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+o+'"/><div id="'+ne.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=l.firstChild,l=null,$(t).ZeroClipboard=nt,n.replaceChild(t,s),Oe()}return t||(t=u[ne.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),H.bridge=t||null,t},Le=function(){var e=H.bridge;if(e){var t=Re(e);t&&("activex"===H.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else f(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),Ke(),H.ready=null,H.bridge=null,H.deactivated=null,H.insecure=null,a=o}},Ne=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&S.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},je=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(S.call(e,r))if("errors"===r){n[r]=e[r]?e[r].slice():[];for(var i=0,o=n[r].length;i<o;i++)n[r][i].format=t[n[r][i].format]}else if("success"!==r&&"data"!==r)n[r]=e[r];else{n[r]={};var a=e[r];for(var s in a)s&&S.call(a,s)&&S.call(t,s)&&(n[r][t[s]]=a[s])}return n},Fe=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(e.indexOf("?")===-1?"?":"&")+"noCache="+k():""},Be=function(e){var t,n,r,i,o="",a=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,n=i.length;t<n;t++)if(S.call(i,t)&&i[t]&&"string"==typeof i[t]){if(r=Ue(i[t]),!r)continue;if("*"===r){a.length=0,a.push(r);break}a.push.apply(a,[r,"//"+r,c.location.protocol+"//"+r])}return a.length&&(o+="trustedOrigins="+v(a.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+v(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+v(e.jsVersion)),o},Ue=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var n=e.indexOf("/");return e=n===-1?e:t===-1||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},ze=function(){var e=function(e){var t,n,r,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,n=e.length;t<n;t++)if(S.call(e,t)&&(r=Ue(e[t]))){if("*"===r){i.length=0,i.push("*");break}i.indexOf(r)===-1&&i.push(r)}return i};return function(t,n){var r=Ue(n.swfPath);null===r&&(r=t);var i=e(n.trustedDomains),o=i.length;if(o>0){if(1===o&&"*"===i[0])return"always";if(i.indexOf(t)!==-1)return 1===o&&t===r?"sameDomain":"always"}return"never"}}(),qe=function(){try{return u.activeElement}catch(e){return null}},He=function(e,t){var n,r,i,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0){for(i=(" "+(e.className||"")+" ").replace(/[\t\r\n\f]/g," "),n=0,r=o.length;n<r;n++)i.indexOf(" "+o[n]+" ")===-1&&(i+=o[n]+" ");i=i.replace(/^\s+|\s+$/g,""),i!==e.className&&(e.className=i)}return e},Ve=function(e,t){var n,r,i,o=[];if("string"==typeof t&&t&&(o=t.split(/\s+/)),e&&1===e.nodeType&&o.length>0&&e.className){for(i=(" "+e.className+" ").replace(/[\t\r\n\f]/g," "),n=0,r=o.length;n<r;n++)i=i.replace(" "+o[n]+" "," ");i=i.replace(/^\s+|\s+$/g,""),i!==e.className&&(e.className=i)}return e},We=function(e,t){var n=m(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Ge=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=c.pageXOffset,i=c.pageYOffset,o=u.documentElement.clientLeft||0,a=u.documentElement.clientTop||0,s=0,l=0;if("relative"===We(u.body,"position")){var d=u.body.getBoundingClientRect(),f=u.documentElement.getBoundingClientRect();s=d.left-f.left||0,l=d.top-f.top||0}t.left=n.left+r-o-s,t.top=n.top+i-a-l,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Ye=function(e){if(!e)return!1;var t=m(e,null);if(!t)return!1;var n=w(t.height)>0,r=w(t.width)>0,i=w(t.top)>=0,o=w(t.left)>=0,a=n&&r&&i&&o,s=a?null:Ge(e),l="none"!==t.display&&"collapse"!==t.visibility&&(a||!!s&&(n||s.height>0)&&(r||s.width>0)&&(i||s.top>=0)&&(o||s.left>=0));return l},Ke=function(){h(K),K=0,g(X),X=0},Xe=function(){var e;if(s&&(e=Re(H.bridge))){var t=Ge(s);A(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Ze(ne.zIndex)})}},Je=function(e){H.ready===!0&&(H.bridge&&"function"==typeof H.bridge.setHandCursor?H.bridge.setHandCursor(e):H.ready=!1)},Ze=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||x(e)?"string"==typeof e&&(t=Ze(b(e,10))):t=e,"number"==typeof t?t:"auto"},Qe=function(e){var t=/(\r\n|\r|\n)/g;return"string"==typeof e&&ne.fixLineEndings===!0&&(U()?/((^|[^\r])\n|\r([^\n]|$))/.test(e)&&(e=e.replace(t,"\r\n")):/\r/.test(e)&&(e=e.replace(t,"\n"))),e},et=function(e){var t,n,r,o=H.sandboxed,a=null;if(e=e===!0,z===!1)a=!1;else{try{n=i.frameElement||null}catch(e){r={name:e.name,message:e.message}}if(n&&1===n.nodeType&&"IFRAME"===n.nodeName)try{a=n.hasAttribute("sandbox")}catch(e){a=null}else{try{t=document.domain||null}catch(e){t=null}(null===t||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(a=!0)}}return H.sandboxed=a,o===a||e||tt(_),a},tt=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(s=!0,e.version&&(u=t(e.version)),!u&&e.description&&(u=t(e.description)),e.filename&&(c=n(e.filename)))}var i,o,a,s=!1,l=!1,c=!1,u="";if(d.plugins&&d.plugins.length)i=d.plugins["Shockwave Flash"],r(i),d.plugins["Shockwave Flash 2.0"]&&(s=!0,u="2.0.0.11");else if(d.mimeTypes&&d.mimeTypes.length)a=d.mimeTypes["application/x-shockwave-flash"],i=a&&a.enabledPlugin,r(i);else if("undefined"!=typeof e){l=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),s=!0,u=t(o.GetVariable("$version"))}catch(n){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),s=!0,u="6.0.21"}catch(n){try{o=new e("ShockwaveFlash.ShockwaveFlash"),s=!0,u=t(o.GetVariable("$version"))}catch(e){l=!1}}}}H.disabled=s!==!0,H.outdated=u&&w(u)<w(V),H.version=u||"0.0.0",H.pluginType=c?"pepper":l?"activex":s?"netscape":"unknown"};tt(_),et(!0);var nt=function(){return this instanceof nt?void("function"==typeof nt._createClient&&nt._createClient.apply(this,T(arguments))):new nt};nt.version="2.3.0",nt.config=function(){return re.apply(this,T(arguments))},nt.state=function(){return ie.apply(this,T(arguments))},nt.isFlashUnusable=function(){return ae.apply(this,T(arguments))},nt.on=function(){return se.apply(this,T(arguments))},nt.off=function(){return le.apply(this,T(arguments))},nt.handlers=function(){return ce.apply(this,T(arguments))},nt.emit=function(){return ue.apply(this,T(arguments))},nt.create=function(){return fe.apply(this,T(arguments))},nt.destroy=function(){return he.apply(this,T(arguments))},nt.setData=function(){return pe.apply(this,T(arguments))},nt.clearData=function(){return ge.apply(this,T(arguments))},nt.getData=function(){return me.apply(this,T(arguments))},nt.focus=nt.activate=function(){return ve.apply(this,T(arguments))},nt.blur=nt.deactivate=function(){return _e.apply(this,T(arguments))},nt.activeElement=function(){return ye.apply(this,T(arguments))};var rt=0,it={},ot=0,at={},st={};A(ne,{autoActivate:!0});var lt=function(e){var t,n=this;n.id=""+rt++,t={instance:n,elements:[],handlers:{},coreWildcardHandler:function(e){return n.emit(e)}},it[n.id]=t,e&&n.clip(e),nt.on("*",t.coreWildcardHandler),nt.on("destroy",function(){n.destroy()}),nt.create()},ct=function(e,t){var n,r,i,s={},l=this,c=it[l.id],u=c&&c.handlers;if(!c)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e?i=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||C(e).forEach(function(t){var n=e[t];"function"==typeof n&&l.on(t,n)}),i&&i.length&&t){for(n=0,r=i.length;n<r;n++)e=i[n].replace(/^on/,""),s[e]=!0,u[e]||(u[e]=[]),u[e].push(t);if(s.ready&&H.ready&&this.emit({type:"ready",client:this}),s.error){for(n=0,r=Q.length;n<r;n++)if(H[Q[n].replace(/^flash-/,"")]){this.emit({type:"error",name:Q[n],client:this});break}a!==o&&nt.version!==a&&this.emit({type:"error",name:"version-mismatch",jsVersion:nt.version,swfVersion:a})}}return l},ut=function(e,t){var n,r,i,o,a,s=this,l=it[s.id],c=l&&l.handlers;if(!c)return s;if(0===arguments.length?o=C(c):"string"==typeof e&&e?o=e.split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||C(e).forEach(function(t){var n=e[t];"function"==typeof n&&s.off(t,n)}),o&&o.length)for(n=0,r=o.length;n<r;n++)if(e=o[n].toLowerCase().replace(/^on/,""),a=c[e],a&&a.length)if(t)for(i=a.indexOf(t);i!==-1;)a.splice(i,1),i=a.indexOf(t,i);else a.length=0;return s},dt=function(e){var t=null,n=it[this.id]&&it[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:D(n)),t},ft=function(e){var t,n=this;return vt.call(n,e)&&("object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=A({},e)),t=A({},we(e),{client:n}),_t.call(n,t)),n},ht=function(e){if(!it[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=yt(e);for(var t=0;t<e.length;t++)if(S.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?at[e[t].zcClippingId].indexOf(this.id)===-1&&at[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+ot++,at[e[t].zcClippingId]=[this.id],ne.autoActivate===!0&&bt(e[t]));var n=it[this.id]&&it[this.id].elements;n.indexOf(e[t])===-1&&n.push(e[t])}return this},pt=function(e){var t=it[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):yt(e);for(var i=e.length;i--;)if(S.call(e,i)&&e[i]&&1===e[i].nodeType){for(n=0;(n=r.indexOf(e[i],n))!==-1;)r.splice(n,1);var o=at[e[i].zcClippingId];if(o){for(n=0;(n=o.indexOf(this.id,n))!==-1;)o.splice(n,1);0===o.length&&(ne.autoActivate===!0&&wt(e[i]),delete e[i].zcClippingId)}}return this},gt=function(){var e=it[this.id];return e&&e.elements?e.elements.slice(0):[]},mt=function(){var e=it[this.id];e&&(this.unclip(),this.off(),nt.off("*",e.coreWildcardHandler),delete it[this.id])},vt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=it[this.id],n=t&&t.elements,r=!!n&&n.length>0,i=!e.target||r&&n.indexOf(e.target)!==-1,o=e.relatedTarget&&r&&n.indexOf(e.relatedTarget)!==-1,a=e.client&&e.client===this;return!(!t||!(i||o||a))},_t=function(e){var t=it[this.id];if("object"==typeof e&&e&&e.type&&t){var n=Ce(e),r=t&&t.handlers["*"]||[],i=t&&t.handlers[e.type]||[],o=r.concat(i);if(o&&o.length){var a,s,l,u,d,f=this;for(a=0,s=o.length;a<s;a++)l=o[a],u=f,"string"==typeof l&&"function"==typeof c[l]&&(l=c[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(d=A({},e),Se(l,u,[d],n))}}},yt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},bt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=c.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=c.event))&&(t(n),nt.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),st[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},wt=function(e){if(e&&1===e.nodeType){var t=st[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,i=["move","leave","enter","out","over"],o=0,a=i.length;o<a;o++)n="mouse"+i[o],r=t[n],"function"==typeof r&&e.removeEventListener(n,r,!1);delete st[e.zcClippingId]}}};nt._createClient=function(){lt.apply(this,T(arguments))},nt.prototype.on=function(){return ct.apply(this,T(arguments))},nt.prototype.off=function(){return ut.apply(this,T(arguments))},nt.prototype.handlers=function(){return dt.apply(this,T(arguments))},nt.prototype.emit=function(){return ft.apply(this,T(arguments))},nt.prototype.clip=function(){return ht.apply(this,T(arguments))},nt.prototype.unclip=function(){return pt.apply(this,T(arguments))},nt.prototype.elements=function(){return gt.apply(this,T(arguments))},nt.prototype.destroy=function(){return mt.apply(this,T(arguments))},nt.prototype.setText=function(e){if(!it[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return nt.setData("text/plain",e),this},nt.prototype.setHtml=function(e){if(!it[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return nt.setData("text/html",e),this},nt.prototype.setRichText=function(e){if(!it[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return nt.setData("application/rtf",e),this},nt.prototype.setData=function(){if(!it[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return nt.setData.apply(this,T(arguments)),this},nt.prototype.clearData=function(){if(!it[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return nt.clearData.apply(this,T(arguments)),this},nt.prototype.getData=function(){if(!it[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return nt.getData.apply(this,T(arguments))},r=function(){return nt}.call(t,n,t,e),!(r!==o&&(e.exports=r))}(function(){return this||window}())},function(e,t,n){"use strict";var r,i,o;!function(n,a){i=[t],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(this,function(e){e.QuadTree=function(){function e(e,n,r){this.root=new t(e,0,n,r),this.length=0}function t(e,t,n,r){this.bounds=e,this.children=[],this.nodes=null,this.maxChildren=r||4,this.maxDepth=n||4,this.depth=t||0}function n(e,t,n,r,i,o){this.indices=e.findIndices(t),this.quad=e,this.side1=r,this.side2=i,this.item=t,this.sorter=n,this.deduper=o,this.didSide2=!1,this.buildIterators(this.side1),this.lastIt0=null,this.lastIt1=null}function r(e,t,n){return this.children=t,this.childrenLen=t.length,this.itX1=e.x,this.itY1=e.y,this.itX2=e.x+e.width,this.itY2=e.y+e.height,this.ci=0,this.deduper=n,this}return e.prototype.root=null,e.prototype.length=0,e.prototype.insert=function(e){if(!(e instanceof Array)){var t=this.root.bounds;return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)&&(this.root.insert(e),
this.length++,!0)}for(var n=0,r=e.length;n<r;n++)this.insert(e[n])},e.prototype.print=function(){this.root.print()},e.prototype.retrieve=function(e){return this.root.retrieve(e,[],{})},e.prototype.retrieveXInc=function(e,n,r){var i={x:e,y:n,height:r,width:this.root.bounds.width-e},o=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},a=[t.TOP_LEFT,t.BOTTOM_LEFT],s=[t.TOP_RIGHT,t.BOTTOM_RIGHT];return this.root.retrieveIterate(i,o,a,s,{})},e.prototype.retrieveXDec=function(e,n,r){var i=this.root.bounds.x,o={x:i,y:n,height:r,width:e-i},a=function(e,t){var n=e.x+e.width,r=t.x+t.width;return n<r?1:n>r?-1:0},s=[t.TOP_RIGHT,t.BOTTOM_RIGHT],l=[t.TOP_LEFT,t.BOTTOM_LEFT];return this.root.retrieveIterate(o,a,s,l,{})},e.prototype.retrieveYInc=function(e,n,r){var i={x:e,y:n,width:r,height:this.root.bounds.height-n},o=function(e,t){return e.y<t.y?-1:e.y>t.y?1:0},a=[t.TOP_LEFT,t.TOP_RIGHT],s=[t.BOTTOM_LEFT,t.BOTTOM_RIGHT];return this.root.retrieveIterate(i,o,a,s,{})},e.prototype.retrieveYDec=function(e,n,r){var i=this.root.bounds.y,o={x:e,y:i,width:r,height:n-i},a=function(e,t){var n=e.y+e.height,r=t.y+t.height;return n<r?1:n>r?-1:0},s=[t.BOTTOM_LEFT,t.BOTTOM_RIGHT],l=[t.TOP_LEFT,t.TOP_RIGHT];return this.root.retrieveIterate(o,a,s,l,{})},t.TOP_LEFT=0,t.TOP_RIGHT=1,t.BOTTOM_LEFT=2,t.BOTTOM_RIGHT=3,t.prototype.print=function(){for(var e="",n=0;n<this.depth;n++)e+=" ";if(null!==this.nodes){var r={},i=0;r[t.TOP_LEFT]="TOP_LEFT",r[t.TOP_RIGHT]="TOP_RIGHT",r[t.BOTTOM_LEFT]="BOTTOM_LEFT",r[t.BOTTOM_RIGHT]="BOTTOM_RIGHT";for(var o=0;o<this.nodes.length;o++)i+=this.nodes[o].print();return i}return this.children.length},t.prototype.insert=function(e){if(null===this.nodes){if(this.children.push(e),this.children.length>=this.maxChildren&&this.depth<this.maxDepth){this.subdivide();for(var t=this.children.length,n=0;n<t;n++)this.insert(this.children[n]);this.children=null}}else for(var r in this.findIndices(e))this.nodes[r].insert(e)},t.prototype.findIndices=function(e){var n=this.bounds,r=n.x+(n.width/2|0),i=n.y+(n.height/2|0),o={},a=!1;if(e.y<i){e.x<r?(o[t.TOP_LEFT]=!0,e.x+e.width>=r&&(o[t.TOP_RIGHT]=!0)):o[t.TOP_RIGHT]=!0}else a=!0;return(a||e.y+e.height>=i)&&(e.x<r?(o[t.BOTTOM_LEFT]=!0,e.x+e.width>=r&&(o[t.BOTTOM_RIGHT]=!0)):o[t.BOTTOM_RIGHT]=!0),o},t.prototype.subdivide=function(){var e=this.depth+1,n=this.bounds.x,r=this.bounds.y,i=this.bounds.width/2|0,o=this.bounds.height/2|0,a=n+i,s=r+o;this.nodes=[new t({x:n,y:r,width:i,height:o},e,this.maxDepth,this.maxChildren),new t({x:a,y:r,width:i,height:o},e,this.maxDepth,this.maxChildren),new t({x:n,y:s,width:i,height:o},e,this.maxDepth,this.maxChildren),new t({x:a,y:s,width:i,height:o},e,this.maxDepth,this.maxChildren)]},t.prototype.retrieve=function(e,t,n){if(this.nodes){for(var r in this.findIndices(e))this.nodes[r].retrieve(e,t,n);return t}for(var i=this.children.length,o=e.x+e.width,a=e.y+e.height,s=0;s<i;s++){var l=this.children[s];e.x<l.x+l.width&&e.y<l.y+l.height&&o>l.x&&a>l.y&&!(l.id in n)&&(n[l.id]=!0,t.push(l))}return t},t.prototype.retrieveIterate=function(e,t,i,o,a){return this.nodes?new n(this,e,t,i,o,a):(this.children.sort(t),new r(e,this.children,a))},n.prototype.buildIterators=function(e){this.it0=this.indices[e[0]]?this.quad.nodes[e[0]].retrieveIterate(this.item,this.sorter,this.side1,this.side2,this.deduper):null,this.it1=this.indices[e[1]]?this.quad.nodes[e[1]].retrieveIterate(this.item,this.sorter,this.side1,this.side2,this.deduper):null},n.prototype.next=function(){this.it0&&!this.lastIt0&&(this.lastIt0=this.it0.next()),this.it1&&!this.lastIt1&&(this.lastIt1=this.it1.next());var e;return this.lastIt0&&this.lastIt1?(this.sorter(this.lastIt0,this.lastIt1)<=0?(e=this.lastIt0,this.lastIt0=null):(e=this.lastIt1,this.lastIt1=null),e):this.lastIt0?(e=this.lastIt0,this.lastIt0=null,e):this.lastIt1?(e=this.lastIt1,this.lastIt1=null,e):this.didSide2?null:(this.buildIterators(this.side2),this.didSide2=!0,this.next())},n.prototype.debugPrint=function(e){void 0===e&&(e=0);new Array(e+2).join(" ");this.it0&&this.it0.debugPrint(e+1),this.it1&&this.it1.debugPrint(e+1)},r.prototype.next=function(){for(;this.ci<this.childrenLen;){var e=this.children[this.ci];if(this.ci++,this.itX1<e.x+e.width&&this.itY1<e.y+e.height&&this.itX2>e.x&&this.itY2>e.y&&!(e.id in this.deduper))return this.deduper[e.id]=!0,e}return null},r.prototype.debugPrint=function(e){void 0===e&&(e=0);new Array(e).join(" ")},e}()})},function(e,t,n){"use strict";var r,i,o;!function(n,a){i=[t],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(this,function(e){function t(){o&&caches.delete("pdfs-v1")}function n(e){var t=new URL(e);return["notablepdffiles.s3.amazonaws.com","notabledevelopmentuploads.s3.amazonaws.com","notabletemporarydownloads.s3.amazonaws.com"].indexOf(t.hostname)>-1?t.origin+t.pathname:e}function r(e,t){return e.indexOf(t,e.length-t.length)!==-1}var i="pdfs-v2",o="undefined"!=typeof caches&&null!==caches;t.prototype={addBlob:function(e,t){if(e&&t&&t.size&&o){var a=n(e),s=new URL(e);if(["http:","https:","ftp:"].indexOf(s.protocol)===-1)return;var l=s.hostname;if(r(l,"googleusercontent.com"))return;var c={status:200,statusText:"OK",headers:{"Content-Type":t.type},url:a};return caches.open(i).then(function(e){return e.put(a,new Response(t,c))}).catch(function(e){return Promise.reject(e)})}},add:function(e,t,n){if(e&&t&&t.byteLength&&o){var r=PDFJS.createBlob(t,n);this.addBlob(e,r)}},addPdf:function(e,t){this.add(e,t,"application/pdf")},getCachedFiles:function(){return o?caches.open(i).then(function(e){return e.keys()}):Promise.reject("Cache not supported")},serve:function(e,t){if(e&&o){var r=n(e);return caches.open(i).then(function(e){return e.match(r)}).then(function(e){if(e)return t?e.arrayBuffer().then(function(t){return PDFJS.createBlob(t,e.headers.get("Content-Type"))}):e.arrayBuffer();throw new PDFJS.MissingPDFException("Unable to load local file. No response found.")})}return Promise.reject(new PDFJS.MissingPDFException("Unable to load local file. Cache not supported."))},cacheURL:function(e){return"https://localfile.kamihq.com/audios/"+e}},e.FileCache=t})},function(e,t,n){(function(e){!function(e){e.fn.dropit=function(t){var n={init:function(t){return this.dropit.settings=e.extend({},this.dropit.defaults,t),this.each(function(){var t=e(this),n=e.fn.dropit.settings;t.addClass("dropit").find(">"+n.triggerParentEl+":has("+n.submenuEl+")").addClass("dropit-trigger").find(n.submenuEl).addClass("dropit-submenu").hide(),t.off(n.action).on(n.action,n.triggerParentEl+":has("+n.submenuEl+") > "+n.triggerEl,function(){function t(){n.beforeHide.call(r),e(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide(),n.afterHide.call(r),e(document).off("click",t)}if("click"==n.action&&e(this).parents(n.triggerParentEl).hasClass("dropit-open"))return n.beforeHide.call(this),e(this).parents(n.triggerParentEl).removeClass("dropit-open").find(n.submenuEl).hide(),n.afterHide.call(this),!1;n.beforeHide.call(this),e(".dropit-open").removeClass("dropit-open").find(".dropit-submenu").hide(),n.afterHide.call(this),n.beforeShow.call(this),e(this).parents(n.triggerParentEl).addClass("dropit-open").find(n.submenuEl).show(),n.afterShow.call(this);var r=this;return e(document).on("click",t),!1}),"mouseenter"==n.action&&t.on("mouseleave",".dropit-open",function(){n.beforeHide.call(this),e(this).removeClass("dropit-open").find(n.submenuEl).hide(),n.afterHide.call(this)}),n.afterLoad.call(this)})}};return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" does not exist in dropit plugin!'):n.init.apply(this,arguments)},e.fn.dropit.defaults={action:"click",submenuEl:"ul",triggerEl:"a",triggerParentEl:"li",afterLoad:function(){},beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){}},e.fn.dropit.settings={}}(e)}).call(t,n(1))},function(e,t){e.exports=function(){function e(e,t,n){for(var r=-1,i=t;i<n;i++){var a=255&(r^e[i]),s=o[a];r=r>>>8^s}return r^-1}function t(t,n){var r=new Uint8Array(12+n.length),i=0,o=n.length;r[i]=o>>24&255,r[i+1]=o>>16&255,r[i+2]=o>>8&255,r[i+3]=255&o,r[i+4]=255&t.charCodeAt(0),r[i+5]=255&t.charCodeAt(1),r[i+6]=255&t.charCodeAt(2),r[i+7]=255&t.charCodeAt(3),n instanceof Uint8Array&&r.set(n,8),i=8+o;var a=e(r,4,i);return r[i]=a>>24&255,r[i+1]=a>>16&255,r[i+2]=a>>8&255,r[i+3]=255&a,r}function n(e,t,n){for(var r=1,i=0,o=t;o<n;++o)r=(r+(255&e[o]))%65521,i=(i+r)%65521;return i<<16|r}function r(e,r){var o,a,s,l=e.width,c=e.height,u=e.data;switch(r){case i.GRAYSCALE_1BPP:a=0,o=1,s=l+7>>3;break;case i.RGB_24BPP:a=2,o=8,s=3*l;break;case i.RGBA_32BPP:a=6,o=8,s=4*l;break;case i.JPEG_STREAM:var d=PDFJS.createBlob(u,"image/jpeg"),f=URL.createObjectURL(d);return{blob:d,blobUrl:f};default:throw new Error("invalid format")}for(var h=new Uint8Array((1+s)*c),p=0,g=0,m=0;m<c;++m)h[p++]=0,h.set(u.subarray(g,g+s),p),g+=s,p+=s;var v=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,c>>24&255,c>>16&255,c>>8&255,255&c,o,a,0,0,0]),_=h.length,y=65535,b=new Uint8Array(2+_+5*Math.ceil(_/y)+4),w=0;b[w++]=120,b[w++]=156;for(var x=0;_>y;)b[w++]=0,b[w++]=255,b[w++]=255,b[w++]=0,b[w++]=0,b.set(h.subarray(x,x+y),w),w+=y,x+=y,_-=y;b[w++]=1,b[w++]=255&_,b[w++]=_>>8&255,b[w++]=65535&~_&255,b[w++]=(65535&~_)>>8&255,b.set(h.subarray(x),w),w+=h.length-x;var k=n(h,0,h.length);b[w++]=k>>24&255,b[w++]=k>>16&255,b[w++]=k>>8&255,b[w++]=255&k;var C=[new Uint8Array([137,80,78,71,13,10,26,10]),t("IHDR",v),t("IDAT",b),t("IEND","")],d=new Blob(C,{type:"image/png"}),f=URL.createObjectURL(d);return{blob:d,blobUrl:f}}for(var i={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3,JPEG_STREAM:"JpegStream"},o=[],a=0;a<256;a++){for(var s=a,l=0;l<8;l++)s=1&s?3988292384^s>>1&2147483647:s>>1&2147483647;o[a]=s}return function(e){var t=void 0===e.kind?i.GRAYSCALE_1BPP:e.kind;return r(e,t)}}()},function(e,t,n){"use strict";window.PinchZoomDetector=function(){var e=function(e,t){if(this.element=e,this.config=t||{},t.__proto__={threshold:0,gap:0,throwError:!1,passive:!1},!this.element)return this.handleError("You must pass in an element into PinchZoomDetector initialisation");var n=this;this.events={pinchstart:[],pinchmove:[],pinchend:[]},this.eventListeners={touchstart:n.handleTouchStart,touchmove:n.handleTouchMove,touchend:n.handleTouchEnd,pointerdown:n.handlePointerdown,pointerup:n.handlePointerup},this.state={startCenter:null,lastCenter:null,started:!1,lastPointerDown:null,lastPointerUp:null},this.dispatch()};return e.prototype={getCenter:function(e){for(var t={x:0,y:0},n=0;n<e.touches.length;n++)t.x+=e.touches[n].clientX,t.y+=e.touches[n].clientY;return t.x/=e.touches.length,t.y/=e.touches.length,t},enforceGap:function(e){if(!this.state.lastCenter)return this.state.lastCenter=e.center,!1;if(0===this.config.gap)return!0;var t=Math.abs(this.state.lastCenter.x-e.center.x)>this.config.gap||Math.abs(this.state.lastCenter.y-e.center.y)>this.config.gap;return t},enforceThreshold:function(e){if(this.state.started||!this.state.startCenter)return!0;var t=Math.abs(this.state.startCenter.x-e.center.x)>this.config.theshold||Math.abs(this.state.startCenter.y-e.center.y)>this.config.threshold;return t},handleError:function(e){if(this.config.throwError)throw new Error(e)},handleTouchStart:function(e){return this.state.lastPointerDown&&"touch"!==this.state.lastPointerDown.pointerType&&this.state.started?void e.preventDefault():void(e.touches.length<2||(e.center=this.getCenter(e),this.state.lastCenter=e.center,this.state.startCenter=e.center,this.runAll(this.events.pinchstart,e)))},handleTouchMove:function(e){e.touches.length<2||(e.center=this.getCenter(e),this.enforceGap(e)&&this.enforceThreshold(e)&&(this.state.lastCenter=e.center,this.state.started=!0,this.runAll(this.events.pinchmove,e)))},handleTouchEnd:function(e){this.state.lastPointerUp&&"touch"!==this.state.lastPointerUp.pointerType||e.changedTouches.length<1||(e.center=this.getCenter(e),this.state.lastCenter=null,this.state.started=!1,this.runAll(this.events.pinchend,e))},handlePointerdown:function(e){this.state.lastPointerDown=e},handlePointerup:function(e){this.state.lastPointerUp=e},runAll:function(e){var t=Array.prototype.slice.call(arguments);t.shift();for(var n in e)e[n].apply(this,t)},dispatch:function(){for(var e in this.eventListeners){var t="pointerdown"===e||"pointerup"===e;this.element.addEventListener(e,this.eventListeners[e].bind(this),{passive:this.config.passive,capture:t})}},on:function(e,t){if(!(e in this.events))return this.handleError("Invalid event type during on method: "+e);if("function"!=typeof t)return this.handleError("Callback parameter during on method must be a function");this.events[e].push(t);var n=this;return function(){n.off(e,t)}},off:function(e,t){if(!(e in this.events))return this.handleError("Invalid event type during off method: "+e);if("function"!=typeof t)return this.handleError("Reference parameter during off method must be a function");if(t){var n=MyArray.indexOf(TheObject);n!==-1&&MyArray.splice(n,1)}else this.events[e]=[]},destroy:function(e){for(var t in this.events)this.events[t]=[];if(!e)for(var t in this.eventListeners)this.element.removeEventListener(t,this.eventListeners[t])}},e}()},function(e,t){var n="/add_pages_dialog.html",r='<div class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1>\n        {{data.from == \'open screen\' ? \'New Blank Page\' : \'Add New Pages\'}}\n      </h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="pull-left">\n\n        <table>\n          <tr>\n            <td>\n              <h3>How Many:</h3>\n            </td>\n            <td>\n              <div class="input-field mdl-textfield mdl-js-textfield" mdl-parse>\n                <input class="mdl-textfield__input" type="text" ng-disabled="data.from == \'open screen\'" required pattern="-?[0-9]*(\\.[0-9]+)?" id="numberOfPages" ng-model="number_of_pages">\n                <label class="mdl-textfield__label" for="numberOfPages">Pages</label>\n                <span class="mdl-textfield__error">Requires a number!</span>\n              </div>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <h3>Page type:</h3>\n            </td>\n            <td>\n              <div class="input-field mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label" mdl-parse>\n                <select class="mdl-selectfield__select" ng-model="page_type">\n                  <option value="blank">Blank Paper</option>\n                  <option value="lined">Lined Paper</option>\n                  <option value="grid">Grid Paper</option>\n                  <option value="music">Music Paper</option>\n                </select>\n                <div class="mdl-selectfield__icon"><i class="material-icons">arrow_drop_down</i></div>\n              </div>\n            </td>\n          </tr>\n        </table>\n\n      </div>\n      <div class="pull-right">\n        <img class="preview-image" ng-src="{{get_preview()}}"/>\n      </div>\n      <div class="clearBoth">\n        <div>\n          <button ng-disabled="status == \'processing\'" class="button primary green" ng-click="done()"><span ng-hide="status == \'processing\'">ADD</span><span class="spinner mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active" mdl-parse ng-show="status == \'processing\'"></span></button>\n        </div>\n        <div class="message">\n          <div class="text-danger" ng-show="status == \'error\'">An error has occured {{error_msg}}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotation_autograph.html",r="<img class=\"autograph\" ng-src=\"{{autograph_image_url}}\"/>\n<div ng-show=\"can_edit()\" class='handle-right' ng-style='handleStyle'></div>\n<div ng-show=\"can_edit()\" class='handle-bottom' ng-style='handleStyle'></div>";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotation_comment.html",r='<div class="commentBody"\n    id="comment-{{::commentObj.id}}" ng-class="{new: commentObj.new_comment, twoPageMode: isTwoPageMode()}" ng-disabled="commentObj.readonly">\n  <div class="actual-comment">\n    <div class="author">\n      <div class="avatar">\n        <img alt="{{::commentObj.author.name}}\'s display image" title="{{::commentObj.author.name}}" ng-src="{{gravatar_image(commentObj.author.md5_email)}}" ng-show="gravatar_exists" ng-click="clicked_author()">\n        <a alt="{{::commentObj.author.name}}" title="{{::commentObj.author.name}}" class="initials internalLink" colorize-initials="{{::commentObj.author.id}}" ng-hide="gravatar_exists" ng-click="clicked_author()">{{::(commentObj.author.name | initials)}}</a>\n      </div>\n      <div class="dual-lines">\n        <div class="name" ng-click="clicked_author()">{{::commentObj.author.name}}</div>\n        <a class="commentDate internalLink" title="{{created_formatted}}">{{created_ago}}</a>\n      </div>\n      <div class="fa fa-times destroy" ng-if="can_edit()" ng-click="destroy()"></div>\n    </div>\n    <div>\n      <div ng-show="commentObj.annotation_type == \'Comment\'" class="new-comment-wrapper">\n        <div style="position: relative;">\n          <div class="comment" ng-model="commentObj.content" annotation-edit-handler editable="{{can_edit()}}" speech-input linkify="true" enter-to-exit="true" ng-model-options="{ updateOn: \'blur save\' }" speech-input-tag="{{commentObj.id}}"></div>\n          <speech-indicator speech-input-tag="{{commentObj.id}}"></speech-indicator>\n        </div>\n      </div>\n      <div ng-if="commentObj.annotation_type == \'Audio\'">\n          <div ng-if="!audio_error">\n            <audio ng-if="(commentObj.new_comment || attachment_url)" videojs-record="{src: \'attachment_url\', new: commentObj.new_comment}" class="vjs-default-skin"></audio>\n            <div ng-if="(!commentObj.new_comment && !attachment_url) || status == \'loading\'">Loading Audio comment...</div>\n          </div>\n          <div ng-if="audio_error" class="audio-error">\n            <i class="fa fa-exclamation-triangle"></i>\n            Use latest Chrome browser to enable Audio comment\n          </div>\n      </div>\n      <div ng-if="(commentObj.annotation_type == \'Video\' || commentObj.annotation_type == \'Desktop\')">\n        <webcam-recorder webcam-recorder-attributes="{src: \'attachment_url\', new: commentObj.new_comment, desktop: commentObj.annotation_type == \'Desktop\'}"></webcam-recorder>\n      </div>\n      <div ng-if="youtube_src()">\n        <video class="vjs-default-skin" videojs-youtube="youtube_src()">\n        </video>\n      </div>\n    </div>\n  </div>\n  <div class="replies">\n    <div class="more" ng-show="get_replies_length() > 1" ng-click="toggle_reply_limit()">{{limit_replies ? \'Show \' + (get_replies_length() - 1) + \' more replies\' : \'Show less\'}}</div>\n    <div class="reply" ng-controller="CommentController" ng-repeat="commentObj in commentObj.replies | filter:{deleted_at:null} | limitTo: (limit_replies ? -1 : commentObj.replies.length)" ng-if="!commentObj.deleted_at" id="reply-{{::commentObj.id}}">\n      <div class="actual-reply">\n        <div class="author">\n          <div class="avatar">\n            <img alt="{{::commentObj.author.name}}\'s display image" title="{{::commentObj.author.name}}" ng-src="{{gravatar_image(commentObj.author.md5_email)}}" ng-show="gravatar_exists" ng-click="clicked_author()">\n            <a alt="{{::commentObj.author.name}}" title="{{::commentObj.author.name}}" class="initials internalLink" colorize-initials="{{::commentObj.author.id}}" ng-hide="gravatar_exists" ng-click="clicked_author()">{{::(commentObj.author.name | initials)}}</a>\n          </div>\n          <div class="dual-lines">\n            <div class="name" ng-click="clicked_author()">{{::commentObj.author.name}}</div>\n            <a class="commentDate internalLink" title="{{created_formatted}}">{{created_ago}}</a>\n          </div>\n          <div class="destroy" ng-if="can_edit()" ng-click="destroy()"></div>\n        </div>\n        <div style="position: relative;">\n          <div class="comment" annotation-edit-handler editable="{{can_edit()}}" speech-input linkify="true" enter-to-exit="true" ng-model="commentObj.content" ng-model-options="{ updateOn: \'blur save\' }" speech-input-tag="{{commentObj.id}}"></div>\n          <speech-indicator speech-input-tag="{{commentObj.id}}"></speech-indicator>\n        </div>\n      </div>\n    </div>\n    <div class="new-reply-wrapper">\n      <div class="new-reply">\n        <div class="author">\n          <div class="avatar grayed-out">\n            <img alt="{{::current_user.name}}\'s display image" title="{{::current_user.name}}" ng-src="{{gravatar_image(current_user.md5_email)}}" ng-show="current_user.gravatar_exists" ng-click="clicked_author()">\n            <a alt="{{::current_user.name}}" title="{{::current_user.name}}" class="initials internalLink" colorize-initials="{{::current_user.id}}" ng-hide="current_user.gravatar_exists" ng-click="clicked_author()">{{::current_user.name | initials}}</a>\n          </div>\n        </div>\n        <div class="comment-wrapper">\n          <div style="position: relative;">\n            <div class="comment textarea-lookalike" editable="{{page_state.has_permission(\'edit\')}}" speech-input enter-to-exit="true" gray-avatar ng-model="new_reply.value" ng-model-options="{ updateOn: \'blur save\' }" speech-input-tag="new-reply-composer"></div>\n            <speech-indicator speech-input-tag="new-reply-composer"></speech-indicator>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotation_comment_pointer.html",r='<div class="pointer-wrapper" pointer-color-picker>\n  <div reference-spotlight class="pointer" ng-style="{\'background-color\': backgroundColor(), \'visibility\': \'visible\', \'transform\': pointerScale()}">\n    <annotation-comment comment-spotlight ng-style="{transform: commentBodyTransform()}" ng-if="hideComments"></annotation-comment>\n  </div>\n  <div class="color-picker-bridge" ng-if="can_edit()"></div>\n  <div class="color-picker" ng-if="can_edit()">\n    <div class="highlight-color-selector">\n      <div class="color-table">\n        <div class="color-row" ng-repeat="i in [0, 1, 2]">\n          <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j">\n            <div ng-click="set_color(index)" ng-style="{backgroundColor: get_color(index)}"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotation_equation.html",r='<div class="math-input"></div>\n<div class="math-latex" ng-show="false"></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotation_text.html",r='<div>\n  <div class="comment" ng-style="{color: commentObj.referring_to.color}" editable="{{can_edit()}}" speech-input ng-model="commentObj.content" ng-model-options="{ updateOn: \'blur save\' }" ng-class="{nowrap: nowrap}"></div>\n  <speech-indicator></speech-indicator>\n</div>\n<div class=\'handle-right\' prevent-touch-default ng-show="can_edit()"></div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/annotations_toolbar.html",r='<div id="annotation-toolbar" class="annotation-toolbar {{annotation_toolbar_detailed ? \'detailed\' : \'\'}}" ng-if="(page_state.document_state == \'loaded\' && !page_state.force_open_screen) && annotation_selector_visible">\n  <div class="tools-group">\n    <tool-selector annotation-type="normal" tooltip="Select">\n      <span class="tool-icon icomoon-select"></span>\n      <span class="tool-label">Select Text</span>\n    </tool-selector>\n    <div class="divider"></div>\n    <tool-selector annotation-type="highlight" tooltip="Highlight">\n      <span class="tool-icon icomoon-highlight"></span>\n      <span class="tool-label">Highlight</span>\n    </tool-selector>\n    <tool-selector annotation-type="strikethrough" tooltip="Strikethrough">\n      <span class="tool-icon icomoon-strikethrough"></span>\n      <span class="tool-label">Strikethrough</span>\n    </tool-selector>\n    <tool-selector annotation-type="underline" tooltip="Underline">\n      <span class="tool-icon icomoon-underline"></span>\n      <span class="tool-label">Underline</span>\n    </tool-selector>\n    <tool-selector annotation-type="comment" tooltip="Comment">\n      <span class="tool-icon icomoon-comment"></span>\n      <span class="tool-label">Comment</span>\n    </tool-selector>\n    <tool-selector annotation-type="text" tooltip="Text Box">\n      <span class="tool-icon icomoon-text"></span>\n      <span class="tool-label">Text Box</span>\n    </tool-selector>\n    <tool-selector annotation-type="equation" tooltip="Equation">\n      <!-- feature flagged -->\n      <i class="tool-icon mdi mdi-sigma"></i>\n      <span class="tool-label">Equation</span>\n    </tool-selector>\n    <tool-selector annotation-type="drawing" tooltip="Drawing">\n      <span class="tool-icon icomoon-draw"></span>\n      <span class="tool-label">Drawing</span>\n    </tool-selector>\n    <tool-selector annotation-type="shape" tooltip="Shapes">\n      <span class="tool-icon mdi mdi-shape-plus"></span>\n      <span class="tool-label">Shapes</span>\n    </tool-selector>\n    <tool-selector annotation-type="eraser" tooltip="Eraser">\n      <span class="tool-icon icomoon-erase"></span>\n      <span class="tool-label">Eraser</span>\n    </tool-selector>\n    <tool-selector annotation-type="image" tooltip="Insert Image" ngf-select="insert_image($file)">\n      <span class="tool-icon icomoon-image"></span>\n      <span class="tool-label">Insert Image</span>\n    </tool-selector>\n    <tool-selector annotation-type="autograph" tooltip="Signature" hide-tooltip="true">\n      <autograph-selector>\n        <span class="tool-icon icomoon-sign"></span>\n        <span class="tool-label">Signature</span>\n      </autograph-selector>\n    </tool-selector>\n    <tool-selector annotation-type="tts" tooltip="Text To Speech" wide="true">\n      <span class="tool-icon {{tts_is_speaking() ? \'fa fa-stop small\' : \'icomoon-textspeech\'}}"></span>\n      <span class="tool-label">Text To Speech</span>\n    </tool-selector>\n  </div>\n  <div class="toggle-toolbar" ng-click="toggle_annotation_toolbar()">\n    <span class="toggle-toolbar-icon fa fa-angle-double-right" ng-hide="annotation_toolbar_detailed"></span>\n    <span class="toggle-toolbar-icon fa fa-angle-double-left" ng-show="annotation_toolbar_detailed"></span>\n    <div class="tooltip-anchor" class="tooltip-anchor">\n      <div tooltips tooltip-template="Toggle Descriptions" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/app_rater.html",r='<div class="apprater header-notification-box">\n  <div class="close" ng-click="cancel()"></div>\n  <div class="rate">\n    <h2>Can you rate this app?</h2>\n    <div class="rating" ng-init="make_stars(5)">\n      <span ng-repeat="star in stars" ng-click="star.click()" ng-mouseover="star.hover()" ng-mouseleave="star.hoverEnd()" ng-class="{active: star.active()}" class="fa fa-star-o"></span>\n    </div>\n    <div class="message">\n      {{ratingMessage()}}\n    </div>\n    <p ng-show="options.rating > 3">\n      Thanks! Could you also rate us on the Chrome Web Store?<br />It would mean the world to us!\n    </p>\n    <p ng-show="options.rating > 0 && options.rating <= 3">\n      Thanks for your feedback! Could you tell us what can we improve on?\n    </p>\n    <textarea ng-show="options.rating > 0 && options.rating <= 3" ng-model="options.feedback" placeholder="Let us know what you think"></textarea>\n  </div>\n  <div class="buttons">\n    <button class="primary" ng-show="options.rating > 0 && options.rating <= 3" ng-disabled="options.feedback.length < 2" ng-click="ok(false)">Submit</button>\n    <button class="primary" ng-show="options.rating > 3" ng-click="ok(true)">Open Chrome Store</button>\n    <button class="" ng-show="options.rating > 3" ng-click="close()">Later</button>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/autograph_management_dialog.html",r='<div id="autograph-management-dialog" class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1 ng-show="state == \'main\'">Signatures</h1>\n      <h1 ng-show="state == \'enhance\'">Create a Signature</h1>\n      <h1 ng-show="state == \'uploading\'">Uploading Signature</h1>\n      <h1 ng-show="state == \'draw\'">Draw Signature</h1>\n      <h1 ng-show="state == \'phone\'">Create a Signature</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n\n    <div class="body upload">\n      <h2 ng-show="state == \'main\'">Add New Signature</h2>\n      <div>\n        <div ng-show="state == \'main\'" class="mdc-layout-row">\n          <button class="button" ngf-select="submit($file)" ngf-accept="\'image/*,application/pdf\'">\n            Upload Image\n          </button>\n          <button class="button" ng-click="draw()">\n            Draw Signature\n          </button>\n          <button class="button" ng-click="phone()">\n            Draw Signature on Phone\n          </button>\n        </div>\n        <div class="error" ng-if="error">\n          {{error}}\n        </div>\n        <div class="progress-bar" ng-show="state==\'uploading\'">\n          <span class="percentage">{{upload_percentage}}%</span>\n          <div class="progress" style="width: {{upload_percentage}}%"></div>\n        </div>\n        <div class="enhance" ng-show="state == \'enhance\'">\n          <div class="img-container">\n            <img ng-src="{{current_file_url}}" />\n            <div ng-show="processing" class="processing mdc-layout-row mdc-center-center">    \n              <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active" mdl-parse></div>    \n              <div>Processing...</div>    \n            </div>\n          </div>\n          <div class="mdc-layout-row mdc-layout-margin">\n            <div class="mdc-layout-row mdc-flex mdc-center-center mdc-layout-margin">\n              <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-enhance-autograph-image" mdl-parse>\n                  <input type="checkbox" id="checkbox-enhance-autograph-image" class="mdl-checkbox__input"  ng-checked="enhance" ng-click="enhance = !enhance; update_enhance()" ng-disabled="error">\n                  <span class="mdl-checkbox__label">Enhance</span>\n              </label>\n              <a class="rotate" ng-click="error || rotate()" ng-class="{disabled: error}">\n                <i class="fa fa-repeat"></i><span>Rotate</span>\n              </a>\n            </div>\n          </div>\n          <div class="mdc-layout-row">\n            <button class="button cancel mdc-flex" ng-click="cancel()">Cancel</button>\n            <span class="mdc-flex"></span>\n            <button class="button upload mdc-flex" ng-disabled="processing" ng-click="upload_enhance()">Upload</button>\n          </div>\n        </div>\n        <div class="draw" ng-show="state == \'draw\'">\n          <div class="container">\n            <div signature-pad="signaturePad" width="600" height="350" on-start="draw_started()"></div>\n            <div class="no-select help-text mdc-layout-row mdc-center-center" ng-class="{fade: hide_help}">\n              <h2>Draw Signature Here</h2>\n            </div>\n          </div>\n          <div class="mdc-layout-row">\n            <button class="button cancel mdc-flex" ng-click="cancel()">Cancel</button>\n            <button class="button clear mdc-flex" ng-click="signaturePad.clear()">Clear</button>\n            <button class="button upload mdc-flex" ng-click="upload_drawing()">Upload</button>\n          </div>\n        </div>\n        <div class="phone mdc-flex-column mdc-layout-margin" ng-show="state == \'phone\'">\n          <div class="mdc-flex">Open the following link in your mobile device</div>\n          <div class="input-container mdc-flex mdc-layout-row mdc-layout-margin">\n            <input class="mdc-flex mdc-layout-margin" ng-value="mobile_link" type="text" select-all-upon-click readonly="readonly" />\n            <div class="mdc-flex-none mdc-layout-row mdc-layout-margin">\n              <div class="icon-button mdc-flex-none"" click-to-copy="mobile_link" after-copy="after_copy()">\n                <i class="fa fa-files-o"></i>{{copy_text}}\n              </div>\n            </div>\n          </div>\n          <div class="mdc-flex mdc-layout-row">\n            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdc-flex-60" mdl-parse>\n              <input class="mdl-textfield__input" ng-model="user_email" type="email">\n              <label class="mdl-textfield__label" for="sample3">Text...</label>\n            </div>\n            <button class="button email mdc-flex-40 ng-disabled="!user_email || email_disabled" ng-click="send_email()">{{email_text}}</button>\n          </div>\n          <div class="mdc-flex mdc-layout-column mdc-center-center mdc-layout-margin">\n            <div ng-show="show_email_message">Email sent. Please check your spam or junk folder if you did not find the email in your inbox.</div>\n            <div>Waiting for new signature...</div>\n            <button class="button cancel mdc-flex" ng-click="cancel()">Cancel</button>\n          </div>\n        </div>\n      </div>\n      <div class="insert" ng-show="autographs.length && (state == \'main\' || state == \'uploading\')">\n        <h2>Click to Insert</h2>\n        <ul class="autographs">\n          <li class="autograph" ng-repeat="autograph in autographs" ng-class="{selected: selected == $index}" ng-click="select($index)" ng-dblclick="insert($index)">\n            <img ng-show="thumb_urls[autograph.id]" ng-src="{{thumb_urls[autograph.id]}}" ondragstart="return false;"/>\n            <div ng-hide="thumb_urls[autograph.id]">Loading...</div>\n            <div class="fa fa-times delete" ng-click="delete_autograph(autograph[\'id\']); $event.stopPropagation()"></div>\n          </li>\n        </ul>\n        <div class="mdc-layout-row mdc-center-center">\n          <button class="button" ng-disabled="!autographs[selected]" ng-click="insert()">Insert</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';
window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/autograph_selector.html",r='<div id="autograph-selector" ng-click="open_autograph_management_window()" ng-class="[\'autograph-selector\', \'selector\', \'tool-item-face-container\', \'mdc-flex\', \'mdc-layout-row\', $parent.$parent.annotation_toolbar_detailed() ? \'mdc-start-center\' : \'mdc-center-center\']">\n  <div ng-transclude class="autograph-face-container"></div>\n  <div ng-show="!tooltip_visible && autograph_enabled() && recent_autographs.length > 0">\n    <!-- Piggyback off highlight-color-selector css, for placement next to annotation button -->\n    <div class="highlight-color-selector">\n      <div class="recent-signatures-list">\n        <recently-used-autograph ng-repeat="autograph in recent_autographs"></recently-used-autograph>\n      </div>\n    </div>\n  </div>\n  <div class="tooltip-anchor" ng-hide="$parent.$parent.annotation_toolbar_detailed()">\n    <div tooltips tooltip-template="Signature" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/classroom_course_dialog.html",r='<div class="notable-overlay-container classroom-course-dialog">\n  <div class="container">\n    <div class="header">\n      <h1>{{::course.name}}</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="coursework_list">\n        <div class="coursework mdl-card mdl-card-wide mdl-shadow--2dp" ng-repeat="course_work in course_work_list">\n          <div class="mdl-card__title">\n            <h2 class="mdl-card__title-text">{{::course_work.title}}</h2>\n          </div>\n\n          <div class="mdl-card__supporting-text" ng-if="course_work.description">\n            {{::course_work.description}}\n          </div>\n        </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/classroom_open_screen.html",r='<div>\n  <div class="primary-storage-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" ng-click="link_google_classroom()" title="Link Google Classroom" ng-if="! classroom_user_id" mdl-parse>\n    <div class="mdc-layout-row mdc-center-center">\n      <i class="social_googledrive mdc-flex-20"></i>\n      <span class="mdc-flex-80">Link With Google Classroom</span>\n    </div>\n  </div>\n  <div class="recent-files mdl-card mdl-shadow--2dp" ng-if="classroom_user_id">\n    <span class="title">\n      <i class="fa fa-clock-o"></i>\n      Classroom\n    </span>\n    <div class="no-recents" ng-hide="courses.length">None</div>\n    <div class="courses" ng-show="courses.length" mdl-parse>\n      <div class="course mdl-card mdl-button mdl-shadow--2dp mdl-js-ripple-effect" ng-repeat="course in courses" ng-click="open_course_dialog(course)">\n        <div class="mdl-card__title">\n          <h2 class="mdl-card__title-text" ng-attr-title="{{::course.name}}">{{::course.name}}</h2>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/color_palette.html",r='<div class="notable-overlay-container color-palette" click-shadow-to-exit="close">\n  <div class="container">\n    <div class="header">\n      <h1>Create your color palette</h2>\n      <div class="close" ng-click="close()"></div>\n    </div>\n    <div class="body">\n      <div class="highlight-color-selector">\n        <div class="color-table">\n          <div class="color-row" ng-repeat="i in [0, 1, 2]">\n            <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j" >\n              <div ng-class="{selected: selected_palette_color_index === index}" ng-click="select_palette_color(index)">\n                <div style="background-color: {{palette_colors[index]}};"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <button class="reset muted" ng-click="reset()" ng-class="{show: can_reset()}">Reset</button>\n        <a class="reset-all" ng-click="reset_default()">Reset all to default</a>\n      </div>\n      <ul class="palette">\n        <li ng-repeat="color in all_colors" class="color" ng-class="{selected: palette_colors[selected_palette_color_index] === color}" ng-attr-style="background-color: {{color}};" ng-click="set_as_color(color)"></li>\n      </ul>\n      <br style="clear:both;"/>\n      <div>\n        <button class="button primary green" ng-click="save()">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/create_assignment_dialog.html",r='<div class="notable-overlay-container create-assignment-dialog">\n  <div class="container">\n    <div class="header">\n      <h1 ng-if="state != \'link_account\'">Assign</h1>\n      <h1 ng-if="state == \'link_account\'">Link Kami with Google Classroom</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div ng-if="state == \'loading\'">\n        <div class="mdl-progress mdl-js-progress mdl-progress__indeterminate" mdl-parse></div>\n      </div>\n\n      <div ng-if="state == \'link_account\'">\n        Click below your Google Classroom account to link with Kami. This account will be used for loading the courses you teach into Kami.\n\n        <div class="bottom-buttons">\n          <button ng-click="choose_link_account()" class="mdl-button padded-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" mdl-parse>\n            Choose Google Account\n          </button>\n        </div>\n      </div>\n\n      <div ng-if="state == \'create_assignment\' && courses.length > 0">\n        <div class="top-bar">\n            <label for="course">For</label>\n            <div name="course" ng-dropdown-multiselect="" options="courses" selected-model="assignment.courses" extra-settings="course_selector_settings" class="course-selector" ng-class="{\'has-selection\': assignment.courses.length > 0}"></div>\n            <div name="students" ng-dropdown-multiselect="" options="students" selected-model="assignment.students" extra-settings="student_selector_settings" class="student-selector has-selection"  disabled="assignment.courses.length != 1" translation-texts="student_selector_text"></div>\n            <div name="state" class="publish-selector has-selection disabled"  ng-dropdown-multiselect="" options="publish_states" selected-model="assignment.state" extra-settings="publish_selector_settings" class="publish-selector"></div>\n        </div>\n\n        <div class="details">\n          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" mdl-parse>\n            <input class="mdl-textfield__input" type="text" id="title" ng-model="assignment.title">\n            <label class="mdl-textfield__label" for="title">Title</label>\n          </div>\n          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" mdl-parse>\n            <input class="mdl-textfield__input" type="text" id="description" ng-model="assignment.description">\n            <label class="mdl-textfield__label" for="description">Instructions (optional)</label>\n          </div>\n        </div>\n\n        <div class="material" ng-repeat="material in assignment.materials" ng-class="{\'has-error\': material.error}">\n          <div class="material-left">\n            <div class="material-name">{{material.title}}</div>\n            <div class="material-type">Kami PDF</div>\n            <div class="material-error" ng-show="material.error">{{material.error}}</div>\n          </div>\n\n          <div class="material-right">\n            <select name="assignment_mode" ng-model="material.shareMode">\n              <option value="STUDENT_COPY">Make a copy for each student (recommended)</option>\n              <option value="EDIT">Students share one copy</option>\n              <option value="VIEW">Students cannot edit file</option>\n            </select>\n            <button ng-click="remove_material(material)" class="material-remove-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect" mdl-parse>\n              <i class="fa fa-close"></i>\n            </button>\n          </div>\n\n          <div class="material-progress" ng-show="material.progress_percent">\n            <div class="progress" style="width: {{material.progress_percent}}%"></div>\n          </div>\n        </div>\n\n        <div class="bottom-bar">\n          <div class="date_picker">\n            <label>Due</label>\n            <div moment-picker="assignment.due_date"\n                 min-view="month"\n                 max-view="hour"\n                 start-view="month"\n                 format="YYYY-MM-DD[T]HH:mm"\n                 set-on-select="true"\n                 min-date="now_time"\n                 today="true">\n                {{ (assignment.due_date | date:\'hh:mm a d MMM\') || "No due date" }}\n                <i class="mdi mdi-menu-down"></i>\n\n            </div>\n            <a ng-click="assignment.due_date = null" ng-show="assignment.due_date">\n              <i class="fa fa-close"></i>\n            </a>\n          </div>\n\n          <div class="date_picker">\n            <label>Scheduled Time</label>\n            <div moment-picker="assignment.scheduled_time"\n                 min-view="month"\n                 max-view="hour"\n                 start-view="month"\n                 format="YYYY-MM-DD[T]HH:mm"\n                 set-on-select="true"\n                 min-date="now_time"\n                 today="true">\n                {{ (assignment.scheduled_time | date:\'hh:mm a d MMM\') || "Now" }}\n                <i class="mdi mdi-menu-down"></i>\n\n            </div>\n            <a ng-click="assignment.scheduled_time = null" ng-show="assignment.scheduled_time">\n              <i class="fa fa-close"></i>\n            </a>\n          </div>\n\n        </div>\n        <div class="bottom-bar">\n          <div class="bottom-add-buttons">\n            <button ng-click="open_gdrive_picker()" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect" mdl-parse>\n              <i class="social_googledrive"></i>\n            </button>\n            <button ngf-select="attach_local_file($files)" multiple ngf-accept="application/pdf" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect" mdl-parse>\n              <i class="mdi mdi-paperclip"></i>\n            </button>\n\n            <span ng-show="assignment.materials.length > 1">Note: Students can turn in only a single file for each assignment.</span>\n          </div>\n          <div class="bottom-buttons">\n            <div class="progress-spinner" ng-show="assign_promise">\n              <div class="mdl-spinner mdl-js-spinner is-active" mdl-parse ></div>\n            </div>\n            <button ng-click="assign()" class="mdl-button padded-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" ng-disabled="assign_button_disabled()" mdl-parse>\n              Assign\n            </button>\n          </div>\n        </div>\n        <!-- Accent-colored raised button -->\n      </div>\n      <div ng-if="state == \'create_assignment\' && (courses.length == 0 || !courses)">\n        <h1>We didn\'t find any courses</h1> \n\n        We couldn\'t find any Google Classroom on your account. You can choose a different account below, or create a <a href="https://classroom.google.com/" target="_blank">Google Classroom account</a> if you don\'t have one.\n\n        <div class="bottom-buttons">\n          <button ng-click="choose_link_account()" class="mdl-button padded-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" mdl-parse>\n            Choose Google Account\n          </button>\n        </div>\n      </div>\n\n      <div ng-if="state == \'created\'">\n        <h1>Assignment Created</h1>\n        <h2 ng-show="assignment.retried_as_draft" style="color: red;">\n          We were unable to publish this assignment, so it has been created as a draft instead. Please click the open button below and choose \'Saved Posts\' at the top of the stream to publish the draft manually.\n        </h2>\n        <div class="bottom-buttons">\n          <button ng-click="open_coursework_classroom()" class="mdl-button padded-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" mdl-parse>\n            Open in Classroom\n          </button>\n        </div>\n      </div>\n\n      <div ng-if="state == \'error\'">\n        There was an error creating the assignment\n        <div class="bottom-buttons">\n          <button ng-click="try_again()" class="mdl-button padded-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" >\n            Try Again\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/dictionary_popup.html",r='<div class="dictionary-positioner" ng-controller="DictionaryPopupController" ng-class="{\'popup-above\': !popup_below}" style="display: none;">\n  <div class="dictionary-popup" ng-class="{\'popup-above\': !popup_below}">\n    <div class="popup-pointer-up" ng-show="popup_below"></div>\n    <div class="popup-pointer-down" ng-hide="popup_below"></div>\n    <div class="mdl-card mdl-shadow--6dp">\n      <div class="close"></div>\n      <div class="mdl-card__title">\n        <h2 class="mdl-card__title-text">\n          {{title}}\n        </h2>\n      </div>\n      <div ng-show="definitions == null && error == false" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>\n      <div ng-show="error" class="mdl-card__supporting-text error">\n        <br/>\n        {{error}}\n      </div>\n      <div class="mdl-card__supporting-text">\n        <div ng-show="definitions != null && definitions.length == 0 && error == false">\n          <br/>\n          No definitions found\n        </div>\n        <div ng-repeat="definition in definitions | limitTo: 3" ng-show="error == false">\n          <br/>\n          <h4>{{$index + 1}}. {{definition.part_of_speech}}</h4>\n          <br/>\n          {{definition.meaning}}\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t,n){var r="/download_dialog.html",i='<!-- Share download dialog  -->\n<div id="download-dialog" class="notable-overlay-container" click-shadow-to-exit="check_close">\n  <div class="container" ng-hide="show_export">\n    <div class="header">\n      <h1>\n        Export\n        <div class="close" ng-click="close()"></div>\n      </h1>\n    </div>\n    <div class="body">\n      <div ng-hide="has_permission">\n        <div class="no-permission-message">\n          You do not have permission to download this file.<br/>\n          Please ask the owner to enable the download permission.\n        </div>\n        <div>\n          <button class="muted" type="button" ng-click="close()">Close</button>\n        </div>\n      </div>\n      <div class="download-options" ng-show="has_permission">\n        <h2>How would you like to export?</h2>\n        <div id="method-options">\n          <button type="button" class="button muted" nt-radio-value="local" nt-radio-bind="options.method">Your computer</button>\n          <button type="button" class="button muted" nt-radio-value="drive" nt-radio-bind="options.method">Google Drive</button>\n        </div>\n        <div id="annotation-options">\n          <div id="export-original" class="button muted" nt-radio-value="original" nt-radio-bind="options.option">\n            <img src="'+n(211)+'" title="Original PDF file" class="icon" />\n            <div class="description">Original<br />No Annotation</div>\n          </div>\n          <div id="export-annotation" class="button muted" nt-radio-value="annotation" nt-radio-bind="options.option">\n            <img src="'+n(210)+'" title="PDF file with annotations embedded into document" class="icon" />\n            <div class="description">With Annotations<br />(PDF File)</div>\n          </div>\n          <div id="export-text" class="button muted" nt-radio-value="text" nt-radio-bind="options.option" ng-hide="options.method==\'drive\'">\n            <img src="'+n(212)+'" title="Annotation only text file" class="icon" />\n            <div class="description">Annotations only<br />(Text File)</div>\n          </div>\n        </div>\n        <div>\n          <form class="more" name="more_options">\n            <div ng-show="options.method==\'drive\'">\n              <div>File Name</div>\n              <div>\n                <label><input type="text" placeholder="{{::options.file_name}}" ng-model="options.file_name"></input></label>\n              </div>\n            </div>\n            <div ng-show="options.method==\'drive\'">\n              <div>Destination</div>\n              <div>\n                <a class="select-folder" ng-click="choose_folder()">Select Folder</a> <b>{{current_folder()}}</b>\n              </div>\n            </div>\n            <div ng-show="options.option == \'annotation\'">\n              <div><a href="https://community.kamihq.com/t/what-does-flatten-annotations-mean/185" title="Make annotations uneditable" target="_blank"><i class="mdi mdi-help-circle"></i></a> Flatten Annotations</div>\n              <div id="flatten-annotations">\n                <input type="checkbox" id="annotations-on-side" name="on_side" ng-model="options.on_side" />\n              </div>\n            </div>\n            <div ng-show="options.option == \'annotation\'">\n              <div>Pages</div>\n              <div id="page-options">\n                <div>\n                  <input type="radio" name="pages" id="all-pages" value="all" ng-model="options.pages" />\n                  <label for="all-pages">All Pages ({{::numPages}} pages)</label>\n                </div>\n                <div>\n                  <input type="radio" name="pages" id="annotated-pages" value="annotated" ng-model="options.pages" ng-disabled="!numAnnotatedPages"/>\n                  <label for="annotated-pages">Annotated Pages Only ({{::numAnnotatedPages}} pages)</label>\n                </div>\n                <div>\n                  <input type="radio" name="pages" id="custom" ng-value="custom_pages" ng-click="update_custom_pages()" ng-model="options.pages"/>\n                  <label for="custom">\n                    <input focus-me="focus_custom_pages_input" name="custom_pages_input" placeholder="e.g. 1-5,8,11-13" ng-model="custom_pages" ng-click="update_custom_pages()" ng-change="update_custom_pages()" ng-blur="custom_pages_blur()"></input>\n                  </label>\n                  <div ng-show="more_options.custom_pages_input.$invalid" class="error">Invalid page ranges.</div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div id="download-action">\n          <button type="button" class="button green primary" ng-disabled="more_options.$invalid" ng-click="start_exporting(options)">Begin Export</button>\n        </div>\n        <ul class="errors" ng-show="options.warning_message">\n          <li class="error">\n            {{options.warning_message}}\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class="container" ng-show="show_export">\n    <div class="header">\n      <h1 ng-show="export_dest == \'google_drive\'">\n        Save Document to Google Drive\n        <div class="close" ng-click="close()"></div>\n      </h1>\n      <h1 ng-show="export_dest == \'download\'">\n        Export Document\n        <div class="close" ng-click="close()"></div>\n      </h1>\n      <h1 ng-show="export_dest == \'print\'">\n        Preparing to Print\n        <div class="close" ng-click="close()"></div>\n      </h1>\n      <h3 ng-show="export_dest == \'download\'">\n        Export the annotations of this document to a PDF file.\n      </h3>\n      <h3 ng-show="export_dest == \'print\'">\n        Preparing the document before printing...\n      </h3>\n    </div>\n    <div class="body">\n      <div class="upload">\n        <div ng-show="page_state.export_status==\'uploading\' || page_state.export_status==\'uploaded\'">\n          <div class="progress-bar">\n            <span class="percentage">{{page_state.upload_percentage_text}}</span>\n            <div class="progress" style="width: {{page_state.upload_percentage_value}}%"></div>\n          </div>\n          <button type="button" class="button cancel" ng-click="cancel()">Cancel</button>\n        </div>\n        <div id="upload-error" ng-show="page_state.export_status==\'upload_error\'">\n          <p> An error has occurred during upload.</p>\n\n          <p>{{page_state.export_error_message}}</p>\n          <button type="button" class="button cancel" ng-click="cancel()">Go Back</button>\n        </div>\n      </div>\n      <div class="export">\n        <div ng-show="page_state.export_status==\'exporting\'">\n          <div class="progress-bar">\n            <span class="percentage">Processing...</span>\n            <div class="progress" style="width: 100%"></div>\n          </div>\n          <button type="button" class="button cancel" ng-click="cancel()">Cancel</button>\n        </div>\n        <div id="export-error" ng-show="page_state.export_status==\'export_error\'">\n          <p>An error has occurred during export.</p>\n          <p>{{page_state.export_error_message}}</p>\n          <div>If you have questions, contact <a href="mailto:support@kamihq.com">support@kamihq.com</a>\n          <span ng-show="export_job_id">\n            and quote job id: {{export_job_id}}\n          </span>\n          </div>\n          <button type="button" class="button cancel" ng-click="cancel()">Go Back</button>\n        </div>\n        <div id="export-completed" ng-show="page_state.export_status==\'exported\'">\n          <div>\n            <div ng-show="export_dest == \'download\'">Your export has successfully processed. Downloading...</div>\n            <div ng-show="export_dest == \'google_drive\'">The file has successfully saved to Google Drive.</div>\n            <div ng-show="export_dest == \'print\'">\n              <div class="progress-bar">\n                <span class="percentage">{{print_progress.text}}</span>\n                <div class="progress" style="width: {{print_progress.value}}%"></div>\n              </div>\n            </div>\n          </div>\n          <button ng-show="export_dest == \'download\'" type="button" class="button download" ng-click="download()">Download again</button>\n          <button ng-show="export_dest == \'google_drive\'" type="button" class="button download" ng-click="open_drive()">Open Google Drive</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(r,i)}]),e.exports=r},function(e,t){var n="/drive_upload_required_dialog.html",r='<div class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1>\n        Upload To Drive Required\n      </h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div>{{ngDialogData.message}}</div>\n      <br/>\n      <div>\n        <button class="button primary green" ng-click="upload()"><span>Upload</span></button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/enter_coupon_dialog.html",r='<div id="enter-coupon-dialog" class="notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1>\n        Enter License/Coupon\n        <div class="close" ng-click="closeThisDialog()"></div>\n      </h1>\n    </div>\n    <div class="body">\n      <div class="coupon">\n        <div class="message" ng-show="message">\n          {{message}}\n        </div>\n\n        <div ng-show="state != \'saving\' && state != \'applied\'">\n          <div>To apply your license/coupon, enter it below</div>\n          <div class="coupon-input mdl-textfield mdl-js-textfield mdl-textfield--floating-label" mdl-parse>\n            <input enter-to-save enter-license-field class="mdl-textfield__input" type="text" ng-model="license_key" ng-change="auto_correct_license()">\n            <label class="mdl-textfield__label">License/Coupon</label>\n          </div>\n          <div class="save-button mdc-layout-row mdc-center-center">\n            <button class="mdl-button mdl-button--raised mdl-js-button mdl-button--primary mdl-js-ripple-effect" mdl-parse ng-click="save()" ng-disabled="saving">Apply</button>\n          </div>\n        </div>\n\n        <div class="mdl-spinner mdl-js-spinner is-active" ng-if="state == \'saving\'"></div>\n\n        <div class="mdc-layout-row mdc-center-center" ng-show="state == \'applied\'">\n          <button class="mdl-button mdl-button--raised mdl-js-button mdl-button--primary mdl-js-ripple-effect" mdl-parse ng-click="closeThisDialog()">Close</button>\n        </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/extension_required_dialog.html",r='<div class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1>\n        {{::title}}\n      </h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <h3>\n        {{::body}}\n      </h3>\n      <button ng-click="install()" class="button primary green">Install Now</button>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/file_browser.html",r='<div id="file-browse-dialog" class="notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1>\n        {{title}}\n        <div class="close" ng-click="closeThisDialog(\'$escape\')"></div>\n      </h1>\n    </div>\n    <div class="body">\n      <div ng-if="action == \'select_copy\'">\n        <button class="button green" ng-click="closeThisDialog(\'new_copy\')">Create a new copy</button>\n        Select a copy\n      </div>\n\n      <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable" parse-mdl>\n        <thead>\n          <th class="name {{query.order === \'name\' || query.order === \'-name\' ? \'chosen\' : \'\'}}" ng-click="change_order(\'name\')">Name <span class="fa fa-arrow-{{query.order === \'-name\' ? \'down\' : \'up\'}} fa-1"></span></th>\n          <th class="collaborators">Collaborators</th>\n          <th class="updated {{query.order === \'updated_at\' || query.order === \'-updated_at\' ? \'chosen\' : \'\'}}" ng-click="change_order(\'updated_at\')"><span class="fa fa-arrow-{{query.order === \'-updated_at\' ? \'down\' : \'up\'}} fa-1"></span> Last Modified</th>\n          <th class="comments {{query.order === \'comments_count\' || query.order === \'-comments_count\' ? \'chosen\' : \'\'}}" ng-click="change_order(\'comments_count\')"><span class="fa fa-arrow-{{query.order === \'-comments_count\' ? \'down\' : \'up\'}} fa-1"></span> Comment Count</th>\n        </thead>\n        <thead>\n          <tr>\n            <th class="flat" colspan="5">\n              <div ng-hide="loaded" class="progress-bar mdl-progress mdl-js-progress mdl-progress__indeterminate" mdl-parse></div>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="document in documents" ng-click="select_document(document);" ng-dblclick="open_document(document)" ng-class="{\'selected\': document.$$hashKey == selected.$$hashKey}">\n            <td class="name">{{document.name}}</td>\n            <td class="collaborators">\n              <ul class="people" ng-init="overflow_limit=5">\n                <li ng-repeat="collaborator in document.collaborating_users | collaborator | limitTo:overflow_limit">\n                  <div class="avatar">\n                    <img alt="{{::collaborator.name}}\'s display image" title="Collaborator: {{::collaborator.name}}" ng-src="{{gravatar_image(collaborator.md5_email)}}" ng-show="collaborator.gravatar_exists">\n                    <a alt="{{::collaborator.name}}" title="Collaborator: {{::collaborator.name}}" class="initials" colorize-initials="{{::collaborator.id}}" ng-hide="collaborator.gravatar_exists">{{::collaborator.name | initials}}</a>\n                  </div>\n                </li>\n              </ul>\n            </td>\n            <td title="{{document.updated_at_formatted}}" class="updated">{{document.updated_at_friendly}}</td>\n            <td class="comments">{{document.comments_count}}</td>\n          </tr>\n        </tbody>\n      </table>\n      <div class="mdc-layout-row" style="border-top: 1px rgba(0, 0, 0, 0.12) solid">\n        <div class="mdc-flex">\n          <button class="mdl-button mdl-button--raised mdl-js-button mdl-button--primary mdl-js-ripple-effect pull-left" ng-click="open_document(selected)" ng-disabled="!selected" mdl-parse>\n            <span ng-if="action == \'select_copy\'">Select</span>\n            <span ng-if="action != \'select_copy\'">Open</span>\n          </button>\n        </div>\n        <div class="mdc-flex mdc-layout-row table-pagination mdc-center-right">\n          <div class="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label" mdl-parse>\n            <select class="mdl-selectfield__select" id="file-browser-page-number" name="file-browser-page-number" ng-model="query.page" ng-change="page_changed()" ng-options="page for page in getPageNumbers()"></select>\n            <div class="mdl-selectfield__icon"><i class="material-icons">arrow_drop_down</i></div>\n            <label class="mdl-selectfield__label" for="file-browser-page-number">Page Number</label>\n          </div>\n          <div class="total-page-number"><span ng-show="maxPage">of <b ng-bind="maxPage"></b></span></div>  \n          <div class="pagination-buttons">\n            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary mdl-button--raised" ng-click="page_changed(-1)" mdl-parse ng-disabled="query.page == 1">\n              <i class="fa fa-arrow-left"></i>\n            </button>\n            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary mdl-button--raised" ng-click="page_changed(+1)" mdl-parse ng-disabled="maxPage <= query.page">\n              <i class="fa fa-arrow-right"></i>\n            </button>\n          </div>        \n        </div>\n      </div>\n\n      <div style="clear:both"> </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/google_authorization_dialog.html",r='<div id="google-drive-authorization-window" class="notable-overlay-container">\n  <div class="container">\n    <div class="header dark-blue">\n      <h1>Google Drive</h1>\n      <div class="close" ng-hide="data.status == \'loading\' || data.disableClose" ng-click="close()"></div>\n    </div>\n    <div class="body">\n      <div class="loading" ng-show="data.status==\'loading\'">\n        <i class="fa fa-circle-o-notch fa-spin"></i>\n      </div>\n      <div id="plus-profile" ng-show="google_plus_profile && data.status == \'authorize\'">\n        <img id="plus-image" ng-src="{{google_plus_profile.image.url}}sz=180" ng-srcset="{{google_plus_profile.image.url}}sz=180 1x, {{google_plus_profile.image.url}}sz=380 2x" ng-attr-title="{{google_plus_profile.displayName}}" ng-if="data.status == \'authorize\'"/>\n        <div id="plus-details">\n          <div id="plus-display-name" ng-show="google_plus_profile.displayName">{{google_plus_profile.displayName}}</div>\n          <div id="plus-display-org" ng-show="google_plus_profile.organizations.length">{{google_plus_profile.organizations[0].name}}</div>\n        </div>\n      </div>\n      <pre class="drive-message" ng-show="data.additional_message.length && data.status != \'loading\'">{{data.additional_message}}</pre>\n      <div class="drive-message" ng-show="data.message.length && data.status != \'loading\'">{{data.message}}</div>\n      <div class="drive-message" ng-show="data.message.length && data.status == \'error\'">If this problem happens again, please email <a ng-href="{{mailto}}" target="_blank">support@kamihq.com</a> with a screenshot</div>\n      <button id="drive-authorize-button" class="button primary green" ng-click="popup_authorize()" ng-show="data.status==\'authorize\'">\n        Allow Google Drive\n      </button>\n      <button id="drive-try-anyway-button" class="button primary muted" ng-click="popup_authorize(true)" ng-show="data.status==\'authorize\' && error_type == \'wrong_user\' && !!data.authenticated_user_id">\n        Try Opening File Anyway\n      </button>\n    </div>\n  </div>\n</div>\n';
window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/help_dropdown.html",r='<div class="secondaryToolbar {{hanger == \'top-right\' ? \'doorHangerRight\' : \'\'}}" ng-cloak ng-show="show_dropdown == \'help\'">\n  <button id="whats-new-button" class="secondaryToolbarButton notable-nav-button" title="Keyboard Shortcuts" ng-click="open_window(\'news_dialog\')" tabindex="31">\n    <i class="mdi mdi-bell"></i>\n    <span>What\'s new</span>\n  </button>\n  <a id="secondary-faq-link" href="https://community.kamihq.com" target="_blank" class="linkButton secondaryToolbarButton notable-nav-button" title="Forum" tabindex="32" data-l10n-id="faq">\n    <i class="mdi mdi-message"></i>\n    <span>Support Forum</span>\n  </a>\n  <a id="secondary-faq-link" href="http://help.kamihq.com" target="_blank" class="linkButton secondaryToolbarButton notable-nav-button" title="FAQ" tabindex="33" data-l10n-id="faq">\n    <i class="mdi mdi-help-circle"></i>\n    <span>Knowledge Base</span>\n  </a>\n  <button id="keyboard-shortcuts" class="secondaryToolbarButton notable-nav-button" title="Keyboard Shortcuts" ng-click="open_shortcuts_modal()" tabindex="34">\n    <i class="mdi mdi-keyboard"></i>\n    <span>Keyboard Shortcuts</span>\n  </button>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/invalid_file_dialog.html",r='<div id="invalid-file-dialog" class="notable-overlay-container" ng-cloak>\n  <div class="container">\n    <div class="header">\n      <h1>\n        {{conversion_state == \'iframe\' ? \'Error Loading File\': \'Convert File\'}}\n        <div class="close" ng-click="closeThisDialog()"></div>\n      </h1>\n    </div>\n    <div class="body">\n      <div class="convert" ng-show="conversion_state == \'initial\'">\n        <h2>This file needs conversion to work in Kami</h2>\n        <p>Would you like to convert it?</p>\n        <p><i>Conversion currently supports Word, Powerpoint, and most image files</i></p>\n      </div>\n      <div class="upload" ng-show="conversion_state != \'iframe\'">\n        <div class="progress-bar" ng-show="conversion_state==\'uploading\' || conversion_state==\'uploaded\'">\n          <span class="percentage">{{upload_percentage_text}}</span>\n          <div class="progress" style="width: {{upload_percentage_value}}%"></div>\n        </div>\n        <div id="upload-error" ng-show="conversion_state==\'upload_error\'">\n          <p>An error has occurred during upload. Please try again.</p>\n        </div>\n        <div id="conversion-error" ng-show="conversion_state==\'conversion_error\'">\n        <p>\n          An error has occurred during conversion. Please try again and if this error persists, contact <a href="mailto:support@kamihq.com">support@kamihq.com</a> <span ng-show="conversion_job_id">and mention job id: {{conversion_job_id}}</span>\n        </p>\n        </div>\n        <div id="conversion-error" ng-show="conversion_state==\'conversion_error_format\'">\n        <p><b>{{conversion_error_message}}</b></p>\n        <p><a ng-click="download_file()">Download the file instead</a></p>\n        <p>\n          If you have questions, contact <a href="mailto:support@kamihq.com">support@kamihq.com</a> <span ng-show="conversion_job_id">and mention job id: {{conversion_job_id}}</span>\n        </p>\n        </div>\n        <button id="upload-now-button" ng-show="conversion_state==\'initial\'" type="button" ng-click="upload_and_convert()" class="overlayButton">\n          <span>Convert</span>\n        </button>\n        <a id="upload-cancel-button" ng-show="conversion_state == \'uploading\'" ng-click="abort_convert()">\n          Cancel\n        </a>\n      </div>\n\n      <iframe class="conversion-preview" ng-if="conversion_state == \'iframe\'" sandbox srcdoc="{{iframe_src}}"></iframe>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/keyboard-shortcuts.html",r='<div click-shadow-to-exit="closeThisDialog" class="keyboard-shortcuts-dialog notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1>\n        Keyboard Shortcuts\n      </h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="left-column">\n        <p><b>1</b> Highlight</p>\n        <p><b>2</b> Strikethrough</p>\n        <p><b>3</b> Underline</p>\n        <p><b>4</b> Comment</p>\n        <p><b>5</b> Add Text</p>\n      </div>\n      <div class="right-column">\n        <p><b>6</b> Draw</p>\n        <p><b>7</b> Shape</p>\n        <p><b>8</b> Sign Document</p>\n        <p><b>9</b> Eraser</p>\n        <p><b>0</b> Select Text</p>\n      </div>\n      <br style="clear:both;"/>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/loading_dialog.html",r='<div class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1>{{data.title}}</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="loading" ng-show="google_status==\'loading\'">\n        <i class="fa fa-circle-o-notch fa-spin"></i>\n      </div>\n      <p>{{data.message}}</p>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/loading_error_dialog.html",r='<div class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1>{{data.title}}</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <p><b>{{data.message}}</b></p>\n      <br />\n      <p class="break-words">{{data.error}}</p>\n      <div ng-hide="is_embed">\n        <p>If you have any questions, email us at <a tabindex="-1" ng-href="{{mailto}}">support@kamihq.com</a>.</p>\n        <div>\n          <button class="button primary green" ng-click="closeThisDialog()">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/localstore_disabled_warning.html",r='<div id="localstore-disabled-warning" class="header-notification-box" ng-show="show_localstore_warning" ng-cloak>\n  <div class="close" ng-click="close()"></div>\n  <div class="ask">\n    <h2>Cookies are disabled</h2>\n    <p>Because your browser\'s cookies are disabled, Kami will experience issues.</p>\n  </div>\n  <div class="buttons">\n    <button class="button primary" ng-click="open_guide()">Tell me how to fix it</button>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/news_dialog.html",r=' <div click-shadow-to-exit="closeThisDialog" class="news-dialog notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1>\n        What\'s new\n      </h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 12th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Google Classroom Improvements:\n             <ul>\n              <li>Added back Draft Mode</li>\n              <li>Added the ability to schedule the assignment</li>\n              <li>Improved reliability of the turn in button</li>\n              <li>Students will now be prompted to unsubmit when they attempt to edit a text box after submitting</li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 8th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Select annotations mode has been launched.</li>\n            <li>Select and manipulate groups of annotations.</li>\n            <li>Copy and pasting annotations.</li>\n            <li>See the <a href="https://blog.kamihq.com/update-introducing-select-annotations/">blog post</a> for more information.</li>\n            <li>Email us at <a href="support@kamihq.com">support@kamihq.com</a> if you\'d like to give any feedback.</li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 7th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Improvements to Google Classroom integration - you can now choose individual students, set a due date, and assign all students one copy of the file.</li>\n            <li>You can now create \'Desktop\' annotations which will record your screen.</li>\n            <li>Improvements to voice typing / speech to text.</li>\n            <li>Fixes the back button, you can now press back and forward in your browser to navigate in Kami.</li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 31st, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li><b>Voice Typing is now released! Give it a try by making a text box or comment and clicking the microphone icon</b></li>\n            <li>You can now change the color of a comment pointer by hovering over it.</li>\n            <li>Comments embedded in the file can now only be edited by an owner of thie file.</li>\n            <li>The Undo button now stays visible after pressing it.</li>\n            <li>You can now snap a line to the nearest angle by pressing Shift while drawing or dragging it.</li>\n            <li>The setup screen will no longer automatically pop up when installing the Kami Extension</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 18th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Improved page number box - you can now more easily enter a page to move to.</li>\n            <li>Fixed rendering for some PDF files which were not displaying correctly.</li>\n            <li>Added Absolute Value and Pipe symbols to the equation tool</li>\n            <li>Improved reliability for Printing.</li>\n            <li>Clicking the Kami Logo will now take you to the Kami website</li>\n            <li>(Extension users) - Right clicking a link and choosing \'Open With Kami\' will now work even if the auto-open setting is turned off</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 15th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix for shortcuts dialog.</li>\n            <li>Fix rendering some PDFs.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 10th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Voice Typing (also known as Speech to Text) has been added in beta! Email us at <a href="support@kamihq.com">support@kamihq.com</a> if you\'d like early access.</li>\n            <li>Export now supports audio and video annotations.</li>\n            <li>Audio and Video annotations will now carry through to the students\' documents when using Google Classroom</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 8th, 2018</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>You can now add a license or coupon directly in the user menu without going to the settings screen.</li>\n            <li>Added back the create assignment button to the menu.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">December 21, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fixed a case where inserting a signature could fail.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">October 30, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fixed a case where creating audio annotations would fail after the first 5. Documents now support an unlimited number of audio annotations!</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">October 5, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>You can now add new pages to a document by clicking the plus button at the end of the document. This is brand new and in beta but we will be making improvements over time!</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">October 2, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Improvements for recent files list</li>\n            <li>Adds your name to the file when making a copy</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">September 8th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Google Classroom assignments can now be created with image files, Word, and Powerpoint.</li>\n            <li>More reliability improvements for the Google Classroom turnin button.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">September 8th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Improvements for usability of Kami on Ipads and iPhones.</li>\n            <li>Added support for Team Drives.</li>\n            <li>Reliability improvements and bug fixes for Google Drive auto-upload.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">September 1st, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Reliability improvements for the Google Classroom  in-app turn in button.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">August 31st, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Google Classroom assigning now works with Google Docs, Sheets, and Slides.</li>\n            <li>Bug fixes for the Google Classroom integration</li>\n            <li>Fixes for dictionary tool</li>\n            <li>The teacher or student status of your account is now shown in the user profile dropdown.</li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="changelog mdc-layout-row">\n        <div class="date">August 15th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Released features for the new school year: Google Classroom Integration, Video Annotation, Equation Editor, and Dictionary - see <a href="https://blog.kamihq.com/welcome-to-kami-google-classroom-integration-video-annotation-dictionary-and-equation-editor/" target="_blank">our blog post</a></li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="changelog mdc-layout-row">\n        <div class="date">June 21st, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Syncing recents list across devices.</li>\n            <li>Recents list in the opener screen will now be consistent across all devices.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">May 31st, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Option to Automatically Upload opened files to Google Drive so they can be accessed on other computers later on.</li>\n            <li>Fix issue where automatic drive setting could appear to be off when it was actually on, also we now ensure saving is enabled for every file when it is turned on in settings.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">May 2nd, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>\'New Blank Page\' button which opens up a blank document in Kami (beta)</li>\n            <li>Improved Text Selection for some documents</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">April 19th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix a case where the text box could lose changes when zooming.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">April 11th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Kami Tool Bar redesign - see <a href="https://blog.kamihq.com/introducing-the-updated-tool-bar/" target="_blank">our blog post</a> for details.</li>\n            <li>Fix Google Drive Sync for passworded PDF files</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">March 17th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Enable Text To Speech on Pro Plan</li>\n            <li>Fix issue where, in rare cases, the wrong document was shown when loading files from Google Drive</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">March 15th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix two page view</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">March 13th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix a case where dragging a drawing by using the tooltip could result in slow performance and crashes</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">March 3rd, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix a case where the signature could dissapear when inserted</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">March 2nd, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix cases where textboxes could not be resized and could run off the page</li>\n            <li>Links from Notification emails now highlight the comment</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 28th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fix text-to-speech stop button</li>\n            <li>Fix PDFs appearing black in some rare cases</li>\n            <li>Fix highlighting text on Microsoft Edge</li>\n            <li>Fix a case where loading from the recent files list could fail if the file was opened from the shared files browser</li>\n            <li>Hide the intercom messaging button on small screens</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 22nd, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Greatly improved accuracy of exports for the Text Box tool</li>\n            <li>Fix a case where you would be switched back to the select text tool when clicking after inserting an image or signature</li>\n            <li>Fix some cases where file conversion would not work correctly</li>\n            <li>Improve performance of loading Google Docs exported documents</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">Feburary 9th, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Added ability to set file name when exporting to Google Drive</li>\n            <li>Back/forwards buttons now allow you to go back to a previously opened file</li>\n            <li>Undo now works for replies and added images</li>\n            <li>Improved performance and reduced bandwidth usage</li>\n            <li>Fixed authentication dialog which could not be scrolled</li>\n            <li>Minor layout fixes for Safari</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 19, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fixed comment box positioning on rotated documents</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 18, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Fixed creating paragraphs and formatting in text boxes and comments</li>\n          </ul>\n        </div>\n      </div>\n      <div class="changelog mdc-layout-row">\n        <div class="date">January 16, 2017</div>\n        <div class="day-changes" flex>\n          <ul>\n            <li>Kami is starting off the year right with a big release with lots of improvements!</li>\n            <li>For more information, view our <a href="https://blog.kamihq.com/kami-new-years-update/" target="_blank">blog post</a></li> \n            <li>Kami will now show the document name and Google Drive folder at the top of the screen, and you can click on it to rename!</li>\n            <li>We have redesigned the open screen with a cleaner look and increased focus on Google Drive</li>\n            <li>Allow adding images by simply dragging them in</li>\n            <li>You can now click links which are pasted into comments</li>\n            <li>You can now click the Kami Logo to return to the open screen once a document is open</li>\n            <li>Improved undo for drawings</li>\n            <li>Improved compatibility for touch actions on the Chrome 56 Beta.</li>\n            <li>Improved visuals when pinch-zooming documents with comments attached</li>\n            <li>We\'ve made it easier to enter in license codes in settings</li>\n            <li>Fixed layering of text and drawings</li>\n            <li>Fixed a case where empty annotations could disappear</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/notification_settings_dialog.html",r='<div id="notification-settings-dialog"  class="notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1>\n        {{title}}\n        <div class="close" ng-click="closeThisDialog()"></div>\n      </h1>\n    </div>\n    <div class="body">\n      <div class="settings">\n        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-notification-settings-1" mdl-parse>\n            <input type="checkbox" id="checkbox-notification-settings-1" class="mdl-checkbox__input" ng-model="document.notification_settings.email" aria-label="Email Notifications">\n            <span class="mdl-checkbox__label">Email Notifications for this document</span>\n        </label>\n        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-notification-settings-2" mdl-parse>\n            <input type="checkbox" id="checkbox-notification-settings-2" class="mdl-checkbox__input" ng-model="document.notification_settings.gcm" aria-label="Browser Notifications">\n            <span class="mdl-checkbox__label">Browser Notifications for this document</span>\n        </label>\n      </div>\n      <div class="mdc-layout-row mdc-center-center">\n        <button class="mdl-button mdl-button--raised mdl-js-button mdl-button--primary mdl-js-ripple-effect" mdl-parse ng-click="save()" ng-disabled="saving">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/ocr_beta_message.html",r='<div id="ocr-beta" ng-show="show_beta_message && status === \'normal\'" ng-cloak>\n  <div class="close" ng-click="close()"></div>\n  <div class="ask">\n    <h2>Scanned OCR <sup class="beta">BETA</sup></h2>\n    <p>This seems like a scanned PDF. Would you like to add the text?</p>\n  </div>\n  <div class="buttons">\n    <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" ng-click="run_ocr()">Run OCR</button><button class="mdl-button mdl-js-button mdl-button--raised" ng-click="close()">No thanks</button>\n  </div>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t,n){var r="/onboarding_dialog.html",i=' <div click-shadow-to-exit="closeThisDialog" id="onboarding-dialog-scroll-container" class="onboarding-dialog notable-overlay-container" ng-click="shadow_clicked($event)">\n  <div class="container" id="onboarding-dialog-click-container">\n    <div class="dialog-label">Complete Signup</div>\n\n    <!------------------------------------------------------ STEP 1 ------------------------------------------------------>\n\n    <div class="body step-1" ng-show="step == 1">\n      <div class="header"><img src="'+n(214)+'"/></div>\n      <div class="tagline">Almost there!  Tell me more,<br/> so we can customize Kami to your needs.</div>\n\n      <div class="question-section {{purpose.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="raw slide-v-animate {{purpose.value_toggle_state ? \'\' : \'active\'}}">\n            <div class="label-container">\n              <label class="input-label">What are you using Kami for?</label>\n              <ul class="vertical-pill-group">\n                <li ng-class="[{\'selected\': purpose.value == \'school\'}]" ng-click="purpose.set(\'school\')">K-12 School</li>\n                <li ng-class="[{\'selected\': purpose.value == \'college\'}]" ng-click="purpose.set(\'college\')">College/University</li>\n                <li ng-class="[{\'selected\': purpose.value == \'work\'}]" ng-click="purpose.set(\'work\')">Work</li>\n                <li ng-class="[{\'selected\': purpose.value == \'personal\'}]" ng-click="purpose.set(\'personal\')">Personal</li>\n              </ul>\n            </div>\n          </div>\n          <div class="answered fade-in-delay {{purpose.value_toggle_state ? \'active\' : \'\'}}">\n            <div class="answered-selector" ng-click="purpose.value_toggle_state = false">\n              <label class="input-label">I am using Kami for</label>\n              <button class="mdl-button mdl-js-button mdl-button--raised answered-pill" title="Click to edit">\n                <span ng-bind="purpose.value" ng-if="purpose.value != \'school\'"></span>\n                <span ng-if="purpose.value == \'school\'">school K-12</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section slide-v-animate animate-show-only delay-start {{school_role.show() ? \'active\' : \'\'}} {{school_role.emphasize ? \'emphasize\' : \'\'}}"> \n        <div class="padding-space">\n          <div class="raw slide-v-animate {{school_role.value_toggle_state ? \'\' : \'active\'}}">\n            <div class="label-container">\n              <label class="input-label">What are you?</label>\n              <ul class="horizontal-pill-group">\n                <li ng-class="[{\'selected\': school_role.value == \'student\'}]" ng-click="school_role.set(\'student\')">STUDENT</li>\n                <li ng-class="[{\'selected\': school_role.value == \'teacher\'}]" ng-click="school_role.set(\'teacher\')">TEACHER</li>\n                <li ng-class="[{\'selected\': school_role.value == \'other\'}]" ng-click="school_role.set(\'other\')">OTHER</li>\n              </ul>\n            </div>\n          </div>\n          <div class="answered fade-in-delay {{school_role.value_toggle_state ? \'active\' : \'\'}}">\n            <div class="answered-selector" ng-click="school_role.value_toggle_state = false; school_role.other_value_toggle_state = false">\n              <label class="input-label">I am a</label>\n              <button class="mdl-button mdl-js-button mdl-button--raised answered-pill" title="Click to edit">\n                <span ng-bind="school_role.value"></span>\n                <b ng-show="school_role.other_value && !school_role.other_value_toggle_state"> ({{school_role.other_value}})</b>\n              </button>\n            </div>\n          </div>\n          <div class="specify slide-v-animate delay-start {{school_role.other_value_toggle_state ? \'active\' : \'\'}}">\n            <div class="padding-space">\n              <label class="input-label">What describes your role the best:</label>\n              <ul class="vertical-pill-group">\n                <li ng-click="school_role.set_other(option)" ng-repeat="option in school_role.other_options" ng-bind="option"></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section  slide-v-animate delay-start {{ask_if_technology_officer.show() && ask_if_technology_officer.value === null? \'active\' : \'\'}} {{ask_if_technology_officer.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="label-container">\n            <label class="input-label">Are you the tech person?</label>\n            <ul class="horizontal-pill-group">\n              <li ng-click="ask_if_technology_officer.set(true)">YES</li>\n              <li ng-click="ask_if_technology_officer.set(false)">NO</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section  slide-v-animate animate-show-only delay-start {{work_industry.show() ? \'active\' : \'\'}} {{work_industry.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="raw slide-v-animate {{work_industry.value_toggle_state ? \'\' : \'active\'}}">\n            <div class="label-container">\n              <label class="input-label">WORK INDUSTRY:</label>\n              <ul class="vertical-pill-group">\n                <li ng-class="[{\'selected\': work_industry.value == option.toLowerCase()}]" ng-repeat="option in work_industry.options" ng-click="work_industry.set(option)" ng-bind="option"></li>\n              </ul>\n            </div>\n          </div>\n          <div class="answered fade-in-delay {{work_industry.value_toggle_state ? \'active\' : \'\'}}">\n            <div class="answered-selector" ng-click="work_industry.value_toggle_state = false; work_industry.other_value_toggle_state = false">\n              <label class="input-label">Work industry: </label>\n              <button class="mdl-button mdl-js-button mdl-button--raised answered-pill" title="Click to edit">\n                <span ng-bind="work_industry.value"></span>\n                <b ng-show="work_industry.other_value && !work_industry.other_value_toggle_state"> ({{work_industry.other_value}})</b>\n              </button>\n            </div>\n          </div>\n          <div class="specify fade-in-delay {{work_industry.other_value_toggle_state ? \'active\' : \'\'}}">\n            <div class="padding-space">\n              <label class="input-label">Please Specify: </label>\n              <div class="text-submit-field">\n                <div class="text-input mdl-textfield mdl-js-textfield mdl-textfield--floating-label" mdl-parse>\n                  <input ng-model="work_industry.other_value" ng-keypress="enter_to_save($event, work_industry)" class="mdl-textfield__input" type="text" id="workIndustryOther"/>\n                  <label class="mdl-textfield__label" for="workIndustryOther">work industry</label>\n                </div>\n                <button class="btn" ng-click="work_industry.other_value_toggle_state = !work_industry.other_value">OK</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section  slide-v-animate delay-start {{ask_if_k12.show() && ask_if_k12.value === null? \'active\' : \'\'}} {{ask_if_k12.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="label-container">\n            <label class="input-label">Working in a K-12 school?</label>\n            <ul class="horizontal-pill-group">\n              <li ng-click="ask_if_k12.set(true)">YES</li>\n              <li ng-click="ask_if_k12.set(false)">NO</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section slide-v-animate animate-show-only delay-start {{institute.show() ? \'active\' : \'\'}} {{institute.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="raw  slide-v-animate {{institute.value_toggle_state ? \'\' : \'active\'}}">\n            <label class="input-label">What is the name of your school?</label>\n            <div class="text-submit-field">\n              <div class="text-input mdl-textfield mdl-js-textfield mdl-textfield--floating-label {{institute.value? \'is-dirty\' : \'\'}}" mdl-parse>\n                <input id="onboarding-institute-input" ng-model="institute.value" ng-keypress="institute.enter_to_save($event)" class="mdl-textfield__input" type="text" id="instituteValue"/>\n                <label class="mdl-textfield__label" for="instituteValue">School Name?</label>\n              </div>\n              <button class="btn" ng-click="institute.set()">OK</button>\n            </div>\n          </div>\n          <div class="answered fade-in-delay {{institute.value_toggle_state ? \'active\' : \'\'}}">\n            <div class="answered-selector" ng-click="institute.value_toggle_state = false;"> \n              <label class="input-label">School name </label>\n              <button class="mdl-button mdl-js-button mdl-button--raised answered-pill" title="Click to edit">\n                <span ng-bind="institute.value"></span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="question-section subjects slide-v-animate animate-show-only delay-start {{subject.show() ? \'active\' : \'\'}} {{subject.emphasize ? \'emphasize\' : \'\'}}">\n        <div class="padding-space">\n          <div class="raw">\n            <label class="input-label">What subjects do you teach?</label>\n            <tags-input ng-model="subject.values" add-on-paste="true" on-tag-added="subject.added($tag)">\n              <auto-complete highlightMatchedText="true" debounce-delay="0" min-length="1" source="subject.show_options($query)"></auto-complete>\n            </tags-input>\n          </div>\n        </div>\n      </div>\n\n      <div class="appear-from-center {{show_submit_1() ? \'active\' : \'\'}}">\n        <button class="mdl-button mdl-button--raised mdl-js-button mdl-button--primary" id="step-1-submit" ng-click="submit_1()">SUBMIT</button>\n      </div>\n\n    </div>\n\n    <!---------------------------------------------------- END STEP 1 ---------------------------------------------------->\n  </div>\n</div>\n';
window.angular.module("ng").run(["$templateCache",function(e){e.put(r,i)}]),e.exports=r},function(e,t){var n="/open_screen.html",r='<div id="open-screen" class="main-open-container file-dropzone">\n\n    <button class="close-button mdl-button mdl-js-button mdl-button--icon" ng-show="page_state.force_open_screen" ng-click="page_state.force_open_screen = false">\n      <i class="fa fa-close"></i>\n    </button>\n\n    <div class="dropzone-container mdc-layout-column">\n\n      <div class="external-tools-buttons">\n        <button class="external-tools-button mdl-button mdl-js-button" ng-click="open_tool(\'ocr\')">\n          OCR\n        </button>\n        <button class="external-tools-button mdl-button mdl-js-button" ng-click="open_tool(\'merge\')">\n          Split &amp; Merge\n        </button>\n        <button class="external-tools-button mdl-button mdl-js-button" ng-click="open_tool(\'headers\')">\n          Header &amp; Bates\n        </button>\n      </div>\n\n      <div class="primary-storage-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" ng-disabled="!page_state.gapi_loaded" ng-click="open_gdrive_picker()" title="Google Drive">\n        <div class="mdc-layout-row mdc-center-center">\n          <i class="social_googledrive mdc-flex-20"></i>\n          <span class="mdc-flex-80">Open from Google Drive</span>\n        </div>\n      </div>\n\n      <div class="primary-storage-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" ng-show="show_teacher_features()" ng-click="open_assignment_dialog()" title="Google Classroom" ng-cloak>\n        <div class="mdc-layout-row mdc-center-center">\n          <i class="mdi mdi-google mdc-flex-20"></i>\n          <span class="mdc-flex-80">Create Classroom Assignment</span>\n        </div>\n      </div>\n\n      <div class="primary-storage-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" ng-click="open_file()" title="My computer">\n\n        <b id="dropzone-border-top"></b>\n        <b id="dropzone-border-right"></b>\n        <b id="dropzone-border-bottom"></b>\n        <b id="dropzone-border-left"></b>\n\n        <div class="mdc-layout-row mdc-center-center">\n          <i class="fa fa-hdd-o mdc-flex-20"></i>\n          <span class="text drag mdc-flex-80">Open from computer</span>\n          <span class="text drop mdc-flex-80">Drop to open</span>\n        </div>\n      </div>\n\n      <div class="primary-storage-button mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" ng-click="new_blank_page()" title="New Blank Page">\n        <div class="mdc-layout-row mdc-center-center">\n          <i class="fa fa-file-o mdc-flex-20"></i>\n          <span class="mdc-flex-80">New Blank Page</span>\n        </div>\n      </div>\n\n<!--       <classroom-open-screen />\n -->\n      <div class="recent-files mdl-card mdl-shadow--2dp">\n        <span class="title">\n          <i class="fa fa-clock-o"></i>\n          Recents\n        </span>\n        <div class="no-recents" ng-hide="recent_files.length">None</div>\n        <div class="files" ng-show="recent_files.length">\n          <div ng-repeat="doc in recent_files" ng-click="open_recent_file(doc)">\n            <div ng-hide="doc.hide" class="file mdc-layout-row mdc-center-center">\n              <div class="source fa fa-globe" ng-class="doc.source" ng-attr-title="{{:: doc.source | translateSource}}"></div>\n              <div class="name {{file_can_open(doc) ? \'\' : \'disabled\'}}" ng-attr-title="{{::doc.document_name}}">{{::doc.document_name}}</div>\n              <div class="remove fa fa-times" title="Remove" ng-click="remove_recent($event, doc)"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/premium_required_dialog.html",r='<div id="premium-required" class="notable-overlay-container" click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <h2>\n        <span ng-hide="school_role == \'student\'">Upgrade to the {{::required_plan}} plan to use {{::feature_name}}</span>\n        <span ng-show="school_role == \'student\'">Oops! You need to upgrade to use {{::feature_name}}</span>\n      </h2>\n      <div class="feature-description">\n        {{school_role == \'student\' ?\n        \'To access this feature, ask your teacher to consider upgrading to a Schools plan which lets them and up to 150 students get full Kami access!\'\n        : message || \'Time to unlock all Kami tools by upgrading today.\'}}\n        <div class="teacher-text" ng-show="school_role == \'teacher\'">With our teacher plan, you can add up to 150 students!</div>\n      </div>\n\n      <div ng-show="has_video">\n        <iframe\n          width="560"\n          height="315"\n          ng-src="{{trustSrc(feature_video)}}"\n          frameborder="0"\n          allowfullscreen></iframe>\n      </div>\n\n      <div ng-hide="school_role == \'student\'">\n        <button ng-click="view_plans()" class="button primary green">Upgrade Now</button>\n        <button ng-click="start_required_trial()" ng-disabled="redeemed" class="button primary blue start-trial">{{trial_message}}</button>\n      </div>\n      <div ng-show="school_role == \'teacher\' || school_role == \'student\'" class="update-settings-question">\n        Not a {{school_role}}? Click <span class="update-settings" ng-click="restart_onboarding()">here</span> to update your settings.\n      </div>\n      <div class="bottom-link">\n        <a ng-click="view_plans()">View all plans</a>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/profile_dropdown.html",r='<div id="user-profile" class="secondaryToolbar {{hanger == \'top-right\' ? \'doorHangerRight\' : \'\'}}" ng-show="show_dropdown == \'user\'">\n  <div class="profile" ng-if="short != \'true\'">\n    <div class="avatar">\n      <img alt="{{current_user.name}}" ng-src="{{gravatar_image(current_user.md5_email)}}" ng-show="current_user.gravatar_exists">\n      <a alt="{{current_user.name}}" class="initials" colorize-initials="{{current_user.id}}" ng-hide="current_user.gravatar_exists">{{(current_user.name | initials)}}</a>\n    </div>\n    <div id="user-profile-info">\n      <div class="name">{{current_user.name}}</div>\n      <div class="usage-purpose" ng-if="current_user.user_profile.usage_purpose == \'school\'">{{current_user.user_profile.school_role}}</div>\n      <div class="info-bottom">\n        <div class="email">{{current_user.email}}</div>\n        <div class="license-type">{{license_type}}</div>\n      </div>\n    </div>\n\n  </div>\n\n  <div ng-if="short == \'true\'" class="short-email">\n    {{current_user.email}}\n  </div>\n\n  <div class="horizontalToolbarSeparator"></div>\n\n  <a id="secondary-buy-premium-link" track-premium-click ng-show="!current_user.guest_user && license_show_upgrade" href="upgrade.html" target="_blank" class="linkButton secondaryToolbarButton notable-nav-button" title="Upgrade Kami" tabindex="33" data-l10n-id="get_premium">\n    <i class="icon-common fa-bolt"></i>\n    <span data-l10n-id="get_premium_label">Upgrade</span>\n  </a>\n\n  <a id="guest-signin" ng-show="current_user.guest_user" guest-login-click target="_blank" class="linkButton secondaryToolbarButton notable-nav-button" title="Login or Register" tabindex="34" data-l10n-id="login_or_register">\n    <i class="icon-common fa-sign-in"></i>\n    <span data-l10n-id="get_premium_label">Login or Register</span>\n  </a>\n\n  <a id="secondary-settings-link" href="options.html" title="Go to Settings" target="_blank" class="secondaryToolbarButton linkButton settings notable-nav-button" tabindex="35" data-l10n-id="settings">\n    <i class="icon-common fa-cog"></i>\n    <span data-l10n-id="settings_label">Settings</span>\n  </a>\n\n  <a id="guest-signin" ng-show="current_user.customer" href="options.html#billing" target="_blank" class="linkButton secondaryToolbarButton notable-nav-button" title="Manage Billing" tabindex="34" data-l10n-id="manage_billing">\n    <i class="icon-common fa-sign-in"></i>\n    <span data-l10n-id="manage_billing_label">Manage Billing</span>\n  </a>\n\n  <a title="Logout" class="secondaryToolbarButton linkButton notable-nav-button" tabindex="36" ng-click="logout()">\n    <i class="mdi mdi-logout"></i>\n    <span>Logout</span>\n  </a>\n\n  <div class="horizontalToolbarSeparator"></div>\n\n  <a id="secondary-settings-link" ng-click="open_window(\'enter_coupon\')" title="Enter License/Coupon" target="_blank" class="secondaryToolbarButton linkButton settings notable-nav-button" tabindex="35" data-l10n-id="settings">\n    <i class="mdi mdi-cash"></i>\n    <span data-l10n-id="settings_label">Enter License/Coupon</span>\n  </a>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/prompt_file_upload.html",r='<div class="prompt-file-upload-dialog header-notification-box {{state.centered? \'centered\' : \'\'}}" ng-cloak ng-if="state.dialog_visible">\n\t<div class="row" ng-show="uploading == false">\n\t\t<div class="message"><center ng-bind-html="state.title || \'This file is not uploaded\'"></center></div>\n\t\t<br/>\n\t\t<div class="actions row">\n\t\t\t<div class="buttons">\n\t\t\t\t<button class="pull-left" ng-click="upload_to_drive()">Save To Drive</button>\n\t\t\t\t<button class="pull-right" ng-click="dismiss()">Dismiss</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="options row">\n\t\t\t<input ng-model="state.auto_upload_google_drive" type="checkbox"/>\n\t\t\t<label>Always upload</label>\n\t\t</div>\n\t</div>\n\t<div class="row upload" ng-show="uploading == true">\n\t\t<div>Uploading to Drive</div>\n\t\t<div class="progress-bar">\n      <span class="percentage">{{page_state.upload_percentage_text}}</span>\n      <div class="progress" style="width: {{page_state.upload_percentage_value}}%"></div>\n      <span class="close" ng-show="page_state.upload_percentage_value > 0 && page_state.upload_percentage_value < 100" ng-click="cancel_upload()"></span>\n    </div>\n\t</div>\n\t<div class="row error" ng-show="uploading == \'auth\'">\n\t\t<div class="normal">Enable Saving to Drive</div>\n\t\t<div class="actions row">\n\t\t\t<div class="buttons">\n\t\t\t\t<button class="pull-left" ng-click="upload_to_drive()">Allow</button>\n\t\t\t\t<button class="pull-right" ng-click="dismiss()">Dismiss</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="row error" ng-show="uploading == \'error\'">\n\t\t<div class="danger">Error when uploading to Drive</div>\n\t\t<div class="actions row">\n\t\t\t<div class="buttons">\n\t\t\t\t<button class="pull-left" ng-click="upload_to_drive()">Try Again</button>\n\t\t\t\t<button class="pull-right" ng-click="dismiss()">Dismiss</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="row error" ng-show="uploading == \'checking\'">\n\t\t<center>Checking...</center>\n\t</div>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/read_only_file_dialog.html",r='<div class="notable-overlay-container create-copy-dialog">\n  <div class="container">\n    <div class="header">\n      <h1 ng-if="! classroom_file">Create a Copy</h1>\n      <h1 ng-if="classroom_file">This Document has been Turned In</h1>\n\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body" ng-if="! classroom_file">\n      <h3>The owner of this document ({{owner_name}}) has not granted you permission to edit this file. To edit, create your own copy below.</h3>\n      <div>\n        <button class="button green" ng-click="upload()">Create Copy</button>\n      </div>\n    </div>\n\n    <div class="body" ng-if="classroom_file">\n      <h3 ng-if="classroom_coursework.can_be_reclaimed()">In order to edit, you need to unsubmit this document.</h3>\n      <h3 ng-if="! classroom_coursework.can_be_reclaimed()">This document cannot be edited, however you can create a new copy of it.</h3>\n      <div>\n        {{classroom_coursework.status.progress}}\n        {{classroom_coursework.status.error}}\n        <button class="button green" ng-click="unsubmit_classroom()" ng-disabled="classroom_coursework.status.progress" ng-if="classroom_coursework.can_be_reclaimed()">Unsubmit</button>\n        <button class="button green" ng-click="upload()" ng-if="! classroom_coursework.can_be_reclaimed()">Create Copy</button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/recently_used_autograph.html",r='<img ng-src="{{autograph.autograph_image_thumb_url}}" ng-click="autograph_clicked($event)">\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/remove_upload_dialog.html",r='<div class="notable-overlay-container">\n  <div class="container">\n    <div class="header">\n      <h1 ng-bind-html="ngDialogData.header || \'Remove Upload\'"></h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <p ng-bind-html="ngDialogData.message"></p>\n      <div mdl-parse>\n        <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" ng-click="remove_upload()" ng-disabled="status == \'processing\'">  <span ng-hide="status == \'processing\'">Remove Upload</span>\n          <span ng-show="status == \'processing\'" class="spinner mdl-spinner mdl-js-spinner is-active" mdl-parse></span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/share_dialog.html",r='<!-- Share file online -->\n<div ng_if="!is_google" id="share-dialog" class="notable-overlay-container"  click-shadow-to-exit="closeThisDialog">\n  <div class="container">\n    <div class="header">\n      <h1 ng-hide="page_state.document.share_url && page_state.document.file_url">Sharing</h1>\n      <h1 ng-show="page_state.document.share_url && page_state.document.file_url">Sharing Options</h1>\n      <div class="close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body">\n      <div class="upload-message" ng-hide="page_state.document.file_url">\n        <h3>Upload to get a link to the document</h3>\n        <h4>You can delete the file at any time</h4>\n      </div>\n      <div class="upload" ng-hide="page_state.document.file_url">\n        <div class="progress-bar" ng-show="page_state.export_status==\'uploading\' || page_state.export_status==\'uploaded\'">\n          <span class="percentage">{{page_state.upload_percentage_text}}</span>\n          <div class="progress" style="width: {{page_state.upload_percentage_value}}%"></div>\n        </div>\n        <div id="upload-error" class="upload-error" ng-show="page_state.export_status==\'upload_error\'">\n          An error has occurred during upload. Please try again.\n        </div>\n        <div id="upload-permission-error" class="upload-error" ng-show="page_state.export_status==\'no_upload_permission_error\'">\n          Sorry, you need to be the owner of this document to share it.<br />\n          If you are the owner, and please email <a href="mailto:support@kamihq.com" target="_blank">support@kamihq.com</a> for help.\n        </div>\n        <button id="upload-now-button" ng-hide="page_state.export_status==\'uploaded\' || page_state.export_status==\'uploading\'" type="button" ng-click="upload_and_share()" class="overlayButton">\n          <span>Upload</span>\n        </button>\n        <a id="upload-cancel-button" ng-show="page_state.export_status == \'uploading\'" ng-click="abort_upload()">\n          Cancel Upload\n        </a>\n      </div>\n      <div class="share-link" ng-show="page_state.document.share_url && page_state.document.file_url">\n        <input id="share-link-input" ng-value="page_state.document.share_url" type="text" select-all-upon-click="page_state.document.share_url" readonly="readonly" />\n        <div class="buttons">\n          <div class="social">\n            <a id="facebook" class="fa fa-facebook social-button" fb-share-generate alt="Share via Facebook" title="Share via Facebook"></a>\n\n            <a id="twitter" class="fa fa-twitter social-button" ng-href="http://twitter.com/share?text=Check+out+this+file+on+%40officialkamihq&url={{page_state.document.share_url}}" target="_blank" alt="Share via Twitter" title="Share via Twitter"></a>\n            <button id="show-embed" class="button show-embed" ng-click="show_embed=!show_embed" title="Click to show embed code" alt="Click to show embed code">\n              <i class="fa fa-unlink"></i><span> Embed</span>\n            </button>\n          </div>\n          <div class="copy" click-to-copy="page_state.document.share_url" after-copy="after_copy()">\n            <i class="fa fa-files-o"></i>{{copy_text}}\n          </div>\n        </div>\n      </div>\n\n      <div id="embed-code" class="radio-box" ng-show="page_state.document.file_url && show_embed" ng-controller="EmbedCodeController">\n        <p>\n        Paste this code into your website\n        </p>\n        <div class="share-link">\n          <input ng-model="embed_code" type="text" select-all-upon-click="embed_code" readonly="readonly"></input>\n          <div class="buttons">\n            <div class="copy" click-to-copy="embed_code" after-copy="after_copy_embed()">\n              <i class="fa fa-files-o"></i>{{copy_text_embed}}\n            </div>\n          </div>\n        </div>\n        <p>\n        Your visitors will not need to sign up for Kami in order to see the document and comment.\n        </p>\n      </div>\n      \n      <div class="sharing-settings radio-box" ng-show="page_state.document.file_url">\n        <h3>\n        Link Sharing is <span ng-show="page_state.document.link_sharing != \'off\'">On</span><span ng-hide="page_state.document.link_sharing != \'off\'">Off</span><span class="status" ng-class="page_state.document.link_sharing"></span>\n        </h3>\n        <p ng-show="link_sharing_clicked === true && page_state.document.permissions !== \'owner\'">\n        Sorry, only the owner of this document can change settings.\n        </p>\n        <label ng-click="link_sharing_clicked = true">\n          <input type="radio" ng-change="update_document_settings()" ng-model="page_state.document.link_sharing" value="readwrite" ng-disabled="page_state.document.permissions !== \'owner\'">\n          <p>Anyone with link can annotate</p>\n        </label>\n        <!-- Hide read only for now due to some issues with implementation\n        <label>\n          <input type="radio" ng-change="update_document_settings()" ng-model="page_state.document.link_sharing" value="read">\n          <p>Anyone with link can read</p>\n        </label>-->\n        <label ng-click="link_sharing_clicked = true">\n          <input type="radio" ng-change="update_document_settings()" ng-model="page_state.document.link_sharing" value="off" ng-disabled="page_state.document.copy_type === \'google\' || page_state.document.permissions !== \'owner\'">\n          <p>Off</p>\n        </label>\n      </div>\n\n      <div class="sharing-settings radio-box" ng-show="page_state.document.file_url">\n        <h3>\n          Annotation Settings\n          <span class="status" ng-class="page_state.document.privacy"></span>\n        </h3>\n        <p ng-show="page_state.document.privacy != \'only_user\'">\n        Your annotations are shared with others viewing this file\n        </p>\n        <p ng-hide="page_state.document.privacy != \'only_user\'">\n        Your annotations are only visible to you<br />You can see other collaborators\' annotations shared with you\n        </p>\n        <label>\n          <input type="radio" ng-change="update_document_settings()" ng-model="page_state.document.privacy" value="with_file">\n          <p>Share my annotations with collaborators</p>\n        </label>\n        <label>\n          <input type="radio" ng-change="update_document_settings()" ng-model="page_state.document.privacy" value="only_user" ng-disabled="page_state.document.copy_type === \'google\'">\n          <p>Off</p>\n        </label>\n      </div>\n\n      <div class="sharing-settings radio-box" ng-show="page_state.document.file_url && page_state.document.permissions == \'owner\'">\n        <h3>\n          Sharing Permissions\n          <span class="status" ng-class="{on: sharing_permission_download}"></span>\n        </h3>\n        <p>\n          Collaborators can download and print this file\n        </p>\n        <div class="required-feature-work" data-feature-name="sharing-permission">\n          <label>\n            <input type="radio" ng-change="update_sharing_permissions()" ng-model="sharing_permission_download" ng-value="true" ng-disabled="!has_work">\n            <p>Yes</p>\n          </label>\n          <label>\n            <input type="radio" ng-change="update_sharing_permissions()" ng-model="sharing_permission_download" ng-value="false" ng-disabled="!has_work">\n            <p>No</p>\n          </label>\n        </div>\n      </div>\n\n      <div class="radio-box" ng-show="page_state.document.file_url">\n        <h3>Collaborators</h3>\n        <table class="collaborators">\n          <tr ng-repeat="collaborator in page_state.document.collaborating_users | collaborator">\n            <td class="avatar">\n              <img alt="{{::collaborator.name}}\'s display image" title="Collaborator: {{::collaborator.name}}" ng-src="{{gravatar_image(collaborator.md5_email)}}" ng-show="collaborator.gravatar_exists">\n              <div alt="{{::collaborator.name}}" title="Collaborator: {{::collaborator.name}}" class="initials" colorize-initials="{{::collaborator.id}}" ng-hide="collaborator.gravatar_exists">{{::collaborator.name | initials}}</div>\n            </td>\n\n            <td class="name">{{::collaborator.name}} {{::collaborator.id == current_user.id ? \'(You)\' : \'\'}}</td>\n            <td class="permission">Can Annotate</td>\n          </tr>\n        </table>\n      </div>\n      <a class="remove-upload" ng-show="page_state.document.file_url && page_state.document.permissions === \'owner\'" ng-click="remove_upload()">Remove upload</a>\n    </div>\n  </div>\n</div>\n\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t,n){var r="/signup_dialog.html",i='<div id="sign-up-in" class="overlayContainer overlay-common" ng-cloak ng-show="show_prompt">\n  <div class="container">\n    <div class="dialog">\n      <div class="close" ng-show="show_guest" ng-click="skip_signup()"></div>\n      <div class="header">\n        <img class="kami-logo" src="'+n(215)+'" alt="Kami Logo" />\n      </div>\n      <div>\n        <div class="forms" ng-show="we_are == \'signing_up\' || we_are == \'logging_in\'">\n          <div id="oauth" ng-show="we_are == \'logging_in\'">\n            <button id="google-oauth" ng-class="{disabled: google_disabled}" type="submit" class="overlayButton" ng-click="google_login_button()">\n              <span ng-hide="google_disabled"><i class="icon fa fa-google"></i>Sign In with Google</span>\n            </button>\n            <div class="or-separater"><span class="or">or</span></div>\n          </div>\n          <form id="sign-up-in-form" class="authentication_form" ng-submit="login_or_signup()" autocomplete=\'off\'>\n            <div id="sign-up-message" class="row" ng-show="we_are == \'signing_up\'">\n              <h3>This is the first time we\'ve seen your email.<br />Let\'s sign you up. <span class="link" ng-click="we_are=\'logging_in\'">Back to login</span></h3>\n            </div>\n            <div class="row" ng-show="errors.length" ng-cloak>\n              <ul class="errors">\n                <li class="error" ng-repeat="error in errors">\n                  {{error}}\n                  <span ng-show="error == \'Email is correct but invalid password.\'" ng-click="$parent.we_are=\'forgot_password\'" class="link"><br />Forgot Password?</span>\n                </li>\n              </ul>\n            </div>\n            <div class="row" ng-show="we_are == \'signing_up\'">\n              <input type="text" id="name" autofocus-upon-signing-up class="toolbarField" placeholder="Full Name *" ng-model="name" />\n            </div>\n            <div class="row" ng-show="show_custom_login || we_are !== \'logging_in\'">\n              <input type="email" id="email" autofocus-upon-loading class="toolbarField" placeholder="Email *" ng-model="email" />\n            </div>\n            <div class="row" ng-show="show_custom_login || we_are !== \'logging_in\'">\n              <input type="password" autocomplete="off" id="password" class="toolbarField" placeholder="Password *" ng-model="password" />\n            </div>\n            <div class="row" ng-show="show_custom_login || we_are !== \'logging_in\'">\n              <button id="sign-in-up-submit" ng-disabled="continue_disabled" ng-class="{disabled: continue_disabled}" type="submit" class="overlayButton">\n                <span ng-hide="continue_disabled">\n                  <span ng-if="we_are != \'logging_in\'">Continue</span>\n                  <span ng-if="we_are == \'logging_in\'">Login or Sign Up</span>\n                </span>\n              </button>\n            </div>\n            <div class="row" ng-hide="show_custom_login">\n              <button ng-click="show_custom_login=true;" type="button" class="overlayButton toggle-custom-login">\n                <span><i class="icon fa fa-envelope"></i>Sign In with Email & Password</span>\n              </button>\n            </div>\n            <div id="back-to-login" class="row link_right" ng-show="we_are == \'signing_up\'">\n              <span class="link" ng-click="we_are=\'logging_in\'">Back to login</span>\n            </div>\n            <div id="forgot-password" class="row link_right" ng-hide="we_are == \'signing_up\'">\n              <span class="link" ng-click="we_are=\'forgot_password\'">Forgot Password?</span>\n            </div>\n            <div id="box-oauth" ng-class="{disabled: box_disabled}" class="row link_left" ng-show="we_are == \'logging_in\'">\n              <span class="link" ng-click="box_login()" ng-hide="box_disabled">Sign In with Box</span>\n            </div>\n          </form>\n          <div id="skip-signup" class="row" ng-hide="we_are == \'signing_up\' || !show_guest">\n            <span class="link" ng-click="skip_signup()">Skip For Now</span>\n          </div>\n        </div>\n        <!-- Forgot password -->\n        <div class="forms" ng-show="we_are == \'forgot_password\'">\n          <div class="header">\n            <h3>Password Reset</h3>\n            <h3 ng-hide="password_reset_sent">\n              We\'ll email you instructions on how to reset your password.\n            </h3>\n            <h3 ng-show="password_reset_sent">\n              We have sent an email with reset instructions, it should arrive within a few minutes.\n            </h3>\n          </div>\n          <form id="forgot-password-form" class="authentication_form" ng-submit="forgot_password()" autocomplete=\'off\'>\n            <div class="row" ng-show="errors.length" ng-cloak>\n              <ul class="errors">\n                <li class="error" ng-repeat="error in errors">{{error}}</li>\n              </ul>\n            </div>\n            <div class="row" ng-hide="password_reset_sent">\n              <input type="email" id="email" autofocus-upon-loading class="toolbarField" placeholder="Email *" ng-model="email" />\n            </div>\n            <div class="row" ng-hide="password_reset_sent">\n              <button id="sign-in-up-submit" type="submit" class="overlayButton" ng-disabled="continue_disabled" ng-class="{disabled: continue_disabled}">\n                <span ng-hide="continue_disabled">\n                  Password Reset\n                </span>\n              </button>\n            </div>\n            <div class="row link_right" id="back_to_login">\n              <span class="link" ng-click="we_are=\'logging_in\'">Back to login</span>\n            </div>\n          </form>\n        </div>\n        <div class="forms first-install-page" ng-show="we_are == \'first_install_page\'">\n          <div class="message">\n            <h1>Successfully Installed</h1>\n            <div>You can sign up or skip. By signing up, you can back up your annotations and sync your settings.</div>\n          </div>\n          <div id="oauth">\n            <button id="google-oauth" type="submit" class="overlayButton" ng-click="google_login_button()">\n              <span><i class="icon"></i>Sign In with Google</span>\n            </button>\n            <div class="link skip-signup" ng-click="we_are = \'logging_in\'">\n              Login or Sign Up With Email\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(r,i)}]),e.exports=r},function(e,t){var n="/speech_indicator.html",r='<div ng-if="is_supported && feature_visible && is_active">\n  <div class="fa fa-microphone" title="Stop voice typing" style="color: red;" ng-show="is_running"></div>\n  <div class="fa fa-microphone" title="Start voice typing" ng-hide="is_running"></div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/styler_palette.html",r='<div class="styler-palette" ng-if="visible">\n  <div class="styler-palette-item color" ng-if="contained_properties.hasOwnProperty(\'color\')">\n    <div class="label">color</div>\n    <div class="action-container">\n      <div class="color-picker" ng-style="{backgroundColor: contained_properties.color}">\n        <div class="highlight-color-selector">\n          <div class="color-table">\n            <div class="color-row" ng-repeat="i in [0, 1, 2]">\n              <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j; cur_color = annotation_colors.colors()[index]" >\n                <div ng-click="modify_property(\'color\',cur_color)" ng-style="{backgroundColor: cur_color}"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="styler-palette-item fill-color" ng-if="contained_properties.hasOwnProperty(\'fillColor\')">\n    <div class="label">background</div>\n    <div class="action-container">\n      <div class="color-picker" ng-style="{backgroundColor: contained_properties.fillColor}">\n        <div class="highlight-color-selector">\n          <div class="color-table">\n            <div class="color-row" ng-repeat="i in [0, 1, 2]">\n              <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j; cur_color = annotation_colors.colors()[index]" >\n                <div ng-click="modify_property(\'fillColor\',cur_color)" ng-style="{backgroundColor: cur_color}"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="styler-palette-item font-size" ng-if="contained_properties.hasOwnProperty(\'thickness\')">\n    <div class="label">thickness</div>\n    <div class="action-container">\n      <select ng-change="modify_property(\'thickness\', contained_properties.thickness)" ng-model="contained_properties.thickness">\n        <option ng-repeat="thickness in annotation_colors.stroke_sizes()" value="{{thickness}}">{{thickness}}</option>\n      </select>\n    </div>\n  </div>\n\n  <div class="styler-palette-item font-size" ng-if="contained_properties.hasOwnProperty(\'font_size\')">\n    <div class="label">font</div>\n    <div class="action-container">\n      <select ng-change="modify_property(\'font_size\', contained_properties.font_size)" ng-model="contained_properties.font_size">\n        <option ng-repeat="font_size in annotation_colors.font_sizes()" value="{{font_size}}">{{font_size}}</option>\n      </select>\n    </div>\n  </div>\n\n  <div class="styler-palette-item opacity" ng-if="contained_properties.hasOwnProperty(\'opacity\')">\n    <div class="label">transparency</div>\n    <div class="action-container">\n      <select ng-change="modify_property(\'opacity\', contained_properties.opacity)" ng-model="contained_properties.opacity">\n        <option ng-repeat="opacity in annotation_colors.opacity_values()" value="{{opacity}}">{{opacity * 100}}%</option>\n      </select>\n    </div>\n  </div>\n\n  <div class="styler-palette-item rotation" ng-if="contained_properties.hasOwnProperty(\'rotation\')">\n    <div class="label">rotation</div>\n    <div class="action-container">\n      <select ng-change="modify_property(\'rotation\', contained_properties.rotation)" ng-model="contained_properties.rotation">\n        <option ng-repeat="rotation in [0, 90, 180, 270]" value="{{rotation}}">{{rotation}}&deg;</option>\n      </select>\n    </div>\n  </div>\n\n  <div class="styler-palette-item copy {{copied ? \'copied\' : \'\'}}">\n    <div class="label">copy</div>\n    <div class="action-container" ng-click="copy_selection()">\n      <span class="fa fa-copy"></span>\n    </div>\n  </div>\n\n  <div class="styler-palette-item delete">\n    <div class="label">delete</div>\n    <div class="action-container" ng-click="delete_selection()">\n      <span class="fa fa-trash"></span>\n    </div>\n  </div>\n</div>';
window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/symbol_picker.html",r='<div class="hiddensmallview">\n  <div class="header" ng-if="ui_config.header">\n    <div class="title">{{title}}</div>\n    <div class="fa fa-close close" ng-click="close()" ng-mousedown="prevent_default($event)" ng-mouseup="prevent_default($event)"></div>\n  </div>\n  <div class="body">\n    <div class="search-container">\n      <span class="search-icon fa fa-search"></span>\n      <input placeholder="Search Symbols" ng-model="search_term" ng-change="seach_updated()" class="search-bar" ng-mousedown="on_search_focus()" ng-blur="on_search_blur()"/>\n    </div>\n    <div class="symbols-container" ng-mousedown="prevent_default($event); symbol_container_mousedown();" ng-mouseup="prevent_default($event)">\n      <div class="recently-used-symbols" ng-if="recents.length > 0 && !search_term.length">\n        <div class="symbol-container size-{{symbol.size || 1}}" ng-repeat="symbol in recents" ng-click="select_symbol(symbol)" title="{{symbol.name}}">\n          <div class="symbol-display">\n            <span ng-bind-html="symbol.icon_html | trust_icon_html"></span>\n          </div>\n        </div>\n      </div>\n      <div class="all-symbols">\n        <div class="symbol-container size-{{symbol.size || 1}}" ng-repeat="symbol in all_symbols | filter: exclude_symbols | orderBy: sort_symbols" ng-click="select_symbol(symbol)" title="{{symbol.name}}">\n          <div class="symbol-display">\n            <span ng-bind-html="symbol.icon_html | trust_icon_html"></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/sync_dropdown.html",r='<div id="sync-dropdown" title="">\n  <div class="classroom-turnin" ng-show="classroom_coursework.status.course_data">\n    <div ng-show="classroom_coursework.status.state == \'fetching\' || classroom_coursework.status.state == \'authorizing\'">\n      <div id="p2" class="mdl-progress mdl-js-progress mdl-progress__indeterminate" mdl-parse></div>\n      <div class="progress-text">Loading...</div>\n    </div>\n\n    <div ng-show="classroom_coursework.status.state == \'error\'">\n      <div class="error-text">We couldn\'t load this assignment. Please refresh and try again.</div>\n    </div>\n\n    <div ng-show="classroom_coursework.status.state == \'loaded\' && !classroom_coursework.status.progress">\n      <div class="top_line">\n        <div class="name">{{classroom_coursework.status.course_work_info.name}}</div>\n        <div class="state">{{classroom_coursework.classroom_status_to_human(classroom_coursework.status.student_submission_info.state)}}</div>\n      </div>\n      <div class="material">\n        <div class="material-left">\n          <div class="material-name">{{page_state.document.name}}</div>\n          <div class="material-type">Kami PDF</div>\n        </div>\n      </div>\n\n      <div class="error-text" ng-show="classroom_coursework.status.error">{{classroom_coursework.status.error}}</div>\n\n\n      <div class="bottom-buttons">\n        <button mdl-parse class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" ng-click="classroom_coursework.turn_in()" ng-if="classroom_coursework.can_be_turned_in()" ng-disabled="classroom_button_disabled()">{{classroom_coursework.turn_in_label()}}</button>\n        <button mdl-parse class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect" ng-click="classroom_coursework.reclaim()" ng-if="classroom_coursework.can_be_reclaimed()" ng-disabled="classroom_button_disabled()">Unsubmit</button>\n      </div>\n    </div>\n\n    <div ng-show="classroom_coursework.status.state == \'loaded\' && classroom_coursework.status.progress" class="progress">\n      <div id="p2" class="mdl-progress mdl-js-progress mdl-progress__indeterminate" mdl-parse></div>\n\n      <div class="progress-text">{{classroom_coursework.status.progress}}</div>\n    </div>\n\n\n\n    <div class="horizontalToolbarSeparator"></div>\n    <button class="child secondaryToolbarButton" ng-show="!more_options" ng-click="more_options = true">\n      <span>More options</span>\n    </button>\n  </div>\n\n\n\n  <div ng-if="! classroom_coursework.status.course_data || more_options">\n    <div id="kami-sync">\n      <div class="header" title="Kami Cloud Sync">\n        <i class="fa fa-refresh"></i>\n        <span>Kami Cloud Sync</span>\n      </div>\n      <div class="body">\n        <div class="child" ng-show="sync_status(\'kami\')">\n          <i class="fa" ng-class="{\'fa-check\': unsync_count(\'kami\') === 0, \'fa-bolt\': unsync_count(\'kami\') > 0}"></i>\n          {{sync_status(\'kami\')}}\n        </div>\n        <div class="child" ng-show="last_sync(\'kami\')">\n          {{last_sync(\'kami\')}}\n        </div>\n      </div>\n    </div>\n    <div class="horizontalToolbarSeparator"></div>\n    <div id="google-drive-sync">\n      <div class="header" title="Google Drive">\n        <i class="social_googledrive"></i>\n        Google Drive\n      </div>\n      <div class="body" ng-show="service_enabled(\'drive\')">\n        <div class="child" ng-show="page_state.parent_id">\n          <i class="fa fa-folder"></i>\n          <a id="google-drive-location" class="location" ng-click="open_drive_folder()" title="Open folder in Google Drive">{{get_drive_folder()}}</a> \n          <a id="google-drive-move-folder" class="link change" ng-click="move_drive_folder()" title="Move to another folder">\n            <i class="fa fa-arrow-right"></i>Move\n          </a>\n        </div>\n        <div class="child" ng-hide="page_state.parent_id">\n          <a class="link" ng-click="move_drive_folder()" title="Add to My Drive">Add to My Drive</a>\n        </div>\n        <div class="child" ng-show="sync_status(\'drive\')">\n          <i class="fa" ng-class="{\'fa-check\': unsync_count(\'drive\') === 0, \'fa-bolt\': unsync_count(\'drive\') > 0}"></i>\n          {{sync_status(\'drive\')}}\n        </div>\n        <div class="child" ng-show="last_sync(\'drive\')">\n          {{last_sync(\'drive\')}}\n        </div>\n        <button class="child secondaryToolbarButton" ng-click="sync_now(\'drive\')" ng-disabled="syncing_status(\'drive\') === \'Saving...\'">\n          <i class="fa fa-cloud-upload"></i>\n          <span>{{syncing_status(\'drive\')}}</span>\n        </button>\n        <button class="child secondaryToolbarButton" ng-click="toggle_drive_auto_sync()">\n          <i class="fa" ng-class="google_drive_autosync_enabled ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n          <span>Auto Save</span>\n        </button>\n      </div>\n      <div class="body" ng-hide="service_enabled(\'drive\')">\n        <button class="child secondaryToolbarButton" ng-hide="uploading" ng-click="upload(\'drive\')">\n          <i class="fa fa-cloud-upload"></i>\n          <span>{{gdrive_upload_text()}}</span>\n        </button>\n        <div ng-show="uploading" class="child">Uploading...</div>\n      </div>\n    </div>\n    <div class="horizontalToolbarSeparator" ng-show="service_enabled(\'drive\')"></div>\n    <div id="more-export-options">\n      <div class="header" title="More">\n        <i class="fa fa-ellipsis-h"></i>\n        More\n      </div>\n      <div class="body">\n        <button class="child secondaryToolbarButton" ng-click="download()">\n          <i class="fa fa-download"></i>\n          <span>Download</span>\n        </button>\n        <button class="child secondaryToolbarButton" ng-click="show_export()">\n          <span>Advanced Export</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/tool_selector.html",r='<div \n ng-class="[\'tool-item\', {selected: annotation_state.annotation_mode == annotationType}]"\n ng-show="tool_visible"\n>\n  <div ng-click="toggle_annotation_mode(annotationType)" class="tool-item-face-container">\n  \t<div ng-transclude ng-class="[\'tool-item-face-container\', \'mdc-flex\', \'mdc-layout-row\', annotation_toolbar_detailed() ? \'mdc-start-center\' : \'mdc-center-center\']"></div>\n  \t<!-- Tooltip anchor used to hide/show the tooltip -->\n\t  <div class="tooltip-anchor" ng-class="[\'tooltip-anchor\', {\'shift-side\': annotation_state.annotation_mode == annotationType && !tool_items[annotationType].hideExpanded && !toggle_off}, {\'shift-side-wide\': wide}]" ng-hide="hideTooltip || annotation_toolbar_detailed()">\n\t    <div tooltips tooltip-template="{{::tooltip}}" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n\t  </div>\n  </div>\n  <tool-selector-expanded></tool-selector-expanded>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t,n){var r="/tool_selector_expanded.html",i='<div ng-class="[\'expanded\',{\'hide-expanded\' : tool_items[annotationType].hideExpanded || toggle_off},{\'wide\': wide}]">\n    <!--<div class="tool-name" ng-bind="tool_items[annotationType].title"></div>-->\n    <div class="tool-properties-container">\n      <div class="tool-property positioning select-type" ng-if="tool_items[annotationType].expanded.selectType">\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.selection_submode == \'normal\'}]" ng-click="change_sub_mode(\'normal\')">\n          <div class="icon icomoon-select"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Select Text" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.selection_submode == \'dictionary\'}]" ng-click="change_sub_mode(\'dictionary\')">\n          <div class="icon fa fa-book"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Dictionary" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.selection_submode == \'select\'}]" ng-click="change_sub_mode(\'select\')">\n          <i class="icon material-icons">select_all</i>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Select Annotations" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n      <div class="tool-property positioning" ng-if="tool_items[annotationType].expanded.commentType">\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.comment_submode == \'normal\'}]" ng-click="change_sub_mode(\'normal\')">\n          <div class="icon icomoon-comment"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Comment Text" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.comment_submode == \'audio\'}]" ng-click="change_sub_mode(\'audio\')">\n          <div class="icon fa fa-microphone"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Comment Audio" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.comment_submode == \'video\'}]" ng-click="change_sub_mode(\'video\')">\n          <div class="icon fa fa-video-camera"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Comment Video" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.comment_submode == \'desktop\'}]" ng-click="change_sub_mode(\'desktop\')">\n          <div class="icon fa fa-desktop"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Comment Desktop" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n      <div class="tool-property fontSize" ng-if="tool_items[annotationType].expanded.fontSize">\n        <ul class="menu" data-toggle="tooltip" data-placement="top" drop-it change-action="toggle_dropit_state">\n            <li>\n                <a href="javascript:void(0);" class="btn no-wrap">\n                  <span ng-bind="parseInt(annotation_state.text_font_size)"></span> <span class="fa fa-caret-down"></span>\n                  <div class="tooltip-anchor" ng-hide="dropit_state">\n                    <div tooltips tooltip-template="Font Size" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n                  </div>\n                </a>\n                <div class="dropit-animate-container">\n                  <ul>\n                      <li ng-repeat="size in font_sizes" ng-click="annotation_state.text_font_size=size" ng-class="{selected:annotation_state.text_font_size == size}"><span ng-bind="size"></span></li>\n                  </ul>\n                </div>\n            </li>\n        </ul>\n      </div>\n      <div class="tool-property thickness" ng-if="tool_items[annotationType].expanded.thickness">\n        <ul class="menu" data-toggle="tooltip" data-placement="top" drop-it change-action="toggle_dropit_state">\n            <li>\n                <a href="javascript:void(0);" class="btn no-wrap">\n                  <span ng-bind="parseInt(get_stroke_size())"></span> <span class="fa fa-caret-down"></span>\n                  <div class="tooltip-anchor" ng-hide="dropit_state">\n                    <div tooltips tooltip-template="Stroke Thickness" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n                  </div>\n                </a>\n                <div class="dropit-animate-container">\n                  <ul>\n                      <li ng-click="change_stroke_size(\'fill\')" ng-if="annotation_state.annotation_mode == \'shape\'" ng-class="{selected:get_stroke_size() == \'fill\'}"><span>FILL</span></li>\n                      <li ng-repeat="size in stroke_sizes" ng-click="change_stroke_size(size)" ng-class="[{selected:get_stroke_size() == size}, \'mdc-center-center\']">\n                        <span class="size-label" ng-bind="parseInt(size)"></span>\n                        <svg height="12" width="60" class="line">\n                          <line x1="0" y1="6" x2="60" y2="6" style="stroke:rgb(0,0,0);stroke-width:{{parseInt(size)}}" />\n                        </svg>\n                      </li>\n                  </ul>\n                </div>\n            </li>\n        </ul>\n      </div>\n      <div class="tool-property transparency" ng-mouseleave="toggle_transparency_state(false)" ng-if="tool_items[annotationType].expanded.transparency" ng-click="toggle_transparency_state(\'toggle\')">\n        <img class="transparency-picker" src="'+n(209)+'"/>\n        <div class="slider-animate-container slide-appear {{transparency_state ? \'active\' : \'\'}}">\n          <div class="slider-container">\n            <div class="slider-palette">\n              <input class="mdl-slider mdl-js-slider" mdl-parse type="range" min="0" max="100" value="0" tabindex="0" slider-bind="annotation_state.opacity">\n            </div>\n          </div>\n        </div>\n        <div class="tooltip-anchor" ng-hide="transparency_state">\n          <div tooltips tooltip-template="Transparency" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n        </div>\n      </div>\n      <div class="tool-property shapeType" ng-if="tool_items[annotationType].expanded.shapeType">\n        <div ng-class="[\'tooltip-container\',\'mdi\',\'mdi-crop-square\',{\'selected\' : annotation_state.drawing_shape == \'rectangle\'}]" data-toggle="tooltip" data-placement="right" title="Square Mode" ng-click="change_shape(\'rectangle\')">\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Square Mode" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div ng-class="[\'tooltip-container\',\'mdi\',\'mdi-checkbox-blank-circle-outline\',{\'selected\' : annotation_state.drawing_shape == \'ellipse\'}]" data-toggle="tooltip" data-placement="right" title="Circle Mode" ng-click="change_shape(\'ellipse\')">\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Circle Mode" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div ng-class="[\'tooltip-container\',\'mdi\',\'mdi-vector-line\',{\'selected\' : annotation_state.drawing_shape == \'line\'}]" data-toggle="tooltip" data-placement="right" title="Line Mode" ng-click="change_shape(\'line\')">\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Line Mode" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n      <div class="tool-property positioning" ng-if="tool_items[annotationType].expanded.positioning">\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.highlight_submode == \'normal\'}]" ng-click="change_sub_mode(\'normal\')">\n          <div class="icon icomoon-highlight-text"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Text Highlighter" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n        <div data-toggle="tooltip" data-placement="right" class="submode tooltip-container" ng-class="[{\'selected\' : annotation_state.highlight_submode == \'shape\'}]" ng-click="change_sub_mode(\'shape\')">\n          <div class="icon icomoon-highlight-box"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Box Highlighter" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n\n\n\n      <div class="tool-property hiddensmallview symbol-picker-button" ng-class="[{\'selected\' : palette_opened}]" ng-mousedown="prevent_default($event)" ng-mouseup="prevent_default($event)" ng-if="tool_items[annotationType].expanded.symbols"> \n      <!--Hide symbols palette on small screens because it\'s too big-->\n        <div data-toggle="tooltip" data-placement="right" class="tooltip-container" ng-click="toggle_symbols_palette()">\n          <div class="icon">ð</div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="Symbols Palette" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n\n\n\n\n      <div class="tool-property color" ng-if="tool_items[annotationType].expanded.color">\n        <div class="mdc-flex mdc-layout-row color-palette">\n\n          <!-- most recent colors -->\n          <div class="mdc-flex-column color-column recent-colors">\n            <div ng-class="[\'color-dot\',{selected: annotation_state.annotation_color_value[annotationType] == get_recent_colors()[i]}]" ng-repeat="i in [0, 1, 2]" ng-click="select_color(get_recent_colors()[i], true)" ng-attr-style="background-color: {{get_recent_colors()[i]}};"></div>\n          </div>\n\n          <!-- extended palette -->\n          <div class="mdc-flex-column color-column" ng-repeat="i in [0, 1, 2]">\n            <div ng-class="[\'color-dot\',{selected: annotation_state.annotation_color_value[annotationType] == get_color(index)}]" ng-repeat="j in [0, 1, 2]" ng-click="select_color(get_color(index), true)" ng-init="index = j * 3 + i" ng-attr-style="background-color: {{get_color(index)}};"></div>\n          </div>\n\n          <div class="square-peg-in-round-hole"></div>\n        </div>\n        <div class="more-colors-container tooltip-container" ng-click="edit_colors()">\n          <div class="color-dot more-color mdi mdi-palette edit" data-toggle="tooltip" data-placement="right"></div>\n          <div class="tooltip-anchor">\n            <div tooltips tooltip-template="More Colors" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n          </div>\n        </div>\n      </div>\n      <div class="tool-property tts-settings" ng-if="tool_items[annotationType].expanded.tts" ng-controller="TTSSettingsController">\n        <div class="tool-property">\n          <ul class="menu" data-toggle="tooltip" data-placement="top" drop-it change-action="toggle_dropit_state">\n              <li>\n                  <a href="javascript:void(0);" class="btn">\n                    <span ng-bind="voice.name | limitTo:14"></span> <span class="fa fa-caret-down"></span>\n                    <div class="tooltip-anchor" ng-hide="dropit_state">\n                      <div tooltips tooltip-template="Change Accent" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n                    </div>\n                  </a>\n                  <div class="dropit-animate-container">\n                    <ul>\n                        <li ng-repeat="_voice in voices" ng-click="setVoice(_voice)" ng-class="{selected:voice.name == _voice.name}"><span ng-bind="_voice.name"></span></li>\n                    </ul>\n                  </div>\n              </li>\n          </ul>\n        </div>\n        <div ng-init="tts_volume_state=false" ng-mouseleave="tts_volume_state=false" class="tool-property tts-speech-rate">\n          <div>\n            <span class="mdi mdi-clock-fast"></span>\n            <span class="tts_rate_display">{{rate | number:1}}x</span>\n          </div>\n          <div class=" slide-appear-side {{tts_volume_state ? \'active\' : \'\'}}">\n            <div class="slider-container">\n              <div class="slider-palette">\n                <input type="range" min="0.5" max="2.0" step="0.1" ng-model="rate" class="ng-pristine ng-valid ng-not-empty ng-valid-min ng-valid-max ng-valid-step ng-touched">\n                <button class="reset-rate-btn" ng-click="reset_rate()" title="reset"><small class="fa fa-repeat"></small></button>\n              </div>\n            </div>\n          </div>\n          <div class="tooltip-anchor" ng-click="tts_volume_state=!tts_volume_state"> <!-- nested anchors for a clicking point -->\n            <div class="tooltip-anchor" ng-hide="tts_volume_state">\n                <div tooltips tooltip-template="Speech Rate" tooltip-side="right" tooltip-class="tool-selector-tooltip"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(r,i)}]),e.exports=r},function(e,t){var n="/tooltip.html",r='<!-- commentObj in this local TooltipController scope references to CommentController\'s $scope.commentObj -->\n<div class="header" id="tooltip" ng-controller="TooltipController" tooltip-draggable>\n  <div class="author">\n    <div class="avatar">\n      <img alt="{{commentObj.author.name}}\'s display image" title="{{commentObj.author.name}}" ng-src="{{gravatar_image(commentObj.author.md5_email)}}" ng-show="gravatar_exists" ng-click="clicked_author()">\n      <a alt="{{commentObj.author.name}}" title="{{commentObj.author.name}}" class="initials internalLink" colorize-initials="{{commentObj.author.id}}" ng-hide="gravatar_exists" ng-click="clicked_author()">{{commentObj.author.name | initials}}</a>\n    </div>\n  </div>\n  <div class="highlight-button move fa-arrows" ng-show="can_move() && can_edit()" ></div>\n  <div class="highlight-button color color-picker" ng-show="has_color() && can_edit()" ng-style="{backgroundColor: commentObj.referring_to.color}">\n    <div class="highlight-color-selector">\n      <div class="color-table">\n        <div class="color-row" ng-repeat="i in [0, 1, 2]">\n          <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j" >\n            <div ng-click="set_referring_to(\'color\', get_color(index))" ng-style="{backgroundColor: get_color(index)}"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="fill-color color-picker" ng-show="has_fill_color() && can_edit()">\n    <div class="mdi mdi-format-color-fill fill-color">\n      <div class="highlight-color-selector">\n        <div class="transparent-color color-cell">\n          <div ng-click="set_referring_to(\'fillColor\', undefined)"></div>\n        </div>\n        <div class="color-table">\n          <div class="color-row" ng-repeat="i in [0, 1, 2]">\n            <div class="color-cell" ng-repeat="j in [0, 1, 2]" ng-init="index = i * 3 + j" >\n              <div ng-click="set_referring_to(\'fillColor\', get_color(index))" ng-style="{backgroundColor: get_color(index)}"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="fill-bar" ng-style="{backgroundColor: commentObj.referring_to.fillColor}"></div>\n  </div>\n  <select ng-show="has_size() && can_edit()" class="font-size" name="Font Size" ng-model="commentObj.referring_to.font_size" ng-options="size for size in font_sizes()" ng-change="property_updated(\'font_size\')"></select>\n  <select ng-show="has_opacity() && can_edit()" class="opacity-picker" name="Opacity" ng-model="commentObj.referring_to.opacity" ng-options="to_percentage(opacity) for opacity in opacity_values()" ng-change="property_updated(\'opacity\')"></select>\n  <div class="highlight-button fa-bars lines" ng-show="has_line() && can_edit()">\n    <div>\n      <ul>\n        <li ng-click="select_line_style(line)" ng-repeat="line in line_styles() track by $index"\n          ng-mouseover="hover(line)" ng-mouseleave="hoverOut()">\n          <i class="fa fa-check" ng-attr-style="{{is_selected(line) ? undefined : \'visibility: hidden\'}}"></i>\n          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="20" viewBox="0 0 80 20">\n            <defs>\n              <marker id="TooltipArrowEndHighlight"\n                      class="highlight"\n                      viewBox="0 0 10 10"\n                      refX="5" refY="5"\n                      markerWidth="2"\n                      markerHeight="2"\n                      orient="auto">\n                <path d="M 0 0 L 10 5 L 0 10 z" />\n              </marker>\n              <marker id="TooltipArrowStartHighlight"\n                      class="highlight"\n                      viewBox="0 0 10 10"\n                      refX="5" refY="5"\n                      markerWidth="2"\n                      markerHeight="2"\n                      orient="auto">\n                <path d="M 10 10 L 0 5 L 10 0 z" />\n              </marker>\n              <marker id="TooltipArrowEnd"\n                      viewBox="0 0 10 10"\n                      refX="5" refY="5"\n                      markerWidth="2"\n                      markerHeight="2"\n                      orient="auto">\n                <path d="M 0 0 L 10 5 L 0 10 z" />\n              </marker>\n              <marker id="TooltipArrowStart"\n                      viewBox="0 0 10 10"\n                      refX="5" refY="5"\n                      markerWidth="2"\n                      markerHeight="2"\n                      orient="auto">\n                <path d="M 10 10 L 0 5 L 10 0 z" />\n              </marker>\n            </defs>\n            <line x1="10" y1="10" x2="70" y2="10" ng-attr-stroke-dasharray="{{dash_array(line)}}" stroke-width="8" ng-attr-marker-start="{{marker_start(line)}}" ng-attr-marker-end="{{marker_end(line)}}"></line>\n            <div class="seperator" ng-if="$index == 1 && !$last"></div>\n          </svg>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div ng-show="can_copy()" id="copy" class="highlight-button" ng-class="tick ? \'tick\' : \'copy\'" click-to-copy="commentObj.referring_to.selected_text" after-copy="after_copy()"></div>\n  <div ng-show="is_highlight() && can_edit()" class="comment highlight-button" ng-click="convert_to_comment()" title="Convert to Comment"></div>\n  <div ng-show="can_edit() && has_rotate()" class="rotate highlight-button fa-undo" ng-click="rotate_left()" title="Rotate"></div>\n  <div ng-show="can_edit()" class="highlight-button fa-trash" ng-click="destroy()" title="Remove"></div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/trial_ended_ban_hammer.html",r='<div class="notable-overlay-container welcome-dialog" ng-init="options.init()">\n  <div class="container" ng-if="state == \'welcome\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between" style="text-align: center; display: inline;">\n        <h1>Thanks for using Kami</h1>\n      </div>\n    </div>\n    <div class="body">\n      <h2 style="padding-bottom: 10px;">Your trial has expired. Please fill in the form to extend your trial</h2>\n      <md-button class="md-raised md-primary" ng-click="change_state(\'work\')">Next</md-button>\n    </div>\n  </div>\n  <div class="container" ng-if="state == \'work\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between">\n        <h1>We\'ll contact you to upgrade</h1>\n      </div>\n    </div>\n    <div class="body">\n      <h2>What\'s the best way to reach you?</h2>\n      <form name="workForm" ng-submit="submit_work_form(workForm.$valid)" novalidate>\n        <div class="row" ng-show="errors.length">\n          <ul class="errors">\n            <li class="error" ng-repeat="error in errors">\n              {{error}}\n            </li>\n          </ul>\n        </div>\n        <div layout="column">\n          <md-input-container class="md-block" flex>\n            <label>Phone Number</label>\n            <input name="phone_number" ng-model="work_form.phone_number" required>\n            <div ng-messages="workForm.phone_number.$error">\n              <div ng-message="required">Required</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>What is the best time to contact you?</label>\n            <input name="best_time" ng-model="work_form.best_time" required>\n            <div ng-messages="workForm.best_time.$error">\n              <div ng-message="required">Required</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>Best Person To Speak to About Licensing?</label>\n            <input name="best_person" ng-model="work_form.best_person" required>\n            <div ng-messages="workForm.best_person.$error">\n              <div ng-message="required">Required</div>\n            </div>\n          </md-input-container>\n        </div>\n        <div class="ok-button-container">\n          <md-button class="md-raised md-primary" type="submit" ng-disabled="processing">Next</md-button>\n        </div>\n      </form>      \n    </div>\n  </div>\n  <div class="container" ng-if="state == \'finish\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between" style="text-align: center; display: inline;">\n        <h1>You\'ve received a 7 day extension</h1>\n        <div class="close" ng-click="close()"></div>\n      </div>\n    </div>\n    <div class="body">\n      <div>\n        <img src="/web/images/owen.jpg" style="width: 100px; height: 100px; border-radius: 100%; float: left; margin-left: 10px; border: 2px white solid;">\n        <h2 style="padding-bottom: 5px;">Owen Flanagan will be in touch</h2>\n        <p style="line-height: 20px;">Email: owen@kamihq.com<br />Phone: +1 (315) 612 2221</p>\n      </div>\n      <div class="ok-button-container" style="clear:both">\n        <md-button class="md-raised md-primary" ng-click="close()" type="submit">Finish</md-button>\n      </div>\n    </div>\n  </div>\n </div>\n';
window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/upgrade_dialog.html",r='<div class="notable-overlay-container upgrade-dialog">\n  <div class="container" ng-if="state == \'pro\'">\n    <div class="header">\n      <h1>Trial Expired</h1>\n      <div class="close" ng-show="show_close" ng-click="closeThisDialog()"></div>\n    </div>\n    <div class="body mdc-layout-column mdc-layout-margin">\n      <div class="mdc-layout-row mdc-layout-align-space-between mdc-flex">\n        <div class="mdc-layout-column mdc-flex">        \n          <div class="mdc-flex mdc-layout-column">\n            <div class="mdl-card mdl-shadow--2dp mdc-flex mdc-center-center">\n              <label class="mdl-radio mdl-js-radio" for="upgrade-dialog-1" mdl-parse>\n                <input type="radio" id="upgrade-dialog-1" value="year" ng-model="billing_cycle.value" name="billing_cycle_value" class="mdl-radio__button">\n                <div class="mdl-radio__label button-label">\n                  <div class="button-content mdc-layout-align-space-between mdc-layout-row">\n                    <div class="billing-type mdc-flex mdc-layout-row mdc-center-center">\n                      <b class="mdc-flex">Annual Billing</b>\n                    </div>\n                    <div class="mdc-layout-column mdc-flex-none">\n                      <div class="month-price">${{prices.year/12 | number: 2}}/month</div>\n                      <div class="year-price">${{prices.year}}/year</div>\n                    </div>\n                  </div>\n                </div>\n              </label>\n            </div>\n            <div class="mdl-card mdl-shadow--2dp mdc-flex mdc-center-center">\n              <label class="mdl-radio mdl-js-radio" for="upgrade-dialog-2" mdl-parse>\n                <input type="radio" id="upgrade-dialog-2" value="month" ng-model="billing_cycle.value" name="billing_cycle_value" class="mdl-radio__button">\n                <div class="mdl-radio__label button-label">\n                  <div class="button-content mdc-layout-align-space-between mdc-layout-row">\n                    <div class="billing-type mdc-flex mdc-layout-row mdc-center-center">\n                      <b class="mdc-flex">Monthly Billing</b>\n                    </div>\n                    <div class="mdc-layout-column mdc-flex-none">\n                      <div class="month-price">${{prices.month}}/month</div>\n                      <div class="year-price">${{prices.month*12}}/year</div>\n                    </div>\n                  </div>\n                </div>\n              </label>\n            </div>\n          </div>\n          <div class="mdc-flex-none">\n            <button class="button muted green" ng-click="upgrade_now()"><h2>Upgrade Now</h2></button>\n          </div>\n        </div>\n        <div class="mdc-layout-column mdc-flex">\n          <h3>Includes: </h3>\n          <ul>\n            <li>Collaborate with up to 5 users</li>\n            <li>Digital Signing</li>\n            <li>Auto-Save to Google Drive</li>\n            <li>Premium Email Support</li>\n            <li>Add Shapes, Audio &amp; Images</li>\n            <li>Convert Files to PDF</li>\n          </ul>\n        </div>\n      </div>\n      <div class="mdc-flex">\n        <span>Contact us at </span><a href="mailto:sales@kamihq.com">sales@kamihq.com</a>\n      </div>\n      <div class="mdc-flex">\n        <h2>Over 2 Million people use Kami to manage their documents</h2>\n      </div>\n    </div>\n  </div>\n  <div class="container" ng-if="state == \'success\'">\n    <div class="header">\n      <h1>Purchase Successful</h1>\n    </div>\n    <div class="body">\n      <h3>Thanks for purchasing.</h3>\n      <div>\n        <button class="button muted green" ng-click="closeThisDialog()">Close</button>\n      </div>\n    </div>\n  </div>\n  <div class="container" ng-if="state == \'error\'">\n    <div class="header">\n      <h1>Purchase Failed</h1>\n      <div class="close" ng-click="close()"></div>\n    </div>\n    <div class="body">\n      <p>{{errorMessage}}</p>\n      <p>Please try again and if this error persists, email us at <a tabindex="-1" ng-href="{{mailto}}">support@kamihq.com</a>.</p>\n      <div>\n        <button class="button muted green" ng-click="try_again()">Try Again</button>\n      </div>\n    </div>\n  </div>\n</div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/webcam_recorder.html",r='<div class="webcam-recorder">\n  <div class="video-container">\n    <video id="webcam-video" class="webcam-video" controlsList="nodownload"></video>\n    <div class="paused-video-cover" ng-show="media_recorder_state() == \'paused\'">\n      Please remember to click \'Done\'\n    </div>\n  </div>\n  <div class="controls-container">\n    <div class="controls-active" ng-if="media_recorder_state() != \'inactive\'" mdl-parse>\n      <button ng-click="pause_recording(true)" ng-show="media_recorder_state() == \'recording\'" title="Pause Recording" class="mdl-button mdl-button--raised mdl-js-button mdl-button--fab mdl-button--mini-fab  mdl-js-ripple-effect"><i class="material-icons recording-icon">fiber_manual_record</i></button>\n      <button ng-click="start_recording(true)" ng-show="media_recorder_state() == \'paused\'" title="Continue Recording" class="mdl-button mdl-button--raised mdl-js-button mdl-button--mini-fab mdl-button--fab mdl-js-ripple-effect"><i class="material-icons paused-icon">fiber_manual_record</i></button>\n      <button ng-click="stop_recording(true)" title="Finish Recording" class="done-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">Done</button>\n      <span class="time-tracker">{{recording_time | millisecondsToDateTime | date:\'mm:ss\'}} / {{max_time | millisecondsToDateTime | date:\'mm:ss\'}}</span>\n    </div>\n    <div class="upload" ng-if="sync_progress() != null">\n      <div class="progress-bar">\n        <div class="progress" style="width: {{sync_progress()}}%"></div>\n      </div>\n      <div class="saving-text">\n        Saving...\n      </div>\n    </div>\n    <div class="controls-incompatible" ng-if="recording_incompatible">\n      Your browser does not support playback of this video <br/>\n      Please use Chrome or Firefox for better support.\n    </div>\n  </div>\n</div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){var n="/welcome_dialog.html",r='<div class="notable-overlay-container welcome-dialog" ng-init="options.init()">\n  <div class="container" ng-if="state == \'welcome\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between"  style="text-align: center; display: inline;">\n        <h1>Welcome to Kami!</h1>\n      </div>\n    </div>\n    <div class="body">\n      <h2 style="padding-bottom: 5px;">Choose below to start a trial</h2>\n      <md-button class="md-raised md-primary" ng-click="change_state(\'work\')">I\'m a work or personal user</md-button>\n      <md-button class="md-raised md-primary" ng-click="change_state(\'school\')">I\'m a schools user</md-button>\n    </div>\n  </div>\n  <div class="container" ng-if="state == \'work\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between">\n        <h1>Try Kami Free for 7 days</h1>\n        <md-button class="" ng-click="change_state(\'school\')">Schools User?</md-button>\n      </div>\n    </div>\n    <div class="body">\n      <form name="workForm" ng-submit="submit_work_form(workForm.$valid)" novalidate>\n        <div class="row" ng-show="errors.length">\n          <ul class="errors">\n            <li class="error" ng-repeat="error in errors">\n              {{error}}\n            </li>\n          </ul>\n        </div>\n        <div layout="column">\n          <md-input-container class="md-block" flex>\n            <label>Job Title</label>\n            <input name="job_title" ng-model="work_form.job_title" required>\n            <div ng-messages="workForm.job_title.$error">\n              <div ng-message="required">Job Title is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>Industry</label>\n            <input name="industry" ng-model="work_form.industry" required>\n            <div ng-messages="workForm.industry.$error">\n              <div ng-message="required">Industry is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>Size of your Team</label>\n            <input name="team_size" ng-model="work_form.team_size" required>\n            <div ng-messages="workForm.team_size.$error">\n              <div ng-message="required">Team Size is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>Phone Number</label>\n            <input name="phone_number" ng-model="work_form.phone_number">\n            <div ng-messages="workForm.phone_number.$error">\n              <div ng-message="required">Phone Number is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>What would you like Kami to do for you?</label>\n            <textarea ng-model="workForm.like_to_do" rows="3" md-select-on-focus></textarea>\n          </md-input-container>\n        </div>\n        <div class="ok-button-container">\n          <md-button class="md-raised md-primary" type="submit" ng-disabled="processing">Get Started <br /> No obligation, no credit card required.</md-button>\n        </div>\n      </form>      \n    </div>\n  </div>\n  <div class="container" ng-if="state == \'school\'">\n    <div class="header">\n      <div layout="row" layout-align="space-between">\n        <h1>Schools License</h1>\n        <md-button ng-click="change_state(\'work\')">Work/Personal user?</md-button>\n      </div>\n    </div>\n    <div class="body">\n      <h3>Complete this form to get a 14 day trial license for your school</h3>\n      <form name="schoolsForm" ng-submit="submit_schools_form(schoolsForm.$valid)" novalidate>\n        <div class="row" ng-show="errors.length">\n          <ul class="errors">\n            <li class="error" ng-repeat="error in errors">\n              {{error}}\n            </li>\n          </ul>\n        </div>\n        <div layout="column">\n          <md-input-container class="md-block" flex>\n            <label>Are you a</label>\n            <md-select name="occupation" ng-model="schools_form.occupation">\n              <md-option value="teacher">Teacher</md-option>\n              <md-option value="IT_admin">School IT Admin</md-option>\n              <md-option value="principal">Principal</md-option>\n              <md-option value="student">Student</md-option>\n              <md-option value="other">Other</md-option>\n            </md-select>\n            <div ng-messages="schoolsForm.occupation.$error">\n              <div ng-message="required">Occupation is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>School or District Name</label>\n            <input name="school_name" ng-model="schools_form.school_name" required>\n            <div ng-messages="schoolsForm.school_name.$error">\n              <div ng-message="required">School Name is required.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>Phone Number</label>\n            <input name="phone_number" ng-model="schools_form.phone_number">\n          </md-input-container>\n          <md-input-container class="md-block" flex>\n            <label>What do you expect in a successful trial?</label>\n            <textarea ng-model="schools_form.questions" rows="3" md-select-on-focus></textarea>\n          </md-input-container>\n        </div>\n        <div class="ok-button-container">\n          <md-button class="md-raised md-primary" type="submit" ng-disabled="processing">Get Started</md-button>\n        </div>\n      </form>\n    </div>\n  </div>\n </div>\n';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,r)}]),e.exports=n},function(e,t){(function(t){e.exports=t}).call(t,{})},,function(e,t,n){(function(e,t){var r,i,o,a,s,l,c;n(164),window.$=e=n(1),window.angular=n(40),n(77),n(152),n(176),window.rangy=n(11),n(171),n(172),n(173),n(174),n(175),window._=n(2),window.moment=n(24),null==window.console&&(window.console={}),null==(r=window.console).debug&&(r.debug=function(){}),null==(i=window.console).log&&(i.log=function(){}),null==(o=window.console).warn&&(o.warn=function(){}),null==(a=window.console).error&&(a.error=function(){}),n(136),n(144),n(143),n(146),n(137),n(139),n(145),n(79),n(78),n(165),n(166),n(153),n(150),n(163),n(162),n(154),n(149),n(167),n(168),n(151),n(141),n(142),n(170),window.SVG=n(156),window.Notify=n(177),n(157),s=function(){var e,n,r,i,o;if(JSON.stringify(localStorage).length>4e6&&(n=localStorage.getItem("notable.recent_files"),e=null,n&&(r=JSON.parse(n),e=t.map(r,function(e){return e.document_identifier})),t.each(Object.keys(localStorage),function(n){var r;if((t.startsWith(n,"notable.document")||t.startsWith(n,"notable.comment"))&&(r=t.last(n.split("-")),!t.includes(e,r)))return localStorage.removeItem(n)}),JSON.stringify(localStorage).length>4e6))return o=localStorage.getItem("notable.user"),i=localStorage.getItem("notable.offline_sync_queue"),localStorage.clear(),localStorage.setItem("notable.user",o),localStorage.setItem("notable.offline_sync_queue",i)},s(),n(155),l=function(e){return e.keys().map(e)},l(n(178)),null!=("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0)?"undefined"!=typeof PDFJS&&null!==PDFJS&&(PDFJS.workerSrc="/content/web/notablecompiled/2.0.9593-20180301035713/pdf.worker.js"):"undefined"!=typeof PDFJS&&null!==PDFJS&&(PDFJS.workerSrc="./notablecompiled/2.0.9593-20180301035713/pdf.worker.js"),null==("undefined"!=typeof chrome&&null!==chrome?chrome.extension:void 0)&&"serviceWorker"in navigator&&(c=n(169),c.install({onUpdating:function(){var e,t,n;try{if(moment().diff(moment(notable.get_version().split("-")[1],"YYYYMMDDHHmmss"),"days")>14)return n=document.querySelector("#snackbar"),e={message:"Kami is updating...",timeout:1e5},n.MaterialSnackbar.showSnackbar(e)}catch(e){return void(t=e)}},onUpdateReady:function(){return c.applyUpdate()},onUpdated:function(){var e;try{if(moment().diff(moment(notable.get_version().split("-")[1],"YYYYMMDDHHmmss"),"days")>14)return window.location.reload()}catch(t){return void(e=t)}},onUpdateFailed:function(){}},function(){},function(){}))}).call(t,n(1),n(2))},,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},,,,function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(l(r.parts[o],t));f[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],l=i[3],c={css:a,media:s,sourceMap:l};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=g(),r=_[_.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function l(e,t){var n,r,i;if(t.singleton){var l=v++;n=m||(m=a(t)),r=c.bind(null,n,l,!1),i=c.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=d.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=u.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function u(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var f={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0,_=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],l=f[s.id];l.refs--,o.push(l)}if(e){var c=r(e);n(c,t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()}],[566]);
//# sourceMappingURL=srcmaps/notable.js.map