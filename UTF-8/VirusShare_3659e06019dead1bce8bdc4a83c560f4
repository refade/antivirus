/*!jquery.js!*/!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return+new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return y.find(a);this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){var d;while((d=n.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body)return setTimeout(n.ready);n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}});function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===z.readyState)setTimeout(n.ready);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1);else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}return I.promise(b)};var L="undefined",M;for(M in n(l))break;l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML=" <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;function bb(){return!0}function cb(){return!1}function db(){try{return z.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--)f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--)if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}m=0;while((h=o[m++])&&!b.isPropagationStopped())b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=cb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td;function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g)d[g]&&Cb(e,d[g]);if(b)if(c)for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++)Bb(e,d[g]);else Bb(a,f);return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++)if(f=a[q],f||0===f)if("object"===n.type(f))n.merge(p,f.nodeType?[f]:f);else if(mb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];while(e--)h=h.lastChild;if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}n.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;while(f=p[q++])if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){e=0;while(f=h[e++])pb.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++)if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(vb(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0;if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++)d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++)d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")));i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Db,Eb={};function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML=" <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Jb,Kb,Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Mb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h=z.createElement("div"),i="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",j="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML=" <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=h.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,b=h=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c)return c;var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML=" <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=i,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c},boxSizing:function(){return null==d&&k(),d},boxSizingReliable:function(){return null==e&&k(),e},pixelPosition:function(){return null==f&&k(),f},reliableMarginRight:function(){var b,c,d,e;if(null==g&&a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b)return;c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=i,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=j,e.style.marginRight=e.style.width="0",d.style.width="1px",g=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return g}});function k(){var b,c,h=z.getElementsByTagName("body")[0];h&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=i,h.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(h,null!=h.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,g=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),h.removeChild(b),c=h=null)}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];function Vb(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;while(e--)if(b=Ub[e]+c,b in a)return b;return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}if(!n.isEmptyObject(o)){r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function kc(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++)if(d=ec[f].call(j,a,k,j.opts))return d;return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&dc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML=" <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(F)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[];function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nc(a,b,c,d){var e={},f=a===Jc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Pc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Dc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t)return v;h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;function Wc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Wc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Wc(c,a[c],b,e);return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc)Yc[a](void 0,!0)}),l.cors=!!Zc&&"withCredentials"in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||dd;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var fd=a.jQuery,gd=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=gd),b&&a.jQuery===n&&(a.jQuery=fd),n},typeof b===L&&(a.jQuery=a.$=n),n});(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,n,r){function T(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function N(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=T(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function C(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function k(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function L(){g=!1}function A(){g=!0}function O(){E=0,v.length=0,m=!1,A()}function M(){L()}function _(){D(),c=setTimeout(function(){c=0,O()},e.vmouse.resetTimerDuration)}function D(){c&&(clearTimeout(c),c=0)}function P(t,n,r){var i;if(r&&r[t]||!r&&k(n.target,t))i=N(n,t),e(n.target).trigger(i);return i}function H(t){var n=e.data(t.target,s),r;!m&&(!E||E!==n)&&(r=P("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function B(t){var n=T(t).touches,r,i,o;n&&n.length===1&&(r=t.target,i=C(r),i.hasVirtualBinding&&(E=w++,e.data(r,s,E),D(),M(),d=!1,o=T(t).touches[0],h=o.pageX,p=o.pageY,P("vmouseover",t,i),P("vmousedown",t,i)))}function j(e){if(g)return;d||P("vmousecancel",e,C(e.target)),d=!0,_()}function F(t){if(g)return;var n=T(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=C(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),_()}function I(e){if(g)return;A();var t=C(e.target),n,r;P("vmouseup",e,t),d||(n=P("vclick",e,t),n&&n.isDefaultPrevented()&&(r=T(e).changedTouches[0],v.push({touchID:E,x:r.clientX,y:r.clientY}),m=!0)),P("vmouseout",e,t),d=!1,_()}function q(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function R(){}function U(t){var n=t.substr(1);return{setup:function(){q(this)||e.data(this,i,{});var r=e.data(this,i);r[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,H),e(this).bind(n,R),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",B).bind("touchend",I).bind("touchmove",F).bind("scroll",j))},teardown:function(){--l[t],l[t]||b.unbind(n,H),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",B).unbind("touchmove",F).unbind("touchend",I).unbind("scroll",j));var r=e(this),s=e.data(this,i);s&&(s[t]=!1),r.unbind(n,R),q(this)||r.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S,x;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(x=0;x<o.length;x++)e.event.special[o[x]]=U(o[x]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function l(t,n,i,s){var o=i.type;i.type=n,s?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=o}var i=e(n),s=e.mobile.support.touch,o="touchmove scroll",u=s?"touchstart":"mousedown",a=s?"touchend":"mouseup",f=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function s(e,n){r=n,l(t,r?"scrollstart":"scrollstop",e)}var t=this,n=e(t),r,i;n.bind(o,function(t){if(!e.event.special.scrollstart.enabled)return;r||s(t,!0),clearTimeout(i),i=setTimeout(function(){s(t,!1)},50)})},teardown:function(){e(this).unbind(o)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(s){function a(){clearTimeout(u)}function f(){a(),n.unbind("vclick",c).unbind("vmouseup",a),i.unbind("vmousecancel",f)}function c(e){f(),!r&&o===e.target?l(t,"tap",e):r&&e.stopPropagation()}r=!1;if(s.which&&s.which!==1)return!1;var o=s.target,u;n.bind("vmouseup",a).bind("vclick",c),i.bind("vmousecancel",f),u=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),l(t,"taphold",e.Event("taphold",{target:o}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,s=e.clientY;if(e.pageY===0&&Math.floor(s)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(i)>Math.floor(e.pageX))i-=n,s-=r;else if(s<e.pageY-r||i<e.pageX-n)i=e.pageX-n,s=e.pageY-r;return{x:i,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return l(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),l(r,s,e.Event(s,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),s={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=s,s.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,o=e.event.special.swipe.start(t),u=t.target,l=!1;s.move=function(t){if(!o)return;r=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(o,r,n,u),l&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(o.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},s.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,i.off(f,s.move),s.move=null},i.on(f,s.move).one(a,s.stop)},r.on(u,s.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,t.length===0&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(u,n.start),n.move&&i.off(f,n.move),n.stop&&i.off(a,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)});
/*!jquery.cookie.js!*/(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(jQuery);}}(function($){var pluses=/\+/g;function decode(s){if(config.raw){return s;}
try{return decodeURIComponent(s.replace(pluses,' '));}catch(e){}}
function decodeAndParse(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
s=decode(s);try{return config.json?JSON.parse(s):s;}catch(e){}}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[config.raw?key:encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=decodeAndParse(cookie);break;}
if(!key&&(cookie=decodeAndParse(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,'',$.extend({},options,{expires:-1}));return true;}
return false;};}));
/*!modernizr.js!*/window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a){var e=a[d];if(!G(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function K(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return J("flexWrap")},s.flexboxlegacy=function(){return J("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var L in s)C(s,L)&&(x=L.toLowerCase(),e[x]=s[L](),v.push((e[x]?"":"no-")+x));return e.input||K(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},D(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,g.className=g.className.replace(/(^|\s+)no-js\s*/,"")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/*!main-jq.js!*/'use strict';function gFormSubmit(){if(gFormSubmit.form){gFormSubmit.form.submit();}}
function recaptchaRender(){$('.g-recaptcha').each(function(index,el){el.recaptcha=grecaptcha.render(el,{'sitekey':$(this).data('sitekey'),'size':$(this).data('size'),'callback':gFormSubmit});});}
var Class=function(parent){var _class=function(){this.initialize.apply(this,arguments);};_class.fn=_class.prototype;_class.fn.parent=_class;if(parent){_class.fn.parent=parent.prototype;}
_class.extend=function(obj){var i;var x;for(i in obj){if(obj.hasOwnProperty(i)){if(typeof obj[i]==='object'){for(x in obj[i]){_class[i][x]=obj[i][x];}}else{_class[i]=obj[i];}}}};_class.include=function(obj){var i,y,options;for(i in obj){if(obj.hasOwnProperty(i)){if(i=='options'&&_class.fn.options){options=obj[i];for(y in options){if(options.hasOwnProperty(y)){_class.fn[i][y]=options[y];}}}else if(i=='selectorFunctions'&&_class.fn.selectorFunctions){options=obj[i];for(y in options){if(options.hasOwnProperty(y)){_class.fn[i][y]=options[y];}}}else{_class.fn[i]=obj[i];}}}};_class.setOptions=function(obj){var i;if(obj&&obj!==undefined){for(i in obj){if(obj.hasOwnProperty(i)){if(typeof obj[i]==='function'){_class.fn.options[i]=obj[i](_class.fn.parent);}
else{_class.fn.options[i]=obj[i];}}}}};return _class;};(function(){function inIframe(){try{return window.self!==window.top;}catch(e){return true;}}
if(inIframe()){$('link[rel="stylesheet"]').each(function(){$('<link/>',{'rel':'stylesheet','href':$(this).attr('href')+'?date='+Date.now(),'type':'text/css'}).appendTo($('head'));});}}).call(window);(function(window){'use strict';if(!window.jQuery){console.log('No jQuery detected');return;}
var Shop=new Class();Shop.AddToCart=new Class(Shop);Shop.AjaxBasket=new Class(Shop);Shop.AjaxLayer=new Class(Shop);Shop.BasketHandler=new Class(Shop);Shop.BasketDeliveryPayment=new Class(Shop);Shop.FilterPrice=new Class(Shop);Shop.Filter=new Class(Shop);Shop.ImageSlider=new Class(Shop);Shop.ImageZoom=new Class(Shop);Shop.LoyaltyPoints=new Class(Shop);Shop.PageSlider=new Class(Shop);Shop.ProductVoter=new Class(Shop);Shop.SkinPreviewBox=new Class(Shop);Shop.StockHandler=new Class(Shop);Shop.ProductAvailability=new Class(Shop);Shop.Tabs=new Class(Shop);Shop.RwdMenu=new Class(Shop);Shop.Modal=new Class(Shop);Shop.QuickView=new Class(Shop);Shop.xhrBox=new Class(Shop);Shop.Gallery=new Class(Shop);Shop.Mask=new Class(Shop);Shop.AddressContainer=new Class(Shop);Shop.Address=new Class(Shop);Shop.EnhancedEcommerce=new Class(Shop);Shop.LazyPicture=new Class(Shop);Shop.Recaptcha=new Class(Shop);Shop.Blankshield=new Class(Shop);Shop.BundleStockHandler=new Class(Shop);Shop.BundleStockHandlerContainer=new Class(Shop);Shop.PocztaPolska=new Class(Shop);Shop.GoogleMapsAPI=new Class(Shop);Shop.MapPoints=new Class(Shop);Shop.FuzzySearch=new Class(Shop);Shop.PocztaPolskaBasketHandler=new Class(Shop);Shop.include({version:'5.6.3',urls:{skin:'',base:''},px1:'public/images/1px.gif',selectorFunctions:{},perBrowserFix:{},classes:{},pubsub:$({}),runtime:{OptionsDefault:null,OptionsConfiguration:null,OptionCurrentStocok:null,OptionCurrentVirt:null,OptionImgWidth:null,OptionImgHeight:null},options:{debug:false,profile:false},status:{domready:false,load:false},rwd:{breakPoints:{max:1200,mid:767,small:480},small:false,mid:false,large:false},debug:function(){if(this.options.debug==true){console.debug.pass(arguments)();}},error:function(){if(!!console.warn){console.warn.apply(console,arguments);}
else if(!!console.error){console.error.apply(console,arguments);}
else{console.log.apply(console,arguments);}},profile:function(){if(this.options.debug==true&&this.options.profile){console.profile();}},profileEnd:function(){if(true==this.options.debug&&true==this.options.profile){console.profileEnd();}},time:function(el){if(this.options.debug==true){console.time(el);}},timeEnd:function(el){if(this.options.debug==true){console.timeEnd(el);}},subclass:function(_class){if((Shop[_class]&&Shop[_class].condition(this))&&typeof(Shop[_class])=='function'){this.classes[_class]=Shop[_class];this[_class.toLowerCase()]=new this.classes[_class]();return true;}
return false;},url:function(url,skin){if(url.length>0&&('/'==url.substr(0,1)||'http://'==url.substr(0,7)||'https://'==url.substr(0,8))){return this.urls.base+url;}
return(this.urls.base+'/'+url).replace(/\/\//g,'/');},alert:function(msg,title){var modal=new Shop.Modal();modal.alert(msg,title);},versionParser:function(v){if(typeof v!=='string'||v.indexOf('.')<1||parseInt(v,10)<5){this.error('Unable to parse version: "'+v+'". Comparison is unpredictable.');}
var m=Math.pow(100,3);var subv=v.split('.');var vint=0;for(var x=0;x<subv.length;++x){vint+=m*parseInt(subv[x],10);m/=100;}
return vint;},debounce:function(func,wait,immediate){var timeout;return function(){var context=this;var args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args);}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};},encodeQueryString:function(query){var keyValue;var queryObject={};query.replace('?','').split('&').forEach(function(item){keyValue=item.split('=');queryObject[keyValue[0]]=keyValue[1];});return queryObject;},encodeRFC5987ValueChars:function(str){var encodedStr;var key;var utf={"%C4%84":"Ą","%C4%86":"Ć","%C4%98":"Ę","%C5%81":"Ł","%C5%83":"Ń","%C3%93":"Ó","%C5%9A":"Ś","%C5%B9":"Ź","%C5%BB":"Ż","%C4%85":"ą","%C4%87":"ć","%C4%99":"ę","%C5%82":"ł","%C5%84":"ń","%C3%B3":"ó","%C5%9B":"ś","%C5%BA":"ź","%C5%BC":"ż","%20":" ","%2C":","};encodedStr=encodeURIComponent(str).replace(/['()]/g,escape).replace(/\*/g,'%2A').replace(/%(?:7C|60|5E)/g,unescape);for(key in utf){if(Object.prototype.hasOwnProperty.call(utf,key)){encodedStr=encodedStr.replace(new RegExp(key,'g'),utf[key]);}}
return encodedStr;},substitute:function(str,sub){return str.replace(/\{(.+?)\}/g,function($0,$1){return $1 in sub?sub[$1]:$0;});},forEachIn:function(obj,cb){var x;var counter;var hasOwn;counter=0;hasOwn=Object.prototype.hasOwnProperty;for(x in obj){if(hasOwn.call(obj,x)){cb(obj[x],x,counter,obj);counter+=1;}}},asyncEach:function(obj,fn,cb,time){var keys;var async;var length;keys=Object.keys(obj);async=function(x,objLength){if(x<objLength){if(obj instanceof Array){fn.call(null,obj[x],x,obj);}else if(obj instanceof Object){fn.call(null,obj[keys[x]],keys[x],x,obj);}}else{if(typeof cb==='function'){if(obj instanceof Array){cb.call(null,obj[x],x,obj);}else if(obj instanceof Object){cb.call(null,obj[keys[x]],keys[x],x,obj);}}
return false;}
x++;setTimeout(function(){async(x,objLength);},time||0);};async(0,obj.length||keys.length);},isInViewport:function($el,offset){var defaultOffset={top:0,bottom:0,left:0,right:0};offset=offset||defaultOffset;if(typeof jQuery==='function'&&$el instanceof jQuery){$el=$el[0];}
var rect=$el.getBoundingClientRect();if(!$el){return false;}
return(rect.top+offset.top>=0&&rect.left+offset.left>=0&&rect.bottom-offset.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right-offset.right<=(window.innerWidth||document.documentElement.clientWidth));},findObjInArrayByParamValue:function(arr,param,value){var searchObj;searchObj=false;arr.some(function(obj){if(obj[param]===value){searchObj=obj;return true;}});return searchObj;},base64:{alphabet:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),encode:function(s){var buffer=this.toUtf8(s),position=-1,len=buffer.length,nan0,nan1,nan2,enc=[,,,];if(this.ie){var result=[];while(++position<len){nan0=buffer[position];nan1=buffer[++position];enc[0]=nan0>>2;enc[1]=((nan0&3)<<4)|(nan1>>4);if(isNaN(nan1))
enc[2]=enc[3]=64;else{nan2=buffer[++position];enc[2]=((nan1&15)<<2)|(nan2>>6);enc[3]=(isNaN(nan2))?64:nan2&63;}
result.push(this.alphabet.charAt(enc[0]),this.alphabet.charAt(enc[1]),this.alphabet.charAt(enc[2]),this.alphabet.charAt(enc[3]));}
return result.join('');}else{var result='';while(++position<len){nan0=buffer[position];nan1=buffer[++position];enc[0]=nan0>>2;enc[1]=((nan0&3)<<4)|(nan1>>4);if(isNaN(nan1))
enc[2]=enc[3]=64;else{nan2=buffer[++position];enc[2]=((nan1&15)<<2)|(nan2>>6);enc[3]=(isNaN(nan2))?64:nan2&63;}
result+=this.alphabet[enc[0]]+this.alphabet[enc[1]]+this.alphabet[enc[2]]+this.alphabet[enc[3]];}
return result;}},decode:function(s){if(s.length%4)
throw new Error("InvalidCharacterError: 'this.decode' failed: The string to be decoded is not correctly encoded.");var buffer=this.fromUtf8(s),position=0,len=buffer.length;if(this.ieo){var result=[];while(position<len){if(buffer[position]<128)
result.push(String.fromCharCode(buffer[position++]));else if(buffer[position]>191&&buffer[position]<224)
result.push(String.fromCharCode(((buffer[position++]&31)<<6)|(buffer[position++]&63)));else
result.push(String.fromCharCode(((buffer[position++]&15)<<12)|((buffer[position++]&63)<<6)|(buffer[position++]&63)));}
return result.join('');}else{var result='';while(position<len){if(buffer[position]<128)
result+=String.fromCharCode(buffer[position++]);else if(buffer[position]>191&&buffer[position]<224)
result+=String.fromCharCode(((buffer[position++]&31)<<6)|(buffer[position++]&63));else
result+=String.fromCharCode(((buffer[position++]&15)<<12)|((buffer[position++]&63)<<6)|(buffer[position++]&63));}
return result;}},toUtf8:function(s){var position=-1,len=s.length,chr,buffer=[];if(/^[\x00-\x7f]*$/.test(s))while(++position<len)
buffer.push(s.charCodeAt(position));else while(++position<len){chr=s.charCodeAt(position);if(chr<128)
buffer.push(chr);else if(chr<2048)
buffer.push((chr>>6)|192,(chr&63)|128);else
buffer.push((chr>>12)|224,((chr>>6)&63)|128,(chr&63)|128);}
return buffer;},fromUtf8:function(s){var position=-1,len,buffer=[],enc=[,,,];if(!this.lookup){len=this.alphabet.length;this.lookup={};while(++position<len)
this.lookup[this.alphabet.charAt(position)]=position;position=-1;}
len=s.length;while(++position<len){enc[0]=this.lookup[s.charAt(position)];enc[1]=this.lookup[s.charAt(++position)];buffer.push((enc[0]<<2)|(enc[1]>>4));enc[2]=this.lookup[s.charAt(++position)];if(enc[2]==64)
break;buffer.push(((enc[1]&15)<<4)|(enc[2]>>2));enc[3]=this.lookup[s.charAt(++position)];if(enc[3]==64)
break;buffer.push(((enc[2]&3)<<6)|enc[3]);}
return buffer;}},rwdCheck:function(el){this.rwd.large=false;this.rwd.mid=false;this.rwd.small=false;if(el.innerWidth()>this.rwd.breakPoints.max){this.rwd.large=true;}
else if(el.innerWidth()<this.rwd.breakPoints.max&&el.innerWidth()>this.rwd.breakPoints.mid){this.rwd.mid=true;}
else{this.rwd.small=true;}},getBasketProducts:function(){var t=this;var basProducts;if(Shop.basket.basketProducts&&typeof Shop.basket.basketProducts==='string'){basProducts=Shop.basket.basketProducts.split(',');basProducts=basProducts.slice(0,basProducts.length-1);return basProducts.map(function(id){return t.base64.decode(id);});}
return[];},getCategoryProducts:function(){var t=this;var catProducts;if(typeof Shop.basket.categoryProducts==='string'){catProducts=Shop.basket.categoryProducts.split(',');catProducts=catProducts.slice(0,catProducts.length-1);return catProducts.map(function(id){return t.base64.decode(id);});}
return[];},getVisitorId:function(){if(Shop.basket.shopVisitorId){return this.base64.decode(Shop.basket.shopVisitorId);}
return null;},getOrderDone:function(){if(Shop.basket.orderDone){return Shop.basket.orderDone;}
return false;},isMobile:function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;},noJS:function(){$('input[name=nojs]').val('0');},runSelectorFunctions:function(){var x,self,that=this;for(x in this.selectorFunctions){self=eval('this.selectorFunctions.'+x);try{if(typeof self.domready=='function'){if(this.status.domready==true){$(self.selector).each(function(){self.domready($(this),that);});}
else{$(document).ready(function(){try{$(self.selector).each(function(){self.domready($(this),that);});}catch(ignore){console.error(ignore)}});}}}catch(ignore){console.error(ignore)}
try{if(typeof self.load=='function'){if(this.status.load==true){$(self.selector).each(function(){self.load($(this),that);});}
else{$(window).on('load',self,function(e){try{$(e.data.selector).each(function(){e.data.load($(this),that);});}catch(ignore){console.error(ignore);}});}}}catch(ignore){console.error(ignore)}}},addEvent:function(){if(arguments[2]){this.pubsub.bindFirst.call(this.pubsub,arguments[0],arguments[1])}else{this.pubsub.on.call(this.pubsub,arguments[0],arguments[1]);}},removeEvent:function(){this.pubsub.off.call(this.pubsub,arguments[0],arguments[1]);},fireEvent:function(){var args;args=[];this.forEachIn(arguments,function(val,key,counter){if(counter){args.push(val);}});this.pubsub.trigger.call(this.pubsub,arguments[0],args);},toPrimaryValue:function(value,decSep,thousSep){var r;var r2;var r3;if(!decSep){decSep=Shop.values.decimalSep;}
if(!thousSep){thousSep=Shop.values.thousandSep;}
if(!thousSep||thousSep==' '||thousSep==="\u00a0"){thousSep="\s";}
r=new RegExp("\\"+decSep,'g');r2=new RegExp("\\"+thousSep,'g');r3=new RegExp("[^\\d"+decSep+"\\"+thousSep+"]");return value.replace(r3,'').replace(r2,'').replace(r,'.');},formatBytes:function(bytes){var i;var k;var sizes;if(bytes==0){return'0 B'};k=1024;sizes=['B','KB','MB','GB','TB','PB','EB','ZB','YB'];i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];},initialize:function(){var that=this;var pri=Shop.preinit;if(typeof pri==='object'){$.each(pri,function(key,fn){if(typeof fn==='function'){fn.call(that);}});}
this.time('Shop.initialize');this.profile();this.status.domready=true;$(window).load(function(){that.status.load=true;});$(window).on('resize',function(){this.rwdCheck($(window));}.bind(this));this.rwdCheck($(window));if(false==Shop.urlParser(this)){this.error('Unable to parse urls');return;}
$.event.special.swipe.scrollSupressionThreshold=5;$.event.special.swipe.durationThreshold=2000;$.event.special.swipe.horizontalDistanceThreshold=15;this.subclass('Recaptcha');this.subclass('LazyPicture');this.subclass('Modal');this.subclass('AjaxBasket');this.subclass('AjaxLayer');this.subclass('EnhancedEcommerce');this.subclass('AddToCart');this.subclass('BasketHandler');this.subclass('BasketDeliveryPayment');this.subclass('FilterPrice');this.subclass('Filter');this.subclass('ImageSlider');this.subclass('ImageZoom');this.subclass('LoyaltyPoints');this.subclass('PageSlider');this.subclass('ProductVoter');this.subclass('SkinPreviewBox');this.subclass('StockHandler');this.subclass('ProductAvailability');this.subclass('Tabs');this.subclass('RwdMenu');this.subclass('QuickView');this.subclass('xhrBox');this.subclass('Gallery');this.subclass('AddressContainer');this.subclass('Blankshield');this.subclass('BundleStockHandlerContainer');this.subclass('PocztaPolska');this.subclass('GoogleMapsAPI');this.subclass('MapPoints');this.subclass('FuzzySearch');this.subclass('PocztaPolskaBasketHandler');this.runSelectorFunctions();this.noJS();var pi=Shop.postinit;if(typeof pi==='object'){$.each(pi,function(key,fn){if(typeof fn==='function'){fn.call(that);}});}
this.profileEnd();this.timeEnd('Shop.initialize');$('[data-size="invisible"].g-recaptcha').parents('form').find('[type="submit"]').on('click',function(ev){if(!this.hiddenVal){if($(this).attr('value')){this.hiddenVal=true;$('<input />',{'type':'hidden','value':$(this).val(),'name':$(this).attr('name')}).appendTo($(this));}}});$('[data-size="invisible"].g-recaptcha').parents('form').on('submit',function(ev){ev.preventDefault();gFormSubmit.form=this;grecaptcha.execute();});}});Shop.extend({exist:function(obj){if(typeof obj==='object'){if(obj!=null&&obj&&obj.length!=0){return true;}
return false;}
if(obj!=null&&obj!=undefined&&obj){return true;}
return false;},scrollto:function(div,noAnimation){var scrollHeight=$(div).offset().top;if(noAnimation){$('html, body').scrollTop(scrollHeight);}else{$('html, body').animate({scrollTop:scrollHeight},600);}
return false;}});Shop.lang={plugins:{}};Shop.values=Shop.values||{};Shop.useroptions={};Shop.preinit={};Shop.postinit={};Shop.BasketDeliveryPayment.include({options:{selectors:{}},initialize:function(options){this.constructor.setOptions(options);}});Shop.FilterPrice.include({options:{selectors:{inputprice1:'#filterprice1',inputprice2:'#filterprice2',buttonprice:'#filterprice'}},initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent;var if1=$(this.options.selectors.inputprice1);var if2=$(this.options.selectors.inputprice2);var ifb=$(this.options.selectors.buttonprice);var priceFromTo=Shop.values.PriceFilterFromTo;var priceFromTo64=shopClass.base64.decode(priceFromTo.substr(1));var priceFrom=Shop.values.PriceFilterFrom;var priceFrom64=shopClass.base64.decode(priceFrom.substr(1));var priceTo=Shop.values.PriceFilterTo;var priceTo64=shopClass.base64.decode(priceTo.substr(1));if(if1.length>0&&if2.length>0&&ifb.length>0){ifb.off('click').on('click',function(e){e.stopPropagation();e.preventDefault();var f1=if1.val().replace(/\s+/g,'').replace(',','.');var f2=if2.val().replace(/\s+/g,'').replace(',','.');var url;if(f1.length>0){if(f2.length>0){if(Shop.values.PriceFilterFromTo.charAt(0)==="#"){url=priceFromTo64;}else{url=priceFromTo;}}else{if(Shop.values.PriceFilterFrom.charAt(0)==="#"){url=priceFrom64;}else{url=priceFrom;}}}else{if(f2.length>0){if(Shop.values.PriceFilterFrom.charAt(0)==="#"){url=priceTo64;}else{url=priceTo;}}else{return false;}}
if(typeof url!=='string'||0==url.length){return false;}
window.location.href=shopClass.substitute(url,{pricefrom:f1,priceto:f2});});if1.on('keypress',function(e){if(13==e.keyCode){ifb.trigger('click');}});if2.on('keypress',function(e){if(13==e.keyCode){ifb.trigger('click');}});}}});function FilterFakeSelect(options){this.options={$el:options.$el||null,labelSeparator:', '};this.initialize();}
FilterFakeSelect.prototype={constructor:FilterFakeSelect,initialize:function(){var title;var $title;var $list;var $listElements;var lbl;var colors;$title=this.options.$el.find('> h5');title=$title.text().trim();this.options.$el.removeClass().addClass('multiselect');$title.replaceWith('<span>'+title+'</span>');$title=this.options.$el.find('> span');$list=this.options.$el.find('> ul');this.options.$el.on('mousedown',function(ev){if(ev.currentTarget===ev.target){$('.multiselect:not(#'+$(ev.target).attr('id')+') > ul').hide();$list.toggle();}else if($(ev.target).parent()[0]===ev.currentTarget){if(ev.target.tagName!=='UL'){$('.multiselect:not(#'+$(ev.target).parent().attr('id')+') > ul').hide();$list.toggle();}}});lbl=[];colors=false;$listElements=this.options.$el.find('.selected span');$listElements.each(function(){if($(this).data('color')){lbl.push($(this).data('color'));colors=true;}else{lbl.push($(this).text().trim());}});if(lbl.length===0){$title.html(title+': ('+Shop.lang.common.product_stock_select+')');}else{if(!colors){this.adjustLabels(this.options.$el,lbl,title,$title);}else{$title.html(title+': ');lbl.forEach(function(color){$('<span />',{'class':'color-filter'}).appendTo($title).css('background-color',color);});}}},adjustLabels:function(select,lbl,headText,span){var containerWidth;var $fakeContainer;var lblLength;var firstLbl;var dots;dots='';firstLbl=lbl[0];containerWidth=select.width();$fakeContainer=$('<span />',{text:headText+': '+lbl.join(this.options.labelSeparator)}).appendTo($('body'));if(($fakeContainer.width()+50)>containerWidth){dots=' [...]';}
lblLength=lbl.length;while(($fakeContainer.width()+50)>containerWidth){lbl=lbl.slice(0,lblLength-1);$fakeContainer.text(headText+': '+lbl.join(this.options.labelSeparator));lblLength=lbl.length;if(lbl.length<=0){break;}}
if(lbl.length<=0){$fakeContainer.text(headText+': '+firstLbl);while(($fakeContainer.width()+50)>containerWidth){firstLbl=firstLbl.slice(0,firstLbl.length-1);$fakeContainer.text(headText+': '+firstLbl);if(firstLbl.length<=0){break;}}
span.html(headText+': '+firstLbl+dots);}else{span.html(headText+': '+lbl.join(this.options.labelSeparator)+dots);}
$fakeContainer.remove();}}
Shop.Filter.include({options:{limit:5,fakeSelect:0,selectors:{box:'#box_filter',groups:'#box_filter .group-filter',ulGroups:'> ul',item:'li',itemSelected:'selected',itemHide:'none'},elements:{$box:null,$groups:null,$ulGroups:null}},initialize:function(options){var self;this.constructor.setOptions(options);this.options.elements.$box=$(this.options.selectors.box);this.options.elements.$groups=$(this.options.selectors.groups);this.options.elements.$ulGroups=this.options.elements.$groups.find(this.options.selectors.ulGroups);this.options.fakeSelect=parseInt(this.options.elements.$box.data('selectDisplay'),10);this.options.limit=parseInt(this.options.elements.$box.data('limit'),10);if(this.options.fakeSelect===1){self=this;this.options.elements.$groups.each(function(){if(!this.FilterFakeSelect){this.FilterFakeSelect=new FilterFakeSelect({$el:$(this)});}});$(window).on('click',function(ev){if(!$(ev.target).hasClass('multiselect')&&$(ev.target).parents('.multiselect').length<=0){self.options.elements.$groups.find('> ul').hide();}});}
this.hide();this.options.elements.$box.removeClass('loading');},hide:function(){var self;var lists;self=this;lists=[];this.options.elements.$groups.each(function(){if($(this).data('limit')){lists.push({list:$(this).find(self.options.selectors.item),limit:$(this).data('limit')});}else if(self.options.limit>0){lists.push({list:$(this).find(self.options.selectors.item)});}});this.parent.forEachIn(lists,function(obj){self.hideList(obj.list,obj.limit);});},showList:function(list){list.removeClass(this.options.selectors.itemHide);list.$button.text(Shop.lang.filter.show_less);list.collapsed=false;},hideList:function(list,limit){var self;var listLength;var numberToHide;var lastItem;var $item;self=this;listLength=list.length;limit=limit||self.options.limit;if(listLength>limit){numberToHide=listLength-limit;lastItem=listLength-1;if(!!list.find('em').length){list.sort(self.sort.bind(this));}
while(numberToHide>0){$item=$(list[lastItem]);if($item.length===0){break;}
if(!$item.hasClass(self.options.selectors.itemSelected)){$item.addClass(self.options.selectors.itemHide);numberToHide-=1;}
lastItem-=1;}
if(numberToHide!==listLength-limit){if(!list.$button){list.$button=$('<li />',{'text':Shop.lang.filter.show_more,'class':'showmore'}).appendTo(list.parent()).on('click',function(ev){ev.stopPropagation();if(list.collapsed===true){self.showList(list);}else{self.hideList(list,limit);}});}else{list.$button.text(Shop.lang.filter.show_more);}}
list.collapsed=true;};},sort:function(x,y){var xv;var yv;x=$(x);y=$(y);xv=parseInt(x.find('em').text().replace(/[^0-9]/g,''),10);yv=parseInt(y.find('em').text().replace(/[^0-9]/g,''),10);if(!xv){xv=0;}
if(!yv){yv=0;}
return yv-xv;}});Shop.LazyPicture.include({options:{offset:500,imgs:[],imgCount:0},events:{lazyLoading:null},initialize:function(options){var self;var imgCount;self=this;this.constructor.setOptions(options);this.options.imgs=[].slice.call(document.querySelectorAll('img[data-src]'));this.options.imgCount=this.options.imgs.length;if(!this.parent.isMobile()){setTimeout(function(){self.lazyLoading();},100);this.events.lazyLoading=(function(){self.lazyLoading();});$(window).on('scroll',this.events.lazyLoading);}else{self.options.imgs.forEach(function(img){$(img).parent().removeClass('lazy-load');img.src=img.getAttribute('data-src');});}},lazyLoading:function(){var self;self=this;self.parent.asyncEach(self.options.imgs,function(img){if(img&&$(img).parent().hasClass('lazy-load')&&self.isReadyForLoad($(img).offset().top,$(window).scrollTop(),window.innerHeight)){fastdom.mutate(function(){var $slideBox;img.src=img.getAttribute('data-src');img.onload=(function(){$(img).parent().removeClass('lazy-load');$(img).trigger('change');});$slideBox=$(img).parents('.product');if($slideBox.length>0&&$slideBox.is(':last-child')){self.parent.fireEvent('img:change:slider:'+$slideBox.parents('.slider').attr('id'));}});}},function(){if($('.lazy-load').length<=0){$(window).off('scroll',self.events.lazyLoading);}
self.parent.fireEvent('img:change');});},isReadyForLoad:function(imgOffsetTop,scrollTop,windowHeight){var boundaryTop;var boundaryBottom;boundaryTop=scrollTop-this.options.offset;boundaryBottom=scrollTop+windowHeight+this.options.offset;if(imgOffsetTop>boundaryTop&&imgOffsetTop<boundaryBottom){return true;}
return false;}});Shop.ImageSlider.include({options:{container:null,$ul:null,$imgs:null,$nav:null,$navLeft:null,$navRight:null,containerWidth:null,elementWidth:null,elementsWidth:null,numberToHide:null,counter:0},initialize:function(options){var self;this.constructor.setOptions(options);this.options.$ul=this.options.container.find('ul');this.options.$imgs=this.options.container.find('li');this.options.$nav=this.options.container.find('nav');this.options.$navLeft=this.options.$nav.find('.smallgallery-left');this.options.$navRight=this.options.$nav.find('.smallgallery-right');this.hideElements();$(window).on('resize',this.hideElements.bind(this));this.options.$navLeft.on('mousedown',this.showPrev.bind(this));this.options.$navRight.on('mousedown',this.showNext.bind(this));this.options.container.on('swipeleft',this.showNext.bind(this));this.options.container.on('swiperight',this.showPrev.bind(this));},getNumberToHide:function(){var self;self=this;this.options.containerWidth=this.options.$ul.width();this.options.elementsWidth=0;this.options.elementWidth=this.options.$imgs.outerWidth(true);this.options.$imgs.each(function(){self.options.elementsWidth+=$(this).outerWidth(true);});return Math.max(Math.ceil((this.options.elementsWidth-this.options.containerWidth)/this.options.elementWidth),0);},hideElements:function(){var number=this.getNumberToHide();this.options.$imgs.removeClass('none');if(number){this.options.$imgs.filter(':nth-last-child(-n + '+number+')').addClass('none');this.options.$ul.addClass('with-nav');this.options.$nav.removeClass('none');}else{this.options.$ul.removeClass('with-nav');this.options.$nav.addClass('none');}},showNext:function(){var $toShow;var $toHide;this.options.$navLeft.removeClass('none');$toHide=this.options.$imgs.filter('li:not(.none):first');$toShow=this.options.$imgs.filter('li:not(.none) + .none:first');if(!!$toShow.length){$toHide.addClass('none');$toShow.removeClass('none');}
if($toShow.is(':last-child')===true){this.options.$navRight.addClass('none');}},showPrev:function(){var $toShow;var $toHide;this.options.$navRight.removeClass('none');$toHide=this.options.$imgs.filter('li:not(.none):last');$toShow=this.options.$imgs.filter('li:not(.none):first').prev();if(!!$toShow.length){$toHide.addClass('none');$toShow.removeClass('none');}
if($toShow.is(':first-child')===true){this.options.$navLeft.addClass('none');}}});Shop.ImageZoom.include({options:{img:false,inner:false,container_class:'imagezoom',transbox_class:'imagezoom_transbox',shade_class:'imagezoom_shade',parent_selector:'#box_productfull .product-main-box',blank_regexp:'__overlay\.jpg$',img_container:'mainimg',disable:false},img:null,div:null,divimg:null,src:null,mmfx:false,infx:false,inner:true,inside:false,startpos:null,locked:false,shade1:null,shade2:null,initialize:function(options){if(!$('html').hasClass('no-touch')){return;}
this.constructor.setOptions(options);var shopClass=this.parent;var img=$(this.options.img)[0];if((new RegExp(this.options.blank_regexp)).test($(img).attr('src'))){return;}
img._class=this;img._zoomimage=this;this.img=img;this.inner=!!this.options.inner;if(shopClass.rwd.small||shopClass.rwd.mid){this.inner=true;}
$(img).off('mouseenter mouseleave mousemove').on('mouseenter',[this],function(e){var self=e.data[0];if(this._loaded==true&&this._locked==false){this._class.inside=true;if(this._class.infx==true){this._class.show_div(this._class).delay(100);}
else{this._class.show_div();}}
else{$(self).trigger('mouseenter').delay(100);}}).on('mouseleave',function(e){this._class.inside=false;}).on('mousemove',function(e){if(this._class.inside==true){this._class.startpos=e.page;}}).on('load',function(e){this._loaded=true;});var w=$(img).width();var h=$(img).height();img._loaded=!!((w+h)>20);if(Shop.ImageZoom.donefirsttime==false){img._locked=true;Shop.ImageZoom.donefirsttime=true;setTimeout(function(){img._locked=false;},100);}
else{img._locked=false;}
this.getsrc();},destroy:function(){try{$(window).off('resize',this.resize_event);delete this.img._class;delete this.img._zoomimage;if(Shop.exist($(this.div)))$(this.div).remove();if(Shop.exist($(this.shade1)))$(this.shade1).remove();delete this;}
catch(e){}},getsrc:function(){if($(this.img).attr('class').match(/gallery_[0-9]+/)){var id=$(this.img).attr('class').replace(/.*gallery_([0-9]+).*/,'prodimg$1');if(id.match(/^prodimg[0-9]+$/)&&$(id)&&!$(this.img).hasClass('non-stock-img')){this.src=$('#'+id).attr('href');}else if($(this.img).data('photo_orig')){this.src=$(this.img).data('photo_orig');}}
else{if($(this.img).parent().prop('tagName')=='A'){this.src=$(this.img).parent().attr('href');}else{this.src=$(this.img).data('photo_orig');}}
if(Shop.exist(this.src)){var img=$('<img />').attr('href',this.src);}},reset:function(){try{$(window).off('resize',this.resize_event);if(Shop.exist($(this.div)))$(this.div).remove();if(Shop.exist($(this.shade1)))$(this.shade1).remove();this.img._loaded=false;this.img._locked=false;this.inside=false;this.locked=false;this.div=false;this.shade1=false;this.getsrc();}
catch(e){}},show_div:function(){if(this.inside==false||this.locked==true)return;if(!Shop.exist(this.div)){var shopClass=this.parent;var parent=$(this.options.parent_selector)||$('body');var galleryOutside=$('.tab-content .gallery');parent.css('position','relative');this.div=$('<div />',{'class':this.options.container_class}).appendTo(parent);if(galleryOutside.length>0&&this.inner){this.div.one('mousedown',function(e){e.preventDefault();e.stopPropagation();galleryOutside.find('> .f-grid-4:first-child > a').trigger('click');});}
var c={};c.x=parent.find('.'+this.options.img_container).width();c.y=parent.find('.'+this.options.img_container).height();var p=parent.find('.'+this.options.img_container).position();this.resize_event=(function(e){var p=parent.find('.'+this.options.img_container).position();var c={};c.x=parent.find('.'+this.options.img_container).width();c.y=parent.find('.'+this.options.img_container).height();if(shopClass.rwd.small||shopClass.rwd.mid){this.inner=true;}
if(this.inner==false){this.shade1.css({'left':p.left,'top':p.top});this.shade1._pos=$(this.img).offset();var x=Shop.ImageZoom.sidebox_size($(this.img),this.div,this.divimg);p={x:x.left,y:x.top}}
$(this.div).css({'width':c.x,'height':c.y,'left':p.left,'top':p.top})}).bind(this);$(window).resize(this.resize_event);if(this.inner==true){$(this.div).css({'left':p.left,'top':p.top,'width':c.x,'height':c.y});this.div._size=$(this.div).width();this.div._pos=$(this.div).offset();}
else{var cs=Shop.ImageZoom.sidebox_size($(this.img),this.div,this.divimg);delete cs.left;cs.top=0;cs.right=0;$(this.div).css(cs);this.shade1=$('<div />',{'class':this.options.shade_class}).appendTo(parent);this.shade1.css({'left':p.left,'top':p.top,'width':c.x,'height':c.y});this.div._size=$(this.img).width();this.div._pos=$(this.img).offset();this.shade1._class=this;this.shade1.hide();this.shade2=$('<div />');this.shade2.addClass(this.options.transbox_class).css({width:0,height:0}).appendTo(this.shade1);if(galleryOutside.length>0&&!this.innder){this.shade2.one('mousedown',function(e){e.preventDefault();e.stopPropagation();galleryOutside.find('> .f-grid-4:first-child > a').trigger('click');});}}
this[this.inner?'div':'shade1'].off('mouseleave mousemove click').on('click',[this],function(e){var self=e.data[0].div;self._class.hide_div();var a=$(self._class.img).parent();self._class.locked=true;if(a.prop('tagName')=='DIV'&&a.hasClass(e.data[0].options.img_container)){a=a.find('img');if(a)
a=$('#prodimg'+a.attr('class').replace(/^.*gallery_([0-9]+)[^0-9]?.*$/,'$1'));}
a.trigger('click');setTimeout(function(){self._class.locked=false;},1000,self);}).on('mouseleave',[this],function(e){var self=e.data[0];self.hide_div();}).on('mousemove',[this],function(e){var self=e.data[0];var size={x:self.div.width(),y:self.div.height()}
var xfactor=Shop.ImageZoom.transform((e.pageX-self.div._pos.left)/size.x,self.div._class.inner);var yfactor=Shop.ImageZoom.transform((e.pageY-self.div._pos.top)/size.y,self.div._class.inner);var s=self.div._class.divimg;var x=-Math.round(xfactor*(s.width()-size.x));var y=-Math.round(yfactor*(s.height()-size.y));if(self.div._class.mmfx==false){self.div._class.divimg.css({'left':x,'top':y});}
if(Shop.exist($(self.div._class.shade2))){if(self.div._class.shade2.width()==0){self.div._class.shade2.css({'width':Math.round((self.div._class.div.width()/self.div._class.divimg.width())*size.x),'height':Math.round((self.div._class.div.height()/self.div._class.divimg.height())*size.y*1.15)});}
x=Math.round(xfactor*(size.x-self.div._class.shade2.width()));y=Math.round(yfactor*(size.y-self.div._class.shade2.height()));self.div._class.shade2.css({'left':x,'top':y*1.8,'border':'1px solid'});}});this.div._class=this;this.div.hide();this.divimg=$('<img />');this.divimg.attr('src',this.src).css({'position':'relative','left':0,'top':0});this.divimg.appendTo(this.div);if((c.x>this.divimg[0].width&&c.y>this.divimg[0].height)&&this.divimg[0].width!==0&&this.divimg[0].height!==0){this.options.disable=true;return false;}else{this.options.disable=false;}
if(this.startpos&&this.startpos.x){this[this.inner?'div':'shade1'].trigger('mousemove',{'page':this.startpos});}}
if(this.infx==true){$(this.div).fadeIn('fast');if(Shop.exist($(this.shade1)))
$(this.shade1).fadeIn('fast');}else{$(this.div).fadeIn('show');if(Shop.exist($(this.shade1))){this.shade1.show();this.shade1.css('opacity',0);}}},hide_div:function(){this.inside=false;var fadetype=(this.infx?'fadeOut':'hide');if(fadetype=='fadeOut')
$(this.div).fadeOut('fast');else
$(this.div).hide();if(Shop.exist($(this.shade1)))
if(fadetype=='fadeOut')
$(this.shade1).fadeOut('fast');else
$(this.shade1).hide();this.div.remove();if(this.shade1){this.shade1.remove();}
this.div=null;}});Shop.ImageZoom.donefirsttime=false;Shop.ImageZoom.transform=function(x,inner){if(false==inner)return x;if(x<0.5){x=3*x*x-1/4;}else{x=Math.sqrt(x-0.5)*1.5+0.5;}
if(x>=1)return 1;if(x<=0)return 0;return x;}
Shop.ImageZoom.sidebox_size=function(oimg,sidediv,divimg){var $grid=$('div.productimg').next();return{left:$grid.position().left,top:oimg.position().top,width:$grid.width(),height:oimg.height()};}
Shop.ProductAvailability.include({options:{selectors:{},requestUrl:'product/getproduct/id/'},initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent;var btns=$(this.options.selectors.availabilitynotifier_btn),unsubBtns=$(this.options.selectors.availabilitynotifier_btn_unsub),shopClass=this.parent,self=this,subscribeStock=function(element,stock_id,email,is_logged,modal){var btnsParent=$(element).parents('form'),requestData={'stock_id':stock_id};if(btnsParent.length===0){btnsParent=$(element).parents('.actions');}
var btnsCon=$(btnsParent[0]).find(self.options.selectors.availabilitynotifier),unsubBtnsCon=$(btnsParent[0]).find(self.options.selectors.availabilitynotifier_unsub);if(!is_logged){requestData.email=email;}
$.ajax({url:shopClass.url('product/availabilitysub'),async:false,cache:false,method:'post',data:requestData}).error(function(xhr){shopClass.alert(Shop.lang.common.request.send_error);}).success(function(json){var x;var stocks;var stock;if(json=='1'){btnsCon.addClass('none');unsubBtnsCon.removeClass('none');if(modal){modal.destroyModal();}
shopClass.alert(Shop.lang.product.availability_success);stocks=shopClass.stockhandler.downloadedStock;for(x in stocks){if(stocks.hasOwnProperty(x)){if(stocks[x].sid===parseInt(stock_id,10)){stock=stocks[x];break;}}}
if(stock){stock.is_subscribed=true;}}else if(json=='2'){if(modal){modal.destroyModal();}
shopClass.alert(Shop.lang.product.availability_email_found);}else{var messages=self._parseMessages(json);if(modal){modal.options.content.find('input').addClass('error');modal.options.content.prepend($('<div class="alert-error alert">\n\
<div class="row"><p>'+messages+'</p></div>\n\
</div>'));}else{shopClass.alert(messages);}}});},unsubscribeStock=function(element,stock_id){var btnsParent=$(element).parents('form'),requestData={'stock_id':stock_id};if(btnsParent.length===0){btnsParent=$(element).parents('.actions');}
var btnsCon=$(btnsParent[0]).find(self.options.selectors.availabilitynotifier),unsubBtnsCon=$(btnsParent[0]).find(self.options.selectors.availabilitynotifier_unsub);$.ajax({url:shopClass.url('product/availabilityunsub'),async:false,cache:false,method:'post',data:requestData}).error(function(xhr){shopClass.alert(Shop.lang.common.request.send_error);}).success(function(json){var x;var stocks;var stock;switch(json){case 1:btnsCon.removeClass('none');unsubBtnsCon.addClass('none');shopClass.alert(Shop.lang.product.availability_unsub_success);stocks=shopClass.stockhandler.downloadedStock;for(x in stocks){if(stocks.hasOwnProperty(x)){if(stocks[x].sid===parseInt(stock_id,10)){stock=stocks[x];break;}}}
if(stock){stock.is_subscribed=false;}
break;case 0:shopClass.alert(Shop.lang.product.availability_unsub_not_found);break;case-1:shopClass.alert(Shop.lang.product.availability_unsub_not_logged);break;}});};btns.each(function(){var product_name=$(this).attr('data-product-name');$(this).on('click',function(ev){ev.preventDefault();var is_logged=$(this).attr('data-is-logged')==='true',stock_id=$(this).attr('data-stock-id'),req,productId,me=this;if(is_logged){subscribeStock(this,stock_id,false,true,false);}else{var modal=new Shop.Modal();productId=$(this).data('productId')
req=$.ajax({url:self.parent.url(self.options.requestUrl+productId),type:"get"});req.done(function(data){var modal=new Shop.Modal();var productCard;var subAdd;var productImg;var stocks;if($(me).parents('#box_productfull').length<=0){subAdd=true;productCard=$(me).parents('.product');}else{subAdd=false;productCard=$('#box_productfull');}
if(!subAdd){if(productCard.find('.mainimg img').length>0){productImg=productCard.find('.mainimg img').attr('src');}}else{productImg=$(productCard.find('img')[0]).attr('src');}
stocks='';if($('.stocks').length>0){$('.stocks > .f-row').each(function(index){var label,input,div,value;label=$(this).find('div.label label').text().replace('* ','');input=$(this).find('div.stock-options input, div.stock-options select');div=$(this).find('.stock-options > div');if(div.hasClass('option_truestock')){switch(input.attr('type')){case'text':{value=input.val();break;}
case'radio':{value=input.filter(':checked').parent().next().text();break;}
case'checkbox':{if(input.is(':checked')){value=input.next().attr('data-yes');}
break;}
case undefined:{value=input.find(':selected').text();break;}};if(value){stocks+=(label+'<strong>'+value+'</strong>');if((index+1)!==$('.stocks > .f-row').length){stocks+=', ';}}}});}
modal.options.footer='';modal.options.header=$('<h3 />').text(Shop.lang.product.availability_notify_title);modal.options.content=$('<div class="clearfix"><div class="availability_notify_info">\n\
<img src="'+productImg+'" />\n\
</div>\n\
<form class="availability_notify_form">\n\
<h3>'+product_name+'</h3>\n\
<p class="availability-stocks">'+stocks+'</p>\n\
<div class="notify-small-font">'+data.short_description+'</div>\n\
<p>'+Shop.lang.common.email+':</p>\n\
<p><input type="text" value="">\n\
<button class="btn btn-red" type="submit">\n\
<span>'+Shop.lang.product.availability_save+'</span>\n\
</button>\n\
<p>'+Shop.lang.product.availability_email_description+'</p>\n\
</form></div>');modal.createModal();modal.options.content.find('button').on('click',function(ev){ev.preventDefault();modal.options.content.find('div.alert').remove();subscribeStock(this,stock_id,modal.options.content.find('input').val(),false,modal);});}.bind(this));}});});unsubBtns.each(function(){$(this).on('click',function(ev){ev.preventDefault();unsubscribeStock(this,$(this).attr('data-stock-id'));});});},_parseMessages:function(json){var messages='';if(typeof json==='string'){messages=json;}else if(json instanceof Array){messages=json.join(', ');}else{for(var m in json){var r=this._parseMessages(json[m]);if(r.length!==0&&messages.length!==0){messages+=', ';}
messages+=r;}}
return messages;}});Shop.ProductVoter.include({options:{selectors:{class0:'star0',class05:'star0-5',class1:'star1',starContainer:'span.votestars',starsSelector:'span.votestars img',voteMessageClass:'vote-message'}},elements:{$starContainer:null,$stars:null},url:'product/vote/prod/{prodid}/vote/{score}',initialize:function(options){var self;var $stars;var $starContainer;this.constructor.setOptions(options);self=this;this.elements.$starContainer=$starContainer=$(this.options.selectors.starContainer);this.elements.$stars=$stars=$(this.options.selectors.starsSelector);$stars.each(function(value){this.initialClass=$(this).attr('class');this.value=value+1;}).on('mouseenter',function(){self.mouseenter(this.value);}).on('click',function(){self.vote(this.value);});$starContainer.on('mouseleave',function(){self.mouseleave();});},mouseenter:function(score){var n;var self;var classToRemove;self=this;n=1;classToRemove=this.options.selectors.class0+' '+this.options.selectors.class05+' '+this.options.selectors.class1;this.elements.$stars.each(function(){var half;var className;var _score;if(n>score){half=n-score;if(half>=0.25&&half<=0.75){className=self.options.selectors.class05;}}
$(this).removeClass(classToRemove);_score=Math.round(score);if(n<=_score&&!className){className=self.options.selectors.class1;}else if(!className){className=self.options.selectors.class0;}
$(this).addClass(className);n+=1;});},mouseleave:function(){this.elements.$stars.each(function(){$(this).attr('class',this.initialClass);});},vote:function(score,self){var shopClass;var id;var url;var self;var $starContainer;id=parseInt(this.elements.$starContainer.attr('id').replace(/[^0-9]/g,''));if(id>0&&score>0){shopClass=this.parent
self=this;url=shopClass.substitute(this.url,{prodid:id,score:score});$.ajax({url:shopClass.url(url),async:false,cache:false,method:'get',error:function(){shopClass.alert(Shop.lang.common.product_vote_alert);},success:function(productRate){$starContainer=self.elements.$starContainer;if(parseInt(productRate,10)!==0){$starContainer.off('mouseleave').removeAttr('id');self.elements.$stars.off('mouseenter click');$starContainer.prev('.'+self.options.selectors.voteMessageClass).text(Shop.lang.voting.vote_message+":");}else{shopClass.alert(Shop.lang.common.product_vote_alert);}}});}}});Shop.SkinPreviewBox.include({options:{prevClass:'skinpreview',src:'public/images/1px.gif'},initialize:function(options){var $button;var shopClass;shopClass=this.parent;this.constructor.setOptions(options);$button=$('<span />',{'class':this.options.prevClass,'text':Shop.lang.skinpreview.close,}).on('click',function(ev){$.removeCookie('skinpreview',{path:'/'+shopClass.urls.base.replace(/(^\/|\/$)/g,'')});location.reload();}).appendTo(document.body);$('<img />',{'src':shopClass.url(this.options.src)}).prependTo($button);}});Shop.BasketHandler.include({options:{shipping_id:0,payment_id:0,country_id:0,shipping_row:null,force_rows:false,step:0,ordersumfield:null,currency:{dec_point:',',thousands_sep:' ',prefix:'',postfix:''},containers:{step1:false,step2:false,step3:false},pre:{step1:false,step2:false,step3:false},post:{step1:false,step2:false,step3:false},selectors:{deliveryrow:'',paymentrow:'',deliverychangelink:'',paymentchangelink:'',paymentheadlabel:'',paymentrlabel:'',paymentradios:'',deliveryradios:'',deliveryheadlabel:'',deliveryheadvalue:'',deliverytrlabel:'',deliverytrvalue:'',deliverylabel:'',trradio:'',countrytr:'',trcountryselect:'',trdifferentaddress:'',differentaddress:'',differentaddress_parent:'',personaladdress:'',companyaddress:'',formcompanyname:'',formtaxid:'',formcompanyname2:'',formtaxid2:'',countryselect:'',addresstyperadios:'',addressselectsubmit:'',addressselect:'',addressfieldscontainer:'',recalc:'',recalcbtn:''},currency_map:'',getaddressurl:'',pocztaPolskaBasketHandler:null},initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent;if(!!$('[data-pp-pick-up-points]').length){this.pocztaPolskaBasketHandler=new Shop.PocztaPolskaBasketHandler();}
if(Shop.exist(Shop.values.CurrencyMap)){this.options.currency_map=Shop.values.CurrencyMap;this.parse_currency();}
if(Shop.exist(Shop.values.ShippingValue)){this.options.shippingValue=Shop.values.ShippingValue;}
if(Shop.values.SumNoShipping>=0){this.options.sumNoShipping=Shop.values.SumNoShipping;}
if(Shop.exist(Shop.values.Shipping2Payment)){this.options.shipping2Payment=Shop.values.Shipping2Payment;}
if(Shop.exist(Shop.values.Country2Shipping)){this.options.country2Shipping=Shop.values.Country2Shipping;}
if(Shop.exist(Shop.values.PaymentAdditional)){this.options.paymentAdditional=Shop.values.PaymentAdditional;}
if(Shop.exist(Shop.values.ShippingHidden)){this.options.shippingHidden=Shop.values.ShippingHidden;}
if(Shop.exist(Shop.values.reverseTable)){this.options.reverseTable=Shop.values.reverseTable;}
if((this.options.step>0||this.options.step==='shipping'||this.options.step==='done')&&typeof(this['step'+this.options.step])=='function'){var s='step'+this.options.step;if(typeof(this.options.pre[s])=='function'){this.options.pre[s](this);}
this[s](this);if(typeof(this.options.post[s])=='function'){this.options.post[s](this);}}},parse_currency:function(){var cmap=this.options.currency_map;this.options.currency.prefix=cmap.replace(/^(.*)1.*/,'$1');this.options.currency.postfix=cmap.replace(/.*6(.*)$/,'$1');this.options.currency.dec_point=cmap.replace(/.*4(.*)5.*/,'$1');this.options.currency.thousands_sep=cmap.replace(/.*1(.*)2.*/,'$1');},format_currency:function(x){return this.options.currency.prefix+x.numberFormat(2,this.options.currency.dec_point,this.options.currency.thousands_sep)+this.options.currency.postfix;},checkSeparators:function(sum){var separators;if(!sum){return false;}
separators=sum.match(/[,.\s]/g);if(separators.length>=2){if(separators.indexOf(Shop.values.decimalSep)<0||separators.indexOf(Shop.values.thousandSep)<0){Shop.values.decimalSep=separators[1];Shop.values.thousandSep=separators[0];}}else{if(separators.indexOf(Shop.values.decimalSep)<0){Shop.values.decimalSep=separators[0];}}},calculate:function(){var self=this,td=this.options.ordersumfield,shippingPrice=this.options.shippingValue['s'+this.options.shipping_id],orderPrice,discount,separators,totalVal;this.checkSeparators($('.recount .sum .color').html());orderPrice=parseFloat(this.parent.toPrimaryValue($('.recount .sum .color').html()));if(this.options.shippingValue['cs'+this.options.shipping_id]){shippingPrice=this.options.shippingValue['cs'+this.options.shipping_id][this.options.country_id];}
if(this.options.shippingValue['cs'+this.options.shipping_id]instanceof Array&&shippingPrice===undefined){shippingPrice=this.options.shippingValue['s'+this.options.shipping_id];}
if(shippingPrice===undefined){shippingPrice=0;}
totalVal=shippingPrice+orderPrice;if($('.promo-container .promo .value').html()){discount=$('.promo-container .promo .value').html().replace(/[^\d,.]/g,'');discount=this.parent.toPrimaryValue(discount);}
if(discount&&!isNaN(discount)){totalVal-=discount;}
totalVal=this.format_currency(totalVal);$('.summary-container .sum .value').html(totalVal);$('input[name="shipping_id"]').each(function(){var id;id=parseInt($(this).val(),10);if(self.options.shippingValue['cs'+id]&&self.options.shippingValue['cs'+id][self.options.country_id]){$(this).closest('span.name').next().html(self.format_currency(self.options.shippingValue['cs'+id][self.options.country_id]));}});if(Shop.exist(td)&&Shop.exist(this.options.shippingValue)&&(Shop.exist(this.options.sumNoShipping)>=0)&&this.options.shipping_id>0){var adds=this.shipping_additional(this.options.shipping_id,this.options.payment_id);var sv=this.options.shippingValue['s'+this.options.shipping_id];if(this.options.shippingValue['cs'+this.options.shipping_id]&&this.options.shippingValue['cs'+this.options.shipping_id][this.options.country_id]){sv=this.options.shippingValue['cs'+this.options.shipping_id][this.options.country_id];}
if(adds!=null){sv+=adds['v'];}
var s=this.options.sumNoShipping+sv;$(td).html(this.format_currency(s));$('.sumhref').each(function(){var url=$(this).attr('data-sum-href').replace('{sum}',s);if(!!url){$(this).attr('href',url);}});if(Shop.exist(this.options.shipping_row)){this.options.shipping_row.find('.value').html(this.format_currency(shippingPrice));this.options.containers.step1.find(this.options.selectors.deliveryheadvalue).html(this.format_currency(sv));}}
if(this.options.shippingHidden){var x;var y;var sId;var min;var minJoined;var currentMin;var count;for(x in this.options.shippingValue){if(this.options.shippingValue.hasOwnProperty(x)){if(this.options.shippingValue[x]&&typeof this.options.shippingValue[x]==='object'&&this.options.shippingValue[x][this.options.country_id]!==undefined){sId=x.replace('c','');if(min===undefined){min=this.options.shippingValue[x][this.options.country_id];if(this.options.paymentAdditional&&this.options.paymentAdditional[sId]){count=0;for(y in this.options.paymentAdditional[sId]){if(this.options.paymentAdditional[sId].hasOwnProperty(y)){if(!minJoined){minJoined=min+this.options.paymentAdditional[sId][y].v;}else{minJoined=Math.min(minJoined,min+this.options.paymentAdditional[sId][y].v);}
count+=1;}}
if(this.options.shipping2Payment[sId].length===count){min=minJoined;}
minJoined=null;}}else{currentMin=this.options.shippingValue[x][this.options.country_id];if(this.options.paymentAdditional&&this.options.paymentAdditional[sId]){count=0;for(y in this.options.paymentAdditional[sId]){if(this.options.paymentAdditional[sId].hasOwnProperty(y)){if(!minJoined){minJoined=currentMin+this.options.paymentAdditional[sId][y].v;}else{minJoined=Math.min(minJoined,currentMin+this.options.paymentAdditional[sId][y].v);}
count+=1;}}
if(this.options.shipping2Payment[sId].length===count){currentMin=minJoined;}
minJoined=null;}
min=Math.min(currentMin,min);}}}}
if(Shop.exist(this.options.shipping_row)){this.options.containers.step1.find(this.options.selectors.deliveryheadvalue).html(this.format_currency(min));if(this.options.sumNoShipping>0){totalVal=min+this.options.sumNoShipping;}else{totalVal=min+orderPrice;if(discount&&!isNaN(discount)){totalVal-=discount;}}
totalVal=this.format_currency(totalVal);$('.summary-container .sum .value').html(totalVal);}}},calculateShipping:function(){var td;var shippingPrice;var orderPrice;var totalVal;td=this.options.ordersumfield;shippingPrice=this.options.shippingValue['s'+this.options.shipping_id];this.checkSeparators($('.product-only .sum').html());orderPrice=parseFloat(this.parent.toPrimaryValue($('.product-only .sum').html()));totalVal=shippingPrice+orderPrice;totalVal=this.format_currency(totalVal);this.checkSeparators($('.recount .sum .color').html());$('.sum .value').html(totalVal);if(Shop.exist(td)&&Shop.exist(this.options.shippingValue)&&Shop.exist(this.options.sumNoShipping)&&this.options.shipping_id>0){var adds=this.shipping_additional(this.options.shipping_id,this.options.payment_id);var sv=this.options.shippingValue['s'+this.options.shipping_id];if(adds!=null){sv+=adds['v'];}
var s=this.options.sumNoShipping+sv;$(td).html(this.format_currency(s));$('.sumhref').each(function(){var url=$(this).attr('data-sum-href').replace('{sum}',s);if(!!url){$(this).attr('href',url);}});if(Shop.exist(this.options.shipping_row)){this.options.containers.shipping.find(this.options.selectors.deliveryheadvalue).html(this.format_currency(sv));}}},shipping_additional:function(sid,pid){if(this.options.paymentAdditional&&this.options.paymentAdditional['s'+sid]&&this.options.paymentAdditional['s'+sid]['p'+pid]){return this.options.paymentAdditional['s'+sid]['p'+pid];}
return null;},step1_show_delivery:function(){var self=this;this.step1_hide_payment();this.options.containers.step1.find(this.options.selectors.deliveryrow).filter(function(){return!$(self).find(self.options.selectors.trradio).is('disabled');}).removeClass('none');},step1_show_payment:function(){var self=this;this.step1_hide_delivery();this.options.containers.step1.find(this.options.selectors.paymentrow).filter(function(){return!self.find(self.options.selectors.trradio).is('disabled');}).removeClass('none');},step1_hide_delivery:function(){if(this.options.force_rows==false)return;this.options.containers.step1.find(this.options.selectors.deliveryrow).addClass('none');this.options.containers.step1.find(this.options.selectors.deliverychangelink).removeClass('none');},step1_hide_payment:function(){if(this.options.force_rows==false)return;this.options.containers.step1.find(this.options.selectors.paymentrow).addClass('none');this.options.containers.step1.find(this.options.selectors.paymentchangelink).removeClass('none');},step1:function(){if(!Shop.exist(this.options.containers.step1))return;var self=this;var $recalc;$('.btn-remove-promocode').on('click',function(evt){evt.preventDefault();$.ajax({method:'put',url:'/webapi/front/'+Shop.lang.name+'/basket/'+Shop.values.currency+'/',data:JSON.stringify({promocode:null}),success:function(data,statusText){if(data&&statusText==='success'){window.location=window.location.href;}}});});$('#promocodeshow').on('change',function(e){var par=$(this).parents('.promocode'),inp=par.find('.input'),act=par.find('.action');if($(this).is(':checked')){inp.show();act.show();}else{inp.hide();act.hide();}}).trigger('change');this.options.country_id=parseInt($('select[name="shipping_country"]').val(),10);$('select[name="shipping_country"]').on('change',function(){self.options.country_id=parseInt($(this).val(),10);self.calculate();});var f=this.options.containers.step1.find(this.options.selectors.deliverychangelink);if(Shop.exist(f)){f.removeClass('none');if(f.width()>0){this.force_rows=true;this.options.containers.step1.find(this.options.selectors.deliverychangelink).each(function(){this._class=self;});this.options.containers.step1.find(this.options.selectors.deliverychangelink).on('click',function(e){if(e){e.preventDefault();e.stopPropagation();}
$(this).fadeOut('fast');if(this._class.options._folden_delivery==true){this._class.step1_hide_payment();this._class.options._folden_payment=true;this._class.step1_show_delivery();}else
this._class.step1_hide_delivery();this._class.options._folden_delivery=!this._class.options._folden_delivery;});this.options.containers.step1.find(this.options.selectors.paymentchangelink).each(function(){this._class=self;});this.options.containers.step1.find(this.options.selectors.paymentchangelink).on('click',function(e){if(e){e.preventDefault();e.stopPropagation();}
this.blur();if(this._class.options._folden_payment==true){this._class.step1_show_payment();this._class.step1_hide_delivery();this._class.options._folden_delivery=true;}else
this._class.step1_hide_payment();this._class.options._folden_payment=!this._class.options._folden_payment;});this.step1_hide_delivery();this.step1_hide_payment();this.options._folden_payment=true;this.options._folden_delivery=true;}}
this.options.containers.step1.find(this.options.selectors.paymentradios).each(function(){this._class=self;$(this).on('change',function(e){this._class.options.payment_id=parseInt($(this).attr('value'));this._class.options.containers.step1.find(this._class.options.selectors.paymentrow).removeClass('selected');var tr=$(this).parent();while(tr.prop('tagName')!='DIV')
tr=tr.parent();tr.addClass('selected');this._class.options.containers.step1.find(this._class.options.selectors.paymentheadlabel).html(tr.find(this._class.options.selectors.paymentrlabel).text());this._class.calculate();this._class.step1_hide_payment();this._class.options._folden_payment=true;setTimeout(function(){if(this._class.options.shippingHidden){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_from+':');}else if(tr.find('.value').text().length>0){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_cost+':');}else{$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment+':');}}.bind(this),100);});if(this.checked==true)
$(this).trigger('change');});this.options.containers.step1.find(this.options.selectors.deliveryradios).each(function(){this._class=self;$(this).on('change',function(e){this._class.options.shipping_id=parseInt($(this).attr('value'));var tr=$(this).parent();while(tr.prop('tagName')!='DIV')
tr=tr.parent();tr.parent().children(this._class.options.selectors.deliveryrow).removeClass('selected');tr.addClass('selected');this._class.options.shipping_row=tr;setTimeout(function(){if(this._class.options.shippingHidden){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_from+':');}else if($('.payment.selected .value').text().length>0){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_cost+':');}else{$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment+':');}}.bind(this),100);var trs=this._class.options.containers.step1.find(this._class.options.selectors.paymentrow);var inputs=[];var first=false;var that=this;trs.each(function(){this._class=self;var paypalId=$('button[value="payPalExpressCheckout"]').data('paymentId');var payPalButton=$('#payment_'+paypalId);var payPalB=$('#paypal-button');var input=$(this).find(this._class.options.selectors.trradio);if(!Shop.exist(input))return;var shippingId=$(that).attr('value');var paymentId=parseInt(input.attr('value'));var a=self.options.shipping2Payment['s'+shippingId];var aContain=function(){for(var val in a){if(a[val]!=paymentId)
continue;else{return true;}}}
var aContain=aContain();if(aContain===undefined)
aContain=false;if(payPalButton.length>0){payPalB.removeClass('none');}else if(payPalB.length>0){payPalB.addClass('none');}
if(Shop.exist(a)&&aContain){inputs.push(input);input.attr('disabled',false);input.attr('readonly',false);$(this).removeClass('none');if(payPalButton.length>0&&payPalB.length>0){payPalB.removeClass('none');}
if(false==first){$(this).addClass('first').removeClass('none');first=true;}else{$(this).removeClass('first');}
var adds=self.shipping_additional(shippingId,paymentId);if(adds!==null){$(this).find('.value').html('+'+adds['t']);if(typeof adds['p']==="undefined"){$(this).find('.additional_cost_percent').html("");}else{$(this).find('.additional_cost_percent').html("("+adds['p']+")");}}else{$(this).find('.value').html("");$(this).find('.additional_cost_percent').html("");}}else{input.attr('disabled',true);input.attr('readonly',true);input.prop('checked',false);$(this).addClass('none').removeClass('first');if(payPalButton.length>0&&payPalB.length>0){payPalB.addClass('none');}}
if(Shop.values.ShippingHidden&&payPalB.length>0){var showPayPal=false;self.parent.forEachIn(self.options.shipping2Payment,function(arr){if(arr.indexOf(paypalId)>=0){showPayPal=true;}});if(showPayPal===true){payPalB.removeClass('none');}}});var inputsLength=inputs.length;if(inputsLength>0){var checked=false;for(var x=0;x<inputsLength;++x)
if(inputs[x].is(':checked')==true)
checked=true;if(checked==false){inputs[0].prop('checked',true);inputs[0].trigger('change');}}
this._class.calculate();this._class.step1_hide_delivery();this._class.options._folden_delivery=true;});if(this.checked==true){$(this).trigger('change');}});$('.quantity input[type="text"], .quantity input[type="number"]').on('keydown',function(){if(!$('#recalc').is(':visible')){$('#recalc').trigger('pay.change');}});$('.quantity input[type="number"]').on('change',function(){if(!$('#recalc').is(':visible')){$('#recalc').trigger('pay.change');}});if(Shop.exist(this.options.country2Shipping)){var tr=this.options.containers.step1.find(this.options.selectors.countrytr);if(Shop.exist(tr)){var sel=tr.find(this.options.selectors.trcountryselect);this._class=sel;if(sel.children().length>0){if(sel.children().length>1){tr.removeClass('none');}
sel._class=this;sel._tr=tr;sel.on('change',function(e){var cs=sel._class.options.country2Shipping[$(this).val()];var first=null;var unchecked=false;sel._tr.parent().find(sel._class.options.selectors.deliveryradios).each(function(arg){var i=$(this);var disCheck=function(){for(var val in arg){if(arg[val]!=i.val()){$(this).parents('.delivery').addClass('none');continue;}else{$(this).parents('.delivery').removeClass('none');return true;}}}.bind(this);this.disabled=!disCheck();if(true==this.disabled){if(true==this.checked){this.checked=false;unchecked=true;}}else if(null==first){first=this;}},[cs]);if(first&&true==unchecked){first.checked=true;$(first).trigger('change');}
this.blur();});sel.trigger('change');}}}
$recalc=$('#recalc');$recalc.on('pay.change',function(){$(this).show();});this.step1_hide_delivery();this.step1_hide_payment();if(!!$('.pp-pick-up-points').length){this.pocztaPolskaBasketHandler.pickUpPointsStepDelivery($('#box_basketlist form'));}
if(Shop.values.partnerEE||Shop.values.clientEE){this.enhancedEcommerce();}},step2:function(){if(!Shop.exist(this.options.containers.step2))return;var shopClass=this.parent;var f=(function myself(){myself._form=this[0];myself._sub=this[1];var that=this[2];var trs=myself._form.find(that.options.selectors.trdifferentaddress);var i=myself._form.find(that.options.selectors.differentaddress);if(Shop.exist(i)){if(i.is(':checked'))
trs.removeClass('none');else{trs.addClass('none');}}
else{i.prop('checked',false);}
var r=$(myself._form).find(that.options.selectors.companyaddress);var countrySelect=that.options.containers.step2.find(that.options.selectors.countryselect);var c=('PL'==countrySelect.val().replace(/[^A-Z]/g,'')||'179'==countrySelect.val());if(Shop.exist(r)){myself._sub(myself._form.find(that.options.selectors.formcompanyname),r.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formtaxid),r.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formcompanynameError),r.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formtaxidError),r.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formpesel),c&&!r.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formcompanyname2),i.is(':checked'));myself._sub(myself._form.find(that.options.selectors.formtaxid2),i.is(':checked'));}}).bind([this.options.containers.step2.find('form'),function(el,show){if(Shop.exist(el)){var tr=$(el).closest('tr');if(tr){if(show==true){tr.removeClass('none');tr.find('input, select').removeClass('none').attr('disabled',false);}else{tr.addClass('none');tr.find('input, select').addClass('none').attr('disabled',true);}}}},this]);f();this.options.containers.step2.find(this.options.selectors.countryselect).each(function(that){that._class=that;$(this).on('change',[that],function(e){var that=e.data[0];var v=parseInt($(this).val(),10);var chkbx=that._class.options.containers.step2.find(that._class.options.selectors.differentaddress);if(!Shop.exist(chkbx))return;var fields=$(".coname em.color, .nip em.color");if($.inArray(v,that._class.options.country2Shipping)<0){chkbx.attr('data-can-change',false);if(chkbx.is(':checked')==false){chkbx.prop('checked',true);chkbx.trigger('change');}
fields.hide();}
else{chkbx.attr('data-can-change',true);fields.show();}});$(this).trigger('change');},[this]);this.options.containers.step2.find(this.options.selectors.addresstyperadios).each(function(){this._change=f;$(this).on('change',function(){this._change();});});this.options.containers.step2.find(this.options.selectors.differentaddress).each(function(){this._change=f;$(this).on('change',function(){if($(this).attr('data-can-change')=='false'&&$(this).is(':checked')==false){(function(){shopClass.alert(Shop.lang.basket.shipping_different_country);$(this).prop('checked',true);this._change();}).apply(this);}
else{this._change();}});this._change();});this.options.containers.step2.find(this.options.selectors.addressselectsubmit).addClass('none');this.options.containers.step2.find(this.options.selectors.addressselect).each(function(that){this._class=that;var self=this;$(this).on('change',function(e){var val=parseInt($(this).val());if(val>0){var urlS=this._class.options.getaddressurl.replace("{id}",val);var req=$.ajax({url:shopClass.url(urlS),async:false,cache:false,method:'get'}).error(function(xhr){if(200!=this.status){shopClass.alert('todo lang')}
shopClass.alert(Shop.lang.basket.address_request_error);}).success(function(json){if(Shop.exist(json)&&Shop.exist(json.name)){var n=$(self).attr('name').match(/2$/)?'2':'';for(var k in json){var selector=self._class.options.selectors.addressinput.replace("{name}",(k+n));self._class.options.containers.step2.find(selector).val(json[k]).trigger('change');}
self._class.options.containers.step2.find(self._class.options.selectors.countryselect).trigger('change');if(n==''){if(json.nip==''&&json.coname==''){$(self._class.options.selectors.personaladdress).prop('checked',true).trigger('change');}
else{$(self._class.options.selectors.companyaddress).prop('checked',true).trigger('change');}}
if(n=='2'){var select=self._class.options.containers.step2.find(self._class.options.selectors.addressinput.replace("{name}","country2"));if(select.val()!=json.country){select.find('option').filter(function(){return $(this).val()==''}).remove();$('<option />').appendTo(select)
select.val('')}}}
else{shopClass.alert(Shop.lang.basket.address_request_error);}});}
else{var keys=['name','surname','phone','coname','nip','street','zip','city','other_address'];var n=$(self).attr('name').match(/2$/)?'2':'';var keysLength=keys.length;for(var x=0;x<keysLength;++x){var selector=self._class.options.selectors.addressinput.replace("{name}",keys[x]+n);self._class.options.containers.step2.find(selector).val('');}
if(n=='2'){var select=self._class.options.containers.step2.find(this._class.options.selectors.addressinput.replace("{name}","country2"));select.find('option[value=]').remove();}}});},[this]);if(this.options.reverseTable){this.reverseAddress($(this.options.selectors.addressfieldscontainer),'');this.reverseAddress($('table.address-different'),'2');}
if(Shop.values.partnerEE||Shop.values.clientEE){this.eeStep2();}},reverseAddress:function($container,label){var $country;var $state;var $city;$country=$container.find('tr.country'+label);$state=$container.find('tr.state'+label);$city=$container.find('tr.city'+label);$country.insertBefore($container.find('tr.other_address'+label));$state.insertAfter($country);$city.insertAfter($state);},stepshipping:function(){var self=this;this.options.containers.shipping.find(this.options.selectors.paymentradios).each(function(){this._class=self;$(this).on('change',function(e){this._class.options.payment_id=parseInt($(this).attr('value'));this._class.options.containers.shipping.find(this._class.options.selectors.paymentrow).removeClass('selected');var tr=$(this).parent();while(tr.prop('tagName')!='DIV')
tr=tr.parent();tr.addClass('selected');this._class.options.containers.shipping.find(this._class.options.selectors.paymentheadlabel).html(tr.find(this._class.options.selectors.paymentrlabel).text());this._class.calculateShipping();this._class.options._folden_payment=true;setTimeout(function(){if(tr.find('.value').text().length>0){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_cost+':');}else{$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment+':');}}.bind(this),100);});if(this.checked==true)
$(this).trigger('change');});this.options.containers.shipping.find(this.options.selectors.deliveryradios).each(function(){this._class=self;$(this).on('change',function(e){this._class.options.shipping_id=parseInt($(this).attr('value'));var tr=$(this).parent();while(tr.prop('tagName')!='DIV')
tr=tr.parent();tr.parent().children(this._class.options.selectors.deliveryrow).removeClass('selected');tr.addClass('selected');this._class.options.shipping_row=tr;setTimeout(function(){if($('.payment.selected .value').text().length>0){$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment_cost+':');}else{$(this._class.options.selectors.deliverylabel).text(Shop.lang.basket.shipping_payment+':');}}.bind(this),100);var trs=this._class.options.containers.shipping.find(this._class.options.selectors.paymentrow);var inputs=[];var first=false;var that=this;trs.each(function(){this._class=self;var input=$(this).find(this._class.options.selectors.trradio);if(!Shop.exist(input))return;var shippingId=$(that).attr('value');var paymentId=parseInt(input.attr('value'));var a=self.options.shipping2Payment['s'+shippingId];var aContain=function(){for(var val in a){if(a[val]!=paymentId)
continue;else{return true;}}}
var aContain=aContain();if(aContain===undefined)
aContain=false;if(Shop.exist(a)&&aContain){inputs.push(input);input.attr('disabled',false);input.attr('readonly',false);$(this).removeClass('none');if(false==first){$(this).addClass('first').removeClass('none');first=true;}else{$(this).removeClass('first');}
var adds=self.shipping_additional(shippingId,paymentId);if(adds!==null){$(this).find('.value').html('+'+adds['t']);if(typeof adds['p']==="undefined"){$(this).find('.additional_cost_percent').html("");}else{$(this).find('.additional_cost_percent').html("("+adds['p']+")");}}else{$(this).find('.value').html("");$(this).find('.additional_cost_percent').html("");}}else{input.attr('disabled',true);input.attr('readonly',true);input.prop('checked',false);$(this).addClass('none').removeClass('first');}});var inputsLength=inputs.length;if(inputsLength>0){var checked=false;for(var x=0;x<inputsLength;++x)
if(inputs[x].is(':checked')==true)
checked=true;if(checked==false){inputs[0].prop('checked',true);inputs[0].trigger('change');}}
this._class.calculateShipping();this._class.options._folden_delivery=true;});if(this.checked==true){$(this).trigger('change');}});if(Shop.values.partnerEE||Shop.values.clientEE){this.eeStepE();}
if(!!$('.pp-pick-up-points').length){this.pocztaPolskaBasketHandler.pickUpPointsStepDelivery($('form[action*="/pl/basket/step3"]'));}},step3:function(){if(Shop.values.partnerEE||Shop.values.clientEE){this.eeStep3();}
if(!!$('.pp-pick-up-points').length){this.pocztaPolskaBasketHandler.pickUpPointsStep3();}},stepdone:function(){if(Shop.shippingDone){if(Shop.values.partnerEE){shopLayer.push({'event':'transaction','ecommerce':{'currencyCode':Shop.values.currency,'purchase':{'actionField':Shop.shippingDone.data||{},'products':Shop.shippingDone.products||[]}}});}
if(Shop.values.clientEE){if(window.ga){Shop.shippingDone.clientProducts=Shop.shippingDone.clientProducts||[];Shop.shippingDone.clientProducts.forEach(function(product){ga('client.ec:addProduct',product);});Shop.shippingDone.dataClient=Shop.shippingDone.dataClient||{};ga('client.ec:setAction','purchase',Shop.shippingDone.dataClient);ga('client.send','pageview');}}}
if(Shop.values.partnerEE){shopLayer.push({'event':'checkout','ecommerce':{'currencyCode':Shop.values.currency,'checkout':{'actionField':{'step':Shop.values.ShippingHidden?5:4},'products':[]}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout',{'step':Shop.values.ShippingHidden?5:4});ga('client.send','pageview');}}},enhancedEcommerce:function(){var self;var $form;var $products;var quantities;quantities=[];$products=$('.productlist tr[data-product-id]');$products.each(function(){quantities.push(parseFloat($(this).find('.quantity input').val()))});self=this;$form=$('#box_basketlist form');if($form.length>0){$form.find('[type="submit"]').on('click',function(ev){$('<input />',{'type':'hidden','name':$(this).attr('name'),'value':$(this).val()}).appendTo($(this).parent());this.removeAttribute('name');this.removeAttribute('value');});$form.on('submit',function(ev){var newValues;var changed;var options;ev.preventDefault();newValues=[];$products.each(function(){newValues.push(parseFloat($(this).find('.quantity input').val()))});changed=[];quantities.forEach(function(el,index){if(el!=newValues[index]){changed.push(index);}});if(changed.length>0){self.updateEE(changed,$products,newValues,quantities);quantities=[];$products.each(function(){quantities.push(parseFloat($(this).find('.quantity input').val()))});}
if(!Shop.values.ShippingHidden){options=$('input[name="shipping_id"]:checked').parent().next().text().trim()+' '+$('input[name="payment_id"]:checked').parent().next().text().trim();options=options.replace(/\s+/g,' ');if(Shop.values.partnerEE){shopLayer.push({'event':'checkoutOption','ecommerce':{'currencyCode':Shop.values.currency,'checkout_option':{'actionField':{'step':1,'option':options}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout_option',{'step':1,'option':options});ga('client.send','event','Checkout','Option');}}}
this.submit();});}
this.eeStep1();},updateEE:function(changed,$products,quantities,localQuantities){var self;self=this;changed.forEach(function(el){var product;var clientProduct;var $container;var quantity;$container=$products.filter(':eq('+el+')');if($container.length>0){product={id:Shop.values.licenseId+'_'+$container.data('productId'),name:$container.find('.name a').text().trim(),price:$container.find('.price:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:$container.find('.variant').text(),quantity:$container.find('.quantity input').val(),position:$container.index()};clientProduct={id:$container.data('productId'),name:$container.find('.name a').text().trim(),price:$container.find('.price:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:$container.find('.variant').text(),quantity:$container.find('.quantity input').val(),position:$container.index()};if(quantities[el]>localQuantities[el]){quantity=quantities[el]-localQuantities[el];product.quantity=quantity;clientProduct.quantity=quantity;if(Shop.values.partnerEE){shopLayer.push({'event':'addToCart','ecommerce':{'currencyCode':Shop.values.currency,'add':{'products':[product],'actionField':{'list':'checkout'}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','add',{'list':'checkout'});ga('client.send','event','UX','click','add to cart');}}}else{quantity=localQuantities[el]-quantities[el];product.quantity=quantity;clientProduct.quantity=quantity;if(Shop.values.partnerEE){shopLayer.push({'event':'removeFromCart','ecommerce':{'currencyCode':Shop.values.currency,'remove':{'products':[product]}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','remove');ga('client.send','event','UX','click','remove form cart');}}}}});},eeStep1:function(){var products;var clientProducts;var options;products=[];clientProducts=[];$('.productlist tr[data-product-id]').each(function(){products.push({id:Shop.values.licenseId+'_'+$(this).data('productId'),name:$(this).find('.name a').text().trim(),price:$(this).find('.price:first').text().replace(/([^\d,\.])+/g,''),brand:$(this).data('producer')||'',category:$(this).data('category')||'',position:$(this).index(),variant:$(this).find('.variant').text()});clientProducts.push({id:$(this).data('productId'),name:$(this).find('.name a').text().trim(),price:$(this).find('.price:first').text().replace(/([^\d,\.])+/g,''),brand:$(this).data('producer')||'',category:$(this).data('category')||'',position:$(this).index(),variant:$(this).find('.variant').text()});});if(products.length>0){if(Shop.values.partnerEE){shopLayer.push({'event':'checkout','ecommerce':{'currencyCode':Shop.values.currency,'checkout':{'actionField':{'step':1},'products':products}}});}
if(Shop.values.clientEE){if(window.ga){clientProducts.forEach(function(product){ga('client.ec:addProduct',product);});ga('client.ec:setAction','checkout',{'step':1});ga('client.send','pageview');}}}},eeStep2:function(){if(Shop.values.partnerEE){shopLayer.push({'event':'checkout','ecommerce':{'currencyCode':Shop.values.currency,'checkout':{'actionField':{'step':2}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout',{'step':2});ga('client.send','pageview');}}},eeStep3:function(){if(Shop.values.partnerEE){shopLayer.push({'event':'checkout','ecommerce':{'currencyCode':Shop.values.currency,'checkout':{'actionField':{'step':Shop.values.ShippingHidden?4:3}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout',{'step':Shop.values.ShippingHidden?4:3});ga('client.send','pageview');}}},eeStepE:function(){var self;var $form;if(Shop.values.partnerEE){shopLayer.push({'event':'checkout','ecommerce':{'currencyCode':Shop.values.currency,'checkout':{'actionField':{'step':3}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout',{'step':3});ga('client.send','pageview');}}
self=this;$form=$('#box_basketshipping form');if($form.length>0){$form.on('submit',function(ev){var options;options=$('input[name="shipping_id"]:checked').parent().next().text().trim()+' '+$('input[name="payment_id"]:checked').parent().next().text().trim();options=options.replace(/\s+/g,' ');if(Shop.values.partnerEE){shopLayer.push({'event':'checkoutOption','ecommerce':{'currencyCode':Shop.values.currency,'checkout_option':{'actionField':{'step':3,'option':options}}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:setAction','checkout_option',{'step':3,'option':options});ga('client.send','event','Checkout','Option');}}});}}});Shop.PageSlider.include({options:{containerSelector:'.pageslider',slideListSelector:'.slides',imgSelector:'.slider-img',txtSelector:'.slider-text',navType:null,animationType:null,autoRotate:false,circular:true,slideListWidth:0,slideWidth:0,imgRatio:0,container:[]},initialize:function(options){this.constructor.setOptions(options);if(Shop.mRaty){if(!Shop.mRaty.banner){this.setupSlider();}}else{this.setupSlider();}},setupSlider:function(){var container=$(this.options.containerSelector);container.each(function(index,el){var slideList=$(el).find(this.options.slideListSelector);var slides=slideList.children('li');var ratioWidth;var slideListHeight;if(parseInt($(el).data('max-img-width'),10)>$(el).parent('.box-slider').width()){ratioWidth=parseInt($(el).data('max-img-width'),10);}else{ratioWidth=$(el).parent('.box-slider').width();}
if(slideList.height()>0){slideListHeight=ratioWidth/slideList.height();}else{slideListHeight=ratioWidth/slides.find('.slider-text').height();}
this.options.container.push({imgRatio:slideListHeight,animationType:parseInt($(el).attr('data-slider-animation-type'),10),autoRotate:($(el).attr('data-slider-auto')=='true'),navType:$(el).attr('data-slider-nav-type'),autoDelay:parseInt($(el).attr('data-slider-delay'),10),speed:parseInt($(el).attr('data-slider-duration'),10),slidesOptions:[],circular:true,rotate:null,objects:{container:$(el),slidesContainer:slideList,slides:slides}});}.bind(this));this.createNav();this.autoRotate();this.setupSlides();$(window).on('resize',this.recalculateDimensions.bind(this));},recalculateDimensions:function(){var that=this;$.each(this.options.container,function(){var self=this;this.slideWidth=this.objects.container.width();this.slideListWidth=this.objects.slides.length*this.slideWidth;this.objects.slidesContainer.width(this.slideListWidth);this.objects.slidesContainer.height(this.objects.container.width()/this.imgRatio);this.objects.slides.width(this.slideWidth);$.each(this.slidesOptions,function(){this.img.container.find('> img').on('load',function(){that.sliderObjReposition.call(self,this.img,'img');}.bind(this));that.sliderObjReposition.call(self,this.img,'img');that.sliderObjReposition.call(self,this.txt);if(!!this.container.find('[style*="font-size"]').length){that.recalculateFontSize(this.container.find('[style*="font-size"]'));}});});},recalculateFontSize:function($els){var maxMidSize;var maxSmallSize;var shopClass;shopClass=this.parent;maxMidSize=26;maxSmallSize=16;$els.each(function(){var $el;var fontSize;$el=$(this);fontSize=parseInt($el.css('font-size'),10);if(!this.initialFontSize){this.initialFontSize=fontSize;}
if(shopClass.rwd.large){$el.css('font-size',this.initialFontSize+'px');}
if(shopClass.rwd.mid&&fontSize>maxMidSize){$el.css('font-size',maxMidSize+'px');}
if(shopClass.rwd.small&&fontSize>maxSmallSize){$el.css('font-size',maxSmallSize+'px');}});},setupSlides:function(){var t=this,shopClass=this.parent,img,txt,gradients;gradients=['-webkit-linear-gradient','-o-linear-gradient','-moz-linear-gradient','linear-gradient'];$.each(this.options.container,function(){var self=this;this.objects.slides.each(function(index){img=$(this).find(t.options.imgSelector);txt=$(this).find(t.options.txtSelector)
self.slidesOptions[index]={container:$(this),bg:{container:$(this),image:$(this).attr('data-image'),color1:$(this).attr('data-color-start'),color2:$(this).attr('data-color-end'),orientation:$(this).attr('data-orientation'),size1:$(this).attr('data-bg-size-s'),size2:$(this).attr('data-bg-size-e'),href:$(this).attr('data-href')},img:{container:img,align:parseInt(img.find('img').attr('data-align'),10),animation:parseInt(img.find('img').attr('data-animation'),10),duration:parseInt(img.find('img').attr('data-duration'),10)||0},txt:{container:txt,align:parseInt(txt.attr('data-align'),10),animation:parseInt(txt.attr('data-animation'),10),duration:parseInt(txt.attr('data-duration'),10)||0},active:index?false:true}
if(index){t.hideSlide($(this),self.slidesOptions[index].img,self.slidesOptions[index].txt);}
$.each(self.slidesOptions,function(index){var bgHref=shopClass.url('userdata/boxes/'+this.bg.image),selfS=this;if(this.bg.image){this.bg.container.css({'background-image':(this.bg.image?'url('+bgHref+')':''),'background-size':'100%','background-repeat':'no-repeat','background-position':'center center'});}else if((this.bg.color1!=='transparent'&&this.bg.color2!=='transparent')&&(this.bg.color1&&this.bg.color2)){$.each(gradients,function(){selfS.bg.container.css({'background':setGradient(this,selfS.bg.color1,selfS.bg.color2,selfS.bg.orientation,selfS.bg.size1,selfS.bg.size2)});});}else if(this.bg.color1!=='transparent'&&this.bg.color1){this.bg.container.css('background',(selfS.bg.image?'url('+bgHref+')':'')+' no-repeat center center, '+this.bg.color1);}else{this.bg.container.css('background',(selfS.bg.image?'url('+bgHref+')':'')+' no-repeat center center, transparent');}
if(selfS.bg.href!==''){selfS.bg.container.css('cursor','pointer');}
this.bg.container.on('click',function(e){if(selfS.bg.href!==''){window.location.href=selfS.bg.href;}});});});});function setGradient(cssProperty,color1,color2,orientation,bgSize,bgSize2){return(cssProperty+'('+(orientation==='1'?'to right, ':'')+color1+' '+bgSize+'%,'+color2+' '+bgSize2+'%)');}},sliderObjReposition:function(obj,type){var position=getPosition(obj.align);var container=obj.container;if(type==='img'&&obj.container.hasClass('slider-img')){container=obj.container.find('> img');}
if(!isNaN(obj.align)){switch(position[0]){case 0:container.css('left','0');break;case 1:container.css('left',(this.slideWidth-container.width())/2);break;case 2:container.css('right','0');break;}
switch(position[1]){case 0:container.css('top','0');break;case 1:container.css('top',(this.objects.container.height()/2)-(container.height()/2));break;case 2:container.css('bottom','0');break;}}
function getPosition(align,index){var x,y;x=(align%3);y=Math.floor(align/3);return[x,y];}},createNav:function(){var t=this;$.each(this.options.container,function(){if(this.objects.slides.length>0){var self=this;var nav=$('<ul />',{'class':'slider-nav rwd-hide-small rwd-hide-tablet rwd-hide-medium '+this.navType}).appendTo(this.objects.container);this.objects.nav=nav;this.objects.slides.each(function(index){$('<li />',{'data-slide-index':index,'class':index?'':'active','text':self.navType==='numbers'?(index+1):''}).appendTo(nav).on('click',function(e){t.goToSlide.call(self,index,$(this),t);});});this.objects.container.on('swipeleft',t.slideRight.bind(t,this));this.objects.container.on('swiperight',t.slideLeft.bind(t,this));$('<span />',{'class':'ps-arrow-left'}).appendTo(this.objects.container).on('click',t.slideRight.bind(t,this));$('<span />',{'class':'ps-arrow-right'}).appendTo(this.objects.container).on('click',t.slideLeft.bind(t,this));}});},goToSlide:function(index,control,t){if(this.objects.nav){var self=this;var previousIndex=parseInt(this.objects.nav.find('li.active').attr('data-slide-index'),10);this.objects.nav.find('li.active').removeClass('active');control.addClass('active');if(!isNaN(previousIndex)){t.hideSlide(null,this.slidesOptions[previousIndex].img,this.slidesOptions[previousIndex].txt);switch(this.animationType){case 0:setTimeout(function(){self.objects.slides.css('left',-index*self.slideWidth);t.showSlide($(this),self.slidesOptions[index].img,self.slidesOptions[index].txt);}.bind(this),Math.max(self.slidesOptions[previousIndex].img.duration,self.slidesOptions[previousIndex].txt.duration));break;case 1:setTimeout(function(){this.objects.slides.animate({left:-index*self.slideWidth},this.speed,function(){t.showSlide($(this),self.slidesOptions[index].img,self.slidesOptions[index].txt);});}.bind(this),Math.max(self.slidesOptions[previousIndex].img.duration,self.slidesOptions[previousIndex].txt.duration));break;case 2:this.objects.slides.animate({opacity:0},(this.speed/2),function(){self.objects.slides.css('left',-index*self.slideWidth);$(this).animate({opacity:1},(self.speed/2),function(){t.showSlide($(this),self.slidesOptions[index].img,self.slidesOptions[index].txt);})});}}}},slideRight:function(container){var activeControl=container.objects.nav.find('li.active'),prev=activeControl.prev(),index=parseInt(prev.attr('data-slide-index'),10);if(prev.length<=0&&container.circular===true){prev=container.objects.nav.find('li:last-child');index=container.objects.slides.length-1;}else if(prev.length<=0){return false}
if(container.autoRotate){clearInterval(container.rotate);container.rotate=setInterval(function(){this.slideLeft(container);}.bind(this),container.autoDelay);}
this.goToSlide.call(container,index,prev,this);},slideLeft:function(container){var activeControl=container.objects.nav.find('li.active'),next=activeControl.next(),index=parseInt(next.attr('data-slide-index'),10);if(next.length<=0&&container.circular===true){next=container.objects.nav.find('li:first-child');index=0;}else if(next.length<=0){return false}
if(container.autoRotate){clearInterval(container.rotate);container.rotate=setInterval(function(){this.slideLeft(container);}.bind(this),container.autoDelay);}
this.goToSlide.call(container,index,next,this);},hideSlide:function(slide,img,text){var animSize=5,opacity=0;if(img.container.length>0){this.setSlidePosition(img.animation,img.container,animSize,opacity);}
if(text.container.length>0){this.setSlidePosition(text.animation,text.container,animSize,opacity);}},showSlide:function(slide,img,text){var animSize=0,opacity=1;if(img.container.length>0){this.setSlidePosition(img.animation,img.container,animSize,opacity);}
if(text.container.length>0){this.setSlidePosition(text.animation,text.container,animSize,opacity);}},setSlidePosition:function(pos,container,animSize,opacity){container.css('opacity',opacity);switch(pos){case 0:this.cssTranslate(container,-animSize,0);break;case 1:this.cssTranslate(container,0,-animSize);break;case 2:this.cssTranslate(container,animSize,0);break;case 3:this.cssTranslate(container,0,animSize);break;default:this.cssTranslate(container,0,0);}},cssTranslate:function(obj,x,y){obj.css({'-ms-transform':'translate('+x+'em, '+y+'em)','-webkit-transform':'translate('+x+'em, '+y+'em)','transform':'translate('+x+'em, '+y+'em)'})},autoRotate:function(){var t=this;$.each(this.options.container,function(){var self;self=this;if(this.autoRotate){this.rotate=setInterval(function(){t.slideLeft(self);}.bind(this),this.autoDelay);}});}});Shop.AjaxLayer.include({options:{selector:'.ajaxlayer',box_class:'mask_box',close_selector:'.close_mask'},mask:null,div:null,modal:null,event:null,initialize:function(options){this.constructor.setOptions(options);this.modal=new Shop.Modal();$(this.options.selector).each(function(that){that.assign(this);},[this]);},assign:function(el){el._class=this;$(el).off('mousedown').on('mousedown',function(e){e.stopPropagation();e.preventDefault();this._class.load($(this),$(this).attr('data-href'));});},load:function(container,url){var that=this;var shopClass=this.parent;var req=$.ajax({url:url,async:true,cache:false,method:'get'}).error(function(xhr){if(0===xhr.status)return;shopClass.alert(Shop.lang.ajaxlayer.error);that.close();}).success(function(responseHTML,response,responseTree){if(Shop.exist(responseTree)&&Shop.exist(responseTree.responseText)&&Shop.exist(responseHTML)){that.loaded(responseHTML);}else{shopClass.alert(Shop.lang.ajaxlayer.error);that.close();}});},loaded:function(html){var $container=$('<div />').append($(html));var $title=$container.find('[data-header-title]');this.modal.options.content=$container;this.modal.options.footer=null;this.modal.options.header=$title.length>0?$title.attr('data-header-title'):null;this.modal.createModal();this.afterload();},afterload:function(){var self;var urlF;var nameF;var mailF;var questionF;var that=this;var container=this.modal.object.body;var cb;var recaptchaToken;self=this;cb=(function(){$.ajax({url:urlF,method:'post',data:{name:nameF,mail:mailF,question:questionF,'g-recaptcha-response':recaptchaToken}}).error(function(){that.failure()}).success(function(html){that.modal.destroyModal();that.loaded(html);});});container.find('form').each(function(){var recaptchaId;var recaptchaMode;if(!!$(this).find('#ask-recaptcha').length){if(!window.grecaptcha){var captchaTest;Shop.Recaptcha=new Shop.Recaptcha();captchaTest=setInterval(function(){if(window.grecaptcha){captchaRender();clearInterval(captchaTest);}},50);}}
if(window.grecaptcha){captchaRender();}
$(this).on('submit',function(ev){urlF=$(this).attr('action');nameF=$(this).find('input[name="name"]').val();mailF=$(this).find('input[name="mail"]').val();questionF=$(this).find('textarea[name="question"]').val();ev.preventDefault();ev.stopPropagation();if(window.grecaptcha&&recaptchaId!==undefined){if(!grecaptcha.getResponse(recaptchaId)&&recaptchaMode!=='invisible'){self.parent.alert(Shop.lang.common.recaptchaRequired);return false;}}
if(recaptchaMode==='invisible'){grecaptcha.execute(recaptchaId);}else{cb();}
return false;})
function captchaRender(){recaptchaMode=$('#ask-recaptcha').data('recaptchaMode')?'invisible':'normal';recaptchaId=grecaptcha.render('ask-recaptcha',{'sitekey':$('#ask-recaptcha').data('recaptchaKey'),'theme':'light','size':recaptchaMode,'callback':function(token){recaptchaToken=token;if(recaptchaMode==='invisible'){cb();}}});}});},failure:function(){this.parent.alert(Shop.lang.ajaxlayer.error);}}),Shop.Tabs.include({options:{elements:{$container:null,$tabsContainer:null},selectors:{container:'.product-modules.active',boxHeader:'.boxhead',boxContainer:'.innerbox',tabContainer:'tab-container',tabs:'product-tabs',tabClass:'product-tab',column:'.innermain .centercol',boxes:'.centercol > .box:not(#box_productfull)',boxesTop:'.centercol > [data-boxes-side="0"]',boxesBottom:'.centercol > [data-boxes-side="2"]',facebookComments:'#box_facebookchat'}},initialize:function(options){var self;self=this;this.constructor.setOptions(options);fastdom.mutate(function(){self.createDOM();});},createDOM:function(){var self;var nav;var tabs;var $tabContainer;var $bodyContainer;var $navContainer;var $navUl;var $bodyCotnainer;var $facebookComments;this.options.elements.$container=$(this.options.selectors.container);this.options.elements.tabsContainer=$tabContainer=$('<div />',{'class':this.options.selectors.tabContainer});$navContainer=$('<nav />').appendTo($tabContainer);$navUl=$('<ul />').appendTo($navContainer);$bodyContainer=$('<div />',{'class':this.options.selectors.tabs}).appendTo($tabContainer);nav=[];tabs=[];self=this;this.options.elements.$container.children().each(function(){nav.push($(this).find(self.options.selectors.boxHeader));tabs.push($(this).find(self.options.selectors.boxContainer));});nav.forEach(function($el,index){$el.appendTo($navUl).wrap($('<li />',{'class':$el.context.getAttribute('id')}));if(index===0){$el.addClass('active');}});$navUl.find('> li').on('click',function(){var $el;$el=$(this);fastdom.mutate(function(){$navUl.find('> li > div').removeClass('active');$el.find('> div').addClass('active');self.switchTab($el.attr('class'));});});tabs.forEach(function($el,index){$el.appendTo($tabContainer.find('.'+self.options.selectors.tabs)).wrap($('<div />',{'class':self.options.selectors.tabClass+(index!==0?' none':''),'data-tab':$el.context.getAttribute('id')}));});this.options.elements.$container.remove();$tabContainer.appendTo(this.options.selectors.column);$(this.options.selectors.boxesBottom).appendTo(this.options.selectors.column);$(this.options.selectors.boxesTop).prependTo(this.options.selectors.column);$facebookComments=$(this.options.selectors.facebookComments);if($facebookComments.length>0){$facebookComments.appendTo(this.options.selectors.column);}
return this;},switchTab:function(tabName){this.options.elements.tabsContainer.find('[data-tab]').addClass('none');this.options.elements.tabsContainer.find('[data-tab="'+tabName+'"]').removeClass('none');}});Shop.RwdMenu.include({options:{buttonSelector:'.small-menu .fa.fa-align-justify',iconDown:'fa afa-chevron-down',iconUp:'fa afa-chevron-up'},objects:{categories:null,menu:null},events:{create:null,toggle:null},initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent;this.events.create=(function(ev){ev.preventDefault();ev.stopPropagation();if((shopClass.rwd.small||shopClass.rwd.mid)&&!this.objects.categories){this.createMenu(shopClass);$(this.options.buttonSelector).off('click',this.events.create);}}.bind(this));$(this.options.buttonSelector).on('click',this.events.create);},createMenu:function(shopClass){var that=this;if(shopClass.rwd.small||shopClass.rwd.mid){$.ajax({url:shopClass.url('console/tree/gettree/client/1'),method:'get'}).error(function(){}).success(function(categories,state,xhrObject){if(state==='success'){that.objects.categories=categories;that.buildMainCategory();}});}},buildNode:function(tree,submenu){var that;var category;var index;var li;var a;that=this;for(category in tree){if(Object.prototype.hasOwnProperty.call(tree,category)){li=$('<li />',{'class':tree[category].children.length>0?'has-children '+this.options.iconDown:'','data-category-id':tree[category].id,click:function(e){if($(this).hasClass('has-children')){e.stopPropagation();if($(this).hasClass('active')){$(this).removeClass('active').removeClass(that.options.iconUp).addClass(that.options.iconDown).children('ul').hide();}else{index=$(this).index();that.buildSubCategory($(this),tree[index].children);$(this).removeClass(that.options.iconDown).addClass(that.options.iconUp+' active');$(this).children('ul').show();}}}}).appendTo(submenu);a=$('<a />',{'text':tree[category].name,'href':tree[category].url,click:function(e){e.preventDefault();e.stopPropagation();$(this).next().hide();window.location.href=$(this).attr('href');}}).appendTo(li);}}},buildMainCategory:function(){if(!this.objects.menu){var that=this,additionalLinks=$('.menu-list a'),tree=this.objects.categories.tree,menu=this.objects.menu=$('<ul />',{'id':'rwd-menu','class':'small active'}).appendTo($('.menu.row nav'));this.buildNode(tree,menu);if(additionalLinks.length>0){this.buildAdditionalLinks(menu,additionalLinks);}
this.events.toggle=(function(ev){ev.preventDefault();ev.stopPropagation();this.objects.menu.toggleClass('active none small');}.bind(this));$(this.options.buttonSelector).on('click',this.events.toggle);}},buildSubCategory:function(li,tree){var submenuId=parseInt(li.attr('data-category-id'),10);if(tree.length>0&&!this.objects.menu[submenuId]){var that=this;var submenu=this.objects.menu[submenuId]=$('<ul />').appendTo(li);this.buildNode(tree,submenu);}},buildAdditionalLinks:function(menu,additionalLinks){additionalLinks.each(function(index){var li;var $el;$el=$(this);if($el.attr('href')!=='/'&&$el.parents('li').attr('id')===undefined&&index){li=$('<li />').appendTo(menu)
$('<a />',{'text':$el.text(),'href':$el.attr('href')}).appendTo(li);}});}});Shop.LoyaltyPoints.include({options:{pointsSelector:'#box_productfull .loyalty_points .points',inputSelector:'#box_productfull .basket input[name=quantity]'},initialize:function(options){var shopInstance;var $quantity;var $points;var startPoints;this.constructor.setOptions(options);shopInstance=this.parent
$quantity=$(this.options.inputSelector);$points=$(this.options.pointsSelector);startPoints=parseFloat(shopInstance.toPrimaryValue($points.text()));if(!!$quantity.length&&!!$points.length){$quantity.on('change',function(){var value;var points;value=parseFloat(shopInstance.toPrimaryValue($(this).val()))
if(value>0){points=Math.round(100*value*startPoints)/100;if(points>=1){$points.text(points);}};});}}});Shop.AjaxBasket.include({options:{form_selector:'.basket form[method=post][action], form.basket[method=post][action]',fullprod_selector:'#box_productfull',container_id:'ajaxbasket',loyaltyexchange_class:'loyaltyexchange',basket_header_class:'header .basket .countlabel b',basket_quantities:['header .basket .countlabel b.count span','#box_basket .innerbox p.products em'],basket_sums:['header .basket-contain .basket-price strong.price-products'],basket_sums_discount:['#box_basket .innerbox p.sum em','header .basket .countlabel b.sum','header .basket-contain .basket-price strong.price-total'],insert_px1:true,container:null,callbacks:{postAdd:null}},modal:null,json:null,mask:null,event:null,div:null,form:null,initialize:function(options){var self;this.constructor.setOptions(options);if(this.options.container===null){this.options.container=$('<div />');this.options.container.attr('id',this.options.container_id).addClass('none');this.options.container.appendTo($('body'));}
self=this;this.parent.addEvent('cart:add',function(ev,evForm,options,$form){var fp;if(!$form.hasClass(self.options.loyaltyexchange_class)){fp=$form.parents(self.options.fullprod_selector);if(fp.length<=0){options.preventSubmit=true;self.wrapform($form[0],evForm);}}});},wrapform:function(form,e){var that=this,formAnswer=null,iframe=null,ajaxBasketHandler=null,fileInput;fileInput=$(form).find('input[type="file"]');if(fileInput.length>0){if(fileInput[0].files.length>0){$('#box_productfull').addClass('loading');}
iframe=$('<iframe />',{'name':'iframeUpload','css':{display:'none'},'src':'about:blank','id':'iframeUpload'}).appendTo(document.body);iframe=iframe[0];window.frames['iframeUpload'].name='iframeUpload';ajaxBasketHandler=function(){$('#box_productfull').removeClass('loading');if(iframe.detachEvent){iframe.detachEvent('onload',ajaxBasketHandler);}else{iframe.removeEventListener('load',ajaxBasketHandler,false);}
if(iframe.contentDocument){formAnswer=iframe.contentDocument.body.innerHTML;}else if(iframe.contentWindow){formAnswer=iframe.contentWindow.document.body.innerHTML;}else if(iframe.document){formAnswer=iframe.document.body.innerHTML;}
if(formAnswer){$.ajax({url:$(form).attr('action'),method:'get',headers:{'Content-Type':'multipart/form-data'},}).error(function(){that.failure();}).success(function(json){that.display(json);});}else{that.failure();}}
if(iframe.addEventListener){iframe.addEventListener('load',ajaxBasketHandler,true);}
if(iframe.attachEvent){iframe.attachEvent('onload',ajaxBasketHandler);}
form.setAttribute('target','iframeUpload');form.submit();}else{this.parent.fireEvent('cart:preadd:ajax',form);if(!form.prevent){this.sendAjax(form);}
return false;}},sendAjax:function(form){var that=this;$.ajax({url:$(form).attr('action'),method:'post',data:$(form).serialize()}).error(function(){that.failure();}).success(function(json){that.sent(json,form);that.updateBasketHeader(json.basket.products);});},sent:function(json,form){if(typeof json==='object'){this.json=json;if(!this.json.added||this.json.added.length==0){this.error(form);}else{this.display(undefined,form);}}
else{this.failure();}},failure:function(){this.parent.alert(Shop.lang.ajaxbasket.submit_error);},error:function(form){if(this.json.messages.error.length||this.json.messages.warning.length){if(this.json.messages.error.length){if($(form).parents('#box_productfull').length===0){form.submit();}else{this.parent.alert(this.json.messages.error[0]);}}else{this.parent.alert(this.json.messages.warning[0]);}}else{this.failure();}},display:function(json,form){if(json!==undefined){this.json=json;}
var shopClass=this.parent;var productCard;var productName;var productImg;var productCount;var productPriceBrutto;var productPriceNetto;var productPriceAllB;var productPriceAllN;var basketCount;var basketSummary;var basketSummaryDiscount;var ajaxBasketContainer;var productBlock;var productInfo;var cartBlock;var cartDiscountSpan;var stocks;var buttonBlock;var subAdd;var taxInfo;var x;var y;var z;var $h1;var $mainImg;var $quantity;var $priceGross;var $priceNet;var $taxInfo;if($(form).parents('#box_productfull').length<=0&&json===undefined){subAdd=true;productCard=$(form).parents('.product');}else{subAdd=false;productCard=$('#box_productfull');}
this.modal=new Shop.Modal();this.modal.options.header=$('<span />',{'text':Shop.lang.ajaxbasket.product_added});if(!subAdd){$h1=productCard.find('h1.name');if(!!$h1.length){productName=$h1.text();}
$mainImg=productCard.find('.mainimg img');if(!!$mainImg.length){productImg=$mainImg.clone();}
$quantity=productCard.find('input[name="quantity"]');if(!!$quantity.length){if(this.json.added[0]){productCount=this.json.added[0].quantity;}else{productCount=$quantity.val();}}
$priceGross=productCard.find('.price em');if(!!$priceGross.length){productPriceBrutto=$priceGross.text();}
$priceNet=productCard.find('.price-netto em');if(!!$priceNet.length){productPriceNetto=$priceNet.text();}
$taxInfo=productCard.find('.tax-additional-info .second');if(!!$taxInfo.length){taxInfo=$taxInfo.text();}}else{productName=$(productCard.find('span.productname')[0]).text();productImg=$(productCard.find('img')[0]).clone();productCount=1;productPriceBrutto=$(productCard.find('.price > em')[0]).text();productPriceNetto=$(productCard.find('.price-netto > em')[0]).text();taxInfo=productCard.find('.tax-additional-info').text();if(!productPriceBrutto){productPriceBrutto=$(productCard.find('.price > div > em')[0]).text();}}
basketCount=this.json.basket.count;basketSummary=this.json.basket.sum;basketSummaryDiscount=this.json.basket.sum_after_discounts;ajaxBasketContainer=$('<div />',{'class':'ajax-basket-container'});productBlock=$('<div />',{'class':'ajax-product-block'}).appendTo(ajaxBasketContainer);productImg.appendTo(productBlock);productInfo=$('<div />',{'class':'ajax-product-block-info'}).appendTo(productBlock);$('<h3 />',{'text':productName}).appendTo(productInfo);$('<strong />',{'text':productCount}).appendTo($('<span />',{'text':Shop.lang.ajaxbasket.quantity+':'}).appendTo(productInfo));if(productCard.find('.price em').length>0){$('<strong />',{'text':productPriceBrutto}).appendTo($('<span />',{'text':(($('body').find('[data-netto]').length>0)?Shop.lang.ajaxbasket.netto_label:Shop.lang.ajaxbasket.brutto_label)+':'}).appendTo(productInfo));}
if(productCard.find('.price-netto em').length>0){$('<strong />',{'text':productPriceNetto}).appendTo($('<span />',{'text':Shop.lang.ajaxbasket.netto_label+':'}).appendTo(productInfo));}
stocks=$('<p />',{'class':'ajax-stocks'}).appendTo(productInfo);if($('.stocks').length>0){$('.stocks > .f-row').each(function(){var label,input,value;label=$(this).find('div.label label').text().replace('* ','');input=$(this).find('div.stock-options input, div.stock-options select');switch(input.attr('type')){case'file':{value=input[0].files[0]?input[0].files[0].name:'';break;}
case'text':{value=input.val();break;}
case'radio':{value=input.filter(':checked').parent().next().text();break;}
case'checkbox':{if(input.is(':checked')){value=input.next().attr('data-yes');}
break;}
case undefined:{value=input.find(':selected').text();break;}};if(value){$('<strong />',{'text':value}).appendTo($('<span />',{'text':label}).appendTo(stocks));}});}
cartBlock=$('<div />',{'class':'ajax-cart-block'}).appendTo(ajaxBasketContainer);$('<strong />',{'text':basketCount}).appendTo($('<span />',{'text':Shop.lang.ajaxbasket.products_number+':'}).appendTo(cartBlock));$('<strong />',{'text':basketSummary}).appendTo($('<span />',{'text':Shop.lang.ajaxbasket.basket_value+':'}).appendTo(cartBlock));if(basketSummary!==basketSummaryDiscount){$('<strong />',{'text':basketSummaryDiscount}).appendTo($('<span />',{'text':Shop.lang.ajaxbasket.basket_value_discount+':'}).appendTo(cartBlock));}
if($(this.options.basket_header_class).find('b').length<=0){$(this.options.basket_header_class).empty();$('<b />',{'class':'sum','text':'0,00 zł'}).appendTo($(this.options.basket_header_class));$('<b />',{'class':'count'}).html(' (<span>0</span>)').appendTo($(this.options.basket_header_class));}
if(basketSummary!==basketSummaryDiscount&&$('.price-total-discount').length<=0){$('.basket-price').addClass('basket-price-discount');cartDiscountSpan=$('<span />',{'class':'price-total-discount'}).appendTo($('.basket-price'));$('<span />',{'text':Shop.lang.common.basket_discount+': '}).appendTo(cartDiscountSpan);$('<strong />',{'class':'price-total','text':basketSummaryDiscount}).appendTo(cartDiscountSpan);}
var basketQLength=this.options.basket_quantities.length;var basketSumLength=this.options.basket_sums.length;var basketSummaryLength=this.options.basket_sums_discount.length;for(x=0;x<basketQLength;x++){$(this.options.basket_quantities[x]).text(basketCount);}
for(y=0;y<basketSumLength;y++){$(this.options.basket_sums[y]).text(basketSummary);}
for(z=0;z<basketSummaryLength;z++){$(this.options.basket_sums_discount[z]).text(basketSummaryDiscount);}
this.modal.options.content=ajaxBasketContainer;buttonBlock=$('<div />',{'class':'ajax-product-block'});$('<a />',{'class':'btn left','text':Shop.lang.ajaxbasket.continue_shopping}).on('click',this.modal,function(e){e.data.hideModal();e.data._hideMask();setTimeout(e.data.destroyModal.bind(e.data),600);}).appendTo(buttonBlock);$('<a />',{'class':'btn btn-red right','text':Shop.lang.ajaxbasket.goto_basket,'href':this.json.basket.url}).appendTo(buttonBlock);this.modal.options.footer=buttonBlock;this.modal.createModal();this.modal.reposition();this.modal.callbacks.close=function(){setTimeout(this.destroyModal.bind(this),600);}
if(typeof this.options.callbacks.postAdd==='function'){this.options.callbacks.postAdd.call(this,arguments);}
this.parent.fireEvent('cart:add:ajax',$(form));},close:function(){if(!!this.div)this.div.remove();this.div=null;if(!!this.mask)this.mask.destroyM();this.mask=null;$('body').off('keyup',this.event);},updateBasketHeader:function(products){var self=this;var $productList=$('.basket-product-list');var $list=$(document.createDocumentFragment());$productList.find('> li').remove();$.each(products,function(){if(!this.parent_id){var $li=$('<li />').appendTo($list);var $img;var $link;var $productInfo;var $productRemove;var $variant;$img=$('<img />',{'alt':this.name,'src':this.image_url}).appendTo($li);$link=$('<a />',{'class':'product-name','href':this.url,'title':this.name,'text':this.name}).appendTo($li);$variant=$('<span />',{'class':'product-variant','text':this.variant_name}).appendTo($link);$productInfo=$('<span />',{'class':'product-info'}).appendTo($li);$('<span />',{'class':'product-amount','text':this.quantity}).appendTo($productInfo);$('<span />',{'text':' x '}).appendTo($productInfo);$('<span />',{'class':'product-price','text':this.price}).appendTo($productInfo);$productRemove=$('<span />',{'class':'remove-product'}).appendTo($li);$('<a />',{'text':Shop.lang.common.remove,'href':this.remove_url}).appendTo($productRemove);}});$list.appendTo($productList);}});Shop.Address.include({options:{},urls:{getRegions:'/console/countries/getregions/id/{id}',getSubregions:'/console/countries/getsubregions/id/{id}'},elements:{},initialize:function(options){if(!!options){this.options=options;}
this.options.stateSelect.parents('tr, .state').addClass('hide-state');if(this.options.countrySelect.find('[data-region="1"]').length>0){this.regionHandler();}else{this.options.stateSelect.val('');}
this.elements={};},regionHandler:function(){var self;self=this;this.options.countrySelect.on('change',function(){var request;var countryId;if(!parseInt($(this).find('option:selected').attr('data-region'),10)){if(self.elements.$stateSelect&&self.elements.$stateSelect.length>0){self.elements.$stateSelect.addClass('none').attr('disabled',true);if(self.elements.em){self.elements.em.hide();}}
if(self.elements.$citySelect&&self.elements.$citySelect.length>0){self.elements.$citySelect.addClass('none').attr('disabled',true);}
self.options.citySelect.removeClass('none').attr('disabled',false);self.options.stateSelect.removeClass('none').attr('disabled',false).val('');self.options.stateSelect.parents('tr, .state').addClass('hide-state');return false;}
countryId=parseInt($(this).val(),10);if(isNaN(countryId)){countryId=parseInt($(this).find('option:selected').attr('data-value'),10)}
request=$.ajax({url:self.parent.substitute(self.urls.getRegions,{id:countryId}),method:'post',async:true,cache:false});request.success(function(regions){if(regions.regions.length>0){self.options.stateSelect.parents('tr, .state').removeClass('hide-state');if(!self.elements.$stateSelect){self.elements.$stateSelect=$('<select />',{'name':self.options.stateSelect.attr('name'),'id':self.options.stateSelect.attr('id')}).insertBefore(self.options.stateSelect)}
self.elements.$stateSelect.attr('data-selected',self.options.stateSelect.val());self.fill(regions.regions,self.elements.$stateSelect);self.elements.$stateSelect.removeClass('none').attr('disabled',false);self.options.stateSelect.addClass('none').attr('disabled',true);if(!self.elements.em){self.elements.em=$('<em />',{'class':'color','text':'*'}).prependTo(self.elements.$stateSelect.parents('tr').find('.label label'));}else{self.elements.em.show();}
if(regions.subregions){self.subregionsHandler();self.elements.$stateSelect.trigger('change');}else{if(self.elements.$citySelect){self.elements.$citySelect.addClass('none').attr('disabled',true);}
self.options.citySelect.removeClass('none').attr('disabled',false);}}else{self.elements.$stateSelect.addClass('none').attr('disabled',true);self.options.stateSelect.removeClass('none').attr('disabled',false);if(self.elements.em){self.elements.em.hide();}}});}).trigger('change');},subregionsHandler:function(){var self;self=this;this.elements.$stateSelect.off('change').on('change',function(){var regionId;var request;if(!$(this).find('option:selected').attr('data-region-id')){return false;}
regionId=parseInt($(this).find('option:selected').attr('data-region-id'),10);request=$.ajax({url:self.parent.substitute(self.urls.getSubregions,{id:regionId}),method:'post',async:true,cache:false});request.success(function(subregions){if(subregions.subregions&&subregions.subregions.length>0){if(!self.elements.$citySelect){self.elements.$citySelect=$('<select />',{'name':self.options.citySelect.attr('name'),'id':self.options.citySelect.attr('id'),'data-selected':self.options.citySelect.val()}).insertBefore(self.options.citySelect)}
self.fill(subregions.subregions,self.elements.$citySelect);self.elements.$citySelect.removeClass('none').attr('disabled',false);self.options.citySelect.addClass('none').attr('disabled',true);}else{if(self.elements.$citySelect){self.elements.$citySelect.addClass('none').attr('disabled',true);}
self.options.citySelect.removeClass('none').attr('disabled',false);}});})},fill:function(regions,$container){$container.empty();regions.forEach(function(region){$('<option />',{'text':region.name,'value':region.name,'data-region-id':region.id,'selected':($container.attr('data-selected')===region.name?true:false)}).appendTo($container);}.bind(this));}})
Shop.AddressContainer.include({initialize:function(options){$('.address-handler').each(function(){var diff;diff='';if($(this).attr('data-diff-address')){diff='2';}
if(!this.Address){this.Address=new Shop.Address({countrySelect:$(this).find('#input_country'+diff),stateSelect:$(this).find('#input_state'+diff),citySelect:$(this).find('#input_city'+diff)})}});}});Shop.Modal.include({options:{autoShow:false,showMask:true,position:'center',positionType:'fixed',offset:20,header:null,content:null,footer:null,onPostShow:null},object:{container:null,header:null,body:null,footer:null,mask:null,position:{}},params:{width:0,height:0,leftPos:0,topPos:0,scroll:0,windowWidth:0,windowHeight:0},callbacks:{close:null,onPostShow:null,onReposition:null},_isCreated:false,_isMaskCreated:false,initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent;this.object={container:null,header:null,body:null,footer:null,mask:null,position:{}},this.params={width:0,height:0,leftPos:0,topPos:0,scroll:0,windowWidth:0,windowHeight:0},this._isCreated=false;this._isMaskCreated=false;},createModal:function(){if(this._isCreated){this.showModal();if(this.options.showMask){this._showMask();}
return false;}
if(this.options.showMask&&!this._isMaskCreated){this._createMask();}
this.object.container=$('<div class="modal modal-not-visible" />').appendTo(document.body);this.object.header=$('<div class="modal-header" />').appendTo(this.object.container);this.object.body=$('<div class="modal-body" />').appendTo(this.object.container);this.object.footer=$('<div class="modal-footer" />').appendTo(this.object.container);var h3=$('<h3 />').appendTo(this.object.header);var closeButton=$('<div class="modal-close" />').appendTo(this.object.header);closeButton.html('<span class="modal-close-txt">'+Shop.lang.common.close+'</span>').on('click',this,function(e){e.data.hideModal();e.data._hideMask();});this.loadContent();this._isCreated=true;var width=$(window).width();var height=$(window).height();var resize=this.parent.debounce(function(){if(width!==$(window).width()||(height!==$(window).height()&&this.options.positionType!=='absolute')){this._calculatePosition();this.reposition();width=$(window).width();height=$(window).height();}}.bind(this),200);$(window).on('resize',resize);},showModal:function(){this.reposition();this.object.container.removeClass('modal-hidden');setTimeout(function(){this.object.container.removeClass('modal-not-visible').addClass('modal-visible');}.bind(this),400);if(typeof(this.callbacks.onPostShow)==='function'){this.callbacks.onPostShow.call(e.data,arguments);}},hideModal:function(){this.object.container.removeClass('modal-visible').addClass('modal-not-visible');setTimeout(function(){this.object.container.addClass('modal-hidden');}.bind(this),400);if(typeof(this.callbacks.close)==='function'){this.callbacks.close.call(this);}},destroyModal:function(){this.object.mask.remove();this.object.container.remove();this._isCreated=false;},loadContent:function(){if(this.options.header){this.object.header.find('h3').html(this.options.header);}
this.object.body.html(this.options.content);if(this.options.footer){this.object.footer.html(this.options.footer);}else{this.object.footer.remove();}
this._calculatePosition();this.showModal();setTimeout(this.showModal.bind(this),(this._isMaskCreated?200:0));},_calculatePosition:function(){var mPos={};var position=this.options.position.toLowerCase();this.object.container.css('width','auto');this.params.width=this.object.container.outerWidth();this.params.height=this.object.container.outerHeight();this.params.leftPos=this.object.container.offset().left;this.params.topPos=this.object.container.offset().top;this.params.scroll=$(window).scrollTop();this.params.windowWidth=$(window).width();this.params.windowHeight=$(window).height();if(this.params.windowWidth<768){this.params.width=(this.params.windowWidth*90)/100;this.object.container.width(this.params.width);}
if(this.options.positionType==='fixed'){this.object.container.css('position','fixed');if(this.params.height>this.params.windowHeight){this.options.positionType='absolute';this._calculatePosition();return false;}
if(position.indexOf('center')!==-1){mPos.top=(this.params.windowHeight/2)-(this.params.height/2);mPos.left=(this.params.windowWidth/2)-(this.params.width/2);}}else{this.object.container.css('position','absolute');if(this.params.height<this.params.windowHeight){this.options.positionType='fixed';this._calculatePosition();return false;}
if(position.indexOf('center')!==-1){mPos.top=Math.max(this.params.scroll+this.options.offset,0);mPos.left=(this.params.windowWidth/2)-(this.params.width/2);}
if(position.indexOf('top')!==-1){mPos.top=this.params.scroll+this.options.offset;}}
this.object.position=mPos;return mPos;},reposition:function(){if(typeof this.callbacks.onReposition==='function'){this.callbacks.onReposition(this.object.position);}
this.object.container.css(this.object.position);},_createMask:function(){this.object.mask=$('<div class="mask" />').hide();this.object.mask.appendTo(document.body);this._showMask();},_showMask:function(){this.object.mask.show();},_hideMask:function(){this.object.mask.hide();},alert:function(alert,title){if(title){this.options.header=title;}else{this.options.header=Shop.lang.common.alert;}
this.options.content=alert;this.options.footer=$('<a />',{'class':'btn btn-red','text':'OK'}).on('click',this,function(e){e.data.hideModal();e.data._hideMask();});this.createModal();this.object.container.addClass('modal-alert');this.object.header.find('.modal-close').remove();}});Shop.QuickView.include({options:{requestUrl:'product/getproduct/id/',selectors:{button:'.quickview',stockId:'stock_id'},elements:{button:null,modal:null},events:{request:null},cache:{},nettoPrice:false,callbacks:{onPreShow:null,onPostShow:null}},initialize:function(options){this.constructor.setOptions(options);var shopClass=this.parent,options=this.options;options.elements.modal=new Shop.Modal();options.elements.button=$(options.selectors.button);options.nettoPrice=$('body').find('[data-netto]').length?true:false;options.events.request=function(e){this.request(e);}.bind(this);options.elements.button.on('mousedown',options.events.request);},request:function(e){var options=this.options,button=($(e.target).prop("tagName")!=='A')?$(e.target).parent():$(e.target),productId=parseInt(button.data('id'),10),req;if(options.cache[productId]===undefined){req=$.ajax({url:this.parent.url(options.requestUrl+productId),type:"get"});req.done(function(data){this.create(data,button);}.bind(this));req.fail(function(){this.parent.alert('ERROR!');}.bind(this));}else{this.show(productId);}},create:function(data,$button){var options=this.options;var $mainDiv;var $gallery;var $link;var $product;var productHtml;var price='';var priceType;var priceS;var stars;var promo='';var producer='';var basket='';var evaluation='';var delivery='';var starI;var unitCalculation='';var isLoyalty;var $form;var action;var method;options.cache[data.id]={};options.cache[data.id]['content']=document.createDocumentFragment();options.cache[data.id]['title']=data.name;$mainDiv=$('<div/>').addClass('product-innerdesc-wrap');$gallery=$('<div/>').addClass('gallery f-row').appendTo($mainDiv);$link=$('<a/>').appendTo($gallery).attr('href',data.url);$product=$('<div/>').addClass('product-info').appendTo($mainDiv);$button.parents('.product').find('.img-wrap img').clone(true).appendTo($link);$form=$button.prev();stars='';for(starI=0;starI<5;starI++){stars+='<img src="'+this.parent.url('public/images/1px.gif')+'" class="px1 '+((data.rate>starI)?'star1':'star0')+'" />'}
priceType=options.nettoPrice?'net':'gross';priceS='';if(data.price&&data.price[priceType].currency_base_float){if(!data.price[priceType].promo&&data.price[priceType].currency_base!==data.price[priceType].final){priceS='<em class="default-currency">('+data.price[priceType].currency_base+')</em>';}else if(data.price[priceType].promo&&data.price[priceType].currency_promo!==data.price[priceType].final){priceS='<em class="default-currency">('+data.price[priceType].currency_promo+')</em>';}}
if($button.data('price')){price='<div class="price">'+Shop.lang.quickview.price+': '+'<em>'+(data.price[priceType].promo?data.price[priceType].promo:data.price[priceType].base)+'</em>'+(data.price[priceType].promo?'<del>'+data.price[priceType].base+'</del> ':'')+priceS+'</div>';}
if(data.price&&(data.price[priceType].promo||(data.newProduct==true))){promo=$('<ul/>').addClass('tags').html('<ul class="tags">'+(data.price[priceType].promo?'<li class="promo"><span>'+Shop.lang.common.discount+'</span></li>':'')+(data.newProduct==true?'<li class="new"><span>'+Shop.lang.common.newP+'</span></li>':'')+'</ul>');promo.appendTo($gallery);}
if(data.producer){producer=''+'<div class="row manufacturer">'+'<em>'+Shop.lang.quickview.producer+': </em>'+'<a class="brand" href="'+data.producer.url+'" title="'+data.producer.name+'">'+data.producer.name+'</a>'+'</div>';}
if($form.is('.basket')&&!!$form.find('.addtobasket').length){isLoyalty=$form.hasClass('loyaltyexchange');if(isLoyalty){action=$form.attr('action');method='post';}else if(data.basket){action=data.basket.replace('post',data.stockId);method='get';}
basket=''+'<form class="basket" action="'+action+'" method="'+method+'">'+'<fieldset>'+'<button class="addtobasket btn btn-red" type="submit">'+'<img src="'+this.parent.url('public/images/1px.gif')+'" class="px1">'+'<span>'+(isLoyalty?Shop.lang.quickview.exchange:Shop.lang.quickview.addtobasket)+'</span>'+'</button>'+'</fieldset>'+(isLoyalty?'<input type="hidden" value="'+data.stockId+'" name="stock_id"><input name="quantity" value="1" type="hidden">':'')+'</form>';}
if($form.is('.availability-notifier')){basket='<form class="availability-notifier">'+'<fieldset>'+'<button class="availability-notifier-btn quickview-notifier btn btn-red" type="submit">'+'<img src="'+this.parent.url('public/images/1px.gif')+'" class="px1">'+'<span>'+Shop.lang.product.availability_notify_title+'</span>'+'</button>'+'</fieldset>'+'</form>';}
if($button.data('eval')===1){evaluation=''+'<div class="row evaluation">'+'<em>'+Shop.lang.quickview.evaluation+': </em>'+'<span class="votestars">'+stars+'</span>'+'</div>';}
if(data.delivery){delivery=''+'<div class="delivery">'+'<span class="first">'+Shop.lang.quickview.delivery+': </span>'+'<span class="second">'+data.delivery+'</span>'+'</div>';}
if(data.unit_calculation){unitCalculation=''+'<div class="unit-calculation">'+'<span class="default-currency">( 1 '+data.unit_calculation.unit+' = '+data.unit_calculation.price.gross.base+' )</span>'+'</div>';}
productHtml=''+'<div class="availability row">'+'<div class="row">'+'<div class="row availability">'+'<span class="first">'+Shop.lang.quickview.availability+': </span>'+'<span class="second">'+data.availability.name+'</span>'+'</div>'+delivery+'</div>'+'</div>'+'<div class="description f-row resetcss">'+data.short_description+'</div>'+'<div class="productdetails-more row">'+evaluation+producer+price+unitCalculation+basket+'</div>';$product.html(productHtml);$mainDiv.appendTo(options.cache[data.id]['content']);this.show(data.id,$button);},show:function(id,$button){var options=this.options,modal=options.elements.modal;if(typeof options.callbacks.onPreShow==='function'){options.callbacks.onPreShow.call(this,arguments);}
modal.options.header=options.cache[id]['title'];modal.options.content=options.cache[id]['content'].cloneNode(true);modal.options.footer=null;if(modal._isCreated){modal.loadContent();modal.reposition();modal._createMask();}else{modal.createModal();modal.reposition();}
modal.object.body.find('.quickview-notifier').on('click',function(ev){ev.preventDefault();$button.prev().find('.availability-notifier-btn').trigger('click');});if(typeof options.callbacks.onPostShow==='function'){options.callbacks.onPostShow.call(this,arguments);}
modal.reposition();}});Shop.xhrBox.include({options:{xhrSelector:'.box-xhr',productSelector:'#box_productfull',currentProductId:null,limit:30},initialize:function(options){var self;var recentViewProducts=JSON.parse(localStorage.getItem('recentViewProducts'))||[];this.constructor.setOptions(options);if($(this.options.productSelector).length>0){this.options.currentProductId=parseInt($('body').attr('id').replace('shop_product',''));recentViewProducts.unshift(this.options.currentProductId);recentViewProducts=$.unique(recentViewProducts);if(recentViewProducts.length>this.options.limit){recentViewProducts=recentViewProducts.slice(0,this.options.limit);}
try{localStorage.setItem('recentViewProducts',JSON.stringify(recentViewProducts));}catch(e){}}
self=this;$.each($(this.options.xhrSelector),function(){var el=$(this);var req=$.ajax({url:'/box/render',method:'get',async:true,cache:false,headers:{'X-Cookie':'lastProducts-'+Shop.lang.name+'='+recentViewProducts.toString()},data:{engine:$(this).data('engine'),id:$(this).data('id')}});req.done(function(data){el.html(data);el.removeClass('loading');if(!self.parent.lazypicture){self.parent['lazypicture']=new self.parent.classes.LazyPicture();}
self.parent.lazypicture.lazyLoading();});});}});Shop.Gallery.include({options:{selector:'[data-gallery="true"]',activeIndex:null,fullScreen:false,minWidth:100,showMiniGallery:true,showTitle:true,showMobile:false},objects:{mask:null},elements:{container:null,inner:null,imgContainer:null,img:null,title:null,close:null,preview:null,galleryList:null,loader:null},keyEvents:null,imgPromises:[],callbacks:{onInit:null,preOpen:null,postOpen:null,resize:null,onNavPrev:null,onNavNext:null,onPreClose:null,onPostClose:null},initialize:function(options){var self=this;this.constructor.setOptions(options);if(typeof this.callbacks.onInit==='function'){this.callbacks.onInit.call(this);}
if(!this.options.showMobile){this.objects.mask=new Shop.Mask({showOnCreate:false});}
$(this.options.selector).off('click').on('click',function(ev){ev.preventDefault();ev.stopPropagation();if(self.parent.rwd.small===true){self.options.showMiniGallery=false;self.options.showTitle=false;self.options.showMobile=true;}else{self.options.showMiniGallery=true;self.options.showTitle=true;self.options.showMobile=false;}
if(typeof self.callbacks.preOpen==='function'){self.callbacks.preOpen.call(self);}
self.open.call(self,ev,this)
if(typeof self.callbacks.postOpen==='function'){self.callbacks.postOpen.call(self);}});},open:function(ev,el){var self=this;var link=$(el);var key=this.hash(link.attr('href'));var dataName=link.data('galleryList');$(document.body).addClass('shop-gallery-open');if(dataName){dataName=dataName.toString().replace(/\\/g,'\\\\');this.elements.galleryList=$('[data-gallery-list="'+dataName+'"]');}else{this.elements.galleryList=link;}
if(!this.options.showMobile){this.objects.mask.show();}
this.create(link);this.elements.galleryList.each(function(){var keyTemp=self.hash($(this).attr('href'));if(!self.imgPromises[keyTemp]){self.imgPromises[keyTemp]=$.get($(this).attr('href'),function(){$('<img />',{'src':this.url});});}});this.imgPromises[key].promise().done(function(){self.loadImg(this.url,link.attr('title'));});return this;},hash:function(string){return string.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);},create:function(link){var self;var markup;var resize;markup=''+'<div class="shop-gallery-skin">'+'<div class="shop-gallery-title">'+'</div>'+'<div class="shop-gallery-inner">'+'<div class="shop-gallery-img-container">'+'<img class="shop-gallery-img">'+'</div>'+'<span class="shop-gallery-nav shop-gallery-nav-prev"></span>'+'<span class="shop-gallery-nav shop-gallery-nav-next"></span>'+'</div>'+'<span class="shop-gallery-resize expand"></span>'+'<div class="shop-gallery-close">'+Shop.lang.common.close+'</div>'+'</div>';this.elements.container=$('<div />',{'class':'shop-gallery inactive'}).html(markup).appendTo(document.body);this.elements.imgContainer=this.elements.container.find('.shop-gallery-img-container');this.elements.inner=this.elements.container.find('.shop-gallery-skin');this.elements.img=this.elements.imgContainer.find('> img');this.elements.title=this.elements.container.find('.shop-gallery-title');this.elements.resize=this.elements.container.find('.shop-gallery-resize');this.elements.close=this.elements.container.find('.shop-gallery-close');if(!this.options.showTitle){this.elements.title.remove();this.elements.resize.remove();}
this.elements.loader=$('<div />',{'class':'shop-gallery-loader'}).appendTo(document.body);this.elements.nextButton=$('.shop-gallery-nav-next');this.elements.prevButton=$('.shop-gallery-nav-prev');if(this.elements.galleryList.length>1){this.options.activeIndex=this.elements.galleryList.index(link);this.elements.prevButton.off('click').on('click',this.navigatePrev.bind(this));this.elements.nextButton.off('click').on('click',this.navigateNext.bind(this));this.elements.inner.off('swipeleft').on('swipeleft',this.navigateNext.bind(this));this.elements.inner.off('swiperight').on('swiperight',this.navigatePrev.bind(this));this.createMiniGallery();}else{this.elements.prevButton.remove();this.elements.nextButton.remove();}
resize=this.parent.debounce(this.reposition.bind(this,this.elements.container,this.elements.img[0]),200);$(window).on('resize',resize);this.elements.close.on('mouseup',this.close.bind(this));this.elements.resize.on('mousedown',this.fullScreen.bind(this));self=this;this.keyEvents=(function(ev){if(ev.keyCode===27||ev.keyCode===37||ev.keyCode===39||ev.keyCode===122){ev.preventDefault();ev.stopPropagation();}
if(ev.keyCode===27){this.close()}
if(ev.keyCode===37){this.elements.prevButton.trigger('click');}
if(ev.keyCode===39){this.elements.nextButton.trigger('click');}
if(ev.keyCode===122){if(self.elements.container[0].requestFullscreen){self.elements.container[0].requestFullscreen();}else if(self.elements.container[0].msRequestFullscreen){self.elements.container[0].msRequestFullscreen();}else if(self.elements.container[0].mozRequestFullScreen){self.elements.container[0].mozRequestFullScreen();}else if(self.elements.container[0].webkitRequestFullscreen){self.elements.container[0].webkitRequestFullscreen();}}}.bind(this));if(document.addEventListener){document.addEventListener('webkitfullscreenchange',exitHandler,false);document.addEventListener('mozfullscreenchange',exitHandler,false);document.addEventListener('fullscreenchange',exitHandler,false);document.addEventListener('MSFullscreenChange',exitHandler,false);}
$(window).on('keydown',this.keyEvents);function exitHandler(){var $body;$body=$('body');if(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement!==null){$body.toggleClass('fullscreen');}}
return this;},loadImg:function(url,title){var self;this.elements.container.addClass('inactive');this.elements.img.addClass('inactive');self=this;setTimeout(function(){self.elements.img[0].onload=function(){self.reposition(self.elements.container,self.elements.img[0]);}
self.elements.img.attr('src',url);self.elements.loader.remove();self.elements.container.removeClass('inactive');self.elements.img.removeClass('inactive');self.elements.title.text(title);},200);return this;},reposition:function(object,img){fastdom.measure(function(){var $body=$(document.body);var screenWidth=document.body.clientWidth;var screenHeight=window.innerHeight;var imgContainerWidth=img.naturalWidth;var imgContainerHeight=img.naturalHeight;var offset=100;var x,y;var imgRatio=img.naturalWidth/img.naturalHeight;var padBottom=parseInt(this.elements.inner.css('paddingBottom'),10)+20;var $inner;var innerMargins;var innerPaddings;var imgContainerMaxWidth;var mobileHeight;var mobileWidth=767;var containerBounding;$body.removeClass('shop-gallery-open__scrollX shop-gallery-open__scrollY');if(screenWidth>mobileWidth&&this.options.showMobile===true&&!this.elements.container.hasClass('inactive')){this.close();this.options.showMobile=false;return;}else if(screenWidth<=mobileWidth&&this.options.showMobile===false&&!this.elements.container.hasClass('inactive')){this.close();this.options.showMobile=true;return;}
offset+=(this.elements.title.outerHeight()+(this.elements.preview?this.elements.preview.outerHeight(true):0))
if((img.naturalHeight+this.elements.title.outerHeight()+padBottom+(this.elements.preview?this.elements.preview.outerHeight(true):0))>screenHeight){imgContainerWidth=imgRatio*(screenHeight-offset);}
$inner=this.elements.inner.find('.shop-gallery-inner');innerMargins=2*parseInt($inner.css('marginLeft'),10);innerPaddings=2*parseInt(this.elements.imgContainer.css('paddingLeft'),10);imgContainerMaxWidth=imgContainerWidth;if((img.naturalWidth+innerMargins+innerPaddings)>screenWidth){imgContainerMaxWidth=screenWidth-offset;}
if((img.naturalHeight+this.elements.title.outerHeight()+(this.elements.preview?this.elements.preview.outerHeight(true):0))>screenHeight&&img.naturalWidth>screenWidth){if(screenHeight<screenWidth){imgContainerWidth=imgRatio*(screenHeight-offset);}else{imgContainerWidth=screenWidth-offset;}}
if(img.naturalWidth>imgContainerWidth){this.elements.resize.removeClass('none');}else{this.elements.resize.addClass('none');}
imgContainerWidth=Math.min(imgContainerWidth,imgContainerMaxWidth);if(imgContainerWidth<this.options.minWidth){imgContainerWidth=this.options.minWidth;}
if(this.options.fullScreen){this.elements.container.css('position','absolute');imgContainerWidth=img.naturalWidth;}else{this.elements.container.css('position','fixed');}
if(!this.options.showMobile){this.elements.imgContainer.css({width:imgContainerWidth});this.elements.title.css({width:imgContainerWidth});}else{if(imgRatio<1.1){mobileHeight=screenHeight;this.elements.imgContainer.css({width:'auto',height:'auto'});if(img.clientHeight<screenHeight){mobileHeight=img.clientHeight;}
this.elements.imgContainer.css({width:'auto',height:mobileHeight});}else{this.elements.imgContainer.css({width:'auto',height:'auto'});}}
if(this.options.fullScreen){x=Math.max(30,((screenWidth/2)-(object.outerWidth()/2)));y=$(window).scrollTop()+40;imgContainerWidth='auto';}else{x=((screenWidth/2)-(object.outerWidth()/2));y=((screenHeight/2)-(object.outerHeight()/2));if(imgContainerWidth===this.options.minWidth){y=40;}}
if(!this.options.showMobile){object.css({left:Math.floor(x),top:Math.floor(y)});}
if(typeof this.callbacks.resize==='function'){this.callbacks.resize.call(this);}
containerBounding=this.elements.container.get(0).getBoundingClientRect();if(screenHeight<this.elements.container.get(0).offsetHeight+containerBounding.top){$body.addClass('shop-gallery-open__scrollY');if(screenWidth<this.elements.container.get(0).offsetWidth+containerBounding.left){$body.addClass('shop-gallery-open__scrollX');}}}.bind(this));return this;},fullScreen:function(){this.options.fullScreen=!this.options.fullScreen;if(this.options.fullScreen){this.elements.resize.addClass('collapse').removeClass('expand');}else{this.elements.resize.removeClass('collapse').addClass('expand');}
this.reposition(this.elements.container,this.elements.img[0]);},navigatePrev:function(){var previews=$('.shop-gallery-item-preview');var prevIndex=this.options.activeIndex-1;var prevImg;if(prevIndex<0){prevIndex=this.elements.galleryList.length-1;}
prevImg=this.elements.galleryList.eq(prevIndex);previews.removeClass('active');this.elements.preview.find('.shop-gallery-item-preview').eq(prevIndex).addClass('active');this.loadImg(prevImg.attr('href'),prevImg.attr('title'));this.options.activeIndex=prevIndex;this.moveMiniGallery(this.options.activeIndex);if(typeof this.callbacks.onNavPrev==='function'){this.callbacks.onNavPrev.call(this);}},navigateNext:function(){var previews=$('.shop-gallery-item-preview');var nextIndex=this.options.activeIndex+1;var nextImg;if(nextIndex>=this.elements.galleryList.length){nextIndex=0;}
nextImg=this.elements.galleryList.eq(nextIndex);previews.removeClass('active');this.elements.preview.find('.shop-gallery-item-preview').eq(nextIndex).addClass('active');this.loadImg(nextImg.attr('href'),nextImg.attr('title'));this.options.activeIndex=nextIndex;this.moveMiniGallery(this.options.activeIndex);if(typeof this.callbacks.onNavNext==='function'){this.callbacks.onNavNext.call(this);}},createMiniGallery:function(){var self;var $slider;var $container;var sliderWidth;self=this;this.elements.preview=$('<div />',{'class':'shop-gallery-preview'+(this.options.showMiniGallery===false?' none':'')}).appendTo(this.elements.container);$container=$('<div />',{'class':'shop-gallery-container'}).appendTo(this.elements.preview);$slider=$('<aside />',{'class':'shop-gallery-slider'}).appendTo($container);this.elements.galleryList.each(function(){var a;var div;div=$('<div />',{'class':'shop-gallery-item-preview','data-href':$(this).attr('href')}).appendTo($slider);a=$('<img />',{'src':$(this).find('img').attr('src')}).appendTo(div);div.on('click',function(){var previews=$('.shop-gallery-item-preview');self.loadImg($(this).attr('href'),$(this).attr('title'));previews.removeClass('active');div.addClass('active');self.options.activeIndex=self.elements.galleryList.index($(this));self.moveMiniGallery(self.options.activeIndex);}.bind(this));});sliderWidth=this.elements.galleryList.length*($('.shop-gallery-item-preview')[0].offsetWidth+8);$slider.width(sliderWidth);this.elements.preview.find('.shop-gallery-item-preview').eq(this.options.activeIndex).addClass('active');if(sliderWidth>$container.width()){this.createMiniGalleryNav();}},createMiniGalleryNav:function(){var self=this;var $prev;var $next;$prev=$('<span />',{'class':'shop-gallery-mini-prev'}).appendTo(this.elements.preview).on('click',function(){var $slider=$('.shop-gallery-slider');var $container=$('.shop-gallery-container');var visibleContentWidth=$container.width();var sliderPosition=$slider.position().left;var sliderWidth=$slider.width();var slideWidth=$slider.find('.shop-gallery-item-preview:first-child').outerWidth(true);var slideCount=$slider.find('.shop-gallery-item-preview').length;var visibleElements=Math.floor(visibleContentWidth/slideWidth);var moveX=((visibleElements-1)*slideWidth)+sliderPosition;if(moveX>0){moveX=0;}
$slider.css('left',moveX);}.bind(this));$next=$('<span />',{'class':'shop-gallery-mini-next'}).appendTo(this.elements.preview).on('click',function(){var $slider=$('.shop-gallery-slider');var $container=$('.shop-gallery-container');var visibleContentWidth=$container.width();var sliderPosition=$slider.position().left;var sliderWidth=$slider.width();var slideWidth=$slider.find('.shop-gallery-item-preview:first-child').outerWidth(true);var slideCount=$slider.find('.shop-gallery-item-preview').length;var visibleElements=Math.floor(visibleContentWidth/slideWidth);var moveX=((visibleElements-1)*slideWidth)-sliderPosition;if((moveX+visibleContentWidth)>sliderWidth){moveX=(slideCount-visibleElements)*slideWidth;}
$slider.css('left',-moveX);}.bind(this));this.moveMiniGallery(this.options.activeIndex);},moveMiniGallery:function(activeIndex){var $slider=$('.shop-gallery-slider');var $container=$('.shop-gallery-container');var visibleContentWidth=$container.width();var sliderPosition=$slider.position().left;var sliderWidth=$slider.width();var slideWidth=$slider.find('.shop-gallery-item-preview:first-child').outerWidth(true);var slideCount=$slider.find('.shop-gallery-item-preview').length;var visibleElements=Math.floor(visibleContentWidth/slideWidth);var moveX=0;var activeElem=$slider.find('.shop-gallery-item-preview').eq(activeIndex);var activePosition=activeElem.position().left;if(visibleContentWidth>=sliderWidth){return false;}
if((visibleContentWidth+sliderPosition)<(activeElem.outerWidth(true)+activePosition)){moveX=activePosition-activeElem.outerWidth(true);}
if((moveX+visibleContentWidth)>sliderWidth){moveX=(slideCount-visibleElements)*slideWidth;}
$slider.css('left',-moveX);},close:function(){if(typeof this.callbacks.onPreClose==='function'){this.callbacks.onPreClose.call(this);}
this.elements.container.addClass('inactive');$(document.body).removeClass('shop-gallery-open__scrollX shop-gallery-open__scrollY shop-gallery-open');if(!this.options.showMobile){this.objects.mask.destroy();}
this.options.fullScreen=false;setTimeout(function(){this.elements.container.remove();}.bind(this),100);$(window).off('keydown',this.keyEvents);if(typeof this.callbacks.onPostClose==='function'){this.callbacks.onPostClose.call(this);}}});Shop.Mask.include({options:{classes:{main:'mask',inactive:'mask-inactive',hidden:'mask-hidden'},elements:{mask:null},showOnCreate:true,isCreated:false,isShow:false,delay:200},initialize:function(options){var self;this.constructor.setOptions(options);self=this;fastdom.mutate(function(){self.create(self.options.showOnCreate);});},create:function(show){var options=this.options;if(options.isCreated===false){options.elements.mask=$('<div />',{'class':options.classes.main+' '+options.classes.inactive+' '+options.classes.hidden}).appendTo(document.body);options.isCreated=true;}
if(show!==false){this.show();}},show:function(){var options=this.options;if(options.isCreated===false){this.create(true);return this;}
options.elements.mask.removeClass(options.classes.hidden);setTimeout(function(){options.elements.mask.removeClass(options.classes.inactive);options.isShow=true;}.bind(this),options.delay);return this;},hide:function(destroy){var options=this.options;if(options.isCreated===false){return false;}
options.elements.mask.addClass(options.classes.inactive);options.isShow=false;setTimeout(function(){options.elements.mask.addClass(options.classes.hidden);},options.delay)
if(destroy){setTimeout(function(){this.destroy();}.bind(this),options.delay)}
return this;},destroy:function(){var options=this.options;if(options.isShow===true){this.hide(true);return this;}
options.isCreated=false;options.elements.mask.remove();options.elements.mask=null;return this;}});Shop.StockHandler.include({options:{productId:null,stockId:null,selectors:{productId:'#box_productfull input[type="hidden"][name="product_id"]',stockId:'#box_productfull input[type="hidden"][name="stock_id"]',trueStock:'.option_truestock',virtualFile:'div.stocks .option_file input[type=file]',virtualText:'div.stocks .option_text input[type=text]',virtualRadio:'div.stocks .option_radio:not(.option_truestock) input[type=radio]',virtualCheckbox:'div.stocks .option_checkbox input[type=checkbox]',virtualSelect:'div.stocks .option_select:not(.option_truestock) select',virtualColor:'div.stocks .option_color:not(.option_truestock) select',basketform:'#box_productfull form.form-basket fieldset.addtobasket-container',availContainer:'#box_productfull .availability > .row',ddavailability:'#box_productfull .availability .availability',dddelivery:'#box_productfull .availability .delivery .first',dtdelivery:'#box_productfull .availability .delivery .second',price:'#box_productfull .maininfo div.price',nettoprice:'#box_productfull .maininfo div.price-netto',unitPriceContainer:'#box_productfull .unit-price-container.gross',unitPriceNettoContainer:'#box_productfull .unit-price-container.net',exchangecheck:'#box_productfull .form-basket.loyaltyexchange',addtofav:'#box_productfull a.addtofav',loyaltypts:'#box_productfull .loyalty_points .points',availabilitynotifier:'#box_productfull form.form-basket fieldset.availability-notifier-container',availabilitynotifier_btn:'#box_productfull form.form-basket button.availability-notifier-btn',availabilitynotifier_unsub:'#box_productfull form.form-basket fieldset.availability-notifier-unsubscribe-container',availabilitynotifier_btn_unsub:'#box_productfull form.form-basket button.availability-notifier-unsubscribe-btn',productimg:'#box_productfull .productimg .productimg',smallgallery:'#box_productfull .smallgallery a img',unit:'#box_productfull form.form-basket span.unit',code:'#box_productfull .code span',},urls:{getStockOptions:'product/getstockoptions/product/{productId}',getStock:'product/getstock/product/{productId}/imgwidth/{imgwidth}/imgheight/{imgheight}/',getVirtualStock:'product/getstock/stock/{productId}/imgwidth/{imgwidth}/imgheight/{imgheight}/'},stock:{defaulty:null,configuration:null},elements:{trueStock:null}},virt:null,stockOpt:null,downloaded:[],downloadedStock:{},initialize:function(options){var self;var shop;var soptionLength;var soption;this.constructor.setOptions(options);self=this;shop=this.parent;if($(this.options.selectors.stockId).length<=0){return false;}
if($(this.options.selectors.productId).length<=0){$('<input />',{'type':'hidden','value':$('body').attr('id').replace('shop_product',''),'name':'product_id'}).insertAfter($(this.options.selectors.stockId));}
this.options.productId=parseInt($(this.options.selectors.productId).val(),10);this.options.stockId=parseInt($(this.options.selectors.stockId).val(),10);if(Shop.exist(Shop.values.OptionsConfiguration)){this.options.stock.configuration=JSON.parse(Shop.values.OptionsConfiguration);soptionLength=this.options.stock.configuration?this.options.stock.configuration.length:0;}
if(Shop.exist(Shop.values.OptionsDefault)){this.options.stock.defaulty=JSON.parse(shop.base64.decode(Shop.values.OptionsDefault));}
this.options.elements.trueStock=$('.option_truestock');this.colorStockHandler();$(this.options.selectors.trueStock+' option').each(function(){var $parent;var value;$parent=$(this).parent()[0];value=parseInt($(this).val(),10);if(self.options.stock.configuration.indexOf(value)<0){if(!$parent.stockOptions){$parent.stockOptions={};}
$parent.stockOptions[value]=$(this).detach();}});$(this.options.selectors.trueStock+' .radio-wrap, '+this.options.selectors.trueStock+' .radio-wrap + label,'+this.options.selectors.trueStock+' .radio-wrap + label + br').addClass('none');$(this.options.selectors.trueStock+' select').val('');$(this.options.selectors.trueStock+' select, .option_truestock .radio-wrap input').on('change',this,function(ev){var self;var index;self=ev.data;if(this.tagName==='SELECT'){index=$(self.options.selectors.trueStock).index($(this).parent());$(self.options.selectors.trueStock+':gt('+index+')').find('option').each(function(){var $parent;var value;$parent=$(this).parent()[0];value=parseInt($(this).val(),10);if(!$parent.stockOptions){$parent.stockOptions={};}
$parent.stockOptions[value]=$(this).detach();});}else{index=$(self.options.selectors.trueStock).index($(this).parents(self.options.selectors.trueStock));}
$(self.options.selectors.trueStock+':gt('+index+')').find('select').val('');$(self.options.selectors.trueStock+':gt('+index+')').find('input').attr('checked',false);$(self.options.selectors.trueStock+':gt('+index+')').find('.radio-wrap, .radio-wrap + label, .radio-wrap + label + br, .stock-color a').addClass('none');self.getStockOptions(index,true,$(this).val());});for(soption=0;soption<soptionLength;soption++){$(this.options.elements.trueStock[0]).find('[value="'+this.options.stock.configuration[soption]+'"]').parent('.radio-wrap').removeClass('none');$(this.options.elements.trueStock[0]).find('[value="'+this.options.stock.configuration[soption]+'"]').parent('.radio-wrap').next().removeClass('none');$(this.options.elements.trueStock[0]).find('[value="'+this.options.stock.configuration[soption]+'"]').parent('.radio-wrap').next().next().removeClass('none');$(this.options.elements.trueStock[0]).find('[data-value="'+this.options.stock.configuration[soption]+'"]').removeClass('none');}
if(this.options.stock.defaulty&&this.options.stock.defaulty.length>0){this.setDefault();}else{$('<option />',{'text':Shop.lang.common.product_stock_select}).prependTo($(this.options.elements.trueStock[0]).filter('.option_select').find('> select'));}
this.virtualStockHandler();},getStockOptions:function(containerIndex,sync,val){var self;var shop;var selectedOptions;var url;var complete;var key;$(this.options.elements.trueStock[containerIndex+1]).addClass('loading');shop=this.parent;selectedOptions=[];complete=true;if(sync===undefined){sync=true;}
$('.option_truestock select, .option_truestock input').each(function(){var value;value=$(this).val();if(value){if(($(this).is(':visible')&&$(this).is(':checked')&&$(this).is(':radio'))||!$(this).is(':radio')){selectedOptions.push(parseInt(value,10));}}});if(selectedOptions.length!==this.options.elements.trueStock.length){complete=false;}
if(complete){this.getStock(true,JSON.stringify(selectedOptions));return true;}else{url=shop.url(shop.substitute(this.options.urls.getStockOptions,{productId:this.options.productId}));}
self=this;key=parseInt(selectedOptions.join(''),10);if(this.downloaded[containerIndex]&&this.downloaded[containerIndex][key]){self.filter(this.downloaded[containerIndex][key],containerIndex);return true;}
$.ajax({url:url,async:sync,cache:true,method:'post',data:{options:JSON.stringify(selectedOptions)}}).success(function(json){if(!self.downloaded[containerIndex]){self.downloaded[containerIndex]=[];}
self.downloaded[containerIndex][key]=json;self.filter(json,containerIndex);});},filter:function(path,containerIndex){var option;var optionLength;var $stockSelect;var $container;optionLength=path.length;$container=$(this.options.elements.trueStock[containerIndex+1]);$stockSelect=$container.filter('.option_select, .option_color').find('> select');for(option=0;option<optionLength;option++){if($container.hasClass('option_select')||$container.hasClass('option_color')){$stockSelect[0].stockOptions[path[option]].appendTo($stockSelect);}
$container.find('[value="'+path[option]+'"]').parent('.radio-wrap').removeClass('none');$container.find('[value="'+path[option]+'"]').parent('.radio-wrap').next().removeClass('none');$container.find('[value="'+path[option]+'"]').parent('.radio-wrap').next().next().removeClass('none');$container.find('[data-value="'+path[option]+'"]').removeClass('none');}
if($stockSelect[0]&&$stockSelect.find('option').length>1){$($stockSelect[0]).find('option:not([value])').remove();$stockSelect[0].choose=$('<option />',{'text':Shop.lang.common.product_stock_select}).prependTo($stockSelect);$stockSelect.find('option').attr('selected',false);$stockSelect[0].choose.attr('selected',true);}else{$stockSelect.trigger('change');}
$container.removeClass('loading');},setDefault:function(){this.options.stock.defaulty.forEach(function(partStock,index){$(this.options.elements.trueStock[index]).find('select').val(partStock);$(this.options.elements.trueStock[index]).find('input[value="'+partStock+'"]').attr('checked',true);$(this.options.elements.trueStock[index]).find('[data-value="'+partStock+'"]').addClass('current');this.getStockOptions(index,false);}.bind(this));},colorStockHandler:function(){var colorStock;colorStock=$('.stocks .option_color');colorStock.each(function(){var trueStock;var $select;var $options;var $colorContainer;trueStock=$(this).hasClass('option_truestock');$select=$(this).find('> select');$select.addClass('none');$colorContainer=$('<div />',{'class':'stock-color'});$options=$select.find('option').filter(function(){return($(this).val().length>0);}).each(function(){var $a;$a=$('<a />',{'class':$(this).is(':selected')?'current none':'none','title':$(this).text(),'data-value':$(this).val()}).css('background-color',$(this).attr('title')).appendTo($colorContainer);if(!trueStock){$a.removeClass('none');}
$a.on('click',this,function(ev){var $option
$option=$(ev.data);$colorContainer.find('a').removeClass('current');$(this).addClass('current');$select.val($option.val()).trigger('change');});});$colorContainer.appendTo($(this));});},virtualStockHandler:function(){var self;var timeoutId;self=this;$(this.options.selectors.virtualFile).on('change',function(){self.downloadVirtualStock(this,true);});timeoutId=0;$(this.options.selectors.virtualText).on('keydown',function(){clearTimeout(timeoutId);timeoutId=setTimeout(function(){self.downloadVirtualStock(this,true);}.bind(this),100);});$(this.options.selectors.virtualRadio).on('change',function(){self.downloadVirtualStock(this);});$(this.options.selectors.virtualCheckbox).on('change',function(){self.downloadVirtualStock(this,true);});$(this.options.selectors.virtualSelect).on('change',function(){self.downloadVirtualStock(this);});$(this.options.selectors.virtualColor).on('change',function(){self.downloadVirtualStock(this);});},downloadVirtualStock:function(current,noImg){var sId;var virt=[];var currentVirt=[];var shopClass=this.parent;sId=parseInt($(this.options.selectors.stockId).val().replace(/\s/g,''));if(current&&$(current).length>0){currentVirt=$(current).attr('name').replace('option_','')+'='+$(current).val();}
$(this.options.selectors.virtualColor).each(function(){if($(this).val().length>0){virt.push($(this).attr('name').replace('option_','')+'='+$(this).val());}});$(this.options.selectors.virtualFile).each(function(){if($(this).val().length>0){virt.push($(this).attr('name').replace('option_','')+'=1');}});$(this.options.selectors.virtualText).each(function(){if($(this).val().length>0){virt.push($(this).attr('name').replace('option_','')+'=1');}});$(this.options.selectors.virtualRadio).each(function(){if($(this).is(':checked')){virt.push($(this).attr('name').replace('option_','')+'='+$(this).val());}});$(this.options.selectors.virtualCheckbox).each(function(){if($(this).is(':checked')){virt.push($(this).attr('name').replace('option_','')+'='+$(this).val());}});$(this.options.selectors.virtualSelect).each(function(){if($(this).val().length>0){virt.push($(this).attr('name').replace('option_','')+'='+$(this).val());}});if(virt.length>0){virt=virt.join('&');}else{virt='default';}
this.virt=virt;this.getStock(false,null,currentVirt);},getStock:function(isStock,options,currentVirt){var self;var shop;var url;var key;var $addToBasket;self=this;shop=this.parent;if(currentVirt===undefined){currentVirt='';}
if(isStock){url=shop.url(shop.substitute(this.options.urls.getStock,{productId:this.options.productId,imgwidth:Shop.values.OptionImgWidth,imgheight:Shop.values.OptionImgHeight}));}else{url=shop.url(shop.substitute(this.options.urls.getVirtualStock,{productId:this.options.stockId,imgwidth:Shop.values.OptionImgWidth,imgheight:Shop.values.OptionImgHeight}));}
if(this.virt){url+='?virt='+escape(this.virt)+'&currentVirt='+escape(currentVirt);}
if(options===null&&this.stockOpt!==null){options=this.stockOpt;}
if(options){if(this.virt!==null){key=shop.base64.encode(options+escape(this.virt));}else{key=shop.base64.encode(options);}}else{key=shop.base64.encode(escape(this.virt));}
this.stockOpt=options;if(this.downloadedStock[key]){this.stock=this.downloadedStock[key];this.display(isStock);return true;}
$addToBasket=$(self.options.selectors.basketform).find('.addtobasket');$.ajax({url:url,async:true,cache:true,method:'post',data:{options:options},beforeSend:function(){if(isStock){$addToBasket.attr('disabled',true);}},success:function(json){self.stock=json;self.downloadedStock[key]=json;self.display(isStock);if(isStock){$addToBasket.attr('disabled',false);}}});},display:function(isStock){var shop;var price;var atd;var dtd;var dtr;var pdiv;var ndiv;var availabilityNotifier;var availabilityNotifierUnsub;var basketForm;var availableBtn;var availableBtnUnsub;var img;var stockPhotoName;var oid;var counter;var $unitPrice;var $unit;if(this.stock&&this.stock.sid){shop=this.parent;if(this.stock.price){price=parseFloat(this.stock.price.replace(/,/g,'.').replace(/\s/g,'').replace(/&nbsp;/g,''));if($('#mraty-calc').length>0&&window.mBank){if(price>=300){$('#mraty-calc').removeClass('none');mBank(window,document,price);mBank.init();mBank.mRaty.reopenMBank();}else{$('#mraty-calc').addClass('none');mBank.mRaty.closeMBank();}}}
this.options.stockId=this.stock.sid;if(isStock){$(this.options.selectors.stockId).val(this.stock.sid);availableBtn=$(this.options.selectors.availabilitynotifier_btn),availableBtnUnsub=$(this.options.selectors.availabilitynotifier_btn_unsub);if(availableBtn){availableBtn.attr('data-stock-id',this.stock.sid);}
if(availableBtnUnsub){availableBtnUnsub.attr('data-stock-id',this.stock.sid);}}
if(this.stock.photo!==false){img=$(this.options.selectors.productimg)[0];stockPhotoName=this.stock.photo.substr(this.stock.photo.lastIndexOf('/')+1);if(img){$(img).attr('src',this.stock.photo);$(img).data('photo_orig',this.stock.photo_orig);oid=$(img).attr('class').replace(/.*gallery_([0-9]+).*/,'$1');if($(img).hasClass('gallery_'+oid)||$(img).hasClass('gallery_'+oid+'-mini')){$(img).removeClass('gallery_'+oid+'-mini').removeClass('gallery_'+oid).addClass('gallery_'+this.stock.photo_id);}
if($(this.options.selectors.smallgallery).length>0){counter=0;$(this.options.selectors.smallgallery).each(function(self){var alt;alt=$(this).attr('data-img-name').substr($(this).attr('data-img-name').lastIndexOf('/')+1);if(stockPhotoName.indexOf(alt)!=-1){$(this).trigger('mouseenter');$(img).removeClass('non-stock-img');}else{counter++;if(counter==$('.innersmallgallery li').length){$(self.options.selectors.smallgallery).parent().removeClass('current');$(img).addClass('non-stock-img');$(img).off('click').on('click',function(ev){var img;ev.stopPropagation();ev.preventDefault();img=$('.innersmallgallery img[data-img-name="'+$(this).attr('src')+'"]');if(img.length>0){img.trigger('click');}});}}},[this])}else{if($('#box_productgallery').length>0){$(img).addClass('non-stock-img');}}
if(Shop.exist(shop.classes.ImageZoom)){shop.subclass('ImageZoom');shop.imagezoom.reset();}}}
atd=$(this.options.selectors.ddavailability);if(atd.length>0){$(this.options.selectors.ddavailability).empty();if(this.stock.availability_photo!==false){$('<img />').attr('src',this.stock.availability_photo).attr('alt',this.stock.availability).appendTo(atd);}
$('<span />',{'class':'first','text':Shop.lang.quickview.availability+':'}).appendTo($(this.options.selectors.ddavailability));$('<span />',{'class':'second','text':this.stock.availability}).appendTo($(this.options.selectors.ddavailability));}
dtd=$(this.options.selectors.dddelivery);dtr=$(this.options.selectors.dtdelivery);if(this.stock.delivery){if(dtd.length>0&&dtr.length>0){dtr.text(this.stock.delivery);}}
pdiv=$(this.options.selectors.price).last();ndiv=$(this.options.selectors.nettoprice).last();if($(this.options.selectors.exchangecheck).length>0){if(pdiv.length>0){pdiv.find('em').removeClass('color').text(this.stock.loyaltyprice);pdiv.find('del').addClass('none').text('');}
if(ndiv.length>0){ndiv.find('em').addClass('none').text('');}}
else{if(Shop.exist(pdiv)){if(this.stock.special_offer==false){pdiv.find('.main-price').removeClass('color').text(this.stock.price);if(this.stock.currency_price){pdiv.find('.default-currency').text('('+this.stock.currency_price+')')}
pdiv.find('del').addClass('none').text('');}
else{pdiv.find('.main-price').addClass('color').text(this.stock.special_offer);if(this.stock.currency_special_offer){pdiv.find('.default-currency').text('('+this.stock.currency_special_offer+')');}
pdiv.find('del').removeClass('none').text(this.stock.price);}}
if(Shop.exist(ndiv)){if(this.stock.net_special_offer==false){ndiv.find('.main-price').text(this.stock.net_price);if(this.stock.net_currency_price){ndiv.find('.default-currency').text('('+this.stock.net_currency_price+')')}}
else{ndiv.find('.main-price').text(this.stock.net_special_offer);if(this.stock.net_currency_special_offer){ndiv.find('.default-currency').text('('+this.stock.net_currency_special_offer+')');}
ndiv.find('del').text(this.stock.net_price);}}}
if($(this.options.selectors.unitPriceContainer).length>0){$unitPrice=$(this.options.selectors.unitPriceContainer).find('.price');$unit=$(this.options.selectors.unitPriceContainer).find('.unit');if($unitPrice.length>0){if(this.stock.special_offer_unit_calculation){$unitPrice.text(this.stock.special_offer_unit_calculation);}else{$unitPrice.text(this.stock.price_unit_calculation);}}
if($unit.length>0){$unit.text(this.stock.unit_calculation_unit);}}
if($(this.options.selectors.unitPriceNettoContainer).length>0){$unitPrice=$(this.options.selectors.unitPriceNettoContainer).find('.price');$unit=$(this.options.selectors.unitPriceNettoContainer).find('.unit');if($unitPrice.length>0){if(this.stock.net_special_offer_unit_calculation){$unitPrice.text(this.stock.net_special_offer_unit_calculation);}else{$unitPrice.text(this.stock.net_price_unit_calculation);}}
if($unit.length>0){$unit.text(this.stock.unit_calculation_unit);}}
$(this.options.selectors.addtofav).each(function(self){$(this).attr('href',$(this).attr('href').replace(/\/\w+$/,'/')+self.stock.sid);},[this]);$(this.options.selectors.loyaltypts).each(function(self){$(this).text(self.stock.loyaltypts_float);if(self.stock.loyaltypts_float>0){$(this).parent().removeClass('none');}else{$(this).parent().addClass('none');}},[this]);availabilityNotifier=$(this.options.selectors.availabilitynotifier);availabilityNotifierUnsub=$(this.options.selectors.availabilitynotifier_unsub);basketForm=$(this.options.selectors.basketform);if(this.stock.can_buy==true){basketForm.removeClass('none');if(availabilityNotifier){availabilityNotifier.addClass('none');}
if(availabilityNotifierUnsub){availabilityNotifierUnsub.addClass('none');}}else{basketForm.addClass('none');if(this.stock.is_subscribed){if(availabilityNotifierUnsub){availabilityNotifierUnsub.removeClass('none');}
if(availabilityNotifier){availabilityNotifier.addClass('none');}}else{if(availabilityNotifier){availabilityNotifier.removeClass('none');}
if(availabilityNotifierUnsub){availabilityNotifierUnsub.addClass('none');}}}
$(this.options.selectors.unit).text(this.stock.unit);$(this.options.selectors.code).text(this.stock.code);this.parent.fireEvent('stock:change',this.stock);}}});Shop.AddToCart.include({options:{selectors:{form:'.basket form[action], form.basket[action]'},elements:{forms:null},preventSubmit:false},initialize:function(options){var self;this.constructor.setOptions(options);this.options.elements.forms=$(this.options.selectors.form);self=this;this.options.elements.forms.each(function(){$(this).on('submit',function(ev){ev.preventDefault();ev.stopPropagation();self.parent.fireEvent('cart:add',ev,self.options,$(this));if(!self.options.preventSubmit){this.submit();}});});}});Shop.EnhancedEcommerce.include({options:{currency:null,licenseId:null,fmc:false,userType:null,basketType:null,partnerData:null,type:null,themeType:'rwd'},initialize:function(options){var self;var $html;var $remove;var $add;var partnerData;var flag;$html=$('html');this.constructor.setOptions(options);this.options.currency=Shop.values.currency;this.options.fmc=($html.data('fmc')||false)+'';this.options.userType=this.parent.getVisitorId()?'customer':'guest';this.options.basketType=Shop.values.ShippingHidden?'5 steps':'4 steps';if(Shop.values.partnerData){this.options.partnerData=Shop.values.partnerData+'';partnerData=this.options.partnerData.substring(10);this.options.licenseId=partnerData.substring(1);Shop.values.licenseId=partnerData.substring(1);flag=partnerData.charAt(0);if(flag==='3'){this.options.type='trial';}else if(flag==='1'){this.options.type='saas';}else{this.options.type='lifetime';}}
if(window.ga&&Shop.values.clientEE){ga('client.require','ec');ga('client.set','&cu',this.options.currency);}
this.displayProducts();self=this;this.parent.addEvent('cart:add',function(ev,evForm,options,$form){if(!options.preventSubmit){self.addedToCart($form);}});this.parent.addEvent('cart:add:ajax',function(ev,$form){self.addedToCart($form);});$remove=$('.remove-product a, .prodremove');if($remove.length>0){$remove.on('click',function(ev){ev.preventDefault();self.removedFromCart($(this).parents('li, tr'));if(ev.which===2||(ev.which===1&&ev.ctrlKey===true)){window.open($(this).attr('href'),'_blank');}else{window.location=$(this).attr('href');}});}
$add=$('.product a[href], .productlist a[href]');if($add.length>0){$add.on('click',function(ev){ev.preventDefault();self.productClicked($(this).parents('.product'),$(this).parent('li'));if(ev.which===2||(ev.which===1&&ev.ctrlKey===true)){window.open($(this).attr('href'),'_blank');}else{window.location=$(this).attr('href');}});}
if($('#box_productfull').length===1){this.displayProductDetails($('#box_productfull'));}
if(Shop.values.clientEE&&window.ga){ga('client.send','pageview');}
if(Shop.values.partnerEE){shopLayer.push({'shop_id':this.options.licenseId,'license_type':this.options.type,'theme_type':this.options.themeType,'fmc':this.options.fmc,'user_type':this.options.userType,'basket_type':this.options.basketType});}},displayProducts:function(){var self;var products;var clientProducts;var $products;self=this;products=[];clientProducts=[];$products=$('.product');if($products.length>0){$products.each(function(){var container;container=$(this).parents('.box');if(container.length>0){products.push({id:self.options.licenseId+'_'+$(this).data('productId'),name:$(this).find('.productname:not([itemprop])').text().trim(),price:$(this).find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$(this).data('producer')||'',category:$(this).data('category')||'',position:$(this).index(),list:container.attr('id')?self.getMainlistName(container.attr('id').split('_')[1]):'undefined'});clientProducts.push({id:$(this).data('productId'),name:$(this).find('.productname:not([itemprop])').text().trim(),price:$(this).find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$(this).data('producer')||'',category:$(this).data('category')||'',position:$(this).index(),list:container.attr('id')?self.getMainlistName(container.attr('id').split('_')[1]):'undefined'});}});}
if(products.length>0){if(Shop.values.partnerEE){shopLayer.push({'ecommerce':{'currencyCode':this.options.currency,'impressions':products}});}
if(Shop.values.clientEE){if(window.ga){clientProducts.forEach(function(product){ga('client.ec:addImpression',product);});}}}
return products;},displayProductDetails:function($container){var product;var clientProduct;if($container.length>0){product={id:this.options.licenseId+'_'+$container.find('input[name="product_id"]').val(),name:$container.find('h1.name').text().trim(),price:$container.find('.price em.main-price').text().replace(/([^\d,\.])+/g,''),brand:$container.find('.manufacturer a').attr('title')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),position:0};clientProduct={id:$container.find('input[name="product_id"]').val(),name:$container.find('h1.name').text().trim(),price:$container.find('.price em.main-price').text().replace(/([^\d,\.])+/g,''),brand:$container.find('.manufacturer a').attr('title')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),position:0};if(Shop.values.partnerEE){shopLayer.push({'ecommerce':{'currencyCode':this.options.currency,'detail':{'products':[product]}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','detail');}}}},productClicked:function($container,$li){var product;var clientProduct;var list;if($container.length>0){list=$container.parents('.box').attr('id')?$container.parents('.box').attr('id').split('_')[1]:'undefined';product={id:this.options.licenseId+'_'+$container.data('productId'),name:$container.find('.productname').text().trim(),price:$container.find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),position:$container.index()};clientProduct={id:$container.data('productId'),name:$container.find('.productname').text().trim(),price:$container.find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),position:$container.index()};}
if($li.length>0){list=$li.parents('.box').attr('id')?$li.parents('.box').attr('id').split('_')[1]:'undefined';product={id:this.options.licenseId+'_'+$li.data('productId'),name:$li.find('a').text().trim(),price:'',brand:'',category:'',variant:'',position:$li.index()};clientProduct={id:$li.data('productId'),name:$li.find('a').text().trim(),price:'',brand:'',category:'',variant:'',position:$li.index()};}
if($container.length>0||$li.length>0){list=this.getMainlistName(list);if(Shop.values.partnerEE){shopLayer.push({'event':'productClick','ecommerce':{'currencyCode':this.options.currency,'click':{'actionField':{'list':list},'products':[product]}}});}
if(Shop.values.clientEE){if(window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','click',{list:list});ga('client.send','event',list,'click','');}}}},addedToCart:function($form){var product;var clientProduct;var list;var $container;$container=$form.parents('.product');if($container.length>0){list=$container.parents('.box').attr('id')?$container.parents('.box').attr('id').split('_')[1]:'undefined';list=this.getMainlistName(list);product={id:this.options.licenseId+'_'+$container.data('productId'),name:$container.find('.productname').text().trim(),price:$container.find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),quantity:$container.find('input[name="quantity"]').val()||1,position:$container.index()};clientProduct={id:$container.data('productId'),name:$container.find('.productname').text().trim(),price:$container.find('.price em:first').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),quantity:$container.find('input[name="quantity"]').val()||1,position:$container.index()};}else{list='detailview';$container=$form.parents('#box_productfull');if($container.length>0){product={id:this.options.licenseId+'_'+$container.find('input[name="product_id"]').val(),name:$container.find('h1.name').text().trim(),price:$container.find('.price em.main-price').text().replace(/([^\d,\.])+/g,''),brand:$container.find('.manufacturer a').attr('title')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),quantity:$container.find('input[name="quantity"]').val()||1,position:0};clientProduct={id:$container.find('input[name="product_id"]').val(),name:$container.find('h1.name').text().trim(),price:$container.find('.price em.main-price').text().replace(/([^\d,\.])+/g,''),brand:$container.find('.manufacturer a').attr('title')||'',category:$container.data('category')||'',variant:this.getStockInfo($container),quantity:$container.find('input[name="quantity"]').val()||1,position:0};}}
if($form.find('input[name="stock_id"]').length>0&&$form.find('input[name="required"]').length<=0){if(Shop.values.partnerEE){shopLayer.push({'event':'addToCart','ecommerce':{'currencyCode':this.options.currency,'add':{'products':[product],'actionField':{'list':list}}}});}
if(Shop.values.clientEE&&window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','add',{'list':list});ga('client.send','event','UX','click','add to cart');}}},removedFromCart:function($container){var product;var clientProduct;if($container.length>0){product={id:this.options.licenseId+'_'+$container.data('productId'),name:$container.find('.product-name').length>0?$container.find('.product-name').text().trim():$container.find('.name a').text().trim(),price:$container.find('.product-price').length>0?$container.find('.product-price').text().replace(/([^\d,\.])+/g,''):$container.find('.price').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:$container.find('.product-variant').length>0?$container.find('.product-variant').text():$container.find('.variant').text(),quantity:$container.find('.product-amount').length>0?$container.find('.product-amount').text():$container.find('.quantity input').val(),position:$container.index()};clientProduct={id:$container.data('productId'),name:$container.find('.product-name').length>0?$container.find('.product-name').text().trim():$container.find('.name a').text().trim(),price:$container.find('.product-price').length>0?$container.find('.product-price').text().replace(/([^\d,\.])+/g,''):$container.find('.price').text().replace(/([^\d,\.])+/g,''),brand:$container.data('producer')||'',category:$container.data('category')||'',variant:$container.find('.product-variant').length>0?$container.find('.product-variant').text():$container.find('.variant').text(),quantity:$container.find('.product-amount').length>0?$container.find('.product-amount').text():$container.find('.quantity input').val(),position:$container.index()};if(Shop.values.partnerEE){shopLayer.push({'event':'removeFromCart','ecommerce':{'currencyCode':this.options.currency,'remove':{'products':[product]}}});}
if(Shop.values.clientEE&&window.ga){ga('client.ec:addProduct',clientProduct);ga('client.ec:setAction','remove');ga('client.send','event','UX','click','remove form cart');}}},getStockInfo:function($container){var stockInfo;stockInfo='';if($container.length>0&&$container.find('.stocks').length>0){$container.find('.stocks > .f-row').each(function(){var label;var input;var value;label=$(this).find('div.label label').text().replace('* ','');input=$(this).find('div.stock-options input, div.stock-options select');switch(input.attr('type')){case'file':{value=input[0].files[0]?input[0].files[0].name:'';break;}
case'text':{value=input.val();break;}
case'radio':{value=input.filter(':checked').parent().next().text();break;}
case'checkbox':{if(input.is(':checked')){value=input.next().attr('data-yes');}
break;}
case undefined:{value=input.find(':selected').text();break;}};if(value&&value!==Shop.lang.common.product_stock_select){stockInfo+=label+value+'; ';}});return stockInfo.trim().replace(/(\r\n|\n|\r)/gm,'').replace(/\s+/g,' ');}else{return'';}},getMainlistName:function(listName){var className;if(listName==='mainproducts'){className=$('body').attr('class');if(className.indexOf('shop_index')>=0){return'homepage';}
if(className.indexOf('shop_product_producer')>=0){return'vendor';}
if(className.indexOf('shop_product_new')>=0){return'new products';}
if(className.indexOf('shop_product_promo')>=0){return'on sale';}
if(className.indexOf('shop_product_list')>=0&&$('body').attr('id').indexOf('shop_category0')>=0){return'search';}
if(className.indexOf('shop_product_list')>=0){return'category';}
return'homepage';}
return listName;}});Shop.Recaptcha.include({options:{active:false},initialize:function(options){this.constructor.setOptions(options);var self=this;var d=document;var s='script';var id='g-recaptcha';if(this.options.active===false){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//www.google.com/recaptcha/api.js?onload=recaptchaRender&render=explicit";js.async=true;js.defer=true;fjs.parentNode.insertBefore(js,fjs);this.options.active=true;}}});Shop.Blankshield.include({options:{},initialize:function(options){var self;this.constructor.setOptions(options);self=this;$('[target="_blank"]').on('click',function(ev){var $self;var href;var targetName;var usedModifier;$self=$(this);href=$self.attr('href');if(!href){return;}
usedModifier=(ev.ctrlKey||ev.shiftKey||ev.metaKey);targetName=$self.attr('target');if(!usedModifier&&(!targetName||self.safeTarget(targetName))){return;}
self.open(href);ev.preventDefault()});},open:function(strUrl,strWindowName,strWindowFeatures){var child;if(this.safeTarget(strWindowName)){return open.apply(window,arguments);}else{return this.iframeOpen(strUrl,strWindowName,strWindowFeatures)}},iframeOpen:function(url,strWindowName,strWindowFeatures){var iframe;var iframeDoc;var script;var openArgs;var newWin;iframe=document.createElement('iframe');iframe.style.display='none';document.body.appendChild(iframe);iframeDoc=iframe.contentDocument||iframe.contentWindow.document;openArgs='"'+url+'"';if(strWindowName){openArgs+=', "'+strWindowName+'"';}
if(strWindowFeatures){openArgs+=', "'+strWindowFeatures+'"';}
script=iframeDoc.createElement('script');script.type='text/javascript';script.text='window.parent = null; window.top = null;'+'window.frameElement = null; var child = window.open('+openArgs+');'+'child.opener = null';iframeDoc.body.appendChild(script);newWin=iframe.contentWindow.child;document.body.removeChild(iframe);return newWin;},safeTarget:function(target){return target==='_top'||target==='_self'||target==='_parent';}});Shop.BundleStockHandler.include({options:{BundleStockContainer:null,$el:null,$view:null,id:null,},elements:{$stockContainers:null,$stockControls:null,$stockDropdowns:null},productId:null,stockId:null,product:null,isSelected:null,stockOptions:{},downloadedStocks:null,downloadedPath:null,events:{changeStock:null},initialize:function(options){var self;var $el;var $stockChangeControl;var $stockClickControl;if(!!options){this.options=options;}
this.virtOptions={};$el=this.options.$el;this.productId=$el.data('stocks');this.elements={};this.elements.$stockContainers=$el.find('.option-stock');this.elements.$stockControls=this.elements.$stockContainers.find('[data-variant-id]');this.elements.$stockDropdowns=$el.find('.stock-label');self=this;$stockChangeControl=this.elements.$stockControls.filter('input, select');$stockClickControl=this.elements.$stockControls.filter('[data-stock-option]');this.events.changeStock=(function(){var $self;var variantId;var variantValue;var $selectedValue;var stockInArray;var stockObj;var stockObjData;$self=$(this);variantValue=$self.val()||$self.data('variantValue');variantValue=variantValue;variantId=parseInt($self.data('variantId'),10);self.virtOptions[variantId]=variantValue;if($self.is(':checkbox')&&this.checked!==true){self.virtOptions[variantId]=null;}
$selectedValue=$self.parents('.stock-control').find('.stock-label .selected-value');if($self.is(':text')){if(variantValue){$selectedValue.text(variantValue);$self.parents('.stock-control').addClass('stock-control-selected');}else{$selectedValue.text('');$self.parents('.stock-control').removeClass('stock-control-selected');}}else if($self.is(':checkbox')){if(this.checked===true){$self.parents('.stock-control').addClass('stock-control-selected stock-control-selected-checkbox');}else{$self.parents('.stock-control').removeClass('stock-control-selected stock-control-selected-checkbox');}}else if($self.val()||$self.is('span')){$self.parents('.stock-control').addClass('stock-control-selected');$self.parent().children().removeClass('product-option_color_selected').removeClass('color-selected');$selectedValue.text($self.data('variantName'));if($self.data('color')){$selectedValue.css('border-color',$self.data('color')).addClass('color-selected');}
$self.addClass('product-option_color_selected');}
if(self.stockId){self.getStock(Object.assign({},self.stockOptions,self.virtOptions),variantId).then(this.updateStock.bind(self),function(){});}else{self.getStock(self.virtOptions,variantId).then(self.updateStock.bind(self),function(){});}
self.isSelected=self.isValid();stockInArray=self.parent.findObjInArrayByParamValue(self.options.BundleStockContainer.bundle.selectedProducts,'id',self.options.id);if(self.isSelected){stockObj={id:self.options.id,stockId:self.stockId||self.options.stockId,stock_id:self.stockId||self.options.stockId,options:self.virtOptions,quantity:parseFloat(self.options.$view.find('[data-quantity]').text())};if(stockInArray.id!==stockObj.id){self.inArrayPosition=self.options.BundleStockContainer.bundle.selectedProducts.length;self.options.BundleStockContainer.bundle.selectedProducts.push(stockObj);}else{var ind=self.options.BundleStockContainer.bundle.selectedProducts.indexOf(stockInArray);self.options.BundleStockContainer.bundle.selectedProducts[ind]=stockObj;}
$self.parents('.product').addClass('bundle-product-selected');}else{if(stockInArray){self.options.BundleStockContainer.bundle.selectedProducts.splice(self.options.BundleStockContainer.bundle.selectedProducts.indexOf(stockInArray),1);}
$self.parents('.product').removeClass('bundle-product-selected');}
self.options.BundleStockContainer.changeBuyAction();});this.elements.$stockDropdowns.on('click',function(){var me;var $parent;me=this;$parent=$(this).parent();if($parent.hasClass('stock-control-open')){$parent.removeClass('stock-control-open');}else{$parent.addClass('stock-control-open');}
self.elements.$stockDropdowns.filter(function(){if(this!==me){$(this).parent().removeClass('stock-control-open');}})});$stockChangeControl.on('change',this.events.changeStock);$stockClickControl.on('click',this.events.changeStock);this.isSelected=this.isValid();if(this.isSelected){var stockObjData={id:this.options.id,stockId:this.stockId||this.options.stockId,stock_id:this.stockId||this.options.stockId,quantity:parseFloat(this.options.$view.find('[data-quantity]').text())}
if(!!Object.keys(this.virtOptions).length){stockObjData.options=this.virtOptions;}
this.options.BundleStockContainer.bundle.selectedProducts.push(stockObjData);}else{$el.parents('.product').removeClass('bundle-product-selected');}},getStock:function(options,modVoption){var self;var url;var stock;var stringifiedOptions;url='webapi/front/{lang}/products/{currency}/{id}/stock/options/{stockOptions}/';stringifiedOptions=JSON.stringify(options);if(modVoption){url+='mod-voption/{modVoption}';}
url=this.parent.url(url);url=this.parent.substitute(url,{lang:Shop.lang.name,currency:Shop.values.currency,id:this.productId,stockOptions:stringifiedOptions,modVoption:modVoption});self=this;return $.ajax({url:url,method:'get'});},updateStock:function(stock,statusText){if(statusText==='success'){var $img;var src;var newSrc;this.elements.$stockDropdowns.parent().removeClass('stock-control-open');$img=this.options.$view.find('a.details img');src=$img.attr('src');newSrc=src.replace(/(productGfx_)(.+)(\.jpg)/g,'$1'+stock.image+'$3');$img.attr('src',newSrc);}},isValid:function(){var self;var selectedVariants;var requiredVariants;var $required;$required=this.elements.$stockContainers.filter('.option-required');if(!$required.length){return true;}
requiredVariants=[];$required.each(function(){$(this).find('input, select, [data-stock-option]').each(function(){var variantId;variantId=$(this).data('variantId')+'';if(requiredVariants.indexOf(variantId)<0){requiredVariants.push(variantId);}})});self=this;selectedVariants=Object.keys(this.virtOptions);return requiredVariants.every(function(el){return selectedVariants.indexOf(el)>=0&&self.virtOptions[el];});}});Shop.BundleStockHandlerContainer.include({instances:[],elements:{$container:null,$children:null},productsInBundle:null,composing:{enabled:false,limit:null},bundle:{selectedProducts:[]},events:{preventBuy:null},initialize:function(options){var self;self=this;this.elements.$container=$('#box_bundle');this.productsInBundle=this.elements.$container.data('bundleItems');this.composing.enabled=this.elements.$container.data('composing')=='1';this.composing.limit=parseFloat(this.elements.$container.data('composingLimit'));if(!$('.stock-control').length){$('.bundle-with-variants').remove();}
this.elements.$container.find('.product').each(function(index){var $el;var $stockBundle;var hasVariants;var stockId;var bundleId;$el=$(this);hasVariants=$el.data('hasVariants')=='1';stockId=parseInt($el.data('stockId'),10);bundleId=parseInt($el.data('bundleId'),10);$stockBundle=$el.find('.stocks-bundle');if($el.find('.stock-control').length<=2){$stockBundle.addClass('stocks-bundle-full');}
if(hasVariants){if(!$stockBundle[0].BundleStockHandler){$stockBundle[0].BundleStockHandler=new Shop.BundleStockHandler({BundleStockContainer:self,id:bundleId,$el:$stockBundle,$view:$stockBundle.parents('.product'),stockId:stockId,stock_id:stockId});self.instances.push($stockBundle[0].BundleStockHandler);}}else{self.bundle.selectedProducts.push({id:bundleId,stockId:stockId,stock_id:stockId,quantity:parseFloat($el.find('[data-quantity]').text())});}
$el.find('input[type="text"], input[type="checkbox"]:checked, input[type="radio"]:selected, select, input[type="file"]').trigger('change');});this.events.preventBuy=function(ev){ev.preventDefault();Shop.scrollto($('#box_bundle'));};this.events.buy=function(ev){$('.form-basket .addtobasket').trigger('click');};window.addEventListener('scroll',this.toggleFixedCart.bind(this));this.toggleFixedCart();this.changeBuyAction();var uploaded=0;if(Shop.useroptions.ajaxbasket.mode!==2&&!!$('.stocks-bundle .option-file').length){this.parent.addEvent('cart:add',function(ev,evForm,options,$form){var validate;var filesToUpload=$('input[type="file"].product-option_color_selected').length;options.preventSubmit=true;if(filesToUpload===0){$form[0].submit();return true;}
$('.stocks-bundle .option-file').each(function(){var fileUploader
var $el=$(this);var $file=$(this).find('input[type="file"]');var fileId=parseInt($file.attr('name').split('_').pop(),10);var variantId=parseInt($file.data('variantId'),10);if(!this.FileUploader){fileUploader=this.FileUploader=new Shop.FileUploader({$file:$file[0],type:'none',url:'/basket/ajaxupload'});}else{fileUploader=this.FileUploader;}
validate=fileUploader.validate();fileUploader.xhr.onreadystatechange=function(ev){var response;if(fileUploader.xhr.readyState===4){response=JSON.parse(fileUploader.xhr.response);if(response&&response.success===true){var data;uploaded+=1;self.bundle.selectedProducts.some(function(obj){if(obj.id===fileId){data=obj;return true;}});data.options[variantId]={'fileHash':response.fileHash};self.elements.$children.val(self.parent.base64.encode(JSON.stringify(self.bundle.selectedProducts)));if(uploaded===filesToUpload){$form[0].submit()}}}}
if(validate.valid){this.FileUploader.send();}else{$el.find('.error-file-upload').remove();validate.errorMessages.forEach(function(error){$('<span />',{'class':'error error-file-upload','text':error}).appendTo($el);});validate.errorMessages.length=0;}});});}else if(!!$('.stocks-bundle .option-file').length){this.parent.addEvent('cart:preadd:ajax',function(ev,form){form.prevent=true;var filesToUpload=$('input[type="file"].product-option_color_selected').length;if(filesToUpload===0){shoper.ajaxbasket.sendAjax(form);return true;}
$('.stocks-bundle .option-file').each(function(){var fileUploader;var $control=$(this);var $file=$(this).find('input[type="file"]');var fileId=parseInt($file.attr('name').split('_').pop(),10);var variantId=parseInt($file.data('variantId'),10);var settings={$file:$file[0],type:'none',url:'/basket/ajaxupload'}
if(!this.FileUploader){this.FileUploader=fileUploader=new Shop.FileUploader(settings);}else{fileUploader=this.FileUploader;}
if(fileUploader.xhr){fileUploader.xhr.onreadystatechange=function(ev){var response;if(fileUploader.xhr.readyState===4){response=JSON.parse(fileUploader.xhr.response);if(response&&response.success===true){var data;uploaded+=1;self.bundle.selectedProducts.some(function(obj){if(obj.id===fileId){data=obj;return true;}});data.options[variantId]={'fileHash':response.fileHash};self.elements.$children.val(self.parent.base64.encode(JSON.stringify(self.bundle.selectedProducts)));if(uploaded===filesToUpload){uploaded=0;shoper.ajaxbasket.sendAjax(form);}}}}}
this.FileUploader.send();});});}
if(!$('[data-has-variants="1"]').length||!this.elements.$container.find('.option-stock').length){$('.bundle-fixed-cart').find('.bundle-selected').remove();}},isBuyable:function(){return((this.composing.enabled===true&&this.composing.limit===this.bundle.selectedProducts.length)||(this.productsInBundle===this.bundle.selectedProducts.length));},changeBuyAction:function(){var $buyButton;var $buyFixedButton;var $fixedCart;$fixedCart=$('.bundle-fixed-cart');$buyButton=$('.form-basket .addtobasket');$buyFixedButton=$('#fixed-cart-add');if(!this.isBuyable()){$buyButton.addClass('btn-inactive').text(Shop.lang.bundle.choose);$buyFixedButton.addClass('btn-inactive').text(Shop.lang.bundle.choose);$buyButton.off('click',this.events.preventBuy).on('click',this.events.preventBuy);$buyFixedButton.off('click',this.events.preventBuy).off('click',this.events.buy).on('click',this.events.buy);$fixedCart.removeClass('bundle-fixed-cart-buyable');if(this.elements.$children){this.elements.$children.remove();this.elements.$children=null;}}else{$buyButton.removeClass('btn-inactive').text(Shop.lang.basket.add_to_cart);$buyFixedButton.removeClass('btn-inactive').text(Shop.lang.basket.add_to_cart);$buyButton.off('click',this.events.preventBuy);$buyFixedButton.off('click',this.events.preventBuy).off('click',this.events.buy).on('click',this.events.buy);$fixedCart.addClass('bundle-fixed-cart-buyable');this.elements.$children=$('<input />',{'type':'hidden','value':this.parent.base64.encode(JSON.stringify(this.bundle.selectedProducts)),'name':'children'}).appendTo($('.form-basket .quantity_wrap'));}
$('.bundle-selected-item').text(this.bundle.selectedProducts.length);},toggleFixedCart:function(){var $fixedCart;var $addToBasket;$addToBasket=$('.button_wrap .addtobasket');$fixedCart=$('.bundle-fixed-cart');if(!this.parent.isInViewport($addToBasket)&&window.scrollY>$addToBasket.offset().top){$fixedCart.removeClass('none');}else{$fixedCart.addClass('none');}}});Shop.GoogleMapsAPI.include({options:{$loaderContainer:null,googleMapsApikey:null},elements:{$loader:null},EARTH_RADIUS:6378137,isApiReady:false,isLoaderOpen:false,initialize:function(options){this.constructor.setOptions(options);if(this.options.$loaderContainer&&!!this.options.$loaderContainer.length){this.addLoader();}
this.embedGoogleMapApi();},addLoader:function(){this.elements.$loader=$('<div />',{'class':'pp-pick-up-points__map-loader',}).append($('<div />',{'class':'pp-pick-up-points__map-loader-content','text':navigator.geolocation?Shop.lang.pickupsPoints.searching_location:Shop.lang.common.loading}));this.isLoaderOpen=true;this.elements.$loader.appendTo(this.options.$loaderContainer);},removeLoader:function(){if(this.elements.$loader){this.elements.$loader.remove();this.isLoaderOpen=false;}},getDistance:function(p1,p2){var dLat;var dLong;var a;dLat=this.rad(p2.lat()-p1.lat());dLong=this.rad(p2.lng()-p1.lng());a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(this.rad(p1.lat()))*Math.cos(this.rad(p2.lat()))*Math.sin(dLong/2)*Math.sin(dLong/2);return this.EARTH_RADIUS*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));},apiReady:function(){this.parent.fireEvent('GoogleMapsAPI:ready');this.isApiReady=true;},embedGoogleMapApi:function(){var doc;var script;var id;var fjs;var js;doc=document;script='script';id='g-mapclusterer';fjs=doc.getElementsByTagName(script)[0];if(doc.getElementById(id)){return;}
js=doc.createElement(script);js.id=id;js.src='https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js';js.async=false;js.defer=false;fjs.parentNode.insertBefore(js,fjs);id='g-map';fjs=doc.getElementsByTagName(script)[0];if(doc.getElementById(id)){return;}
js=doc.createElement(script);js.id=id;js.src='https://maps.googleapis.com/maps/api/js?key='+this.options.googleMapsApikey+'&libraries=places&callback=googleMapsAPICallback&language='+Shop.lang.name.slice(0,2);js.async=false;js.defer=false;fjs.parentNode.insertBefore(js,fjs);},rad:function(x){return x*Math.PI/180;}});Shop.MapPoints.include({options:{$map:null,$search:null,$searchContainer:null,$mapPointsList:null,initPosition:{lat:52.15696,lng:21.07715},initZoomLevel:14,zoomLevelOnFocus:17,searchZoomLevel:15,markerClusterer:true,infoWindow:true,mapSettings:null,autocomplete:{settings:null,position:'TOP_CENTER'},callbacks:{updateView:null,mapReady:null,mapZoomChange:null,mapDragEnd:null,autocomplete:null,search:null,mapError:null,mapResize:null}},gmap:null,geocoder:null,autocomplete:null,markerClusterer:null,markersObject:{},infoWindow:null,initialize:function(options){this.constructor.setOptions(options);this.initObjects();},initObjects:function(){var self=this;new Promise(function(resolve,reject){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(pos){resolve({lat:pos.coords.latitude,lng:pos.coords.longitude});},function(){resolve(self.options.initPosition);},{timeout:5000});}else{resolve(self.options.initPosition);}}).then(function(position){try{if(self.renderMap(position)){self.geocoder=new google.maps.Geocoder();if(self.options.$searchContainer.length>0){self.autocomplete=new google.maps.places.Autocomplete(self.options.$search.get(0));self.autocomplete.setComponentRestrictions(self.options.autocomplete.settings);self.gmap.controls[google.maps.ControlPosition[self.options.autocomplete.position]].push(self.options.$searchContainer.get(0));}
self.bindEvents();$(window).trigger('resize');}}catch(err){console.error(err);if(typeof self.options.callbacks.mapError==='function'){self.options.callbacks.mapError(self,err);}}}).catch(function(err){console.error(err);});},renderMap:function(position){var mapSettings;var mapsListener;mapSettings={center:position,zoom:this.options.initZoomLevel,gestureHandling:'greedy',mapTypeControl:false,streetViewControl:false,fullscreenControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]};mapSettings=this.options.mapSettings||mapSettings;return this.gmap=new google.maps.Map(this.options.$map.get(0),mapSettings);},renderPoints:function(pickUpPoints,pointClickCallback){var self=this;var newMarkers=[];var marker;pickUpPoints.forEach(function(point){if(!point.id){throw new Error('Point object must contain unique id.');}
marker=new google.maps.Marker({position:new google.maps.LatLng(point.location.latitude,point.location.longitude),map:self.gmap,icon:point.icon||null,data:point.data||null,infoWindowContent:point.infoWindowContent||'',id:point.id});if(self.options.infoWindow){if(!self.infoWindow){self.infoWindow=new google.maps.InfoWindow({content:''});if(typeof self.options.callbacks.infoWindowClose==='function'){self.infoWindow.addListener('closeclick',function(){self.options.callbacks.infoWindowClose(self);});}}}
marker.addListener('click',function(){var mapWidth;if(typeof pointClickCallback==='function'){pointClickCallback(self,point);}
if(self.options.infoWindow){mapWidth=self.options.$map.outerWidth();self.infoWindow.setContent(this.infoWindowContent);self.infoWindow.setPosition(this.position);self.infoWindow.setOptions({maxWidth:mapWidth>500?mapWidth*0.5:mapWidth*0.7});self.infoWindow.open(self.gmap);if($(document.body).outerWidth()<=800){self.gmap.setCenter(new google.maps.LatLng(this.position.lat()+0.0015,this.position.lng()))}else{self.gmap.setCenter(this.position);}
if(self.gmap.getZoom()<self.options.zoomLevelOnFocus){self.gmap.setZoom(self.options.zoomLevelOnFocus);}
if(typeof self.options.callbacks.infoWindowOpen==='function'){self.options.callbacks.infoWindowOpen(self,point);}}});newMarkers.push(marker);self.markersObject[point.id]=marker;});if(this.options.markerClusterer===true){if(!this.markerClusterer){this.markerClusterer=new MarkerClusterer(this.gmap,newMarkers,{imagePath:'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});}else{this.markerClusterer.addMarkers(newMarkers);}}},renderPointsList:function(pickUpPoints,pointListClickCallback,showOnClick){var self=this;var $li;var $pointList=$(document.createDocumentFragment());var $mapPointsList=this.options.$mapPointsList.empty();pickUpPoints.forEach(function(point){if(!point.id){throw new Error('Point object must contain unique id.');}
point.data.id=point.id;$li=$('<li />');$li.get(0).data=point.data||{};point.$pointDOM.appendTo($li.appendTo($pointList));});$mapPointsList.append($pointList);$mapPointsList.find('> li').on('click',function(evt){if(showOnClick){google.maps.event.trigger(self.markersObject[this.data.id],'click');}else{if(typeof self.options.callbacks.updateView==='function'){self.options.callbacks.updateView(self,{lat:this.data.latitude,lng:this.data.longitude});}}
pointListClickCallback(self,evt);});},bindEvents:function(){var self=this;var cbMapReady=this.options.callbacks.mapReady;var cbMapZoomChange=this.options.callbacks.mapZoomChange;var cbMapDragEnd=this.options.callbacks.mapDragEnd;var cbAutocomplete=this.options.callbacks.autocomplete;var cbSearch=this.options.callbacks.search;var cbMapResize=this.options.callbacks.mapResize;var readyEvent=this.gmap.addListener('tilesloaded',function(){if(typeof cbMapReady==='function'){cbMapReady(self);}
if(Shop.googleMapsApi.options.$loaderContainer&&Shop.googleMapsApi.isLoaderOpen){Shop.googleMapsApi.removeLoader();}
google.maps.event.removeListener(readyEvent);self.parent.fireEvent('MapPoints.map:ready');});this.gmap.addListener('zoom_changed',function(){if(typeof cbMapZoomChange==='function'){cbMapZoomChange(self);}
self.parent.fireEvent('MapPoints.map:zoomChange');});this.gmap.addListener('dragend',function(){if(typeof cbMapDragEnd==='function'){cbMapDragEnd(self);}
self.parent.fireEvent('MapPoints.map:dragEnd');});this.autocomplete.addListener('place_changed',function(){if(typeof cbAutocomplete==='function'){cbAutocomplete(self,this);}
self.parent.fireEvent('MapPoints.autocomplete:placeChanged');});this.options.$search.on('keypress',function(evt){var value;if(evt.key==='Enter'){evt.preventDefault();evt.stopPropagation();value=$(this).val();if(!!value.length){self.geocoder.geocode({'address':value,'region':'pl'},function(results,status){if(status=='OK'){if(typeof cbSearch==='function'){cbSearch(self,results);}
self.parent.fireEvent('MapPoints.search');}else{self.parent.fireEvent('message.notification');}});}}});this.options.$search.on('click',function(){$(this).val('');});$(window).on('resize',this.parent.debounce(function(evt){if(typeof cbMapResize==='function'){cbMapResize(self,evt);}
if(self.infoWindow){self.infoWindow.close();}}.bind(this),200));},closeInfoWindow:function(){if(this.infoWindow){this.infoWindow.close();}}});Shop.PocztaPolska.include({options:{maxMapWidth:500,pointsListMinWidth:200,googleMapsApikey:null},elements:{modal:null,modalsWidth:null,$container:null,$map:null,$mapPointsList:null,$mapContainer:null,$pickUpsListContainer:null},icons:{'POCZTA':null,'ORLEN':null,'AUTOMAT_POCZTOWY':null,'RUCH':null,'ZABKA':null,'FRESHMARKET':null},classes:{ppOutpostItemActive:'outpost_active',ppOutpostOnlyPrepayment:'outpost__only-prepayment'},objects:{mapPoints:null,gmap:null},callbacks:{close:null,selected:null},pointTypes:['POCZTA','ORLEN','AUTOMAT_POCZTOWY','RUCH','ZABKA','FRESHMARKET'],renderedPoints:{},allPointsLoaded:false,isGoogleMapsInit:false,currentPoint:null,initialize:function(options){this.constructor.setOptions(options);},initGoogleMaps:function(onlyPrepayment){var self=this;this.initModal();this.isGoogleMapsInit=true;this.icons.POCZTA=this.parent.url('public/images/poczta.png');this.icons.ORLEN=this.parent.url('public/images/orlen.png');this.icons.RUCH=this.parent.url('public/images/ruch.png');this.icons.ZABKA=this.parent.url('public/images/zabka.png');this.icons.AUTOMAT_POCZTOWY=this.parent.url('public/images/automat_pocztowy.png');this.icons.FRESHMARKET=this.parent.url('public/images/freshmarket.png');Shop.googleMapsApi=new Shop.GoogleMapsAPI({$loaderContainer:this.elements.modal.object.body,googleMapsApikey:this.options.googleMapsApikey});if(Shop.googleMapsApi.isApiReady){this.show(onlyPrepayment);}else{this.parent.addEvent('GoogleMapsAPI:ready',function(){self.show(onlyPrepayment);});}},initModal:function(){var self=this;var $searchContainer;this.elements.modal=new Shop.Modal({header:Shop.lang.pickupsPoints.find_point});this.elements.modal.callbacks.close=function(){if(typeof self.callbacks.close==='function'){self.callbacks.close(self);}};this.elements.modal.callbacks.onReposition=function(){var offsetTop;if(!!$('.pp-pick-up-points__modal').length){offsetTop=$('.pp-pick-up-points__modal').offset().top;if(offsetTop<$(window).scrollTop()){window.scroll(0,offsetTop+10);}}}
this.elements.$container=$('<div />',{'class':'pp-pick-up-points'});this.elements.$mapContainer=$('<div />',{'class':'pp-pick-up-points__map-container'}).appendTo(this.elements.$container);$searchContainer=$('<div />',{'class':'pp-pick-up-points__search-container'}).appendTo(this.elements.$mapContainer);$searchContainer.append($('<input />',{'type':'search','id':'pp-pick-up-search','class':'pp-pick-up-points__search','placeholder':Shop.lang.pickupsPoints.enter_address}));this.elements.$map=$('<div />',{'id':'pp-pick-up-map','class':'pp-pick-up-points__map'}).appendTo(this.elements.$mapContainer);this.elements.$pickUpsListContainer=$('<div />',{'class':'pp-pick-up-points__outposts-container'}).appendTo(this.elements.$container);$('<h5 />',{'class':'pp-pick-up-points__header','text':Shop.lang.pickupsPoints.select_pickup_point_list+':'}).appendTo(this.elements.$pickUpsListContainer);this.elements.$mapPointsList=$('<ul />',{'id':'pp-pick-up-outposts','class':'pp-pick-up-points__outposts'}).appendTo(this.elements.$pickUpsListContainer);this.elements.modal.options.content=this.elements.$container;this.elements.modal.createModal();this.elements.modal.object.container.addClass('pp-pick-up-points__modal');},updatePlaceView:function(location){var self=this;var gmap=this.objects.gmap;this.updateMapAndView(gmap,location,this.options.searchZoomLevel);this.getPointsByLatLang(gmap.getCenter().lat(),gmap.getCenter().lng()).then(function(pickUpPoints,statusText){if(!!pickUpPoints.length&&statusText==='success'){self.renderPoints(gmap,pickUpPoints);self.renderRelativeParcelsList(gmap,pickUpPoints);}}).fail(function(){self.handleApiError();});},show:function(onlyPrepayment){if(!this.isGoogleMapsInit){this.initGoogleMaps(onlyPrepayment);return;}
this.elements.modal.createModal();if(!this.objects.mapPoints){this.elements.modalsWidth=this.elements.modal.params.width;this.objects.mapPoints=new Shop.MapPoints({$map:this.elements.$map,$searchContainer:$('.pp-pick-up-points__search-container'),$search:$('#pp-pick-up-search'),$mapPointsList:this.elements.$mapPointsList,autocomplete:{settings:{'country':['pl']},position:'TOP_CENTER'},callbacks:{updateView:(function(caller,centerLoc){this.getPointsByLatLang(self.objects.gmap.getCenter().lat(),self.objects.gmap.getCenter().lng()).then(function(pickUpPoints,statusText){if(!!pickUpPoints.length&&statusText==='success'){self.updateMapAndView(self.objects.gmap,centerLoc);self.renderPoints(self.objects.gmap,pickUpPoints);self.renderRelativeParcelsList(self.objects.gmap,pickUpPoints);self.parent.fireEvent('PickUpPoints:view-fully-updated');}}).fail(function(){self.handleApiError();});}).bind(this),mapReady:(function(caller){var self=this;var gmap=caller.gmap;this.objects.gmap=gmap;this.getPointsByLatLang(gmap.getCenter().lat(),gmap.getCenter().lng()).then(function(pickUpPoints,statusText){if(!!pickUpPoints.length&&statusText==='success'){self.renderPoints(gmap,pickUpPoints);self.renderRelativeParcelsList(gmap,pickUpPoints);self.parent.fireEvent('PickUpPoints:view-fully-updated');}}).fail(function(){self.handleApiError();});}).bind(this),mapZoomChange:(function(caller){var self=this;var gmap=caller.gmap;this.getPointsByLatLang(gmap.getCenter().lat(),gmap.getCenter().lng()).then(function(pickUpPoints,statusText){if(!!pickUpPoints.length&&statusText==='success'){self.renderPoints(gmap,pickUpPoints);}}).fail(function(){self.handleApiError();});}).bind(this),mapDragEnd:(function(caller){var self=this;var gmap=caller.gmap;this.getPointsByLatLang(gmap.getCenter().lat(),gmap.getCenter().lng()).then(function(pickUpPoints,statusText){if(!!pickUpPoints.length&&statusText==='success'){self.renderPoints(gmap,pickUpPoints);self.renderRelativeParcelsList(gmap,pickUpPoints);}}).fail(function(){self.handleApiError();});}).bind(this),autocomplete:(function(caller,autocomplete){var place=autocomplete.getPlace();if(!place.geometry){return false;}
this.updatePlaceView(place.geometry.location);}).bind(this),search:(function(caller,results){this.updatePlaceView(results[0].geometry.location);}).bind(this),mapError:(function(){this.handleErrorMap();}).bind(this),mapResize:(function(){var additionalWidth=this.elements.$mapPointsList?this.options.pointsListMinWidth:0;this.elements.$map.width(this.elements.$container.outerWidth()<=this.options.maxMapWidth+additionalWidth?this.elements.$container.outerWidth():this.options.maxMapWidth);}).bind(this),infoWindowOpen:(function(caller,point){var self=this;var $btnSelect=$('[data-pp-info-window-select]');if(!!$btnSelect.length&&!$btnSelect.bindSelectPointEvt){$btnSelect.bindSelectPointEvt=true;$btnSelect.on('click',this.selectPickupPoint.bind(this,point.data));}}).bind(this),infoWindowClose:this.unsetPointListItemActive.bind(this)}});}
if(this.elements.$container.hasClass('pp-pick-up-points_only-prepayment')){this.elements.$container.removeClass('pp-pick-up-points_only-prepayment');}
if(onlyPrepayment){this.elements.$container.addClass('pp-pick-up-points_only-prepayment');}},selectPickupPoint:function(point){this.elements.modal.hideModal();this.elements.modal._hideMask();if(typeof this.callbacks.selected==='function'){this.callbacks.selected(this,point);}},handleErrorMap:function(){this.elements.$pickUpsListContainer.remove();if(Shop.googleMapsApi.isLoaderOpen){Shop.googleMapsApi.removeLoader();}
this.elements.modal._calculatePosition();this.elements.modal.reposition();},generateInfoWindowMarkup:function(data){var $infoStreet;var $openHoursList;var $footer;var $container=$('<div />',{'class':(data.type!=='POCZTA'?'pp-pick-up-points__info-window_only-prepayment':'')});if(data.type!=='POCZTA'){$('<span />',{'class':'pp-pick-up-points__prepayment-info','text':Shop.lang.pickupsPoints.only_prepayment}).appendTo($container);}
$('<h4 />',{'class':'pp-pick-up-points__infoHeader','text':data.name}).appendTo($container);$infoStreet=$('<div />',{'class':'pp-pick-up-points__infoStreet'}).appendTo($container);$infoStreet.append($('<span />',{'text':data.street})).appendTo($container);$openHoursList=$('<ul />',{'class':'pp-pick-up-points__infoOpenHours'}).appendTo($container);data.details.forEach(function(item){$openHoursList.append($('<li />',{'class':'pp-pick-up-points__infoHour','text':item}));});$footer=$('<div />',{'class':'pp-pick-up-points__footer'}).appendTo($container);$footer.append($('<button />',{'class':'btn btn-red pp-pick-up-points__infoBtnSelect','data-pp-info-window-select':'','text':Shop.lang.common.select}));return $container.prop('outerHTML')},selectPoint:function(){},renderPoints:function(gmap,pickUpPoints){var self=this;var data=this;var description;var pointsToRender=[];if(!!pickUpPoints.length){pickUpPoints.forEach(function(pickUpPoint){if(!self.renderedPoints[pickUpPoint.pni]){description=pickUpPoint.description.split('#');data={location:{latitude:pickUpPoint.latitude,longitude:pickUpPoint.longitude},data:pickUpPoint,icon:self.icons[pickUpPoint.type],infoWindowContent:(self.generateInfoWindowMarkup({pni:pickUpPoint.pni,name:pickUpPoint.name,street:pickUpPoint.street,details:pickUpPoint.description.split('#'),windowClick:self.selectPoint.bind(self),type:pickUpPoint.type})),id:pickUpPoint.pni};self.renderedPoints[pickUpPoint.pni]=data;pointsToRender.push(data);}});self.objects.mapPoints.renderPoints(pointsToRender,this.setPointListItemActive.bind(self));}
return this;},renderAllPoints:function(){var self=this;var points;if(!this.allPointsLoaded){this.getPoints().then(function(pickUpPoints,statusText){if(pickUpPoints&&statusText==='success'){pickUpPoints=JSON.parse(pickUpPoints);points=[];if(!!pickUpPoints.length){pickUpPoints.forEach(function(pickUpPoint){points.push({location:{latitude:pickUpPoint.y,longitude:pickUpPoint.x},data:pickUpPoint,id:pickUpPoint.p});});this.objects.mapPoints.renderPoints(points,this.pointClick);this.allPointsLoaded=true;}}}).fail(function(){self.handleApiError();});}
return this;},handleApiError:function(){this.elements.$pickUpsListContainer.empty();this.elements.$pickUpsListContainer.append('<div />',{'text':Shop.lang.pickupsPoints.api_error});},setPointsListScroll:function($activeElement){var $parent=$activeElement.parents('.pp-pick-up-points__outposts-container');$parent.scrollTop($activeElement.get(0).offsetTop-$activeElement.parents('.pp-pick-up-points__outposts')[0].offsetTop);},unsetPointListItemActive:function(){var $currentPoint;var activeClass=this.classes.ppOutpostItemActive;$currentPoint=$('.'+activeClass);this.currentPoint=null;if(!!$currentPoint.length){$currentPoint.removeClass(activeClass);}},setPointListItemActive:function(context,point){this.setActiveListItem($('[data-point-pni="'+point.id+'"]'));},setActiveListItem:function($pointToSet){var activeClass=this.classes.ppOutpostItemActive;var $previous=$('.'+activeClass);if(!!$previous.length){$previous.removeClass(activeClass);}
if(!!$pointToSet.length){$pointToSet.addClass(activeClass);this.currentPoint=$pointToSet.attr('data-point-pni');;this.setPointsListScroll($pointToSet);}},handleListItemClick:function($li){this.setActiveListItem($li.children('.pp-pick-up-points__outposts-item'))},parcelListItemClick:function(context,evt){if(evt.target.nodeName==='BUTTON'&&evt.target.classList.contains('pp-pick-up-points__infoBtnSelect')){this.selectPickupPoint(evt.currentTarget.data);}else{this.handleListItemClick($(evt.currentTarget));}},generateParcelsListItem:function(data){var $container;var $details;var $header;var $figure;$container=$('<div />');$figure=$('<figure />',{'class':'outpost__figure'}).append($('<img />',{'src':data.icon}));$header=$('<div />',{'class':'outpost__header'}).append($figure);if(data.type!=='POCZTA'){$header.append($('<span />',{'text':Shop.lang.pickupsPoints.only_prepayment,'class':'outpost__prepayment-info'}));}
$header.append($('<h5 />',{'class':'outpost__name','text':data.name}));$header.append($('<h6 />',{'class':'outpost__street','text':data.street}));$header.appendTo($container);$details=$('<ul />',{'class':'outpost__description'}).appendTo($container);data.details.forEach(function(item){$('<li />',{'class':'outpost__description-item','text':item}).appendTo($details);});$('<button />',{'class':'btn btn-red pp-pick-up-points__infoBtnSelect','text':Shop.lang.common.select}).appendTo($container);return $container;},renderRelativeParcelsList:function(gmap,pickUpPoints){var self=this;var modalCurrentWidth;var pickUpPointsList=[];var details;var $activeListItem;pickUpPoints.forEach(function(pickUpPoint){details=pickUpPoint.description.split('#');details.pop();pickUpPointsList.push({$pointDOM:$('<div />',{'class':'pp-pick-up-points__outposts-item'+(self.currentPoint===pickUpPoint.pni?' '+self.classes.ppOutpostItemActive:'')+(pickUpPoint.type!=='POCZTA'?' '+self.classes.ppOutpostOnlyPrepayment:''),'data-point-pni':pickUpPoint.pni,'html':self.generateParcelsListItem({name:pickUpPoint.name,street:pickUpPoint.street,details:details,icon:self.icons[pickUpPoint.type],type:pickUpPoint.type})}),data:pickUpPoint,id:pickUpPoint.pni});});this.objects.mapPoints.renderPointsList(pickUpPointsList,this.parcelListItemClick.bind(this),true);modalCurrentWidth=this.elements.modal.object.container.outerWidth();if(modalCurrentWidth!==this.elements.modalsWidth){this.elements.modalsWidth=modalCurrentWidth;this.elements.modal._calculatePosition();this.elements.modal.reposition();}
$activeListItem=$('.'+this.classes.ppOutpostItemActive);if(!!$activeListItem.length){this.setPointsListScroll($activeListItem);}
return this;},getPoints:function(){var self=this;return $.ajax({url:'https://mapa.ecommerce.poczta-polska.pl/widget/pickuppoints/json/getAll',method:'post',contentType:'application/json',data:JSON.stringify({type:self.pointTypes})});},getPointsByLatLang:function(lat,lng){var self=this;return $.ajax({url:'https://mapa.ecommerce.poczta-polska.pl/widget/pickuppoints/json/getByLatLng/',method:'post',contentType:'application/json',data:JSON.stringify({type:self.pointTypes,latitude:lat,longitude:lng})});},updateMapAndView:function(gmap,centerLoc,zoomLevel){if(!gmap){return false;}
if(centerLoc){gmap.setCenter(centerLoc);}
if(zoomLevel){gmap.setZoom(zoomLevel);}},clearMapView:function(){if(this.objects.mapPoints){this.objects.mapPoints.closeInfoWindow();if(!!$('.'+this.classes.ppOutpostItemActive).length){$('.'+this.classes.ppOutpostItemActive).removeClass(this.classes.ppOutpostItemActive);}
if(this.options.$searchContainer){this.options.$searchContainer.val('');}}}});Shop.FuzzySearch.include({options:{$list:null,alwaysVisible:false,placeholder:null},callbacks:{select:null},classes:{hideListContainer:'fuzzy-search__list-container__hide',listItemSelected:'fuzzy-search__list-item__selected'},elements:{$dropdown:null,$search:null,$list:null,$listContainer:null,$searchIcon:null},listOptions:[],optionsValueDOM:{},$selectedItem:null,isOpen:false,$detachedList:null,initialize:function(options){var $detachedList;this.constructor.setOptions(options);if(!!this.options.$list.children('[data-fuzzy-search-value]').length){this.createDOM().insertAfter(this.options.$list);$detachedList=this.options.$list.detach();this.bindListValueAndDOM($detachedList);this.bindEvents();if(this.options.alwaysVisible){this.filter(true);}}},bindEvents:function(){var self=this;this.elements.$search.on('input',this.filter.bind(this));$('body').on('click',function(){if(self.isOpen){if(!self.options.alwaysVisible){self.elements.$search.val('');self.showSearchIcon();self.close();}}});this.elements.$dropdown.on('click',function(evt){evt.stopPropagation();this.$selectedItem=null;self.elements.$search.val($(this).attr(''));self.filter(true);self.hideSearchIcon();});this.elements.$dropdown.on('keydown',function(evt){switch(evt.key){case'ArrowUp':self.moveListItem('up');break;case'ArrowDown':self.moveListItem('down');break;case'Enter':if(self.$selectedItem){self.selectListItem(self.$selectedItem);}
evt.preventDefault();break;case'Escape':if(!self.options.alwaysVisible){self.close();}
break;}});this.elements.$list.on('click','li',function(evt){var $currentTarget=$(evt.currentTarget);evt.stopPropagation();evt.preventDefault();self.selectListItem($currentTarget);if(typeof self.callbacks.select==="function"){self.callbacks.select(self,evt);}});},moveListItem:function(direction){var $currItem;var $nextItem;var $prevItem;if(!this.$selectedItem){$currItem=this.elements.$list.find('li').first();$currItem.addClass(this.classes.listItemSelected);this.$selectedItem=$currItem;return;}
if(direction==='down'){$nextItem=this.$selectedItem.next('li');if(!!$nextItem.length){this.$selectedItem.removeClass(this.classes.listItemSelected);$nextItem.addClass(this.classes.listItemSelected);this.$selectedItem=$nextItem;}}else{$prevItem=this.$selectedItem.prev('li');if(!!$prevItem.length){this.$selectedItem.removeClass(this.classes.listItemSelected);$prevItem.addClass(this.classes.listItemSelected);this.$selectedItem=$prevItem;}}},selectListItem:function($currentTarget){$currentTarget.addClass(this.classes.listItemSelected);this.$selectedItem=$currentTarget;this.elements.$search.val($currentTarget.attr('data-fuzzy-search-value'));if(!this.options.alwaysVisible){this.close();}},open:function(){this.isOpen=true;this.elements.$listContainer.removeClass(this.classes.hideListContainer);},close:function(){this.$selectedItem=null;this.isOpen=false;this.elements.$listContainer.addClass(this.classes.hideListContainer);},hideSearchIcon:function(){this.elements.$searchIcon.addClass('none');},showSearchIcon:function(){this.elements.$searchIcon.removeClass('none');},bindListValueAndDOM:function($detachedList){var self=this;var $listItem;var value;$detachedList.children().each(function(index,listItem){$listItem=$(listItem);value=$listItem.attr('data-fuzzy-search-value');Object.defineProperty(self.optionsValueDOM,value,{value:$listItem.html(),writable:true});self.listOptions.push(value);});},createDOM:function(){var self=this;var $searchWrapper;this.elements.$dropdown=$('<div />',{'class':'fuzzy-search '});$searchWrapper=$('<div />',{'class':'fuzzy-search__search-wrapper'}).appendTo(this.elements.$dropdown);this.elements.$searchIcon=$('<a />',{'class':'fa fa-search fuzzy-search__search-icon',}).append($('<img />',{'src':self.parent.url('public/images/1px.gif'),'class':'1px'}));this.elements.$searchIcon.appendTo($searchWrapper);this.elements.$search=$('<input />',{'class':'fuzzy-search__search','type':'search','placeholder':self.options.placeholder||Shop.lang.common.search}).appendTo($searchWrapper);this.elements.$listContainer=$('<div />',{'class':'fuzzy-search__list-container fuzzy-search__list-container__hide'}).appendTo(this.elements.$dropdown);this.elements.$list=$('<ul />',{'class':'fuzzy-search__list'}).appendTo(this.elements.$listContainer);if(this.options.alwaysVisible){this.elements.$listContainer.removeClass('fuzzy-search__list-container__hide');this.elements.$dropdown.addClass('fuzzy-search_always-visible');}
return this.elements.$dropdown;},filter:function(resetFilter){var options=this.listOptions.slice(0);var searchValue=this.elements.$search.val();var exactSearch;var firstSearch;var fuzzySearch;var filteredList;var toSplice;if(searchValue!==''&&resetFilter!==true){exactSearch=new RegExp('^'+searchValue+'$','i');firstSearch=new RegExp('^'+searchValue,'i');fuzzySearch=new RegExp('(^'+searchValue+')|('+searchValue+')|('+searchValue.replace(/\s+/g,'').split('').join('.*')+')','i');filteredList=[];toSplice=[];options.forEach(function(option,index){if(option.match(exactSearch)){filteredList.push(option);toSplice.push(index);}});while(toSplice.length){options.splice(toSplice.pop(),1);}
toSplice=[];options.forEach(function(option,index){if(option.match(firstSearch)){filteredList.push(option);toSplice.push(index);}});while(toSplice.length){options.splice(toSplice.pop(),1);}
options.forEach(function(option,index){if(option.match(fuzzySearch)){filteredList.push(option);}});this.appendOptions(filteredList,{filtering:true});}else{this.appendOptions(options,{filtering:true});}},appendOptions:function(options){var self=this;var $listFragment=$(document.createDocumentFragment());if(!this.options.alwaysVisible){this.open();}
this.elements.$list.empty();this.$selectedItem=null;options.forEach(function(listItem){$listFragment.append($('<li />',{'class':'fuzzy-search__list-item','data-fuzzy-search-value':listItem}).append(self.optionsValueDOM[listItem]));});this.elements.$list.append($listFragment);}});Shop.PocztaPolskaBasketHandler.include({options:{paymentsMethods:null},classes:{disablePaymentMethod:'pp-point-payment-disabled',deliveryDetailsPreview:'pp-point-delivery-details',deliveryDetailsHeader:'pp-point-delivery-details__header',deliveryDetailsContent:'pp-point-delivery-details__content',paymentMethodOnlyPrepayment:'pp-point-only-prepayment__label',paymentMethodOnlyPrepaymentDesc:'pp-point-only-prepayment__label-desc',paymentMethodPointAlert:'pp-point-payment-support-alert'},submitFromDeliver:false,submitFromPayment:true,selectedPointType:null,cashOnDeliveryIds:[],ppPointDeliverySnapshot:{},ppPointsDeliveriesId:[],initialize:function(){},initPickUpPoints:function(callback){var self=this;if(!Shop.pocztapolska){Shop.pocztapolska=new Shop.PocztaPolska({googleMapsApikey:$('#pp-pick-up-points-apikey').val()});Shop.pocztapolska.callbacks.selected=callback;}
this.ppPointsDeliveriesId=JSON.parse($('#pp-pick-up-points-delveries').val());this.ppPointsDeliveriesId.forEach(function(el){self.ppPointDeliverySnapshot['shipping_'+el]={selectedPayment:null,selectedPoint:null};});},getBasketInfo:function(){var self=this;var url='/webapi/front/{lang}/basket/{currency}/';return $.ajax({method:'GET',url:self.parent.substitute(url,{lang:Shop.lang.name,currency:Shop.values.currency}),error:function(err){console.error(err);}})},filterPrepaymentPayments:function(payments){var filteredPayments=[];payments.forEach(function(payment){if(payment.name==='cod'){filteredPayments.push(payment);}});return filteredPayments;},ppPointBlockPayment:function(evt){evt.preventDefault();evt.stopPropagation();},ppTogglePayment:function($payment,disable){if(disable){$payment.addClass(this.classes.disablePaymentMethod);$payment.get(0).addEventListener('click',this.ppPointBlockPayment,true);}else{$payment.get(0).removeEventListener('click',this.ppPointBlockPayment,true);$payment.removeClass(this.classes.disablePaymentMethod);}},createPpBasicMarkup:function(){var self=this;var $ppPickupPoints=$('[data-pp-pick-up-points]');var $btnPickupPoint=$('<a />',{'class':'btn btn-red btn-right','id':'btn-pp-pick-up-points','text':Shop.lang.pickupsPoints.select_pickup_point}).appendTo($ppPickupPoints);var $deliveryPreview=$('<div />',{'class':this.classes.deliveryDetailsPreview}).insertBefore($ppPickupPoints);$('<h4 />',{'class':this.classes.deliveryDetailsHeader,'text':Shop.lang.pickupsPoints.selected_pickup_point_header}).appendTo($deliveryPreview);$('<div />',{'class':this.classes.deliveryDetailsContent}).appendTo($deliveryPreview);$btnPickupPoint.on('click',function(evt){var selectedDelivery;var selectedDeliveryDetails;var onlyPrepayment=false;var $pointListItem;if(!!self.cashOnDeliveryIds.length){self.cashOnDeliveryIds.forEach(function(cashOnDeliveryId){if($('#payment_'+cashOnDeliveryId+'').is(':checked')){onlyPrepayment=true;}});}
Shop.pocztapolska.show(onlyPrepayment);selectedDelivery=parseInt($('[name="shipping_id"]').filter(':checked').attr('value'),10);selectedDeliveryDetails=self.ppPointDeliverySnapshot['shipping_'+selectedDelivery].selectedPoint;if(selectedDeliveryDetails){$pointListItem=$('[data-point-pni="'+selectedDeliveryDetails.id+'"]');if(!!$pointListItem.length){$pointListItem.trigger('click');}else{self.parent.addEvent('PickUpPoints:view-fully-updated',function(){$pointListItem=$('[data-point-pni="'+selectedDeliveryDetails.id+'"]');if(!!$pointListItem.length){$pointListItem.trigger('click');}
self.parent.removeEvent('PickUpPoints:view-fully-updated');});}}else{Shop.pocztapolska.clearMapView();}});},updatePpPointObjectPoint:function(point,payment){var $selectedDelivery=$('[name="shipping_id"]').filter(':checked');var selectedDeliveryValue=parseInt($selectedDelivery.attr('value'),10);if(this.ppPointsDeliveriesId.indexOf(selectedDeliveryValue)!==-1){if(point){this.ppPointDeliverySnapshot[$selectedDelivery.attr('id')].selectedPoint=point;}
if(payment){this.ppPointDeliverySnapshot[$selectedDelivery.attr('id')].selectedPayment=payment;}
localStorage.setItem('pickUpPointsSnapshot',this.parent.base64.encode(JSON.stringify(this.ppPointDeliverySnapshot)));}},createPpPointDeliveryMarkup:function(point,shortVersion){var $markup=$(document.createDocumentFragment());if(point.name){$('<p />',{'text':point.name}).appendTo($markup);}
if(point.street){$('<p />',{'text':point.street}).appendTo($markup);}
if(point.zipCode||point.city){$('<p />',{'text':(point.zipCode||'')+' '+(point.city||'')}).appendTo($markup);}
if(point.description&&!shortVersion){point.description.split('#').forEach(function(item){$('<p />',{'text':item}).appendTo($markup);});}
return $markup;},updateSelectedPpPointMarkup:function(point){var $pointDeliveryPreview;var $deliveryDetailsHeader;var $payment;var self=this;var $btnPickupPoint=$('#btn-pp-pick-up-points');$pointDeliveryPreview=$('.'+this.classes.deliveryDetailsContent);$deliveryDetailsHeader=$('.'+this.classes.deliveryDetailsHeader).addClass('none');$pointDeliveryPreview.empty();if(!!$('.'+this.classes.disablePaymentMethod).length){this.cashOnDeliveryIds.forEach(function(cashOnDeliveryId){$payment=$('#payment_'+cashOnDeliveryId).parents('.payment');self.ppTogglePayment($payment);});}
if(point){this.createPpPointDeliveryMarkup(point,true);$pointDeliveryPreview.append(this.createPpPointDeliveryMarkup(point,true));$deliveryDetailsHeader.removeClass('none');$btnPickupPoint.removeClass('btn btn-red btn-right').addClass('btn-change');$btnPickupPoint.text('('+Shop.lang.pickupsPoints.change_pickup_point+')');if(!!this.cashOnDeliveryIds.length&&point.type!=='POCZTA'){this.cashOnDeliveryIds.forEach(function(cashOnDeliveryId){$payment=$('#payment_'+cashOnDeliveryId).parents('.payment');self.ppTogglePayment($payment,true);});}}else{$btnPickupPoint.addClass('btn btn-red btn-right').removeClass('btn-change');$btnPickupPoint.text(Shop.lang.pickupsPoints.select_pickup_point);}},updateSelectedPpPointDeliveryMethod:function(paymentId){$('#payment_'+paymentId).prop('checked',true);},setPpHiddenPoint:function(point,$form){var inputName='pp-point-id';var $oldInput=$('[name="'+inputName+'"]');if($oldInput.length>0){$oldInput.remove();}
$form.append($('<input />',{'type':'hidden','name':inputName,'id':inputName,'value':this.parent.base64.encode(JSON.stringify(point))}));},pickUpPointsStepDelivery:function($form){var self=this;var selectedDeliverySnapshot;var ppPointSessionValue;var $radioDelivery=$('[name="shipping_id"]');var $radioPayment=$('[name="payment_id"]');var $btnSubmit=$form.find('button[name="button2"]');var $btnPickupPoint;var $ppPointSession;this.initPickUpPoints(function(context,point){self.updateSelectedPpPointMarkup(point);self.updatePpPointObjectPoint(point,parseInt($('[name="payment_id"]').filter(':checked').attr('value'),10));self.setPpHiddenPoint(point,$form);localStorage.setItem('pickUpPointsSnapshot',self.parent.base64.encode(JSON.stringify(self.ppPointDeliverySnapshot)));if(self.submitFromDeliver&&self.submitFromPayment){$btnSubmit.trigger('click');}});this.getBasketInfo().then(function(response){var point;var $prepayment;var payments;payments=self.filterPrepaymentPayments(response.payments);if(!!payments.length){payments.forEach(function(payment){self.cashOnDeliveryIds.push(payment.payment_id);$prepayment=$('#payment_'+payment.payment_id);if(!!$prepayment.length){$prepayment.parents('.name').append($('<span />',{'text':Shop.lang.pickupsPoints.only_prepayment,'class':self.classes.paymentMethodOnlyPrepayment}));$prepayment.parents('.name').append($('<span />',{'text':Shop.lang.pickupsPoints.only_prepayment_label,'class':self.classes.paymentMethodOnlyPrepayment+' '+self.classes.paymentMethodOnlyPrepaymentDesc}));}});}
self.createPpBasicMarkup();$ppPointSession=$('#pp-pick-up-point');if(!!$ppPointSession.length){ppPointSessionValue=JSON.parse(self.parent.base64.decode($ppPointSession.val()));}
if(!!ppPointSessionValue){self.updatePpPointObjectPoint(ppPointSessionValue,parseInt($('[name="payment_id"]').filter(':checked').attr('value'),10));self.setPpHiddenPoint(ppPointSessionValue,$form);}else if(localStorage.getItem('pickUpPointsSnapshot')){self.ppPointDeliverySnapshot=jQuery.extend(self.ppPointDeliverySnapshot,JSON.parse(self.parent.base64.decode(localStorage.getItem('pickUpPointsSnapshot'))));}
$btnSubmit.on('mousedown',function(evt){var onlyPrepayment=false;if(!JSON.parse(self.parent.base64.decode($('#pp-point-id').val()))&&self.ppPointsDeliveriesId.indexOf(parseInt($radioDelivery.filter(':checked').val(),10))!==-1){evt.preventDefault();self.submitFromDeliver=true;Shop.pocztapolska.callbacks.close=function(context){self.submitFromDeliver=false;}
if(!!self.cashOnDeliveryIds.length){self.cashOnDeliveryIds.forEach(function(cashOnDeliveryId){if($('#payment_'+cashOnDeliveryId+'').is(':checked')){onlyPrepayment=true;}});}
Shop.pocztapolska.show(onlyPrepayment);}});$btnPickupPoint=$('#btn-pp-pick-up-points');$radioDelivery.on('change',function(evt){var $deliveryPreview;var $disabledPaymentMethods;var ppPointDeliverySnapshot;$deliveryPreview=$('.'+self.classes.deliveryDetailsPreview);if(self.ppPointsDeliveriesId.indexOf(parseInt($(this).val(),10))!==-1){$btnPickupPoint.removeClass('none');if(!!$deliveryPreview.length){$deliveryPreview.removeClass('none');}
ppPointDeliverySnapshot=self.ppPointDeliverySnapshot[$(this).attr('id')];if(ppPointDeliverySnapshot){self.updateSelectedPpPointMarkup(ppPointDeliverySnapshot.selectedPoint);if(ppPointDeliverySnapshot.selectedPoint){self.setPpHiddenPoint(ppPointDeliverySnapshot.selectedPoint,$form);}else{self.setPpHiddenPoint(null,$form);}
if(ppPointDeliverySnapshot.selectedPayment){self.updateSelectedPpPointDeliveryMethod(ppPointDeliverySnapshot.selectedPayment);}}}else{$btnPickupPoint.addClass('none');self.setPpHiddenPoint(null,$form);if(!!$deliveryPreview.length){$deliveryPreview.addClass('none');}
$disabledPaymentMethods=$('.'+self.classes.disablePaymentMethod);if(!!$disabledPaymentMethods.length){$disabledPaymentMethods.each(function(index,payment){self.ppTogglePayment($(payment));});}}
localStorage.setItem('pickUpPointsSnapshot',self.parent.base64.encode(JSON.stringify(self.ppPointDeliverySnapshot)));});$radioPayment.on('change',function(){self.updatePpPointObjectPoint(undefined,parseInt($(this).attr('value'),10));});$radioDelivery.filter(':checked').trigger('change');self.updatePpPointObjectPoint(undefined,parseInt($('[name="payment_id"]').filter(':checked').attr('value'),10));}).fail(function(err){console.error(err);});},fillDeliveryFromPpPoint:function(point){var inputName='pp-pick-up-point';var $deliveryDetails=$('.address.delivery .delivery-details')
var $oldInput=$('[name="'+inputName+'"]');var $form=$('form[action*="/pl/basket/step3"]');$deliveryDetails.empty();this.createPpPointDeliveryMarkup(point).appendTo($deliveryDetails);if($oldInput.length>0){$oldInput.remove();}
$form.append($('<input />',{'type':'hidden','name':inputName,'id':inputName,'value':this.parent.base64.encode(JSON.stringify(point))}));this.setPpHiddenPoint(point,$form);},pickUpPointsStep3:function(){var self=this;var ppPickUpPoints=JSON.parse($('#pp-pick-up-points-delveries').val());localStorage.removeItem('pickUpPointsSnapshot');this.getBasketInfo().then(function(response){var payments;payments=self.filterPrepaymentPayments(response.payments);response.shippings.forEach(function(shipping){var point;if(shipping.selected&&ppPickUpPoints.indexOf(shipping.shipping_id)!==-1){var $btnPp=$('<a />',{'id':'btn-pp-pick-up-points','class':'btn-change','text':'('+Shop.lang.pickupsPoints.change_pickup_point+')'}).appendTo($('[data-pp-pick-up-points]'));point=JSON.parse(self.parent.base64.decode($('#pp-pick-up-point').val()));if(point){self.fillDeliveryFromPpPoint(JSON.parse(self.parent.base64.decode($('#pp-pick-up-point').val())));}
self.initPickUpPoints(function(context,point){self.fillDeliveryFromPpPoint(point);});$btnPp.on('click',function(evt){var onlyPrepayment=false;payments.forEach(function(payment){if(payment&&payment.selected){onlyPrepayment=true;}});Shop.pocztapolska.show(onlyPrepayment);});}});}).fail(function(err){console.error(err)});}});(function(){var MASK_CHARARACTER='_';Shop.InputMask=function(options){this.options=options||{$el:null,mask:null,pattern:null,validPattern:null,value:null};this.options.enabled=false;this.patternCheck=false;this.patternRegexp=false;this.keyDownValue=null;this.skipBy=null;this.skipCharacters=null;this.skipKeys=['Backspace','Enter','Escape','ArrowLeft','ArrowUp','ArrowRight','ArrowDown','Delete','CapsLock','Shift','Control','Alt','AltGraph','Tab'];this.events={mousedown:null,mouseup:null,blur:null,keydown:null,input:null,keyup:null,paste:null};this.initialize();};Shop.InputMask.prototype={constructor:Shop.MaskInput,initialize:function(){var self=this;var pattern=this.options.pattern;var maskRegexp=new RegExp(MASK_CHARARACTER,'g');this.skipCharacters=_uniqueArray(this.options.mask.replace(maskRegexp,'').split(''));if(pattern){this.patternRegexp=new RegExp(this.options.pattern,'g');this.patternCheck=true;}
this.events.mousedown=function(ev){_mousedown.call(self,ev);};this.events.mouseup=function(ev){_mouseup.call(self,ev);};this.events.blur=function(ev){_blur.call(self,ev);};this.events.keydown=function(ev){_keydown.call(self,ev);};this.events.input=function(ev){_input.call(self,ev);};this.events.keyup=function(ev){_keyup.call(self,ev);};this.events.paste=function(ev){_paste.call(self,ev);};this.enable();},setCursorPosition:function(posStart,posEnd){var el=this.options.$el[0];var start;var end;posStart=posStart?posStart:0;posEnd=posEnd?posEnd:posStart;if(typeof posStart!=='number'){start=posStart[0];end=posStart[1];}else{start=posStart;end=posEnd;}
el.selectionStart=start;el.selectionEnd=end;},getCursorPosition:function(){var el=this.options.$el[0];return[el.selectionStart,el.selectionEnd];},enable:function(){if(this.options.enabled===false){this.options.$el
.attr('autocomplete','off')
.on('mousedown',this.events.mousedown)
.on('mouseup',this.events.mouseup)
.on('blur',this.events.blur)
.on('keydown',this.events.keydown)
.on('input',this.events.input)
.on('keyup',this.events.keyup)
.on('paste',this.events.paste)
.val((!!this.options.value?this.options.value:''));this.options.enabled=true;}},disable:function(){if(this.options.enabled===true){this.options.$el
.attr('autocomplete','on')
.off('mousedown',this.events.mousedown)
.off('mouseup',this.events.mouseup)
.off('blur',this.events.blur)
.off('keydown',this.events.keydown)
.off('input',this.events.input)
.off('keyup',this.events.keyup)
.off('paste',this.events.paste);this.options.enabled=false;}}};function _uniqueArray(arr){var a=[];var arrLength=arr.length;for(var i=0;i<arrLength;i++){if(a.indexOf(arr[i])===-1&&arr[i]!==''){a.push(arr[i]);}}
return a;}
function _mousedown(ev){if(!ev.target.value){ev.target.value=this.options.mask;this.setCursorPosition();}}
function _mouseup(ev){if(ev.target.value===this.options.mask){this.setCursorPosition();}}
function _blur(ev){if(ev.target.value===this.options.mask){ev.target.value='';}}
function _keydown(ev){var value=ev.target.value;var currentPosition=this.getCursorPosition();if(ev.originalEvent.repeat){if(ev.key==='Backspace'||ev.keyCode===8){ev.target.value=this.options.mask;this.setCursorPosition();}
return false;}
if(currentPosition[0]!==currentPosition[1]){var newValue;if(ev.key==='Backspace'||ev.key==='Delete'||ev.keyCode===8||ev.keyCode===46){var startSubstring=value.substring(0,currentPosition[0]);var middleSubstring=value.substring(currentPosition[0],currentPosition[1]);var endSubstring=value.substring(currentPosition[1],value.length);var deleteRegexp=new RegExp('[^'+this.skipCharacters.join('')+']','g');newValue=startSubstring+middleSubstring.replace(deleteRegexp,MASK_CHARARACTER)+endSubstring;ev.target.value=newValue;this.setCursorPosition(currentPosition[0]);return false;}else if(!_areKeysCombined(ev)&&this.skipKeys.indexOf(ev.key)<0){currentPosition=[currentPosition[0],currentPosition[0]];}}
if(ev.key==='Backspace'||ev.key==='Delete'||ev.keyCode===8||ev.keyCode===46){if(ev.key==='Backspace'||ev.keyCode===8){if(this.skipCharacters.indexOf(value[currentPosition[0]-1])>=0){return false;}
if(currentPosition[0]!==0){ev.target.value=_insertCharAt(value,MASK_CHARARACTER,currentPosition[0]);this.setCursorPosition(currentPosition);}}
if(ev.key==='Delete'||ev.keyCode===46){if(this.skipCharacters.indexOf(value[currentPosition[0]])>=0){return false;}
if(currentPosition[0]!==value.length){ev.target.value=_replaceCharAt(value,MASK_CHARARACTER,currentPosition[0]);setTimeout(function(){this.setCursorPosition(currentPosition.map(function(position){return position+=1;}));}.bind(this),0);return false;}}
return true;}
if(this.skipKeys.indexOf(ev.key)>=0||_areKeysCombined(ev)){return true;}
var self=this;if(this.skipBy>0){this.setCursorPosition(currentPosition.map(function(position){return position+=self.skipBy;}));}else{currentPosition[1]+=1;this.setCursorPosition(currentPosition);}
if(this.skipCharacters.indexOf(value[currentPosition[0]])>=0){this.skipBy=_skipCharactersBy.call(this,value,currentPosition[0],0);this.setCursorPosition(currentPosition.map(function(position){return position+=self.skipBy;}));}
this.skipBy=_skipCharactersBy.call(this,value,currentPosition[1],0);this.keydownValue=value;}
function _input(ev){var mask=this.options.mask;var value=ev.target.value;var isValid=_isValidPattern.call(this,value);if(isValid===false){var currentPosition=this.getCursorPosition();ev.target.value=this.keydownValue;this.setCursorPosition(currentPosition[0]-1);return false;}
if(mask.length!==value.length){ev.target.value=value.slice(0,mask.length);var lastMaskCharacterPos=value.indexOf(MASK_CHARARACTER);if(lastMaskCharacterPos>=0){this.setCursorPosition(lastMaskCharacterPos);}}}
function _keyup(ev){this.skipBy=0;var value=ev.target.value;var currentPosition=this.getCursorPosition();var skipBy;if(ev.key==='Backspace'||ev.keyCode===8){skipBy=_skipCharactersBy.call(this,value,currentPosition[0]-1,0,true);if(skipBy>0){this.setCursorPosition(currentPosition.map(function(position){return position-=skipBy;}));}
return true;}
if(ev.key==='Delete'||ev.keyCode===46){skipBy=_skipCharactersBy.call(this,value,currentPosition[0],0);if(skipBy>0){this.setCursorPosition(currentPosition.map(function(position){return position+=skipBy;}));}
return true;}
if(this.skipKeys.indexOf(ev.key)>=0||_areKeysCombined(ev)){return true;}
if(!value){ev.target.value=this.options.mask;this.setCursorPosition();}
skipBy=_skipCharactersBy.call(this,value,currentPosition[0],0);if(skipBy>0&&value.length!==currentPosition[0]+skipBy){this.setCursorPosition(currentPosition.map(function(position){return position+=skipBy;}));}}
function _paste(ev){ev.preventDefault();var value=ev.target.value;var valueLength=value.length;var pastedValue=ev.originalEvent.clipboardData.getData('Text');var currentPosition=this.getCursorPosition();var newValue='';for(var i=0,j=0;i<valueLength;i+=1){if(i>=currentPosition[0]&&pastedValue[j]&&this.skipCharacters.indexOf(value[i])<0){if(this.skipCharacters.indexOf(pastedValue[j])<0){newValue=newValue+pastedValue[j];}else{i-=1;}
j+=1;}else{newValue=newValue+value[i];}}
if(_isValidPattern.call(this,newValue)){ev.target.value=newValue;this.setCursorPosition(ev.target.value.indexOf(MASK_CHARARACTER));}}
function _skipCharactersBy(value,position,skipBy,backward){backward=backward?backward:false;if(this.skipCharacters.indexOf(value[position])>=0){if(backward===true){position-=1;}else{position+=1;}
skipBy+=1;return _skipCharactersBy.call(this,value,position,skipBy,backward);}
return skipBy;}
function _insertCharAt(string,char,position){return string.slice(0,position)+char+string.slice(position);}
function _replaceCharAt(string,char,position){return string.substr(0,position)+char+string.substr(position+1);}
function _areKeysCombined(ev){return ev.altKey===true||ev.ctrlKey===true||ev.metaKey===true;}
function _isValidPattern(value){if(this.patternCheck===true){var validPattern=this.options.validPattern;var valueLength=value.length;var partialValue='';for(var i=0;i<valueLength;i+=1){partialValue+=(value[i]!=='_'?value[i]:validPattern[i]);}
if(partialValue.match(this.patternRegexp)===null){return false;}
return true;}
return true;}})();window.Shop=Shop;Shop.basket={};Shop.RwdGallery={};Shop.useroptions.prevent=false;Shop.urlParser=function(that){$('link[rel=home]').each(function(){if(typeof $(this).attr('href')=='string'){that.urls.base=($(this).attr('href')+'/').replace(/\/\//g,'/');}});$('link[rel=start]').each(function(){if(typeof $(this).attr('href')=='string'){that.urls.base=($(this).attr('href')+'/').replace(/\/\//g,'/');}});return!!(that.urls.base.length);};Function.prototype.delay=function(ms){var fn=this;return function(){setTimeout(fn,ms);};};Number.prototype.numberFormat=function(decimals,dec_point,thousands_sep){decimals=Math.abs(decimals)+1?decimals:2;dec_point=dec_point||'.';thousands_sep=thousands_sep||',';var matches=/(-)?(\d+)(\.\d+)?/.exec((isNaN(this)?0:this)+'');var f_decimal=decimals?Number(matches[3]||0).toFixed(decimals):0;matches[2]=(parseInt(matches[2])+parseInt(f_decimal.substr(0,1))).toString();var remainder=matches[2].length>3?matches[2].length%3:0;return(matches[1]?matches[1]:'')+(remainder?matches[2].substr(0,remainder)+thousands_sep:'')+matches[2].substr(remainder).replace(/(\d{3})(?=\d)/g,"$1"+thousands_sep)+(decimals?dec_point+f_decimal.substr(2):'');};$.fn.bindFirst=function(name,fn){this.on(name,fn);this.each(function(){var handlers;var handler;handlers=$._data(this,'events')[name.split('.')[0]];handler=handlers.pop();handlers.splice(0,0,handler);});};})(window);Shop.FileUploader=(function(){function FileUploader(settings){this.xhr=new XMLHttpRequest();this.isSending=false;this.$progress=null;this.settings=_setSettings.call(this,settings);_addListeners(this.xhr,this.settings);if(!this.settings.$file){console.error('this.settings.$file required. (<input type="file">).');return false;}
if(!this.settings.$submit&&this.settings.type==='click'){console.error('this.settings.$submit is required. With type "click".');return false;}
if(this.settings.$file.dataset&&this.settings.$file.dataset.allowedExtensions){this.settings.allowedExtensions=this.settings.$file.dataset.allowedExtensions.split('|');}
if(this.settings.type==='change'){this.settings.$file.addEventListener('change',this.send.bind(this));}
if(this.settings.type==='click'){this.settings.$submit.addEventListener('click',this.send.bind(this));}}
FileUploader.prototype.validate=function(ev){var self;var files;var valid;var errorMessages;self=this;files=this.settings.$file.files;valid=true;errorMessages=[];if(!files.length){valid=false;}
_forEachIn(files,function(file,key){if(!_validExtension(self.settings.dissalowedExtensions,_getExt(file.name))){valid=false;errorMessages.push(shoper.substitute(Shop.lang.fileUploader.wrong_extension,{filename:file.name}));}
if(!_valisSize(self.settings.maxSize,file.size*0.001)){valid=false;errorMessages.push(shoper.substitute(Shop.lang.fileUploader.wrong_size,{filename:file.name,size:self.settings.maxSize}));}});return{valid:valid,errorMessages:errorMessages}};FileUploader.prototype.send=function(){var self;var files;var formData;var validate;validate=this.validate();if(!validate.valid){return false;}
if(this.isSending!==false){return false;}
this.isSending=true;this.xhr.open('post',this.settings.url,this.settings.async);files=this.settings.$file.files;self=this;formData=new FormData();_forEachIn(this.settings.headers,function(headerValue,headerKey){self.xhr.setRequestHeader(headerKey,headerValue);});_forEachIn(files,function(file,key){formData.append(self.settings.$file.name,file,file.name);});this.xhr.send(formData);return this;};function _setSettings(userSettings){var self;var settings;var $progressBar;self=this;settings=Object.assign({$file:null,$submit:null,type:'click',maxSize:26214400,allowedExtensions:['png','jpg','txt','jpeg','webp','gif'],dissalowedExtensions:['php','inc','exe','js','php4','php5','php6','php7','phtml','cgi','phps','bat','dev','apk','app','jar','class','jnlp','bin','sh','run','vb','vbs','vbscript','hta','msi','osx','lnk','nexe','py','rb','hphp','tpl','htaccess','htpasswd','ini','log','svg'],url:null,async:true,headers:{},start:function(ev){self.$progress=document.createElement('div');self.$progress.classList.add('progress-bar');$progressBar=document.createElement('span');$progressBar.classList.add('progress-bar__bar');self.$progress.appendChild($progressBar);self.settings.$file.parentNode.appendChild(self.$progress);},progress:function(ev){self.$progress.dataset.progress=shoper.formatBytes(ev.loaded);self.$progress.dataset.progressMax=shoper.formatBytes(ev.total);$progressBar.style.width=((100*ev.loaded)/ev.total)+'%';},success:null,complete:function(){setTimeout(function(){self.$progress.remove();self.isSending=false;self.isComplete=true;},300);},abort:null,error:null,timeout:null},userSettings);Object.assign(settings.headers,{'X-Requested-With':'XMLHttpRequest'},userSettings.headers);return settings;}
function _addListeners(xhr,settings){xhr.upload.addEventListener('loadstart',settings.start);xhr.upload.addEventListener('progress',settings.progress);xhr.upload.addEventListener('load',settings.success);xhr.upload.addEventListener('loadend',settings.complete);xhr.upload.addEventListener('abort',settings.abort);xhr.upload.addEventListener('error',settings.error);xhr.upload.addEventListener('timeout',settings.timeout);}
function _forEachIn(obj,callback){var x;var counter;var hasOwn;counter=0;hasOwn=Object.prototype.hasOwnProperty;for(x in obj){if(hasOwn.call(obj,x)){callback(obj[x],x,counter,obj);counter+=1;}}}
function _getExt(filename){var parts
parts=filename.split('.');return parts[parts.length-1].toLowerCase();}
function _validExtension(allowedExtensions,ext){if(!allowedExtensions||!allowedExtensions.length){return true;}
return allowedExtensions.indexOf(ext)<0;}
function _valisSize(maxSize,fileSize){if(!maxSize){return true;}
return fileSize<=maxSize;}
return FileUploader;})();function googleMapsAPICallback(){Shop.googleMapsApi.apiReady();}
function gm_authFailure(){if(Shop.pocztapolska){Shop.pocztapolska.handleErrorMap();}}
/*!lang_c6f1da2f45627f903270570fd9c0dc81.js!*/(function(){if(!!(this.Shop)&&!!(this.Shop.lang)){this.Shop.lang.plugins={};this.Shop.lang.name='pl_PL';this.Shop.lang.common={product_vote_alert:'Błąd podczas wysyłania głosu.',product_stock_select:'wybierz',product_stock_download_error:'Błąd podczas pobierania produktu.',product_select_stock:'Wybierz wariant produktu.',product_select_optionfile:'Wskaż wymagane pliki',product_select_optiontext:'Wypełnij wymagane pola tekstowe',product_select_optionradio:'Wybierz/wypełnij wymagane pola',product_select_optionselect:'Wypełnij wymagane opcje',product_select_optioncheckbox:'Wypełnij wymagane opcje',product_select_optioncolor:'Wybierz kolor',maps_position_error:'Brak dostępu do informacji o Twojej lokalizacji.',file_too_big:'Wybrany plik przekracza limit {size}MB.',search:'Search in store',view_rwd_version:'Pokaż wersję responsywną',view_desktop_version:'Pokaż pełną wersję strony',close:'zamknij',recaptchaRequired:'Nie wypełniono pola reCAPTCHA',request:{get_error:'Wystąpił błąd podczas pobierania danych. Spróbuj ponownie za chwile',send_error:'Wystąpił błąd podczas wysyłania danych. Spróbuj ponownie za chwile',parse_error:'Wystąpił błąd podczas zapisywania zmian. Niepoprawna wartość',unexpected_error:'Wystąpił nieoczekiwany błąd'},full_screen:'pełny ekran',alert:'Wiadomość ze sklepu',remove:'usuń',basket_discount:'suma (po rabacie)',email:'Adres email',discount:'promocja',newP:'nowość',select:'wybierz',loading:'ładowanie',search:'szukaj',ok:'ok'};this.Shop.lang.quickview={availability:'Dostępność',delivery:'Wysyłka w',evaluation:'Ocena',producer:'Producent',price:'Cena',addtobasket:'Do koszyka',exchange:'Wymień'};this.Shop.lang.voting={vote_n:'Wystaw produktowi ocenę {score}.',vote_message:'Twoja ocena'};this.Shop.lang.basket={address_request_error:'Błąd podczas pobierania adresu.',shipping_different_country:'Kraj danych adresowych nie jest obsługiwany przez wybraną formę dostawy. Musisz podać inny adres dostawy.',shipping_payment_cost:'Koszt dostawy i płatności',shipping_payment:'Koszt dostawy',shipping_payment_from:'Koszt dostawy od',add_to_cart:'Do koszyka'};this.Shop.lang.skinpreview={close:'Zamknij podgląd'};this.Shop.lang.milkbox={x_of_y:'z'};this.Shop.lang.filter={show_more:'więcej',show_less:'mniej',mobile_show_more:'(pokaż więcej)'};this.Shop.lang.ajaxlayer={error:'Błąd żądania danych.'};this.Shop.lang.bundle={choose:'Wybierz elementy zestawu'};this.Shop.lang.ajaxbasket={submit_error:'Błąd podczas dodawania produktu do koszyka.',product_added:'Pomyślnie dodano do koszyka:',product_name:'{name} ({quantity} {unit})',continue_shopping:'Kontynuuj zakupy',goto_basket:'Złóż zamówienie',basket_items:'W koszyku produktów: {count}. Wartość: {sum}.',quantity:'Ilość',netto_label:'Cena netto',brutto_label:'Cena brutto',basket_value:'Wartość koszyka',basket_value_discount:'Wartość koszyka (po rabacie)',products_number:'Ilość produktów w koszyku'};this.Shop.lang.creditcard={invalid_number:'Nieprawidłowy numer karty',invalid_security_code:'Nieprawidłowy kod weryfikacyjny'};this.Shop.lang.product={availability_notify_title:'Powiadom mnie o dostępności',availability_email_description:'Na podany adres e-mail zostanie wysłane powiadomienie gdy<br> produkt będzie dostępny w naszym magazynie',availability_save:'Zapisz się',availability_success:'Dany adres e-mail został dodany do listy oczekujących',availability_email_found:'Dany adres e-mail istnieje już na liście oczekujących',availability_unsub_success:'Powiadomienie o dostępności zostało anulowane',availability_unsub_not_found:'Użytkownik nie jest zapisany do listy oczekujących na dany produkt',availability_unsub_not_logged:'Musisz być zalogowany, aby anulować powiadomienie o dostępności dla danego produktu'};this.Shop.lang.pickupsPoints={find_point:'Znajdź najbliższy punkt odbioru',enter_address:'Wprowadź adres',select_pickup_point:'Wybierz punkt odbioru',select_pickup_point_list:'Wybierz punkt odbioru z listy',change_pickup_point:'zmień punkt',api_error:'Coś poszło nie tak z API',only_prepayment:'Tylko przedpłata',selected_pickup_point_header:'Wybrany punkt odbioru',only_prepayment_label:'Ten punkt odbioru nie obsługuje niektórych metod płatności',searching_location:'Wyszukiwanie twojej lokalizacji'};this.Shop.lang.fileUploader={wrong_extension:'{filename} ma złe rozszerzenie.',wrong_size:'{filename} przekracza maksymalny rozmiar. Dozwolone {size} KB.'}
this.Shop.lang.rodo={verification_code_info:'Wysłaliśmy Ci kod weryfikacyjny na Twój adres e-mail {email}. Sprawdź swoją skrzynkę pocztową.',verification_code_header:'Wysłaliśmy Ci kod weryfikacyjny',verification_code_filed_header:'Wysyłanie nie powiodło się',verification_code_filed_info:'Coś poszło nie tak i nie możemy wysłać wiadomość e-mail. Prosimy spróbować ponownie za kilka minut.',request_sent:'żądanie wysłane',archive_downloaded:'Dziękujemy za pobranie archiwum',archive_downloaded_header:'Archive downloaded'}}})();
/*!paczkomaty-jq.js!*/(function(){if(!!(this.Shop)&&typeof this.Shop.postinit==='object'){this.Shop.extend({postinit:{paczkomaty:(function(){if(!this.classes.BasketHandler){return;}
var o;var n;o=(function(){var bh=this.baskethandler;var previous=$('input[type=hidden][name=shipping_data]');var previousValue=false;var tAddress=$(bh.options.selectors.addressfieldscontainer);var iZip=tAddress.find('input[name=zip]');var acceptReg;var spanC;var checkbox;var a;var nonear;var p;var machines;var otherspan;var isCod=null;var msgs=$('.alert-warning p').filter(function(p){return $(this).text().match(/paczkomat/i);}).parents('.alert-warning');if(msgs.length===0){return;}
if(this.baskethandler.options.step!==2){return;}
msgs.remove();if(Shop.values.ShippingExtraStep){return;}
$(bh.options.selectors.trdifferentaddress).remove();$(bh.options.selectors.differentaddress_parent).remove();if(!!previous){previous=$.parseJSON(previous.val());if(previous&&typeof previous==='object'&&!!previous.machine){previousValue=previous.machine;}}
bh.paczkomaty={previous:previousValue};if(!tAddress){this.error('Unable to find address fields container (table for default skin).');return;}
if(!iZip){this.error('Unable to find postal code input.');return;}
acceptReg=$('<div />',{'class':'paczkomaty'}).appendTo($('.client-address-different'));var eIsCod=$('#is_cod');if(eIsCod.length){isCod=eIsCod.attr('value')=="1";}
$('<div />',{'id':'paczkomaty_logo','class':'none'}).appendTo(acceptReg);$('<h4 />',{'class':'sparator','text':Shop.lang.plugins.paczkomaty.header}).appendTo(acceptReg);$('<p />',{'class':'paczkomaty_placeholder','text':Shop.lang.plugins.paczkomaty.enterzipcode}).appendTo(acceptReg);nonear=$('<p />',{'class':'paczkomaty_nonear none'}).appendTo(acceptReg);$('<span />',{text:Shop.lang.plugins.paczkomaty.nonear}).appendTo(nonear);$('<a />',{text:Shop.lang.plugins.paczkomaty.showall}).appendTo(nonear).on('click',function(e){e.preventDefault();e.stopPropagation();$(this).addClass('requesting');p=bh.paczkomaty;setTimeout(function(){p.getAll();},250)});$('<select />',{'class':'paczkomaty_select none'}).appendTo(nonear).on('change',function(e){bh.paczkomaty.selected($(this).val());$('input[type="radio"].paczkomaty_select').attr('checked',true);});machines=$('<p />',{'class':'paczkomaty_machines none'}).appendTo(acceptReg);$('<a />',{text:Shop.lang.plugins.paczkomaty.showother}).appendTo(machines).on('click',function(e){e.stopPropagation();e.preventDefault();$(this).addClass('requesting');p=bh.paczkomaty;setTimeout(function(){p.getAll();},250)});otherspan=$('<span />').appendTo(machines);$('<input />',{'class':'paczkomaty_select none','type':'radio','name':'machine'}).appendTo(otherspan).on('change',function(e){bh.paczkomaty.selected($(this).next().val());});$('<select />',{'class':'paczkomaty_select none'}).appendTo(otherspan).on('change',function(e){bh.paczkomaty.selected($(this).val());});$('<p />',{'class':'paczkomaty_info','text':Shop.lang.plugins.paczkomaty.service_info}).appendTo(acceptReg);spanC=$('<span >',{'class':'checkbox-wrap'}).appendTo(acceptReg);checkbox=$('<input />',{'type':'checkbox','id':'paczkomat_terms','checked':!!bh.paczkomaty.previous}).appendTo(spanC);$('<label />',{'for':checkbox.attr('id')}).appendTo(spanC);$('<label />',{'for':checkbox.attr('id'),'html':Shop.lang.plugins.paczkomaty.service_accept.replace('%s','<a target="_blank" rel="noopener" href="'+Shop.lang.plugins.paczkomaty.service_link+'">')
.replace('%s','</a>')}).appendTo(acceptReg);$('<input />',{'type':'hidden','name':'paczkomat','id':'paczkomat','value':previousValue}).appendTo(acceptReg);bh.paczkomaty.okZip=(function(zip){try{if(isCod){bh.paczkomaty.request(zip,'//api.paczkomaty.pl/?do=findnearestmachines&postcode={zip}&paymentavailable=t',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/near/zip/{zip}/is_cod/t'));}else{bh.paczkomaty.request(zip,'//api.paczkomaty.pl/?do=findnearestmachines&postcode={zip}',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/near/zip/{zip}'));}}catch(nothing){}}.bind(this));bh.paczkomaty.wrongZip=(function(){$('.paczkomaty_placeholder').removeClass('none');$('.paczkomaty_machines').addClass('none');$('.paczkomaty_nonear').addClass('none');});bh.paczkomaty.getAll=(function(){if(bh.paczkomaty.listCache===null){try{if(isCod){bh.paczkomaty.request(null,'//api.paczkomaty.pl/?do=listmachines_xml&paymentavailable=t',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/all/is_cod/t'));}else{bh.paczkomaty.request(null,'//api.paczkomaty.pl/?do=listmachines_xml',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/all'));}}catch(nothing){}}}.bind(this));bh.paczkomaty.request=(function(zip,url,url2){var req,machines;if(!!zip){url=url.replace('{zip}',zip);}
req=$.ajax({url:url,async:true,method:'get',dataType:'xml',error:function(xhr){if(!!url2){bh.paczkomaty.request(zip,url2);}else{shoper.alert(Shop.lang.plugins.paczkomaty.request_error);}},success:function(xml){var machines=$(xml).find('machine');if(!!machines){if(machines.length===0){bh.paczkomaty.listNone();}else if(machines.length<=5){bh.paczkomaty.listNear(machines);}else{bh.paczkomaty.listAll(machines);}}else{shoper.alert(Shop.lang.plugins.paczkomaty.request_error);}}});}.bind(this));bh.paczkomaty.listNone=(function(){$('.paczkomaty_placeholder').addClass('none');$('.paczkomaty_machines').addClass('none');$('.paczkomaty_nonear').removeClass('none');});bh.paczkomaty.listNear=(function(list){var p,x,cnt,el,restore,i;$('.paczkomaty_nonear').addClass('none');$('.paczkomaty_placeholder').addClass('none');p=$('.paczkomaty_machines').removeClass('none');if(!!p){p.find('span.near').remove();for(x=list.length-1;x>=0;--x){cnt=$('<span />',{'class':'near'});p.prepend(cnt);el={name:null,street:null,buildingnumber:null,postcode:null,town:null};$(list[x]).children().each(function(){list[x][$(this)[0].nodeName]=$(this).text();el=list[x];});restore=(el.name==bh.paczkomaty.previous);i=$('<input />',{'type':'radio','name':'machine','value':el.name,'id':'paczkomaty_'+el.name,checked:restore}).appendTo(cnt).on('change',function(e){bh.paczkomaty.selected($(this).val());});$('<label />',{'text':el.street+' '+el.buildingnumber+', '+el.postcode+' '+el.town,'for':'paczkomaty_'+el.name}).appendTo(cnt);if(restore){i.trigger('change');}}}}.bind(this));bh.paczkomaty.listAll=(function(list){var selects=$('select.paczkomaty_select'),x,s,y,el,restore;bh.paczkomaty.listCache=list;for(x=0;x<selects.length;++x){s=selects[x];$(s).empty();$('<option />',{'text':Shop.lang.plugins.paczkomaty.select_machine,'value':''}).appendTo(s);for(y=0;y<list.length;++y){el={name:null,street:null,buildingnumber:null,postcode:null,town:null};$(list[y]).children().each(function(){list[y][$(this)[0].nodeName]=$(this).text();el=list[y];});restore=(el.name==this.previous);$('<option />',{text:el.name+' - '+el.street+' '+el.buildingnumber+', '+el.postcode+' '+el.town,value:el.name}).appendTo(s);if(restore==true){$(s).val(bh.paczkomaty.previous)
$(s).trigger('change');}}}
$('.paczkomaty_nonear a, .paczkomaty_machines a').remove();$('.paczkomaty_select').removeClass('none');selects.on('change',function(){$(this).prev().prop('checked',true).trigger('change');});}.bind(this));bh.paczkomaty.selected=(function(name){$('#paczkomat').val(name);});bh.paczkomaty.listCache=null;bh.options.containers.step2.find('form [name=button2]').on('click',function(e){if($('#paczkomat').val().length<3){e.stopPropagation();e.preventDefault();shoper.alert(Shop.lang.plugins.paczkomaty.alert_select_machine);return false;}
if($('#paczkomat_terms').is(':checked')==false){e.stopPropagation();e.preventDefault();shoper.alert(Shop.lang.plugins.paczkomaty.alert_accept_terms);return false;}});iZip.on('change',function(e){var v=$(this).val();bh.paczkomaty.selected('');if(v.length>1){v=v.replace(/[^0-9a-z]/gi,'').substring(0,5);if(v.match(/^[0-9]{5}$/)){v=v.substring(0,2)+'-'+v.substring(2);bh.paczkomaty.okZip(v);return;}}
bh.paczkomaty.wrongZip();});iZip.trigger('change');$('#paczkomaty_logo').removeClass('none').css({'position':'relative','float':'right'});}.bind(this));n=(function(){var bh;var shippingId;var zipCode;var isCod;var previous;var previousValue;var paczkomatId;var $shippingRadio;var $eIsCod;var $acceptReg;var $nonear;var $machines;var $otherspan;var $spanC;var $checkbox;bh=this.baskethandler;$shippingRadio=$('input[type="radio"][name="shipping_id"]');shippingId=parseInt($shippingRadio.filter(':checked').val(),10);zipCode=$('#zipcode').val();if(!zipCode||!$('#paczkomatId').val()){return false;}
paczkomatId=JSON.parse($('#paczkomatId').val());$shippingRadio.on('change',function(){shippingId=parseInt($(this).val(),10);if(paczkomatId.indexOf(shippingId)<0){$('.paczkomaty').hide();}else{$('.paczkomaty').show();}});if(bh.options.step!=='shipping'){return;}
if(!zipCode){return;}
previous=$('input[type=hidden][name=shipping_data]');previousValue=false;if(previous.length>0){previous=$.parseJSON(previous.val());if(previous&&typeof previous==='object'&&!!previous.machine){previousValue=previous.machine;}}
bh.paczkomaty={previous:previousValue};$eIsCod=$('#is_cod');isCod=false;if($eIsCod.length>0){isCod=$eIsCod.val()=="1";}
$acceptReg=$('<div />',{'class':'paczkomaty'}).appendTo($('.shipping-container'));$('<div />',{'id':'paczkomaty_logo','class':'none'}).appendTo($acceptReg);$('<h4 />',{'class':'sparator','text':Shop.lang.plugins.paczkomaty.header}).appendTo($acceptReg);$('<p />',{'class':'paczkomaty_placeholder','text':Shop.lang.plugins.paczkomaty.enterzipcode}).appendTo($acceptReg);$nonear=$('<p />',{'class':'paczkomaty_nonear none'}).appendTo($acceptReg);$('<span />',{text:Shop.lang.plugins.paczkomaty.nonear}).appendTo($nonear);$('<a />',{text:Shop.lang.plugins.paczkomaty.showall}).appendTo($nonear).on('click',function(e){e.preventDefault();e.stopPropagation();$(this).addClass('requesting');setTimeout(function(){bh.paczkomaty.getAll();},250)});$('<select />',{'class':'paczkomaty_select none'}).appendTo($nonear).on('change',function(e){bh.paczkomaty.selected($(this).val());$('input[type="radio"].paczkomaty_select').attr('checked',true);});$machines=$('<p />',{'class':'paczkomaty_machines none'}).appendTo($acceptReg);$('<a />',{text:Shop.lang.plugins.paczkomaty.showother}).appendTo($machines).on('click',function(e){e.stopPropagation();e.preventDefault();$(this).addClass('requesting');setTimeout(function(){bh.paczkomaty.getAll();},250)});$otherspan=$('<span />').appendTo($machines);$('<input />',{'class':'paczkomaty_select none','type':'radio','name':'machine'}).appendTo($otherspan).on('change',function(e){bh.paczkomaty.selected($(this).next().val());});$('<select />',{'class':'paczkomaty_select none'}).appendTo($otherspan).on('change',function(e){bh.paczkomaty.selected($(this).val());});$('<p />',{'class':'paczkomaty_info','text':Shop.lang.plugins.paczkomaty.service_info}).appendTo($acceptReg);$spanC=$('<span >',{'class':'checkbox-wrap'}).appendTo($acceptReg);$checkbox=$('<input />',{'type':'checkbox','id':'paczkomat_terms','checked':!!bh.paczkomaty.previous}).appendTo($spanC);$('<label />',{'for':$checkbox.attr('id')}).appendTo($spanC);$('<label />',{'for':$checkbox.attr('id'),'html':Shop.lang.plugins.paczkomaty.service_accept.replace('%s','<a target="_blank" rel="noopener" href="'+Shop.lang.plugins.paczkomaty.service_link+'">')
.replace('%s','</a>')}).appendTo($acceptReg);$('<input />',{'type':'hidden','name':'paczkomat','id':'paczkomat','value':previousValue}).appendTo($acceptReg);bh.paczkomaty.okZip=(function(zip){try{if(isCod){bh.paczkomaty.request(zip,'//api.paczkomaty.pl/?do=findnearestmachines&postcode={zip}&paymentavailable=t',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/near/zip/{zip}/is_cod/t'));}else{bh.paczkomaty.request(zip,'//api.paczkomaty.pl/?do=findnearestmachines&postcode={zip}',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/near/zip/{zip}'));}}catch(nothing){}}.bind(this));bh.paczkomaty.wrongZip=(function(){$('.paczkomaty_placeholder').removeClass('none');$('.paczkomaty_machines').addClass('none');$('.paczkomaty_nonear').addClass('none');});bh.paczkomaty.getAll=(function(){if(bh.paczkomaty.listCache===null){try{if(isCod){bh.paczkomaty.request(null,'//api.paczkomaty.pl/?do=listmachines_xml&paymentavailable=t',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/all/is_cod/t'));}else{bh.paczkomaty.request(null,'//api.paczkomaty.pl/?do=listmachines_xml',this.url('console/plugin/execute/plugin/Paczkomaty-Zip/act/all'));}}catch(nothing){}}}.bind(this));bh.paczkomaty.request=(function(zip,url,url2){var req,machines;if(!!zip){url=url.replace('{zip}',zip);}
req=$.ajax({url:url,async:true,method:'get',dataType:'xml',error:function(xhr){if(!!url2){bh.paczkomaty.request(zip,url2);}else{shoper.alert(Shop.lang.plugins.paczkomaty.request_error);}},success:function(xml){var machines=$(xml).find('machine');if(!!machines){if(machines.length===0){bh.paczkomaty.listNone();}else if(machines.length<=5){bh.paczkomaty.listNear(machines);}else{bh.paczkomaty.listAll(machines);}}else{shoper.alert(Shop.lang.plugins.paczkomaty.request_error);}}});}.bind(this));bh.paczkomaty.listNone=(function(){$('.paczkomaty_placeholder').addClass('none');$('.paczkomaty_machines').addClass('none');$('.paczkomaty_nonear').removeClass('none');});bh.paczkomaty.listNear=(function(list){var p,x,cnt,el,restore,i;$('.paczkomaty_nonear').addClass('none');$('.paczkomaty_placeholder').addClass('none');p=$('.paczkomaty_machines').removeClass('none');if(!!p){p.find('span.near').remove();for(x=list.length-1;x>=0;--x){cnt=$('<span />',{'class':'near'});p.prepend(cnt);el={name:null,street:null,buildingnumber:null,postcode:null,town:null};$(list[x]).children().each(function(){list[x][$(this)[0].nodeName]=$(this).text();el=list[x];});restore=(el.name==bh.paczkomaty.previous);i=$('<input />',{'type':'radio','name':'machine','value':el.name,'id':'paczkomaty_'+el.name,checked:restore}).appendTo(cnt).on('change',function(e){bh.paczkomaty.selected($(this).val());});$('<label />',{'text':el.street+' '+el.buildingnumber+', '+el.postcode+' '+el.town,'for':'paczkomaty_'+el.name}).appendTo(cnt);if(restore){i.trigger('change');}}}}.bind(this));bh.paczkomaty.listAll=(function(list){var selects=$('select.paczkomaty_select'),x,s,y,el,restore;bh.paczkomaty.listCache=list;for(x=0;x<selects.length;++x){s=selects[x];$(s).empty();$('<option />',{'text':Shop.lang.plugins.paczkomaty.select_machine,'value':''}).appendTo(s);for(y=0;y<list.length;++y){el={name:null,street:null,buildingnumber:null,postcode:null,town:null};$(list[y]).children().each(function(){list[y][$(this)[0].nodeName]=$(this).text();el=list[y];});restore=(el.name==this.previous);$('<option />',{text:el.name+' - '+el.street+' '+el.buildingnumber+', '+el.postcode+' '+el.town,value:el.name}).appendTo(s);if(restore==true){$(s).val(bh.paczkomaty.previous)
$(s).trigger('change');}}}
$('.paczkomaty_nonear a, .paczkomaty_machines a').remove();$('.paczkomaty_select').removeClass('none');selects.on('change',function(){$(this).prev().prop('checked',true).trigger('change');});}.bind(this));bh.paczkomaty.selected=(function(name){$('#paczkomat').val(name);});bh.paczkomaty.listCache=null;$('#box_basketshipping').find('form [name=button2]').on('click',function(e){if(paczkomatId.indexOf(shippingId)>=0){if($('#paczkomat').val()=='false'){e.stopPropagation();e.preventDefault();shoper.alert(Shop.lang.plugins.paczkomaty.alert_select_machine);return false;}
if($('#paczkomat_terms').is(':checked')==false){e.stopPropagation();e.preventDefault();shoper.alert(Shop.lang.plugins.paczkomaty.alert_accept_terms);return false;}}
$(this).hide();});$('#paczkomaty_logo').removeClass('none').css({'position':'relative','float':'right'});if(paczkomatId.indexOf(shippingId)<0){$('.paczkomaty').hide();}
if(zipCode.length>1){zipCode=zipCode.replace(/[^0-9a-z]/gi,'').substring(0,5);if(zipCode.match(/^[0-9]{5}$/)){zipCode=zipCode.substring(0,2)+'-'+zipCode.substring(2);bh.paczkomaty.okZip(zipCode);return;}}}.bind(this));if(Shop.values.newShipping){n();}else{o();}})}})}})();
/*!lang_ef0a525507e9c000a3fa5c853ffbda2a.js!*/(function(){if(!!(this.Shop)&&!!(this.Shop.lang)){this.Shop.lang.plugins.paczkomaty={header:'Dane do wysyłki - Paczkomaty InPost',service_info:'Skorzystanie z usługi Paczkomatu 24/7 jest związane z przekazaniem danych (imię i nazwisko, adres email, telefon komórkowy, kod pocztowy) do firmy InPost.',service_accept:'Zapoznałem się i %s akceptuję regulamin świadczenia usługi Paczkomaty 24/7%s',service_link:'https://inpost.pl/sites/default/files/regulaminy/regulamin-swiadczenia-uslugi-paczkomaty-24/7-przez-inpost-paczkomaty-sp-z-oo-obowiazujacy-od-1-lutego-2018r-1474.pdf',enterzipcode:'Wybór Paczkomatu dostępny po podaniu poprawnego kodu pocztowego',request_error:'Błąd podczas pobierania listy Paczkomatów. Spróbuj za chwilę.',nonear:'Nie udało się znaleźć Paczkomatu w pobliżu Twojego kodu pocztowego.',showall:'pokaż wszystkie Paczkomaty',showother:'pokaż pozostałe Paczkomaty',select_machine:'(wybierz)',alert_select_machine:'Najpierw wybierz Paczkomat',alert_accept_terms:'Aby kontynować, musisz zaakceptować regulamin świadczenia usług Paczkomaty 24/7'};}})();
/*!online-payment-jq.js!*/(function($){'use strict';if(!!(this.Shop)&&typeof this.Shop.postinit==='object'){this.Shop.extend({postinit:{onlinePayments:function(){var op;var btn;var eId;var eDiv;var eDivp;var eInput;var elText;var initGatewayId;var lastGatewayId;var paymentGatewayId;var createPayment;if($('#online-payment-gateway-id').length<=0){return;}
op={isOpen:false};op.get=$.ajax({url:'https://cdn.dcsaas.net/online-payment/gateways.json?'+Math.floor(new Date().getTime()/3600000),method:'get'});op.choose=function(){var $onlinePayment;$onlinePayment=$('#online-payment');$('.choose-payment').removeClass('active');$(this).addClass('active');$onlinePayment.text($(this).find('span').text());lastGatewayId=$(this).data('id');if($onlinePayment.closest('.payment').find('input[type="hidden"]').length>0){$('#online-payment-gateway-id').val(lastGatewayId);}
if($onlinePayment.closest('.payment').find('input[type="radio"]').length>0){$onlinePayment.closest('.payment').find('input[type="radio"]').prop('checked',true);}
Shop.scrollto($('.payment-container'),true),op.modal.hideModal();op.modal._hideMask();};createPayment=(function(payment){eDiv=btn.closest('.payment');eDivp=$(eDiv).clone(true);paymentGatewayId=btn.data('online-payment-'+payment+'-gateway-id');if(initGatewayId==paymentGatewayId){eDiv.removeClass('selected');}else{eDivp.removeClass('selected');}
eDivp.find('.description').remove();eDivp.find('label').each(function(){$(this).attr('for',$(this).attr('for')+'_'+payment)});eId=eDiv.find('input[type=radio]').attr('id');elText=btn.data('online-payment-'+payment+'-name');eDivp.find('input[type=radio]').attr('id',eId+'_'+payment).attr('checked',initGatewayId==paymentGatewayId);eDivp.find('.name > label').text(elText);eInput=eDivp.find('input[type=radio]');eInput[0]._class=window.shoper.baskethandler;eInput.on('change',function(){$('#online-payment-gateway-id').val(btn.data('online-payment-'+payment+'-gateway-id'));$(window.shoper.baskethandler.options.selectors.paymentheadlabel).text(btn.data('online-payment-'+payment+'-name'));});$('#'+eId).on('change',function(){$('#online-payment-gateway-id').val(lastGatewayId);});$(eDiv).after(eDivp);if(payment=='installments'){var $desc;var $descContainer;var $descBlock
var $descLogo;$desc=$('<span />',{'class':'description',}).insertAfter(eDivp.find('.name > label'));$descContainer=$('<div />',{'class':'installments-container'}).appendTo($desc);$descBlock=$('<div />',{'class':'installments-block'}).appendTo($descContainer);$descLogo=$('<span />',{'class':'installments-logo'}).appendTo($descBlock);}});btn=$('#online-payment');initGatewayId=$('#online-payment-gateway-id').val();setTimeout(function(){if(btn.attr('data-online-payment-installments')==="1"){createPayment('installments');}
if(btn.attr('data-online-payment-cards')==="1"){createPayment('cards');}
createPayment('blik');},20);btn.on('mousedown',function(){if(!op.modal){op.get.done(function(resp){var json;var gw;var $modal;var $container;var $payment;var $close;var otherBank=9;var blik=509;json=JSON.parse(resp);op.$modal=$('<div />',{'class':'online-payments'});if(json[otherBank]){json[9999]=json[otherBank];delete json[otherBank];}
if(json[blik]){delete json[blik];}
for(gw in json){if(json.hasOwnProperty(gw)){var desc=json[gw];if(gw==9999){gw=9;}
$payment=$('<div />',{'class':'choose-payment','data-id':gw}).appendTo(op.$modal);$('<img />',{'src':'https://cdn.dcsaas.net/online-payment/'+gw+'.png','alt':desc,'width':'95','height':'65'}).appendTo($payment);$('<span />',{'text':desc}).appendTo($payment);}}
op.modal=new Shop.Modal();op.modal.callbacks.close=function(){setTimeout(function(){op.modal.destroyModal();op.modal=null;}.bind(this),200);}
op.modal.options.content=op.$modal;op.modal.createModal();op.modal.reposition();$('.choose-payment').on('mousedown',op.choose);});}else{op.modal.createModal();}
$(window).on('keydown',function(ev){if(ev.keyCode===27&&op.modal){op.modal.hideModal();}});});}}});}}).call(window,jQuery);
/*!mbank-jq.js!*/(function($){'use strict';if(!!(this.Shop)&&typeof this.Shop.postinit==='object'){this.Shop.extend({postinit:{mBank:function(){var get;var openWindow;var topLayer;var widgetMraty;var bannerMraty;var note;var left=(screen.width/2)-(800/2);var top=(screen.height/2)-(550/2);var minWindowWidth=767;if(!Shop.mRaty){return;}
get=$.get('https://www.mbank.net.pl/public/shoper/api.php');openWindow=(function(){window.open('http://www.mbank.net.pl/mraty_1/index.html?sprzedawca='+Shop.mRaty.vendor,'title','directories=0,location=1,menubar=0,resizable=0,scrollbars=0,status=0,toolbar=0,width=800,height=550,left='+left+',top='+top);});topLayer=(function(desc){if(document.documentElement.clientWidth>minWindowWidth){var modal=new Shop.Modal();modal.options.content=$('<img style="cursor: pointer" id="mbank-top-layer" width="630" height="350" src="https://cdn.dcsaas.net/mbank/top-layer.jpg" alt="Mbank" />');modal.createModal();$('#mbank-top-layer').on('click',openWindow);note(desc,modal.object.body);}
$.cookie('mbankTopLayer',1,{path:'/',expires:30});});widgetMraty=(function(desc){var $widget;var $widgetFront;var $widgetInner;var $img;var $content;var $button;$widget=$('<div />',{'class':'widget mraty-widget',}).appendTo(document.body);$widgetFront=$('<div />',{'class':'widget-front'}).appendTo($widget);$widgetInner=$('<div />',{'class':'widget-inner'}).appendTo($widget);$img=$('<img />',{'src':'https://cdn.dcsaas.net/mbank/mraty-widget-handle.png'}).appendTo($widgetFront);$content=$('<img />',{'src':'https://cdn.dcsaas.net/mbank/mraty-widget.png'}).appendTo($widgetInner);$button=$('<img />',{'src':'https://cdn.dcsaas.net/mbank/mraty-widget-button.png','style':'cursor: pointer'}).appendTo($widgetInner).on('click',openWindow);if(window.shoper){window.shoper.selectorFunctions.slide_widget.domready();}
note(desc,$widgetInner);});bannerMraty=(function(desc){var $slider;var $li;var $a;var $img;var $aside;if($('.top .box-slider').length>0){var $existSlides=Shop.exist($('.pageslider ul.slides li'));$slider=$('.top .box-slider:first-child .slides');$li=$('<li />',{'class':'mraty-slider','id':'sh-slide-'+($('.top .box-slider:first-child .slides > li').length+1),'data-bg-size-s':'0','data-bg-size-e':'100','data-image':'','data-color-start':'transparent','data-color-end':'transparent','data-href':'','data-orientation':'0'}).appendTo($slider);$a=$('<a />',{'class':'slider-img','title':'mBank mRaty'}).appendTo($li).on('click',openWindow);if(!$existSlides){$slider.parent().attr('data-slider-auto','false');}
$img=$('<img />',{'src':'https://cdn.dcsaas.net/mbank/mbank-slide.jpg','alt':'mBank mRaty','data-align':'4','data-animation':'0','data-duration':'700'}).appendTo($a);$aside=$('<aside />',{'class':'mraty-banner-note'}).appendTo($li);note(desc,$aside);}else if($('img[src*="mbank-slide.jpg"]').length>0){note(desc,$('img[src*="mbank-slide.jpg"]').parent());}
if(Shop.exist($('.pageslider ul.slides li'))){shoper.pageslider.setupSlider();}});note=(function(desc,container){var $note;var $container;var $containerInner;var $title;var $content;$note=$('<a />',{'class':'mraty-note','text':'Nota prawna'}).appendTo(container);$container=$('<div />',{'class':'mraty-tooltip'}).appendTo(container);$containerInner=$('<div />',{'class':'mraty-tooltip-inner'}).appendTo($container);$title=$('<div />',{'class':'mraty-tooltip-title'}).appendTo($containerInner);$content=$('<div />',{'class':'mraty-tooltip-content','text':desc}).appendTo($containerInner);});$(window).load(function(){var self=this;get.done(function(resp){var data=JSON.parse(resp);if(Shop.mRaty){if(Shop.mRaty.vendor){if(Shop.mRaty.topLayer&&!$.cookie('mbankTopLayer')){topLayer(data['Opis']['nota']);}
if(Shop.mRaty.widget){widgetMraty(data['Opis']['nota']);}
if(Shop.mRaty.banner){bannerMraty(data['Opis']['nota']);}}}
$(self).trigger('resize');});});}}});}}).call(window,jQuery,undefined);
/*!main.js!*/Shop.include({selectorFunctions:{boxslider:{selector:'.box.slider',load:function(slider,shopInstance){var isAnimated;isAnimated=false;slider.removeClass('loading');shopInstance.lazypicture.lazyLoading();var _initialSlideWidth=280,_slideWidth,_sliderWidth,_visibleSlides,_maxHeight=0,_autoMove=false,_autoMoveDuration=Shop.useroptions.slider.automove;if(slider.hasClass('slider_automove')){_autoMove=true;}
var slides=slider.find('.product');if(slides.length>1){var sliderWrap=$('<div class="slider-wrap" />').css('text-align','left');var nav=$('<div />').appendTo(slider);var prev=$('<span class="slider-nav-left" />').css({'display':'none'}).appendTo(nav);var next=$('<span class="slider-nav-right" />').css({'display':'block'}).appendTo(nav);slides.wrapAll(sliderWrap);sliderWrap=slider.find('.slider-wrap');shopInstance.addEvent('img:change:slider:'+slider.attr('id'),function(){sliderWrap.css('height','auto');slides.each(function(){if($(this).outerHeight()>=_maxHeight){_maxHeight=$(this).outerHeight();sliderWrap.height(_maxHeight+6);}});});$(window).on('resize',function(){_sliderWidth=slider.outerWidth();_visibleSlides=Math.floor(_sliderWidth/_initialSlideWidth)||1;_slideWidth=_sliderWidth/_visibleSlides;slides.each(function(){if($(this).outerHeight()>=_maxHeight){_maxHeight=$(this).outerHeight();}});slides.outerWidth(_slideWidth);sliderWrap.outerWidth((_slideWidth*slides.length)+3).height(_maxHeight+6);slides.css('left','0');if(slides.length>_visibleSlides){next.show();prev.hide();}
else{next.hide();prev.hide();}}).trigger('resize');next.on('click',function(ev){ev.stopPropagation();if(!isAnimated){slides.animate({left:"-="+(_slideWidth)},{duration:400,start:function(){isAnimated=true;},complete:function(){var pos=parseInt($(this).css('left'));if((slides.length-_visibleSlides)*Math.floor(_slideWidth)<=-pos){next.hide();}
if(-pos>0){prev.show();}
isAnimated=false;}});}});prev.on('click',function(ev){ev.stopPropagation();if(!isAnimated){slides.animate({left:"+="+(_slideWidth)},{duration:400,start:function(){isAnimated=true;},complete:function(){var pos=parseInt($(this).css('left'));if(-pos<=0){prev.hide();}
if((slides.length-_visibleSlides)*Math.floor(_slideWidth)>=-pos){next.show();}
isAnimated=false;}});}});slider.on('swipeleft',function(){if(next.is(':visible')){next.trigger('click');}});slider.on('swiperight',function(){if(prev.is(':visible')){prev.trigger('click');}});if(_autoMove){setInterval(function(){if(next.is(':visible')){next.trigger('click');}else{slides.animate({left:0},600,function(){next.show();prev.hide();})}},_autoMoveDuration)}}}},gotourl:{selector:'.gotourl',domready:function(el){el.off('change').on('change',function(e){e.preventDefault();e.stopPropagation();if($(this).val().length>0){if($(this).prop('tagName')=='INPUT'&&$(this).attr('type').match(/(radio|checkbox)/)){if(!!$(this).is(':checked')){window.location.href=$(this).val();}}else{window.location.href=$(this).val();}}});}},bottest:{selector:'.bottest',domready:function(el){el.remove();}},clickhide:{selector:'.clickhide',domready:function(el){el.on('mouseup',function(){$(this).hide();});}},titlequestion:{selector:'.titlequestion',domready:function(el){el.off('click').on('click',function(e){e.preventDefault();e.stopPropagation();$(this).blur();if(confirm($(this).attr('title'))){window.location.href=$(this).attr('href');}});}},box_producers_select:{selector:'#box_producers_select',domready:function(el){el.find('option[value="'+window.location.pathname+'"]').attr('selected',true);}},resetsubmit:{selector:'button.resetsubmit',domready:function(el,shopInstance){if(Shop.exist(el.form)){el.off('click').on('click',function(e){e.preventDefault();e.stopPropagation();var f=$(this.form);f.find('input[type=text]').each(function(){$(this).val('');});f.find('input[type=checkbox]').each(function(){$(this).attr('checked',false);});f.find('select').each(function(){this.selectedIndex=0;});$('<input />').attr({'type':'hidden','name':'reset','value':1}).appendTo(f);f.submit();});}}},reset:{selector:'button.reset',domready:function(el,shopInstance){el.on('click',function(e){e.stopPropagation();e.preventDefault();var f=$(this.form);f.find('input[type=text]').val('');f.find('input[type=checkbox]').attr('checked',false);f.find('select').val('');});}},flashmessageclose:{selector:'.alert .close',domready:function(el){el.on('click',function(e){e.stopPropagation();e.preventDefault();$(this).parent().slideUp(300,function(){$(this).remove();})});el.css('display','block');}},alert:{selector:'.alert-modal',domready:function(el,shopInstance){el.on('click',function(e){e.preventDefault();shopInstance.alert($(this).attr('title'));})}},basketsubmit:{selector:'#box_productfull form.form-basket',domready:function(el,shopInstance){shopInstance.addEvent('cart:add',function(ev,evForm,options,$form){var sid=parseInt([$form.find('input[name^=stock_id]').val()].join(''));if($form.hasClass('form-basket')){if(sid>0){var l=$(el).find('.option_file.option_required input[type=file]');if(l.length){for(var x=0;x<l.length;++x){if(''===$(l[x]).val()){shopInstance.alert(Shop.lang.common.product_select_optionfile);options.preventSubmit=true;return false;}}}
var l=$(el).find('.option_text.option_required input[type=text]');if(l.length){for(var x=0;x<l.length;++x){if(''===$(l[x]).val()){shopInstance.alert(Shop.lang.common.product_select_optiontext);options.preventSubmit=true;return false;}}}
var l=$(el).find('.option_radio.option_required input[type=radio]');if(l.length){var radioCheck=false;for(var x=0;x<l.length;++x){if($(l[x]).is(':checked')){var radioCheck=true;}}
if(!radioCheck){shopInstance.alert(Shop.lang.common.product_select_optionradio);options.preventSubmit=true;return false;}}
var l=$(el).find('.option_select.option_required select');if(l.length){for(var x=0;x<l.length;++x){if(''===$(l[x]).val()||Shop.lang.common.product_stock_select===$(l[x]).val()){shopInstance.alert(Shop.lang.common.product_select_optionselect);options.preventSubmit=true;return false;}}}
var l=$(el).find('.option_checkbox.option_required input[type="checkbox"]');if(l.length){for(var x=0;x<l.length;++x){if(!$(l[x]).is(':checked')){shopInstance.alert(Shop.lang.common.product_select_optioncheckbox);options.preventSubmit=true;return false;}}}
var l=$(el).find('.option_color.option_required select');if(l.length){for(var x=0;x<l.length;++x){if(''===$(l[x]).val()){shopInstance.alert(Shop.lang.common.product_select_optioncolor);options.preventSubmit=true;return false;}}}
if(Shop.exist(shopInstance.classes.AjaxBasket)){if(!$(this).hasClass(shopInstance.ajaxbasket.options.loyaltyexchange_class)){options.preventSubmit=true;shopInstance.ajaxbasket.wrapform($form[0],evForm);}else{options.preventSubmit=false;}}else{options.preventSubmit=false;}}else{shopInstance.alert(Shop.lang.common.product_select_stock);}}},true);}},footerTab:{selector:'.innerfooter ul.overall',liSelector:'.innerfooter .head',domready:function(el,shopInstance){var self=this;var $linksHead=el.find('.head');$linksHead.off('click').on('click',function(e){var toShow=$(this).parent().children(':not(:visible)');var toHide=$(self.liSelector).parent().children(':visible:not(.head)');var toToggle=$(this).parent().children(':not(.head)');var $this=$(this);if(shopInstance.rwd.small){if(!$this.hasClass('active')){toHide.slideUp();$(self.liSelector).removeClass('active').addClass('hidden');$this.removeClass('hidden').addClass('active');toShow.slideDown();}else{$this.toggleClass('active').toggleClass('hidden');toToggle.slideToggle();}}});var liElems=$(this.liSelector).parent().children(':not(.head)');$(window).resize(function(){if(window.innerWidth>shopInstance.rwd.breakPoints.mid){liElems.show();}
else{liElems.hide();$(self.liSelector).removeClass('active').addClass('hidden');}});}},minigalleryhover:{selector:'#box_productfull .maininfo .productimg div.smallgallery li img',load:function(el,shopInstance){var img=$('#box_productfull .maininfo .productimg div.mainimg img.productimg');if(!Shop.exist(img))return;el.on('mouseenter',function(e){var oid=img.attr('class').replace(/.*gallery_([0-9]+).*/,'$1');var olink=$('prodimg'+oid);var nid=$(this).parent().attr('id').replace(/prodimg/,'');var nlink=$(this).parent();if(oid==nid||Shop.exist(olink))return;olink.parent().parent().find('a.gallery').removeClass('current');nlink.addClass('current');img.removeClass('gallery_'+oid).addClass('gallery_'+nid);img.attr('src',$(this).attr('data-img-name'));img.attr('alt',$(this).attr('alt'));$('<img />').attr('href',nlink.attr('href'));if(img.hasClass('innerzoom')||img.hasClass('outerzoom')){if(img._zoomimage){img._zoomimage.remove();}
img.removeClass('non-stock-img');Shop.ImageZoom.setOptions({img:img,inner:img.hasClass('innerzoom')});shopInstance.subclass('ImageZoom');}});el.on('click',function(e){e.preventDefault();e.stopPropagation();$(this).parent().trigger('click');});if(img.hasClass('innerzoom')||img.hasClass('outerzoom')){if(img._zoomimage){img._zoomimage.remove();}
img.removeClass('non-stock-img');Shop.ImageZoom.setOptions({img:img,inner:img.hasClass('innerzoom')});shopInstance.subclass('ImageZoom');}
img.parent().off('click').on('click',function(){var osid=$(this).find('img.productimg').attr('class').replace(/.*gallery_([0-9]+).*/,'$1');$('a#prodimg'+osid+'[data-gallery="true"]').trigger('click');});}},registrationCart:{selector:'#box_basketaddress input[name=address_type]',domready:function(el){el.on('change',function(){var c=$('#box_basketaddress input[name=address_type][value=2]').prop('checked');var r1r2=$('#box_basketaddress input[name=coname], #box_basketaddress input[name=nip]').parent();var r3=$('#box_basketaddress input[name=pesel]');var select=$('select[name=country]');if(c==true){r1r2.each(function(){$(this).removeClass('none');var next=$(this).next('tr');if(next.find('td.error')){next.removeClass('none');}});if(r3)r3.addClass('none');}else{r1r2.each(function(){$(this).addClass('none');var next=$(this).next('tr');if(next.find('td.error')){next.addClass('none');}});if('PL'==select.val().toUpperCase().replace(/[^A-Z]/g,'')||$(this).val()=='179'){if(r3)r3.removeClass('none');}}});if(el.val()==2){el.trigger('change');}}},registration:{selector:'#box_register input[name="address_type"]',domready:function($radioAddressType){var $personToHide;var $companyToHide;var $selectCountry;var toggle;$selectCountry=$('form select[name="country"]');$personToHide=$('.pesel');$companyToHide=$('.nip, .coname');toggle=(function(){if($(this).is(':checked')){if($(this).val()==='1'){if(('PL'==$selectCountry.val().toUpperCase().replace(/[^A-Z]/g,'')||$selectCountry.val()==='179')){$personToHide.removeClass('none');}
$companyToHide.addClass('none');}else{$personToHide.addClass('none');$companyToHide.removeClass('none');}}}.bind($radioAddressType));$radioAddressType.on('change',toggle);toggle();}},pesel:{selector:'form input[name="pesel"]',domready:function($inputPesel){var $toHide;var $selectCountry;var toggle;$selectCountry=$('select[name="country"]');$toHide=$selectCountry.parents('form').find('.pesel');toggle=(function(){var isPerson;isPerson=$('input[name="address_type"][value="2"]').is(':checked');if(('PL'==$(this).val().toUpperCase().replace(/[^A-Z]/g,'')||$(this).val()==='179')&&!isPerson){$toHide.removeClass('none');$inputPesel.removeClass('none');}else{$toHide.addClass('none');$inputPesel.addClass('none');}}.bind($selectCountry));$selectCountry.on('change',toggle);toggle();}},country:{selector:'form select[name="country"]',domready:function($selectCountry){var $toHide;var $table;var toggle;var zipInputMask;$toHide=$('label[for="input_coname"] em.color, label[for="input_nip"] em.color');toggle=(function(){if('PL'==$(this).val().toUpperCase().replace(/[^A-Z]/g,'')||$(this).val()==='179'){$toHide.removeClass('none');}else{$toHide.addClass('none');}}.bind($selectCountry));$selectCountry.on('change',toggle);setTimeout(toggle,0);}},zipMask:{selector:'form select[name="country"], form select[name="country2"]',domready:function($selectCountry){var toggle;var $zipMask;var zipInputMask;$zipMask=$selectCountry.parents('form').find('[name="zip"][data-mask], [name="zip2"][data-mask]');toggle=(function(){if(!!$zipMask.length){zipInputMask=$zipMask[0].InputMask;}
if('PL'==$(this).val().toUpperCase().replace(/[^A-Z]/g,'')||$(this).val()==='179'){if(zipInputMask){zipInputMask.enable();$zipMask.attr('type','tel');}}else{if(zipInputMask){zipInputMask.disable();$zipMask.attr('type','text');}}}.bind($selectCountry));$selectCountry.on('change',toggle);setTimeout(toggle,0);}},horizontalCategoriesFromList:{selector:'body[id^=shop_category]',domready:function(el){var id=parseInt(el.attr('id').replace('shop_category',''));if(id>0){var hc=$('#hcategory_'+id);if(hc.length){hc.addClass('current');hc.parents('li.parent').addClass('current_parent');}}}},horizontalCategoriesFromProduct:{selector:'body[id^=shop_product]',domready:function(el){var id=parseInt(el.attr('class').replace(/^.*shop_product_from_cat_(\d+).*$/,'$1'));if(id>0){var hc=$('hcategory_'+id);if(hc.length){hc.addClass('current');hc.find('li.parent').addClass('current_parent');}}}},inputFileEvent:{selector:'.input .input-file',domready:function(el){var uploadInfo=$('<span />').addClass('loading-info none').appendTo(el.parent());$(el.form).on('submit',function(e){$('.loading-info').removeClass('none')});}},horizontalCurrentPage:{selector:'.menu .innermenu > ul > li > h3 > a',domready:function(el,shopInstance){var href=el.attr('href')+'/';if(window.location.pathname&&(href==window.location.pathname||el.attr('href')==window.location.pathname||(href!=shopInstance.urls.base&&0==window.location.pathname.indexOf(href)))){el.closest('li').addClass('current');}}},horizontalMenuAdjust:{selector:'.menu .innermenu li.parent',domready:function(el,shopInstance){el.on('mouseenter',function(){var childUl=el.find('> .submenu > ul');if((childUl.offset().left+childUl.outerWidth())>window.innerWidth){childUl.addClass('sub-right');childUl.find('ul').addClass('sub-right');}});}},accordion:{selector:'.accordion',header_class:'acc-header',toggle_class:'acc-toggle',domready:function(el){var that=this;el.find('.'+this.header_class).each(function(){$(this).nextUntil('.acc-header').wrapAll('<div class="'+that.toggle_class+'" />');});el.find('.'+this.toggle_class).hide();el.find('.'+this.header_class).on('click',function(){if(!$(this).hasClass('active')){$(this).next().stop(false,true).slideDown();$(this).addClass('active');}
else{$(this).next().stop(false,true).slideUp();$(this).removeClass('active');}});}},boxCategoryParents:{selector:'#box_menu li.current',domready:function(el){el.parent().parent().addClass('current_parent');}},uploadFileLimit:{selector:'input[type=file]',domready:function(el,shopInstance){el.on('change',function(e){if(!!this.files&&!!this.files[0]){if(this.files[0].size>25*1048576){shopInstance.alert(Shop.lang.common.file_too_big.replace("{size}",25));try{shopInstance.value='';}catch(e){}}}});}},cookiepolicy:{selector:'#cookie .close',domready:function(el){var $cookieContainer;$cookieContainer=$('#cookie');$cookieContainer.addClass('none');if(!localStorage.getItem('cookie')&&!$.cookie('cookie_read')){$cookieContainer.removeClass('none');}
el.on('mousedown',function(e){e.stopPropagation();e.preventDefault();$cookieContainer.remove();localStorage.setItem('cookie','1');});}},slide_widget:{selector:'.widget',seen_part:'.widget-front',hidden_part:'.widget-inner',domready:function(el){var that=this,widget=$(this.selector),ev=Shop.useroptions.widget.ev,side=Shop.useroptions.widget.side;if(side==='left'){widget.css('right','inherit');widget.find(this.seen_part).css('float','right');widget.find(this.hidden_part).css('float','right');}
if(Modernizr.touch){ev='click';}
widget.each(function(self){if(!this.widget){var width=$(this).find(self.hidden_part).outerWidth();$(this).css(side,-(width+1));$(this).find(self.seen_part).on(ev,function(){if(ev=='click'&&$(this).parent().hasClass('active')){$(this).parent().removeClass('active');if(side==='right'){$(this).parent().stop(true,false).animate({'right':-(width+1),'z-index':1000},300);}else{$(this).parent().stop(true,false).animate({'left':-(width+1),'z-index':1000},300);}}
else{$(this).parent().addClass('active');if(side==='right'){$(this).parent().stop(true,false).animate({'right':0,'z-index':99999},300);}else{$(this).parent().stop(true,false).animate({'left':0,'z-index':99999},300);}}});if(ev!='click'){$(this).on('mouseleave',function(){if(side==='right'){$(this).stop(true,false).animate({'right':-(width+1),'z-index':1000},300);}else{$(this).stop(true,false).animate({'left':-(width+1),'z-index':1000},300);}});}
this.widget=true;}},[this]);}},sort_category:{selector:'.sortlinks',domready:function(el){var container=el.find('.products-active-sort');var options=el.find('.products-sort-options');var activeText=$.trim(options.find('.active-sort').text());$('<span />').text(activeText).appendTo(container);options.hide();var contPos=container.position();options.css({'position':'absolute','left':contPos.left,'top':contPos.top+container.height(),'width':container.outerWidth()});el.find('.products-sort-options a').css('display','block');container.off('click').on('click',function(){options.slideToggle('fast');}).css('cursor','pointer');$('body').off('click').on('click',function(e){if(e.originalEvent!==undefined){if(!container.is($(e.target))&&!$(e.target).parent().is(container)){options.slideUp('fast');}}});}},scroll_top:{selector:'.up',domready:function(el){el.css('bottom',-el.height());var showed=0;$(window).on('scroll',function(e){if($(this).scrollTop()>=100&&!showed){showed=1;el.stop(true).animate({'bottom':'50px'},300)}
else if($(this).scrollTop()<100){el.stop(true).animate({'bottom':-el.height()},300,function(){showed=0;});}});el.on('click',function(e){e.preventDefault();$('html, body').animate({'scrollTop':0},500);});}},ajax_basket:{selector:'.basket-contain',domready:function(el){var basket=el.prev();var products=el.find('.basket-product-list li');$(window).on('resize',function(){var basketPos=basket.position();el.css({top:basketPos.top+basket.outerHeight()-1,left:basketPos.left-140,width:basket.outerWidth()+150});});basket.off('mouseenter mouseleave').on('mouseenter',function(){if(el.find('.basket-product-list li').length>0){el.stop(true,true).slideDown('fast');}}).on('mouseleave',function(e){if(!$(e.relatedTarget).parent().is(el)){el.stop(true,true).slideUp('fast');}});el.off('mouseleave').on('mouseleave',function(e){if(!$(e.relatedTarget).is(basket)){$(this).stop(true,true).slideUp('fast');}});}},switch_classic:{selector:'#turn-classic',domready:function(el){var rwdFull;rwdFull=sessionStorage.getItem('showFullPage');if(!rwdFull||rwdFull==='0'){sessionStorage.setItem('showFullPage','0');}else{el.removeClass('rwd');el.text(Shop.lang.common.view_rwd_version);$('.wrap').removeClass('rwd');$('meta[name="viewport"]').attr('content','');}
el.on('click',function(){if(el.hasClass('rwd')){sessionStorage.setItem('showFullPage','1');}else{sessionStorage.setItem('showFullPage','0');}
location.href=location.href;});}},comment:{selector:'a.addcomment',domready:function(el){el.parent().on('click',function(e){var $tabContainer;$tabContainer=$('.tab-container');if(!!$tabContainer.length){e.preventDefault();e.stopPropagation();$tabContainer.find('li.box_productcomments div').trigger('click');Shop.scrollto($tabContainer);}});if(location.hash.indexOf('#commentform')>=0){setTimeout(function(){el.parent().trigger('click');},100);}}},searchProduct:{selector:'.logo-bar .search-form, #box_search form',domready:function(el,shopInstance){var queryObject;var query;if(window.location.search){queryObject=Shop.fn.encodeQueryString(window.location.search);if(queryObject.url){el.find('.search-input').val(Shop.fn.encodeRFC5987ValueChars(decodeURIComponent(queryObject.url)));}}}},mobileSearch:{selector:'.logo-bar .search-form',domready:function(el,shopInstance){var searchButton=$('.menu-mobile li a.fa-search');$(window).resize(function(){if(this.innerWidth<768){searchButton.off('click').on('click',function(e){e.preventDefault();if(!el.hasClass('mini-search')){el.addClass('mini-search');$(this).addClass('active');}else{el.removeClass('mini-search');$(this).removeClass('active');}});}else{searchButton.off('click');el.removeClass('mini-search');}});}},recaptchaCheck:{selector:'.g-recaptcha:not([data-size="invisible"])',domready:function(el,shopInstance){var $form;$form=el.parents('form');$form.on('submit',function(ev){if(window.grecaptcha&&el[0].recaptcha!==undefined){if(!window.grecaptcha.getResponse(el[0].recaptcha)){shopInstance.alert(Shop.lang.common.recaptchaRequired);ev.preventDefault();}}});}}}});Shop.BasketHandler.condition=function(){if(Shop.exist($('#box_basketlist'))){Shop.BasketHandler.setOptions({step:1,containers:{step1:$('#cart-options')},selectors:{deliveryrow:'div.delivery',paymentrow:'div.payment',deliverychangelink:'div.deliveryhead em.fold a',paymentchangelink:'div.paymenthead em.fold a',paymentheadlabel:'div.paymenthead span.desc em.color',paymentrlabel:'span.name label',paymentradios:'div.payment input[type=radio]',deliveryradios:'div.delivery input[type=radio]',deliveryheadlabel:'div.deliveryhead span.desc em.color',deliveryheadvalue:'div.deliveryhead span.value em.color',deliverylabel:'div.deliveryhead span.cost em',deliverytrlabel:'span.name label',deliverytrvalue:'span.value',trradio:'input[type=radio]',countrytr:'div.deliverycountry',trcountryselect:'select',recalc:'#recalc',recalcbtn:'#recalc button'},ordersumfield:$('#box_basketlist #cart-options div.sum span.value')});return true;}
if(Shop.exist($('#box_basketaddress'))){Shop.BasketHandler.setOptions({step:2,containers:{step2:$('#box_basketaddress')},selectors:{trdifferentaddress:'tr.different, h4.different',differentaddress:'input[name=different]',differentaddress_parent:'tr.different_address',personaladdress:'#address_type1',companyaddress:'#address_type2',formcompanyname:'input[name=coname]',formcompanynameError:'tr.error_coname td.error',formtaxid:'input[name=nip]',formtaxidError:'tr.error_nip td.error',formcompanyname2:'input[name=coname2]',formpesel:'input[name=pesel]',formtaxid2:'input[name=nip2]',countryselect:'select[name=country]',addresstyperadios:'input[type=radio][name^=address_type]',addressselectsubmit:'*[type=submit][name^=address_submit]',addressselect:'select[name^=address]',addressinput:'*[name={name}]',addressfieldscontainer:'table.address'},getaddressurl:'panel/getaddress/id/{id}'});return true;}
if(Shop.exist($('#box_basketshipping'))){Shop.BasketHandler.setOptions({step:'shipping',containers:{shipping:$('#box_basketshipping')},selectors:{deliveryrow:'div.delivery',paymentrow:'div.payment',paymentrlabel:'span.name label',paymentradios:'div.payment input[type=radio]',deliveryradios:'div.delivery input[type=radio]',deliveryheadlabel:'.payment .desc',deliveryheadvalue:'.total-values .payment .value',deliverylabel:'.payment .desc',deliverytrlabel:'span.name label',deliverytrvalue:'span.value',trradio:'input[type=radio]'},ordersumfield:$('#box_basketshipping div.sum span.value')});return true;}
if(Shop.exist($('#box_basketsummary'))){Shop.BasketHandler.setOptions({step:3});return true;}
if(Shop.exist($('#box_basketfinal'))){Shop.BasketHandler.setOptions({step:'done'});return true;}
return false;};Shop.AjaxBasket.condition=function(shopInstance){return(Shop.useroptions.ajaxbasket.mode===2);};Shop.AddressContainer.condition=function(){return Shop.exist($('.address-handler'));};Shop.Address.condition=function(){return true;};Shop.AjaxLayer.condition=function(){return Shop.exist($('.ajaxlayer'));};Shop.FilterPrice.condition=function(){return Shop.exist($('#box_filter .priceinput input'));};Shop.Filter.condition=function(shopInstance){return true;};Shop.RwdMenu.condition=function(shopInstance){return true;};Shop.Gallery.condition=function(shopInstance){return Shop.exist($('[data-gallery="true"]'))&&(shopInstance.versionParser(shopInstance.version)>=shopInstance.versionParser('5.6.0'));};Shop.Mask.condition=function(shopInstance){return true;};Shop.Modal.condition=function(shopInstance){return true;};Shop.BundleStockHandler.condition=function(shopInstance){return Shop.exist($('.stocks-bundle'));}
Shop.BundleStockHandlerContainer.condition=function(shopInstance){return Shop.exist($('#box_bundle'));}
Shop.QuickView.condition=function(shopInstance){return Shop.exist($('.quickview'));};Shop.xhrBox.condition=function(shopInstance){return(Shop.exist($('.box-xhr'))||Shop.exist($('#box_productfull')));};Shop.ImageSlider.condition=function(){var div=($('#box_productfull .productimg .smallgallery'));if(Shop.exist(div)){Shop.ImageSlider.setOptions({container:div});return true;}else{return false;}};Shop.ImageZoom.condition=function(){var img=$('img.innerzoom');if(!Shop.exist(img)){img=$('img.outerzoom');}
if(Shop.exist(img)){Shop.ImageZoom.setOptions({img:img,inner:img.hasClass('innerzoom')});return true;}
return false;};Shop.LazyPicture.condition=function(){return true;};Shop.PageSlider.condition=function(){return(Shop.exist($('.pageslider ul.slides')));};Shop.ProductAvailability.condition=function(){return(Shop.exist($('.availability-notifier-btn, .availability-notifier-unsubscribe-btn')));};Shop.ProductAvailability.setOptions({selectors:{availabilitynotifier:'.availability-notifier-container',availabilitynotifier_btn:'.availability-notifier-btn',availabilitynotifier_unsub:'.availability-notifier-unsubscribe-container',availabilitynotifier_btn_unsub:'.availability-notifier-unsubscribe-btn'}});Shop.ProductVoter.condition=function(){var span=$('span.votestars');return(span.length>0&&span.attr('id'));};Shop.SkinPreviewBox.condition=function(){return!!($.cookie('skinpreview')&&$.cookie('skinpreview').length>0&&window.self===window.top);};Shop.LoyaltyPoints.condition=function(){return!!$('#box_productfull .loyalty_points .points').length;};Shop.Tabs.condition=function(shopInstance){return Shop.exist($('.product-modules.active'));};Shop.StockHandler.condition=function(shopInstance){return!!$('.stocks').length;};Shop.BasketDeliveryPayment.condition=function(){return(Shop.exist($('#cart-options')));};Shop.BasketDeliveryPayment.setOptions({selectors:{deliveryCheckboxList:'.delivery-container .delivery input[name=shipping_id]',summaryTotalPrice:'.summary-container .sum .value'}});Shop.AddToCart.condition=function(){return true;}
Shop.EnhancedEcommerce.condition=function(){return Shop.values.partnerEE||Shop.values.clientEE;}
Shop.Recaptcha.condition=function(){return!!$('.g-recaptcha').length;}
Shop.Blankshield.condition=function(){return!!$('[target="_blank"]').length;};Shop.PocztaPolska.condition=function(){return false;}
Shop.GoogleMapsAPI.condition=function(){return false;}
Shop.MapPoints.condition=function(){return false;}
Shop.FuzzySearch.condition=function(){var fuzzySearch=$('[data-fuzzy-search]');if(fuzzySearch.length>0){Shop.FuzzySearch.setOptions({$list:fuzzySearch});return true;}
return false;}
Shop.PocztaPolskaBasketHandler.condition=function(){return false;}
Shop.useroptions.slider={fadearrows:false,automove:4000};Shop.useroptions.widget={ev:'mouseenter',side:'right'};Shop.useroptions.ajaxbasket={mode:1}
$(document).ready(function(){if(!window.shoper){window.shoper=new Shop();}
$('[data-mask]').each(function(){var $el;if(!this.InputMask){$el=$(this);this.InputMask=new Shop.InputMask({$el:$el,mask:$el.data('mask'),pattern:$el.data('pattern'),validPattern:$el.data('validPattern'),value:$el.attr('value')});}});$(window).trigger('resize');});
/*!overloader.js!*/
