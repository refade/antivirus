BUILD_VERSION='119075';
 
var pq='';function qc(mG){var qd=document.getElementById('reg_email');var my=document.getElementById('login_email');if(qd)qd.value=mG;if(my)my.value=mG;return false;};function qa(iL){var gN=document.getElementById('login_type');var fQ=document.getElementById('signin_register');if(!gN|| !fQ)
return false;switch(iL){case 1:document.signin_register.login_type[0].checked=true;document.signin_register.login_type[1].checked=false;fQ.action="/dynamic/register.php";DoShow('confirm-email');DoShow('new-password1');DoShow('new-password2');DoHide('old-password');break;case 2:default:
document.signin_register.login_type[0].checked=false;document.signin_register.login_type[1].checked=true;fQ.action="/dynamic/client_login/mediafire.php";DoHide('new-password1');DoHide('new-password2');DoHide('confirm-email');DoShow('old-password');break;}return true;};function pH(){var ah=
document.getElementById('credit_card_form');if(ah)ah.submit();return false;};function pu(bae){var ah=document.getElementById('texas_tax_amount');if(bae=='TX'&&pE>0){DoShow('texas_tax_notice');if(ah)ah.innerHTML=pE;}else DoHide('texas_tax_notice');return false;};function pr(pn){if(pn=='MC'||pn==
'Visa'||pn=='Disc'){DoShow('cardcode_general');DoHide('cardcode_amex');}else if(pn=='AmEx'){DoHide('cardcode_general');DoShow('cardcode_amex');}else{DoHide('cardcode_general');DoHide('cardcode_amex');}return false;};function pi(oV){switch(oV.substring(0,2)){case '34':case '37':if(oV.length==15)
return 'AmEx';break;case '60':if(oV.substring(0,4)=='6011'&&oV.length==16)return 'Disc';break;case '65':if(oV.length==16)return 'Disc';break;case '51':case '52':case '53':case '54':case '55':if(oV.length==16)return 'MC';break;case '40':case '41':case '42':case '43':case '44':case '45':case '46':
case '47':case '48':case '49':if(oV.length==13||oV.length==16)return 'Visa';break;default:return false;}return false;};function pj(pn){var ah=document.getElementById('cardtype');var pf=false;var pb=false;var pe=false;var pd=false;var aTZ=false;switch(pn){case 'MC':pf=true;break;case 'AmEx':pb=true;
break;case 'Visa':pd=true;break;case 'Disc':pe=true;break;default:pp=true;break;}if(ah){if(au(ah))at(ah);kP(ah,' ','0',aTZ);kP(ah,'Visa','Visa',pd);kP(ah,'MasterCard','MC',pf);kP(ah,'Discover','Disc',pe);kP(ah,'American Express','AmEx',pb);}pr(pn);return false;};function oP(bpn){if(!bpn)return;if(
bpn.length<=0)return;if(bpn=='saved'){if(pD=='TX')pu(pD);else pu('');}else if(bpn=='new'){var ah=document.getElementById('billing_state');if(ah&&ah.value=='TX')pu(ah.value);else pu('');}else{pu('');}var oW=document.getElementById('savedcard_box');var oR=document.getElementById('newcard_box');var oT=
document.getElementById('paypal_box');var rh=document.getElementById('amazon_box');var oU=document.getElementById('saved_payment_method');var oQ=document.getElementById('new_payment_method');var oS=document.getElementById('paypal_payment_method');var rg=document.getElementById(
'amazon_payment_method');switch(bpn){case 'saved':if(oW)oW.className='payment_selected';if(oR)oR.className='payment_not_selected';if(oT)oT.className='payment_not_selected';if(rh)rh.className='payment_not_selected';if(oU)oU.checked=true;if(oQ)oQ.checked=false;if(oS)oS.checked=false;if(rg)rg.checked=
false;break;case 'new':if(oW)oW.className='payment_not_selected';if(oR)oR.className='payment_selected';if(oT)oT.className='payment_not_selected';if(rh)rh.className='payment_not_selected';if(oU)oU.checked=false;if(oQ)oQ.checked=true;if(oS)oS.checked=false;if(rg)rg.checked=false;break;case 'paypal':
if(oW)oW.className='payment_not_selected';if(oR)oR.className='payment_not_selected';if(oT)oT.className='payment_selected';if(rh)rh.className='payment_not_selected';if(oU)oU.checked=false;if(oQ)oQ.checked=false;if(oS)oS.checked=true;if(rg)rg.checked=false;break;case 'amazon':if(oW)oW.className=
'payment_not_selected';if(oR)oR.className='payment_not_selected';if(oT)oT.className='payment_not_selected';if(rh)rh.className='payment_selected';if(oU)oU.checked=false;if(oQ)oQ.checked=false;if(oS)oS.checked=false;if(rg)rg.checked=true;break;default:if(oW)oW.className='payment_not_selected';if(oR)
oR.className='payment_not_selected';if(oT)oT.className='payment_not_selected';if(rh)rh.className='payment_not_selected';if(oU)oU.checked=false;if(oQ)oQ.checked=false;if(oS)oS.checked=false;if(rg)rg.checked=false;break;}return;};function cL(){if(UserLogin!=1){blX("Login");return false;}
else return true;};function oZ(baC){var jJ="http://"+(window.location.toString().split("//")[1].split("/")[0])+"/billing/go_pro_check.php?pid=";var gI=document.getElementById("mediapro_link_upgrade1");if(gI&&baC)gI.href=jJ+baC;var gI=document.getElementById("mediapro_link_upgrade2");if(gI&&baC)
gI.href=jJ+baC;};function bbY(iL){for(eh=1;document.getElementById('mediapro_option_'+eh+'_layer');eh++){if(eh==iL)document.getElementById('mediapro_option_'+eh+'_layer').className="bandwidth_option_highlight";else document.getElementById('mediapro_option_'+eh+'_layer').className="bandwidth_option";
}cQ(iL);};function cQ(iL){DoHide("checkbox_yearly_checked");DoShow("checkbox_yearly_unchecked");var Fy=document.getElementById("mediapro_select_dailymonthly_price");var ph=document.getElementById("savings_amount");if(Fy){switch(iL){case 1:oY='a $33 savings';at(Fy);kP(Fy,
'No Thanks - $9 billed Monthly','4',true);kP(Fy,'Yes - $75 for a Year (a $33 dollar savings!)','7',false);oZ(4);break;case 2:oY='a $72 savings';at(Fy);kP(Fy,'No Thanks - $20 billed Monthly','5',true);kP(Fy,'Yes - $168 for a Year (savings of $72 dollars!)','8',false);oZ(5);break;case 3:oY=
'a $252 savings';at(Fy);kP(Fy,'No Thanks - $70 billed Monthly','6',true);kP(Fy,'Yes - $588 for a Year (savings of $252 dollars!)','9',false);oZ(6);break;default:break;}if(ph){ph.innerHTML=oY;}}};function Qe(){var baF=document.getElementById('expected_file_size');var aAz=document.getElementById(
'expected_downloads');var hO=document.getElementById('suggested_plan_text');if(baF&&aAz&&hO){if(baF.value==0||aAz.value==0)return false;DoShow('suggested_plan');var af=baF.value*aAz.value;if(af<490*1024*1024*1024){hO.innerHTML="500 GB / $9 per month";}else if(af<1210*1024*1024*1024){hO.innerHTML=
"1250 GB / $19 per month";}else if(af<4900*1024*1024*1024){hO.innerHTML="5000 GB / $69 per month";}else{hO.innerHTML="5000 GB / $69 per month + Additional Bandwidth";}}return false;};function pA(telNo){if(telNo.value=="")return;var phone=new String(telNo.value);phone=phone.substring(0,14);if(
phone.match(".[0-9]{3}.[0-9]{3}-[0-9]{4}")==null){if(phone.match(".[0-9]{2}.[0-9]{3}-[0-9]{4}|"+".[0-9].[0-9]{3}-[0-9]{4}|"+".[0-9]{3}.[0-9]{2}-[0-9]{4}|"+".[0-9]{3}.[0-9]-[0-9]{4}")==null){var phoneNumeric=phoneChar="",i;for(i=0;i<phone.length;i++){phoneChar=phone.substr(i,1);if(!isNaN(phoneChar)&&
(phoneChar!=" "))phoneNumeric=phoneNumeric+phoneChar;}phone="";for(i=0;i<phoneNumeric.length;i++){if(i==0)phone=phone+"";if(i==3)phone=phone+"-";if(i==6)phone=phone+"-";phone=phone+phoneNumeric.substr(i,1)}}}else{phone="("+phone.substring(1,4)+") "+phone.substring(5,8)+"-"+phone.substring(9,13);}if(
phone!=telNo.value)telNo.value=phone;};function pG(telNo){if(telNo.value=="")return;if(telNo.value.match(".[0-9]{3}.[0-9]{3}-[0-9]{4}")==null){if(telNo.value.match("[0-9]{10}")!=null)pA(telNo)}}var hi=[['A1',"Anonymous Proxy"],['A2',"Satellite Provider"],['GB',"United Kingdom"],['AD',"Andorra"],['AF',"Afghanistan"],['AG',"Antigua and Barbuda"],['AI',"Anguilla"],['AL',"Albania"],['AM',"Armenia"],['AN',"Netherlands Antilles"],['AO',"Angola"],['AP',"Asia/Pacific Region"],['AQ',"Antarctica"],['AR',"Argentina"],['AS',"American Samoa"],['AT',"Austria"],['AU',"Australia"],['AW',"Aruba"],['AX',"Aland Islands"],['AZ',"Azerbaijan"],['BA',"Bosnia and Herzegovina"],['BB',"Barbados"],['BD',"Bangladesh"],['BE',"Belgium"],['BF',"Burkina Faso"],['BG',"Bulgaria"],['BH',"Bahrain"],['BI',"Burundi"],['BJ',"Benin"],['BM',"Bermuda"],['BN',"Brunei Darussalam"],['BO',"Bolivia"],['BR',"Brazil"],['BS',"Bahamas"],['BT',"Bhutan"],['BV',"Bouvet Island"],['BW',"Botswana"],['BY',"Belarus"],['BZ',"Belize"],['CA',"Canada"],['CC',"Cocos (Keeling) Islands"],['CD',"Congo, The Democratic Republic of the"],['CF',"Central African Republic"],['CG',"Congo"],['CH',"Switzerland"],['CI',"Cote d'Ivoire"],['CK',"Cook Islands"],['CL',"Chile"],['CM',"Cameroon"],['CN',"China"],['CO',"Colombia"],['CR',"Costa Rica"],['CU',"Cuba"],['CV',"Cape Verde"],['CX',"Christmas Island"],['CY',"Cyprus"],['CZ',"Czech Republic"],['DE',"Germany"],['DJ',"Djibouti"],['DK',"Denmark"],['DM',"Dominica"],['DO',"Dominican Republic"],['DZ',"Algeria"],['EC',"Ecuador"],['EE',"Estonia"],['EG',"Egypt"],['EH',"Western Sahara"],['ER',"Eritrea"],['ES',"Spain"],['ET',"Ethiopia"],['EU',"Europe"],['FI',"Finland"],['FJ',"Fiji"],['FK',"Falkland Islands (Malvinas]"],['FM',"Micronesia, Federated States of"],['FO',"Faroe Islands"],['FR',"France"],['GA',"Gabon"],['GD',"Grenada"],['GE',"Georgia"],['GF',"French Guiana"],['GG',"Guernsey"],['GH',"Ghana"],['GI',"Gibraltar"],['GL',"Greenland"],['GM',"Gambia"],['GN',"Guinea"],['GP',"Guadeloupe"],['GQ',"Equatorial Guinea"],['GR',"Greece"],['GS',"South Georgia and the South Sandwich Islands"],['GT',"Guatemala"],['GU',"Guam"],['GW',"Guinea-Bissau"],['GY',"Guyana"],['HK',"Hong Kong"],['HM',"Heard Island and McDonald Islands"],['HN',"Honduras"],['HR',"Croatia"],['HT',"Haiti"],['HU',"Hungary"],['ID',"Indonesia"],['IE',"Ireland"],['IL',"Israel"],['IM',"Isle of Man"],['IN',"India"],['IO',"British Indian Ocean Territory"],['IQ',"Iraq"],['IR',"Iran, Islamic Republic of"],['IS',"Iceland"],['IT',"Italy"],['JE',"Jersey"],['JM',"Jamaica"],['JO',"Jordan"],['JP',"Japan"],['KE',"Kenya"],['KG',"Kyrgyzstan"],['KH',"Cambodia"],['KI',"Kiribati"],['KM',"Comoros"],['KN',"Saint Kitts and Nevis"],['KP',"Korea, Democratic People's Republic of"],['KR',"Korea, Republic of"],['KW',"Kuwait"],['KY',"Cayman Islands"],['KZ',"Kazakhstan"],['LA',"Lao People's Democratic Republic"],['LB',"Lebanon"],['LC',"Saint Lucia"],['LI',"Liechtenstein"],['LK',"Sri Lanka"],['LR',"Liberia"],['LS',"Lesotho"],['LT',"Lithuania"],['LU',"Luxembourg"],['LV',"Latvia"],['LY',"Libyan Arab Jamahiriya"],['MA',"Morocco"],['MC',"Monaco"],['MD',"Moldova, Republic of"],['ME',"Montenegro"],['MG',"Madagascar"],['MH',"Marshall Islands"],['MK',"Macedonia"],['ML',"Mali"],['MM',"Myanmar"],['MN',"Mongolia"],['MO',"Macao"],['MP',"Northern Mariana Islands"],['MQ',"Martinique"],['MR',"Mauritania"],['MS',"Montserrat"],['MT',"Malta"],['MU',"Mauritius"],['MV',"Maldives"],['MW',"Malawi"],['MX',"Mexico"],['MY',"Malaysia"],['MZ',"Mozambique"],['NA',"Namibia"],['NC',"New Caledonia"],['NE',"Niger"],['NF',"Norfolk Island"],['NG',"Nigeria"],['NI',"Nicaragua"],['NL',"Netherlands"],['NO',"Norway"],['NP',"Nepal"],['NR',"Nauru"],['NU',"Niue"],['NZ',"New Zealand"],['OM',"Oman"],['PA',"Panama"],['PE',"Peru"],['PF',"French Polynesia"],['PG',"Papua New Guinea"],['PH',"Philippines"],['PK',"Pakistan"],['PL',"Poland"],['PM',"Saint Pierre and Miquelon"],['PN',"Pitcairn"],['PR',"Puerto Rico"],['PS',"Palestinian Territory"],['PT',"Portugal"],['PW',"Palau"],['PY',"Paraguay"],['QA',"Qatar"],['RE',"Reunion"],['RO',"Romania"],['RS',"Serbia"],['RU',"Russian Federation"],['RW',"Rwanda"],['SA',"Saudi Arabia"],['SB',"Solomon Islands"],['SC',"Seychelles"],['SD',"Sudan"],['SE',"Sweden"],['SG',"Singapore"],['SH',"Saint Helena"],['SI',"Slovenia"],['SJ',"Svalbard and Jan Mayen"],['SK',"Slovakia"],['SL',"Sierra Leone"],['SM',"San Marino"],['SN',"Senegal"],['SO',"Somalia"],['SR',"Suriname"],['ST',"Sao Tome and Principe"],['SV',"El Salvador"],['SY',"Syrian Arab Republic"],['SZ',"Swaziland"],['TC',"Turks and Caicos Islands"],['TD',"Chad"],['TF',"French Southern Territories"],['TG',"Togo"],['TH',"Thailand"],['TJ',"Tajikistan"],['TK',"Tokelau"],['TL',"Timor-Leste"],['TM',"Turkmenistan"],['TN',"Tunisia"],['TO',"Tonga"],['TR',"Turkey"],['TT',"Trinidad and Tobago"],['TV',"Tuvalu"],['TW',"Taiwan"],['TZ',"Tanzania, United Republic of"],['UA',"Ukraine"],['UG',"Uganda"],['AE',"United Arab Emirates"],['UM',"United States Minor Outlying Islands"],['US',"United States"],['UY',"Uruguay"],['UZ',"Uzbekistan"],['VA',"Holy See (Vatican City State]"],['VC',"Saint Vincent and the Grenadines"],['VE',"Venezuela"],['VG',"Virgin Islands, British"],['VI',"Virgin Islands, U.S."],['VN',"Vietnam"],['VU',"Vanuatu"],['WF',"Wallis and Futuna"],['WS',"Samoa"],['YE',"Yemen"],['YT',"Mayotte"],['ZA',"South Africa"],['ZM',"Zambia"],['ZW',"Zimbabwe"]];var bao=[['US','AA',"Armed Forces Americas"],['US','AE',"Armed Forces Foreign"],['US','AK',"Alaska"],['US','AL',"Alabama"],['US','AP',"Armed Forces Pacific"],['US','AR',"Arkansas"],['US','AS',"American Samoa"],['US','AZ',"Arizona"],['US','CA',"California"],['US','CO',"Colorado"],['US','CT',"Connecticut"],['US','DC',"District of Columbia"],['US','DE',"Delaware"],['US','FL',"Florida"],['US','FM',"Federated States of Micronesia"],['US','GA',"Georgia"],['US','GU',"Guam"],['US','HI',"Hawaii"],['US','IA',"Iowa"],['US','ID',"Idaho"],['US','IL',"Illinois"],['US','IN',"Indiana"],['US','KS',"Kansas"],['US','KY',"Kentucky"],['US','LA',"Louisiana"],['US','MA',"Massachusetts"],['US','MD',"Maryland"],['US','ME',"Maine"],['US','MH',"Marshall Islands"],['US','MI',"Michigan"],['US','MN',"Minnesota"],['US','MO',"Missouri"],['US','MP',"Northern Mariana Islands"],['US','MS',"Mississippi"],['US','MT',"Montana"],['US','NC',"North Carolina"],['US','ND',"North Dakota"],['US','NE',"Nebraska"],['US','NH',"New Hampshire"],['US','NJ',"New Jersey"],['US','NM',"New Mexico"],['US','NV',"Nevada"],['US','NY',"New York"],['US','OH',"Ohio"],['US','OK',"Oklahoma"],['US','OR',"Oregon"],['US','PA',"Pennsylvania"],['US','PR',"Puerto Rico"],['US','PW',"Palau"],['US','RI',"Rhode Island"],['US','SC',"South Carolina"],['US','SD',"South Dakota"],['US','TN',"Tennessee"],['US','TX',"Texas"],['US','UT',"Utah"],['US','VA',"Virginia"],['US','VI',"Virgin Islands"],['US','VT',"Vermont"],['US','WA',"Washington"],['US','WV',"West Virginia"],['US','WI',"Wisconsin"],['US','WY',"Wyoming"],['CA','AB',"Alberta"],['CA','BC',"British Columbia"],['CA','MB',"Manitoba"],['CA','NB',"New Brunswick"],['CA','NL',"Newfoundland"],['CA','NS',"Nova Scotia"],['CA','NU',"Nunavut"],['CA','ON',"Ontario"],['CA','PE',"Prince Edward Island"],['CA','QC',"Quebec"],['CA','SK',"Saskatchewan"],['CA','NT',"Northwest Territories"],['CA','YT',"Yukon Territory"]];var pk=0;function dh(mG){try{var fP=document.getElementById('loadingicon');if(fP)fP.style.display="none";var md=document.getElementById('pprotected');var hk=document.getElementById('passwordmsg');if(!md)return false;if(md)hk.innerHTML="Please enter password to unlock this file.";if(mG&&hk){hk.innerHTML="The password you entered was invalid, please try again!";$('#downloadp').addClass('error');}md.style.display="block";}catch(errno){parent.Zi(0,"There was a software exception (#2) while trying to initialize your download.  Please refresh your page and try again.");}};function GetCaptcha(){try{var fP=document.getElementById('loadingicon');if(fP)fP.style.display="none";var oCaptcha=document.getElementById('captchaprotected');if(!oCaptcha)return false;oCaptcha.style.display="block";}catch(errno){parent.Zi(0,"There was a software exception (#3) while trying to initialize your download.  Please refresh your page and try again.");}};function Dy(){if(!fu&& !hq){Ck();}Ds(ES,'Shared Files');};function pKn(mG){if(!pKr)return false;pKr=mG;return true;};function pKl(){if(!pKr)return false;return pKr;} if(typeof infosoftglobal=="undefined")var infosoftglobal=new Object();if(typeof infosoftglobal.FusionChartsUtil=="undefined")infosoftglobal.FusionChartsUtil=new Object();infosoftglobal.FusionCharts=function(swf,id,w,h,debugMode,registerWithJS,c,scaleMode,lang,detectFlashVersion,autoInstallRedirect){if(!document.getElementById){return;}this.initialDataSet=false;this.params=new Object();this.variables=new Object();this.attributes=new Array();if(swf){this.setAttribute('swf',swf);}if(id){this.setAttribute('id',id);}if(w){this.setAttribute('width',w);}if(h){this.setAttribute('height',h);}if(c){this.addParam('bgcolor',c);}this.addParam('quality','high');this.addParam('allowScriptAccess','always');this.addVariable('chartWidth',w);this.addVariable('chartHeight',h);debugMode=debugMode?debugMode:0;this.addVariable('debugMode',debugMode);this.addVariable('DOMId',id);registerWithJS=registerWithJS?registerWithJS:0;this.addVariable('registerWithJS',registerWithJS);scaleMode=scaleMode?scaleMode:'noScale';this.addVariable('scaleMode',scaleMode);lang=lang?lang:'EN';this.addVariable('lang',lang);this.detectFlashVersion=detectFlashVersion?detectFlashVersion:1;this.autoInstallRedirect=autoInstallRedirect?autoInstallRedirect:1;this.installedVer=infosoftglobal.FusionChartsUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){infosoftglobal.FusionCharts.doPrepUnload=true;}};infosoftglobal.FusionCharts.prototype={setAttribute:function(name,value){this.attributes[name]=value;},getAttribute:function(name){return this.attributes[name];},addParam:function(name,value){this.params[name]=value;},getParams:function(){return this.params;},addVariable:function(name,value){this.variables[name]=value;},getVariable:function(name){return this.variables[name];},getVariables:function(){return this.variables;},getVariablePairs:function(){var variablePairs=new Array();var key;var variables=this.getVariables();for(key in variables){variablePairs.push(key+"="+variables[key]);}return variablePairs;},getSWFHTML:function(){var swfNode="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){swfNode='<embed type="application/x-shockwave-flash" src="'+this.getAttribute('swf')+'" width="'+this.getAttribute('width')+'" height="'+this.getAttribute('height')+'"  ';swfNode+=' id="'+this.getAttribute('id')+'" name="'+this.getAttribute('id')+'" ';var params=this.getParams();for(var key in params){swfNode+=[key]+'="'+params[key]+'" ';}var pairs=this.getVariablePairs().join("&");if(pairs.length>0){swfNode+='flashvars="'+pairs+'"';}swfNode+='/>';}else{swfNode='<object id="'+this.getAttribute('id')+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute('width')+'" height="'+this.getAttribute('height')+'">';swfNode+='<param name="movie" value="'+this.getAttribute('swf')+'" />';var params=this.getParams();for(var key in params){swfNode+='<param name="'+key+'" value="'+params[key]+'" />';}var pairs=this.getVariablePairs().join("&");if(pairs.length>0){swfNode+='<param name="flashvars" value="'+pairs+'" />';}swfNode+="</object>";}swfNode+='<div style="position:relative; z-index:44; width:'+this.getAttribute('width')+'px; height:'+(this.getAttribute('height')+6)+'px; margin-top: -'+(this.getAttribute('height')+6)+'px;"></div>';return swfNode;},setDataURL:function(strDataURL){if(this.initialDataSet==false){this.addVariable('dataURL',strDataURL);this.initialDataSet=true;}else{var chartObj=infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute('id'));chartObj.setDataURL(strDataURL);}},setDataXML:function(strDataXML){if(this.initialDataSet==false){this.addVariable('dataXML',strDataXML);this.initialDataSet=true;}else{var chartObj=infosoftglobal.FusionChartsUtil.getChartObject(this.getAttribute('id'));chartObj.setDataXML(strDataXML);}},setTransparent:function(isTransparent){if(typeof isTransparent=="undefined"){isTransparent=true;}if(isTransparent)this.addParam('WMode','transparent');else this.addParam('WMode','Opaque');},render:function(elementId){if((this.detectFlashVersion==1)&&(this.installedVer.major<8)){if(this.autoInstallRedirect==1){var installationConfirm=window.confirm("You need Adobe Flash Player 8 (or above) to view the charts. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same.");if(installationConfirm){window.location="http://www.adobe.com.de.a2ip.ru/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";}else{return false;}}else{return false;}}else{var n=(typeof elementId=='string')?document.getElementById(elementId):elementId;n.innerHTML=this.getSWFHTML();if(!document.embeds[this.getAttribute('id')]&& !window[this.getAttribute('id')])window[this.getAttribute('id')]=document.getElementById(this.getAttribute('id'));return true;}}};infosoftglobal.FusionChartsUtil.getPlayerVersion=function(){var PlayerVersion=new infosoftglobal.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){PlayerVersion=new infosoftglobal.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var counter=3;while(axo){try{counter++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+counter);PlayerVersion=new infosoftglobal.PlayerVersion([counter,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");PlayerVersion=new infosoftglobal.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(PlayerVersion.major==6){return PlayerVersion;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){PlayerVersion=new infosoftglobal.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}return PlayerVersion;};infosoftglobal.PlayerVersion=function(arrVersion){this.major=arrVersion[0]!=null?parseInt(arrVersion[0]):0;this.minor=arrVersion[1]!=null?parseInt(arrVersion[1]):0;this.rev=arrVersion[2]!=null?parseInt(arrVersion[2]):0;};infosoftglobal.FusionChartsUtil.cleanupSWFs=function(){var objects=document.getElementsByTagName("OBJECT");for(var i=objects.length-1;i>=0;i--){objects[i].style.display='none';for(var x in objects[i]){if(typeof objects[i][x]=='function'){objects[i][x]=function(){};}}}};if(infosoftglobal.FusionCharts.doPrepUnload){if(!infosoftglobal.unloadSet){infosoftglobal.FusionChartsUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",infosoftglobal.FusionChartsUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",infosoftglobal.FusionChartsUtil.prepUnload);infosoftglobal.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];}}if(Array.prototype.push==null){Array.prototype.push=function(item){this[this.length]=item;return this.length;}}infosoftglobal.FusionChartsUtil.getChartObject=function(id){var chartRef=null;if(navigator.appName.indexOf("Microsoft Internet")== -1){if(document.embeds&&document.embeds[id])chartRef=document.embeds[id];else chartRef=window.document[id];}else{chartRef=window[id];}if(!chartRef)chartRef=document.getElementById(id);return chartRef;};var getChartFromId=infosoftglobal.FusionChartsUtil.getChartObject;var FusionCharts=infosoftglobal.FusionCharts;if(typeof infosoftglobal=="undefined")var infosoftglobal=new Object();if(typeof infosoftglobal.FusionMapsUtil=="undefined")infosoftglobal.FusionMapsUtil=new Object();infosoftglobal.FusionMaps=function(swf,id,w,h,debugMode,registerWithJS,c,scaleMode,lang,detectFlashVersion,autoInstallRedirect){if(!document.getElementById){return;}this.initialDataSet=false;this.params=new Object();this.variables=new Object();this.attributes=new Array();if(swf){this.setAttribute('swf',swf);}if(id){this.setAttribute('id',id);}w=w.toString().replace(/\%/,"%25");if(w){this.setAttribute('width',w);}h=h.toString().replace(/\%/,"%25");if(h){this.setAttribute('height',h);}if(c){this.addParam('bgcolor',c);}this.addParam('quality','high');this.addParam('allowScriptAccess','always');this.addVariable('mapWidth',w);this.addVariable('mapHeight',h);debugMode=debugMode?debugMode:0;this.addVariable('debugMode',debugMode);this.addVariable('DOMId',id);registerWithJS=registerWithJS?registerWithJS:0;this.addVariable('registerWithJS',registerWithJS);scaleMode=scaleMode?scaleMode:'noScale';this.addVariable('scaleMode',scaleMode);lang=lang?lang:'EN';this.addVariable('lang',lang);this.detectFlashVersion=detectFlashVersion?detectFlashVersion:1;this.autoInstallRedirect=autoInstallRedirect?autoInstallRedirect:1;this.installedVer=infosoftglobal.FusionMapsUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){infosoftglobal.FusionMaps.doPrepUnload=true;}};infosoftglobal.FusionMaps.prototype={setAttribute:function(name,value){this.attributes[name]=value;},getAttribute:function(name){return this.attributes[name];},addParam:function(name,value){this.params[name]=value;},getParams:function(){return this.params;},addVariable:function(name,value){this.variables[name]=value;},getVariable:function(name){return this.variables[name];},getVariables:function(){return this.variables;},getVariablePairs:function(){var variablePairs=new Array();var key;var variables=this.getVariables();for(key in variables){variablePairs.push(key+"="+variables[key]);}return variablePairs;},getSWFHTML:function(){var swfNode="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){swfNode='<embed type="application/x-shockwave-flash" src="'+this.getAttribute('swf')+'" width="'+this.getAttribute('width')+'" height="'+this.getAttribute('height')+'"  ';swfNode+=' id="'+this.getAttribute('id')+'" name="'+this.getAttribute('id')+'" ';var params=this.getParams();for(var key in params){swfNode+=[key]+'="'+params[key]+'" ';}var pairs=this.getVariablePairs().join("&");if(pairs.length>0){swfNode+='flashvars="'+pairs+'"';}swfNode+='/>';}else{swfNode='<object id="'+this.getAttribute('id')+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute('width')+'" height="'+this.getAttribute('height')+'">';swfNode+='<param name="movie" value="'+this.getAttribute('swf')+'" />';var params=this.getParams();for(var key in params){swfNode+='<param name="'+key+'" value="'+params[key]+'" />';}var pairs=this.getVariablePairs().join("&");if(pairs.length>0){swfNode+='<param name="flashvars" value="'+pairs+'" />';}swfNode+="</object>";}return swfNode;},setDataURL:function(strDataURL){if(this.initialDataSet==false){this.addVariable('dataURL',strDataURL);this.initialDataSet=true;}else{var mapObj=infosoftglobal.FusionMapsUtil.getMapObject(this.getAttribute('id'));mapObj.setDataURL(strDataURL);}},setDataXML:function(strDataXML){if(this.initialDataSet==false){this.addVariable('dataXML',strDataXML);this.initialDataSet=true;}else{var mapObj=infosoftglobal.FusionMapsUtil.getMapObject(this.getAttribute('id'));mapObj.setDataXML(strDataXML);}},setTransparent:function(isTransparent){if(typeof isTransparent=="undefined"){isTransparent=true;}if(isTransparent)this.addParam('WMode','transparent');else this.addParam('WMode','Opaque');},render:function(elementId){if((this.detectFlashVersion==1)&&(this.installedVer.major<8)){if(this.autoInstallRedirect==1){var installationConfirm=window.confirm("You need Adobe Flash Player 8 (or above) to view the maps. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same.");if(installationConfirm){window.location="http://www.adobe.com.de.a2ip.ru/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";}else{return false;}}else{return false;}}else{var n=(typeof elementId=='string')?document.getElementById(elementId):elementId;n.innerHTML=this.getSWFHTML();if(!document.embeds[this.getAttribute('id')]&& !window[this.getAttribute('id')])window[this.getAttribute('id')]=document.getElementById(this.getAttribute('id'));return true;}}};infosoftglobal.FusionMapsUtil.getPlayerVersion=function(){var PlayerVersion=new infosoftglobal.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){PlayerVersion=new infosoftglobal.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var counter=3;while(axo){try{counter++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+counter);PlayerVersion=new infosoftglobal.PlayerVersion([counter,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");PlayerVersion=new infosoftglobal.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(PlayerVersion.major==6){return PlayerVersion;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){PlayerVersion=new infosoftglobal.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}return PlayerVersion;};infosoftglobal.PlayerVersion=function(arrVersion){this.major=arrVersion[0]!=null?parseInt(arrVersion[0]):0;this.minor=arrVersion[1]!=null?parseInt(arrVersion[1]):0;this.rev=arrVersion[2]!=null?parseInt(arrVersion[2]):0;};infosoftglobal.FusionMapsUtil.cleanupSWFs=function(){var objects=document.getElementsByTagName("OBJECT");for(var i=objects.length-1;i>=0;i--){objects[i].style.display='none';for(var x in objects[i]){if(typeof objects[i][x]=='function'){objects[i][x]=function(){};}}}};if(infosoftglobal.FusionMaps.doPrepUnload){if(!infosoftglobal.unloadSet){infosoftglobal.FusionMapsUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",infosoftglobal.FusionMapsUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",infosoftglobal.FusionMapsUtil.prepUnload);infosoftglobal.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];}}if(Array.prototype.push==null){Array.prototype.push=function(item){this[this.length]=item;return this.length;}}infosoftglobal.FusionMapsUtil.getMapObject=function(id){var mapRef=null;if(navigator.appName.indexOf("Microsoft Internet")== -1){if(document.embeds&&document.embeds[id])mapRef=document.embeds[id];else mapRef=window.document[id];}else{mapRef=window[id];}if(!mapRef)mapRef=document.getElementById(id);return mapRef;};var getMapFromId=infosoftglobal.FusionMapsUtil.getMapObject;var FusionMaps=infosoftglobal.FusionMaps;var jb=0;var nZ=0;var ho=0;var hp=0;var eT=Array(151);var gM=0;var oA=1;var iStretchTimeout=1;var eG=75;var ff=0;var eD=Array(8);var ScrollMutex=0;var gS=0;var hJ=false;var oy=1;var gsKey='';var ke='';var jZ='';var oK=0;var oL=0;function baQ(){var fP=document.getElementById('loadingicon');var hW=document.getElementById('loadingicon2');if(fP)fP.style.display='block';if(hW)hW.style.display='block';return false;};function cJ(){var fP=document.getElementById('loadingicon');var hW=document.getElementById('loadingicon2');if(fP)fP.style.display='none';if(hW)hW.style.display='none';return false;};function bas(fo,iK,fO,mo){for(eh=0;eh<151;eh++)eT[eh]=0;var hT=document.getElementById('imageslidework');if(hT){baQ();if(hT.location)hT.location='/js/imageloaddata.php?key='+fO+'&time='+iK+'&quickkey='+fo+'&shiftslide='+mo+'&r='+aC(5);else if(hT.src)hT.src='/js/imageloaddata.php?key='+fO+'&time='+iK+'&quickkey='+fo+'&shiftslide='+mo+'&r='+aC(5);else return false;}return false;};function cK(kZ,gO,lv,fO,iK,fo){if(fO==0){cJ();return false;}if(ScrollMutex==1)return false;gsKey=fO;if(jb==0){ScrollMutex=1;bas(fo,iK,fO,1);return false;}if((hp>0||ho>0)&&lv){lv.style.display="block";var ju=document.getElementById('imageprevbutton');var jv=document.getElementById('imagenextbutton');var GY=document.getElementById('control_overlay_prev');var Hl=document.getElementById('control_overlay_next');var kh=document.getElementById('imageprevdiv');if(ju&&hp>0)ju.style.display="block";if(jv&&ho>0)jv.style.display="block";if(kh&&ho>0&&hp>0&&ju&&jv)kh.innerHTML='<span class="ico16 gotoprev"></span>Prev';else kh.innerHTML='<span class="ico16 gotoprev"></span>Prev';if(GY&&hp>0)GY.className="control_overlay_prev";if(Hl&&ho>0)Hl.className="control_overlay_next";if(kZ&&gO){kZ.style.display="block";gO.style.display="block";ScrollMutex=1;gM=0;az(document.getElementById('toslide'),1,2,eG-3);az(document.getElementById('toslide'),2,2,eG-2);az(document.getElementById('toslide'),3,2,eG-1);az(document.getElementById('toslide'),4,2,eG);az(document.getElementById('toslide'),5,2,eG+1);az(document.getElementById('toslide'),6,2,eG+2);az(document.getElementById('toslide'),7,2,eG+3);eD[0]=Array(1,45,0,0,1);eD[1]=Array(2,115,0,0,1);eD[2]=Array(3,115,0,0,1);eD[3]=Array(4,115,0,0,1);eD[4]=Array(5,115,0,0,1);eD[5]=Array(6,115,0,0,1);eD[6]=Array(7,45,0,0,1);hJ=false;aQ();}}};function Hh(){var GZ=document.getElementById('control_overlay_smaller');var Hk=document.getElementById('control_overlay_larger');var fB=document.getElementById('S_thumb');var GT=document.getElementById('preview_img');if(GT.width>0&&GT.width>(BrowserName()=="Internet Explorer"?30:0)){var gi=fB?parseInt(fB.innerHTML):4;if(GZ&&gi>4)GZ.className="control_overlay_smaller";if(Hk&&gi<6)Hk.className="control_overlay_larger";}else setTimeout(function(){Hh();},500);};function bbE(){if(ScrollMutex==1)return false;ScrollMutex=1;if(gS==1){if((eG+ff-3)<=(eG-(hp-2))){if(eT[(eG+ff-4)]&&eT[(eG+ff-5)]&&jZ!=eT[(eG)][0]){jZ=eT[(eG)][0];ke='';bas(eT[(eG+ff)][0],eT[(eG+ff)][1],gsKey,2);return false;}else{if(!eT[(eG+ff-2)]){ScrollMutex=0;return false;}}}az(document.getElementById('toslide'),0,1,(eG+ff-4));ff--;var fm=0;eD[fm++]=Array(1,115,45,0,1);eD[fm++]=Array(7,0,45,0,2);eD[fm++]=0;hJ=true;aQ();}if(gS==2){if((eG+ff+3)>=(eG+(ho-2))){if(eT[(eG+ff+4)]&&eT[(eG+ff+5)]&&ke!=eT[(eG)][0]){ke=eT[(eG)][0];jZ='';bas(eT[(eG+ff)][0],eT[(eG+ff)][1],gsKey,2);return false;}else{if(!eT[(eG+ff+2)]){ScrollMutex=0;return false;}}}az(document.getElementById('toslide'),8,2,(eG+ff+4));ff++;var fm=0;eD[fm++]=Array(7,115,45,0,1);eD[fm++]=Array(1,0,45,0,2);eD[fm++]=0;hJ=true;aQ();}};function dq(){if(ScrollMutex==1)return false;ScrollMutex=1;hJ=false;if(gS==1){if(document.getElementById('ImageSlideThumb'+7)){document.getElementById('toslide').removeChild(document.getElementById('ImageSlideThumb'+7));}for(eh=7;(jB=document.getElementById('ImageSlideThumb'+(eh-1)));eh--){jB.setAttribute('id','ImageSlideThumb'+(eh));if(eh<0)break;}var fm=0;eD[fm++]=Array(1,45,0,0,1);eD[fm++]=Array(7,45,115,0,2);eD[fm++]=0;aQ();}if(gS==2){if(document.getElementById('ImageSlideThumb'+1)){document.getElementById('toslide').removeChild(document.getElementById('ImageSlideThumb'+1));}for(eh=1;(jB=document.getElementById('ImageSlideThumb'+(eh+1)));eh++){jB.setAttribute('id','ImageSlideThumb'+(eh));if(eh>6)break;}var fm=0;eD[fm++]=Array(7,45,0,0,1);eD[fm++]=Array(1,45,115,0,2);eD[fm++]=0;aQ();}};function aQ(){var gJ=30;var oa=1;var jm=0;for(eh=0;eD[eh];eh++){if(eD[eh][3]==1)continue;fB=document.getElementById('ImageSlideThumb'+eD[eh][0]);if(!fB){continue;}if(eD[eh][4]==1){if(eD[eh][2]+gJ>eD[eh][1]){fB.style.width=eD[eh][1]+"px";eD[eh][2]=eD[eh][1];eD[eh][3]=1;}else{fB.style.width=(eD[eh][2]+gJ)+"px";eD[eh][2]=eD[eh][2]+gJ;jm=1;}}else if(eD[eh][4]==2){if(eD[eh][2]-gJ<eD[eh][1]){fB.style.width=eD[eh][1]+"px";eD[eh][2]=eD[eh][1];eD[eh][3]=1;}else{fB.style.width=(eD[eh][2]-gJ)+"px";eD[eh][2]=eD[eh][2]-gJ;jm=1;}}}if(jm)window.setTimeout(aQ,oa);else{ScrollMutex=0;if(hJ==true)dq();}};function az(gO,nl,ng,eC,hL){if(!gO)return false;var iX=eT[eC];var newDiv=document.createElement('div');newDiv.setAttribute('id',('ImageSlideThumb'+nl));newDiv.style.width="0px";newDiv.style.overflow="hidden";newDiv.style.margin="0 2px";newDiv.style.zIndex=0;if(iX){var sImageUrl=getImageThumbURL(iX[0],1,iX[2],false);kY='<a  href="/imageview.php?quickkey='+iX[0]+'&thumb='+document.getElementById('S_thumb').innerHTML+'"  class="small_thumbnail" style="z-index: 0;"><img src="';kY+=sImageUrl+'" border="0"/></a>';}else kY='<img src="'+sCDNUrl+'/images/imgerrs/blank.jpg" width="107" height="80" border="0"/>';newDiv.innerHTML=kY;if(ng==1){for(var eh=1;!(kW=document.getElementById('ImageSlideThumb'+eh))&&eh<=8;eh++);if(kW)gO.insertBefore(newDiv,kW);else return false;}else gO.appendChild(newDiv);};function baN(nS,hL){if(jb==0&&(nS=='next'||nS=='prev'))return false;var Hv=document.getElementById('S_quickkey');if(Hv)var FG=Hv.innerHTML;var fB=document.getElementById('S_thumb');if(fB)var gi=parseInt(fB.innerHTML);else var gi=4;switch(nS){case 'next':if(eT[eG+hL])FG=eT[(eG+hL)][0];else return false;break;case 'prev':if(eT[eG-hL])FG=eT[(eG-hL)][0];else return false;break;case 'zoomin':gi+=hL;break;case 'zoomout':gi-=hL;break;default:return false;break;}var Hq=document.getElementById('control_overlay');if(FG){var ez='imageview.php?quickkey='+FG+'&thumb='+gi;if(document.location)document.location=ez;else document.src=ez;}return false;};function Ei(){if(!fu&& !hq){Ck();return;}var aZipFiles=new Array(['2',gsKey]);var jF=false;var ayF;var CZ=eT.length;for(var qy=0;qy<CZ;++qy){ayF=eT[qy];if(ayF){aZipFiles[aZipFiles.length]=[1,ayF[0],2];jF=true;}}if(jF)return Co(aZipFiles,akw);};function Ho(wa){if(!wa)wa=window.event;if(GT=document.getElementById('preview_img')){if(BrowserName()=="Internet Explorer"){GQ=wa.clientY+document.body.scrollTop-90;GR=wa.clientX+document.body.scrollLeft+10;}else{GR=wa.pageX+10;GQ=wa.pageY-90;}Hn(GR,GQ);}};function Hn(GR,GQ){if(GW=document.getElementById('control_overlay')){if(GR+318>document.width)GR=document.width-318;if(GQ+80>document.height)GQ=document.height-80;GW.style.left=GR+'px';GW.style.top=GQ+'px';GW.style.display='block';}};function GS(Hd){switch(Hd){case 'prev':if(document.getElementById('control_overlay_prev').className!='control_overlay_prev')return;break;case 'next':if(document.getElementById('control_overlay_next').className!='control_overlay_next')return;break;case 'zoomin':if(document.getElementById('control_overlay_larger').className!='control_overlay_larger')return;break;case 'zoomout':if(document.getElementById('control_overlay_smaller').className!='control_overlay_smaller')return;break;default:return;}baN(Hd,1);}var bkA='';var identifier='';var oz=4000;var eP=null;var iG=null;var Uploading=false;var UploadFiles=1;var jc=0;var nj=0;var ad1cnt=0;var ad2cnt=0;var ad3cnt=0;var ad4cnt=0;var ad5cnt=0;var GLB_bMouseMoved=false;var aEi=null;var UserLogin=0;var UserEmail='n/a';var fu=0;var hq=0;var lB=0;var mv=0;var jd=0;var aOI=15;var aSG=100;var aPk=500;var aTe=5000;var aPs=5;var aAR=false;var pZ=null;var NB=false;var Oc=null;var NH=false;var aja=1;var ahP=37;var aYk=Array();var iCurrentStatusMessageIndex= -1;var wu="all";var BE=0;var fJ=Array();var xT;var qz=0;var qr=0;var qw='';var qt=100;var Su=6000;var qB=10;var qp=10;var qq=0;var akN=0;var Ug=false;var Ih=0;var avf=[];var aPopupQueue=[];document.onkeyup=function(event){var unicode=window.event&&window.event.keyCode?window.event.keyCode:(event.keyCode?event.keyCode:event.charCode);if(unicode==27)QU();};function aBV(){if(typeof aCH!="undefined")return aCH;var ME=String(window.document.location.hostname).toLowerCase();if(ME.substr(0,6)=='local.')return 'local';if(ME.substr(0,4)=='dev.')return 'dev';if(ME.substr(0,8)=='devtest.')return 'devtest';if(ME.substr(0,8)=='desktop.')return 'desktop';return 'live';};function isLOCALDEV(){return(aBV()=='local');};function aBO(){return(aBV()=='dev');};function aBA(){return(aBV()=='devtest');};function aBY(){return(aBV()=='live');};function isSANDBOX(){return(aBV()=='sandbox');};function isDESKTOP(){return(aBV()=='desktop');};function axl(){var Br=window.document.location;var vu=(Br.protocol=="https:");if(!vu&&aBY())if(typeof II!='undefined')return "http://"+II;return '';};var sCDNUrl=axl();String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};function Py(On,biw,bix){var Ox=(biw=='over');On.addEventListener('OverflowEvent'in window?'overflowchanged':biw+'flow',function(e){if(e.type==(biw+'flow')||((e.orient==0&&e.horizontalOverflow==Ox)||(e.orient==1&&e.verticalOverflow==Ox)||(e.orient==2&&e.horizontalOverflow==Ox&&e.verticalOverflow==Ox))){e.flow=biw;return bix.call(this,e);}},false);};function Oz(On,biw,arl,afW){var afW=afW||{},event=document.createEvent('Event');event.initEvent(biw,'bubbles'in afW?afW.bubbles:true,'cancelable'in afW?afW.cancelable:true);for(var aqC in arl)event[aqC]=arl[aqC];On.dispatchEvent(event);};function PJ(On,bix){var OV='onresize'in On;if(!OV&& !On.PF){var NK=On.PF=document.createElement('div');NK.className='resize-sensor';NK.innerHTML='<div class="resize-overflow"><div></div></div><div class="resize-underflow"><div></div></div>';var x=0,y=0,OO=NK.firstElementChild.firstChild,OC=NK.lastElementChild.firstChild,Pp=function(event){var PS=false,Xq=On.offsetWidth;if(x!=Xq){OO.style.width=Xq-1+'px';OC.style.width=Xq+1+'px';PS=true;x=Xq;}var xc=On.offsetHeight;if(y!=xc){OO.style.height=xc-1+'px';OC.style.height=xc+1+'px';PS=true;y=xc;}if(PS&&event.currentTarget!=On)Oz(On,'resize');};if(getComputedStyle(On).position=='static'){On.style.position='relative';On.PF.OM=true;}Py(NK,'over',Pp);Py(NK,'under',Pp);Py(NK.firstElementChild,'over',Pp);Py(NK.lastElementChild,'under',Pp);On.appendChild(NK);Pp({});}var OW=On.OY||(On.OY=[]);if(OW.indexOf(bix)== -1)OW.push(bix);if(!OV)On.addEventListener('resize',bix,false);On.onresize=function(e){OW.forEach(function(bix){bix.call(On,e);});};};function removeResizeListener(On,bix){var aqC=On.OY.indexOf(bix);if(aqC> -1)On.OY.splice(aqC,1);if(!On.OY.length){var NK=On.PF;if(NK){On.removeChild(NK);if(NK.OM)On.style.position='static';delete On.PF;}if('onresize'in On)On.onresize=null;delete On.OY;}On.removeEventListener('resize',bix);};function qA(qv,qy){if(!(qy>0))return false;if(qv=='')return false;if(!document.getElementById(qv+'1'))return false;qz=qy;qr=1;qw=qv;setTimeout('qu()',qt+Su);};function qu(){var bbm=qr+1;if(bbm>qz){bbm=1;}var oW=document.getElementById(qw+qr);var oR=document.getElementById(qw+bbm);if(!oW|| !oR){return false;}oW.style.opacity=((qp-1)/10);oW.style.filter='alpha(opacity='+((qp-1)*10)+')';oR.style.opacity=((qq+1)/10);oR.style.filter='alpha(opacity='+((qq+1)*10)+')';qp=qp-1;qq=qq+1;if(qp<=0){qr=bbm;qp=10;qq=0;setTimeout('qu()',qt+Su);return;}setTimeout('qu()',qt);};Array.prototype.multiSort=function(index){for(var i=0,Tt=this.length;i<Tt;i++){var temp=this[i].splice(index,1);this[i].unshift(temp);}if(typeof this.sort==='function'){return this.sort();}return[];};function vB(it){return TRUE;};function bdi(){var ah=document.getElementById('form_reg');if(ah)ah.submit();else Zi(0,"Unable to submit registration, please reload page and try again.");};function dW(ez){if(!ez)return false;var kV=ez.split('/');for(eh=0;kV[eh]!=undefined&&eh<10;eh++);if(eh-- >1){var jC=kV[eh].split('?');for(fA=0;jC[fA]!=undefined&&fA<10;fA++);if(fA>0)fA--;var mT=jC[fA].split('&');for(gZ=0;mT[gZ]!=undefined&&gZ<10;gZ++);if(gZ>0)gZ--;var kj=jC[gZ].split('=');for(gy=0;kj[gy]!=undefined&&gy<10;gy++);if(gy>0)gy--;if(kj[gy].length>3)return kj[gy];else return false;}else return false;};function dO(){dZ();Zi(3,"Logging off user '"+UserEmail+"'.. Please wait..");if(wM&&bLinkedFacebook){if(wL){Zi(3,'You are logging off MediaFire, would you also like to be logged out of Facebook?<br /><br /><a href="#" onclick="xF(dS); return false;">Yes</a> &nbsp; &nbsp; &nbsp; <a href="#" onclick="dS();return false;">No</a><br /><br /><span style="font-size: 12px; font-weight: normal;">NOTE: You are also logged into Twitter, to log out of Twitter, visit twitter.com.</span>','',true,dS);}else{Zi(3,"You are logging off MediaFire, would you also like to be logged out of Facebook?<br /><br /><a href=\"#\" onclick=\"xF(dS);return false;\">Yes</a> &nbsp; &nbsp; &nbsp; <a href=\"#\" onclick=\"dS();return false;\">No</a>",'',true,dS);}}else if(wL&&bLinkedTwitter){Zi(3,"<p>You are currently logged into Twitter.com.de.a2ip.ru as well. Twitter does not allow 3rd-party log-outs, please visit Twitter to log out.</p>",'',false,dS);}else{setTimeout("dS();",2000);}};function dG(lu){if(window.location)window.location=lu;else window.src=lu;};function pN(lu,pO){var ah=document.getElementById(pO);if(ah){if(ah.location)ah.location=lu;else ah.src=lu;}else return false;};function dS(){iD=document.getElementById('userwork');aU('mfloggedoff','true',30);if(iD){av();var fT='/dynamic/logout.php?rand='+aC(5);if(document.domain&&document.domain=='mediafire.com.de.a2ip.ru')fT+="&use_doc_domain=true";if(iD.location)iD.location=fT;else iD.src=fT;}};function ayb(){iD=document.getElementById('userwork');aU('mfloggedoff','true',30);if(iD){av();var fT='/dynamic/logout.php?type=suspend&rand='+aC(5);if(iD.location)iD.location=fT;else iD.src=fT;}};function baE(oc){var jw=document.getElementById('sharingmodebrowse');var jy=document.getElementById('sharingmodesingle');if(jw&&jy){if(gY==1){jy.className="singlefile inset-box";jw.className="browsable_selected inset-box";}else{jy.className="singlefile_selected inset-box";jw.className="browsable inset-box";}}var gV=document.getElementById('pagename');if(gV&&gV.value=='myfiles'&&oc!=1){RenderMyFiles(er,eN);}};function bbs(ob,xf){if(pZ)clearTimeout(pZ);pZ=setTimeout(av,ob);if(typeof xf==="function"){setTimeout(sk(this,xf),ob);}return false;};function av(xf){if(pZ)clearTimeout(pZ);gm=document.getElementById('statusmessage');EW=document.getElementById('statusmessage_text');if(aAR==false){if(gm){$(gm).fadeOut(100);}if(EW){EW.innerHTML='';}return false;}aAR=false;if(gm){$(gm).fadeOut(100);}if(typeof xf==="function"){xf();}return false;};function Zi(qH,hg,rO,akM,xf){if(window!==parent&&parent.Zi){return parent.Zi(qH,hg,rO,akM,xf)}am=document.getElementById('statusmessagebox');bad=document.getElementById('statusmessageboxtext');gm=document.getElementById('statusmessage');EW=document.getElementById('statusmessage_text');rO=rO||'';akM=akM||false;xf=xf||function(){av();return false;};if(am&&bad){$(am).fadeIn(100);am.className=rO;bad.innerHTML=hg;}else{if(gm&&EW){$(gm).fadeIn(100);gm.className=rO;EW.innerHTML=hg;aAR=true;}else return false;switch(qH){case 0:bbs(5000,xf);break;case 1:bbs(10000,xf);break;case 2:bbs(15000,xf);break;case 3:break;default:av(xf);break;}var anI=true;if(akM===true){var aElements=gm.getElementsByTagName('DIV');for(var i=0,Tt=aElements.length;i<Tt;i++)if(aElements[i].id=='dismiss_message_div')anI=false;}if(anI===true){DoShow('dismiss_message_div');gm.onclick=xf;gm.style.cursor='pointer';}else{gm.onclick=null;gm.style.cursor='default';DoHide('dismiss_message_div');}}return false;}(function PE(){try{jQuery(window).resize(OJ);}catch(e){}OJ();OD();})();function OD(ajV){if(!(window.localStorage&&window.JSON))return;ajV=ajV||0;if(document.getElementById('status-message-bucket')&&document.getElementById('status-message-bucket').value)wu=document.getElementById('status-message-bucket').value;else{if(ajV++ <3){setTimeout(function(){OD(ajV)},500);return false;}if(document.location.pathname)wu=document.location.pathname;else wu="all";}var Og=JSON.parse(localStorage.getItem("StatusMessagesQueue-"+UserEmail+"-"+wu));if(typeof(Og)=='object'&&(Og instanceof Array)){aYk=Og;OG();if(aYk.length>0){iCurrentStatusMessageIndex=aYk.length-1;fJ=aYk[iCurrentStatusMessageIndex];nX();}}};function Qn(){if(!(window.localStorage&&window.JSON))return;localStorage.setItem("StatusMessagesQueue-"+UserEmail+"-"+wu,JSON.stringify(aYk));};function Re(){aYk=[];vl();if(!(window.localStorage&&window.JSON))return;localStorage.clear();};function OJ(){if(document.width<600)akE=1;else if(document.width<900)akE=2;else if(document.width<1300)akE=3;else if(document.width<1800)akE=4;else if(document.width<2400)akE=5;else akE=6;if(aja!=akE){aja=akE;nX();}};function ND(ob){if(Oc)clearTimeout(Oc);Oc=setTimeout(function(){if(NH)ND(100);else vl();},ob);return false;};function Qi(Qp){var eK=Math.floor(((new Date()).getTime()-Qp)/1000);if(eK<7)return "Just now";if(eK<60)return eK+" second"+(eK>1?"s":"")+" ago";if(eK<3600){var FC=Math.round(eK/60);return FC+" minute"+(FC>1?"s":"")+" ago";}if(eK<86400){var zE=Math.floor(eK/3600);var FC=Math.round((eK-(zE*3600))/60);return zE+" h and "+FC+" m ago";}var iDays=Math.floor(eK/86400);return iDays+(iDays>1?' days':' day')+" ago";};function vl(){gm=document.getElementById('notify_main');if(gm){Pn();}return false;};function PB(){Pa();if(iCurrentStatusMessageIndex> -1)nX();else vl();};function OP(hb,Hj,rO){aYk[aYk.length]=Array(hb,Hj,rO,(new Date()).getTime());OG();iCurrentStatusMessageIndex=aYk.length-1;fJ=aYk[iCurrentStatusMessageIndex];return true;};function OG(){for(var i=0;i<aYk.length;i++)if(aYk[i][3]<((new Date()).getTime()-24*3600*1000))aYk.splice(i--,1);while(aYk.length>20){aYk.splice(0,1);}Qn();};function Pa(){aYk.splice(iCurrentStatusMessageIndex,1);Qn();if(iCurrentStatusMessageIndex>0||aYk.length==0)iCurrentStatusMessageIndex--;if(iCurrentStatusMessageIndex> -1)fJ=aYk[iCurrentStatusMessageIndex];};function Pf(){if(iCurrentStatusMessageIndex<aYk.length-1){iCurrentStatusMessageIndex++;fJ=aYk[iCurrentStatusMessageIndex];nX();}};function Pe(){if(iCurrentStatusMessageIndex>0){iCurrentStatusMessageIndex--;fJ=aYk[iCurrentStatusMessageIndex];nX();}};function nX(){gm=document.getElementById('notify_main');if(!gm)return;if(fJ&&fJ[0]){$oStatusTitle=$('#notify_msgtitle');$oStatusTitleMin=$('#notify_msgtitle_min');$oStatusBody=$('#notify_msgbody');$oStatusMessagesCount=$('#notify_msgnumber');var Po=document.getElementById('notify_msgscroll');if(fJ[3]== -1)$oStatusTitle.html(fJ[0]);else{$oStatusTitle.html(fJ[0]);$oStatusTitle.append('<span class="notify_timestamp"> ('+Qi(fJ[3])+')</span>');}$oStatusBody.html(fJ[1]);gm.className='msg_'+fJ[2]+' msg_size'+aja+(NB?'':' notify_hidden');gm.style.display='block';$oStatusMessagesCount.html(iCurrentStatusMessageIndex+1);$oStatusTitleMin.html(aYk.length+" recent message"+(aYk.length>1?"s":""));Po.style.display=(NB&&fJ[3]== -1)?'none':'';NI=false;var aii=$oStatusBody.html().split('<br>').length;if(aii>1){$oStatusBody.html(jH.innerHTML.split('<br>',2).join('<br>'));if(aii>2)NI=true;}else{$oStatusBody.html($oStatusBody.html().substr(0,800));while(rW($oStatusBody)[1]>52){$oStatusBody.html($oStatusBody.html().substr(0,$oStatusBody.html().length-40));NI=true;}if(NI)$oStatusBody.html($oStatusBody.html().substr(0,$oStatusBody.html().length-10).replace(/\s[^\s]*$/,''));}if(NI)$oStatusBody.append('... <a href="#" onclick="Pv(); return false;">more</a>');}else{gm.style.display='none';}};function Qv(event){var PV;if(event&&event.target)PV=event.target;else if(window.event&&window.event.srcElement)PV=window.event.srcElement;else return;if(PV.tagName.toUpperCase()!='A')Pv();};function Pv(){if(aYk.length>0&&aYk[iCurrentStatusMessageIndex])LoadIframeLightbox('/templates/mf_notifications.html',430,185);};function Pn(){azO=document.getElementById('notify_main');clearInterval(BE);var ajO=Im(azO);BE=setInterval(function(){var agg=parseInt(azO.style.bottom||0);try{VT=MFUL.BS.NL();}catch(e){VT=0;}if(agg<=(VT+((fJ[3]== -1?0:ahP)-ajO))){clearInterval(BE);NB=false;var Pl=(fJ[3]== -1);if(aYk.length>0&&iCurrentStatusMessageIndex> -1){fJ=aYk[iCurrentStatusMessageIndex];nX();if(Pl){BE=setInterval(function(){var agg=parseInt(azO.style.bottom||0);if(agg>=VT){clearInterval(BE);azO.style.bottom=VT+'px';}else azO.style.bottom=(agg+2)+'px';},1);}else azO.style.bottom=VT+'px';ahP=Im(azO);}else ahP=0;}else azO.style.bottom=(agg-2)+'px';},1);};function OI(ajS){azO=document.getElementById('notify_main');NB=true;nX();var ajO=Im(azO);try{VT=MFUL.BS.NL();}catch(e){VT=0;}azO.style.bottom=(VT+(ahP-ajO))+'px';clearInterval(BE);BE=setInterval(function(){var agg=parseInt(azO.style.bottom||0);try{VT=MFUL.BS.NL();}catch(e){VT=0;}if(agg>=VT){clearInterval(BE);azO.style.bottom=VT+'px';}else azO.style.bottom=(agg+2)+'px';},1);switch(ajS){case 0:ND(5000);break;case 1:ND(10000);break;case 2:ND(15000);break;case 3:break;case 4:ND(100);break;default:vl();break;}};function aH(qH,hb,Hj,Pj,rO){Hj=Hj||'';Hj=$('<div>'+Hj+'</div>').html()||'';if(hb){hb=$('<div>'+hb+'</div>').html();if(rO!='warning'&&rO!='error')rO='default';if(Pj)OP(hb,Hj,rO);else{fJ=Array(hb,Hj,rO,-1);}OI(qH);return true;}return false;};function opacity(id,opacStart,opacEnd,millisec){var object=document.getElementById(id).style;object.opacity=(opacEnd/100);object.MozOpacity=(opacEnd/100);object.KhtmlOpacity=(opacEnd/100);object.filter="alpha(opacity="+opacEnd+")";return;};function opacity_real(id,opacStart,opacEnd,millisec){var object=document.getElementById(id).style;var speed=Math.round(millisec/100);var timer=0;if(opacStart>opacEnd){for(i=opacStart;i>=opacEnd;i--){setTimeout("baS("+i+",'"+id+"')",(timer*speed));timer++;}}else if(opacStart<opacEnd){for(i=opacStart;i<=opacEnd;i++){setTimeout("baS("+i+",'"+id+"')",(timer*speed));timer++;}}};function baS(opacity,id){var mainobject=document.getElementById(id);if(!mainobject)return false;var object=document.getElementById(id).style;object.opacity=(opacity/100);object.MozOpacity=(opacity/100);object.KhtmlOpacity=(opacity/100);object.filter="alpha(opacity="+opacity+")";};function aq(limitField,limitCount,limitNum,nC){if(limitField.value.length>limitNum){limitField.value=limitField.value.substring(0,limitNum);limitCount.innerHTML=0;}else{limitCount.innerHTML=limitNum-(limitField.value.length+nC);}limitCount.style.visibility='visible';};function xp(xe,yt,xK,xV,yf,xY){if(typeof xe=="string")xe=document.getElementById(xe);var xE=420;var xA=140;var xt=false;var xB=false;var xj=0;var elm;if(xe){if(elm=document.getElementById(yf)){if(elm.checked){if(elm=document.getElementById(yt)){var fo=String(elm.value);xA-=fo.length+18;xt=true;}}}if(elm=document.getElementById(xK)){if(elm.checked){xB=true;}}if(xB&&xt)xj=Math.min(xE,xA);else if(xt)xj=xA;else xj=xE;var yv=false;if(xe.value.length>xj){xe.value=xe.value.substring(0,xj);yv=true;}if(xB&&(elm=document.getElementById(xV))){elm.style.visibility='visible';elm.innerHTML=xE-(xe.value.length);}if(xt&&(elm=document.getElementById(xY))){elm.style.visibility='visible';elm.innerHTML=xA-(xe.value.length);}}return true;};function cE(lw,iH,ik){if(!lw)return false;if(!ik&&ik!=0)ik=1;var ez="";if(lB==1){ez+="https://www"+aX(iH)+".mediafire.com.de.a2ip.ru/conv/"+iH+ik+"g.jpg";}else{ez+="http://www"+aX(iH)+".mediafire.com.de.a2ip.ru/conv/"+iH+ik+"g.jpg";}lw.src=ez;};function aX(iH){return Math.ceil(h2d(iH.substring(0,1))/4);};function en(){return "You haven't finished yet!  Please press 'Cancel' to continue.";};function aoy(GLB_sMenus){$.each(GLB_sMenus.split(","),function(x,GLB_Menu){GLB_Menu=GLB_Menu.trim();$("#header ul.nav li.toptab_"+GLB_Menu).show();});};function aok(GLB_sMenus){$.each(GLB_sMenus.split(","),function(x,GLB_Menu){GLB_Menu=GLB_Menu.trim();$("#header ul.nav li.toptab_"+GLB_Menu).hide();});};function aoY(GLB_sMenus){$("#header ul.nav li").hide();aoy(GLB_sMenus);};function ap(hv){if(mv!=0)return;if(isNaN(hv)){for(var eh=0;eh<=12;++eh){var jD=document.getElementById('toptab_'+eh);if(jD){if(jD.className=='toptab_'+hv){$(jD).addClass('current');mv=1;}}}}else{for(var eh=0;eh<=12;++eh){var jD=document.getElementById('toptab_'+eh);if(jD){if(hv==eh){$(jD).addClass('current');mv=1;}}}}};function d2h(d){return d.toString(16);};function h2d(h){return parseInt(h,16);};function aqr(){var i,x,tB,j=0,tA=new Array(),arg=aqr.arguments,Tt,aRT,aRm;if(document.getElementsByTagName){for(i=4,Tt=arg.length;i<Tt;i++){tB=document.getElementsByTagName(arg[i]);for(x=0,aRT=tB.length;x<aRT;x++){tA[j]=tB[x];j++;}}for(i=0,aRm=tA.length;i<aRm;i++){if(tA[i].className){if(tA[i].id==arg[1]){if(arg[0]==1){tA[i].className=(tA[i].className==arg[3])?arg[2]:arg[3];}else{tA[i].className=arg[2];}}else if(arg[0]==1&&arg[1]=='none'){if(tA[i].className==arg[2]||tA[i].className==arg[3]){tA[i].className=(tA[i].className==arg[3])?arg[2]:arg[3];}}else if(tA[i].className==arg[2]){tA[i].className=arg[3];}}}}};function atc(auH,avc){if(auH&&avc){avf.push(auH);}};function Tv(nu){if(!nu)nu=0;atO=[];if(nj==1)return;nj=1;if(jd!=0)return;if(jc==1)return;if(document.getElementById('iframe_linkto1')){pN('/templates/linkto/default-337x281-default.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto1');DoShow('iframe_linkto1');DoShow('recopy_ads_button1');}if(document.getElementById('iframe_linkto4')){pN('/templates/linkto/default-337x281-default2.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto4');DoShow('iframe_linkto4');DoShow('remove_ads_button4');}if(document.getElementById('iframe_linkto3')){pN('/templates/linkto/default-161x601-default.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto3');DoShow('iframe_linkto3');DoShow('remove_ads_button3');}if(document.getElementById('iframe_linkto2')){pN('/templates/linkto/default-729x91-default.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto2');DoShow('iframe_linkto2');DoShow('remove_ads_button2');}if(document.getElementById('iframe_linkto7')){pN('/templates/linkto/default-300x600-usonly.html'+"?r="+aC(5)+"&o="+nu,'iframe_linkto7');DoShow('iframe_linkto7');DoShow('remove_ads_button7');}if(document.getElementById('iframe_linkto8')){pN('/templates/linkto/default-337x281-default-audio.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto8');DoShow('iframe_linkto8');DoShow('remove_ads_button8');}jd=1;};function ate(nu){if(!nu)nu=0;if(nj==1)return;nj=1;if(jd!=0)return;if(jc==1)return;if(document.getElementById('iframe_linkto5')){pN('/templates/linkto/default-320x50-mobile.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto5');DoShow('iframe_linkto5');DoShow('remove_ads_button5');}if(document.getElementById('iframe_linkto6')){pN('/templates/linkto/default-320x50-mobile2.php'+"?r="+aC(5)+"&o="+nu,'iframe_linkto6');DoShow('iframe_linkto6');DoShow('remove_ads_button6');}jd=1;};function dC(){if(jd!=1)return;if(document.getElementById('iframe_linkto1')){pN('/blank.html','iframe_linkto1');DoHide('iframe_linkto1');DoHide('remove_ads_button1');}if(document.getElementById('iframe_linkto4')){pN('/blank.html','iframe_linkto4');DoHide('iframe_linkto4');DoHide('remove_ads_button4');}if(document.getElementById('iframe_linkto2')){pN('/blank.html','iframe_linkto2');DoHide('iframe_linkto2');DoHide('remove_ads_button2');}if(document.getElementById('iframe_linkto3')){pN('/blank.html','iframe_linkto3');DoHide('iframe_linkto3');DoHide('remove_ads_button3');}jd=0;};function change_top_window(newlocation){window.location.href=newlocation;};function baV(flipto){if(flipto=='logout')aqr(1,'none','prelogin','postlogin','div');};function bah(){var gV=document.getElementById('pagename');var fi='';if(!gV){dG(window.location.href.replace(/#.*/i,''));return;}switch(gV.value){case 'imageview':var query=window.location.search.substring(1);var vars=query.split("&");fi=vars[0]+"&"+vars[1]+"&r="+aC(5);break;case 'download':var query=window.location.search.substring(1);var vars=query.split("&");fi=vars[0];break;case 'myfiles':case 'about1':case 'about2':case 'billinghistory':case 'myaccount':fi="?r="+aC(5);break;case 'upload':default:break;}switch(gV.value){case 'imageview':dG("/view/?"+fi);break;case 'download':dG("/download.php?"+fi);break;case 'myfiles':var query=window.location.search.substring(1);var vars=query.split("&");if(vars[0].substr(0,9)!='sharekey='&&vars[0].length!=13){dG("/myfiles.php"+fi);}else{}break;case 'about1':case 'register':dG('/register.php');break;case 'registration':dG('/upgrade/?plan=pro');break;case 'login':dG('/');break;case 'about2':case 'myaccount':dG("/myaccount.php"+fi);break;case 'billinghistory':dG("/myaccount/billinghistory.php"+fi);break;case 'upload':dG("/"+fi);break;case 'manageusers':dG("/myaccount/manageusers.php");break;default:dG(window.location.href.replace(/#.*/i,""));break;}};function XP(VN,et){var Wa=(UserEmail=="@"||UserEmail=="n/a")?"":UserEmail;if(VN!=Wa){var hg="";var xf;if(VN=="")hg+="You are logged out.<br /><br />";else hg+="You are logged in as ("+VN+").<br /><br />";if(Wa==""){hg+="Please logout to access your anonymous files.";xf=function(){dZ();Zi(3,"Logging off user '"+VN+"'.. Please wait..");setTimeout("dS();",2000);};}else{hg+="Please login to ("+Wa+") to continue accessing the current files.";xf=function(){window.location='/login.php?e='+Wa;};}QS('Authentification Error',"<b>"+hg+"</b>",[['OK']],xf);}else{parent.aH(0,"Access denied","You do not have permissions to perform the requested operation. ("+et+")",false,"error");}};function cR(){var gd=document.getElementById('header_icon_pro_logo');if(UserLogin!=0){if(UserEmail.length<51){}else{var VA=UserEmail.slice(0,48)+'...';}if(gd){if(fu>=1)gd.style.display='';else gd.style.display='none';}if(document.getElementById('upload_create')){document.getElementById('upload_create').style.visibility="hidden";document.getElementById('upload_login').style.visibility="hidden";document.getElementById('upload_create').style.display="none";document.getElementById('upload_login').style.display="none";}}else{if(gd){gd.style.display='none';}if(document.getElementById('upload_create')){document.getElementById('upload_create').style.visibility="visible";document.getElementById('upload_login').style.visibility="visible";}if(document.getElementById('reg_emailUL')){document.getElementById('reg_emailUL').value="";document.getElementById('reg_passUL').value="";}if(document.getElementById('reg_email')){document.getElementById('reg_pass').value="";}}if(document.getElementById('login_area')){document.getElementById('login_area').style.visibility="visible";}DoShow('networks_login_status');if(document.getElementById('logged_in_info'))document.getElementById('logged_in_info').className='';};function ClipBoardDone(){};function cH(direction){var counter=1;if(direction=="blank")var targetstring="_blank";else var targetstring="";while(counter<25){if(document.getElementById('alink_'+counter)){document.getElementById('alink_'+counter).target=targetstring;}counter++;}};function Wf(VS){try{if(document.getElementById('mfRandField')==undefined){var oB=document.createElement('div');var VP='_'+aC(5);oB.id='mfRandField';oB.innerHTML='<input type="hidden" name="'+VP+'" id="'+VP+'" value="'+db(1000,5000)+'"/>';oB.style.display='none';document.getElementById(VS).appendChild(oB);}else{var Cu=document.getElementById('mfRandField').childNodes;for(var i=0;i<Cu.length;i++){if((Cu[i].type=="hidden")&&(Cu[i].id.substr(0,1)=='_')){document.getElementById(Cu[i].value).value=db(1000,5000);}}}}catch(e){}};function db(num1,num2){num1=parseInt(num1);num2=parseInt(num2);if(num1>=num2)return 0;else{var generator=Math.random()*(num2-num1);return Math.round(num1+generator);}};function aC(len){var varAlpha="";var varBeta="";while(len>0){var rndNum=Math.random();rndNum=parseInt(rndNum*1000);rndNum=(rndNum%26)+65;varBeta=String.fromCharCode(rndNum);varAlpha=varAlpha+varBeta;len--;}varBeta=varAlpha.toLowerCase();return varBeta;};function handle_upload(afC){if(afC==null)afC=0;var filefield=document.getElementById('file_name0');if(filefield.value==""){Zi(0,"Please click the 'Browse' or 'Choose' button and select at least one file before clicking the 'Upload File(s) to MediaFire' button");}else{identifier=bkA;document.form_upload.action='http://upload.mediafire.com.de.a2ip.ru/'+identifier+'p'+afC;aqr(1,'none','preupload','progressupload','div');Uploading=true;cH("blank");document.getElementById('form_upload').submit();}};function rs(){if(typeof XMLHttpRequest=="undefined")XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")};return new XMLHttpRequest();};function Kl(uw,Hg,xf){function Ht(Zb,f){return function(){if(Zb.readyState==4&&Zb.status==200)xf(Zb.responseText);}};try{var vP=rs();vP.open("POST",uw,true);if(typeof xf=="function")vP.onreadystatechange=Ht(vP,xf);var GP=[];for(var fO in Hg)GP.push(fO+'='+escape(Hg[fO]));var Hb=GP.join('&');vP.setRequestHeader('Content-type','application/x-www-form-urlencoded');vP.setRequestHeader('Content-length',Hb.length);vP.send(Hb);return true;}catch(e){};return false;};function Ko(uw,xf,AL){function Ht(Zb,xf,AL){return function(){if(Zb.readyState==4){if(Zb.status==200){if(typeof xf=="function")xf(Zb.responseText);}else{if(typeof AL=="function")AL(Zb.status,Zb.responseText);}}};};try{var vP=rs();vP.open("GET",uw,true);if(typeof xf=="function"||typeof AL=="function")vP.onreadystatechange=Ht(vP,xf,AL);vP.setRequestHeader('Content-type','application/x-www-form-urlencoded');vP.send(null);return true;}catch(e){};return false;};function aP(){if(typeof XMLHttpRequest!="undefined"){eP=new XMLHttpRequest();return 1;}else if(window.ActiveXObject){var gp=["MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"];for(var i=0;i<gp.length;i++){try{eP=new ActiveXObject(gp[i]);return 1;}catch(hk){}}}return 0;};function set_file_name(aYM,iI){var gu='';if(!iI)return false;if(aYM&&aYM.length<11){return false;}if((gu=dW(aYM))!=false){iI.value=gu;}else if(iI){iI.value='Uknown_'+aC(5)+'.upload';}else return false;};function aZd(numfiles,force,website){if(!document.getElementById('upload_content')|| !document.getElementById('links'))return;if(numfiles==UploadFiles&&force!=1)return;document.getElementById('links').selectedIndex=(parseInt(numfiles)-1);var counter=0;var sHTML=new Array();var newSlot;while(counter<parseInt(numfiles)){sHTML[counter]='<div class="web_uploader_url_table"><span class="webuploadtitle">Enter the URL of the file or image you wish to upload.</span>';if(parseInt(numfiles)>1)sHTML[counter]+='<div class="ul_number" style="display:none">'+(counter+1)+'</div>';else sHTML[counter]+='<div id="filenum_1" name="filenum_1" class="ul_number" style="display:none"></div>';if(website){sHTML[counter]+='<label>Enter URL of file or image</label><input class="" name="file_name'+counter+'" id="file_name'+counter+'" type="text"  size="30" value="http://" OnBlur="if (this.value == \'\') { this.value = \'http://\'; this.className = \'\'; }" OnFocus="if (this.value == \'http://\') { this.value = \'\';  this.className = \'browse\'; }" OnChange="set_file_name(this.value,document.getElementById(\'file_title'+counter+'\'));" />';sHTML[counter]+='<label>Save As</label><input class="" name="file_title'+counter+'" id="file_title'+counter+'" type="text"  size="20" value="image.jpg" OnFocus="if (this.value == \'image.jpg\') this.value = \'\'; this.className = \'browse\';"/></div>';}else sHTML[counter]+='<input class="browse" name="file_name'+counter+'" id="file_name'+counter+'" type="file"  size="58" /></div>';counter++;}if(parseInt(numfiles)<=UploadFiles){counter=parseInt(numfiles);while(counter<10){document.getElementById('links_html_'+counter).innerHTML=' ';counter++;}counter=0;if(force)while(counter<numfiles){document.getElementById('links_html_'+counter).innerHTML=sHTML[counter];counter++;}}else{counter=UploadFiles;while(counter<numfiles){document.getElementById('links_html_'+counter).innerHTML=sHTML[counter];counter++;}}if(parseInt(numfiles)==1){document.getElementById('filenum_1').innerHTML='';document.getElementById('submit_file').src=sCDNUrl+"/images/v4images/buttons/webuploader/upload_file.gif";}else{document.getElementById('filenum_1').innerHTML='1';document.getElementById('submit_file').src=sCDNUrl+"/images/v4images/buttons/webuploader/upload_files.gif";}UploadFiles=parseInt(numfiles);};function aY(fZ,value,lj){var exdate=new Date();exdate.setDate(exdate.getDate()+lj);document.cookie=fZ+"="+escape(value)+((lj==null)?"":";expires="+exdate.toGMTString())+";path=/";};function aU(fZ,value,lh){var exdate=new Date();exdate.setTime(exdate.getTime()+(lh*1000));document.cookie=fZ+"="+escape(value)+((lh==null)?"":";expires="+exdate.toGMTString())+";path=/";};function Tf(fZ,value){document.cookie=fZ+"="+escape(value)+";path=/";};function aL(fZ){if(document.cookie.length>0){hG=document.cookie.indexOf(fZ+"=");if(hG!= -1){hG=hG+fZ.length+1;jN=document.cookie.indexOf(";",hG);if(jN== -1)jN=document.cookie.length;return unescape(document.cookie.substring(hG,jN));}}return "";};function baO(fZ){aY(fZ,'',-1);};function cI(){var ip=0,iu=0;if(typeof(window.pageYOffset)=='number'){iu=window.pageYOffset;ip=window.pageXOffset;}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){iu=document.body.scrollTop;ip=document.body.scrollLeft;}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){iu=document.documentElement.scrollTop;ip=document.documentElement.scrollLeft;}return[ip,iu];};function bkD(akH,bky){if(!window.localStorage)return false;if(!bky|| !Object.keys)return localStorage.getItem(akH)!==null;return Object.keys(localStorage).indexOf(akH)!== -1;};function bgI(bix,blo){$.getScript(sCDNUrl+'/js/lzstring_'+BUILD_VERSION+'.js').done(bix).fail(blo);};function bgP(akH,aTS){if(!window.localStorage)return;if(!window.LZString){return bgI(function(){bgP(akH,aTS);});}localStorage[akH]=window.LZString.compressToUTF16(aTS);};function bhb(akH,bix){if(!window.localStorage)return!bix?false:bix(false);var bfc=localStorage[akH];if(!bfc)return!bix?false:bix(false);if(!window.LZString){return!bix?false:bgI(function(){bhb(akH,bix);},function(){bix(false);});}var beH=LZString.decompressFromUTF16(bfc);return!bix?beH:bix(beH);};function bml(){var bna=document.createElement('p');bna.style.width="100%";bna.style.height="100%";var bmR=document.createElement('div');bmR.style.position="absolute";bmR.style.top="0px";bmR.style.left="0px";bmR.style.visibility="hidden";bmR.style.width="100px";bmR.style.height="100px";bmR.style.overflow="hidden";bmR.appendChild(bna);document.body.appendChild(bmR);var bmp=bna.offsetWidth,bmV=bna.offsetHeight;bmR.style.overflow='scroll';var bmY=bna.offsetWidth,bmH=bna.offsetHeight;if(bmp==bmY)bmY=bmR.clientWidth;if(bmV==bmH)bmH=bmR.clientHeight;document.body.removeChild(bmR);return[(bmp-bmY),(bmV-bmH)];};function acz(){var args=Array.prototype.slice.call(arguments),boB=false;if(args.length){var boE=args[0];if($.inArray(boE,["view","edit","file","watch","listen","play"])!== -1)boB=true;}var axA=aBV();if(axA=='live')axA='www';var boz=boB?"http:":window.location.protocol;return boz+'//'+axA+'.mediafire.com.de.a2ip.ru';};function aiH(agP,ahJ,agA){var afW={};ahJ=isNaN(ahJ)?0:ahJ;agA=isNaN(agA)?0:agA;if($.browser.msie){afW.top=agP.clientY+document.documentElement.scrollTop+agA;afW.left=agP.clientX+document.documentElement.scrollLeft+ahJ;}else{afW.top=agP.pageY+agA;afW.left=agP.pageX+ahJ;}return afW;};function ajm(ajM){if(ajM&&typeof(ajM)=="object"){var akR=[];$.each(ajM,function(akH,ajQ){akR.push(akH);});return akR;}return[];};function amJ(ajM,ava){var anv={};var auu=ava||'';if(ajM&&typeof(ajM)=="object"){var alG=ajm(ajM);for(x=0;x<alG.length;x++){anv[alG[x]]=auu||alG[x];}}return anv;};function bdF(XW,apj,apl){var anU=[];var Tt=0;apl=apl||0;for(Yt in XW){Tt+=XW[Yt].length+apl;}if(Tt<=apj){return XW;}var aoW=apj/XW.length;for(Yt in XW){if(XW[Yt].length<=aoW){anU[Yt]=XW[Yt];}else{anU[Yt]=XW[Yt].substring(0,Math.max(aoW-3,0))+'...';}}return anU;};function bcv(aox,apn){if(aox.length<=apn){return aox;}else{return aox.substring(0,Math.max(apn-3,0))+'...';}};function aoF(aoc){var anH=/^(.)+\@[a-zA-Z0-9]+[a-zA-Z0-9._-]*[\.]{1}[a-zA-Z]+$/;return anH.test(aoc);};function atl(aoc,aSd){var aso=aoc.indexOf("@");var art=aoc.substring(0,aso);var arH=aoc.substring(aso+1);var arq=arH.indexOf(".");var asb=arH.substring(0,arq);var arv=arH.substring(arq+1);var atd=asb.toLowerCase();if(!aSd&&atd.indexOf("mediafire")!= -1){return false;}if((aso== -1)||(arq== -1)){return false;}if(aoc.length<4){return false;}if(art.length<1){return false;}if(asb.length<1){return false;}if(arv.length<1){return false;}return true;};function ayr(ayg,ayU,ayi,aCF){if(!ayi){ayi=function(){};}$.ajax({type:'GET',url:'/dynamic/log_promo_click.php?r='+aC(4),dataType:'json',data:{promo:ayg,ad:ayU,view_count:aCF||0,response_format:'json',nocache:Math.round(Math.random()*1000)},success:ayi.success||ayi,error:ayi.error||function(){}});};function GetViewportSize(){var viewportwidth;var viewportheight;if(typeof window.innerWidth!='undefined'){viewportwidth=window.innerWidth,viewportheight=window.innerHeight}else if(typeof document.documentElement!='undefined'&&typeof document.documentElement.clientWidth!='undefined'&&document.documentElement.clientWidth!=0){viewportwidth=document.documentElement.clientWidth,viewportheight=document.documentElement.clientHeight}else{viewportwidth=document.getElementsByTagName('body')[0].clientWidth,viewportheight=document.getElementsByTagName('body')[0].clientHeight}return[viewportwidth,viewportheight];};function aj(fC,hQ,hm){DoAPopup(fC,hQ,hm);};function LoadIframeLightbox(Ea,hQ,hm,yI,CZ,bHideCloseButton,bQueuePopup,bForceUserAction,aWY,blf){var bkf={};if(yI)bkf.absolute=yI;if(CZ)bkf.top=CZ;if(bHideCloseButton)bkf.hideCloseButton=bHideCloseButton;if(bQueuePopup)bkf.queue=bQueuePopup;if(bForceUserAction)bkf.forceUserAction=bForceUserAction;if(aWY)bkf.onLoadCallback=aWY;if(blf)bkf.transparent=blf;blu(Ea,hQ,hm,bkf);};function blu(Ea,hQ,hm,afW){var bjS={absolute:false,top:null,hideCloseButton:false,queue:false,forceUserAction:false,onLoadCallback:null,onCloseCallback:null,transparent:false,delayRender:false};var bls=$.extend({},bjS,afW);var V=function(){var bF=$('#modal_window_popup');var bs=$('a.popup-close',bF);bs.toggle(!bls.hideCloseButton);bF.show();if(!bls.hideCloseButton&&bls.onCloseCallback){bs.one('click',function(){bls.onCloseCallback();});}};var gH=document.getElementById('modal_window_popup');if(! !bls.onLoadCallback||bls.delayRender){var Q=$('#modal_msg_iframe');if(Q){Q.off('load');Q.one('load',function(){if(bls.onLoadCallback)bls.onLoadCallback();if(bls.delayRender)V();});}}if(gH.style.display=='block'&&bls.queue){var bgU=$('#modal_msg_iframe').attr('src').split('?')[0];if(bgU!=Ea){var bgZ=Array.prototype.join.call(arguments,',');if(aPopupQueue.indexOf(bgZ)=== -1)aPopupQueue.push(bgZ);}}else if(pN(Ea+(Ea.indexOf("?")> -1?"&":"?")+'_'+aC(5)+'='+db(1000,5000),'modal_msg_iframe')!=false){if(bls.forceUserAction){$("#page_screen").off("click");document.onkeyup=function(event){aeV(event);return false;};}else{$("#page_screen").off("click").on("click",function(){if(bls.onCloseCallback)bls.onCloseCallback();QU();});}$('#modal_window_popup').hide();dZ();$("body").addClass("lightboxActive");if(bls.transparent)$("#modal_window_popup").addClass("transparentBG");if(gH.className.indexOf('widget-lightbox')!== -1){var $GLB_oWidget=$('.web-widget');if($GLB_oWidget.length>0){hQ=Math.min(hQ,$GLB_oWidget.outerWidth()-20);hm=Math.min(hm,$GLB_oWidget.outerHeight()-20);mw('modal_msg_iframe',hQ,hm);}}else{mw('modal_msg_iframe',hQ-0,hm-0);}if(Ea.indexOf("/templates/tos.php")!== -1&&$('body').hasClass('mobile-device')){$('body').addClass('modalMobile');}baq('modal_window_popup',hQ,hm,bls.absolute,bls.top,null,true);if(!bls.delayRender){V();}}};function DoAPopup(fC,hQ,hm,bAutoHeight){dZ();baq(fC,hQ,hm,undefined,undefined,bAutoHeight);};function bfM(fC){baj(fC);};window.HideAPopupPar=function(fC){bfM(fC);};function ban(fC,hQ,hm){baq(fC,hQ,hm);};function bag(fC){baj(fC,true);};function aem(){var Xq=0,xc=0;if(typeof(window.innerWidth)=='number'){Xq=window.innerWidth;xc=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){Xq=document.documentElement.clientWidth;xc=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){Xq=document.body.clientWidth;xc=document.body.clientHeight;}var ael={h:xc,w:Xq};return ael;};function afp(aeG,Xq,xc,adY,afn){var afk=aem();bJ=Math.round((afk.w-Xq)/2);if(bJ<0){bJ=0;}aeG.style.left=bJ+'px';if(!adY){var bi=$(window).scrollTop();afn=bi+Math.round((afk.h-xc)/2);if(afn<bi){afn=bi;}}aeG.style.top=afn+'px';};function baq(fC,hQ,hm,yI,CZ,bAutoHeight,bSkipDisplay){var gH=document.getElementById(fC);if(!gH){return false;}if(gH.className.indexOf('widget-lightbox')!== -1){var $GLB_oWidget=$('.web-widget'),$GLB_oPopup=$(gH);if($GLB_oWidget.length>0){gH.style.top=Math.max(0,((($GLB_oWidget.outerHeight()-hm)/2)))+"px";gH.style.left=Math.max(0,(($GLB_oWidget.outerWidth()-hQ)/2))+"px";gH.style.maxWidth=$GLB_oWidget.outerWidth(true)+"px";gH.style.width='auto';}}else if($('body').hasClass('modalMobile')){gH.style.width='100%';gH.style.height='100%';gH.style.top='0';gH.style.bottom='0';gH.style.left='0';gH.style.right='0';}else{afp(gH,hQ,hm,yI,CZ);gH.style.width=hQ+'px';if(!bAutoHeight)gH.style.height=hm+'px';else gH.style.height='auto';$(window).on('scroll resize',function(){afp(gH,hQ,hm,yI,CZ);});}gH.style.zIndex=1007;if(!bSkipDisplay){gH.style.display='block';}};function mw(kC,hQ,hm){var eY=document.getElementById(kC);if(!eY){return false;}w=hQ;h=hm;if($('body').hasClass('mobile-device')){eY.style.width='100%';eY.style.height='100%';}else{eY.style.width=w+'px';eY.style.height=h+'px';}};function baj(fC,nc){var gH=document.getElementById(fC);if(!gH){return;}aZv=$('#page_screen');aZv.off("click").on("click",QU);document.onkeyup=function(event){var afk=window.event&&window.event.keyCode?window.event.keyCode:(event.keyCode?event.keyCode:event.charCode);if(afk==27)QU();};gH.style.display='none';if(!bfZ()&&nc!=true){cU();}if($('#modal_msg_iframe').attr('src')!='/blank.html')pN('/blank.html','modal_msg_iframe');if(aPopupQueue.length>0){var aPopupArgs=aPopupQueue.shift().split(',',6);setTimeout(function(){LoadIframeLightbox.apply(this,aPopupArgs);},500);}$('body').removeClass('modalMobile');$('body').removeClass('lightboxActive');};function bjM(cookiesToDelete,sPath,SV,bIgnoreCase){var deletedCookies=[];sPath=(typeof sPath=="undefined")?"/":sPath;SV=(typeof SV=="undefined")?document.domain:SV;bIgnoreCase=(typeof bIgnoreCase=="undefined")?true:bIgnoreCase;var currentCookieCount=document.cookie.split(";").length;var aCurrentCookiesSplit=document.cookie.split(/; ?/);for(var i=0;i<aCurrentCookiesSplit.length;i++){var currentCookie=aCurrentCookiesSplit[i].split("=");for(var j=0;j<cookiesToDelete.length;j++){var cookieToDel=cookiesToDelete[j];if(bIgnoreCase&&cookieToDel.toLowerCase()!=currentCookie[0].toLowerCase())continue;else if(!bIgnoreCase&&cookieToDel!=currentCookie[0])continue;var c=currentCookie[0]+"=;";c+="expires=Thu, 01 Jan 1970 00:00:01 GMT;";c+="domain={d};";c+="path="+sPath+";";document.cookie=c.replace("{d}",SV);var newCookieCount=document.cookie.split(";").length;if(currentCookieCount>newCookieCount){deletedCookies.push(cookieToDel);cookiesToDelete.shift(j,1);currentCookieCount=newCookieCount;}break;}}return deletedCookies;};function dZ(){var page_screen=document.getElementById('page_screen');if(!page_screen||$('#MediaFireStepBlanket:visible').length)return;page_screen.style.display='block';opacity('page_screen',0,65,200);};function cU(){var page_screen=document.getElementById('page_screen');if(page_screen){opacity('page_screen',65,0,100);cO();}return;};function cO(){var kA=document.getElementById('page_screen');if(!kA)return false;kA.style.display="none";};function au(obj){if(obj!=null&&obj.options!=null){return true;}return false;};function at(from){if(!au(from)){return;}for(var i=(from.options.length-1);i>=0;i--){from.options[i]=null;}from.selectedIndex= -1;};function kP(obj,text,value,selected){if(obj!=null&&obj.options!=null){var LD=document.createElement('OPTION');LD.text=text;LD.value=value;LD.selected=selected;obj.options[obj.options.length]=LD;}};function DoHide(nD){var ah;ah=document.getElementById(nD);if(ah&&ah.className!='hide')ah.className="hide";return;};function DoShow(nD){var ah;ah=document.getElementById(nD);if(ah&&ah.className!='show')ah.className="show";return;};function nd(nD){var ah;ah=document.getElementById(nD);if(ah&&ah.innerHTML)ah.innerHTML="";return;};function al(baH){function bco(ah){function fv(){ah.value="";ah.onclick="";ah.onblur="";};return fv;};if(typeof baH=="string"){baH=document.getElementById(baH);}if(baH&&baH.value&&typeof baH.rH=="undefined"){var azW=bco(baH);baH.onclick=azW;baH.onblur=azW;baH.rH=1;}};function aA(ah,azU){if(typeof ah=="string"){ah=document.getElementById(ah);}if(ah){var bce=ah.value;var acF=bce.match(/\n/g);var ac=1;if(acF)ac+=acF.length+1;if(ac>azU){return false;}}return true;};function baD(nD){var ah=document.getElementById(nD);if(ah)if(ah.style.display=='block')return true;else return false;else return false;};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};String.prototype.ltrim=function(){return this.replace(/^\s+/,"");};String.prototype.rtrim=function(){return this.replace(/\s+$/,"");};String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,'');};function GetThis(T,C,U,L){var targetUrl='http://www.myspace.com.de.a2ip.ru/Modules/PostTo/Pages/?'+'t='+encodeURIComponent(T)+'&c='+encodeURIComponent(C)+'&u='+encodeURIComponent(U)+'&l='+L;window.open(targetUrl);};function LoadJS(aYM,mTestFunction,xf,vn,AL){var oF=document.createElement('script');oF.setAttribute('type','text/javascript');oF.setAttribute('src',aYM);document.getElementsByTagName('head')[0].appendChild(oF);try{if(typeof mTestFunction=="function"&&typeof xf=="function"&&vn>0){setTimeout(sk(this,CS,aYM,mTestFunction,xf,vn,undefined,AL),200);}}catch(e){};};function CS(uw,mTestFunction,xf,vn,wR,AL){if(wR===undefined)wR=0;if(mTestFunction()){xf();}else if(vn*5<wR){Ku(3,uw);if(typeof AL=="function")AL();}else{setTimeout(sk(this,CS,uw,mTestFunction,xf,vn,wR+1,AL),200);}};function CU(xf,AL,Kp){function Ia(){return!(typeof eH=="undefined")};if(typeof xf!="function")xf=function(){};if(typeof AL!="function"&& !Kp&&sCDNUrl)AL=sk(this,CU,xf,false,true);var Kr=sCDNUrl;if(Kp===true)Kr='';var vj=(Kr?4:10);LoadJS(Kr+'/js/templates_'+BUILD_VERSION+'.js',Ia,xf,vj,AL);};function Kq(Kp){var Kr=sCDNUrl;if(Kp===true)Kr='';return Kr+'/js/mful_'+BUILD_VERSION+'.js';};var Ma=false;function LoadUploader(Kp,Mk){if(!Mk&&Ma)return;Ma=true;if(typeof bbl=="undefined"){Ip=0;LoadJS(Kq(Kp));setTimeout(LoadUploaderWait,200);}else{MFUL=new bbl();}};function Kt(){if(typeof es=="undefined"){Zi(3,'Unable to load uploader. Refreshing to sync page and uploader. If this persists please clear your cache or contact support.');setTimeout('window.location.reload();',5000);}else{setTimeout(LoadUploaderWait,200);Zi(3,'Unable to load uploader. Refresh page to sync page and uploader.');}};var Ks=0;function LoadUploaderWait(){if(typeof bbl=="undefined"){Ip++;if(Ip%5==0){++Ks;switch(Ks){case 4:LoadUploader(true,true);Ku(1,Kq());break;case 14:Kt();Ku(3,Kq(true));break;default:setTimeout(LoadUploaderWait,200);break;}}else setTimeout(LoadUploaderWait,200);}else{MFUL=new bbl();}};function ShowUploader(qX){function Mf(qX){av();MFUL.Bq(qX);};function ShowUploaderWait(qX,xf){if(typeof MFUL=="undefined"){setTimeout(sk(this,ShowUploaderWait,qX,xf),200);}else if(typeof xf=="function"){xf(qX);}};if(typeof bbl=="undefined")Zi(1,'Loading Uploader');if(typeof MFUL=="undefined"){LoadUploader();setTimeout(sk(this,ShowUploaderWait,qX,sk(this,Mf,qX)),200);}else{Mf(qX);}if(!window.onscroll)window.onscroll=Io;};function Mj(xn){aXY(function(aWq){if(MP){return false;}if(!xn){xn=window.abM;}function Mc(xn){av();MFUL.Kk(xn);};function ShowUploaderWait(xn){if(typeof MFUL=="undefined")setTimeout(sk(this,ShowUploaderWait,xn),200);else Mc(xn);};if(typeof bbl=="undefined")Zi(1,'Loading Uploader');if(typeof MFUL=="undefined"){LoadUploader();setTimeout(sk(this,ShowUploaderWait,xn),200);}else Mc(xn);if(!window.onscroll)window.onscroll=Io;});};function aeV(e){if(e&&e.stopPropagation){e.stopPropagation();}else if(window.event){window.event.cancelBubble=true;}};function JZ(){var CB=false;try{CB=typeof window.FileReader=="function";}catch(e){};return CB;};function Ty(){var CB=false;try{CB='draggable'in document.createElement('span');}catch(e){}return CB;};function LU(){if(JZ()&&Ty()&& !apB())return true;if(lc()=="Mac"&&BrowserName()=="Safari"&& !apB())return true;return false;};function aWj(ev,es,xn){try{var XU=ev.dataTransfer||ev.originalEvent.dataTransfer;if(!XU.types.contains("Files"))return;}catch(e){};ev.stopPropagation();ev.preventDefault();var agO={};var ahp='';if(!xn&&typeof window.tH!='undefined'&&typeof window.tH.folders!='undefined'){ahp=$(ev.originalEvent.target).closest('.folder').data('key');if(!ahp){agO=window.tH.currentFolder;ahp=agO.folderkey;}else agO=window.tH.folders.memory[ahp];if(!avH(agO.flag,"1")){var iPermissions=NZ(agO);if(iPermissions!=2){Zi(0,'You do not have permission to upload to this folder.');return;}}}else if(!xn){ahp='myfiles';}else{try{agO=window.tH.folders.memory[xn];if(!avH(agO.flag,"1")){var iPermissions=NZ(agO);if(iPermissions!=2){Zi(0,'You do not have permission to upload to this folder.');return;}}}catch(e){}ahp=xn;}if(ahp){$('#folder-'+ahp).removeClass('folder_highlight');if(es){Md(es,ahp);}}if(typeof xf=="function"){xf(agO,ev);}};function biM(afE,bib,xf){var es=[],aOF=0;function toArray(list){return Array.prototype.slice.call(list||[],0);};function errorHandler(e){console.error('error code: '+e.code)};function getAllEntries(directoryReader,callback){var entries=[];var readEntries=function(){aOF++;directoryReader.readEntries(function(results){if(!results.length){entries.sort();aOF--;callback(entries);}else{entries=entries.concat(toArray(results));aOF--;readEntries();}},errorHandler);};readEntries();};function readDirectory(entries){if(entries<=0)xf(es);for(i=0;i<entries.length;i++){if(entries[i]){if(entries[i]['isDirectory']){var directoryReader=entries[i].createReader();getAllEntries(directoryReader,readDirectory);}else{var bat=entries[i].fullPath.slice(1).split('/');bat.pop();bat=bat.join('/');aOF++;entries[i].file(function(file){aOF--;file.bie=bat+'/'+file.name;es.push(file);if(aOF<=0)xf(es);},errorHandler);}}}};var entries=[];var bhK=false;if(afE){for(var i=0;i<afE.length;i++){if(!afE[i].webkitGetAsEntry)break;entries[i]=afE[i].webkitGetAsEntry();if(entries[i]&&entries[i]['isDirectory'])bhK=true;}}if(bhK)readDirectory(entries);else xf(bib);};var vc=[];function LT(Lb,xn,Mn,Mh,MK,Mi,Rd){if(!LU()||apB())return;$('body').addClass('html5');var ajG=Lb;if(typeof Lb=="string")ajG=document.getElementById(Lb);if(!ajG)return;function Mb(xn,xf){return function(e){try{var XU=e.dataTransfer||e.originalEvent.dataTransfer;if(!XU.types.contains("Files"))return;if($("#container").hasClass("trashMode"))return;}catch(e){};e.stopPropagation();e.preventDefault();if(typeof xf=="function")xf(xn,e);}};function aeJ(xn,xf){return function(e){try{var XU=e.dataTransfer||e.originalEvent.dataTransfer;if(!XU.types.contains("Files"))return;if($("#container").hasClass("trashMode"))return;}catch(e){};e.stopPropagation();e.preventDefault();if(typeof xf=="function"){if(navigator.userAgent.indexOf("Chrome")!= -1)setTimeout(function(){xf(xn,e);},1);else xf(xn,e);}}};function LV(lL,xn,xf){return function(ev){ev.stopPropagation();ev.preventDefault();var es=ev.originalEvent.dataTransfer.files,afE=ev.originalEvent.dataTransfer.items?ev.originalEvent.dataTransfer.items:null;if(!$("#container").hasClass("trashMode")&&es.length>0){biM(afE,es,function(biI){aXY(function(aWq){aWj(ev,biI,xn);},biI);});}}};Me(ajG);var LK=aeJ(xn,Mn);var LM=Mb(xn,Mh);var MJ=Mb(xn,MK);var LO=LV(this,xn,Mi);if(Rd){jQuery(ajG).bind({draghoverover:Mn,dragover:LM,draghoverout:MK,drop:LO});}else{jQuery(ajG).bind({dragenter:LK,dragover:LM,dragleave:MJ,drop:LO});}var uf=vc[ajG.id]=[];uf['dragenter']=LK;uf['dragover']=LM;uf['drop']=LO;};function Me(Lb){var ajG=Lb;if(typeof Lb=="string")ajG=document.getElementById(Lb);if(!ajG)return;if(vc[ajG.id]){var uf=vc[ajG.id];jQuery(ajG).unbind({dragenter:uf['dragenter'],dragover:uf['dragover'],drop:uf['drop']});vc[ajG.id]=[];return true;}return false;};function Md(es,xn){if(typeof MFUL=="undefined"){LoadUploader();setTimeout(sk(this,Md,es,xn),200);}else{var qX=0;if(xn!==undefined)qX=MFUL.LZ(xn,true);var KN=MFUL.aUploaders[qX];KN.mAddFilesFromHtml5(es,sk(this,function(KN,Jy){var gV=document.getElementById('pagename');if(gV&&(gV.value==='upload'||gV.value==='myfiles'))MFUL.Bq(qX);if(Jy)KN.IK();},KN));}};function lc(){if(navigator&&navigator.platform){if(navigator.platform.indexOf("Win")!= -1)return "Windows";if(navigator.platform.indexOf("Mac")!= -1)return "Mac";if(navigator.platform.indexOf("X11")!= -1)return "UNIX";if(navigator.platform.indexOf("Linux")!= -1)return "Linux";}return "Unknown OS";};function akQ(vL){blX("Login");};function akT(){$("#headerlogin_tab").find('span').fadeOut(150);$('#main_login').fadeOut(150);};function vQ(vL,xk){if(typeof xk=="undefined")xk=false;try{mf=document.getElementById('login_mediafire');fb=document.getElementById('login_facebook');tw=document.getElementById('login_twitter');mft=document.getElementById('login_tab_mediafire');fbt=document.getElementById('login_tab_facebook');twt=document.getElementById('login_tab_twitter');switch(vL){case 2:fbt.className='current';fb.className='current';mft.className=(UserLogin==1)?'login_tab_inactive':'';twt.className=wL?'login_tab_inactive':'';mf.className=tw.className='login_hide';bis(function(FB){wP(1);});break;case 3:twt.className='current';tw.className='current';mft.className=(UserLogin==1)?'login_tab_inactive':'';fbt.className=wM?'login_tab_inactive':'';mf.className=fb.className='login_hide';yA(xk);break;case 1:default:mft.className='current';mf.className='current';fbt.className=wM?'login_tab_inactive':'';twt.className=wL?'login_tab_inactive':'';fb.className=tw.className='login_hide';$("#login_email").focus();break;}}catch(err){}};var wK;function wG(yB){wL=1;if(yB==1)wD(wK);if(yB==2)window.location='/register.php?connect=twitter';};function wg(eu,wC,eC,jK){if(sharediv=document.getElementById('sharediv'+eu)){if(sharediv.className=="hide"){sharediv.innerHTML=Bf(eH[jK],eC,eu,'');sharediv.className="actions";}}ae('sharetabsfile'+eu+'-',5);Xc(4,document.getElementById('sharetemplatefile'+eu),eu,'sharedtabsfileinfo'+eu+'-');document.getElementById((wC==1?'fb':'tw')+'_share_checkbox'+eu).checked=true;document.getElementById((wC==2?'fb':'tw')+'_share_checkbox'+eu).checked=false;};function vS(eu){document.getElementById('fb_share_checkbox'+eu).checked=wM;document.getElementById('tw_share_checkbox'+eu).checked=wL;};function wP(sP,wy){var elm;for(var i=0;elm=document.getElementById('facebook_login_'+i);i++){if(sP==i)elm.style.display='inline';else elm.style.display='none';if(elm=document.getElementById('fb_error_step'+i)){if(typeof wy=="string"&&sP==i){elm.innerHTML=wy;elm.style.display="block";}else elm.style.display="none";}}};function wX(sP,wy){var elm;for(var i=0;elm=document.getElementById('twitter_login_'+i);i++){if(sP==i)elm.style.display='inline';else elm.style.display='none';if(elm=document.getElementById('tw_error_step'+i)){if(typeof wy=="string"&&sP==i){elm.innerHTML=wy;elm.style.display="block";}else elm.style.display="none";}}};var aBG=false;function bis(xf){xf=xf||jQuery.noop;if(!window.FB){$.getScript('//connect.facebook.net.de.a2ip.ru/en_US/sdk.js',function(){bis(xf);});}else{FB.init({version:FBAPIVersion.slice(0,-1),appId:FBAppId,xfbml:true,status:false,cookie:true,oauth:true});xf(FB);}};function vZ(wA){function xJ(response){var elm;if(elm=document.getElementById('facebook_app_id')){xS=elm.value;var xR=String(document.cookie);var yu=xR.indexOf('fbsr_'+xS);if(yu!= -1){var wQ=document.getElementById('fb_login_action');var sg=document.getElementById('facebook_login_form');if(wQ&&sg){wQ.value='do_login';sg.submit();}else Zi(2,"Missing form element on page. Please contact support.");}else Zi(2,"Facebook cookie not set. Please contact support.");}else Zi(2,"Facebook application not set. Please contact support.");};wP(2);if(wA){bis(function(FB){FB.login(function(response){if(response.status=="connected"){xJ(response);}},{scope:wA});});}else{var wi=new Array();wi.push('email');bis(function(FB){FB.login(function(response){if(response.status=="connected"){xJ(response);}},{scope:wi.join(',')});});}};var beE=false;function yA(){if(!beE){$('#login_twitter .headerSocialButton').html('<iframe scrolling="no" frameborder="0" style="width: 160px; height: 20px; padding: 6px; float: left;margin-left:28px;" src="//platform.twitter.com.de.a2ip.ru/widgets/follow_button.html?screen_name=MediaFire&amp;show_count=true&amp;show_screen_name=false" allowtransparency="true"></iframe>');beE=true;}wX(1);};function xF(xf){bis(function(FB){if(aBG)FB.UIServer.setLoadedNode=function(a,b){FB.UIServer._loadedNodes[a.id]=b;};FB.getLoginStatus(function(response){if(response.authResponse){FB.logout(function(response){if(typeof xf==="function"){xf();}});}else{xf();}});});};function yz(){var wQ=document.getElementById('tw_login_action');var sg=document.getElementById('twitter_login_form');if(wQ&&sg){wQ.value='post_twitter_authorize';sg.submit();}else Zi(2,"Missing form element on page. Please contact support.");};function wI(yB){window.open('/dynamic/client_login/twitter.php?popup_twitter_login=1'+(yB?'&callback='+yB:''),'twitter_login','scrollbars=0,status=0,width=780,height=410');};function yF(rO,xf){var vj=0;if(rO===""){return false;}rO=rO.toLowerCase()||"";if(rO==="facebook"){vj=yO;}else if(rO==="twitter"){vj=yP;}else{vj=30000;}yQ=function(){if(typeof xf==="function"){xf();}Zi(3,"Authenticating with "+(rO.substr(0,1).toUpperCase()+rO.substr(1))+" timed out. Please make sure that your browser is not blocking pop-ups.");};return setTimeout(sk(this,yQ),vj);};var aqY={apA:function(){this.ark=this.aqj(this.aqe)||"An unknown browser";this.aqI=this.arp(navigator.userAgent)||this.arp(navigator.appVersion)||"an unknown version";this.apT=this.aqj(this.aqw)||"an unknown OS";},aqj:function(arl){for(var i=0;i<arl.length;i++){var aql=arl[i].abF;var aqi=arl[i].prop;this.aqq=arl[i].apY||arl[i].abG;if(aql){if(aql.indexOf(arl[i].afF)!= -1)return arl[i].abG;}else if(aqi)return arl[i].abG;}},arp:function(aql){var aqC=aql.indexOf(this.aqq);if(aqC== -1)return;return parseFloat(aql.substring(aqC+this.aqq.length+1));},aqe:[{abF:navigator.userAgent,afF:"Chrome",abG:"Chrome"},{abF:navigator.userAgent,afF:"OmniWeb",apY:"OmniWeb/",abG:"OmniWeb"},{abF:navigator.vendor,afF:"Apple",abG:"Safari",apY:"Version"},{prop:window.opera,abG:"Opera",apY:"Version"},{abF:navigator.vendor,afF:"iCab",abG:"iCab"},{abF:navigator.vendor,afF:"KDE",abG:"Konqueror"},{abF:navigator.userAgent,afF:"Firefox",abG:"Firefox"},{abF:navigator.vendor,afF:"Camino",abG:"Camino"},{abF:navigator.userAgent,afF:"Netscape",abG:"Netscape"},{abF:navigator.userAgent,afF:"MSIE",abG:"Explorer",apY:"MSIE"},{abF:navigator.userAgent,afF:"Gecko",abG:"Mozilla",apY:"rv"},{abF:navigator.userAgent,afF:"Mozilla",abG:"Netscape",apY:"Mozilla"}],aqw:[{abF:navigator.platform,afF:"Win",abG:"Windows"},{abF:navigator.platform,afF:"Mac",abG:"Mac"},{abF:navigator.userAgent,afF:"iPhone",abG:"iPhone/iPod"},{abF:navigator.platform,afF:"Linux",abG:"Linux"}]};aqY.apA();function apB(){switch(aqY.ark){case "Explorer":if(aqY.aqI<8)return true;break;case "Firefox":if(aqY.aqI<4)return true;break;case "Safari":if(aqY.aqI<5)return true;break;case "Opera":if(aqY.aqI<11)return true;break;}return false;};function BrowserName(){if(navigator.appName=="Microsoft Internet Explorer")return "Internet Explorer";else if(navigator.appName=="Opera")return "Opera";else if(navigator.appName=="Netscape"){if(navigator.userAgent.indexOf("Firefox")> -1)return "Firefox";else if(navigator.userAgent.indexOf("OPR")> -1)return "Opera";else if(navigator.userAgent.indexOf("Chrome")> -1)return "Chrome";else if(navigator.userAgent.indexOf("Safari")> -1)return "Safari";else if(navigator.userAgent.indexOf("Trident")> -1)return "Internet Explorer";else return "Netscape";}else return navigator.appName;};function getInternetExplorerVersion(){var rv= -1;if(navigator.appName=='Microsoft Internet Explorer'){var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)rv=parseFloat(RegExp.$1);}else if(navigator.appName=='Netscape'){var ua=navigator.userAgent;var re=new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)rv=parseFloat(RegExp.$1);}return Math.min(10,rv);};function Bm(){var prefix;switch(BrowserName()){case "Internet Explorer":return getInternetExplorerVersion().toFixed(1);case "Firefox":prefix="Firefox\/";break;case "Safari":case "Opera":prefix="Version ";if(navigator.userAgent.indexOf("OPR"))prefix="OPR\/";break;case "Chrome":prefix="Chrome\/";break;}if(prefix){var re=new RegExp(prefix+"([0-9]+(\.[0-9]+)*)");if(re.exec(navigator.userAgent)!=null){if(navigator.userAgent.indexOf("Trident")&&RegExp.$1=="6.0"){return "10.0";}else if(navigator.userAgent.indexOf("Trident")&&RegExp.$1=="5.0"){return "9.0";}else if(navigator.userAgent.indexOf("Trident")&&RegExp.$1=="4.0"){return "8.0";}else return RegExp.$1;}}return-1;};function uy(){return BrowserName()+' '+Bm();};function zl(id,Bk){if(elm=document.getElementById(id)){var yW=elm.width-elm.height;if(Bk==90||Bk==270){if(uy()=='Internet Explorer 8.0')elm.style.margin="0px 0px "+yW+"px "+yW+"px";else if(uy()=='Internet Explorer 7.0')elm.style.margin="0px";else if(uy()=='Opera 10.60')elm.style.margin=(-yW/2)+"px 0px "+(-yW/2)+"px 0px";else elm.style.margin=yW/2+"px 0px "+yW/2+"px 0px";}else elm.style.margin="0px";if(uy()=='Internet Explorer 7.0'){elm.width++;elm.width--;}}};function FP(id,dir){if(elm=document.getElementById(id)){var Gi=isNaN(Gi=parseInt(elm.className.substr(3)))?0:Gi;var yV=(Gi+(dir=='right'?90:270))%360;elm.className="rot"+yV;zl(id,yV);return yV;}return-1;};function yZ(id,dir,imgkey){var yV=FP(id,dir);if(yV!= -1){if(elmframe=document.getElementById('userwork')){var Be='/dynamic/imagerotation.php?imgkey='+imgkey+'&newrotation='+yV+'&nocache='+Math.random();if(elmframe.location)elmframe.location=Be;else elmframe.src=Be;}try{es[aCurrentOrder[(fg-1)][0][1]][17]=yV;}catch(err){}}};function rW(aB){var lJ=aB.offsetWidth||0;var mz=aB.offsetHeight||0;if(typeof aB.childNodes!='undefined'){for(var i=0;i<aB.childNodes.length;i++){var vY;vY=rW(aB.childNodes[i]);lJ=Math.max(lJ,vY[0]);mz=Math.max(mz,vY[1]);}}return[lJ,mz];};function Im(aB){if(aB.height)return aB.height;else if(aB.style.height)return parseInt(aB.style.height);else return rW(aB)[1];};function Io(){var Jz=window.pageYOffset?window.pageYOffset:(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);if(Jz==Ih)return;var Kv=window.innerHeight?window.innerHeight:(document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);try{if(MFUL)for(var qy=0;qy<MFUL.aUploaders.length;qy++)for(var Il=1;Il<=7;Il++){Iq=MFUL.aUploaders[qy].aAb.azc[Il]['Av'];if(Ie=document.getElementById(Iq)){var Ij=Im(Ie);var Ii;var Ig;if(Ij>Kv)Ii=Math.min(0,Math.max(Kv-Ij,parseInt(Ie.style.top)-(Jz-Ih)));else Ii=Math.max(0,Math.min(Kv-Ij,parseInt(Ie.style.top)));Ig=Ii-parseInt(Ie.style.top);Ie.style.top=Ii+'px';if(MFUL.aUploaders[qy].aAb&&MFUL.aUploaders[qy].aAb.qP)MFUL.aUploaders[qy].aAb.qP.style.top=parseInt(MFUL.aUploaders[qy].aAb.qP.style.top)+Ig+'px';if(MFUL.aUploaders[qy].qW)MFUL.aUploaders[qy].qW.style.top=parseInt(MFUL.aUploaders[qy].qW.style.top)+Ig+'px';if(MFUL.aUploaders[qy].BN&&MFUL.aUploaders[qy].BN.wrapperDiv)MFUL.aUploaders[qy].BN.wrapperDiv.style.top=parseInt(MFUL.aUploaders[qy].BN.wrapperDiv.style.top)+Ig+'px';}}}catch(err){}try{if(Id=document.getElementById('MediaFireSharePopup')){var Ic=32;var Ik=Im(Id)+Ic;if(Ik>Kv)Id.style.top=Math.min(0,Math.max(Kv-Ik,parseInt(Id.style.top)-Ic-(Jz-Ih)))+Ic+'px';else Id.style.top=Math.max(0,Math.min(Kv-Ik,parseInt(Id.style.top)-Ic))+Ic+'px';}}catch(err){}Ih=Jz;};function It(){if(BrowserName()=="Internet Explorer")if(window.location.href.indexOf("#")> -1){document.title=Iu;setTimeout(sk(this,function(){document.title=Iu;}),200);}};function Ku(hl,hg){if(false){var ez='/dynamic/error.php?type='+escape(hl);if(typeof hg!=='undefined'){ez+='&message='+escape(hg);}return Ko(ez);}};function uS(baP,IC){var Fo=[];for(var i=IC||0,Tt=baP.length;i<Tt;i++)Fo.push(baP[i]);return Fo;};function sk(lL,xf){var BA=uS(arguments,2);return function(){var Wb=uS(arguments,0);return xf.apply(lL,BA.concat(Wb));};};function NQ(wa){if(wa.preventDefault){wa.preventDefault();}wa.returnValue=false;return false;};function indexOf(arr,needle){if([].indexOf){return Array.prototype.indexOf.call(arr,needle);}else{for(var i=0;i<arr.length;i++){if(arr[i]==needle){return i;}}return-1;}};function Uf(Fo,Uc){Fo.push(Uc);};function QO(QR){try{if(jQuery.browser.msie&&Number(jQuery.browser.version)<8){return 400;}else{return Math.max(450,QR.offsetWidth);}}catch(e){return 400;}};function Qg(Qr,aYR,xf,SY,Qm,lJ,mz){var jx=document.getElementById('input_dialog_div');if(!jx){jx=document.createElement('DIV');jx.id='input_dialog_div';jx.className='popup';document.body.appendChild(jx);}var oX='';var PZ=" var aResults = Array();";var Rb=null;for(var i=0;aYR[i];i++){if(aYR[i][0]){aYR[i][0]=aYR[i][0].replace('"','&quot;').replace("'","\\'");if(aYR[i][3]&&typeof aYR[i][3]==='string'){aYR[i][3]=aYR[i][3].replace('"','&quot;');}if(aYR[i][5])aYR[i][5]=aYR[i][5].replace('"','&quot;').replace("'","\\'");var sPlaceholder=aYR[i][6]?aYR[i][6].replace('"','&quot;'):'';var OR=aYR[i][5]||("input_dialog_"+aYR[i][0]);if(typeof xf=="function")PZ+=" aResults['"+aYR[i][0]+"'] = document.getElementById('"+OR+"')."+(aYR[i][2]=='checkbox'?'checked':'value')+";";if(aYR[i][2]!='checkbox'&&aYR[i][2]!='hidden')oX+='<label>'+(aYR[i][1]||aYR[i][0])+'</label>';switch(aYR[i][2]){case 'textarea':oX+='<textarea id="'+OR+'" placeholder="'+sPlaceholder+'" name="'+aYR[i][0]+'" style="margin-bottom: 10px" '+(aYR[i][4]?'rows="'+aYR[i][4]+'" ':'')+'>'+(aYR[i][3]||"")+'</textarea>';Rb=Rb||OR;break;case 'checkbox':oX+='<input id="'+OR+'" type="checkbox" name="'+aYR[i][0]+'" '+(aYR[i][3]?'checked="checked" ':'')+' /><span style="color: #777">'+(aYR[i][1]||aYR[i][0])+'</span>';break;case 'hidden':oX+='<input id="'+OR+'" type="hidden" name="'+aYR[i][0]+'" value="'+aYR[i][3]+'" />';break;case 'html':oX+=aYR[i][4];break;case 'password':default:oX+='<input id="'+OR+'" type="'+(aYR[i][2]=='password'?'password':'text')+'" placeholder="'+sPlaceholder+'" name="'+aYR[i][0]+'" style="margin-bottom: 10px; width: 365px;" '+(aYR[i][4]?'maxlength="'+aYR[i][4]+'" ':'')+'value="'+(aYR[i][3]||"")+'" />';Rb=Rb||OR;}}}var sHTML='<a href="#" onclick="bfM(\'input_dialog_div\'); return false" class="popup-close"></a>';sHTML+='<h3 class="popup-title">'+Qr+'</h3>';if(typeof SY=="object"&&SY instanceof Array){sHTML+='<form action="'+SY[0]+'" method="'+(SY[1]||'POST')+'" '+(SY[2]?'target = "'+SY[2]+'"':'')+' onsubmit="bfM(\'input_dialog_div\');';if(typeof xf=="function"){PW=xf;sHTML+=PZ+' return PW(aResults);';}sHTML+='">';}sHTML+='<div class="popup-content">'+oX+'</div>';sHTML+='<div class="popup-btns">';if(typeof SY=="object"&&SY instanceof Array){sHTML+='<input class="gbtnTertiary" type="submit" value="'+(Qm||'Submit')+'"><a href="#" onclick="bfM(\'input_dialog_div\'); return false;" class="gbtnPrimary">Cancel</a></div></form>';}else{sHTML+='<a href="#" onclick="bfM(\'input_dialog_div\');';if(typeof xf=="function"){PW=xf;sHTML+=PZ+' PW(aResults);';}sHTML+=' return false;" class="gbtnTertiary">'+(Qm||'OK')+'</a><a href="#" onclick="bfM(\'input_dialog_div\'); return false;" class="gbtnPrimary">Cancel</a></div>';}jx.innerHTML=sHTML;jx.style.width="";jx.style.height="";jx.style.display="block";DoAPopup('input_dialog_div',lJ?lJ:QO(jx),mz?mz:jx.offsetHeight);if(Rb)document.getElementById(Rb).focus();};function QS(Qr,hg,LN,xf,Sh,TJ){var LH=document.getElementById('message_dialog_div');if(!LH){LH=document.createElement('DIV');LH.id='message_dialog_div';document.body.appendChild(LH);}LH.className='popup '+(TJ||'');var sHTML='<a href="#" onclick="bfM(\'message_dialog_div\'); return false" class="popup-close"></a>';sHTML+='<h3 class="popup-title">'+Qr+'</h3>';sHTML+='<div class="popup-content"><p>'+hg+'</p></div>';var Qq=false;if(typeof xf=="function"){QQ=xf;Qq=true;}sHTML+='<div class="popup-btns">';for(var i=0;LN[i];i++){var btnCallback=false;if(LN[i][0]){if(LN[i][3]){btnCallback=LN[i][3]+"();";}else{btnCallback=(Qq?" QQ('"+LN[i][0]+"');":"");}sHTML+='<a href="javascript:void(0)" class="'+(LN[i][2]=="gbtnPrimary"?"gbtnPrimary":"gbtnTertiary")+'" onclick="bfM(\'message_dialog_div\');'+btnCallback+'">'+(LN[i][1]||LN[i][0])+'</a>';}}sHTML+='</div>';LH.innerHTML=sHTML;LH.style.width="";LH.style.height="";LH.style.display="block";var Sr=Sh&&Sh[0]?Sh[0]:QO(LH);var Ss=Sh&&Sh[1]?Sh[1]:LH.offsetHeight;DoAPopup('message_dialog_div',Sr,Ss,true);};function bfZ(){if($(".popup").filter(":visible").length>0)return true;return false;};function QU(){try{var jPopups=$('.popup');if(jPopups.length){jPopups.map(aqv);jPopups.find('.close').click();jPopups.find('.popup-close').click();}$('#modal_window_popup').map(aqv);$('#myfiles_sharing_popup').map(aqv);$('#modal_window_popup').removeClass('transparentBG');if($('#modal_msg_iframe').attr('src')!=='/blank.html'){pN('/blank.html','modal_msg_iframe');}}catch(e){}};function aqv(){if(this.id){bfM(this.id);}}(function($){//-->
$.event.special.draghover={setup:function(){$(this).bind({"dragenter.mfdnd":QB,"dragleave.mfdnd":TT});},teardown:function(){$(this).unbind(".mfdnd");},add:function(Tm){var Tg=Tm.namespace,name=Tg?"draghoverover."+Tg+" draghoverout."+Tg:"draghoverover draghoverout";$(this).bind(name,function(event){event.stopPropagation();event.over=event.enter= ! !event.type.match(/over$/i);event.out=event.leave= !event.over;Tm.handler.call(this,event);});},remove:function(Tm){var Tg=Tm.namespace,name=Tg?"draghoverover."+Tg+" draghoverout."+Tg:"draghoverover draghoverout";$(this).unbind(name);}};function QB(event){var self=this,Ha;if(event.relatedTarget){if($(event.relatedTarget).parents().andSelf().index(self)=== -1){$(self).trigger("draghoverover");}}else{setTimeout(function(){Ha=$(self).data();if(Ha.Tl){clearTimeout(Ha.Tl);}else{$(self).trigger("draghoverover");}Ha.Tl=null;},0);}};function TT(event){var self=this,Ha;if(event.relatedTarget){if($(event.relatedTarget).parents().index(this)=== -1){$(this).trigger("draghoverout");}}else{Ha=$(this).data();if(!Ha.Tl){Ha.Tl=setTimeout(function(){Ha.Tl=null;$(self).trigger("draghoverout");},$.browser.msie&&$.browser.version<9?50:25);}}};var $elems=$([]);$.event.special.clickoutside={setup:function(){$elems=$elems.add(this);if($elems.length===1){$(document).bind('click',TC);}},teardown:function(){$elems=$elems.not(this);if($elems.length===0){$(document).unbind('click',TC);}},add:function(Tx){var TP=Tx.handler;Tx.handler=function(event,QG){event.target=QG;TP.apply(this,arguments);};}};function TC(event){$elems.each(function(){var $this=$(this);if(this!==event.target&& !$this.has(event.target).length){$this.triggerHandler('clickoutside',[event.target]);}});};})(jQuery);(function($){var div;$.fn.outerHTML=function(){var elem=this[0],vW;return!elem?null:typeof(vW=elem.outerHTML)==='string'?vW:(div=div||$('<div/>')).html(this.eq(0).clone()).html();};})(jQuery);function SC(response){switch(response.status){case 'connected':{SF();}break;case 'notConnected':{SD();}break;case 'unknown':{SD();}break;default:{SD();}break;}};function SF(){var iFBPageID=124975940890187;FB.api(FBAPIVersion+'me/likes/'+iFBPageID,function(r){if(typeof r.data[0]!='undefined'&&r.data[0].id==iFBPageID){SB();return;}SD();});};function SB(){jQuery('#mf_like_heading').addClass('hide');jQuery('#mf_like_box').addClass('hide');jQuery(".social-follow:not(.myfiles-page)").removeClass("fb");};function SD(){jQuery('#mf_like_heading').removeClass('hide');jQuery('#mf_like_box').removeClass('hide');jQuery(".social-follow:not(.myfiles-page)").addClass("fb");};function formatBytes(size){if(size==0){return '0 b';}else{var base=Math.log(size)/Math.log(1024);var suffixes=["b","KB","MB","GB","TB"];return Math.round(Math.pow(1024,base-Math.floor(base)),0)+" "+suffixes[Math.floor(base)];}};function debounce(func,XG,execAsap){var timeout;return function debounced(){var obj=this,args=arguments;function delayed(){if(!execAsap)func.apply(obj,args);timeout=null;};if(timeout)clearTimeout(timeout);else if(execAsap)func.apply(obj,args);timeout=setTimeout(delayed,XG||100);};}(function(){var cache={};this.tmpl=function tmpl(str,data){var fn= !/\W/.test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj || {}){p.push('"+str.replace(/[\r\t\n]/g," ").replace(/'(?=[^\|]*\|\])/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/\[\|=(.+?)\|\]/g,"',$1,'").split("[|").join("');").split("|]").join("p.push('")+"');}return p.join('');");return data?fn(data):fn;};})();var sizeOf=(function(){if(typeof Object.keys==="function"){return function(o){if(o){if(o.constructor==Array){return o.length;}else{if((typeof o).toLowerCase()==="object"){return Object.keys(o).length;}else{return 0;}}}else{return 0;}};}else{return function(o){var x=0;for(var y in o){if(o.hasOwnProperty(y)){x++;}}return x;};}})();function adv(){var args=Array.prototype.slice.call(arguments);var GLB_Limited=false;if(args.length&&typeof args[0]=='boolean')GLB_Limited=args.shift();var boE=args[0];args.unshift(acz(boE)||"");if(GLB_Limited){if(aBO()){args[0]=args[0].replace(/(:\/\/)([^.]+)(\.mediafire)/,'$1dev$3');}else{args[0]=args[0].replace(/(:\/\/)([^.]+)(\.mediafire)/,'$1www$3');}}return args.join("/");};function aNy(sOrig){var gu='';for(i=0;i<sOrig.length;i++){if(sOrig.charCodeAt(i)<128){gu+=encodeURIComponent(sOrig.charAt(i));}else{gu+=sOrig.charAt(i);}}return gu;};function bql(aYM){return aNy(aYM.replace(/\s/g,'_').replace(/-+/g,'-').replace(/_+/g,'_'));};function anK(qv){var Yk= -1;try{Yk=new ActiveXObject(qv);}catch(e){Yk={mj:true};}return Yk;};function acV(){var apf=[{qv:"ShockwaveFlash.ShockwaveFlash.7"},{qv:"ShockwaveFlash.ShockwaveFlash.6"},{qv:"ShockwaveFlash.ShockwaveFlash"}];var baX=false;if(navigator.plugins&&navigator.plugins.length>0){var type='application/x-shockwave-flash';var aoL=navigator.mimeTypes;if(aoL&&aoL[type]&&aoL[type].enabledPlugin&&aoL[type].enabledPlugin.description){baX=true;}}else if(navigator.appVersion.indexOf("Mac")== -1&&window.execScript){for(var i=0,Tt=apf.length;i<Tt;i++){var Yk=anK(apf[i].qv);if(!Yk.mj){baX=true;}}}return baX;};function aiG(){var ajN=$(window).height();if(ajN<=1080){$("body").addClass('wHeightCondensed');}else{$("body").removeClass('wHeightCondensed');}var akn=$(window).width();if(akn<=960){$("body").addClass('siteMinWidth');}else{$("body").removeClass('siteMinWidth');}};function aij(alw,akU,xg,aoB,fEnabledCallback){var $oInputElement=$(alw);var $oCounterElement=$(akU);$oInputElement.bind("change keyup",function(){if(typeof fEnabledCallback=="function"&& !fEnabledCallback.call())return;if(xg>0&&$oInputElement.val().length>xg){$oInputElement.val($oInputElement.val().substring(0,xg));$oInputElement.change();}$oCounterElement.text(xg&&aoB?xg-($oInputElement.val().length):$oInputElement.val().length);});$oInputElement.change();};$(function(){jQuery.fx.interval=22;aiG();$(window).resize(function(){aiG();});});function avH(value,bit){return(parseInt(value)>>parseInt(bit))%2;};function aMm(value,bit){return value|1<<bit;};function aLG(value,bit){return((value>>bit)%2!==0);};function aMd(value,bit){return(value)&(~(1<<bit));};function aLf(value,bit){return aLG(value,bit)?aMd(value,bit):aMm(value,bit);};function LoadTemplatesFromSource(){var templates={};$("script.template").each(function(){templates[this.id]=window.tmpl(this.id);}).remove();return templates;};function awS(dn,avV){var quickkeys=(dn&&dn.hash)?dn.hash:dn.quickkey;$.ajax({type:'GET',url:'/dynamic/dmca_ticket_quickkey.php?r='+aC(4),dataType:'json',timeout:1000,data:{quick_key:quickkeys,response_format:'json',nocache:Math.round(Math.random()*1000)},success:(avV.success||avV),error:(avV.error||function(){})});};function ayj(HU){var ayO=HU.substring(0,1);return parseInt(ayO,16)+1;};function bcY(x){var num=x+"";while(num.length<2)num="0"+num;return num;};function blZ(aMe){var aUm=(typeof aVl!='undefined'&&aVl)||0;aUm/=3600;var aVO=(typeof bdk!='undefined'&&bdk)||aOr();var aPH=new Date();if(aMe){var aMp=aPH.toLocaleString();return(aMp!='Invalid Date')?aMp:'Not available';}var bbW={bnT:aPH.getFullYear()||0,month:bcY(parseInt(aPH.getMonth())+1)||0,date:bcY(aPH.getDate())||0,hours:bcY(aPH.getHours())||0,minutes:bcY(aPH.getMinutes())||0,seconds:bcY(aPH.getSeconds())||0};var acd=bbW;return acd.bnT+'-'+acd.month+'-'+acd.date+' '+acd.hours+':'+acd.minutes+':'+acd.seconds;};function bdj(timestamp,aMe){var aUm=(typeof aVl!='undefined'&&aVl)||0;aUm/=3600;var aVO=(typeof bdk!='undefined'&&bdk)||aOr();var aPH=new Date(new Date(aRR(timestamp)).getTime()+((aVO-aUm)*3600000));if(aMe){var aMp=aPH.toLocaleString();return(aMp!='Invalid Date')?aMp:'Not available';}var bbW={bnT:aPH.getFullYear()||0,month:bcY(parseInt(aPH.getMonth())+1)||0,date:bcY(aPH.getDate())||0,hours:bcY(aPH.getHours())||0,minutes:bcY(aPH.getMinutes())||0,seconds:bcY(aPH.getSeconds())||0};var acd=bbW;return acd.bnT+'-'+acd.month+'-'+acd.date+' '+acd.hours+':'+acd.minutes+':'+acd.seconds;};function aRR(MYF_sDate){var MYF_aDateTimeParts=MYF_sDate.split(" "),MYF_aDateParts=MYF_aDateTimeParts[0].split("-"),MYF_sMonth="January";switch(MYF_aDateParts[1]){case "02":MYF_sMonth="February";break;case "03":MYF_sMonth="March";break;case "04":MYF_sMonth="April";break;case "05":MYF_sMonth="May";break;case "06":MYF_sMonth="June";break;case "07":MYF_sMonth="July";break;case "08":MYF_sMonth="August";break;case "09":MYF_sMonth="September";break;case "10":MYF_sMonth="October";break;case "11":MYF_sMonth="November";break;case "12":MYF_sMonth="December";break;}return MYF_sMonth+" "+MYF_aDateParts[2]+", "+MYF_aDateParts[0]+" "+MYF_aDateTimeParts[1];};function aye(item){acS={};if(!item.parent_chunk)item.parent_chunk=1;acS.file_count_total=0;acS.folder_count_total=0;if(!item.selected)acS.selected=false;acS.bIsCameraUploadFolder=false;if((item.parent&&item.parent.folderkey==="myfiles")||(item.parent_folderkey&&item.parent_folderkey==="myfiles")){if(item.name==="Camera"){acS.bIsCameraUploadFolder=true;}}if(window.tH.currentFolder.folders[item.folderkey])if(window.tH.currentFolder.folders[item.folderkey].selected&&window.tH.currentFolder.folders[item.folderkey].selected===true)acS.selected=true;acS.file_count=window.tH.currentFolder.folders[item.folderkey]?window.tH.currentFolder.folders[item.folderkey].file_count:(item.file_count||0);acS.file_count_text=(acS.file_count_total>item.file_count)?('('+(acS.file_count_total-item.file_count)+' in subfolders)'):'';acS.folder_count_text=(acS.folder_count_total>sizeOf(item.folders))?('('+(acS.folder_count_total-sizeOf(item.folders))+' in subfolders)'):'';if(typeof item.custom_url=="undefined")acS.custom_url=false;if(typeof item.shared=="undefined")acS.shared=false;if(typeof item.dropbox_enabled=="undefined")acS.dropbox_enabled=false;if(typeof item.owner_name=="undefined")acS.owner_name="";if(typeof item.folder_count=="undefined")acS.folder_count=0;if(typeof item.itemrownum=="undefined")acS.itemrownum="";if(typeof item.avatar=="undefined")acS.avatar="";acS.newclass=(!item.newclass)?false:true;if(!item.created&&window.tH.currentFolder.folders[item.folderkey])item.created=window.tH.currentFolder.folders[item.folderkey].created;if(!item.timezone_adjusted){if(item.delete_date)acS.delete_date=bdj(item.delete_date);if(!item.created)acS.created='0000-00-00 00:00:00';else acS.created=bdj(item.created);acS.timezone_adjusted=true;}if(!acS.delete_date)acS.delete_date='';var oReturnFolder=$.extend(item,acS);oReturnFolder.folder_class="row_container mf_filecontainer folder cf";oReturnFolder.folder_class+=oReturnFolder.newclass?" new":"";oReturnFolder.folder_class+=" "+oReturnFolder.privacy;oReturnFolder.folder_class+=oReturnFolder.custom_url?" customurl-active":"";oReturnFolder.folder_class+=oReturnFolder.shared=='yes'?" collaborate-active":"";oReturnFolder.folder_class+=oReturnFolder.dropbox_enabled=='yes'?" dropbox":"";oReturnFolder.folder_class+=oReturnFolder.selected?" file_selected":"";oReturnFolder.folder_class+=typeof oReturnFolder.shared_by_user!=="undefined"&&oReturnFolder.shared_by_user==1?" sharedByUser":"";oReturnFolder.folder_class+=oReturnFolder.bIsCameraUploadFolder?" cameraUploads":"";return oReturnFolder;};function ayw(aZL){if(aZL.status&&avH(aZL.status,15)==1)return true;return false;};function axi(){var axZ=window.location.hostname;if(axZ.toLowerCase().indexOf("dev.",0)>=0||axZ.toLowerCase().indexOf("local.",0)>=0)return 'dev#';else return 'www#';};function getImageThumbURL(fo,eV,HU,azd,bPrivate,iModifiedTimestamp){var azX;azd=azd||false;azX=window.location.protocol+'//';azX+=((aBO()||isLOCALDEV())?'dev':'www')+(parseInt(HU.charAt(0),16)+1)+'.mediafire.com.de.a2ip.ru/';if(aBO()||azd){azX+='conversion_server.php?'+HU.substr(0,4)+'&doc_type=i&quickkey='+fo+'&size_id='+eV+(azd?'&request_conversion_only=1':'');if(bPrivate&&aEQ.adG){azX+="&session_token="+aEQ.adG.session_token;}if(iModifiedTimestamp){azX+="&timestamp="+iModifiedTimestamp;}}else{azX+='convkey/'+HU.substr(0,4)+'/'+fo+eV+'g.jpg';}return azX;};function aBM(fo,HU,azd,ik){var aCE;azd=azd||false;aCE=window.location.protocol+'//';aCE+=(aBO()?'dev':'www')+(parseInt(HU.charAt(0),16)+1)+'.mediafire.com.de.a2ip.ru/';aCE+='conversion_server.php?'+HU.substr(0,4)+'&doc_type=d&quickkey='+fo+'&page=1&output=img&size_id='+ik;if(azd)aCE+='&request_conversion_only=1&metadata=1';return aCE;};function akl(item,options){var dn={};if(!item.parent_chunk)item.parent_chunk=1;var MYF_bViewable=aCf(item);dn.imageSupported=(item.filetype==='image'&&MYF_bViewable);dn.previewSupported=(avH(item.flag,2)===1&&MYF_bViewable);dn.editSupported=(avH(item.flag,4)===1&&aGe(item));dn.fileExtension=(item.filename.indexOf('.')!== -1)?$.trim(item.filename.substr(item.filename.lastIndexOf('.')+1,4)).toLowerCase():'';dn.mimeType=(!item.mimetype)?"":item.mimetype.replace("/","_");if(item.mimetype&&(item.mimetype=="application/pdf"||item.mimetype=="application/x-pdf"))dn.fileExtension="pdf";dn.dmca=(avH(item.flag,3)==1||avH(item.flag,0)==1)?true:false;dn.copyright=(avH(item.flag,5)==1)?true:false;dn.servernum=item.hash?axi().replace("#",ayj(item.hash)):0;dn.restricted=(avH(item.flag,6)==1)?true:false;dn.wordfilterblock=(avH(item.flag,7)==1)?true:false;dn.fileInfected=(avH(item.flag,8)==1)?true:false;dn.thumb6ready=(avH(item.status,6)==1||ayw(item)||item.thumb6ready)?true:false;dn.thumb3ready=(avH(item.status,3)==1||(window.tH.aRK&&window.tH.aRK[item.quickkey])||ayw(item)||item.thumb3ready)?true:false;dn.thumb2ready=(avH(item.status,2)==1||(window.tH.aRE&&window.tH.aRE[item.quickkey])||ayw(item)||item.thumb2ready)?true:false;dn.thumb1ready=(avH(item.status,1)==1||(window.tH.aRp&&window.tH.aRp[item.quickkey])||ayw(item)||item.thumb1ready)?true:false;if(typeof item.itemrownum=="undefined")dn.itemrownum="";if(typeof item.flag=="undefined")dn.shared=false;else dn.shared=(avH(item.flag,1)==0)?true:false;dn.newclass=(!item.newclass)?false:true;dn.imgpath_0g='';dn.imgpath_1g='';dn.imgpath_2g='';dn.imgpath_3g='';if(item.hash){if(dn.previewSupported&&item.filetype!="image"){dn.imgpath_1g='conversion_server.php?'+item.hash.substr(0,4)+'&doc_type=d&quickkey='+item.quickkey+'&page=1&output=img&size_id=2';dn.imgpath_2g='conversion_server.php?'+item.hash.substr(0,4)+'&doc_type=d&quickkey='+item.quickkey+'&page=1&output=img&size_id=1';dn.imgpath_3g='conversion_server.php?'+item.hash.substr(0,4)+'&doc_type=d&quickkey='+item.quickkey+'&page=1&output=img&size_id=0';}else{dn.imgpath_0g='convkey/'+item.hash.substr(0,4)+'/'+item.quickkey+'0g.jpg';dn.imgpath_1g='convkey/'+item.hash.substr(0,4)+'/'+item.quickkey+'1g.jpg';dn.imgpath_2g='convkey/'+item.hash.substr(0,4)+'/'+item.quickkey+'2g.jpg';dn.imgpath_3g='convkey/'+item.hash.substr(0,4)+'/'+item.quickkey+'3g.jpg';}}if(!item.delete_date){if(dn.previewSupported&&item.filetype=="image"){if(!item.parent.folderkey||item.parent.folderkey==''||item.parent.folderkey=='myfiles'){if(afQ){if(afI)dn.clickLink=adv("view",afI,'gallery#'+item.quickkey);else dn.clickLink=adv("view",item.quickkey,Encoder.XSSEncode(aNy(item.filename)));}else{var bdT=tH.folders.yx(item.parent_folderkey);if(bdT&&item.parent_folderkey&&bdT.name){dn.clickLink=adv("view",item.quickkey,Encoder.XSSEncode(aNy(item.filename)));}else{dn.clickLink=adv("view",item.quickkey,Encoder.XSSEncode(aNy(item.filename)));}}}else{dn.clickLink=adv("view",item.quickkey,Encoder.XSSEncode(aNy(item.filename)));}dn.onClickLink='';}else{if(dn.previewSupported){dn.onClickLink="fFileChoicePopup.ope"+"n('"+item.quickkey+"');";}else{dn.onClickLink="window.MYF_DirectDownload({files: ['"+item.quickkey+"']});";}dn.onClickLink+=" return false;";dn.clickLink=agW(item);}}else{dn.parent_name='Trash';dn.parent_folderkey='trash';dn.clickLink='#trash';dn.onClickLink='void(0); return false;';}if(!item.selected){dn.selected=false;}if(window.tH.currentFolder.files[item.quickkey]){if(window.tH.currentFolder.files[item.quickkey].selected&&window.tH.currentFolder.files[item.quickkey].selected===true){dn.selected=true;}}if(options&&options.axn&&item.size&&(!isNaN(parseInt(options.axn)))&&(parseInt(item.size)>parseInt(options.axn))){dn.imgpath_0g='images/imgerrs/31-0.jpg';dn.imgpath_1g='images/imgerrs/31-1.jpg';dn.imgpath_2g='images/imgerrs/31-2.jpg';dn.imgpath_3g='images/imgerrs/31-3.jpg';}dn.showicon=true;dn.showthumb=false;if(dn.previewSupported){var aFF=0;if($('#myfiles_wrap').hasClass('sizeS')||aL('mfsize')=="S")aFF=1;if($('#myfiles_wrap').hasClass('sizeM')||aL('mfsize')=="M")aFF=2;if($('#myfiles_wrap').hasClass('sizeL')||aL('mfsize')=="L")aFF=3;if($('#myfiles_wrap').hasClass('listView'))aFF=0;if(dn["thumb"+aFF+"ready"]==true||item.filetype=="image"){dn.showthumb=dn["imgpath_"+aFF+"g"];dn.showicon=false;}}dn.showThumbnail=(aCf(item))?true:false;dn.isDocument=(aCz(item))?true:false;dn.docThumbnail=(dn.isDocument==true&&dn.showThumbnail==true)?aBM(item.quickkey,item.hash):'';if(!item.timezone_adjusted){if(item.delete_date){dn.delete_date=bdj(item.delete_date);}dn.created=bdj(item.created);dn.timezone_adjusted=true;}if(!dn.delete_date)dn.delete_date='';if(!item.downloads)dn.downloads=0;return $.extend(item,dn);};function aoZ(item){var dn={};dn.previewSupported=(item.filetype!=='image'&&aCf(item));dn.shareUrl=agW(item);if(item.previewurl)dn.shareUrl=item.previewurl;if(!item.hash)item.hash='';dn.imageViewUrl=dn.shareUrl;dn.imageUrl=adv(true,'convkey',item.hash.substr(0,4),item.quickkey+'4g.jpg');dn.encodedImage=Encoder.htmlEncode('<a href="'+dn.imageViewUrl+'" target="_blank"><img src="'+dn.imageUrl+'" border="0" alt="Simple, Free Image and File Hosting at MediaFire" /></a>');dn.encoded=Encoder.htmlEncode('<a href="'+dn.shareUrl+'" target="_blank">'+dn.shareUrl+'</a>');dn.urlFile=agW(item,'download');dn.urlImg=adv(true,'convkey',item.hash.substr(0,4),item.quickkey+'6g.jpg');dn.urlI=agW(item);return $.extend(item,dn);};function aNR(qy,oOneTimeInfo){if(!$('#sharebox').hasClass('premiumUser')){$('#freeOneTimeRemaining').prepend('Free ');}var hn=function(){if(!tH.user_info){tH.user_info={};}var MYF_iMaxCount=parseInt(tH.user_info.one_time_key_request_max_count,10);var MYF_iOneTimeRemaining=0;if(MYF_iMaxCount){MYF_iOneTimeRemaining=Math.max(0,MYF_iMaxCount-qy);$('#sharebox-onetimedownload #OneTimeRemaining span').html(MYF_iOneTimeRemaining);}if(fu==0){$('#OneTimeRemaining').show();}if(oOneTimeInfo.one_time_download_error_message||(oOneTimeInfo.links&&oOneTimeInfo.links[0].one_time_download_error_message)){$('#sharebox-onetimedownload form').hide();$('#onetimedownload-error').html(oOneTimeInfo.one_time_download_error_message).show();}if(MYF_iMaxCount&& !MYF_iOneTimeRemaining){$('#sharebox-onetimedownload form').hide();if($('#sharebox').hasClass('premiumUser')){$('#sharebox-onetimedownload #proOneTimeExpire span').html(MYF_iMaxCount);$('#sharebox-onetimedownload #proOneTimeExpire').show();}else{$('#sharebox-onetimedownload #freeOneTimeExpire').show();}}};if(!tH.user_info|| !tH.user_info.one_time_key_request_max_count){var adG=new window.tH.Dv();adG.Yw(function(data){var ajz=data.response;if(ajz.user_info&&ajz.user_info.one_time_key_request_max_count){if(!tH.user_info){tH.user_info=ajz.user_info;}else{tH.user_info.one_time_key_request_max_count=ajz.user_info.one_time_key_request_max_count;}}hn();});}else{hn();}};function MYF_fGetOneTimeKey(MYF_sOneTimeLink){return MYF_sOneTimeLink.split("?")[1];};function MYF_fGetDefaultOneTimeLink(MYF_oOneTimeInfo,MYF_sLinkType){if(MYF_sLinkType&&MYF_sLinkType!==null&&MYF_oOneTimeInfo[MYF_sLinkType])return MYF_oOneTimeInfo[MYF_sLinkType];if(MYF_oOneTimeInfo.view)return MYF_oOneTimeInfo.view;if(MYF_oOneTimeInfo.watch&&typeof MYF_oOneTimeInfo.watch!=='function')return MYF_oOneTimeInfo.watch;return MYF_oOneTimeInfo.download;};function MYF_ConfigHandlerOneTimeDownloadLink(MYF_sOneTimeKey){var MYF_iNewLength=parseInt($('#sharebox-onetimedownload select').val(),10)*24*60;var MYF_bNotifyEmail=$('#sharebox-onetimedownload input[name="one_time_email"]').is(':checked');function fSaveChanges(){tH.Cp.MFAPI_ConfigureOneTimeKey(MYF_sOneTimeKey,{data:{email_notification:MYF_bNotifyEmail,duration:MYF_iNewLength}},{success:function(){Zi(0,"Successfully updated 1-Time Download Link!");}});};$('#sharebox-onetimedownload select').off('change').on('change',function(){MYF_iNewLength=parseInt(this.value,10)*24*60;fSaveChanges();});$('#sharebox-onetimedownload input[name="one_time_email"]').off('change').on('change',function(){MYF_bNotifyEmail=$(this).is(':checked');fSaveChanges();});};function aLN(aKO,aLx,MYF_sLinkType){var aMb=new window.tH.Cp(aKO),sNotifyEmail="no",iValidLength=$('#sharebox-onetimedownload select').val()*24*60;if($('#sharebox-onetimedownload input[name="one_time_email"]').is(':checked')){sNotifyEmail="yes";}var arO={link_type:'one_time'};aMb.MFAPI_GetLinks(arO,{success:function(WH){if(WH.links[0].one_time_download_error_message){window.av();window.Zi(0,WH.links[0].one_time_download_error_message);}else{var jCopyButton='#sharebox-onetimedownload a.copy-link';var sOneTimeKey=MYF_fGetOneTimeKey(WH.links[0].one_time.download);var sLink=MYF_fGetDefaultOneTimeLink(WH.links[0].one_time,MYF_sLinkType);$('#one_time_download_link')[0].value=sLink;aNR(WH.one_time_key_request_count,WH);if(window.QC){$('#sharebox-onetimedownload a.copy-link').off('click').on('click',function(e){window.QC(sLink);aeV(e);});}else if(Clipboard.isSupported()){var oClipboard=new Clipboard(jCopyButton[0],{text:function(trigger){return sLink;}});oClipboard.on('success',function(e){Zi(0,"Copied to Clipboard");});}else{jCopyButton.hide();}if(sNotifyEmail==="yes"||iValidLength!==30*24*60){tH.Cp.MFAPI_ConfigureOneTimeKey(sOneTimeKey,{data:{email_notification:sNotifyEmail,duration:iValidLength}},{success:function(){}});}MYF_ConfigHandlerOneTimeDownloadLink(sOneTimeKey);}},error:function(){if(!aLx){window.av();window.Zi(0,'An unknown error has occurred.');}}});};function aNN(aKO){var aMb=new window.tH.Cp(aKO);var arO={data:{get_counts_only:'yes'}};aMb.aNW(arO,{success:function(WH){aNR(WH.one_time_key_request_count,WH);},error:function(){}});};function apO(item){var acS={};acS.shareUrl=agW(item);acS.rssUrl=adv("rss.php?key="+item.folderkey);acS.encoded=Encoder.htmlEncode('<a href="'+acS.shareUrl+'" target="_blank">'+acS.shareUrl+'</a>');return $.extend(item,acS);};function apX(){if(!window.tH|| !window.tH.Cp|| !window.tH.yJ){return false;}window.tH.Cp.WF=function(input){var file=$.extend({},input);file.parent=file.parent&&file.parent.folderkey;return JSON.stringify(file);};window.tH.Cp.Wm=function(input){var file=JSON.parse(input);return new window.tH.Cp(file);};window.tH.yJ.WF=function(input){var folder=$.extend({},input);folder.parent=folder.parent&&folder.parent.folderkey;folder.folders=$.map($.values(folder.folders),function(folder){return folder.folderkey;});folder.files=$.map($.values(folder.files),function(file){return file.quickkey;});return JSON.stringify(folder);};window.tH.yJ.Wm=function(input){var folder=JSON.parse(input);return new window.tH.yJ(folder);};window.tH.folders=new XV("folder",window.tH.yJ.WF,window.tH.yJ.Wm);window.tH.files=new XV("file",window.tH.Cp.WF,window.tH.Cp.Wm);return true;};function R(content,callback){var P='';if(content.files&&content.files.length>0)P+='&files='+content.files.join(',');if(content.folders&&content.folders.length>0)P+='&folders='+content.folders.join(',');blu("/widgets/share.php?web=1"+P,585,500,{transparent:true,delayRender:true});};var aJ={};aJ["gmail"]=(function(){var host=location.protocol+'//'+location.host+"/auth/gmail/",oGoogWindow=undefined,sBeginUrl=host+"begin.php",contactsUrl=host+"contacts.php";window.GmailOauthComplete=function(resp){clearInterval(oWindowCheckInterval);if(typeof oGoogWindow!="undefined")oGoogWindow.close();if(resp.error){errorCallback(resp.error);}else if(resp.fail){failCallback();}else if(resp.success){if(!bSkipImport)bpc(resp.success);else successCallback(resp.success);return;}else{errorCallback("Improper complete response found.");}};var bImportingContacts=false,errorCallback=undefined,failCallback=undefined,successCallback=undefined,oWindowCheckInterval=undefined,bSkipImport=false;function bpc(key){bImportingContacts=true;$.getJSON(contactsUrl+"?rk="+key,function(data){bImportingContacts=false;if(data.error){errorCallback(data.error);return;}else if(data.fail){failCallback();}else if(typeof data.success!=="undefined"){successCallback(data.success);}else{errorCallback("Improper success response found.");}}).fail(function(req){bImportingContacts=false;errorCallback(req.statusText);});};function bnN(){if(typeof oGoogWindow=="undefined"||oGoogWindow.window==null||oGoogWindow.closed){var resp={error:"The window was closed early."};window.GmailOauthComplete(resp);}};function BeginAuth(LoadingCallback,ErrorCallback,FailCallback,SuccessCallback,bSkipContactImport){if(bImportingContacts)return;errorCallback=typeof ErrorCallback=="function"?ErrorCallback:$.noop;failCallback=typeof FailCallback=="function"?FailCallback:$.noop;successCallback=typeof SuccessCallback=="function"?SuccessCallback:$.noop;bSkipImport=(bSkipContactImport==true)?true:false;var popupWidth=450;var popupHeight=450;var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var screenWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.documentElement.clientWidth;var screenHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.documentElement.clientHeight-22);var leftOffset=(screenX<0)?window.screen.width+screenX:screenX;var left=parseInt(leftOffset+((screenWidth-popupWidth)/2),10);var top=parseInt(screenY+((screenHeight-popupHeight)/2.5),10);var windOptions=[];windOptions.push('width='+popupWidth);windOptions.push('height='+popupHeight);windOptions.push('left='+left);windOptions.push('top='+top);windOptions.push('scrollbars=1');windOptions.push('location=1,toolbar=0');windOptions=windOptions.join(',');oGoogWindow=window.open(sBeginUrl,"MFGoogleOauth",windOptions);oWindowCheckInterval=setInterval(bnN,100);LoadingCallback();};function CancelAuth(){if(typeof oGoogWindow!="undefined"&&oGoogWindow.window!=null)oGoogWindow.close();};return{title:"Gmail",BeginAuth:BeginAuth,CancelAuth:CancelAuth}})();aJ["twitter"]=(function(){var host=location.protocol+'//'+location.host+"/auth/twitter/",oTwitterWindow=undefined,sBeginUrl=host+"begin.php",sOauthCallbackUrl=host+"oauth2callback.php",contactsUrl=host+"contacts.php";var bSkipImport=false;var bImportingContacts=false,cancelWatch=false,errorCallback=undefined,failCallback=undefined,successCallback=undefined,oWindowCheckInterval=undefined;window.TwitterOauthComplete=function(resp){clearInterval(oWindowCheckInterval);if(typeof oTwitterWindow!="undefined")oTwitterWindow.close();if(resp.error){errorCallback(resp.error);}else if(resp.fail){failCallback();}else if(resp.success){if(!bSkipImport)bpc(resp.success);else successCallback(resp.success);return;}else{errorCallback("Improper complete response found.");}};function bpc(key){bImportingContacts=true;$.getJSON(contactsUrl,function(data){bImportingContacts=false;if(data.error){errorCallback(data.error);return;}else if(data.fail){failCallback();}else if(typeof data.success!=="undefined"){successCallback(data.success);}else{errorCallback("Invalid success response found.");}}).fail(function(req){bImportingContacts=false;errorCallback(req.statusText);});};function bnN(){if(typeof oTwitterWindow=="undefined"||oTwitterWindow.window==null||oTwitterWindow.closed){var resp={error:"The window was closed early."};window.TwitterOauthComplete(resp);}};function BeginAuth(LoadingCallback,ErrorCallback,FailCallback,SuccessCallback,bSkipContactImport){errorCallback=typeof ErrorCallback=="function"?ErrorCallback:$.noop;failCallback=typeof FailCallback=="function"?FailCallback:$.noop;successCallback=typeof SuccessCallback=="function"?SuccessCallback:$.noop;bSkipImport=(bSkipContactImport==true)?true:false;var popupWidth=680;var popupHeight=530;var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var screenWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.documentElement.clientWidth;var screenHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.documentElement.clientHeight-22);var leftOffset=(screenX<0)?window.screen.width+screenX:screenX;var left=parseInt(leftOffset+((screenWidth-popupWidth)/2),10);var top=parseInt(screenY+((screenHeight-popupHeight)/2.5),10);var windOptions=[];windOptions.push('width='+popupWidth);windOptions.push('height='+popupHeight);windOptions.push('left='+left);windOptions.push('top='+top);windOptions.push('scrollbars=1');windOptions.push('location=1,toolbar=0');windOptions=windOptions.join(',');oTwitterWindow=window.open(sBeginUrl,"MFTwitterOauth",windOptions);oWindowCheckInterval=setInterval(bnN,100);if(typeof LoadingCallback=="function")LoadingCallback();};function CancelAuth(){if(typeof oTwitterWindow!="undefined"&& !oTwitterWindow.closed)oTwitterWindow.close();};return{title:"Twitter",BeginAuth:BeginAuth,CancelAuth:CancelAuth}})();aJ["facebook"]=(function(){var authorizing=false,cancelWatch=false,errorCallback=undefined,failCallback=undefined,successCallback=undefined;var bSkipImport=false;function BeginAuth(LoadingCallback,ErrorCallback,FailCallback,SuccessCallback,bSkipContactImport){if(authorizing|| !window.FB){return;}errorCallback=(typeof ErrorCallback=='function')?ErrorCallback:$.noop;failCallback=(typeof FailCallback=='function')?FailCallback:$.noop;successCallback=(typeof SuccessCallback=='function')?SuccessCallback:$.noop;bSkipImport= ! !bSkipContactImport;FB.login(function(response){if(response.status=="connected"){FB.api(FBAPIVersion+'me/permissions',function(oResponse){if(!bSkipImport){bpe(FB);}else{successCallback(FB);}});}else{authorizing=false;failCallback('User would not authorize Facebook.');}});if(typeof LoadingCallback=='function'){LoadingCallback();}};function bnV(oDate){var sYear=oDate.getFullYear().toString();var hc=(oDate.getMonth()+1).toString();var gP=oDate.getDate().toString();return sYear+'-'+(hc[1]?hc:"0"+hc[0])+'-'+(gP[1]?gP:"0"+gP[0]);};function bpe(FB){authorizing=true;function bnz(){FB.api(FBAPIVersion+'me/friends?fields=name,id,picture,birthday,gender,hometown,location,website,first_name,last_name',function(oResponse){var aContacts=[];var eh=0;var oContact=new window.tH.aBS();for(iKey in oResponse.data){var aContact=oResponse.data[iKey];if(typeof aContact!='function'){eh++;var aPicture=aContact['picture'];var sBirthday=aContact['birthday']?aContact['birthday']:null;var sGender=aContact['gender']?aContact['gender']:null;var sHometown=aContact['hometown']?aContact.hometown['name']:null;var lu=aContact['location']?aContact.location['name']:null;var sWebsite=aContact['website']?aContact['website']:null;var qv=aContact['name'];var sPicture=aPicture.data.url;if(sBirthday&&sBirthday.length==10){var oBirthday=new Date(sBirthday);sBirthday=bnV(oBirthday);}else{sBirthday=null;}var iGender=0;if(sGender=='female')iGender=1;if(sGender=='male')iGender=2;aContacts.push({display_name:aContact['name'],first_name:aContact['first_name'],last_name:aContact['last_name'],avatar:sPicture,source_uid:aContact['id'],birthdate:sBirthday,gender:iGender,location:lu?lu:sHometown,website:sWebsite});}}if(aContacts.length==0){authorizing=false;errorCallback("No contacts found");return;}var iFacebookChunkSize=30;var iCurrentRequestsPending=0;var iImportConcurrentRequests=2;var iContactTotal=aContacts.length;var bImportError=false;function boA(bnF,jU){iCurrentRequestsPending--;if(bImportError)return;var iContactRemaining=iContactTotal-aContacts.length;var iContactPercent=Math.round((iContactRemaining/iContactTotal)*100);if(iContactPercent>100)iContactPercent=100;$("#sharebox-contacts .numberOfContacts").text(" ("+iContactRemaining+" of "+iContactTotal+")");$("#sharebox-contacts .progressbar div").css("width",iContactPercent+"%");var aXu=bnF.response;if(aXu.error){authorizing=false;bImportError=true;errorCallback(aXu.message);}else if(aContacts.length>0){bpm();}else if(iCurrentRequestsPending==0){authorizing=false;successCallback(iContactTotal);}};function bof(bnF,bnW,bpa){iCurrentRequestsPending--;var wy=JSON.parse(bnF.responseText).response.message;if(bImportError)return;authorizing=false;bImportError=true;errorCallback(wy);};function bpm(){iCurrentRequestsPending++;oContact.ZD({data:{contact_type:'facebook',contacts:JSON.stringify(aContacts.splice(0,iFacebookChunkSize))},type:'POST'},{success:boA,error:bof});};$("#sharebox-contacts .numberOfContacts").text(" (0 of "+iContactTotal+")");$("#sharebox-contacts .progressbar div").css("width","0%");$("#sharebox-contacts").addClass("importingContactsProgress");for(var i=0;i<iImportConcurrentRequests;i++){if((i*iFacebookChunkSize)<iContactTotal)bpm();}});};var bpi=new tH.Dv();bpi.Yw({success:function(data){if(data.response.result=="Success"){var oFacebook=data.response.user_info.facebook;FB.getLoginStatus(function(response){if(oFacebook.linked!="yes"||oFacebook.facebook_id!=response.authResponse.userID){var aCR=FB.getAuthResponse();var aQH=aCR?aCR['accessToken']:'';var jU={data:{fb_access_token:aQH}};bpi.aKH(jU,{success:function(data){if(data.response.result=="Success"){bnz();}else{authorizing=false;errorCallback("Unable to link accounts: "+data.response.message);}},error:function(r){authorizing=false;var sMsg=JSON.parse(r.responseText).response.message;errorCallback("Unable to link accounts: "+sMsg);}});}else{bnz();}});}else{authorizing=false;errorCallback("Unable to load user info: "+data.response.message);}},error:function(r){authorizing=false;var sMsg=JSON.parse(r.responseText).response.message;errorCallback("Unable to load user info: "+sMsg);}});};return{title:"Facebook",BeginAuth:BeginAuth,CancelAuth:null}})();var CloseSharePopup;function CreateSharePopup(aic,aTemplateData){return(function(){var $popup=$("#"+aic).popup(),popup=$popup.data("popup"),es=[],axL=[],aClipboards=[],aContacts=[],oServices={},oSyncTimes={};function ali(bgG){if(bgG){$popup.closest(".popup").addClass('popup-uploader-mode');}else{$popup.closest(".popup").removeClass('popup-uploader-mode');}};function Clear(){es=[];axL=[];ali(false);};function ald(fo,aYM,yH,aiP,HU,sPreviewable,bFilePrivacy,bFileShared,iFilePermissions){if(!iFilePermissions)iFilePermissions=0;es.push({filename:aYM,filetype:aiP,hash:HU,quickkey:fo,size:yH,viewable:sPreviewable,privacy:bFilePrivacy,shared:bFileShared,permissions:iFilePermissions});};function akb(qv,qN,bFolderPrivacy,bFolderShared,iFolderPermissions){if(!iFolderPermissions)iFolderPermissions=0;axL.push({name:qv,folderkey:qN,privacy:bFolderPrivacy,shared:bFolderShared,permissions:iFolderPermissions});};function DelayedShow(aAS,aFh,od,bbV,A){var aD=false;var hB=false;if(axL.length>0&&es.length>0){return;}else{var bmX=function(aCk){if(aCk.shared){hB=true;if(NZ(aCk)==0)aD=true;}};var bmc=axL.length,blG=es.length;if(bmc>0){for(var i=0;i<bmc;i++){if(hB&&aD)break;bmX(axL[i]);}}if(blG>0){for(var i=0;i<blG;i++){if(hB&&aD)break;bmX(es[i]);}}}if(bbV)oSyncTimes=bbV;Show(aAS,true,aFh,aD,hB,od,A);};function Show(aAS,bnk,aFh,aD,hB,od,A){var bjt=false;var bjy=function(biO,bkt){if(acK||bkt){$('#sharebox').addClass('nonOwner');$('.share-status').hide();}else{$('#sharebox').removeClass('nonOwner');$('.share-status').show().text(biO?'Enable':'Disable');}$('#sharebox').removeClass('collabshare collabshare-manage');if(biO){$('#sharebox').addClass('publicDisabled');}else{$('#sharebox').removeClass('publicDisabled disabledAlert');}bjt=biO;};if(axL.length){var bHasMyFiles=false;$.each(axL,function(){if(this.folderkey=="myfiles"){bHasMyFiles=true;return false;}});if(bHasMyFiles){Zi(0,"You cannot share your My Files root folder");return false;}}aAy=false;if(aAS=='file_preview')aAy=true;bhz=false;if(aAS=="media_preview")bhz=true;bgy=false;if(aAS=="file_download")bgy=true;CloseSharePopup=Hide;if(es.length+axL.length>1){var bhW=false;var bjn=false;var agJ={};agJ.name='Multiple Items';var Ba=[];var ahQ=[];$.each(es,function(x,aZL){Ba.push(aZL.filename);ahQ.push(aZL.quickkey);if(aZL.privacy)bhW=true;if(aZL.shared)bjn=true;});$.each(axL,function(x,sD){Ba.push(sD.name);ahQ.push(sD.folderkey);if(sD.privacy)bhW=true;if(sD.shared)bjn=true;});agJ.emailnames=Ba.join(";;");agJ.multikey=ahQ.join(",");agJ.emailkeys=ahQ.join(";;");if(bjn){$('#sharebox').addClass("collabshare");}if(bjn&&bhW){}if(aAy){var beu='#'+aNy(window.location.hash.replace('#',''));agJ.shareUrl=adv("view",agJ.multikey,"gallery"+(beu.length>1?beu:''));}else{agJ.shareUrl=adv("folder",agJ.multikey,"shared");}agJ.encoded=Encoder.htmlEncode('<a href="'+agJ.shareUrl+'" target="_blank">'+agJ.shareUrl+'</a>');$popup.html(aTemplateData.multi_share(agJ));var bik=function(bix){var biU=0,bhN=0;function bii(aqC,biw){var bhJ=(biw=="file"&&es[aqC])?es[aqC].quickkey:null,bhR=(biw=="folder"&&axL[aqC])?axL[aqC].folderkey:null;if(biw=="file"&& !bhJ){biU=aqC;bii(0,"folder");return;}else if(biw=="folder"&& !bhR){bhN=aqC;bix(biU,bhN);return;}LF.aah(bhW?"public":"private",bhJ,bhR,false,function(){bii(aqC+1,biw);});};bii(0,"file");};bjy(bhW,bjn);if(!acK){$('.share-status').on('click',function(e){bik(function(biU,bhN){if(biU>=es.length&&bhN>=axL.length){bhW= !bhW;bjy(bhW,bjn);}});});}else{$('.share-status').hide();}}else if(es.length){if(es[0].shared){if(NZ(es[0])!="3"){}$('#sharebox').addClass(function(){if(NZ(es[0])=="3")return "collabshare-manage";else return "collabshare";});}es[0].previewurl=agW(es[0],'view');if(aAy){var beu='#'+aNy(window.location.hash.replace('#','')),bes=es[0].filetype,aUW=es[0].filename;if(bes=='selected')aUW='gallery';es[0].previewurl=adv("view",es[0].quickkey,aNy(aUW)+((bes=='gallery'||bes=='selected')&&beu.length>1?beu:''));}if(bhz){es[0].filetype=$("body").hasClass("video")?'video':'audio';es[0].previewurl=agW(es[0],'view');}$popup.html(aTemplateData.file_share(aoZ(es[0])));if(!acK){var aXC=$('#sharebox-onetimedownload');aNN(es[0].quickkey);$('#one_time_download_button').click(function(){var MYF_sLinkType=null;aLN(es[0].quickkey,true);aXC.find('#oneTimeCopyLinkContainer').show();$(this).html('Generate');});if(!$('#sharebox').hasClass('premiumUser')){aXC.find('#freeOneTimeRemaining').show();}}else{$('li[data-tab="sharebox-onetimedownload"]').hide();}bjy(es[0].privacy,es[0].shared);if(!acK){if(!window.LF){var adG=new tH.Dv();aaK=new Date().getTime();window.LF=new asR(adG,false,aaK,5400000,true);aqg=setInterval(function(){LF.ahE(adG);},360000);}$('.share-status').on('click',function(e){LF.aah(es[0].privacy?"public":"private",es[0].quickkey,null,false,function(){es[0].privacy= !es[0].privacy;bjy(es[0].privacy,es[0].shared);});});}else{$('.share-status').hide();}}else if(axL.length){if(axL[0].shared){if(NZ(axL[0])!="3"){$('#sharebox').addClass("publicDisabled");}$('#sharebox').addClass(function(){if(NZ(axL[0])=="3")return "collabshare-manage";else return "collabshare";});}$popup.html(aTemplateData.folder_share(apO(axL[0])));bjy(axL[0].privacy,axL[0].shared);if(!acK){$('.share-status').on('click',function(e){LF.aah(axL[0].privacy?"public":"private",null,axL[0].folderkey,true,function(){axL[0].privacy= !axL[0].privacy;bjy(axL[0].privacy,axL[0].shared);});});}else{$('.share-status').hide();}}$('#sharebox').removeClass('sharebox-moreoptions sharebox-email sharebox-onetimedownload');if(od){if(A){$popup.addClass('web-widget');}$popup.parent().parent().find('a.popup-close').remove();}if(aFh)$('#sharebox-email').addClass(aFh);var $eTabContent=$popup.find(".tabs").children("div");$eTabContent.hide();if(od)popup.open(false,0,0);else popup.open();var qn=function(){SetAutocomplete();bld();};var qe=function(){$popup.find('#sharebox-contacts').remove();if(aD)$popup.find('#current-contactsWrap').remove();else if(hB){bld();}};var boa=function(){if(bnk&& !hB){var bkL=typeof bjI!=='undefined';if(!bkL){LoadJS(sCDNUrl+'/js/contacts_'+BUILD_VERSION+'.js',function(){return typeof bjI!=='undefined';},qn,4,qe);}else{qn();}}else{qe();}};var bop=function(){var bka=new window.tH.aBS();bka.boU({success:function(aXu){oServices=aXu.response?aXu.response.sources:{};oServices[0]='User';boa();},error:function(){boa();}});};bop();if(aD&& !hB){$popup.find('#addContactPermissions').remove();$popup.find(".addContactSettings span").remove();}if((!es[0]|| !aCf(es[0]))&& !aAy&& !bhz){$popup.find('#sharebox-copylink').remove();}var MYF_jCopyButtons=$popup.find('.copy-link');if(window.QC){MYF_jCopyButtons.on('click',function(){window.QC($(this).prev('input').val());});}else if(Clipboard.isSupported()){aClipboards.forEach(function(e){e&&e.destroy();});aClipboards=[];$popup.find(".copy-link").each(function(i,eCopyLink){var oClipboard=new Clipboard(eCopyLink,{text:function(trigger){return $(trigger).prev('input').val()||'';}});oClipboard.on('success',function(e){Zi(0,"Copied to Clipboard");});aClipboards.push(oClipboard);});}else{MYF_jCopyButtons.hide();}$popup.find("#email_files_to").val("");$popup.find("#email_files_message").val("");if(!$('#sharebox').hasClass('publicDisabled'))$popup.find("input.share-mainlink:visible").focus();$popup.bind('click',function(e){aeV(e);});};function ShowTab(Tc,ajx){$popup.find(".tabs li[data-tab=sharebox-"+Tc+"]").click();ajx=="fb"&&$popup.find("#tw_share_checkbox").click();ajx=="tw"&&$popup.find("#fb_share_checkbox").click();};function Hide(){CloseSharePopup=0;popup.close();$(".popup").removeClass('popup-uploader-mode');};$("#page_screen, #popup-section, #popup-dialogs").click(function(e){if($popup.is(':visible')){popup.close();window.parent.$('#modal_window_closer').click();aeV(e);}});$('#popup-section .popup').on('click',function(e){aeV(e);});$popup.delegate("#email_files_message","focusin",function(e){$('#shareEnterText-msg').addClass('hide');});$popup.delegate("#email_files_to","focusin",function(e){$('#shareEnterText-email').addClass('hide');});$popup.delegate("#email_files_message","focusout",function(e){if(($(this).val()).length==0){$('#shareEnterText-msg').removeClass('hide');}});$popup.delegate("#email_files_to","focusout",function(e){if(($(this).val()).length==0){$('#shareEnterText-email').removeClass('hide');}});$popup.delegate("input.gbtnPrimary","click",function(e){$('#shareEnterText-email').removeClass('hide');$('#shareEnterText-msg').removeClass('hide');});$popup.delegate("input.share-mainlink, a.gbtnTertiary.copy-link","click",function(e){if($('#sharebox').hasClass('publicDisabled'))$('#sharebox').addClass('disabledAlert');});$popup.delegate(".tabs li[data-tab]","click",function(e){var adw=$(this).addClass("current").siblings().removeClass("current").end().data("tab"),$GLB_oShareBox=$('#sharebox');if($GLB_oShareBox.hasClass('publicDisabled')){if(adw=='sharebox-email'||adw=='sharebox-moreoptions')$GLB_oShareBox.addClass('disabledAlert');else if(adw=='sharebox-contacts'||adw=='sharebox-onetimedownload')$GLB_oShareBox.removeClass('disabledAlert');}var $eTabs=$popup.find(".tabs"),$eTabContent=$eTabs.children("div"),$eCurrentTab=$popup.find("#"+adw),acr=$eTabContent.filter(":visible").length===0;$eTabs.removeClass("tabs-collapsed");$GLB_oShareBox.removeClass('sharebox-moreoptions sharebox-email sharebox-onetimedownload').addClass(adw);if(!window.QC&& !Clipboard.isSupported()){$eCurrentTab.find(".copy-link").hide();}aij("#share_socialnetworks_message","#sharebox-social .share-facebook .remaining",$("#fb_share_checkbox").data("input-length"),true,function(){return $("#fb_share_checkbox").is(":checked");});aij("#share_socialnetworks_message","#sharebox-social .share-twitter .remaining",$("#tw_share_checkbox").data("input-length"),true,function(){return $("#tw_share_checkbox").is(":checked");});aij("#email_files_message","#sharebox-email .remaining",128,true);aeV(e);});$popup.delegate("#sharebox-social :checkbox","change",function(e){var $checkbox=$(this);if($checkbox.is(':checked')){$checkbox.parent().find("em.remaining").parent().show();$("#share_socialnetworks_message").change();}else{$checkbox.parent().find("em.remaining").parent().hide();}aeV(e);});$popup.delegate("#sharebox-social input:reset","click",function(e){$(this).closest("ul").find(":checkbox").each(function(){var $checkbox=$(this);$checkbox.parent().find("em.remaining").html($checkbox.data("input-length"));$checkbox.parent().find("em.remaining").parent().show();});aeV(e);});function ake(){var $textarea=$(this),GG=$textarea.val().length,acQ=$textarea.data("input-length"),adi=true;if(GG>acQ){adi=false;}else{$textarea.parent().find("em.remaining").html(acQ-GG);}return adi;};$popup.delegate("textarea.email-share-message","keydown",ake).delegate("textarea.email-share-message","keyup",ake);$popup.delegate("#sharebox-email input:reset","click",function(){var $ul=$(this).closest("ul"),$textarea=$ul.find("textarea.email-share-message");$ul.find("em.remaining").html($textarea.data("input-length"));});$popup.delegate("#sharebox-email form","submit",function(e){var atr=$popup.find("#email_files_to").val();if(atr==""){Zi(0,"You need to type at least one email address into the 'Recipients Email' field.");e.preventDefault();return false;}var aPc=true;$.each(atr.split(','),function(x,fp){if(fp!=""&&(/^.+@.+\..+$/i.test(fp.trim())==false)){Zi(0,"One or more Email Addresses in the 'Recipients Email' field are invalid.");e.preventDefault();aPc=false;}});return aPc;});function aSp(){var $textarea=$(this),GG=this.value.length,acQ=$textarea.data("input-length");$textarea.next().find("em.remaining").text(Math.max(0,acQ-GG));};$popup.delegate("#add_contacts_message","keyup keydown change",aSp);$popup.delegate("#sharebox-contacts input:reset","click",function(){var $ul=$(this).closest("ul"),$textarea=$ul.find("#add_contacts_message");$ul.find("em.remaining").html($textarea.data("input-length"));});$popup.delegate("#sharebox-contacts form","submit",function(e){var biv=$popup.find("#give_permissions_to").val();if(biv==""){Zi(0,"You must specify at least one contact.");e.preventDefault();return false;}return true;});$popup.delegate(".shareImportContacts","click",function(e){var $ul=$(".shareImportContacts ul.importOptions");$ul.empty();var count=0;for(var network in aJ){if(network=="facebook"&& !window.FB)continue;var $GLB_oImportItem=$("<li class='import"+aJ[network].title+"'>"+aJ[network].title+"</li>"),bim=oSyncTimes[network];if(bim)$GLB_oImportItem.addClass('importCompleted').append('<span>(Imported '+bdj(bim)+')</span>');$ul.append($GLB_oImportItem);count++;}$ul.height((24*count)+"px");$ul.toggleClass("show");});if(!window.FB){window.fbAsyncInit=function(){FB.init({version:FBAPIVersion.slice(0,-1),appId:FBAppId,status:true,cookie:true,oauth:true,xfbml:true});};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net.de.a2ip.ru/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));}var $contactBlockHTML=$('<div class="contactBlocks"></div>');var $contactXButton=$('<span>&#215;</span>');var $contactSocialIcon=$('<div class="autoSocialIcon"></div>');var $GLB_oPermissionHTML=$('<div class="shareContactRow"><span class="shareContactAvatar"></span><span class="shareContactName"></span><div class="currentContactPermissions"><a class="tooltip alt point-right">To add contacts from Facebook or Twitter, please log in to MediaFire.com</a><span class="canRead"><a>Can View</a></span><span class="canEdit"><a>Can Edit</a></span><span class="canManage"><a>Can Manage</a></span><span class="variedMsg"><a><b>Varies</b></a></span></div><span class="shareContactRemove">&#215;</span><div class="shareContactRemoval"><span>Remove <span class="contactRemovalName"></span>?</span><a href="#" class="confirmRemove gbtnPrimary">Remove</a><a href="#" class="cancelRemove gbtnPrimary">Cancel</a></div></div>');function bjW(bmP){var blq=$popup.find('#add-contacts-field .contactBlocks').length,kt=$popup.find('.shareContactRow[data-new-access]').length,bnh= !bmP&&atl($('#give_permissions_to').val());var GLB_bShowSave=(blq>0||kt>0||bnh);$popup.find('#sharebox-contacts').toggleClass('saveContact',GLB_bShowSave);if(GLB_bShowSave){$('div.ftContactAlert').removeClass('show');$popup.find('#sharebox-contacts').removeClass('confirmContact');}};var $GLB_oCurPermissionEntry;function blM(){$GLB_oCurPermissionEntry=null;$('#currentPermissionsMenu').removeClass('show');$popup.find('.shareContactRow.selected').removeClass('selected');};function SetAutocomplete(){var bkX=true;var beY='contact-trie'+(bkX?'-raw':'');var bfO='contact-trie'+(bkX?'':'-raw');var bhQ=bkD(beY,true);var bka=new window.tH.aBS();var aVn;var bjQ=new bjI('give_permissions_to');var bef=function(){bka.aDt({data:{method:'autocomplete',raw:bkX?'yes':'no'}},function(bli){blv(bli);if(bli&&localStorage){localStorage.removeItem(bfO);try{bgP(beY,JSON.stringify(bli));}catch(e){}}});};var blz=function(arl){try{J=JSON.parse(arl);}catch(e){}if(!J|| !J.response|| !aVn.response)return bef();if((J.response.revision!=aVn.response.revision)||(J.response.epoch!=aVn.response.epoch))return bef();blv(J);};bka.aDt({data:{method:'revision_only'}},function(aXu){if(!bhQ){bef();}else{aVn=aXu;bhb(beY,blz);}});var blv=function(Ha){var boZ=typeof DesktopWebDomObject!=='undefined';bjQ.bkI(Ha.response,oServices,boZ);var bri=',;: '.split('');bjQ.bkw(function(event,bkl,bkW,bln){var GLB_sInputVal=$('#give_permissions_to').val();if(GLB_sInputVal.length>0&&atl(GLB_sInputVal,true)){if(event.keyCode==32||event.keyCode==186||event.keyCode==188||(bln.length===0&&(event.keyCode==9||event.keyCode==13))){var GLB_sInputEmail=GLB_sInputVal.replace(/[\s,;]+$/,'');var $el=$contactBlockHTML.clone().text(GLB_sInputEmail).attr('data-contact-email',GLB_sInputEmail).attr('data-contact-new',1);$el.prepend($contactSocialIcon.clone());$el.append($contactXButton.clone());$el.insertBefore("#add-contacts-input");$(bkl).val("");bjW();}}bjW(bln.length>0);},function(bkl,bjX,bkv){var $el=$contactBlockHTML.clone().text(bkv.name).attr('data-contact-type',bkv.type).attr('data-contact-id',bkv.id);$el.prepend($contactSocialIcon.clone());$el.append($contactXButton.clone());var aMu=oServices[parseInt(bkv.type,10)];if(aMu)$el.addClass('import'+aMu);$el.insertBefore("#add-contacts-input");$(bkl).val("");bjW();var height=$('#add-contacts-field')[0].scrollHeight;$('#add-contacts-field').scrollTop(height);return false;},function(event,bkl){$("#add-contacts-field .contactBlocks:last").remove();bjW();},function(event,bkl,aUE){var bqe=0;var bqn=false;for(var i=0;i<aUE.length;i++){var bqk=aUE[i];if(i===aUE.length-1||bri.indexOf(bqk)!== -1){var PN=aUE.slice(bqe,i+1).replace(/(^\s+|[\s,;:]+$)/g,'');if(atl(PN,true)){bqe=i+1;var $el=$contactBlockHTML.clone().text(PN).attr('data-contact-email',PN).attr('data-contact-new',1);$el.prepend($contactSocialIcon.clone());$el.append($contactXButton.clone());$el.insertBefore("#add-contacts-input");bqn=true;}}}if(bqn){bjW();event.preventDefault();return false;}});$('#sharebox-contacts').removeClass('loadingContactsWrap');}};function bjO(aYj){var aMY=aYj.length;var boQ=0;$('.shareContactRow').not('.shareStatusBlock').remove();$('#sharebox-contacts').removeClass('loadingContactsWrap');if(aMY===0){$('#current-contactsWrap').addClass('noFollowers').removeClass('removeAllShow removeAllConfirm');$('#sharebox-contacts').removeClass('existingContacts');return;}else{$('#current-contactsWrap').removeClass('noFollowers removeAllConfirm').toggleClass('removeAllShow',aMY>=5);$('#sharebox-contacts').addClass('existingContacts');}var bmh=[],bmx=[],$GLB_oContactWrapper=$('#current-contacts');if(es.length+axL.length>1){for(var i=0;i<es.length;i++)bmh.push(es[i].quickkey);for(var i=0;i<axL.length;i++)bmh.push(axL[i].folderkey);}var blP=function(hN,bmr,ix){var $GLB_oEntry=$GLB_oContactWrapper.find('.shareContactRow[data-share-contact="'+hN+'"]');if($GLB_oEntry.length>0){$GLB_oEntry.attr('data-share-key',ix);if(bmr){$GLB_oEntry.addClass('variedPermission').data('share-access',0).find('.currentContactPermissions').removeClass('showCanEdit showCanRead showCanManage');}}};var i= -1;while(i<aMY){i++;if(!aYj[i])break;var hN=aYj[i].contact_key,bmj=aYj[i].resource_key,bmo=NZ(aYj[i]);if(aYj[i].contact_indirect==1){boQ++;continue;}if(bmh.length>0){var blV=bmx[hN];if(blV&&blV.length>2){blV.push({key:bmj,access:bmo});if(!blV[0]){for(var j=2;j<blV.length;j++){blV[1]+=(','+bmj);if(blV[j].access!=bmo){blV[0]=true;break;}}}continue;}else{bmx[hN]=[false,bmj,{key:bmj,access:bmo}];}}var $GLB_oEntry=$GLB_oPermissionHTML.clone();$GLB_oEntry.find('span.shareContactName').text(aYj[i].display_name);if(aYj[i].avatar&&aYj[i].avatar!==""&&aYj[i].avatar.length>8){$GLB_oEntry.find('span.shareContactAvatar').css("background-image",'url('+Encoder.XSSEncode(aYj[i].avatar)+')');var bon=new Image();bon.onerror=function(){$GLB_oEntry.find('span.shareContactAvatar')[0].style.backgroundImage='';};bon.src=Encoder.XSSEncode(aYj[i].avatar);}var aYI='user',bnS=parseInt(aYj[i].contact_type,10),boh=oServices[bnS];$GLB_oEntry.attr('data-share-access',bmo);$GLB_oEntry.attr('data-share-key',bmj);$GLB_oEntry.attr('data-share-contact',hN);if(boh)aYI=boh.toLowerCase();$GLB_oEntry.attr('data-share-type',aYI);if(aYI=='facebook'||aYI=='twitter')$GLB_oEntry.addClass('socialNetwork');var bjE='';if(NZ(aYj[i])===1)bjE+='showCanRead ';if(NZ(aYj[i])===2)bjE+='showCanEdit ';bjE=bjE?bjE:'showCanRead';$GLB_oEntry.find('.currentContactPermissions').addClass(bjE);$('#current-contacts').append($GLB_oEntry);}if(bmh.length>0){var bnr=bmh.join();for(hN in bmx){var aLV=bmx[hN];if(aLV){var bmr=aLV[0],ix=aLV[1];for(var j=0;j<bmh.length;j++){if(!ix||ix.indexOf(bmh[j])=== -1){bmr=true;break;}}blP(hN,bmr,bmr?ix:bnr);}}}$('#current-contacts').append('<div class="shareContactRow indirectContacts"><span class="indirectContactCount">'+boQ+'</span></div>');};function bld(){if(acK){bjO([]);return;}var km=es.length+axL.length;var bkS=new window.tH.aCa();if(km===1){var ix=es[0]?es[0].quickkey:axL[0].folderkey;bkS.jj({data:{resource:ix}},function(aXu){if(aXu.response.shares){bjO(aXu.response.shares);}});}else{var hX=[];for(var i=0;i<es.length;i++)hX.push(es[i].quickkey);for(var i=0;i<axL.length;i++)hX.push(axL[i].folderkey);bkS.hS(function(aXu){var biV=aXu.response,aYj=[];if(biV.shares){for(var i=0;i<biV.shares.length;i++){if(hX.indexOf(biV.shares[i].resource_key)!== -1){aYj.push(biV.shares[i]);}}}bjO(aYj);});}};function jV(jt,kQ,blE,hj,jr){var aD=false;var bkS=new window.tH.aCa();var akR=[];var hM=axL[0]||es[0];if(hM.shared){aD=true;}for(var i=0;i<es.length;i++)akR.push(es[i].quickkey);for(var i=0;i<axL.length;i++)akR.push(axL[i].folderkey);var bnQ=function(bnv){$('#sharebox-contacts').removeClass('loadingContactsWrap');Zi(0,bnv);bjW();};var blR=function(){var arl={data:{}};if(blE){var aLT=new Date();var GLB_iMonth=aLT.getMonth();var GLB_sMonth=(GLB_iMonth<10)?'0'+GLB_iMonth:''+GLB_iMonth;var GLB_iDay=aLT.getDate();var GLB_sDay=(GLB_iDay<10)?'0'+GLB_iDay:''+GLB_iDay;var GLB_sYear=''+aLT.getFullYear();arl.data.message=JSON.stringify({'template':'standard','title':'Share Notification','subtitle':blE,'date':GLB_sMonth+'-'+GLB_sDay+'-'+GLB_sYear,'attachments':[]});arl.data.broadcast_class='share';}if(aD){arl.data.contact_keys=jt;arl.data.keys=akR.join();if(hj.fb_access_token)arl.data.fb_access_token=hj.fb_access_token;if(hj.tw_oauth_token)arl.data.tw_oauth_token=hj.tw_oauth_token;if(hj.tw_oauth_token_secret)arl.data.tw_oauth_token_secret=hj.tw_oauth_token_secret;bkS.hV(arl,function(){bld();});}else{arl.data.contacts=jt;arl.data.resources=akR.join();arl.data.permissions=kQ;if(hj.fb_access_token)arl.data.fb_access_token=hj.fb_access_token;if(hj.tw_oauth_token)arl.data.tw_oauth_token=hj.tw_oauth_token;if(hj.tw_oauth_token_secret)arl.data.tw_oauth_token_secret=hj.tw_oauth_token_secret;bkS.hH(arl,{success:function(aAJ){Rn(arl);bld();},error:function(ado,aco,aiN){var ajz=JSON.parse(ado.responseText);var agU={};agU['232']=["You must verify your email address."];var aln=agU[ajz.response.error.toString()]||["An error occurred while sharing this resource."];bnQ(aln[0]);}});}};var $GLB_oModifiedPermissions=$popup.find('.shareContactRow[data-new-access]');var jo=function(iC){var $GLB_aUpdatedContact=$GLB_oModifiedPermissions.eq(iC);var kp=$GLB_aUpdatedContact.data('new-access'),hN=$GLB_aUpdatedContact.data('share-contact');var gF={data:{}};if(blE){var aLT=new Date();var GLB_iMonth=aLT.getMonth();var GLB_sMonth=(GLB_iMonth<10)?'0'+GLB_iMonth:''+GLB_iMonth;var GLB_iDay=aLT.getDate();var GLB_sDay=(GLB_iDay<10)?'0'+GLB_iDay:''+GLB_iDay;var GLB_sYear=''+aLT.getFullYear();arl.data.message=JSON.stringify({'template':'standard','title':'Share Notification','subtitle':blE,'date':GLB_sMonth+'-'+GLB_sDay+'-'+GLB_sYear,'attachments':[]});arl.data.broadcast_class='share';}var PD={success:function(arl){if($GLB_oModifiedPermissions[iC+1])jo(iC+1);else if(jt)blR();else bld();},error:function(ado,aco,aiN){var ajz=JSON.parse(ado.responseText);var agU={};agU['232']=["You must verify your email address."];var aln=agU[ajz.response.error.toString()]||["An error occurred while sharing this resource."];bnQ(aln[0]);}};if(aD){gF.data.contact_keys=hN;gF.data.keys=akR.join();if(hj.fb_access_token)gF.data.fb_access_token=hj.fb_access_token;if(hj.tw_oauth_token)gF.data.tw_oauth_token=hj.tw_oauth_token;if(hj.tw_oauth_token_secret)gF.data.tw_oauth_token_secret=hj.tw_oauth_token_secret;bkS.hV(gF,PD);}else{gF.data.contacts=hN;gF.data.resources=akR.join();gF.data.permissions=kp;if(hj.fb_access_token)gF.data.fb_access_token=hj.fb_access_token;if(hj.tw_oauth_token)gF.data.tw_oauth_token=hj.tw_oauth_token;if(hj.tw_oauth_token_secret)gF.data.tw_oauth_token_secret=hj.tw_oauth_token_secret;bkS.hH(gF,PD);}};var ln=function(){var aBR=new window.tH.aBS();var bnt=[];var iB=jr.split(',');for(var i=0;i<iB.length;i++)bnt.push({email:$.trim(iB[i])});var jU={contact_type:'user',contacts:JSON.stringify(bnt)};aBR.ZD({data:jU},{success:function(aXu){if(aXu.response&&aXu.response.contact_keys)jt=jt.length>0?jt+','+aXu.response.contact_keys:aXu.response.contact_keys;if($GLB_oModifiedPermissions.length>0)jo(0);else if(jt)blR();else bld();},error:function(ado,aco,aiN){var ajz=JSON.parse(ado.responseText);var agU={};agU['108']=["Invalid user specified. Unable to create contact."];var aln=agU[ajz.response.error.toString()]||["An error occurred while adding new contacts."];bnQ(aln[0]);}});};if(jr)ln();else if($GLB_oModifiedPermissions.length>0)jo(0);else if(jt)blR();else bld();};$popup.delegate("#add-contacts-field","click",function(e){document.getElementById('give_permissions_to').focus();});$popup.delegate('#give_permissions_to','focus click',function(e){if(!$('#sharebox-contacts').hasClass('saveContact'))$('div.ftContactAlert').addClass('show');$('#shareEnterText-contacts').addClass('hide');});$popup.delegate('#add_contacts_message','focus click',function(e){$('#shareEnterText-msgContact').addClass('hide');});$popup.delegate('#give_permissions_to','blur',function(e){$('div.ftContactAlert').removeClass('show');if(this.value===""&&$popup.find('.contactBlocks').length===0){$('#shareEnterText-contacts').removeClass('hide');}});$popup.delegate('#add_contacts_message','blur',function(e){if(this.value===""){$('#shareEnterText-msgContact').removeClass('hide');}});$popup.delegate("ul.importOptions li","click",function(e){var sNetworkLower=$(this).text().toLowerCase().split("(")[0].trim();function LoadingCallback(){};function FailCallback(error){if(typeof error!="undefined")Zi(0,"Import failed: '"+error+"'");else Zi(0,"Import failed");$("#sharebox-contacts").removeClass("importingContactsWrap importingContactsProgress");};function ErrorCallback(error){Zi(0,"Import error: '"+error+"'");$("#sharebox-contacts").removeClass("importingContactsWrap importingContactsProgress");};function SuccessCallback(count){oSyncTimes[sNetworkLower]=blZ();var hg="Successfully imported/updated "+count+" contact"+(count!=1?'s':'');Zi(0,hg);$("#sharebox-contacts").removeClass("importingContactsWrap importingContactsProgress");SetAutocomplete();};var oThisImporter=aJ[sNetworkLower];if(oThisImporter){$("#sharebox-contacts").addClass("importingContactsWrap").removeClass("importingContactsProgress");oThisImporter.BeginAuth(LoadingCallback,ErrorCallback,FailCallback,SuccessCallback);}else{Zi(0,"Cannot import from "+$(this).html()+", please choose another import method if available.");}});$popup.delegate(".shareContactRow .currentContactPermissions","click",function(e){var $GLB_oRow=$(this).parent();if($GLB_oCurPermissionEntry&&$GLB_oRow.is($GLB_oCurPermissionEntry)){blM();return;}if($GLB_oRow.hasClass('socialNetwork')&&$('#sharebox').hasClass('web-widget')){blM();return false;}$popup.find('.shareContactRow.selected').removeClass('selected');var bmi=81;$GLB_oCurPermissionEntry=$GLB_oRow;if($('#current-contacts div.shareContactRow').length>4)bmi+=bml()[0];var blO=$GLB_oCurPermissionEntry.find('.currentContactPermissions')[0].className.replace('currentContactPermissions','');$GLB_oCurPermissionEntry.addClass('selected');$('#currentPermissionsMenu').css({top:($GLB_oCurPermissionEntry.offset().top-$('#sharebox').offset().top)+35,right:bmi})[0].className='currentPermissions show '+blO;});$popup.delegate("#currentPermissionsMenu li","click",function(e){if(!$GLB_oCurPermissionEntry)return;var gA=0,blF='';if(this.className=="canRead"){gA=gA|(1<<0);blF+='showCanRead ';}if(this.className=="canEdit"){gA=gA|(1<<1);blF+='showCanEdit ';}if(this.className=="canManage"){gA=gA|(1<<2);blF+='showCanManage ';}var kv=$GLB_oCurPermissionEntry.data('share-access');if(kv!=gA)$GLB_oCurPermissionEntry.attr('data-new-access',gA);else $GLB_oCurPermissionEntry.removeAttr('data-new-access');$GLB_oCurPermissionEntry.find('.currentContactPermissions').removeClass('showCanManage showCanEdit showCanRead').addClass(blF);blM();bjW();});$popup.delegate('#addContactPermissions, .shareImportContacts, .currentContactPermissions','click',function(e){var Td=this;var TN=function(e){var Ul=(Td.className.indexOf('currentContactPermissions')=== -1||Td.id=='addContactPermissions')?Td:$('#currentPermissionsMenu')[0];if(typeof Ul==='undefined'){$(this).off('mousedown',TN);}else if(!$.contains(Ul,e.target)){blM();$('#addContactPermissions ul, .shareImportContacts ul').removeClass('show');$(this).off('mousedown',TN);}};$(document).on('mousedown',TN);});$popup.delegate("#add-contacts-field .contactBlocks span","click",function(e){$(this).parent().remove();bjW();});$popup.delegate(".shareContactSave a.gbtnTertiary","click",function(e){blM();var aD=false,gA=0,blF='';var $GLB_oPermissionDropDown=$('#addContactPermissions');if($GLB_oPermissionDropDown.hasClass('showCanRead')||aD)gA=gA|(1<<0);if(!aD&&$GLB_oPermissionDropDown.hasClass('showCanEdit'))gA=gA|(1<<1);if(!aD&&$GLB_oPermissionDropDown.hasClass('showCanManage'))gA=gA|(1<<2);var bnt=[],GLB_aEmails=[],OA=$('.shareContactRow[data-new-access]');var PL=OA.filter('[data-share-type="facebook"]').length>0,PP=OA.filter('[data-share-type="twitter"]').length>0;var bmS=$('#give_permissions_to'),GLB_sInputVal=bmS.val(),GLB_sInputEmail=GLB_sInputVal.replace(/[\s,;]+$/,'');if(GLB_sInputEmail.length>0&&atl(GLB_sInputEmail,true)){GLB_aEmails.push(GLB_sInputEmail);bmS.val("");bjW();}$GLB_aContactBlocks=$popup.find('.contactBlocks');for(var i=0;i<$GLB_aContactBlocks.length;i++){$GLB_aContactBlock=$GLB_aContactBlocks.eq(i);var aMu=oServices[$GLB_aContactBlock.data('contact-type')];if(aMu){if(!PL&&aMu=='Facebook')PL=true;if(!PP&&aMu=='Twitter')PP=true;}if($GLB_aContactBlock.data('contact-new')==1){var GLB_sContactEmail=$GLB_aContactBlock.data('contact-email');if(atl(GLB_sContactEmail,true)){GLB_aEmails.push(GLB_sContactEmail);}}else{bnt.push($GLB_aContactBlock.data('contact-id'));}}bmS.val('');var hj=[];function ON(){jV(bnt.join(),gA,$('#add_contacts_message').val(),hj,GLB_aEmails.join());$('#add_contacts_message').val('').trigger('change');$GLB_aContactBlocks.remove();$popup.find('#sharebox-contacts').removeClass('saveContact').addClass('confirmContact');$popup.find('.auto-complete').addClass('empty');};function Pw(){if(!PL){ON();return;}if(!window.FB){Zi(0,"Facebook load failed");$popup.find('#sharebox-contacts').removeClass('confirmContact').addClass('saveContact');return;}FB.getLoginStatus(function(response){if(response.status=="connected"){var aCR=FB.getAuthResponse();var aQH=aCR?aCR['accessToken']:'';hj.fb_access_token=aQH;ON();}else{FB.login(function(response){if(response.status=="connected"){FB.api(FBAPIVersion+'me/permissions',function(oResponse){var aCR=FB.getAuthResponse();var aQH=aCR?aCR['accessToken']:'';hj.fb_access_token=aQH;ON();});}else{Zi(0,"Facebook login failed");$popup.find('#sharebox-contacts').removeClass('confirmContact').addClass('saveContact');}},{scope:'xmpp_login'});}});};function RO(){if(!PP){Pw();return;}if(aL("oauth_token")!=""&&aL("oauth_token")!=""){hj.tw_oauth_token=aL("oauth_token");hj.tw_oauth_token_secret=aL("oauth_token_secret");Pw();return;}function FailCallback(error){if(typeof error!="undefined")Zi(0,"Twitter login failed: '"+error+"'");else Zi(0,"Twitter login failed");$popup.find('#sharebox-contacts').removeClass('confirmContact').addClass('saveContact');};function ErrorCallback(error){Zi(0,"Twitter login error: '"+error+"'");$popup.find('#sharebox-contacts').removeClass('confirmContact').addClass('saveContact');};function SuccessCallback(count){hj.tw_oauth_token=aL("oauth_token");hj.tw_oauth_token_secret=aL("oauth_token_secret");Pw();};aJ["twitter"].BeginAuth($.noop,ErrorCallback,FailCallback,SuccessCallback,true);};RO();$('#sharebox-contacts').addClass('loadingContactsWrap');return false;});$popup.delegate(".shareContactConfirm a","click",function(e){$popup.find('#sharebox-contacts').removeClass('confirmContact');});$popup.delegate("#removeAllFollowers a","click",function(e){var $GLB_oRemoveAction=$(this);switch($GLB_oRemoveAction.data('command')){case "prompt":$GLB_oRemoveAction.closest('#current-contactsWrap').addClass('removeAllConfirm');break;case "confirm":var bkS=new window.tH.aCa(),akR=[];for(var i=0;i<es.length;i++)akR.push(es[i].quickkey);for(var i=0;i<axL.length;i++)akR.push(axL[i].folderkey);blM();bjO([]);var arl={data:{}};arl.data.resources=akR.join();bkS.im(arl,function(){Rn(arl);});case "cancel":default:$GLB_oRemoveAction.closest('#current-contactsWrap').removeClass('removeAllConfirm');}return false;});$popup.delegate(".shareContactRemove","click",function(e){blM();if($popup.find('.inset-box.warning').children().filter(':visible').length>0)return false;var $GLB_oEntry=$(this).parent();$GLB_oEntry.addClass('selected');$GLB_oEntry.find('.contactRemovalName').text($GLB_oEntry.find('.shareContactName').text());$('#sharebox').addClass('removeContact');return false;});$popup.delegate(".shareContactRemoval a.confirmRemove","click",function(e){var bkS=new window.tH.aCa(),jz='',akR=[];for(var i=0;i<es.length;i++)akR.push(es[i].quickkey);for(var i=0;i<axL.length;i++)akR.push(axL[i].folderkey);var $GLB_oEntry=$popup.find('.shareContactRow.selected');jz=$GLB_oEntry.data('share-contact');blM();$GLB_oEntry.remove();$('#sharebox').removeClass('removeContact');var aMY=$('.shareContactRow').not('.shareStatusBlock').length;if(aMY===0){$('#current-contactsWrap').addClass('noFollowers').removeClass('removeAllShow removeAllConfirm');$('#sharebox-contacts').removeClass('existingContacts');}else{$('#current-contactsWrap').removeClass('noFollowers removeAllConfirm').toggleClass('removeAllShow',aMY>=5);$('#sharebox-contacts').addClass('existingContacts');}if(jz){var arl={data:{}};arl.data.contact=jz;arl.data.resources=akR.join();bkS.im(arl,function(){Rn(arl);});}bjW();return false;});$popup.delegate(".shareContactRemoval a.cancelRemove","click",function(e){blM();$('#sharebox').removeClass('removeContact');return false;});function eQ(url,name,popupWidth,popupHeight){var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var screenWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.documentElement.clientWidth;var screenHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.documentElement.clientHeight-22);var leftOffset=(screenX<0)?window.screen.width+screenX:screenX;var left=parseInt(leftOffset+((screenWidth-popupWidth)/2),10);var top=parseInt(screenY+((screenHeight-popupHeight)/2.5),10);var windOptions=[];windOptions.push('width='+popupWidth);windOptions.push('height='+popupHeight);windOptions.push('left='+left);windOptions.push('top='+top);windOptions.push('scrollbars=1');windOptions.push('location=1');windOptions.push('toolbar=0');windOptions=windOptions.join(',');return window.open(url,name,windOptions);};var fE={"blogger":{"url":"http://www.blogger.com.de.a2ip.ru/blog_this.pyra?t&u=[url]&n=[text]","width":734,"height":661},"facebook":{"url":"https://www.facebook.com.de.a2ip.ru/sharer/sharer.php?u=[url]","width":626,"height":344},"pinterest":{"url":"http://pinterest.com.de.a2ip.ru/pin/create/button/?url=[url]&media=[media]","width":800,"height":350},"plus":{"url":"https://plus.google.com.de.a2ip.ru/share?url=[url]","width":480,"height":500},"tumblr":{"url":"http://www.tumblr.com.de.a2ip.ru/share/link?url=[url]&description=[text]","width":450,"height":480},"twitter":{"url":"https://twitter.com.de.a2ip.ru/intent/tweet?url=[url]&text=[text]&related=mediafire","width":626,"height":257}};$popup.delegate(".socialLinks a","click",function(e){var OS=aBO()?'dev.mediafire.com.de.a2ip.ru':'www.mediafire.com.de.a2ip.ru';var OZ=$(".share-mainlink",$popup).val().split('/');OZ.splice(0,3);var avc=encodeURIComponent(location.protocol+'//'+OS+'/'+OZ.join('/'));var aUE=encodeURIComponent($("#add_contacts_message",$popup).val());var ew=location.protocol+'//'+OS+"/images/filetype/download/folder.jpg";var gc=false;var eW=$(this).attr("class").toLowerCase().replace("share","");var fh=fE[eW];if(!fh)return false;var aAllowedFiletypes=["app","css","doc","music","pdf","php","ppt","video","web","xls","zip"];if(es.length==1&&axL.length==0){var aZL=es[0];if(aZL.filetype=="image"){ew=aZL.imageUrl;gc=true;}else{ew=location.protocol+'//'+location.host+"/images/filetype/download/";var gB=aZL.filename.split(".");var hw=gB[gB.length-1];if($.inArray(hw,aAllowedFiletypes)!= -1){ew+=hw;}else if($.inArray(aZL.filetype,aAllowedFiletypes)!= -1){ew+=aZL.filetype;}else if(aZL.filetype=="audio"){ew+="music";}else{ew+="default";}ew+=".jpg";}}var eZ=$(".popup-title",$popup).text().replace("Share: ","").trim();if(aUE==""){aUE=eZ;}var eJ=fh["url"];eJ=eJ.replace("[url]",avc);eJ=eJ.replace("[text]",aUE);eJ=eJ.replace("[media]",ew);eQ(eJ,"MF"+eW,fh["width"],fh["height"]);return false;});$popup.keydown(function(e){e=e||window.event;if(e.keyCode==27){$popup.find("input").blur();$('a.popup-close:visible').focus();$('a.popup-close:visible').trigger('click');aeV(e);return false;}return true;});return{popup:popup,ali:ali,Show:DelayedShow,ShowBasic:Show,ShowTab:ShowTab,Hide:Hide,Clear:Clear,akb:akb,ald:ald};})();};function ajj(){var $popup=$("#create_new_account_popup").popup(),popup=$popup.data("popup");$popup.html(templates.create_account());function open(){$('div[id^="MediaFireUploaderSWFDiv"]').hide();$popup.find(':input[name=reg_passUL]').val("").end().find(':input[name=reg_passUL2]').val("").end();popup.open();$popup.find(":input[name=reg_emailUL]").focus();};$popup.delegate('#create_new_account_form','submit keyup focus blur',function(e){var WK=0;switch(e.type){case "submit":WK= -1;break;default:WK=0;break;}akc=true;if(($('#create_new_account_form :input:eq(0)').val().length>WK)&&($('#create_new_account_form :input:eq(0)').val().length<=3|| !aoF($('#create_new_account_form :input:eq(0)').val()))){$('.anon-form-section:eq(0) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(0) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}else if($('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(0) div.Form-inputStatusIcon').removeClass('is-notValid');$('.anon-form-section:eq(0) div.Form-inputStatusIcon').addClass('is-valid');}else{$('.anon-form-section:eq(0) div.Form-inputStatusIcon').removeClass('is-valid').removeClass('is-notValid');}$();if(($('#create_new_account_form :input:eq(0)').val().length>WK)&&($('#create_new_account_form :input:eq(1)').val().length<=3|| !aoF($('#create_new_account_form :input:eq(1)').val()))){$('.anon-form-section:eq(1) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(1) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}else if($('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(1) div.Form-inputStatusIcon').removeClass('is-notValid');$('.anon-form-section:eq(1) div.Form-inputStatusIcon').addClass('is-valid');}else{$('.anon-form-section:eq(1) div.Form-inputStatusIcon').removeClass('is-notValid').removeClass('is-valid');}if((($('#create_new_account_form :input:eq(2)').val().length<6)||($('#create_new_account_form :input:eq(2)').val().length>15))&&$('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(2) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(2) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}else if($('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(2) div.Form-inputStatusIcon').removeClass('is-notValid');$('.anon-form-section:eq(2) div.Form-inputStatusIcon').addClass('is-valid');}else{$('.anon-form-section:eq(2) div.Form-inputStatusIcon').removeClass('is-notValid').removeClass('is-valid');}if((($('#create_new_account_form :input:eq(3)').val().length<6)||($('#create_new_account_form :input:eq(3)').val().length>15))&&$('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(3) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(3) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}else if($('#create_new_account_form :input:eq(0)').val().length>WK){$('.anon-form-section:eq(3) div.Form-inputStatusIcon').removeClass('is-notValid');$('.anon-form-section:eq(3) div.Form-inputStatusIcon').addClass('is-valid');}if($('#create_new_account_form :input:eq(0)').val()!=($('#create_new_account_form :input:eq(1)').val())){$('.anon-form-section:eq(1) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(1) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}if($('#create_new_account_form :input:eq(2)').val()!=($('#create_new_account_form :input:eq(3)').val())){$('.anon-form-section:eq(3) div.Form-inputStatusIcon').removeClass('is-valid');$('.anon-form-section:eq(3) div.Form-inputStatusIcon').addClass('is-notValid');akc=false;}return akc;});$popup.delegate(".close","click",function(e){$('div[id^="MediaFireUploaderSWFDiv"]').show();popup.close();aeV(e);});$popup.delegate(".login_link","click",function(e){blX("Login");popup.close();aeV(e);});$popup.find(":input[name=reg_emailUL]").bind("keyup",function(){$('.anon-signup-confirm:eq(0)').show(500);});$popup.find(":input[name=reg_passUL]").bind("keyup",function(){$('.anon-signup-confirm:eq(1)').show(500);});$popup.keydown(function(e){e=e||window.event;if(e.keyCode==13){$popup.find('.confirm').trigger('click');return false;}if(e.keyCode==27){$popup.find("input").blur();$('a.popup-close:visible').trigger('click');aeV(e);return false;}return true;});return{open:open,popup:popup,close:popup.close};};function awJ($popup,awf,avP){$popup.keydown(function(e){e=e||window.event;if(e.keyCode==13&&awf){$popup.find('.confirm').trigger('click');return false;}if(e.keyCode==27&&avP){$popup.find("input").blur();$('a.popup-close:visible').trigger('click');aeV(e);return false;}return true;});};function asx(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup"),aPopupClipboards=[];function open(asg){$popup.html(asu.folder_share_rss(apO(asg)));popup.open();if(Clipboard.isSupported()){aPopupClipboards.forEach(function(e){e&&e.destroy();});aPopupClipboards=[];$popup.find(".copy-link").each(function(i,eCopyLink){var oClipboard=new Clipboard(eCopyLink,{text:function(trigger){return $(trigger).prev().val();}});oClipboard.on('success',function(e){Zi(0,"Copied to Clipboard");});aPopupClipboards.push(oClipboard);});$popup.find("input").focus();}else{$popup.find(".copy-link").hide();}};awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function aVH(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");$($popup[0].parentNode.parentNode).find('a.popup-close').remove();var aUU=undefined,aUZ='keep';function open(aVu,aUH,aWy,aWt,aVN){aUU=aVN;aUZ=aWy;var aVs=new window.tH.Cp(aUH);aVs.Yw(function(aUL){aVu=$.extend({},aUL.response.file_info,aVu);aVu.size=formatBytes(aVu.size);aVu.created=bdj(aVu.created,true);$popup.html(asu.pop_upload_conflict(aVu));popup.open();$popup.find('#applyAll').parent().toggle(aWt);$popup.find('#confirm-'+aUZ).removeClass("secondary").addClass("primary").focus();});};$popup.delegate("button","click",function(e){var aUn=this.id.substr(8)||aUZ;aVP=document.getElementById('applyAll').checked;if(aUU){aUU(aUn,aVP);aUU=undefined;}popup.close();aeV(e);$(document).focus();});$popup.keydown(function(e){e=e||window.event;if(e.keyCode==13||e.keyCode==27){$popup.find('.primary').trigger('click');return false;}return true;});return{open:open,popup:popup,close:popup.close};})();};function ri(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");function open(folderkey,aCe){$popup.html(asu.pop_subfolder());$popup.find("input.folder").val(folderkey);if(aCe===true)$popup.find("li.enableFileDrop").hide();popup.open();$popup.find("#create-folder-name").val("").focus();};$popup.delegate(".confirm","click",function(e){var $sName=$.trim($popup.find("#create-folder-name").val());if($sName.length>0){LF.Wt($popup.find("input.folder").val(),$sName,{filedrop:$('#folder-filedrop-checkbox').is(':checked')});$popup.find("#create-folder-name").val("").blur();popup.close();aeV(e);$(document).focus();}else{Zi(0,"Folder name cannot be left blank.");$popup.find("#create-folder-name").val($sName).focus();}});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function avA(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup"),quickkeys,Bz,Xm;function open(quickkeys,Bz,prompt){if(!$.isArray(quickkeys))quickkeys=(quickkeys)?quickkeys.split(','):new Array();if(!$.isArray(Bz))Bz=(Bz)?Bz.split(','):new Array();$popup.html(asu.pop_delete());var Hj=$('<div>Are you sure you want to move '+fWrap(adA(quickkeys,Bz))+' to Trash?</div>').html();$popup.find("#delete-message").html(Hj);Xm=this;Xm.Bz=Bz;Xm.quickkeys=quickkeys;if(prompt===undefined){prompt=true;}if(prompt){popup.open();$popup.find('.confirm').focus();}else{$popup.find('.confirm').click();}};$popup.delegate(".confirm","click",function(e){try{window.akF(Xm.quickkeys);}catch(e){}LF.Zs(Xm.quickkeys.join(","),Xm.Bz.join(","));popup.close();aeV(e);});function fWrap(sOrig){uu=sOrig.split(" ");var rO=uu[0];uu.shift();var qv=uu.join(" ");yg=rO+' <span class="shortenFileName" style="font-weight: 600; color: #000">'+htmlspecialchars(qv)+'</span>';return yg;};awJ($popup,true,false);return{open:open,popup:popup,close:popup.close};})();};function azS(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup"),TF;function open(azl,aUU){if(typeof aUU!=="undefined"){TF=aUU;}$popup.html(asu.pop_confirm());var aAi='<div>'+azl+'</div>';$popup.find("#confirm-message").html(aAi);popup.open();$popup.find('.confirm').focus();};$popup.delegate(".confirm","click",function(e){if(typeof TF!=="undefined"){TF(true);}popup.close();aeV(e);});$popup.delegate(".close","click",function(e){if(typeof TF!=="undefined"){TF(false);}popup.close();aeV(e);});awJ($popup,true,false);return{open:open,popup:popup,close:popup.close};})();};function bdt(arC,avy,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup"),aUW='';function open(aPb){aUW='Untitled.'+aPb;var file={filename:aUW};$popup.html(asu.pop_create_file(file));popup.open();$(".show_dropdown").removeClass("show_dropdown");$popup.find("input").focus();var aVe=aUW.split('.')[0].length,aVc=document.getElementById("create-file-name");if(aVc.setSelectionRange){aVc.setSelectionRange(0,aVe);aVc.focus();}};$popup.delegate(".confirm","click",function(e){var aOC=$popup.find("#create-file-name").val(),aPA=Encoder.XSSEncode(aOC,true),aFR=aPA.split("."),aUl=aFR[aFR.length-1];if(aFR.length>1&&aFR[0].length>0&&aUl){LF.SubFile(tH.currentFolder.folderkey,aOC,null,{onSuccess:function(file){$.publish("file/create",[file,tH.currentFolder]);},onError:function(){popup.close();}});popup.close();aeV(e);}else{Zi(0,"Please enter a valid filename.");$popup.find("#create-file-name").val(aPA).focus();}});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function awZ(arC,avy,asu){return(function(){var awz=(avy!='folder')?'file':'folder',$popup=$(arC).popup(),popup=$popup.data("popup"),abe={filename:"filename",description:"description"};function open(key,focus){var item;if(awz=='file'){item=window.tH.files.yx(key);item.filename=Encoder.XSSEncode(item.filename,true);$popup.html(asu.pop_file_details(item));}else{item=window.tH.folders.yx(key);item.name=Encoder.XSSEncode(item.name,true);$popup.html(asu.pop_folder_details(item));}if($('body').hasClass('myfiles')&&focus!="name")$popup.find('.details-row-name').hide();if($('body').hasClass("myfiles")&&focus=="name"){$popup.find('.details-row-desc').hide();$popup.find('.Popup-characterCounter').hide();$popup.find('legend span').html("Name");}popup.open();if(focus){$popup.find(":input[name="+focus+"]").focus();}};$popup.delegate(".confirm","click",function(e){var key=$popup.find("input."+awz).val(),info={};var name=$popup.find("#details-"+awz+"-name").val();var desc=$popup.find("#details-"+awz+"-description").val();if(name.split(".")[0].length>0){info.description=desc;if(awz=='file'){info.filename=name;LF.aal(info,key);}else{info.foldername=name;LF.aal(info,'',key);}popup.close();aeV(e);}else{Zi(0,"Name cannot be left blank.");$popup.find("#details-"+awz+"-name").val(name).focus();}});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function avk(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");function open(quickkey,bcx){$popup.html(asu.pop_password_protect());$popup.find("input.file").val(quickkey).end().find(':input[name=password]').val("").end();if(bcx){$popup.find('.popup-content').empty();$popup.find('button.confirm').hide();$popup.find('a[name="remove_password"]').removeClass('gbtnPrimary').addClass('gbtnTertiary');}popup.open();$popup.find(":input[name=password]").focus();};$popup.delegate("button","click",function(e){var quickkey=$popup.find("input.file").val(),password=$popup.find(':input[name=password]').val();if(password.length>15){window.Zi(0,"Password cannot be longer than 15 characters.");return;}LF.agD(quickkey,password);popup.close();aeV(e);});$popup.delegate("a[name=remove_password]","click",function(e){var quickkey=$popup.find("input.file").val(),password="";LF.agD(quickkey,password);popup.close();});$popup.delegate(":input[name=password]","keypress",function(e){if(e.keyCode==8){return true;}if($(this).val().length>=15)window.Zi(0,"Password cannot be longer than 15 characters.");});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function aOx(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");function open(quickkey){$popup.html(asu.pop_collaborate_file());$popup.find("input.file").val(quickkey).end();popup.open();$popup.find(":input[name=password]").focus();if(!Clipboard.isSupported()){$popup.find(".copy-link").hide();}};function aOk(type,privacy,notify,emails,message){function aMZ(){$('input#multiple-privacy').attr('checked',false);$('input#multiple-notify').attr('checked',false);$('input#multiple-emails').val('');$('textarea#multiple-message').val('');};var aAZ=new window.tH.Cp($popup.find("input.file").val()),aMX={data:{public:privacy,email_notification:notify}};if(type=='multiple'){aMX.data.emails=emails;aMX.data.message=message;}};function aMB(e){if(e.is(':checked')){return 'yes';}else{return 'no';}};$popup.delegate('#single-generate','click',function(e){var aNu=aMB($('input#single-privacy')),aMA=aMB($('input#single-notify'));aOk('single',aNu,aMA);return false;});$popup.delegate('#multiple-submit','click',function(e){var aNu=aMB($('input#multiple-privacy')),aMA=aMB($('input#multiple-notify')),aNI=$('input#multiple-emails').val().replace(/\s/g,''),aOX=$('textarea#multiple-message').val();if(aNI===''){Zi(0,"You need to type at least one email address into the 'Recipients Email' field.");}else{aOk('multiple',aNu,aMA,aNI,aOX);}return false;});$popup.delegate("#collaborate-file .tabs li[data-tab]","click",function(e){var aOU=$(this).addClass("current").siblings().removeClass("current").end().data("tab"),aOh=$('#'+aOU);if(!aOh.hasClass('tab-expanded')){$('#collaborate-file .tabs > div').hide().removeClass('tab-expanded');aOh.slideDown("fast",function(){aOh.addClass('tab-expanded');});}});return{open:open,popup:popup,close:popup.close};})();};function avx(arC,avy,asu){return(function(){var awz=(avy!='file')?'folder':'file',$popup=($("#privacy-"+awz).length>0)?$("#privacy-"+awz).popup():$(arC).popup(),popup=$popup.data("popup");function open(status,key){var item;if(awz=='file'){item=window.tH.files.yx(key);$popup.html(asu.pop_file_privacy());}else{item=window.tH.folders.yx(key);$popup.html(asu.pop_folder_privacy());}$popup.find("input."+awz).val(key).end().find("input.status").val(status).end().find(".name").text(item.avz()).end().find("b.status").html(status);popup.open();$popup.find('.confirm').focus();};if(awz=='file'){$popup.delegate(".confirm","click",function(e){var status=$popup.find("input.status").val(),quickkey=$popup.find("input.file").val();LF.aah(status,quickkey);popup.close();aeV(e);});}else{$popup.delegate("#privacy-folder-single","click",function(e){var status=$popup.find("input.status").val(),folderkey=$popup.find("input.folder").val();LF.aah(status,null,folderkey,false);popup.close();aeV(e);}).delegate("#privacy-folder-batch","click",function(e){var status=$popup.find("input.status").val(),folderkey=$popup.find("input.folder").val();LF.aah(status,null,folderkey,true);popup.close();aeV(e);});}awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function aRC(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup"),item=null,iPermissions=0;function open(key){item=window.tH.files.yx(key);$popup.html(asu.pop_file_choices());$popup.find("input.quickkey").val(key).end();if(item&&(!avH(item.flag,"1")|| !avH(item.parent.flag,"1"))){if((item.privacy&&item.privacy!="public")||(item.share_link_enabled&&item.share_link_enabled!='yes'))$popup.find("div.popup-btns button.gbtnPrimary.share").hide();}switch(item.filetype){case "video":case "audio":$popup.find("div.popup-btns button.gbtnTertiary").hide();break;default:$popup.find("div.popup-btns button.gbtnTertiary:not(.view,.edit)").hide();if(!aCf(item)){$popup.find("div.popup-btns button.gbtnTertiary.view").hide();}if(!aGe(item)||SHARED==1){var iPermissions=NZ(item);if(iPermissions!="2"&&iPermissions!="3"){$popup.find("div.popup-btns button.gbtnTertiary.edit").hide();}}}popup.open();$popup.find('.confirm').focus();};$popup.delegate(".download","click",function(e){var quickkey=$popup.find("input.quickkey").val();MYF_DirectDownload({files:[quickkey]});popup.close();aeV(e);}).delegate(".share","click",function(e){var quickkey=$popup.find("input.quickkey").val();popup.close();R({files:[quickkey]});aeV(e);}).delegate(".edit","click",function(e){if(item.edit&&parseInt(item.edit)===3){window.open(agW(item,'edit'));}else{if(item.size>10485760)Zi(0,"Only files smaller than 10 MB can be edited. This file is too large.");else window.open(agW(item,'edit'));}popup.close();aeV(e);}).delegate(".view, .watch, .listen","click",function(e){window.open(agW(item));popup.close();aeV(e);});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function awo(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");function open(files){files=files.split(",");var file1=tH.files.yx(files[0]);var file2=tH.files.yx(files[1]);var acp=file1.created.split(' '),aTT=acp[0],aQb=acp[1],abu=aTT.split('-'),Fq=aQb.split(':');var adE=file2.created.split(' '),aSw=adE[0],aqn=adE[1],Fm=aSw.split('-'),aaY=aqn.split(':');var anB=new Date(abu[0],abu[1],abu[2],Fq[0],Fq[1],Fq[2],0).valueOf();var aqP=new Date(Fm[0],Fm[1],Fm[2],aaY[0],aaY[1],aaY[2],0).valueOf();if(anB>aqP){var aOu=file1,aQe=file2;file1=aQe;file2=aOu;}var data={file1:file1,file2:file2,Xh:10};$popup.html(asu.update_file(data));$popup.find("#update-url").html(acz()+"/?"+data.file1.quickkey);popup.open();};$popup.delegate("#update-swap","click",function(e){var $files=$popup.find(".updatefile_file"),$file1=$files.eq(0),$file2=$files.eq(1);$file1.insertBefore("#update-availableat");$file2.insertBefore("#update-swap");$popup.find("#update-url").html(acz()+"/?"+$file2.data("quickkey"));aeV(e);}).delegate("#update-confirm","click",function(e){var $files=$popup.find(".updatefile_file"),$file1=$files.eq(0),$file2=$files.eq(1);var afV=$file2.attr('data-quickkey');var afR=$file1.attr('data-quickkey');LF.agk(afV,afR);popup.close();aeV(e);}).delegate("#update-cancel","click",function(e){popup.close();aeV(e);});awJ($popup,false,true);return{open:open,popup:popup,close:popup.close};})();};function awP(arC,asu,awz){return(function(){var $form=$(arC).popup(),popup=$form.data("popup");$form.html(asu.pop_move());var acE=new auj({container_selector:"#move-dialog-folderlist",current_folder_class:"current_folder_location",display_linked_folders:false,onFolderClick:function(e,aZG){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,aZG);}}),beX=false;function open(quickkeys,Bz){acE.bfx(tH.adq());if(!beX){var vC=document.getElementById('container').className.indexOf('collabmode')!== -1;if(tH.currentFolder&&tH.currentFolder.folderkey!="myfiles"&& !vC)acE.acI('myfiles',tH.currentFolder.folderkey,function(){beX=true;});else acE.acI('myfiles',null,function(){beX=true;});}$form.find("input.files").val(quickkeys).end().find("input.folders").val(Bz).end();$("#move-create").show();$("#move-create-subfolder-content").hide();$("#move-create-subfolder-name").val("");popup.open();$form.bind('click',function(e){aeV(e);});};$form.delegate(".close","click",function(e){popup.close();aeV(e);}).delegate("#move-confirm","click",function(e){var files=$form.find("input.files").val(),folders=$form.find("input.folders").val(),current=$form.find(".current_folder_location").closest("li"),dest=current.length>0?current.data("info").folderkey:'myfiles';LF.YO(files,folders,dest);popup.close();$("#folderlist_content").css('overflow-y','');aeV(e);}).delegate("#move-create","click",function(e){$("#move-create").hide();$("#move-create-subfolder-content").show();$("#move-create-subfolder-name").focus();$("#move-create-subfolder-confirm").click(function(){var folderkey=$form.find(".current_folder_location").data("folderkey");$("#move-create-subfolder-content").hide();$("#move-create").show();if($("#move-create-subfolder-name").val()){LF.Wt(folderkey,$("#move-create-subfolder-name").val());}$("#move-create-subfolder-name").val("");});$("#folderlist_content").css('overflow-y','');aeV(e);});awJ($form,false,true);return{open:open,popup:popup,close:popup.close};})();};function alT(arC,asu,awz){return(function(){var $form=$(arC).popup(),popup=$form.data("popup");$form.html(asu.pop_save());var bfs=new auj({container_selector:"#save-dialog-folderlist",current_folder_class:"current_folder_location",display_linked_folders:false,onFolderClick:function(e,aZG){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,aZG);}}),beS=false;function open(keys,bjs){if(bjs)$form.find("input.folders").val(keys).end();else $form.find("input.files").val(keys).end();$("#save-create").show();$("#save-create-subfolder-content").hide();$("#save-create-subfolder-name").val("");bfs.bfx(tH.adq());if(!beS){var vC=document.getElementById('container').className.indexOf('collabmode')!== -1;if(tH.currentFolder&&tH.currentFolder.folderkey!="myfiles"&& !vC)bfs.acI('myfiles',tH.currentFolder.folderkey,function(){beS=true;});else bfs.acI('myfiles',null,function(){beS=true;});}popup.open();$form.bind('click',function(e){aeV(e);});};$form.delegate(".close","click",function(e){popup.close();aeV(e);}).delegate("#save-confirm","click",function(e){var files=$form.find("input.files").val(),folders=$form.find("input.folders").val(),dest=$form.find(".current_folder_location").closest("li").data("info").folderkey,foldername=$form.find(".current_folder_location").closest("li").data("info").name||"";if(dest=='myaccount'){dest='myfiles';foldername='My Files';}if(foldername){foldername="'"+foldername+"'";}if(files){window.tH.Cp.auY(files,dest,{success:function(Ha){var auJ=files.split(',');var aun=(auJ.length>1)?" files have":" file has";if(Ha.response.result=="Success"){Zi(0,auJ.length+aun+" been saved to your "+foldername+" folder successfully.");if(typeof aHa!="undefined"&&aHa)aHa.aIX(dest);}},error:function(Ha){var ajz=JSON.parse(Ha.responseText),MYF_sErrCode=ajz.response.error.toString();if(MYF_sErrCode=='162')aWg(false,false,true);else Zi(0,"There was an error trying to save to your account. Please try again later.");}});}popup.close();aeV(e);});awJ($form,false,true);return{open:open,popup:popup,close:popup.close};})();};function aIt(arC,asu){return(function(){var $form=$(arC).popup(),popup=$form.data("popup"),aUU;$form.html(asu.pop_save_to_folder());var aXN=new auj({container_selector:"#destination-dialog-folderlist",current_folder_class:"current_folder_location",display_linked_folders:false,onFolderClick:function(e,aZG){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,aZG);}}),beG=false;function open(beh,beM){if(beh)acb=beh;aXN.bfx(tH.adq());if(!beG){aXN.acI('myfiles',beM||'myfiles',function(){beG=true;});}popup.open();$form.bind('click',function(e){aeV(e);});};$form.delegate(".gbtnPrimary","click",function(e){popup.close();if(acb&&acb.cancel)acb.cancel();aeV(e);}).delegate("#destination-confirm","click",function(e){popup.close();var beU=$form.find('.current_folder_location').data('info').folderkey;if(acb&&acb.success)acb.success(beU);aeV(e);});awJ($form,false,true);return{open:open,popup:popup,close:popup.close,Xb:aXN};})();};function aFj(arC,asu,awz){return(function(){var $form=$(arC).popup(),popup=$form.data("popup");$form.html(asu.pop_copy());var aLj=new auj({container_selector:"#copy-dialog-folderlist",current_folder_class:"current_folder_location",display_linked_folders:false,onFolderClick:function(e,aZG){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,aZG);},onFolderBrowserLoad:function(){var bog=aLj.bbU;if(bog&& !tH.folders.yx(bog.folderkey))tH.folders.Yx(bog.folderkey,bog);}}),aNV=false;function open(POP_oKeys){aLj.bfx(tH.adq());if(!aNV){var vC=document.getElementById('container').className.indexOf('collabmode')!== -1;if(tH.currentFolder&&tH.currentFolder.folderkey!="myfiles"&& !vC)aLj.acI('myfiles',tH.currentFolder.folderkey,function(){aNV=true;});else aLj.acI('myfiles',null,function(){aNV=true;});}$form.find("input.files").val(POP_oKeys.files?POP_oKeys.files.join():"").end().find("input.folders").val(POP_oKeys.folders?POP_oKeys.folders.join():"").end();$("#copy-create").show();$("#copy-create-subfolder-content").hide();$("#copy-create-subfolder-name").val("");popup.open();$form.bind('click',function(e){aeV(e);});};$form.delegate(".close","click",function(e){popup.close();aeV(e);}).delegate("#copy-confirm","click",function(e){var files=$form.find("input.files").val(),folders=$form.find("input.folders").val(),current=$form.find(".current_folder_location").closest("li"),dest=current.length>0?current.data("info").folderkey:'myfiles';LF.aFI(files,folders,dest);popup.close();$("#folderlist_content").css('overflow-y','');aeV(e);}).delegate("#copy-create","click",function(e){$("#copy-create").hide();$("#copy-create-subfolder-content").show();$("#copy-create-subfolder-name").focus();$("#copy-create-subfolder-confirm").click(function(){var folderkey=$form.find(".current_folder_location").data("folderkey");$("#copy-create-subfolder-content").hide();$("#copy-create").show();if($("#copy-create-subfolder-name").val()){LF.Wt(folderkey,$("#copy-create-subfolder-name").val());}$("#copy-create-subfolder-name").val("");});$("#folderlist_content").css('overflow-y','');aeV(e);});awJ($form,false,true);return{open:open,popup:popup,close:popup.close,Xb:aLj};})();};function ayB(arC,asu){return(function(){var $popup=$(arC).popup(),popup=$popup.data("popup");$popup.html(asu.create_account());var inputs=[],confirms=[];function open(){$('div[id^="MediaFireUploaderSWFDiv"]').hide();$popup.find(':input[name=reg_passUL]').val("").end().find(':input[name=reg_passUL2]').val("").end();popup.open();for(var i=0;i<4;i++){inputs.push($popup.find(':input:eq('+i+')'));confirms.push('.anon-form-section:eq('+i+') div.Form-inputStatusIcon');}$popup.find(":input[name=reg_emailUL]").focus();};function adJ(WV){return((WV)?'valid':'invalid');};function WO(WN,WV){$(WN).removeClass(adJ(!WV));$(WN).addClass(adJ(WV));};function ayE(WN){$(WN).removeClass(adJ(false));$(WN).removeClass(adJ(true));};$popup.delegate('form','submit keyup focus blur',function(e){if(!inputs|| !inputs.length){return;}var WK=0;switch(e.type){case "submit":WK= -1;break;default:WK=0;break;}akc=true;if((inputs[0].val().length>WK)&&(inputs[0].val().length<=3|| !aoF(inputs[0].val()))){WO(confirms[0],false);akc=false;}else if(inputs[0].val().length>WK){WO(confirms[0],true);}else{ayE(confirms[0]);}if((inputs[0].val().length>WK)&&(inputs[1].val().length<=3|| !aoF(inputs[1].val()))){WO(confirms[1],false);akc=false;}else if(inputs[0].val().length>WK){WO(confirms[1],true);}else{ayE(confirms[1]);}if(((inputs[2].val().length<6)||(inputs[2].val().length>15))&&inputs[0].val().length>WK){WO(confirms[2],false);akc=false;}else if(inputs[0].val().length>WK){WO(confirms[2],true);}else{ayE(confirms[2]);}if(((inputs[3].val().length<6)||(inputs[3].val().length>15))&&inputs[0].val().length>WK){WO(confirms[3],false);akc=false;}else if(inputs[0].val().length>WK){WO(confirms[3],true);}if(inputs[0].val()!=(inputs[1].val())){WO(confirms[1],false);akc=false;}if(inputs[2].val()!=(inputs[3].val())){WO(confirms[3],false);akc=false;}return akc;});$popup.delegate(".close","click",function(e){$('div[id^="MediaFireUploaderSWFDiv"]').show();popup.close();aeV(e);});$popup.delegate(".login_link","click",function(e){blX("Login");popup.close();aeV(e);});$popup.find(":input[name=reg_emailUL]").bind("keyup",function(){$('.anon-signup-confirm:eq(0)').show(500);});$popup.find(":input[name=reg_passUL]").bind("keyup",function(){$('.anon-signup-confirm:eq(1)').show(500);});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();};function axQ(key){return function date_sorter(a,b){var aqp=a[key].split(' ');var are=aqp[0];var arf=aqp[1];var pL=are.split('-');var TL=arf.split(':');var aqO=b[key].split(' ');var apQ=aqO[0];var apP=aqO[1];var pB=apQ.split('-');var TI=apP.split(':');var ari=new Date(pL[0],pL[1],pL[2],TL[0],TL[1],TL[2],0).valueOf();var apV=new Date(pB[0],pB[1],pB[2],TI[0],TI[1],TI[2],0).valueOf();return(ari-apV);};};function axw(fO){return function string_sorter(a,b){try{if(a[fO].toLowerCase().replace(/[^a-zA-Z 0-9]+/g,'')<b[fO].toLowerCase().replace(/[^a-zA-Z 0-9]+/g,'')){return-1;}else{return+1}}catch(e){if(a===undefined&&b===undefined)return 0;if(a===undefined)return-1;if(b===undefined)return 1;if(a[fO]===undefined&&b[fO]===undefined)return 0;if(a[fO]===undefined)return-1;if(b[fO]===undefined)return 1;return 0;}};};$.values=function(o){var a=[];$.each(o,function(key,value){a.push(value);});return a;};$.fn.reverse=[].reverse;function adA(quickkeys,Bz){var Dx=0;if(quickkeys.length&&Bz.length){Dx=quickkeys.length+Bz.length;return Dx+' items';}else if(quickkeys.length){Dx=quickkeys.length;if(Dx>1){return Dx+' files';}else{var dn=window.tH.files.yx(quickkeys);if(dn&&dn.filename){return 'file '+dn.filename;}else{return 'file';}}}else{Dx=Bz.length;if(Dx>1){return Dx+' folders';}else{var acS=window.tH.folders.yx(Bz);if(acS&&acS.name){return 'folder '+acS.name;}else{return 'folder';}}}};function htmlspecialchars(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');};function bbx(GLB_sDLKey){if(!GLB_sDLKey){var Uj=lc();if(Uj=='Windows')GLB_sDLKey='win-detected';else if(Uj=='Mac')GLB_sDLKey='mac-detected';else GLB_sDLKey='linux-detected';}switch(GLB_sDLKey){case 'win-detected':case 'mac-detected':window.location='/software/desktop/?agree=yes';break;case 'linux-detected':window.location='/software/';break;default:window.location='/software/desktop/?agree=yes&key='+GLB_sDLKey;}return false;};function aDk(aEc){if(!aEc)aEc=10000;try{document.body.addEventListener("mousemove",function(e){if(GLB_bMouseMoved==false){GLB_bMouseMoved=true;}clearTimeout(aEi);aEi=setTimeout(function(){GLB_bMouseMoved=false;},aEc);},false);}catch(e){}};function avh(){QU();};function aDQ(){QU();blX("Login");};function bqE(){var aLT=new Date();var brb=new Date(aLT.getFullYear(),0,1);var brf=new Date(aLT.getFullYear(),6,1);var bpD=Math.max(brf.getTimezoneOffset(),brb.getTimezoneOffset());return aLT.getTimezoneOffset()<bpD;};function aOr(){var aLT=new Date();var aKX= -aLT.getTimezoneOffset()/60;if(bqE()){aKX--;}return aKX;};function bhT(){var aKX=aOr(),bji=Math.floor(Math.abs(aKX)),bin=(aKX%1)*60,bjD=(bji<10)?("0"+bji):bji,bkN=(bin<10)?("0"+bin):bin,bjr=aKX>0?'+':'-';return "GMT"+bjr+bjD+":"+bkN;};function aNk(){var aLT=new Date();var aOq=new Date(aLT.getFullYear(),0,1);var aNf=new Date(aLT.getFullYear(),6,1);return aOq.getTimezoneOffset()!=aNf.getTimezoneOffset();};function aNb(){var aLT=new Date();var aOq=new Date(aLT.getFullYear(),0,1);var aNf=new Date(aLT.getFullYear(),6,1);var aMV=Math.max(aOq.getTimezoneOffset(),aNf.getTimezoneOffset());return aLT.getTimezoneOffset()<aMV;};function aXa(){var aXZ=$("#avatarStorageNotice");if(aXZ.length>0&&(aXm||aWx)){var aXR=aXm?"Exceeded":"Approaching";aXZ.show().find("#storageStatus").text(aXR);aXZ.find("a").unbind("click").click(function(){aWg();return false;});}else if(aXZ.length>0){aXZ.hide();}var aWT=aL('justloggedin');if(aWT==1&&aXZ.length>0&&(aXm||aWx)){aWg();}baO('justloggedin');};function Ni(GLB_iUploadSize,GLB_sTotalStorage,GLB_sUsedStorage,GLB_bShowUpsell,GLB_sStorageLimitExceeded){if(typeof GLB_sTotalStorage!=='undefined'&&typeof GLB_sUsedStorage!=='undefined'&&typeof GLB_iUploadSize!=='undefined'){var aYm=(GLB_sStorageLimitExceeded=='yes')?true:false,aZo=parseInt(GLB_sUsedStorage,10),aZT=parseInt(GLB_sTotalStorage,10),aYN=(aZT-aZo)-GLB_iUploadSize;if(aYN<0||aYm){if(GLB_bShowUpsell){Nu(aZT,aZo,Math.abs(aYN),aYm);}return true;}}return false;};function Nu(GLB_iTotalStorage,GLB_iUsedStorage,GLB_iStorageOverage,GLB_bOutOfSpace){var aYl=function(){var aYC=$('#modal_msg_iframe').contents();if(GLB_bOutOfSpace){aYC.find('.storageUpsell').removeClass('accountStorageGood unknownExceededLimitActive accountStorageExceeded').addClass('accountStorageExceeded');}else{aYC.find('.storageUpsell').removeClass('accountStorageGood unknownExceededLimitActive uploadExceeded').addClass('uploadExceeded');}aYC.find('.storageOverage').text(fileSizeToString(GLB_iStorageOverage));aYC.find('.storageUsed').text(fileSizeToString(GLB_iUsedStorage));aYC.find('.storageLimit, .fullStorage').text(fileSizeToString(GLB_iTotalStorage));aYC.find('.halfStorage').text(fileSizeToString(GLB_iTotalStorage/2));aYC.find('.upgradeAmount').text('$'+aXd+' more');};LoadIframeLightbox('/templates/upgrade/storage_upsell.php',720,600,false,false,true,true);$('#modal_msg_iframe').load(aYl);};function GLB_fUpdateStorageWidget(){var aXv=new tH.Dv();aXv.aXn({success:function(data){MYF_WIDGET_STORAGE_calculateUsedStoragePercent(data.response.settings.used_storage_size);MYF_WIDGET_STORAGE_updateStorageDisplay();}});};function aXY(aWl,aGl){if(tH&&typeof MYF_WIDGET_STORAGE_totalStorage!=="undefined"){var aXv=new tH.Dv();aXv.aXn({success:function(data){var aXu=data.response.settings;MYF_WIDGET_STORAGE_calculateUsedStoragePercent(aXu.used_storage_size);MYF_WIDGET_STORAGE_updateStorageDisplay();if(aXu.storage_limit_exceeded=="no"||aXq===false){var iSizeTotal=0;if(aGl){for(var i=0;i<aGl.length;i++){iSizeTotal+=aGl[i].size;}}if(!Ni(iSizeTotal,aXu.storage_limit,aXu.used_storage_size,true,aXu.storage_limit_exceeded))aWl(false);}else{aWg(true);aWl(true);}},error:function(){aWl(false);}});}else{aWl(false);}};function aYX(){var UV=$(".dropdownOnClick");if(UV.length){UV.each(function(x,aYP){$(aYP).find("a:first").click(function(e){var Vp=$(this).closest(".dropdownOnClick");var Uw=Vp.hasClass("show_dropdown");UV.removeClass("show_dropdown").unbind("clickoutside");if(!Uw){Vp.addClass("show_dropdown").bind("clickoutside",function(){$(this).removeClass("show_dropdown").unbind("clickoutside");});}return false;});});}};$(aYX);function blX(sRedirectType){top.location='/login'+(sRedirectType==='RequireLogin'?'?l=1':'');};function GLB_fHeaderLoginHandler(){var $sLoginRedirect=$('#login_signup').attr('data-redirect');var bRedirect=$sLoginRedirect==='true';return function(e){blX('Login',bRedirect?'myfiles':undefined);e.preventDefault();};};function bhh(aUE){aUE=aUE.replace(/(\w+@[a-z0-9\-\.]{1,100}\.[a-z]{2,6})/gi,'<a href="mailto:$1">$1</a>').replace(/((https?|ftp)\:\/\/[a-z0-9\-\.]{1,100}\.[a-z]{2,6}([a-z0-9\/\-_~|\.?&=#+@%;,()!]*[a-z0-9\/\-_~|])?)/gi,'<a target="_blank" rel="noreferrer" href="$1">$1</a>');return aUE};function Cy(QV){if(QV===true){if(top===self)return;top.location.href=self.location.href;}else{var bSameHost;try{bSameHost=(/\.mediafire\.com$/).test(top.location.host);}catch(e){bSameHost=false;}if(top===self||bSameHost)return;top.location.href=self.location.href;}setTimeout(function(){Cy(QV);},500);};function NZ(apI){if(!apI.permissions)return 0;if(typeof apI.permissions=="object"){if(!apI.permissions.value)return 0;return parseInt(apI.permissions.value);}else{return parseInt(apI.permissions);}};function agW(apI,biw){if(apI.folderkey){return Encoder.XSSEncode(adv('folder',apI.folderkey,bql(apI.name)));}bpz=(biw==='download');bpH=(biw==='edit');if(!apI.links&&window.tH&&window.tH.files){var brd=window.tH.files.yx(apI.quickkey);if(brd&&brd.links){apI.links=brd.links;}}if(!apI.links){bqp=bql(apI.filename);apI.links={normal_download:adv("file",apI.quickkey,bqp)};if(apI.viewable){apI.links['view']=adv('view',apI.quickkey,bqp);}}if(!bpz&& !bpH&&apI.viewable){if(apI.links.view){return Encoder.XSSEncode(apI.links.view);}}if(bpH&&apI.links.edit){return Encoder.XSSEncode(apI.links.edit);}if(apI.links.normal_download){return Encoder.XSSEncode(apI.links.normal_download);}return '';};function functionCombiner(){this.fArray=[];this.add=function(f){if(typeof f==='function'){this.fArray.push(f);}};this.execute=function(){var args=arguments;this.fArray.forEach(function(f){f.apply(null,args);});}.bind(this);}(function segmentIdentifyInit(){if(!isSegmentEnabled())return;if(!(window.tH&&tH.user_info&&tH.user_info.used_storage_size)){setTimeout(segmentIdentifyInit,2000);return;}segmentIdentifyFull();})();function isSegmentEnabled(){return! !(window.analytics&&window.segmentIdentify&&window.segmentTrack);};function segmentIdentifyFull(){if(!isSegmentEnabled())return;window.segmentIdentify&&segmentIdentify({disk_usage:window.tH.user_info.used_storage_size});};function SegmentIdentifyWithDiskSpace(){if(!isSegmentEnabled())return;var aWi=new window.tH.Dv();aWi.Yw(function(data){if(data.response&&data.response.user_info){tH.user_info=data.response.user_info;segmentIdentifyFull();}});} function bcP(sUserIDHash,mG){try{if($('#userwork').length){var ez=(window.location.protocol+'//'+window.location.hostname)+'/dynamic/deleteaccount.php';var jUserWorkForm=$('<form>',{action:ez,method:'post',target:'userwork',id:'UserWorkForm'});var jUserIDField=$('<input>',{type:'hidden',name:'u',value:sUserIDHash});var jPasswordField=$('<input>',{type:'hidden',name:'p',value:mG});var jSecurityField=$('<input>',{type:'hidden',name:'security',value:BIL_sSecurityToken});jUserWorkForm.append(jUserIDField).append(jPasswordField).append(jSecurityField);$(document.body).append(jUserWorkForm);jUserWorkForm.submit().remove();}else{throw 1;}}catch(errno){alert("Deletion Error\n\nThere was an unknown error while trying to delete your account.\n\nPlease contact support for further assistance.");}} var er=1;var GM=0;var mu=1;var eN=1;var jS= -1;var oM=0;var eF=0;var eA= -1;var gj=0;var gv=0;var kc=0;var gD=0;var oD=0;var gn=0;var bab=0;var iZ='';var MP=false;var fw=new String('');var Sj=new String('');var gX=0;var hZ=0;var fq=0;var hC=0;var eV=1;var nk=5;var jO=0;var jE='';var gf=0;var kK=null;var lk=null;var lW='';var iR=false;var uE=false;var iJ= -1;var jT=0;var iP=0;var iPreviewScroll=1;var RB=0;var RA='';var JG;var SJ= -1;var Ua=new Array();var agb=0;var ajo;function dM(fo){if(iR==false)return false;if(aProfileFiles==null)return false;for(var eh=0;aProfileFiles[eh];eh++)if(aProfileFiles[eh]==fo)return true;return false;};function bdh(){if(document.getElementById('image_thumb_small'))document.getElementById('image_thumb_small').className='thumbnail_ns';if(document.getElementById('image_thumb_small2'))document.getElementById('image_thumb_small2').className='thumbnail_ns';if(document.getElementById('image_thumb_big'))document.getElementById('image_thumb_big').className='thumbnail_ns';if(document.getElementById('image_thumb_big2'))document.getElementById('image_thumb_big2').className='thumbnail_ns';};function ej(){if(eL==eU){parent.aH(0,"You are current NOT in a folder, please enter a folder or create a folder before attempting to share.");return false;}};function qJ(){var eR=null;var Ub=null;var gh='';var hd='';var eI=0;var nL=document.getElementById('email_files_qks');var nK=document.getElementById('email_files_filenames');var qI=document.getElementById('email_files_form');var lm=document.getElementById('email_files_to');if(lm&&lm.value==''){aH(0,"You must enter your valid email address in the 'Recipient Email' box..");return;}if(!(HX>0)){aH(0,"Select at least one public file or folder to email..");return;}{var eu=0;while(eu<eB&&eu<=eA&&(eu)<=(eA-(eE[er]*eB))&&aCurrentOrder[eu][0]){eR=document.getElementById('filecheck'+(eu+1));Ub=es[aCurrentOrder[eu][0][1]];if(eR&&eR.checked==true&&Ub){if(Ub[1]==1&&Ub[11]!=1){if(eI>0){gh+=';;';hd+=';;';}gh+=Ub[3];hd+=Ub[5];eI++;}if(Ub[1]==2&&Ub[11]!=1){if(eI>0){gh+=';;';hd+=';;';}gh+=Ub[15];hd+=Ub[5];eI++;}}eu++;}}if(eI<=0){aH(0,"No public files or folders are currently selected","please select one or more non-private items before attempting to send them via email.");return false;}else{nL.value=gh;nK.value=hd;aH(2,"Sending "+eI+" item(s) via email..");if(qI)qI.submit();else aH(0,"HTML components missing","Unable to perform the operation. Please contact support.");}};function bbX(nY,eu,eC){var fB=document.getElementById('thumbpop'+eu);if(es[eC]&&es[eC][2]==1&&fB){switch(nY){case 1:cE(document.getElementById('previmg'+eu),es[eC][15]);fB.className='thumbpop'+eu;break;case 2:default:fB.className='hide';break;}}};function MyFilesSwapOptions(){for(var eh=0;eS[eh]||fN[eh];eh++){if(document.getElementById(eS[eh]))document.getElementById(eS[eh]).className='hide';if(document.getElementById(fN[eh]))document.getElementById(fN[eh]).className='show';}try{if(Number(qm)==1){for(var eh=0;qj[eh]||qi[eh];eh++){if(document.getElementById(qj[eh])){document.getElementById(qj[eh]).className='hide';}if(document.getElementById(qi[eh])){document.getElementById(qi[eh]).className='show';}}}}catch(e){}};function dV(oh){var fI=document.getElementById('curr_previmage_name');var gT=document.getElementById('curr_previmage_id');if(!fI|| !gT){aH(0,"Missing site components.");return false;}var fT="/imageview.php?quickkey="+es[gT.value][3]+"&thumb="+oh;window.open(fT);};function cP(){var jR=aL('thumbsize');if(parseInt(jR)==0||parseInt(jR)==1){eV=parseInt(jR);}var kE=aL('mflt');if(parseInt(kE)>0){mu=parseInt(kE);}if(!document.getElementById('is_shared')||document.getElementById('is_shared').value!=1){var kR=aL('mflf');if(kR){var xH=false;if(typeof kR!="undefined"){for(var i=0;i<es.length;i++){try{if(kR==es[i][3]){xH=true;break;}}catch(e){};}if(xH){jE=kR;}}}var mt=aL('mfpf');if(mt){jS=mt;}}var qb=aL('mfipp');if(qb){bbD=qb/1;}if(!document.getElementById('is_shared')||document.getElementById('is_shared').value!=1){var bbk=aL('mfsf');if(bbk){kc=bbk/1;}var mN=aL('mfsd');if(mN){gD=mN/1;}}};function dX(){var fr=document.getElementById('form_todolist1');var gw=document.getElementById('form_todolist2');var gN=document.getElementById('form_todotype');var fQ=document.getElementById('form_todoform');var fI=document.getElementById('curr_previmage_name');var gT=document.getElementById('curr_previmage_id');if(!fQ|| !gN|| !gw|| !fr|| !fI|| !gT){aH(0,"Missing site components.");return;}var agree=confirm("Are you sure you want to delete the image named '"+fI.value+"'?");if(agree){gN.value=1;fr.value='';gw.value='';var eR=null;var Ub=null;var ig='';Ub=es[gT.value];if(Ub){fr.value+=Ub[1]+":"+Ub[3]+";";baY(gT.value);}if(fr.value){aH(2,"Deleting 1 Image..");fQ.submit();fg= -1;aG(-1);bdm();}return false;}else return false;};function CyclePreview(fc){if(aCurrentOrder[(fc+(fg-1))]&&aCurrentOrder[(fc+(fg-1))][1]==1&&document.getElementById('imagethumb'+(fc+fg))){fg=(fc+fg);}else{if(fc<0){for(var eu=eB;eu>=1;eu--){if(aCurrentOrder[(eu-1)]&&aCurrentOrder[(eu-1)][1]==1){fg=(eu);break;}}}else{for(var eu=1;eu<=eB&&eu<=eA&&(eu)<=(eA-(eE[er]*eB));eu++){if(aCurrentOrder[(eu-1)][1]==1){fg=(eu);break;}}}}aG(fg);};function bdm(){gG=document.getElementById('preview_box');Qh=document.getElementById('myimages');hy=document.getElementById('preview_window_show');hz=document.getElementById('preview_window_hide');if(gG){gG.innerHTML='';}if(hy){hy.className="preview_image";}if(hz){hz.className="hide";}if(Qh)Qh.style.minHeight='';if(typeof window.onscroll=="function")window.onscroll();bbC();};function bbC(){for(var eu=1;eu<=eB&&eu<=eA&&(eu)<=(eA-(eE[er]*eB));eu++){qC=document.getElementById('imagethumb'+eu);if(qC&&aCurrentOrder[(eu-1)][1]==1){if(qC.className=='small_private'||qC.className=='medium_private')qC.className=eV?'small_private':'medium_private';else if(qC.className=='small_password'||qC.className=='medium_password')qC.className=eV?'small_password':'medium_password';else if(qC.className=='small_private_selected'||qC.className=='medium_private_selected')qC.className=eV?'small_private':'medium_private';else if(qC.className=='small_password_selected'||qC.className=='medium_password_selected')qC.className=eV?'small_password':'medium_password';else qC.className=eV?'small_thumbnail':'medium_thumbnail';}}};function aG(jQ){if(fg== -1&&jQ== -1&& !(gX>0)){bdm();return;}fg= -1;if(jQ>=0)fg=jQ;else for(var eu=1;eu<=eB&&eu<=eA&&(eu)<=(eA-(eE[er]*eB));eu++){if(aCurrentOrder[(eu-1)][1]==1){fg=(eu);break;}}bbC();var nH=document.getElementById('imagethumb'+(fg));if(!nH){aH(0,"NOTICE: No image available to preview.");}else{var TZ=document.getElementById('imagethumb'+fg),yS="";if(TZ.className=='small_private'||TZ.className=='medium_private'){TZ.className=eV?'small_private_selected':'medium_private_selected';yS=" image_private";}else if(TZ.className=='small_password'||TZ.className=='medium_password'){TZ.className=eV?'small_password_selected':'medium_password_selected';}else{TZ.className=eV?'small_select':'medium_select';}Qh=document.getElementById('myimages');hy=document.getElementById('preview_window_show');hz=document.getElementById('preview_window_hide');gG=document.getElementById('preview_box');gG.innerHTML='';if(gG){gG.className="preview_image"+yS;mV=Bf((eH[7].replace(/#FILENUM#/g,'PREVIEW')),aCurrentOrder[(fg-1)][0][1],0,0);gG.innerHTML=mV;}if(Qh)Qh.style.minHeight='1025px';if(hz){hz.className="preview_image";}if(hy){hy.className="hide";}}ae('sharetabsfilePREVIEW-',1);if(typeof window.onscroll=="function")window.onscroll();Xc(0,document.getElementById('sharetemplatefilePREVIEW'),'PREVIEW','sharedtabsfileinfoPREVIEW-');};function uH(fo,uI,uD){for(var x in aCurrentOrder){if(aCurrentOrder[x][5]==fo){aCurrentOrder[x][4]=uI;break;}}uD=uD||false;if(uD){for(var y in es){if(es[y][3]==fo){es[y][16]=uI;break;}}}};function Qw(eu){Qg('Password protect this file',[['password','Password: (Enter a password to protect this file)','password',document.getElementById('password_list'+eu).value]],function(gg){Zi(3,'Updating password for \''+document.getElementById('textfilename'+eu).value+'\'..please wait..');aqr(1,'add_password'+eu,'add_password'+eu,'hide','div');document.getElementById('password_list'+eu).value=gg['password'];document.getElementById('form_todoform'+eu).submit();},null,'Save');};function PQ(QF,Fv){if(eL==eU)return;if(jQuery("#is_shared").val()==1)return;if(MP)return;if(baI(null,eL,QF,Fv)){$infobox=jQuery("#folder_infobox");$infobox.toggleClass("thisfolder_private");}};function baI(mR,fo,HI,Fv){var fT;var iA=document.getElementById('myfileswork');if(iA){var ayF;for(var eh=0;ayF=es[eh];eh++){if(ayF[3]==fo){var Fs;if(ayF[1]=='2'){for(var Fu=0;Fs=es[Fu];Fu++){if(Fs[1]=='2'&&Fs[4]==fo){if(typeof Fv=='undefined'){QS('Change privacy settings to '+(HI==1?"private":"public"),'Would you like to apply the privacy change to the sub-folders of <b>'+ayF[5]+'</b> ?',[['all','All Subfolders'],['this','This Folder'],['cancel','Cancel','grey']],function(rJ){if(rJ=='all')baI(mR,fo,HI,true);else if(rJ=='this')baI(mR,fo,HI,false);});return false;}if(Fv){DoRecursiveFolderAclChange(fo,HI);}break;}}}ayF[11]=HI;es[eh]=ayF;if(Fv)fT="/dynamic/doaclchange.php?quickkey="+fo+"&acl="+HI+"&type="+ayF[1]+"&filenum="+mR+"&recursive=1";else fT="/dynamic/doaclchange.php?quickkey="+fo+"&acl="+HI+"&type="+ayF[1]+"&filenum="+mR;if(iA.location)iA.location=fT;else iA.src=fT;break;}}for(var x in aCurrentOrder){if(aCurrentOrder[x][5]==fo){aCurrentOrder[x][3]=HI;break;}}return true;}};function DoRecursiveFolderAclChange(Fx,HI){var ayF;for(var eh=0;ayF=es[eh];eh++){if(ayF[1]=='2'&&ayF[4]==Fx){ayF[11]=HI;DoRecursiveFolderAclChange(ayF[3],HI);}}};function dI(eu,fo){uH(fo,0);document.getElementById('password_list'+eu).value='';for(var eh=0;es[eh];eh++)if(es[eh][3]==fo){es[eh][14]='';es[eh][16]=0;document.getElementById('form_todoform'+eu).submit();return true;}return false;};function dQ(mX){return confirm("Do you want to remove the password for '"+mX+"'?");};function Zz(){var iE=document.getElementById('detailedviewA');if(iE&&gf==1)iE.innerHTML="Hide Extra Details";else if(iE&&gf==0)iE.innerHTML="Show Extra Details";};function cZ(){if(gf==1){aY("advancedview",0,90);gf=0;}else{aY("advancedview",1,90);gf=1;}Zz();jQuery("#file_details_toggle").toggleClass('details_hidden',! !gf);RenderMyFiles(er,eN);};function Ro(){MP=false;jQuery("#folder_infobox").removeClass("searchmode");jQuery("#main_files_container, #new_folder_trigger").removeClass("searchmode");jQuery("#clear_search").hide();};function aN(){var jA=document.getElementById('search_input'+er);if(jA){if(jA.value!='')jA.value='';}var he=document.getElementById('search_delete_button'+er);if(he){he.style.visibility="hidden";}fw='';Ro();eA= -1;eE[er]=0;DoHide('search_processing_icon'+(er));if(kc==4){kc=0;Um();}};function bbA(mA,hv){var he=document.getElementById('search_delete_button'+hv);if(he){he.style.visibility=mA;}};function bbP(ku){jQuery("#clear_search").show();var oJ='';if(ku==fw){DoHide('search_processing_icon'+(er));return false;}var baJ=document.getElementById('search_input'+(er));if(baJ&&ku!=baJ.value&&baJ.value!='Viewing All'){DoHide('search_processing_icon'+(er));return false;}DoShow('search_processing_icon'+(er));fw=ku;Sj=Sq(fw);if(!MP&&fw){kc=4;gD=0;Um();}MP=fw?true:false;eA= -1;eE[er]=0;RenderMyFiles(er,eN);if(fw.length==0){bbA('hidden',er);aN();}if(MP){bbA('visible',er);jQuery("#folder_infobox, #new_folder_trigger").addClass("searchmode");jQuery("#main_files_container").addClass("searchmode");}DoHide('search_processing_icon'+(er));};function Sq(vU){So=new RegExp('^([^"]*)["]([^"]*)["](.*)$');Si=Array();Si.push(vU);Sl=Array();while(Si.length){Sk=Si.shift();if(acF=So.exec(Sk)){if(acF[1]){Si.push(acF[1]);}if(acF[2]){Sl.push(acF[2]);}if(acF[3]){Si.push(acF[3]);}}else{Sk=Sk.replace('"','');Sn=Sk.split(" ");for(var x=0;x<Sn.length;x++){Sm=Sn[x].trim();if(Sm.length){Sl.push(Sm);}}}}return(Sl.join('|'));};function baY(nm){var ah=es[nm];if(ah)ah[0]=0;else return false;};function cG(fj,hP,DH){var kH=false;var gu='';var jF=false;var eh= -1;var ayF;while(ayF=es[++eh]){if(ayF[0]==1&&ayF[4]==fj){if(ayF[1]==2){if((kH=cG(ayF[3],(hP+1)))!=false)gu+=ayF[1]+":"+ayF[3]+";"+kH;else gu+=ayF[1]+":"+ayF[3]+";";if(!DH)baY(eh);jF=true;}else{gu+=ayF[1]+":"+ayF[3]+";";if(!DH)baY(eh);jF=true;}}}if(jF)return gu;return false;};function Gm(filename){if(filename.lastIndexOf('.')== -1)return '';return filename.substr(filename.lastIndexOf('.')+1).toLowerCase();};function Gp(){var gg=Array();var i=0;for(var eu=1;eu<=eB&&eu<=eA&&(eu)<=(eA-(eE[er]*eB));eu++){eR=document.getElementById('filecheck'+eu);Ub=es[aCurrentOrder[(eu-1)][0][1]];if(eR&&eR.checked==true&&Ub){gg[i++]=Array(aCurrentOrder[(eu-1)][0][1],Ub);}}return gg;};function bqy(xn){if(!fu&& !hq){Ck();return;}var bbO='';var aZipFiles=[['2',xn,0]];var eR,Ub,Cu;if(eL!=eU){for(var i=0;i<axL.length;i++){if(axL[i][1]==eL)bbO=axL[i][0];}}Cu=Dk(xn,1);if(Cu){aZipFiles=aZipFiles.concat(Cu);Co(aZipFiles,'');}else{aH(0,"Folder must contain at least one item to zip.");}return;};function dU(gU,iF,fQ,iz){if(!iz|| !gU|| !iF|| !fQ)return false;var aAg=iF.value;var qG=iF[iF.selectedIndex].text.trim();if(!(HX>0)){aH(0,"You must select at least one item to move.");return;}if(!MP)if(eL==aAg){aH(0,"The destination folder ('"+qG+"') and the current folder selected are the same.");return;}iz.value='';var jn=false;var eR=null;var Ub=null;var fj=eU;var jL=eU;for(var eu=1;eu<=aCurrentOrder.length;eu++){if(eR=document.getElementById('filecheck'+eu)){Ub=es[aCurrentOrder[(eu-1)][0][1]];jL=aAg;if(eR&&eR.checked==true&&Ub){if(Ub[4]==aAg){aH(0,"One of the source folders ("+Ub[5]+") is already in the destination folder, nothing will be moved. ");jn=true;break;}if(Ub[1]==2){if(Ub[3]==aAg){aH(0,"One of the source folders ("+Ub[5]+") is the destination folder, nothing will be moved. ");jn=true;break;}var lp=0;while((fj=aE(jL))!=eU&&lp<1000){if(fj==Ub[3]){jn=true;aH(0,"The source folder ("+Ub[5]+") is in the destination tree, you cannot move folders in this fashion.");break;}jL=fj;lp++;}}if(!jn)iz.value+=Ub[1]+":"+Ub[3]+";";}}}if(jn){iz.value='';return false;}if(HX!=0){NV=(HX==1)?"":"s";aH(2,"Moving "+HX+" selected item"+NV+" to folder '"+qG.trim()+"'..");}fQ.submit();};function aE(gl){for(var eh=0;eh<(fz+1);eh++)if(axL[eh][1]==gl)return axL[eh][3];return 0;};function OF(){var Of=axL[GM]&&eL!=eU?axL[GM][0]:"My Files";if(Of=="My Files"&&jQuery("#is_shared").val()==1)Of="Shared Files";jQuery(".location_title").text(Of);};function ak(gl,TX){gl=gl||eU;if(axL==null){setTimeout(function(){ak(gl);},1000);return false;}if(!MP&&gl==eL)return false;if(!gl)return false;if(!TX){aN();}eL=gl;eA= -1;eE[er]=0;var oE=gl;var jk=document.getElementById('current_folder_name'+er);var gL=document.getElementById('parent_folder_names'+er);if(jk&&gL){var fj=eU;gL.innerHTML='';jk.innerHTML='';for(var eh=0;eh<(fz+1);eh++){if(axL[eh]&&axL[eh][1]==eL){if(GM!=eh){GM=eh;Oq();}if(axL[eh][1]!=eU)jk.innerHTML='&nbsp;/&nbsp; <span>'+axL[eh][0]+'</span>';fj=axL[eh][3];break;}}var lz=Array();var gM=0;while(fj!=eU){for(var eh=0;eh<(fz+1);eh++){if(axL[eh][1]==fj){lz[gM]='&nbsp;/&nbsp; <a href="#" class="breadcrumb" data-quickkey="'+axL[eh][1]+'" OnClick=" ak(\''+axL[eh][1]+'\'); return false;">'+axL[eh][0]+'</a> ';fj=axL[eh][3];gM++;break;}}}while(gM>0)gL.innerHTML+=lz[--gM];if((!document.getElementById('is_shared')||document.getElementById('is_shared').value!=1)||Number(qm)==1){aU('mflf',eL,100);aU('mfpf',fj,100);}}RenderMyFiles(er,eN);OF();var Oe;if(axL[GM])Oe=kr(axL[GM][1]);jQuery("#folder_infobox").toggleClass("thisfolder_private",Oe?(Oe[11]==1):true);if(eL==eU){jQuery("#folder_infobox, #main_files_container, #view_options").addClass("thisfolder_root");jQuery("#infobox_lg").css('display','none');jQuery(".flyout_pointer_left").css('display','none');jQuery("#view_details").addClass('notset');setTimeout(function(){jQuery("#folderinfo_details").slideUp(600);},200);jQuery("#folder_share").toggleClass('control_disabled',!US());NF();}else{jQuery("#folder_infobox, #main_files_container, #view_options").removeClass("thisfolder_root");OH();jQuery("#infobox_lg").css('display','');jQuery(".flyout_pointer_left").css('display','');jQuery("#view_details").removeClass('notset');jQuery("#folder_share").toggleClass('control_disabled',(Oe&&Oe[11]==1));Pu(Oe&&Oe[13]);}};var ajn=false;var NX=false;function NF(){jQuery('#folder_infobox').removeClass('show_folderpreview');};function Pu(Ot){if(Ot===''){NF();return;}if(NX)return;if(ajn!==false)clearTimeout(ajn);jQuery('#infobox_desc_text').text(Ot);jQuery('#folder_infobox').addClass('show_folderpreview');ajn=setTimeout(function(){NF();},5000);};function OH(){if((Wk=axL[GM])&&(kf=kr(Wk[1]))){jQuery("#infobox_name").text(kf[5]);var Cu=cF(eL);jQuery("#infobox_details").text('Created: '+kf[10]+', '+Cu[1]+' folders, '+Cu[0]+' files');var sTags='';var jf=kf[12].split(' ');for(var eh=0;(jf[eh]||jf[(eh+1)])&&eh<30;eh++)sTags+="<a href='#' OnClick='document.getElementById(\"search_input"+er+"\").value=this.innerHTML; bbP(this.innerHTML); return false;'>"+jf[eh]+"</a> ";var yL=kf[13];var Pk=(!sTags&& !yL);if(!sTags)sTags='<a href="#" class="edit_fileinfo_trigger">Add tags...</a>';if(!yL)yL='<a href="#" class="edit_fileinfo_trigger">Add description...</a>';jQuery("#infobox_tags").html(sTags);jQuery("#infobox_desc").html(yL);jQuery("#folderinfo_filecount").html('Folders: '+Cu[1]+'<br>Files: '+Cu[0]);jQuery("#folderinfo_tags").html(sTags);jQuery("#folderinfo_desc").html(yL);if(Pk){jQuery("#folderinfo_details").slideUp(600);}}};function cX(){aS(0,kK);};function cT(fO,sId){sId=sId||('move_dest_'+fO);if(iR==true)var gb='<select id="'+sId+'" name="move_dest_'+fO+'" style=" width: 120px;">';else var gb='<select id="'+sId+'" name="move_dest_'+fO+'" style=" width: 150px;">';var ji=0;for(var eI=0;eI<(fz+1);eI++){if(axL[eI]){ji='';for(var ly=0;(axL[eI][2]*4)>ly;ly++)ji+="&nbsp;";gb+='<option value="'+axL[eI][1]+'">'+ji+axL[eI][0]+'</option>';}}gb+='</select>';return gb;};function apN(ny,eI,hP){if(!(fz>0)){axL=Array();return false;}if(hP>=20){aH(0,"Maximum Folder Depth Reached!");return false;}if(eI==0){axL=Array(fz);axL[0]=Array('My Files',eU,0,eU);eI++;}var fe='';for(var eh=0;eh<fz;eh++){if(!fd[eh])break;fe=es[fd[eh][1]];if(fe[4]==ny&&fe[0]==1&&fe[1]==2&&fe[18]!=="deleted"){axL[eI]=Array(fe[5],fe[3],hP,fe[4]);eI++;eI=apN(fe[3],eI,hP+1);}}return eI;};function aS(ki,fW){var fW=(fW==null)?"#FFFFFF":fW;if(fW==0)fW='';var lE=document.getElementById('new_folder');var gE=document.getElementById('tag_selected');var lY=document.getElementById('move_selected');var lM=document.getElementById('email_selected');var lH=document.getElementById('viewaccount_selected');var lF=document.getElementById('new_folderA');var aAQ=document.getElementById('tag_selectedA');var lZ=document.getElementById('move_selectedA');var lN=document.getElementById('email_selectedA');var lI=document.getElementById('viewaccount_selectedA');gE.className='hide';lE.className='hide';lY.className='hide';lM.className='hide';lH.className='hide';aAQ.style.backgroundColor=fW;lF.style.backgroundColor=fW;lZ.style.backgroundColor=fW;lN.style.backgroundColor=fW;lI.style.backgroundColor=fW;if(ki!=gn){switch(ki){case 1:document.getElementById('new_folder_name').value='';lE.className='show';lF.style.backgroundColor='#E1EDFF';document.getElementById('new_folder_name').focus();break;case 2:document.getElementById('tag_desc_list').value='';gE.className='show';aAQ.style.backgroundColor='#E1EDFF';document.getElementById('tag_desc_list').focus();break;case 3:document.getElementById('move_dropdown').innerHTML=cT('navbar_filelist');lY.className='show';lZ.style.backgroundColor='#E1EDFF';document.getElementById('move_dest_navbar_filelist').focus();break;case 4:document.getElementById('email_files_to').value='';lM.className='show';lN.style.backgroundColor='#E1EDFF';document.getElementById('email_files_to').focus();break;case 5:lH.className='show';lI.style.backgroundColor='#E1EDFF';document.getElementById('stat_num_files').focus();break;default:break;}gn=ki;}else gn=0;};function dE(ic){if(ic.value!=hC){ic.disabled=true;bbj(ic.value);ic.disabled=false;}};function bbj(bdd){hC=bdd;eA= -1;eE[er]=0;RenderMyFiles(er,eN);};function dN(gU,fI,oB,fQ){aH(2,"Creating Folder..");switch(bde(fI.value)){case-3:aH(0,"The folder name you entered contains invalid characters.");gU.disabled=false;break;case-2:aH(0,"The folder name you entered is too long, please correct and try again.");gU.disabled=false;break;case-1:aH(0,"The folder name you entered is too short, please correct and try again.");gU.disabled=false;break;case 0:document.getElementById('new_folder_parent').value=eL;fQ.submit();break;default:aH(0,"The folder name you selected to create was invalid for an unknown reason, please check it and try again.");gU.disabled=false;break;}};function eo(Qf){var numaric=Qf;for(var j=0;j<numaric.length;j++){var alphaa=numaric.charAt(j);var hh=alphaa.charCodeAt(0);if((hh>31&&hh<59)||(hh>57&&hh<94)||(hh>93&&hh<123)){}else{return false;}}return false;};function ep(Qf){var numaric=Qf;for(var j=0;j<numaric.length;j++){var alphaa=numaric.charAt(j);var hh=alphaa.charCodeAt(0);if((hh>47&&hh<59)||(hh>64&&hh<90)||(hh>96&&hh<123)){continue;}else{return false;}}return false;};function bde(fU){var et=0;if(fU.length<1)et= -1;if(fU.length>40)et= -2;return et;};function xO(zw){var sId;var ah;switch(zw){case 2:sId='dropbox_color_options';break;case 3:sId='dropbox_advanced_options';break;case 1:default:sId='dropbox_basic_settings';break;}DoHide('dropbox_basic_settings');DoHide('dropbox_color_options');DoHide('dropbox_advanced_options');DoShow(sId);for(var i=1;i<=3;i++){ah=document.getElementById('dropbox_tab_'+i);if(ah&&ah.className)ah.className="";}ah=document.getElementById('dropbox_tab_'+zw);if(ah)ah.className="current";};function na(qX,vV){var elm;var zL=['#000000','#ffffff','#cccccc','#666666','#000000','#9900ff','#003399','#00ccff','#00ff99','#66ff00','#ffff00','#ff6600','#ff0000'];if(elm=document.getElementById('hextext_'+qX)){return xI(qX,true,elm,zL[vV]);}};function xI(qX,AS,wt,zd){var elm;if(!wt){if(!(wt=document.getElementById('hextext_'+qX))){return false;}}if(zd){wt.value=zd;}var wU=wt.value.replace(/[^0123456789ABCDEFabcdef]/g,'');while(wU.length<6){wU=wU+'0';}wU='#'+wU;if(wt.value.length>7||AS){wU=wU.substr(0,7);wt.value=wU.toLowerCase();}if(elm=document.getElementById('color_preview_'+qX)){elm.style.background=wU;}if(String(wt.value).replace(/[^0123456789ABCDEFabcdef#]/g,'')!=wt.value){wt.value=wU;zy(qX,wU);return false;}zy(qX,wU);return true;};function Al(wU){var elm;if(elm=document.getElementById('dropbox_step1')){elm.style.background=wU;}};function Ak(wU){var elm;if(elm=document.getElementById('dropbox_header_div')){elm.style.background=wU;}};function Ah(wU){var elm;if(elm=document.getElementById('dropbox_header_div')){elm.style.color=wU;}};function Ad(wU){var elm;if(elm=document.getElementById('dropbox_message_div')){elm.style.color=wU;}};function Ae(wU){var elm;if(elm=document.getElementById('dropbox_link')){elm.style.color=wU;}};function zx(vU){var elm;if(elm=document.getElementById('dropbox_header_div')){$('span.fileDropPreviewCount').text(parseInt($('#dbx_input_header').attr('maxlength'),10)-$('#dbx_input_header').val().length);$(elm).text(vU);}};function zs(vU){var elm;if(elm=document.getElementById('dropbox_greeting')){elm.innerHTML=vU;}};function zy(qX,AE){var EE=[null,Al,Ak,Ah,Ad,Ae];var customFunc;if(customFunc=EE[qX]){customFunc(AE);}};var DropboxObj={yi:480,Fb:0};function Bu(){function getValue(sId){var elm;if(elm=document.getElementById(sId)){return elm.value;}else{aH(0,"Missing site components. Unable to set FileDrop.");}};function zD(sId){var elm;var xL;if((elm=document.getElementById(sId))&&(xL=elm.options[elm.selectedIndex])){return xL.value;}else{aH(0,"Missing site components. Unable to set FileDrop.");}};DropboxObj.yj=getValue('dbx_input_header');DropboxObj.yh=getValue('dbx_input_greeting');DropboxObj.yn=getValue('dbx_input_completion');DropboxObj.yi=zD('dbx_input_width');DropboxObj.AF=getValue('hextext_1');DropboxObj.AH=getValue('hextext_2');DropboxObj.AC=getValue('hextext_3');DropboxObj.AA=getValue('hextext_4');DropboxObj.AB=getValue('hextext_5');DropboxObj.zO=zD('dbx_input_allow_description');DropboxObj.uL=zD('dbx_input_notification_email');DropboxObj.Bh=zD('dbx_input_allow_multiple');};function Ab(){var elm;var fQ=document.getElementById('form_dbx');Bu();if(!fQ){aH(0,"Missing site components. Unable to set FileDrop.");return;}var DA=[DropboxObj.yj,DropboxObj.yh,DropboxObj.yn];for(var i=0,aRh=DA.length;i<aRh;i++){if(DA[i]===''){xO(1);aH(0,"Please fill in all text fields.");return;}}var DC=['dbx_folder','dbx_text1','dbx_text2','dbx_text3','dbx_color1','dbx_color2','dbx_color3','dbx_color4','dbx_color5','dbx_sharing','dbx_descrip','dbx_multi','dbx_width','dbx_email'];var zG=[DropboxObj.currentFolder,DropboxObj.yj,DropboxObj.yh,DropboxObj.yn,DropboxObj.AF,DropboxObj.AH,DropboxObj.AC,DropboxObj.AA,DropboxObj.AB,DropboxObj.Bg,DropboxObj.zO,DropboxObj.Bh,DropboxObj.yi,DropboxObj.uL];for(i=0,aRh=DC.length;i<aRh;i++){if(elm=document.getElementById(DC[i])){elm.value=zG[i];}else{aH(0,"Missing site components. Unable to set FileDrop.");return;}}aH(2,"Saving FileDrop settings.");var sD=tH.folders.yx(DropboxObj.currentFolder);if(aHa&&sD&&sD.parent){aHa.aIX(sD.parent.folderkey);}fQ.submit();};function zZ(yk){aH(2,"Disabling FileDrop.");zp(false,yk);};function zp(SA,yk,EK){var elm;var fQ=document.getElementById('form_dbx_status');var yM=document.getElementById('dbx_status_enable');var yC=document.getElementById('dbx_silent_return');var yN=document.getElementById('dbx_status_id');if(!fQ|| !yM|| !yN|| !yC){aH(0,"Missing site components. Unable to set FileDrop.");return;}if(SA){yM.value='1';zr();}else{yM.value='0';zq();}if(EK){yC.value='1';}else{yC.value='0';}if(yk!==undefined){yN.value=yk;}else{yN.value=DropboxObj.currentFolder;}var sD=tH.folders.yx(yN.value);if(aHa&&sD&&sD.parent){aHa.aIX(sD.parent.folderkey);}fQ.submit();};function zr(){var elm;var ayF;var i= -1;var fO=DropboxObj.currentFolder;$('#folder-'+fO).addClass('dropbox');window.tH.folders.memory[fO].dropbox_enabled='yes';};function zq(){var elm;var ayF;var i= -1;var fO=DropboxObj.currentFolder;$('#folder-'+fO).removeClass('dropbox');window.tH.folders.memory[fO].dropbox_enabled='no';};function zW(xn,eu){aH(0,"Loading folder FileDrop data.","");var elm;var fQ=document.getElementById('form_dbx_folder');var hO=document.getElementById('dbx_text_embeded');var sD=document.getElementById('dbx_folderid');DropboxObj.currentFolder=xn;DropboxObj.currentMyFilesPosition=eu;DropboxObj.zF='';var yb=document.getElementById('dbx_input_header');var ya=document.getElementById('dbx_input_greeting');var xZ=document.getElementById('dbx_input_completion');var oInput4=document.getElementById('dbx_input_width');if(!yb|| !ya|| !xZ|| !oInput4){aH(0,"Missing site components.");return;}if(yb.value&&yb.value!=DropboxObj.yj){DropboxObj.yj=yb.value;}if(ya.value&&ya.value!=DropboxObj.yh){DropboxObj.yh=ya.value;}if(xZ.value&&xZ.value!=DropboxObj.yn){DropboxObj.yn=xZ.value;}if(!fQ|| !hO|| !sD){aH(0,"Missing site components.");return;}hO.innerHTML='Retrieving folder data...';sD.value=xn;fQ.submit();};function Bl(xn){function xl(sId,mA){var elm,i,aRh;if((elm=document.getElementById(sId))){if(elm.type=="select"){for(i=0,aRh=elm.length;i<aRh;i++){if((elm[i].value=mA)){elm[i].selected=true;}}}else{elm.value=mA;}}};var elm;var vU;if(!DropboxObj.currentFolder){return;}av();if(arguments.length<2||arguments[1]!='1'){var AR=confirm("This folder is not enabled as a FileDrop. Would you like to enable the folder as a FileDrop? (This can be undone at any time.)");if(AR){zp(true,DropboxObj.currentFolder);}else{zq();return;}}zr();if(arguments.length>1){xl('dbx_input_header',arguments[2]);xl('dbx_input_greeting',arguments[3]);xl('dbx_input_completion',arguments[4]);zx(arguments[2]);zs(arguments[3]);xl('hextext_1',arguments[5]);xl('hextext_2',arguments[6]);xl('hextext_3',arguments[7]);xl('hextext_4',arguments[8]);xl('hextext_5',arguments[9]);na(1,arguments[5]);na(2,arguments[6]);na(3,arguments[7]);na(4,arguments[8]);na(5,arguments[9]);xl('dbx_input_allow_description',arguments[10]);xl('dbx_input_allow_multiple',arguments[12]);xl('dbx_input_notification_email',arguments[13]);}if(xn){DropboxObj.zF=xn;}Fd(true);zn();xO(1);window.afU();};function zM(elm){var xL;if(elm){if(xL=elm.options[elm.selectedIndex]){DropboxObj.yi=xL.value;}}zn();};function zn(){var sSubDomain=aBV();if(sSubDomain=='live'){sSubDomain='www';}if(elm=document.getElementById('dbx_text_embeded')){vU='<script type="text/javascript">';vU+='var mf_dropbox_width='+DropboxObj.yi+';';if(DropboxObj.Fb>0)vU+='var mf_dropbox_extralines='+DropboxObj.Fb+';';vU+='var mf_dropbox_id="'+DropboxObj.zF+'";';vU+='</script><script type="text/javascript" src="//'+sSubDomain+'.mediafire.com.de.a2ip.ru/dropbox/dropbox.js"></script>';elm.value=vU;var hostedElm=document.getElementById('hostedfiledrop_text_share');hostedElm.value='http://'+sSubDomain+'.mediafire.com.de.a2ip.ru/filedrop/filedrop_hosted.php?drop='+DropboxObj.zF;}else{aH(0,"Missing site components.");}if(elm=document.getElementById('dropbox_step1')){if(DropboxObj.yi== -1)elm.style.width='100%';else elm.style.width=DropboxObj.yi+'px';}};function Ck(){LoadIframeLightbox('/templates/upgrade/bulkdownload.html',800,330);};var Zw={};var Xe;var aVt="";var aME={};function Eh(keys,ajK){av();aVt=keys;aME.use_own_bandwidth=false;if(ajK)LoadIframeLightbox('/templates/confirm/approvebandwidthlimitedbulkdownload.html',530,327);else LoadIframeLightbox('/templates/confirm/approvebulkdownload.html',530,337);};function DisplayZipInsufficientBandwidthApproval(){av();LoadIframeLightbox('/templates/confirm/approve_bw_insufficient_bulk_download.html',530,272);};function aUG(keys){av();aVt=keys;aME.allow_large_download=false;LoadIframeLightbox('/dynamic/template_popup.php?page=approvelargedownload',530,267);};function bpS(){aME.allow_large_download=true;LF.aUA(aVt,aME);};function aMD(){aME.use_own_bandwidth=true;LF.aUA(aVt,aME);};function akg(oFilesToZip){var gu='';$.each(oFilesToZip.files,function(x,aZL){gu+='1:'+aZL.quickKey+';';});$.each(oFilesToZip.folders,function(x,sD){gu+='2:'+sD.folderKey+';';});return gu;};function Hm(GX){var Ha=document.getElementById('form_toolbardata');var fQ=document.getElementById('form_toolbarform');if(!fQ|| !Ha){aH(0,"Missing site components.");return;}Ha.value=GX;fQ.submit();aH(0,"Sending files to toolbar.");};function Fe(vU){var EZ=[];EZ[4]=[106];EZ[5]=[73,92,105,108,44,45,46,47,58,59,32];EZ[6]=[74,91,93,102,40,41];EZ[7]=[116];EZ[8]=[95,114,122,42];EZ[9]=[63,99,115,118,120,121];EZ[10]=[83,97,101,107,111,48,49,50,51,52,53,54,55,56,57,36];EZ[11]=[70,75,76,80,84,88,89,90,98,100,103,104,110,112,113,117];EZ[12]=[65,195,135,66,67,69,82,86];EZ[13]=[78,79,81,85,94,43,60,61,68,71,72];EZ[14]=[119];EZ[15]=[109];EZ[16]=[64,77,87];var Fj=4;var CZ=16;var wp=1;var Fi=vU.length;var Fa;var sV;var jF;for(var qy=0;qy<Fi;qy++){jF=false;sV=vU.charCodeAt(qy);for(var Fc=Fj;!jF&&Fc<=CZ;Fc++){for(var i=0;!jF&&i<EZ[Fc].length;i++){if(EZ[Fc][i]==sV){Fa=Fc;jF=true;}}}if(!jF)Fa=10.5;wp+=Fa;}return wp;};function Fd(Fg){if(!(DropboxObj.yi>0)){if(DropboxObj.Fb!=0){DropboxObj.Fb=0;if(!Fg)zn();}return;}var yb=document.getElementById('dbx_input_header');var ya=document.getElementById('dbx_input_greeting');var xZ=document.getElementById('dbx_input_completion');var oInput4=document.getElementById('dbx_input_width');if(!yb|| !ya|| !xZ|| !oInput4){aH(0,"Missing site components.");return;}var Fl,Fa;var Fb=0;var Ff=0;var lJ=DropboxObj.yi-20;Fa=Fe(yb.value);Fa*=1.04;Fb+=Math.floor(Fa/lJ);Fa=Fe(ya.value);Fa*=0.7;Fb+=Math.floor(Fa/lJ);Fa=Fe(xZ.value);Fa*=0.7;Ff+=Math.floor(Fa/lJ);if(Ff>Fb)Fb=Ff;if(DropboxObj.Fb!=Fb){DropboxObj.Fb=Fb;if(!Fg)zn();}};function aXg(aXP){var aWr=['webkit','moz','ms','o'];var aoz=('hidden'in document)?'hidden':null;if(!aoz){for(var i=0;i<aWr.length;i++){var aWw=aWr[i]+'Hidden';if(aWw in document){aoz=aXP?aWr[i]:aWw;break;}}}return aoz;};function aXX(){var aoz=aXg();var aWE=document[aoz];if(typeof aWE==='string'){if(aWE=='hidden')aWE=true;else aWE=false;}return aoz?aWE:false;};function aod(){var aoz=aXg(true),aoG=null;if(aoz&&window.addEventListener){var aWp=(aoz!='hidden'?aoz:'')+'visibilitychange';document.addEventListener(aWp,function(){if(!aXX()&& !aek&&aZe){FI();}});}};function bhv(ahO){var aHl=new Array();for(var x=0,l=tH.aca.length;x<l;x++){if(ahO=="folders"&&tH.aca[x].folderkey)aHl.push(tH.aca[x]);if(ahO=="files"&&tH.aca[x].quickkey)aHl.push(tH.aca[x]);}return aHl;};function bfV(Lu){if(Lu.quickkey){var acD=new tH.Cp(Lu,tH.currentFolder);var bgr=bhv("files");bgr.push(acD);bgr.sort(YT.file[sortBy]);if(sortAscending)bgr.reverse();if(bgr[0].quickkey!=acD.quickkey){tH.files.Yx(acD.quickkey,acD);aoQ(acD);}}else if(Lu.folderkey){var adj=new tH.yJ(Lu,tH.currentFolder);var bgf=bhv("folders");bgf.push(adj);bgf.sort(YT.folder[(sortBy=='created'?'created':'name')]);if(sortAscending)bgf.reverse();if(bgf[0].folderkey!=adj.folderkey){tH.folders.Yx(adj.folderkey,adj);aoQ(adj);}}};function bgk(Lu){var YN=false;for(var x=0,l=tH.aca.length;x<l;x++){var bgV=tH.aca[x];if(Lu&&bgV&&Lu.quickkey&&bgV.quickkey&&Lu.quickkey==bgV.quickkey)YN=true;if(Lu&&bgV&&Lu.folderkey&&bgV.folderkey&&Lu.folderkey==bgV.folderkey)YN=true;}return YN;};var bhF={};function bhD(qN,RC,afd,MYF_bOverride){if(FF()||window.tH.sh)return;var aeN=window.tH.currentFolder;if(window.tH.currentFolder.revision_number&&window.tH.currentFolder.revision_number>0)aON=aeN.revision_number;else if(localStorage&&localStorage["REVISION_NUM-"+window.tH.currentFolder.folderkey])aON=parseInt(localStorage["REVISION_NUM-"+window.tH.currentFolder.folderkey]);else{aON=0;}if(aON<=0){if(window.tH.bhn){aON=window.tH.bhn;}else if(localStorage&&localStorage["DEVICE_REVISION"]){aON=localStorage["DEVICE_REVISION"];}else{aON=0;}}var x,l,adj,acD,bhk=false;if(!MYF_bOverride&&typeof bhF[window.tH.currentFolder.folderkey]!="undefined"&&bhF[window.tH.currentFolder.folderkey]==aON){setTimeout(function(){delete bhF[window.tH.currentFolder.folderkey];},10000);return;}bhF[window.tH.currentFolder.folderkey]=aON;var afx=window.tH.currentFolder.folderkey,Bj=window.tH.currentFolder.folderkey,aON;if(afx==="myfiles")afx="";function bgi(acD){var bhk=false;if(acD.quickkey){bhk=true;if(bgk(acD)){tH.files.Yx(acD.quickkey,new tH.Cp(acD));asE(new tH.Cp(acD,tH.currentFolder));}else{if(aQx("files",tH.currentFolder)){tH.files.Yx(acD.quickkey,new tH.Cp(acD));aoQ(new tH.Cp(acD,tH.currentFolder));}else{bfV(acD);}}}return bhk;};function bfY(adj,bjG){if(adj.folderkey&&adj.folderkey==='myfiles')return false;var bhk=false;if(adj.folderkey){bhk=true;if(bgk(adj)){tH.folders.Yx(adj.folderkey,new tH.yJ(adj));asN(new tH.yJ(adj,tH.currentFolder),bjG);}else{if(aQx("folders",tH.currentFolder)){tH.folders.Yx(adj.folderkey,new tH.yJ(adj));aoQ(new tH.yJ(adj,tH.currentFolder));}else{bfV(adj);}}window.bfF(adj);}return bhk;};var aBu=new tH.aCa();aBu.bgS({revision:aON},{success:function(arO,bgp,ado){if(!arO.response)return;var bgj=parseInt(arO.response.device_revision,10)||0,bhn=window.tH.bhn||0;if(bhn===0&&localStorage&&localStorage["REVISION_NUM-"+Bj])bhn=localStorage["REVISION_NUM-"+Bj];if(bhn&&bgj>bhn){beg();var adG=new tH.Dv();adG.aXn({success:function(data){MYF_WIDGET_STORAGE_calculateUsedStoragePercent(data.response.settings.used_storage_size);MYF_WIDGET_STORAGE_updateStorageDisplay();}});}window.tH.bhn=bgj;if(localStorage)localStorage["DEVICE_REVISION"]=bgj;if(window.tH.currentFolder.folderkey!==Bj||afx==='trash')return;if(aON===0&&arO.response.device_revision){tH.currentFolder.revision_number=bgj;tH.folders.Yx(tH.currentFolder.folderkey,tH.currentFolder);if(localStorage)localStorage["REVISION_NUM-"+window.tH.currentFolder.folderkey]=arO.response.device_revision;return;}var aPS,bhw;if(arO.response&&arO.response.changes_list_block){aPS=parseInt(arO.response.changes_list_block,10);bhw=aON===0?aPS:Math.floor(aON/aPS)*aPS+aPS;}if(arO.response.result.toLowerCase()==="success"){if(arO.response.deleted){var bgt=arO.response.deleted;if(bgt.folders&&bgt.folders.length>0){for(x=0,l=bgt.folders.length;x<l;x++){adj=bgt.folders[x];if(parseInt(adj.revision,10)>aON){if(tH.currentFolder.folders[adj.folderkey]){aQO(tH.currentFolder.folders[adj.folderkey]);bhk=true;}}}}if(bgt.files&&bgt.files.length>0){for(x=0,l=bgt.files.length;x<l;x++){acD=bgt.files[x];if(parseInt(acD.revision,10)>aON){if(tH.currentFolder.files[acD.quickkey]){aQO(tH.currentFolder.files[acD.quickkey]);bhk=true;}}}}}if(arO.response.updated){var bhi=arO.response.updated,bfS="",bgu="";if(bhi.folders&&bhi.folders.length>0){for(x=0,l=bhi.folders.length;x<l;x++){adj=bhi.folders[x];if(parseInt(adj.revision,10)>aON&&adj.parent_folderkey==afx){bfS+=","+adj.folderkey;}if(tH.currentFolder.folders[adj.folderkey]&&adj.parent_folderkey!=afx){aQO(tH.currentFolder.folders[adj.folderkey]);bhk=true;}}if(bfS)tH.yJ.asi(bfS.substring(1),function(arO,bgp,ado){if(arO.response.folder_infos){$.each(arO.response.folder_infos,function(x,bhr){bhk=bfY(bhr,true);});}if(arO.response.folder_info){bhk=bfY(arO.response.folder_info,true);}},true);}if(bhi.files&&bhi.files.length>0){for(x=0,l=bhi.files.length;x<l;x++){acD=bhi.files[x];if(parseInt(acD.revision,10)>aON&&acD.parent_folderkey==afx){bgu+=","+acD.quickkey;}if(tH.currentFolder.files[acD.quickkey]&&acD.parent_folderkey!=afx){aQO(tH.currentFolder.files[acD.quickkey]);bhk=true;}}if(bgu)tH.Cp.asi(bgu.substring(1),function(arO,bgp,ado){if(arO.response.file_infos){$.each(arO.response.file_infos,function(x,bgH){bhk=bgi(bgH);});}if(arO.response.file_info){bhk=bgi(arO.response.file_info);}});}}if(bhw>=arO.response.device_revision){tH.currentFolder.revision_number=parseInt(arO.response.device_revision,10);tH.folders.Yx(Bj,tH.currentFolder);if(localStorage)localStorage["REVISION_NUM-"+Bj]=arO.response.device_revision;}else{tH.currentFolder.revision_number=bhw;tH.folders.Yx(Bj,tH.currentFolder);if(localStorage)localStorage["REVISION_NUM-"+Bj]=""+bhw+"";bhD(Bj,RC);}if(bhk){var bfN=window.aLo();bfN.aIX(Bj);}}},error:function(RF){if(RF.readyState===0||RF.responseText===''){if(!RA){if(RB<(RC||3)){RB++;tH.aVJ=setTimeout(function(){FI(qN,RC,afd);},5000);}else{RB=0;RA="set";aU('user-network-ping-failed',RA,3600);QS('Network Unavailable','<p>Your network connection is unavailable.</p><br><p>MediaFire requires a network connection to function properly.</p>',[["close","Close","grey"],['retry',"Retry","btn secondary",'FI']]);}}}else{RB=0;if(RA){RA="";aY('user-network-ping-failed',RA);if(baD('message_dialog_div')){QU();}}var aVg=jQuery.parseJSON(RF.responseText);if(aVg&&aVg.response.error===105){LF.ahE();clearInterval(agb);agb=0;}}}});ajo=false;};function FI(qN,RC,afd,MYF_bOverride){return;if(aL('mfloggedoff')=='true'&&typeof UserLogin!='undefined'&&UserLogin==1){window.localStorage&&localStorage.clear();top.location='/logout.php';return;}if(tH.aVJ){clearInterval(tH.aVJ);tH.aVJ=null;}if(aXX()||typeof aEQ!='undefined'||afv())return;if(!qN&&qN!=0&&window.tH.currentFolder){qN=window.tH.currentFolder.folderkey;}if(!qN)return;bhD(qN,RC,afd,MYF_bOverride);return;};function FF(){if(typeof MFUL!=="undefined"&&typeof MFUL.aUploaders!=="undefined"){for(var i=0,aRh=MFUL.aUploaders.length;i<aRh;i++){if(MFUL.aUploaders[i].fF()===true)return true;}}return false;};function aTd(acm,aSF){var aTt=(aSF=="file")?"filename":"name",aBn="#"+aSF+"-"+acm,aTV=$.trim($(aBn).find(".updatename").val()),MYF_aBaseFolder=window.tH.currentFolder;if(afv()){MYF_aBaseFolder={};MYF_aBaseFolder.folders={};MYF_aBaseFolder.files={};$.each(window.tH.XE,function(x,Lu){if(typeof Lu!='undefined'&&Lu){if(Lu.filename)MYF_aBaseFolder.files[Lu.quickkey]=Lu;else MYF_aBaseFolder.folders[Lu.folderkey]=Lu;}});}var aSr=MYF_aBaseFolder[aSF+"s"][acm][aTt];if(aTV!==aSr&&aTV.split('.')[0].length>0){var aSo={};aSo[(aTt=="filename")?aTt:"foldername"]=aTV;if(aSF=="file")LF.aal(aSo,acm);else LF.aal(aSo,"",acm);}aTP();};function aTP(aBn){if(tH.Pz)var aBn=tH.Pz;tH.Pz=false;$(aBn).find(".filename_outer a.foldername").show();$(aBn).find(".filename_outer input").hide();$(aBn).find(".updatename").unbind("keydown").unbind("clickoutside");$(aBn).attr('draggable',true);return false;};function aTn(acm,aSF){if(UO()){if(aSF=="folder")GH.abC.open(acm,"name");else GH.aby.open(acm,"name");return;}function aVM(aUW,aVc){aUW=aUW.trim();var aVm=Gm(aUW),aUl=(aVm.length>0)?aVm.length+1:0,aVe=aUW.length-aUl;if(aVc.setSelectionRange){aVc.setSelectionRange(0,aVe);aVc.focus();}};var aTt=(aSF=="file")?"filename":"foldername",aBn="#"+aSF+"-"+acm;tH.Pz=aBn;$(aBn).find(".filename_outer input").val($(aBn).find(".item-name").text());$(aBn).find(".filename_outer a.foldername").hide();$(aBn).find(".filename_outer input").show();aVM($(aBn).find("a.foldername").text(),document.getElementById("rename-"+acm));$(aBn).attr('draggable',false);$(aBn).find(".updatename").bind("keydown","esc",function(){aTP(aBn);}).bind("clickoutside",function(e){aTd(acm,aSF);}).bind("keydown","return",function(){aTd(acm,aSF);});};function ahr(HU,FG,sFileType,oSelectElement){var bnX=oSelectElement.selectedIndex;var bok=adv("view/?"+FG);var boR=adv(true,'convkey',HU.substr(0,4),FG+bnX+'g.jpg');var aZR=(sFileType=='image')?adv("i/?"+FG):adv("?"+FG);var boF='';var bfR='';if(sFileType=='image'){bfR='<a href="'+bok+'" target="_blank"><img src="'+boR+'" border="0" alt="Simple, Free Image and File Hosting at MediaFire" /></a>';boF='[URL='+bok+'][IMG]'+boR+'[/IMG][/URL]';}else{bfR='<a href="'+aZR+'" target="_blank">'+aZR+'</a>';boF='[URL='+aZR+']'+aZR+'[/URL]';}$('#htmlembedcode').val(bfR);$('#forumembedcode').val(boF);};function anD(aZL){return aCf(aZL);};function aqG(){$('li.file').each(function(){if($('li#file-'+$(this).data('key')).length>1){$('li#file-'+$(this).data('key')).last().remove();}});};function aqV(){$('li.folder').each(function(){if($('li#folder-'+$(this).data('key')).length>1){$('li#folder-'+$(this).data('key')).last().remove();}});};if(typeof arw=="undefined"){arw=3000;}if(!iW){var iW=10;}function aCD(aZL,bnU,iSizeReady){if(bnU!==2)return;$.each(aBF,function(x,acm){if(acm==aZL.quickkey+"-"+iSizeReady)aBF.splice(x,1);});if(iSizeReady==2){window.tH.files.memory[aZL.quickkey].thumb1ready=true;if(typeof window.tH.aRp=="undefined")window.tH.aRp={};window.tH.aRp[aZL.quickkey]=true;}else if(iSizeReady==1){window.tH.files.memory[aZL.quickkey].thumb2ready=true;if(typeof window.tH.aRE=="undefined")window.tH.aRE={};window.tH.aRE[aZL.quickkey]=true;}else if(iSizeReady==0){window.tH.files.memory[aZL.quickkey].thumb3ready=true;if(typeof window.tH.aRK=="undefined")window.tH.aRK={};window.tH.aRK[aZL.quickkey]=true;}var aCM,Lu;if((aCM=window.tH.files.memory[aZL.quickkey].itemrownum)&&(Lu=window.tH.aca[aCM])&&Lu.quickkey==aZL.quickkey){window.tH.aca[aCM]=window.tH.files.memory[aZL.quickkey];}$.publish("document/update",[window.tH.files.memory[aZL.quickkey]]);};function aRF(){if(!window.Worker)return;if(typeof aEY=="undefined")aEY={};var aRH=window.tH.currentFolder.folderkey,aAI=Uo();if(!aEY[aRH+"-"+aAI]){var sStatusWorkerUrl='/js/doc_thumb_status.js';if(typeof JS_LoadTime!='undefined')sStatusWorkerUrl='/js/doc_thumb_status_'+JS_LoadTime+'.js';aEY[aRH+"-"+aAI]=new Worker(sStatusWorkerUrl);aEY[aRH+"-"+aAI].onmessage=function(event){switch(event.data.cmd){case 'script-error':break;case 'update-file':var dn=window.tH.files.yx(event.data.quickkey);aCD(dn,event.data.status,event.data.thumbsize);break;}};}};function Uo(){var apw=0;if($("#myfiles_wrap").hasClass("sizeM")||aL('mfsize')=="M")apw=1;if($("#myfiles_wrap").hasClass("sizeS")||aL('mfsize')=="S")apw=2;return apw;};var aBF=[];function aCs(aZL,Xi){function aRD(aZL){if(!aQu)aQu=1024*1024*50;if(aZL.size>aQu)return true;else return false;};function aRV(aZL,iCurrentSize){if(iCurrentSize==2&&(aZL.thumb1ready||(window.tH.aRp&&window.tH.aRp[aZL.quickkey])))return true;if(iCurrentSize==1&&(aZL.thumb2ready||(window.tH.aRE&&window.tH.aRE[aZL.quickkey])))return true;if(iCurrentSize==0&&(aZL.thumb3ready||(window.tH.aRK&&window.tH.aRK[aZL.quickkey])))return true;return false;};function aBC(aZL){if(typeof aEY=='undefined')aEY={};aRF();var aAI=Uo();if(aEY[aZL.parent.folderkey+"-"+aAI]&& !aZL.doc_status_check){var oTempFile={quickkey:aZL.quickkey,hash:aZL.hash,thumbsize:Uo(),url:aBM(aZL.quickkey,aZL.hash,true,Uo()),maxchecks:iW};aZL.doc_status_check=true;window.tH.files.Yx(aZL.quickkey,aZL);aEY[aZL.parent.folderkey+"-"+aAI].postMessage({cmd:'check-status',file:oTempFile});}else if($.browser.msie&&window.XDomainRequest&& !aZL.doc_status_check){var Vh=Uo(),baz=new XDomainRequest();baz.open("get",aBM(aZL.quickkey,aZL.hash,true,Vh));baz.onload=function(){Vh=Uo();var arO=$.parseJSON(baz.responseText);if(arO.page_status=="COMPLETE"){aCD(aZL,2,Vh);}else if(arO.document_status=="ERROR"||arO.page_status=="ERROR"){aCD(aZL,32768,Vh);}else{aBk(aZL);}};baz.onerror=function(){aBk(aZL);};aZL.doc_status_check=true;window.tH.files.Yx(aZL.quickkey,aZL);setTimeout(function(){baz.send();},0);}else{Vh=0;if($("#myfiles_wrap").hasClass("sizeM"))Vh=1;if($("#myfiles_wrap").hasClass("sizeS"))Vh=2;aCD(aZL,2,Vh);}};function aBv(dn){var ayY=new window.tH.Cp(dn.quickkey);ayY.Yw(function(){aCs(ayY);});};function ZY(dn){var YN=false;var Vh=Uo();$.each(aBF,function(x,fO){if(fO==dn.quickkey+"-"+Vh){YN=true;}});if(!YN)aBF.push(dn.quickkey+"-"+Vh);return YN;};function aBk(aZL){if(typeof aZL.docCheckCount=="undefined")aZL.docCheckCount=0;else aZL.docCheckCount++;if(aZL.docCheckCount<iW){setTimeout(function(){if($('#myfiles_wrap').hasClass("thumbnailView")){aZL.doc_status_check=false;aCs(aZL,true);}},arw);}else{aCD(aZL,32768);}};function aaX(aZL){$('#file-'+aZL.quickkey).find('.itemThumbnail').css('background-image','none').addClass('processing');};if(aRD(aZL))return;if(!aCz(aZL))return;if(!aZL.quickkey)return;if(ZY(aZL)&& !Xi)return;if(!aZL.hash||aZL.hash==''){aBv(aZL);return;}aBC(aZL);};function aRX(aZL){if(!window.tH.Cp.Zo(aZL))return false;if(aZL.parent.folderkey!=window.tH.currentFolder.folderkey)return false;if(!UO()&&aL('thumbview')!='on')return false;if(aZL.filetype=='image'|| !aCf(aZL))return false;if($("#myfiles_wrap").hasClass('sizeS')&&(aZL.thumb1ready||(window.tH.aRp&&window.tH.aRp[aZL.quickkey]))){return false;}if($("#myfiles_wrap").hasClass('sizeM')&&(aZL.thumb2ready||(window.tH.aRE&&window.tH.aRE[aZL.quickkey]))){return false;}if($("#myfiles_wrap").hasClass('sizeL')&&(aZL.thumb3ready||(window.tH.aRK&&window.tH.aRK[aZL.quickkey]))){return false;}return true;};function aCz(aZL){return(aZL.filetype=='document'||aZL.filetype=='spreadsheet'||aZL.filetype=='presentation');};function aFi(){if(window.tH.aFA)return true;};function aCf(aZL){if(aZL.flag&&avH(aZL.flag,2)==1){return(aZL.filetype&&aZL.filetype==='image');}return false;};function aGe(aZL){if(aZL.flag&&avH(aZL.flag,4)==1){return(aZL.mimetype&&aZL.mimetype!=='text/rtf'&&aZL.mimetype.indexOf('text/')===0);}return false;};function aTB(aiK){return(aiK.flag&&avH(aiK.flag,1)==1);};function aEh(){$("#contactViewToggle").show().click(function(){aCV();return false;});aDf();};function aCV(){if(typeof aBa=="undefined")aBa=false;if(aBa===true)return false;aBa=true;if(parseInt($('#contactSidebar').css('right'))==0){$("#contactViewToggle").removeClass('cvtActive');$('#contactSidebar').animate({right: -160},{complete:function(){aBa=false;}});}else{$("#contactViewToggle").addClass('cvtActive');$('#contactSidebar').animate({right:0},{complete:function(){aBa=false;}});}return false;};function aDo(){var aDN=[{text:"Delete Contact",command:"delete-contact",type:"contact"},{text:"Edit Contact",command:"edit-contact",type:"contact"},{text:"Add to Group",command:"add-to-group",type:"contact"},{text:"View Share Log",command:"share-log",type:"contact"},{text:"Clear Notifications",command:"clear-notices",type:"contact"},{text:"Remove Group",command:"remove-group",type:"group"},{text:"Edit Group",command:"edit-group",type:"group"}];var aEs='<div id="contact_contextmenu" class="dropdown" style="position:absolute">';$.each(aDN,function(x,aCU){if(x==0||aDN[x-1].type!=aCU.type){aEs+='<ul id="contextmenu-contactlist-'+aCU.type+'">';}aEs+='<li data-command="'+aCU.command+'">'+aCU.text+'</li>';if(x==aDN.length-1||aDN[x+1].type!=aCU.type){aEs+='</ul>';}});aEs+='</div>';$('body').append($(aEs));};function aDE(){$('#contactSidebar ul#contactList li').bind({draghover:function(e){$(this).toggleClass("contactHighlight",e.enter);aeV(e);},drop:function(e){var items;if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"))){if(items.files||items.folders){var aCu=$(this).data("contactid");var aAW=[];if(items.folders)$.each(items.folders.split(),function(x,afA){if(afA&&afA!=''&&afA!='NOKEY')aAW.push(afA);});if(items.files)$.each(items.files.split(),function(x,aBz){if(aBz&&aBz!=''&&aBz!='NOKEY')aAW.push(aBz);});if(aAW.length==0){Zi(0,'Unable to share this item due to an invalid folder/file.');$(this).removeClass('contactHighlight');aeV(e);return false;}var aBm=aAW.join();aDI(aBm,aCu);}$(this).removeClass('contactHighlight');aeV(e);return false;}}},click:function(){var aCu=$(this).data("contactid");var aBR=window.tH.userinfo.contacts['contact-'+aCu];Zi(0,"You clicked on "+aBR.contact_name+". Unfortunately, this feature is not currently available.");},contextmenu:function(e){var mode,data,$this=$(this);mode="contact";data=$this.attr("data-contactid");if(!window.aEN)window.aEN=new aEk();aEN.open("contactlist",mode,aiH(e,-2,-2),data);aeV(e);return false;}});$('#contactSidebar ul#groupList li').bind({draghover:function(e){$(this).toggleClass("contactHighlight",e.enter);aeV(e);},drop:function(e){var items;if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"))){if(items.files||items.folders){Zi(0,'Sharing to contact groups is not available, yet.');}$(this).removeClass('contactHighlight');aeV(e);return false;}}},click:function(){var aCu=$(this).data("contactid");var aBR=window.tH.userinfo.contacts['contact-'+aCu];Zi(0,"You clicked on "+aBR.contact_name+". Unfortunately, this feature is not currently available.");},contextmenu:function(e){var mode,data,$this=$(this);mode="group";data=$this.attr("data-id");if(!window.aEN)window.aEN=new aEk();aEN.open("contactlist",mode,aiH(e,-2,-2),data);aeV(e);return false;}});};function aEk(){var $root=$("#contact_contextmenu");function open(context,mode,pos,data){aDa();if(mode=="contact"){var aDn=aCT(data);}var $menu=$(["#contextmenu",context,mode].join("-")).show().closest(".dropdown").data("context",data);$(["#contextmenu",context,mode].join("-")).trigger("CTC_BeforeOpen");$root.show().css(pos);$(["#contextmenu",context,mode].join("-")).trigger("CTC_AfterOpen");};function aDa(){$root.hide().children("ul").hide().removeData("context");$(".row_context").removeClass("row_context");$root.removeClass('fixed');};function CD(){if($root.is(":visible")){aoh();}else{open.apply(null,arguments);}};function Wn(em){var CZ=parseInt(em.parent().css('top'));var iLeft=parseInt(em.parent().css('left'));if((em.height()+CZ-$(window).scrollTop()>$(window).height())&&(CZ-em.height()>=0)){em.parent().css('top',CZ-em.height()+4);}if(em.width()+iLeft>$(window).width()&&(iLeft-em.width()>=0)){em.parent().css('left',iLeft-em.width()+4);}if(em.parent().hasClass('fixed')){em.parent().css('top',parseInt(em.parent().css('top'))-parseInt($(window).scrollTop()));}};function anX(WQ){var CZ=parseInt(WQ.parent().parent().parent().css('top'))+100;var iLeft=parseInt(WQ.parent().parent().parent().css('left'))+100;if((80+CZ-$(window).scrollTop()>$(window).height())&&(CZ-WQ.height()>=0)){WQ.css('top',-45);}else{WQ.css('top',0);}if(205+iLeft>$(window).width()&&(iLeft-205>=0)){WQ.css('left','55%');}else{WQ.css('left','100%');}};$root.bind("clickoutside",aDa);$("#contextmenu-contactlist-contact").bind("CTC_BeforeOpen",function(){var $this=$(this),alo=$this.closest(".dropdown").data("context"),aDn=aCT(alo);$("#contact-"+alo).addClass("row_context");}).bind("CTC_AfterOpen",function(){var $this=$(this),alo=$this.closest(".dropdown").data("context"),aDn=aCT(alo);Wn($this);if(!aDn){return false;}}).delegate("li[data-command]","click",function(e){var $this=$(this),cmd=$this.data("command"),quickkey=$this.closest(".dropdown").data("context");Zi(0,"The '"+$this.text()+"' command has not yet been enabled. Please check back again later.");switch(cmd){case "delete-contact":break;case "edit-contact":break;case "add-to-group":break;case "share-log":break;case "clear-notices":break;default:break;}aDa();aeV(e);}).delegate(".dropdown li.submenu","mouseenter",function(e){anX(em);aeV(e);}).delegate(".dropdown li.submenu","mouseleave",function(e){aeV(e);});$("#contextmenu-contactlist-group").bind("CTC_BeforeOpen",function(){var $this=$(this),alo=$this.closest(".dropdown").data("context"),aDn=aCT(alo);$("#contact-"+alo).addClass("row_context");}).bind("CTC_AfterOpen",function(){var $this=$(this),alo=$this.closest(".dropdown").data("context"),aDn=aCT(alo);Wn($this);if(!aDn){return false;}}).delegate("li[data-command]","click",function(e){var $this=$(this),cmd=$this.data("command"),quickkey=$this.closest(".dropdown").data("context");Zi(0,"The '"+$this.text()+"' command has not yet been enabled. Please check back again later.");switch(cmd){case "remove-group":break;case "edit-group":break;default:break;}aDa();aeV(e);}).delegate(".dropdown li.submenu","mouseenter",function(e){anX(em);aeV(e);}).delegate(".dropdown li.submenu","mouseleave",function(e){aeV(e);});return{open:open,CD:CD,aDa:aDa};};function aCT(alo){return(window.tH.userinfo.contacts['contact-'+alo])?window.tH.userinfo.contacts['contact-'+alo]:false;};function aDI(aBm,aCu){var aBR=window.tH.userinfo.contacts['contact-'+aCu];var aBL=aBm.split().length;var avV={success:function(Ha){if(aBL==1)Zi(0,'You\'ve successfully shared '+aBL+' file/folder with '+aBR.contact_name);else Zi(0,'You\'ve successfully shared '+aBL+' files/folders with '+aBR.contact_name);$.publish('selection/deselectall');},error:function(Ha){if(aBL==1)Zi(0,'Sorry. An error ocurred. We can\'t share this item at this time');else Zi(0,'Sorry. An error ocurred. We can\'t share these items at this time');$.publish('selection/deselectall');}};var aBu=new window.tH.aCa(window.aCQ||0);aBu.hH({'data':{'resources':aBm,'contacts':aCu}},avV);};function aCy(){var aCc=$(window).height()-89-28;var aDg=$(document).height()-$(window).scrollTop()-$('#footer').height();if(aDg<$(window).height())aCc=aDg-89-28;$('#contactSidebar').height(aCc);};function aDC(){$(window).bind('resize scroll',function(){aCy();});$.subscribe('folder/render',function(){aCy();});};function aBy(){return(window.tH.userinfo&&window.tH.userinfo.contacts)?true:false;};function aDf(){var aDK=[{text:"Add Contacts",command:"add-contact"},{text:"Import Contacts",command:"import-contacts"}];var aDW="";$.each(aDK,function(x,aEK){aDW+="<li data-command='"+aEK.command+"'>"+aEK.text+"</li>";});$('#contactSettings ul').html(aDW);$('#contactSidebar').find('.dropdown').dropdown({command:function(aCb,aBn){switch(aCb){case "add-contact":aDS();break;case "import-contacts":aDY();break;}}});};function aDY(){if($('#import-contacts').length==0){var aDr=window.tmpl("pop_import_contacts");var aDs=aDr();$('#popup-section').append($(aDs));}if(!window.aDy)window.aDy=new aEI();window.aDy.open();};function aEI(){var $popup=$("#import-contacts").popup(),popup=$popup.data("popup");function open(){$('div[id^="MediaFireUploaderSWFDiv"]').hide();popup.open();};$popup.delegate(".close","click",function(e){popup.close();});$popup.delegate("#add_contact_mediafire .confirm","click",function(e){return false;});$popup.delegate(".tabs li[data-tab]","click",function(e){aij("#share_socialnetworks_message","#sharebox-social .share-facebook .remaining",$("#fb_share_checkbox").data("input-length"),true,function(){return $("#fb_share_checkbox").is(":checked");});aij("#share_socialnetworks_message","#sharebox-social .share-twitter .remaining",$("#tw_share_checkbox").data("input-length"),true,function(){return $("#tw_share_checkbox").is(":checked");});aij("#email_files_message","#sharebox-email .remaining",128,true);aeV(e);});return{open:open,popup:popup,close:popup.close};};function aDS(){if($('#add-contact').length==0){var aEd=window.tmpl("pop_new_contact");var aDs=aEd();$('#popup-section').append($(aDs));}if(!window.aDp)window.aDp=new aDe();window.aDp.open();};function aDe(){var $popup=$("#add-contact").popup(),popup=$popup.data("popup");function open(){$('div[id^="MediaFireUploaderSWFDiv"]').hide();popup.open();};$popup.delegate(".close","click",function(e){popup.close();});$popup.delegate("#add_contact_mediafire .confirm","click",function(e){var avV={success:function(Ha){},error:function(Ha){}};var aBR=new window.tH.aBS();var aEt=$('#details-contact-email').val();aBR.ZD({data:{contact_type:'mediafire',mediafire_email:aEt}},avV);});return{open:open,popup:popup,close:popup.close};};function aDP(){if(!aBy())return;var aCm=0;$.each(window.tH.userinfo.contacts,function(x,aBR){if(aBR.mediafire)aCm++;});if(aCm>1)$('#groupList li[data-id="mf"]').find('.groupNumbers').text(aCm+" Contacts");else if(aCm==1)$('#groupList li[data-id="mf"]').find('.groupNumbers').text(aCm+" Contact");};function aEe(){if(!aDR())return;$.each(window.tH.userinfo.notifications,function(x,aBd){if(aBy()&&aBd.sender&&aBd.sender.email){$.each(window.tH.userinfo.contacts,function(x,aBR){if(aBR.mediafire&&aBR.mediafire.email&&aBR.mediafire.email==aBd.sender.email)aCY(aBd,aBR);});}});aEE();};function aDR(){return(window.tH.userinfo&&window.tH.userinfo.notifications)?true:false;};function aCY(aBd,aBR){if(!aBd|| !aBR)return;if(!aBR.notices)aBR.notices=[];var aAX=false;$.each(aBR.notices,function(x,aEa){if(aEa.id==aBd.id)aAX=true;});if(aAX==false)aBR.notices.push(aBd);};function aEE(){if(!aBy())return;$('#contactList li').each(function(){var aCu=$(this).data('contactid');var aBR=window.tH.userinfo.contacts['contact-'+aCu];if(aBR.notices&&aBR.notices.length>0){$(this).find('.contactNotices').text(aBR.notices.length);$(this).addClass('hasNotices');}else{$(this).removeClass('hasNotices');}});};function aBU(aCt){if(!aCt)return;if(typeof aCt.index=="undefined"&&aCt.folders&&aCt.folders.length>0){$.each(aCt.folders,function(x,aCK){aBU(aCK);});return;}var aBQ='';if(aCt.folders)$.each(aCt.folders,function(x,aDH){aBQ+=aEF(aDH);});if(aCt.files)$.each(aCt.files,function(x,aDG){aBQ+=aEl(aDG);});$("ol#main_list").html(aBQ);if(!window.aDO)window.aDO={};window.aDO=aCt;aEm(aCt);aEC();};function aEC(){$('ol#main_list.device li.folder .filename_outer a, ol#main_list.device li.folder .filetype_column a').unbind('click');$('ol#main_list.device li.folder .filename_outer a, ol#main_list.device li.folder .filetype_column a').bind('click',function(e){aDq($(this).closest('li').data('index'));aeV(e);return false;});};function aCZ(){var aBr='<li id="file-#QUICKKEY#" draggable="true" data-key="#QUICKKEY#" data-index="#FILE_INDEX#" class="row_container mf_filecontainer file #FILETYPE#  public row_context"><div class="grip_column"><div class="checkbox-custom" title="Select/Deselect Item"></div><img class="dragfile_icon" width="30" height="45" src="/images/icons/1x1_transparent.gif" border="0"></div><div class="filetype_column"><a href="/download.php?#QUICKKEY#" onclick="window.MYF_DirectDownload({files: \'#QUICKKEY#\'}); return false;"><span class="filetype-#FILETYPE#"></span></a></div><div class="btns_column"><div></div><div><a href="javascript:void(0);" class="fileoptions btn secondary" title="Open actions menu"><span class="ico16 gear"></span></a></div><div><a href="#FILEURL#" target="_blank" class="previewBtn showonhover btn secondary" title="Preview"><span class="ico16 previewBtn"></span></a></div><div>    <a href="javascript:void(0);" class="download btn secondary" title="Download"><span class="ico16 download"></span></a></div><div class="sharebtn-wrap"><a href="javascript:void(0);" class="share btn secondary" title="Share"><span class="ico16 users"></span></a></div><div class="imgpreviewonly"><a href="javascript:void(0);" class="imgopenpreview btn secondary" title="Open image preview"><span class="ico16 zoom-in"></span></a></div></div><div class="info"><div class="filename_outer"><a class="foldername" href="#FILEURL#" onclick="">#FILENAME#</a><div class="private-label">Private</div><div class="password-protected-label">Password</div></div><div class="file_maindetails_outer cf"><span class="file_maindetails"><span>#CREATED_TIME#,</span> #FILESIZE#</span><span class="statusicons"><span class="private"><a href="javascript:void(0);" title="File is private. Click here to add this file to your public gallery pages."><span class="ico16 lock"></span></a></span><span class="public"><a href="javascript:void(0);" title="File is public. Click here to hide this file from your public gallery pages."><span class="ico16 unlock"></span></a></span><span class="password"><a href="javascript:void(0);" title="This file is currently password protected. Click to remove."><span class="ico16 security"></span></a></span></span></div></div><div class="infobox_lg tooltip point-left"><span class="infobox-fileicon filetype-#FILETYPE#"></span><h4>#FILENAME#<span class="infobox-stats">Added: #CREATED_TIME#, #FILESIZE#</span></h4></div><div style="clear: both;"></div></li>';return aBr;};function aDT(){var aBr='<li id="folder-#FOLDER_KEY#" draggable="true" data-key="#FOLDER_KEY#" data-index="#FOLDER_INDEX#" class="row_container mf_filecontainer folder public cf" linked=""><div class="grip_column"><div class="checkbox-custom" title="Select/Deselect Item"></div><img class="dragfile_icon" width="30" height="45" src="/images/icons/1x1_transparent.gif" border="0"></div><div class="filetype_column"><a href="##FOLDER_KEY#"><span class="filetype-folder"></span></a></div><div class="btns_column"><div><a href="javascript:void(0);" class="fileoptions btn secondary" title="Open actions menu"><span class="ico16 gear"></span></a></div><div><a href="javascript:void(0);" class="download btn secondary" title="Download"><span class="ico16 download"></span></a></div><div class="sharebtn-wrap"><a href="javascript:void(0);" class="share btn secondary" title="Share"><span class="ico16 users"></span></a></div></div><div class="info cf"><div class="filename_outer"><a class="foldername" href="##FOLDER_KEY#">#FOLDER_NAME#</a><div class="private-label">Private</div></div><div class="file_maindetails_outer cf"><span class="file_maindetails">#CREATED_TIME##FOLDERS_NUM# Folders, #FILES_NUM# Files</span><span class="statusicons"><span class="dropbox" id="dropbox-icon-wzm927w9jax63"><a href="javascript:void(0);" title="This folder is a FileDrop. Click to edit FileDrop settings" onclick="zW(\'#FOLDER_KEY#\'); return false;"><span class="ico16 dropbox"></span></a></span><span class="private"><a href="javascript:void(0);" title="File is private. Click here to add this file to your public gallery pages."><span class="ico16 lock"></span></a></span><span class="public"><a href="javascript:void(0);" title="File is public. Click here to hide this file from your public gallery pages."><span class="ico16 unlock"></span></a></span></span></div></div><div class="infobox_lg tooltip point-left"><span class="infobox-fileicon filetype-folder"></span><h4>#FOLDER_NAME#<span class="infobox-stats">#CREATED_TIME#, #FOLDERS_NUM# Folders, #FILES_NUM# Files</span></h4></div><div style="clear: both;"></div></li>';return aBr;};function aEl(aCG){var aCx=aCZ();var MYF_sFileUrl='/download.php?'+aCG.quickkey;if(aCf(aCG.name)&&aCG.filetype=="image"){MYF_sFileUrl="/view/?"+aCG.quickkey;}else if(aCf(aCG.name)){MYF_sFileUrl="/view/?"+aCG.quickkey;}aCx=aCx.replace(RegExp("#FILEURL#","gi"),MYF_sFileUrl);aCx=aCx.replace(RegExp("#FILE_INDEX#","gi"),aCG.index);aCx=aCx.replace(RegExp("#QUICKKEY#","gi"),aCG.quickkey);aCx=aCx.replace(RegExp("#FILENAME#","gi"),aCG.name);aCx=aCx.replace(RegExp("#CREATED_TIME#","gi"),aCG.added);aCx=aCx.replace(RegExp("#FILESIZE#","gi"),formatBytes(aCG.size));aCx=aCx.replace(RegExp("#FILETYPE#","gi"),aCG.filetype);return aCx;};function aEF(aCt){var aBN=aDT();aBN=aBN.replace(RegExp("#FOLDER_INDEX#","gi"),aCt.index);aBN=aBN.replace(RegExp("#FOLDER_KEY#","gi"),aCt.folderkey||'NOKEY');aBN=aBN.replace(RegExp("#FOLDER_NAME#","gi"),aCt.name);aBN=aBN.replace(RegExp("#CREATED_TIME#","gi"),(!aCt.added)?'':aCt.added+', ');aBN=aBN.replace(RegExp("#FOLDERS_NUM#","gi"),(!aCt.folders)?0:aCt.folders.length||0);aBN=aBN.replace(RegExp("#FILES_NUM#","gi"),(!aCt.files)?0:aCt.files.length||0);return aBN;};function aDq(aBp){var aCt=aEA(aBp);aBU(aCt);return false;};function aEA(aBp){return window.tH.userinfo.devices['device-'+window.aCQ].allfolders[aBp];};function aDJ(){return(window.tH.userinfo&&window.tH.userinfo.devices&&window.tH.userinfo.devices['device-'+window.aCQ]&&window.tH.userinfo.devices['device-'+window.aCQ].content)?true:false;};function aEu(){if(!aDJ())return;var aCq='';$.each(window.tH.userinfo.devices['device-'+window.aCQ].content.folders,function(x,aCt){aCq+=aBg(aCt);});$('.folderlist_content ul.device').html(aCq);setTimeout(function(){$(window).resize();},100);aDw();};function aBg(aCt){var aCq='';if(typeof aCt.index=="undefined"&&aCt.folders&&aCt.folders.length>0){$.each(aCt.folders,function(x,aCK){aCq+=aBg(aCK);});return aCq;}aCq+="<li id='nav-"+aCt.index+"' class='collapsed' data-folderkey='"+aCt.folderkey+"' data-index='"+aCt.index+"'>";if(aCt.folders&&aCt.folders.length>0)aCq+="<a class='folder_arrow' href='#'></a>";aCq+="<a href='javascript:void(0)' class='folder_name'>"+aCt.name+"</a>";if(aCt.folders&&aCt.folders.length>0){aCq+="<ul>";$.each(aCt.folders,function(x,aCK){aCq+=aBg(aCK,false);});aCq+="</ul>";}aCq+="</li>";return aCq;};function aDw(){$('.folderlist_content ul.device li, .folderlist_content ul.device li a.folder_arrow').unbind('click');$('.folderlist_content ul.device li').bind('click',function(){aDq($(this).data('index'));return false;});$('.folderlist_content ul.device li a.folder_arrow').bind('click',function(){if($(this).parent().hasClass("collapsed"))$(this).parent().removeClass("collapsed").addClass("expanded");else $(this).parent().removeClass("expanded").addClass("collapsed");return false;});};function aEm(aCt,aDX){$('.folderlist_content ul.device li').removeClass('expanded current_folder_location').addClass('collapsed');$('.folderlist_content ul.device li#nav-'+aCt.index).removeClass('collapsed').addClass('expanded current_folder_location').parents('li').addClass('expanded');};function aUi(folder){if(!folder.folderkey|| !tH.aHp||tH.aHp[folder.folderkey]){return false;}tH.aHp[folder.folderkey]=folder;Xb.amr(folder);};function aHJ(aGp,aIo){var aAr=function(){};if(aGp>100)aGp=100;if(aGp<0)aGp=0;if(aGp==0|| !aIo)aIo=0;if(aGp==100){clearTimeout(window.aHS);window.aHS=null;aAr=function(){$('#container').removeClass('mfloading');};aIo=250;}$('#mfload_progress_bar').stop().animate({width:Math.ceil(aGp)+'%'},aIo,aAr);};function fileSizeToString(size,declength,IG){var suffix=["B","KB","MB","GB","TB","PB"];var filesize=(size/Math.pow(1024,Math.floor(Math.log(size)/Math.log(1024)))).toFixed(declength);var JH=IG?" ":"";if(isNaN(filesize)||filesize==0)return '0'+JH+suffix[0];return filesize+JH+suffix[Math.floor(Math.log(size)/Math.log(1024))];};function MYF_WIDGET_STORAGE_calculateUsedStoragePercent(newUsedStorage){MYF_WIDGET_STORAGE_usedStorage=Math.max(parseInt(newUsedStorage,10),0);aXm=false;aWx=false;aXJ=false;if(MYF_WIDGET_STORAGE_usedStorage>=MYF_WIDGET_STORAGE_totalStorage)aXm=true;else if(MYF_WIDGET_STORAGE_totalStorage-MYF_WIDGET_STORAGE_usedStorage<=aXE)aWx=true;if(aXm)aWh=fileSizeToString(MYF_WIDGET_STORAGE_usedStorage-MYF_WIDGET_STORAGE_totalStorage);else aWh='';iUnroundedPercent=Math.min(parseFloat(MYF_WIDGET_STORAGE_usedStorage/MYF_WIDGET_STORAGE_totalStorage),1)*100;MYF_WIDGET_STORAGE_usedStoragePercent=(iUnroundedPercent>0&&iUnroundedPercent<1)?1:Math.round(iUnroundedPercent);};function MYF_WIDGET_STORAGE_updateStorageDisplay(){if(MYF_WIDGET_STORAGE_totalStorage){$("span#storage_used",top.document).text(fileSizeToString(MYF_WIDGET_STORAGE_usedStorage,1,true));$("span#storage_total",top.document).text(fileSizeToString(MYF_WIDGET_STORAGE_totalStorage,0,true));$("span#storage_not-applicable",top.document).hide();$("span#storage_applicable",top.document).show();}else{$("span#storage_applicable",top.document).hide();$("span#storage_not-applicable",top.document).show();}$('.smBarColor',top.document).animate({"width":MYF_WIDGET_STORAGE_usedStoragePercent+'%'},"slow",function(){if(aXq&&(aXm||aWx)){var aXV="smUpgradePromo";$(".smSpaceIndicator",top.document).addClass(aXV).find(".smUpgradeSpace").unbind("click").click(function(){window.location="/upgrade";return false;});if(aWx&&MYF_iAlreadyShownStorageUpsell!=1){var MYF_iAlreadyShownStorageUpsell=aL('storageupsellshown');aWg(null,true);aY('storageupsellshown',1,1);}else if(aXm){if(typeof aXB=="undefined"|| !aXB||(aXB&&aXB!=aWh)){window.aXB=aWh;aWg(null,false);}}}else{if(typeof aWo!="undefined")aWo=null;$(".smSpaceIndicator",top.document).removeClass("smUpgradePromo");}});aXa();};function MYF_WIDGET_STORAGE_fSetClickEvent(){if(aXq)$(".smSpaceIndicator",top.document).unbind("click").click(function(){window.open('/upgrade/');return false;});};function aWg(aXy,aSt,aZV){if(aSt&&aWx){var MYF_iAlreadyShownStorageUpsell=aL('storageupsellshown');if(MYF_iAlreadyShownStorageUpsell==1)return false;}LoadIframeLightbox("/templates/upgrade/storage_upsell.php",720,600,false,false,true,true);$("#modal_msg_iframe").load(function(){aXF(aXy,aZV);});return false;};function aXF(aXy,aZV){try{var aWf=$("#modal_msg_iframe").contents();aWf.find(".storageUpsell").removeClass("accountStorageGood accountStorageExceeded unknownExceededLimitActive uploadExceeded");if(aZV){aWf.find(".storageUpsell").addClass("unknownExceededLimitActive");}else if(aXy===true||aXm===true){aWf.find(".storageUpsell").addClass("accountStorageExceeded");aWf.find(".storageOverage").text(aWh);}else if(!aWx){aWf.find(".storageUpsell").addClass("accountStorageGood");}aWf.find(".storageUsed").text(fileSizeToString(MYF_WIDGET_STORAGE_usedStorage,2));aWf.find(".storageLimit, .fullStorage").text(fileSizeToString(MYF_WIDGET_STORAGE_totalStorage));aWf.find(".halfStorage").text(fileSizeToString(MYF_WIDGET_STORAGE_totalStorage/2));aWf.find(".upgradeAmount").text("$"+aXd+" more");}catch(e){}};function Wj(dk,Vt){var Ux=dk.status=='Transfer complete';Us=dk.uploadkey;$('#container').addClass('webUploadHeight');$('#webUploadIndicator').show();$('#webUploadStatus').text(dk.status);$('.webUploadIndicator .smBarColorWebUpload').css('width',dk.percentage+'%');var $oWebUploadIframe=$('#modal_msg_iframe');if($oWebUploadIframe.length>0){try{$oWebUploadIframeContents=$oWebUploadIframe.contents();$oWebUploadIframeContents.find('#white_info_box').hide();$oWebUploadIframeContents.find('.webu-error').text('');$oWebUploadIframeContents.find('#processing_message').hide();$oWebUploadIframeContents.find('#loadingmessage').hide();$oWebUploadIframeContents.find('#typeupload').hide();$oWebUploadIframeContents.find('#uploading_div_hideshow').show();$oWebUploadIframeContents.find('.webu-filename').text(dk.filename);$oWebUploadIframeContents.find('.webu-filesize').text(formatBytes(parseInt(dk.size,10)));$oWebUploadIframeContents.find('.webu-eta').text(dk.eta=='Transfer completed'?'Completed':dk.eta);$oWebUploadIframeContents.find('.webu-url').val(dk.url);$oWebUploadIframeContents.find('.webu-cancelcurrent').attr('href','/dynamic/deletewebupload.php?key='+Us);$oWebUploadIframeContents.find('.webu-percent').text(dk.percentage);$oWebUploadIframeContents.find('.webuploadprogressbar').css('width',dk.percentage+'%');if(dk.error_status=='39'){var us=$oWebUploadIframeContents.find('.webu-filestatus');if(us.text()!='Storage Limit Exceeded')Zi(1,"Error: the file at this url would exceed your storage limit.");us.text('Storage Limit Exceeded');$oWebUploadIframeContents.find('#white_info_box').hide();}else{var axM='There was an unknown error with the download.';var aAp={'0':'','10':'The file you tried to download to your account was too large.','11':'The file you tried to download to your account was too small.','15':'The remote server returned an HTTP error.','16':'The file could not be added to your account.','17':'The image you specified was too large to be stored on our service.','19':'There was a virus detected in the file we downloaded.','20':'The archive you requested is invalid and cannot be added to the site.','21':'The archive you requested is either password protected or has a CRC error.','22':'There was an unknown error downloading the archive.','27':'The requested filename is already in your account.','35':'Access was denied to the resource specified in the URL.','36':'The server specified is returning data too slowly.','37':'The file is taking too long to download.','38':'The download was interrupted.'};if(typeof aAp[dk.error_status]!=='undefined')axM=aAp[dk.error_status];$oWebUploadIframeContents.find('#white_info_box').toggle(axM!='');$oWebUploadIframeContents.find('.webu-filestatus').text(axM!=''?'Failed':dk.status);$oWebUploadIframeContents.find('.webu-error').text(axM);}$('.webu-filesize').parent().show();$oWebUploadIframeContents.find('#webupload_progress').toggle(!Ux);$oWebUploadIframeContents.find('.webu-clearcompleted').toggleClass('disabled',Vt>=10);$oWebUploadIframeContents.find('.webu-cancelcurrent').toggle(!Ux);}catch(e){}}if(Ux)Gv(false);};function Ur(aqX){var apd=function(a,b){var UM=parseInt(a.status_code,10),aaD=parseInt(b.status_code,10);return(UM<aaD)? -1:(UM>aaD)?1:0;};var adG=new window.tH.Dv();adG.Vu({all_web_uploads:'yes'},{success:function(ajz){if(ajz.response.web_uploads&&ajz.response.web_uploads.length>0){ajz.response.web_uploads.sort(apd);var dk=ajz.response.web_uploads[0];if(dk){var Vt=0;for(var i=0;i<ajz.response.web_uploads.length;i++){if(ajz.response.web_uploads[i].active=="yes")Vt++;}Wj(dk,Vt);}}else{Gv(true);}},error:function(){Gv(true);}});};var xC=null,Us='';function WC(WA){if(xC)clearInterval(xC);$('#webUploadStatus').text('Waiting to start');Ur();xC=setInterval(Ur,10000);var $oWebUploadIframe=$('#modal_msg_iframe');if($oWebUploadIframe.length>0){try{$oWebUploadIframeContents=$oWebUploadIframe.contents();if(!WA)$oWebUploadIframeContents.find('#webupload_container').show();else $oWebUploadIframeContents.find('#processing_message').show();}catch(e){}}};function Gv(Uv){if(!Uv)FI(null,null,null,true);Us='';$('#webUploadIndicator').hide();$('#container').removeClass('webUploadHeight');if(xC)clearInterval(xC);xC=null;var $oWebUploadIframe=$('#modal_msg_iframe');if($oWebUploadIframe.length>0){try{$oWebUploadIframeContents=$oWebUploadIframe.contents();$oWebUploadIframeContents.find('#processing_message').hide();$oWebUploadIframeContents.find('#loadingmessage').hide();$oWebUploadIframeContents.find('#typeupload').toggle(Uv);$oWebUploadIframeContents.find('#uploading_div_hideshow').toggle(!Uv);}catch(e){}}};function ahl(acS){if(acS.shared=="yes"||acS.shared=="child"){$.each(acS.folders||{},function(x,folder){folder.shared="child";ahl(folder);});$.each(acS.files||{},function(x,file){file.shared="child";});}};function ahd(){$.each(tH.folders.memory||{},function(x,folder){ahl(folder);});};function YV(root,MYF_bPartialLoad){var acR=ajC.aiu();var MYF_iTotalFilesActual=acR+parseInt(root.file_count||0);var abY=1;$.each(root.files||{},function(x,file){var f=new tH.Cp(file,root);tH.files.Yx(file.quickkey,f);acR++;abY++;if(abY==200){ajC.aje(acR);abY=1;}file.parent=root;$('#mfload_progress_bar').width((acR*100/parseInt(root.file_count))+"%");});if(MYF_bPartialLoad){ajC.aje(acR+1);}else{ajC.aje(MYF_iTotalFilesActual+1);}tH.folders.Yx(root.folderkey,root);};function atP(){var auD=1200;var atS=400;if(window.localStorage){localStorage.clear();tH.files.atY();tH.files.atG();tH.folders.atY();tH.folders.atG();$.each(tH.folders.memory,function(acm,adj){localStorage['folder-'+acm]=tH.yJ.WF(adj);});localStorage['user']=MYF_sUserEnc;var atH=function(atZ){for(var i=0;i<auD;i++){if(atZ.length){b=atZ.shift();localStorage['file-'+b]=tH.Cp.WF(tH.files.memory[b]);}}};var auP=new auV(ajm(tH.files.memory),atH,atS,100,true);auP.atR();}};var Pg={};var Ph="";function avn(items){if(!items||items.length==0)return;if(items[0]&&items[0].parent&&items[0].parent.folderkey&&items[0].parent.folderkey!=Ph){Ph=items[0].parent.folderkey;Pg={};}if(!tH.aca||tH.aca.length==0)Pg={};var aZD=(items[0].quickkey)?"files_"+items[0].parent_chunk:"folders_"+items[0].parent_chunk;if(!tH.aca||tH.aca.length==0||typeof Pg[aZD]=="undefined"){Pg[aZD]=true;if(typeof tH.aca=="undefined"){tH.aca=[];}$.each(items,function(x,item){item.itemrownum=tH.aca.length;tH.aca.push(item);if(item.quickkey){tH.files.Yx(item.quickkey,item);}else{tH.folders.Yx(item.folderkey,item);}var aRN=item.quickkey?item.quickkey:item.folderkey;if(tH.aSk==true&&item.shared!="yes"&&item.shared!="child")mainList.ZF(aRN);if(tH.aQX&&item.shared!="yes"&&item.shared!="child"){var aQX=tH.aQX;if(aQX=="folder"&&item.folderkey)mainList.ZF(item.folderkey);if(aQX=="file"&&item.quickkey)mainList.ZF(item.quickkey);if(aQX==item.filetype)mainList.ZF(item.quickkey);}});if(tH.aSk==true||tH.aQX)$.publish("list/selection");}};var bha=false,gk=null,ir=null,cN=null;function aHM(folder,type,sortby,order,chunk,aIT){if(!aIT){if(bha){if(folder.folderkey!=ir)cN={"folder":folder,"type":type,"sortby":sortby,"order":order,"chunk":chunk};if(!gk)gk=setTimeout(function(){bha=false;if(cN!=null){var ar=cN;cN=null;aHM(ar.folder,ar.type,ar.sortby,ar.order,ar.chunk);}gk=null;},3000);return;}bha=true;ir=folder.folderkey;tH.aca=[];delete tH.currentFolder.status;MYF_fShowSpinner('content');}var arO={data:{content_type:type,filter:filterBy,order_by:sortby,order_direction:order,chunk:chunk,version:APIVERSION}};var aHa=aLo();var bgx=folder.folderkey;aHa.aGU(folder,arO,{success:function(acS,aHl){tH.folders.Yx(acS.folderkey,acS);avn(aHl);if(aHl.length<aIl&& !aIT&&(filterBy=="all"||filterBy=="public"||filterBy=="private")&&cN==null){var aIL=(type=="folders")?"files":"folders";aHM(folder,aIL,sortby,order,chunk,true);}else{MYF_fHideSpinner('content');$.publish("folder/completed",folder);bha=false;if(cN==null){aHb(acS);}else{var ar=cN;cN=null;aHM(ar.folder,ar.type,ar.sortby,ar.order,ar.chunk);}}},error:function(ado,aco,aiN){bha=false;if(!ado)return;MYF_fHideSpinner('content');$.publish("folder/completed",folder);var ajz='',MYF_sErrCode='',dv='';if(aco!='abort'&&ado.responseText){ajz=JSON.parse(ado.responseText);MYF_sErrCode=ajz.response.error.toString();dv=ajz.response.message.toString();}if(MYF_sErrCode=='114'){if(folder.shared!='no'&&folder.shared!=''){Zi(0,"Permission denied.  This folder is no longer shared by its owner.");}else{Zi(0,"You do not have permissions to this folder.");}}else if(MYF_sErrCode==='112'){if(!aek&&folder.folderkey!=="myfiles"){window.location.hash="#myfiles";$(window).hashchange();}if(window.location.hash.length===13)Zi(0,dv);}else if(MYF_sErrCode=='293'){window.top.location="/error.php?errno=378";}else{Zi(0,"There was a problem while attempting to browse the folder. "+dv);}window.location.hash=tH.currentFolder.folderkey;}},atC);};function aaO(folder,ajJ,MYF_bForceReload){var bfv=false;if(folder.folderkey=='trash'){sortBy='name';bfv=true;bfi();Xb.bfg();}else{bff();}if(bfv){avn($.values(folder.folders).concat($.values(folder.files)));}else if(folder.share_type==='multiple_keys'){var Zd=$.values(folder.folders).sort(YT.folder[(sortBy=='created'?'created':'name')]),Zc=$.values(folder.files).sort(YT.file[sortBy]);$.each(Zd,function(x,acS){Zd[x]=tH.folders.yx(acS.folderkey);});tH.aca=Zd.concat(Zc);}aoP(tH.aca,ajJ);currentFolder=folder;tH.currentFolder=currentFolder;abM=currentFolder.folderkey;if(!aek&& !bfv)aU('mfcurrentFolder',currentFolder.folderkey,1800);if(!bfv&&currentFolder.folderkey)tH.currentFolder.parent=tH.folders.memory[currentFolder.folderkey].parent;if(aek){$('#fileDetails #folder_name').text(tH.currentFolder.name||'My Files').attr('title',tH.currentFolder.name||'My Files');}if(!aek&& !bfv){var bgx=currentFolder.folderkey;tH.aVJ=setTimeout(function(){if(bgx==currentFolder.folderkey)FI(currentFolder.folderkey);},1500);}if(currentFolder.folderkey=='myfiles'||(aek&&currentFolder.folderkey==afI)){if(!$("#main_files_container").hasClass("thisfolder_root")){$("#main_files_container").addClass("thisfolder_root");}if(!$("#container").hasClass("thisfolder_root")){$("#container").addClass("thisfolder_root");}}else{$("#main_files_container").removeClass("thisfolder_root");$("#container").removeClass("thisfolder_root");}if(aL('thumbview')=='on'){$('#viewtab2').click();}$.publish("folder/render",[folder]);if(bfv&&MYF_bForceReload){}};function aHb(folder){tH.currentFolder=folder;YV(folder);aaO(folder,null,true);$('title',document.head).text(folder.name);$.publish("folder/render",folder);bha=false;};function abH(folder,ajJ){tH.currentFolder=folder;var ayc={};var ayD=false;if(sortAscending==true&&(filterBy=="all"||filterBy=="public"||filterBy=="private"||filterBy=="folders")){aHy='asc';aGQ='folders';}else{aHy=(sortAscending)?'asc':'desc';aGQ=(filterBy=='folders')?'folders':'files';}if(folder.folderkey=='trash'){var aBu=new window.tH.aCa(window.aCQ||0);var MYF_iTrashFolderCount= -1;var MYF_iTrashFileCount= -1;var bec= -1;aBu.beN({data_only:'yes',content_type:'folders'},function(arO){if(!arO.response){return;}MYF_iTrashFolderCount=(parseInt(arO.response.folder_count,10)||0);if(MYF_iTrashFileCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');var st=tH.folders.memory['trash'];if(st){st.folderkey='trash',st.name='Trash',st.file_count=MYF_iTrashFileCount,st.folder_count=MYF_iTrashFolderCount,st.total_files=MYF_iTrashFileCount,st.total_folders=MYF_iTrashFolderCount}else{st=new tH.yJ({folderkey:'trash',name:'Trash',file_count:MYF_iTrashFileCount,folder_count:MYF_iTrashFolderCount,total_files:MYF_iTrashFileCount,total_folders:MYF_iTrashFolderCount});}tH.folders.memory['trash']=st;aHM(st,aGQ,sortBy,aHy);});aBu.beN({data_only:'yes',content_type:'files'},function(arO){if(!arO.response){return;}MYF_iTrashFileCount=parseInt(arO.response.file_count,10);if(MYF_iTrashFolderCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');var st=tH.folders.memory['trash'];if(st){st.folderkey='trash',st.name='Trash',st.file_count=MYF_iTrashFileCount,st.folder_count=MYF_iTrashFolderCount,st.total_files=MYF_iTrashFileCount,st.total_folders=MYF_iTrashFolderCount}else{st=new tH.yJ({folderkey:'trash',name:'Trash',file_count:MYF_iTrashFileCount,folder_count:MYF_iTrashFolderCount,total_files:MYF_iTrashFileCount,total_folders:MYF_iTrashFolderCount});}tH.folders.memory['trash']=st;aHM(st,aGQ,sortBy,aHy);});}else if(folder.share_type==='multiple_keys'){aaO(folder,ajJ);}else{aHM(folder,aGQ,sortBy,aHy);}};function XO(){var bge=window.location.hash.slice(1);var ZO;if(!bge){if(aek){return false;}var MYF_sStoredFolderKey=aL('mfcurrentFolder')||'';if(MYF_sStoredFolderKey){ZO=MYF_sStoredFolderKey;}else{ZO='myfiles';}window.location.hash=ZO;return false;}else{if(bge.indexOf("search-")!= -1){ZO=bge.replace("search-","");}else{ZO=bge;}}return ZO||'myfiles';};function aFV(){var aLD=false,bdY=XO();if(!tH.folders.yx(bdY)){tH.currentFolder=new tH.yJ(bdY);aLD=true;}else{var awm=bdY;if(awm&&tH.folders.memory[awm]){tH.folders.memory[awm].folders={};tH.folders.memory[awm].files={};tH.currentFolder=tH.folders.yx(awm);aLD=true;}}if(aLD){abH(tH.currentFolder);$(window).resize();}};function alb(){if(window!=window.top&& !aek)top.location.hash=window.location.hash;if(afv())aft(false,true);aFV();if(tH.MYF_oSelected){mainList.aTN();}aHS=setTimeout(function(){$("#container").addClass("mfloading");},250);aHJ(0);aHJ(99,10000);$(window).scrollTop(0);LF.ZR();};function aIS(folder,type,sortby,order,chunk,callback){if(bha){return;}MYF_fShowSpinner('content');try{var arO={data:{content_type:type,filter:filterBy,order_by:sortby,order_direction:order,chunk:chunk,version:APIVERSION}};aHa.aGU(folder,arO,{success:function(acS,aHl){avn(aHl);tH.folders.Yx(acS.folderkey,acS);callback(aHl);setTimeout(function(){$.publish('folder/lazy_load_add',acS);},250);MYF_fHideSpinner('content');$.publish("folder/completed",folder);},error:function(){MYF_fHideSpinner('content');$.publish("folder/completed",folder);}},true);}catch(e){asO(e,'MYF:aIS()');}};function aQx(aJA,acS){var aTu=filterBy,aRi=sortBy,aHy=(sortAscending)?'asc':'desc';if(!acS){acS=aJA;aJA=null;}if(aJA=="folders"&&aTu!="all"&&aTu!="public"&&aTu!="private"){return true;}if(aJA=="files"&&aTu=="folders"){return true;}if(!acS|| !acS.status|| !acS.status[aTu]|| !acS.status[aTu][aRi]|| !acS.status[aTu][aRi][aHy])return false;var aQw=acS.status[aTu][aRi][aHy];if(tH.currentFolder.file_count===0){aQw.files={loaded:true};}if(!aJA)return(aQx("folders",acS)&&aQx("files",acS));else return(aQw[aJA]&&aQw[aJA].loaded);};function aRB(){if(!sortAscending){if(!aQx('files',tH.currentFolder)){return 'files';}else{return 'folders';}}else{if(!aQx('folders',tH.currentFolder)||filterBy=="folders"){return 'folders';}else{return 'files';}}};function aJh(){var acS=tH.currentFolder,ahO=aRB(),aTu=filterBy,aRi=sortBy,aHy=(sortAscending)?'asc':'desc';if(!acS|| !acS.status|| !acS.status[aTu]|| !acS.status[aTu][aRi]|| !acS.status[aTu][aRi][aHy])return 1;var aQw=acS.status[aTu][aRi][aHy];if(!aQw[ahO]|| !aQw[ahO].chunk)return 1;return(aQw[ahO].chunk+1);};function aoP(items,ajJ){mainList.aTN();if(aFi()){}if(items&&items.length){$empty.hide();$mainList.empty();var aQU=window.afv();var aLb=bfw();if(aQU){window.tH.aca=[];avn(items);}window.tH.ayo(true);if((!aQx('folders',tH.currentFolder)|| !aQx('files',tH.currentFolder))&& !aQU&&tH.currentFolder.share_type!='multiple_keys'){var aRd=0;var aQy=false;var bif=null;aaa=function(aTm){if(aQy){aRd++;return;}aQy=true;var aRI=[];function aRJ(){aQy=false;$.publish("folder/lazy_load",[aRI]);var aQV=aQx(window.tH.currentFolder);if(!aQV&&aRd>0){aRd--;if(typeof aaa=='function'){aaa(aTm);}}else if(aQV){aaa=null;}if(aTm===true&&aRd==0){tH.ayo();}};var biT;if(!bif)biT=bif=aJh();else biT=bif=bif+1;aIS(tH.currentFolder,aRB(),sortBy,(sortAscending)?'asc':'desc',biT,function(aHl){$.merge(aRI,aHl);if(aHl.length<aIl&& !aQx(tH.currentFolder)){biT=bif=aJh();aIS(tH.currentFolder,aRB(),sortBy,(sortAscending)?'asc':'desc',biT,function(aHl){$.merge(aRI,aHl);aRJ();});}else{aRJ();}});};}axm($mainList);}else{aaa=null;$mainList.empty();$empty.show();}aos(tH.currentFolder);aHJ(105);};function axm(axs){axs.children("li.folder").unbind("draghover").bind("draghover",function(e){$(this).toggleClass("folder_highlight",e.enter);}).bind('mouseleave mouseout',function(e){$(this).removeClass("folder_highlight");});};function aGv(parent){if(!parent||(aek&&tH.currentFolder.folderkey==afI)){if(tH.currentFolder.folderkey!=tH.root.folderkey){$folderUp.show().find("a").attr("href","#"+tH.root.folderkey).data("key",tH.root.folderkey);}else{$folderUp.hide().data("key","myfiles");}}else{$folderUp.show().find("a").attr("href","#"+parent).data("key",parent);}};function aos(folder,bReCache){$('#myfilesCurrentFolderName').text(folder.name);$('#myfilesCurrentFolderName').toggleClass('cameraUploads',folder.name==='Camera');if(aek){var alg=(''+window.tH.root.owner_name).replace(' ','');alg=alg||'Anonymous';$("#owner_breadcrumb1").text('"'+alg+'" Shared Files');}aKP=function(){if(!aFi()&& !aek){function aHY(aHB){if(aFi())return;Xb.acI('myfiles',tH.currentFolder.folderkey);var aMl=new window.tH.yJ(aHB);tH.root=aMl;tH.folders.Yx("myfiles",aMl);awH();var aAh={};$.each(window.tH.folders.memory.myfiles.folders,function(acm,acS){aAh[acS.folderkey]=acS;});tH.folders.memory.myfiles.folders=aAh;tH.root=aMl;$.publish('folderbrowser/load',tH.currentFolder);tH.aFA=true;};if(tH.folders.memory.myfiles&&tH.folders.memory.myfiles.folders&&(!($.isEmptyObject(tH.folders.memory.myfiles.folders)))){aHY(tH.folders.memory.myfiles);}else{var aId=tH.folders.yx("myfiles");if(!aId)aId=new tH.yJ("myfiles");aHa.aGU(aId,{data:{content_type:"folders",order_by:"name",order_direction:"asc",version:APIVERSION}},aHY,true);}}};if(!SHARED&&folder.folderkey!="myfiles"&&folder.folderkey!="trash"&&folder.shared!="yes"&&folder.shared!="child"){if(bReCache)aHa.aIX(folder.folderkey);aHa.aLA(folder,{success:function(data){var YI=data.response.folder_depth.chain_folders;YI.shift();YI.reverse();$breadcrumbs.find("a.breadcrumb[id!='owner_breadcrumb1']").remove();if(YI.length){for(var i=0,aRy=YI.length;i<aRy;i++){if(!aLm){var aLm=tH.folders.yx("myfiles");if(!aLm)aLm=new tH.yJ("myfiles");}var adj=tH.folders.yx(YI[i].folderkey);adj=new tH.yJ(YI[i],aLm);adj.parent=aLm;aLm=adj;}tH.folders.memory[folder.folderkey].parent=aLm;tH.currentFolder=tH.folders.yx(folder.folderkey);var bex='breadcrumb';$breadcrumbs.append($($.map(YI,function(adj){adj=tH.folders.yx(adj.folderkey)||adj;if(!adj)tH.folders.Yx(new window.tH.yJ(adj));if(adj.folderkey=='trash')bex='breadcrumb trashBreadcrumb';if(adj.name==='Camera')bex+=' cameraUploads';var aMF=htmlspecialchars(bcv(adj.name,MYF_iBreadCrumbsMaxLength/YI.length));return '<a href="#'+adj.folderkey+'" class="'+bex+'" data-key="'+adj.folderkey+'">'+aMF+'</a>';}).join(""))).find("a").bind("draghover",function(e){$(this).toggleClass("folder_highlight",e.enter);});$('#container').toggleClass('trashMode',$('.trashBreadcrumb').length>0);}aKP();var aLR=(!window.tH.currentFolder.parent)?window.tH.currentFolder.parent_folderkey:window.tH.currentFolder.parent.folderkey;aGv(aLR);},error:function(data){return;}});}else{if(!tH.root)tH.root={folderkey:'myfiles'};var aLR=null;if(folder.folderkey!="myfiles"){if(!tH.currentFolder.parent&& !tH.currentFolder.parent_folderkey)aLR="myfiles";else aLR=(!tH.currentFolder.parent)?tH.currentFolder.parent_folderkey:tH.currentFolder.parent.folderkey;var aOs=false,aNi=[],adj=tH.currentFolder;while(!aOs){if(adj&&(!adj.parent&& !adj.parent_folderkey))adj=tH.folders.yx(adj.folderkey)||adj;if(adj&& !adj.parent&&adj.parent_folderkey)adj.parent=tH.folders.yx(adj.parent_folderkey);if(adj&&adj.folders){for(var i=0;i<adj.folders.length;i++){if(adj.folders[i].folderkey){tH.folders.Yx(adj.folders[i].folderkey,new tH.yJ(adj.folders[i]));}}}if(adj.parent&&adj.parent.name&&adj.parent.folderkey&&adj.parent.folderkey!=adj.folderkey){if(adj.parent.folderkey=="myfiles"){aOs=true;}else{aNi.push({folderkey:adj.parent.folderkey,name:adj.parent.name});adj=adj.parent;}}else{aOs=true;}}$breadcrumbs.find("a.breadcrumb[id!='owner_breadcrumb1']").remove();if(aNi.length>0){aNi.reverse();$breadcrumbs.append($($.map(aNi,function(acS){var bmL=tH.folders.yx(acS.folderkey);if(!bmL)tH.folders.Yx(acS.folderkey,new tH.yJ(acS));else acS=bmL;var aMF=htmlspecialchars(bcv(acS.name,MYF_iBreadCrumbsMaxLength/aNi.length));return '<a href="#'+acS.folderkey+'" class="breadcrumb" data-key="'+acS.folderkey+'">'+aMF+'</a>';}).join(""))).find("a").bind("draghover",function(e){$(this).toggleClass("folder_highlight",e.enter);});}}aGv(aLR);aKP();}};function aBe(){$('#files-search-wrap').hide();};function aAC(){$('#files-search-wrap').show();$("#search").focus();};function awQ(ajz,ahQ){if(ajz.response&&ajz.response.result&&(ajz.response.result=='Success')){var aEj={};var aBf={};$.each(ajz.response.tickets,function(x,aCB){if(aCB!=null){aEj[aCB.quickkey]=true;aBf[aCB.company_name]=aCB;}});var aCi=false;for(var i=0;i<ahQ.length;i++){if(aEj[ahQ[i]]){aCi=true;break;}}var aBt={};if(sizeOf(aBf)>1&&ahQ.length>1){aBt['company_name']='Multiple Agencies';}else{$.each(aBf,function(x,aEp){aBt=aEp;});}try{if(aCi){$('#modal_msg_iframe').contents().find('#dmca-match-message').show();}else{$('#modal_msg_iframe').contents().find('#dmca-similar-message').show();}if(aBt.company_name){$('#modal_msg_iframe').contents().find('#dmca-company').html(aBt.company_name||'');}else{$('#modal_msg_iframe').contents().find('#dmca-company-area').hide();}if(aBt.contact_email){$('#modal_msg_iframe').contents().find('#dmca-company-email').html(aBt.contact_email||'');}else{$('#modal_msg_iframe').contents().find('#dmca-company-email-area').hide();}if(aBt.company_address){$('#modal_msg_iframe').contents().find('#dmca-company-addr').html(aBt.company_address||'');}else{$('#modal_msg_iframe').contents().find('#dmca-company-addr-area').hide();}}catch(e){}}else{aH(0,'No DMCA info found.');}};function Xz(key){return function number_sorter(a,b){return parseInt(a[key])-parseInt(b[key]);};};function akJ(){try{var aif={};$.each(tH.files.memory,function(acm,dn){aif[dn.owner_name]=1;});$.each(tH.folders.memory,function(acm,acS){if(acS!=tH.root){aif[acS.owner_name]=1;}});return sizeOf(aif);}catch(e){asO(e,'MYF:akJ()');}};function alu(){try{for(key in tH.root.folders){if(tH.root.folders[key].owner_name){return tH.root.folders[key].owner_name;}}for(key in tH.root.files){return tH.root.files[key].owner_name;}return '';}catch(e){asO(e,'MYF:alu()');}};function Fr(aur,acm){try{if(!atC&&window.localStorage&& !aek){var folder=$.extend(true,{},aur),auo=[];folder.parent=(folder.parent)?folder.parent.folderkey:'';$.each(folder.folders,function(acm,acS){folder.folders[acm]=$.extend({},acS);folder.folders[acm].parent='';folder.folders[acm].folders={};folder.folders[acm].files={};});$.each(folder.files,function(acm,aiv){folder.files[acm]=$.extend(true,{},aiv);folder.files[acm].parent='';});auo[acm]=JSON.stringify(folder);if(aHa.aGF){aHa.aGF.postMessage({cmd:'parse-responses',params:auo});}}}catch(e){asO(e,'MYF:Fr()');}};function Xo(acm){try{if(!atC&&window.localStorage){try{var folder=JSON.parse(localStorage[acm]);folderext=new window.tH.yJ(folder);$.each(folderext.folders,function(acm,acS){folderext.folders[acm]=new window.tH.yJ(acS);});return folderext;}catch(e){return false;}}}catch(e){asO(e,'MYF:Xo()');}};function aBE(aZL,aQF){var UF,statuscheck=false,aQz;if($("#myfiles_wrap").hasClass('sizeS')){UF='s';statuscheck=aZL.thumb1ready?true:false;if(!statuscheck)statuscheck=(!window.tH.aRp|| !window.tH.aRp[aZL.quickkey])?false:true;aQz="/images/imgerrs/50-1.jpg";}if($("#myfiles_wrap").hasClass('sizeM')){UF='m';statuscheck=aZL.thumb2ready?true:false;if(!statuscheck)statuscheck=(!window.tH.aRE|| !window.tH.aRE[aZL.quickkey])?false:true;aQz="/images/imgerrs/50-2.jpg";}if($("#myfiles_wrap").hasClass('sizeL')){UF='l';statuscheck=aZL.thumb3ready?true:false;if(!statuscheck)statuscheck=(!window.tH.aRK|| !window.tH.aRK[aZL.quickkey])?false:true;aQz="/images/imgerrs/50-3.jpg";}if((statuscheck===false||aQF===true)&&aZL.parent.folderkey==window.tH.currentFolder.folderkey){setTimeout(function(){aCs(aZL);},150);return;}else if(aZL.parent.folderkey==window.tH.currentFolder.folderkey){function aRl(aZL){var $row=$('li#file-'+aZL.quickkey),ayv=$row.find('.itemThumbnail img').data('dsrc'+UF)||aQz;$row.find('.itemThumbnail').css('background-image','url('+ayv+')');$row.find('.itemThumbnail').removeClass('processing');};setTimeout(function(){aRl(aZL);},150);}};function aaZ(){$mainList.find('li.file .itemThumbnail').css('background-image','none').addClass('processing');};function Vf(folder,ajJ){$.publish("folder/render",[folder]);$(window).resize();};function aps(){window.tH.aca=[];abH(window.tH.currentFolder);};function aQt(aZL){if($("#myfiles_wrap").hasClass('sizeS')&&aZL.thumb1ready==true)return true;if($("#myfiles_wrap").hasClass('sizeM')&&aZL.thumb2ready==true)return true;if($("#myfiles_wrap").hasClass('sizeL')&&aZL.thumb3ready==true)return true;if($("myfiles_wrap").hasClass('listView')&&aZL.thumb0ready==true)return true;return false;};function aQP(aRv){avg=avg+aRv;};function bkV(SP){var bjY=new Date().getTime();bke=((bjY-(window.tH.bkc||0))/1000);var blt=true;for(var i=0;i<SP.length;i++){if(document.getElementById('folder-'+SP[i])){blt=false;break;}}if(blt)return;if(bke>=bkg){window.tH.yJ.asi(SP,function(WH){if(WH.response){if(WH.response.folder_info){var acS=tH.folders.yx(WH.response.folder_info.folderkey);if(acS){acS.total_files=WH.response.folder_info.total_files;acS.total_folders=WH.response.folder_info.total_folders;if(WH.response.folder_info.overflow){acS.overflow=WH.response.folder_info.overflow;}asN(acS,true);}}if(WH.response.folder_infos){$.each(WH.response.folder_infos,function(x,bjN){var acS=tH.folders.yx(bjN.folderkey);acS.total_files=bjN.total_files;acS.total_folders=bjN.total_folders;if(bjN.overflow)acS.overflow=bjN.overflow;asN(acS,true);});}$("#dragIcon").hide();}},true);}else{if(window.tH.bov)clearTimeout(window.tH.bov);window.tH.bov=setTimeout(function(){bkV(SP);},((bkg+0.1)-bke)*1000);}};function aua(aBZ){if(aBZ){aQr=null;avg=0;aog=0;$('#main_list').css({margin:0});$(window).resize();}var afx='';if(window.tH.currentFolder){afx=window.tH.currentFolder.folderkey;}$.each($('#main_list li'),function(index,Zx){var aYf=$(Zx);var bem=aYf.hasClass('file');var acm=aYf.data('key');var bjZ=window.tH[bem?'files':'folders'].memory[acm];var bkH='';if(bjZ&&bjZ.parent){bkH=bjZ.parent.folderkey;}if(typeof bkH==='undefined'){return;}if(afx!==bkH&& !$('#container').hasClass('searchresults')){aYf.remove();}});if(window.tH.aca&&(window.tH.aca.length>0||aBZ)){var atI=$("#main_list li:first"),abr=(atI.length==0)?49:atI.outerHeight(),aya=$(window).scrollTop(),aak=$(window).height(),aZa=$('#header').outerHeight()+$('#myfiles_controlbar_wrap').outerHeight(),apc=Math.ceil((aak-aZa)/abr),apo=Math.ceil(apc/2),aAu=12,awu=(apo*2+apc),aen=1;if(tH.aca.length>aog)aog=tH.aca.length;if(UO()){var aZx=$(window).width()-268-20;var aZs=($('#myfiles_wrap').hasClass('sizeS'))?122:($('#myfiles_wrap').hasClass('sizeM'))?183:244;aen=Math.floor(aZx/aZs);abr=(atI.length==0)?($('#myfiles_wrap').hasClass('sizeS'))?142:($('#myfiles_wrap').hasClass('sizeM'))?203:264:atI.outerHeight();apc=Math.ceil(aak/abr);aAu=aen*3;apo=Math.ceil(apc);awu=(apo*aen*2+apc*aen);}$(window).resize(function(){if(UO()){var aZx=$(window).width()-268-20;var aZs=($('#myfiles_wrap').hasClass('sizeS'))?122:($('#myfiles_wrap').hasClass('sizeM'))?183:244;aen=Math.floor(aZx/aZs);abr=(atI.length==0)?142:atI.outerHeight();apc=Math.ceil(aak/abr);aAu=aen*3;apo=Math.ceil(apc);awu=(apo*aen*2+apc*aen);}});function aRt(){var ajg=0;if((aya)==0){return 0;}else{ajg=Math.floor(aya/(abr))*aen-apo/2;ajg=(ajg<0)?0:ajg;ajg=Math.floor(ajg/aAu)*aAu;return ajg;}};function aBH(akL){var aQA=Math.floor(akL/aen)*abr;$(window).scrollTop(0);$('body').stop().animate({scrollTop:aQA},500,function(){$(window).resize();});};function aRa(){return Math.floor(aya/abr)*aen;};function aQs(){var ahY=[];for(var i=agh;i<acj+1;i++){var Lu=null;if((Lu=window.tH.aca[i])){if(aRS(Lu)){var aRA=(Lu.quickkey)?"#file-"+Lu.quickkey:"#folder-"+Lu.folderkey;if($(aRA).length==0){ahY.push(i);if(aRX(Lu)){aBE(Lu);}}}}}var ahV=[];$.each($("#main_list li"),function(x,Zx){var aCM=parseInt($(Zx).data('rownum'));if(aCM<agh||aCM>acj){ahV.push(aCM);}});if(agh<avg){if(ahY.length>0){aSg(ahY,true);}if(ahV.length>0){aBT(ahV);}}else{if(ahY.length>0){aSg(ahY);}if(ahV.length>0){aBT(ahV,true);}}avg=agh;aQN=acj;};function aBT(ahV,aux){if(!aux)ahV.reverse();var aig="";$.each(ahV,function(x,akL){if((Lu=window.tH.aca[akL])){aig+=(Lu.quickkey)?"#file-"+Lu.quickkey:"#folder-"+Lu.folderkey;if($((Lu.quickkey)?"#file-"+Lu.quickkey:"#folder-"+Lu.folderkey).hasClass("row_context")&&contextMenu.isVisible()){contextMenu.aoh();}if(ahV[x+1])aig+=", ";}});var $MYF_eRow=$(aig);if($MYF_eRow.length>0){if(aux){var awL=Math.floor(agh/aen)*abr;$('#main_list').css({marginTop:awL});}else{var avR=Math.ceil((aog-acj)/aen)*abr;$('#main_list').css({marginBottom:avR});}$MYF_eRow.remove();}};function aSg(ahY,aux){var bkk=[];if(aux){var awL=Math.floor(agh/aen)*abr;$('#main_list').css({marginTop:awL});}else{var avR=Math.ceil((aog-acj)/aen)*abr;$('#main_list').css({marginBottom:avR});}if(aux)ahY.reverse();$.each(ahY,function(x,akL){if((Lu=tH.aca[akL])){var aRY=Lu;if(typeof Lu!='undefined'&& !Lu.relevancy){var MD=(!Lu.quickkey)?tH.folders.yx(Lu.folderkey):tH.files.yx(Lu.quickkey);if(MD){MD.itemrownum=Lu.itemrownum;if(Lu.quickkey)tH.files.Yx(MD.quickkey,MD);else{bkk.push(Lu.folderkey);tH.folders.Yx(MD.folderkey,MD);}aRY=MD;}}else{var aSF=Lu.quickkey?'files':'folders';if(aSF='files')aRY=new window.tH.Cp(Lu);else{bkk.push(Lu.folderkey);aRY=new window.tH.yJ(Lu);}var MYF_sItemKey=aRY[aSF=='files'?'quickkey':'folderkey'];var MYF_bItemSelected=false;if(tH.MYF_oSelected[aSF]&&MYF_sItemKey){for(var i=0;i<tH.MYF_oSelected[aSF].length;i++){if(MYF_sItemKey==tH.MYF_oSelected[aSF][i]){MYF_bItemSelected=true;break;}}}aRY.selected=MYF_bItemSelected;}var aQv=XB([aRY]);if(aux)$('#main_list').prepend($(aQv));else $('#main_list').append($(aQv));}});if(bkk.length>0)bkV(bkk);};var agh=aRt();var acj=agh+awu-1;if(acj>tH.aca.length)acj=tH.aca.length;if(acj>aog)aog=acj;aHK=aRa();if(! !aaa&&(awu>tH.aca.length||acj>tH.aca.length-awu)&& !afv()&&tH.currentFolder.shared_type!='multiple_keys')aaa(true);if(agh!=avg||acj!=aQN||aiz||aBZ||aBX){aiz=false;aQs();}if(aBX){aBH(aSb);aBX=false;}if(aCo){aBH(0);aCo=false;}}if(aiz)aiz=false;};function GetParentName(parent_key){return window.tH.folders.memory[parent_key].name;};function XB(items){var aLb=bfw();return $.map(items,function(item,x){if(!item.relevancy&& !aLb){if(tH.yJ.aaW(item)&&item.folderkey){if(aek){if(avH(item.flag,1)===0){item.shared='';}}return templates.folder_row(aye(item));}else if(tH.Cp.Zo(item)&&item.quickkey){return templates.file_row(akl(item,{axn:parseInt(axn)}));}else{return "";}}else{if(item.type==="folder"&&item.folderkey||(aLb&&item.folderkey)){var acS=window.tH.folders.yx(item.folderkey);if(!acS)acS=new window.tH.yJ(item);if(!acS.parent_name&& !item.parent_name)acS.parent_name=window.tH.currentFolder.name;if(aLb&& !acS.parent)acS.parent=window.tH.folders.yx('trash');acS.parent_chunk=1;return templates.folder_row(aye($.extend({},acS,item)));}else if(item.type==="file"&&item.quickkey||(aLb&&item.quickkey)){var dn=window.tH.files.yx(item.quickkey);if(!dn)dn=new window.tH.Cp(item);if(!dn.parent_name&& !item.parent_name)dn.parent_name=window.tH.currentFolder.name;if(aLb&& !dn.parent)dn.parent=window.tH.folders.yx('trash');return templates.file_row(akl($.extend({},dn,item)));}else{return "";}}}).join("");};function UO(){return $("#myfiles_wrap").hasClass('thumbnailView');};function aCN(){return $("#myfiles_wrap").hasClass('doc-view');};function aKd(){return{order_by:sortBy,order_direction:sortAscending?"asc":"desc"};};function aLo(){return aHa;};function abc(){return Math.ceil($window.height()/23);};var aXb=0,aWV=false;function aRG(){if(aWV){aXb++;return;}aWV=true;for(var x=0;x<tH.aca.length;x++){var Lu=tH.aca[x];Lu.itemrownum=x;window.tH.aca[x]=Lu;if(typeof Lu!='undefined'&&Lu.quickkey){window.tH.files.Yx(Lu.quickkey,Lu);$mainList.find('li#file-'+Lu.quickkey).attr('data-rownum',x);}else{window.tH.folders.Yx(Lu.folderkey,Lu);$mainList.find('li#folder-'+Lu.quickkey).attr('data-rownum',x);}}if(aXb>0){aXb--;aRG();}else{aWV=false;return;}};function aoQ(item,aSc){if(aHS)return;if(!window.tH.aca){window.tH.aca=[];}else{var bgD=item.quickkey?'quickkey':'folderkey';for(var i=0;i<window.tH.aca.length;i++){if(window.tH.aca[i][bgD]==item[bgD])return;}}item.newclass=true;item.itemrownum=0;window.aQP(1);window.tH.aca.unshift(item);$('#emptyfolder_upload').hide();if(bfw())$('#trash_restoreAll, #trash_deleteAll').show();if(tH.currentFolder.folderkey==item.parent.folderkey){if(item.quickkey)tH.currentFolder.files[item.quickkey]=item;else tH.currentFolder.folders[item.folderkey]=item;}if(($mainList.find("li:first").length==0||parseInt($mainList.find("li:first").data('rownum'))==0)&&window.aRS(item)){var Zx=XB([item]);var gz=$(item.quickkey?'#file-'+item.quickkey:'#folder-'+item.folderkey);if(gz.length>0)gz.remove();$mainList.prepend(Zx);if(item.folderkey&&tH.currentFolder.folderkey&&Xb)Xb.aVp(item,tH.currentFolder.folderkey);if(!aSc){if(item.quickkey){$('#file-'+item.quickkey).hide(0);$('#file-'+item.quickkey).slideDown(1000,'easeOutExpo');}else{$('#folder-'+item.folderkey).hide(0);$('#folder-'+item.folderkey).slideDown(1000,'easeOutExpo');}}}aRG();axm($mainList);};function aQO(item,aSc,aQc){if(!aQc)aQc=0;if(item&&window.tH.aca[item.itemrownum-aQc]&&item.quickkey&&item.quickkey==window.tH.aca[item.itemrownum-aQc].quickkey){window.tH.aca.splice((item.itemrownum-aQc),1);}else if(item&&window.tH.aca[item.itemrownum-aQc]&&item.folderkey&&item.folderkey==window.tH.aca[item.itemrownum-aQc].folderkey){window.tH.aca.splice((item.itemrownum-aQc),1);}else{$.each(window.tH.aca,function(x,Lu){if(item&&Lu)if((item.quickkey&&Lu.quickkey==item.quickkey)||(item.folderkey&&Lu.folderkey==item.folderkey)){window.tH.aca.splice(x,1);}});}var aRA;if(item.quickkey){aRA='#file-'+item.quickkey;}else{aRA='#folder-'+item.folderkey;}if(item.folderkey&&Xb)Xb.aVb(item.folderkey);var Zx=$(aRA);if(Zx.length>0){if(aSc)Zx.hide();else Zx.slideUp(1000,'easeOutExpo');}Zx.remove();if($('#main_list li').length==0&&tH.aca.length==0){if(aQx(null,tH.currentFolder)){$('#emptyfolder_upload').show();window.tH.aca=[];if(bfw())$('#trash_restoreAll, #trash_deleteAll').hide();}else{$(window).hashchange();}}else aRG();return false;};function asE(item){var aSP=$mainList.find('li#file-'+item.quickkey),biJ=aSP.hasClass("new");if(aSP.length>0){var aCM=parseInt(aSP.data('rownum'));item.itemrownum=aCM;window.tH.aca[aCM]=item;var asL=false;var azV=false;if(aSP.hasClass('new'))azV=true;if(aSP.hasClass('imgpreview-active'))asL=true;$mainList.find('li#file-'+item.quickkey).replaceWith(XB([item]));if(asL)$mainList.find('li#file-'+item.quickkey).addClass('imgpreview-active');if(azV)$mainList.find('li#file-'+item.quickkey).addClass('new');$.publish("image/update",[item]);return true;}return false;};function asN(item,bjG){var aSP=$mainList.find('#folder-'+item.folderkey),biJ=aSP.hasClass("new");if(aSP.length>0){var aCM=parseInt(aSP.data('rownum'));item.itemrownum=aCM;window.tH.aca[aCM]=item;aSP.replaceWith(XB([item]));aSP=$mainList.find('#folder-'+item.folderkey);if(biJ)aSP.addClass("new");if(typeof item.overflow!=='undefined'&&item.overflow==='yes'){aSP.attr("title",Encoder.XSSEncode(item.name)+", Many files or folders");aSP.find('.extraInfo').removeClass('hide');}else if(bjG||(typeof item.total_folders!=='undefined'&&typeof item.total_files!=='undefined')){aSP.attr("title",Encoder.XSSEncode(item.name)+", Folders: "+(item.total_folders||0)+", Files: "+(item.total_files||0));aSP.find('.extraInfo').removeClass('hide');}}};function aNq(x,elm){return $(elm).data("key");};function aiJ(e){return $(e.target).closest("li").attr('id').split('-').shift();};function agu(e){return aNq('',$(e.target).closest("li"));};function ahz(quickkey){var selected=OK();if(selected.files.search(quickkey)!= -1||selected.folders.search(quickkey)!= -1){return true;}return false;};function adb(acm,ahO){if(ahO=='folder'){return{folders:[acm]};}else{return{files:[acm]};}};function adn(e){if(afZ()>0){if(ahz(agu(e))){return agL();}else{return adb(agu(e),aiJ(e));}}else{return adb(agu(e),aiJ(e));}};function OK(){return{files:tH.MYF_oSelected.files.join(","),folders:tH.MYF_oSelected.folders.join(",")};};function agL(){var selected=OK();return{files:(selected.files.length>0?selected.files.split(","):[]),folders:(selected.folders.length>0?selected.folders.split(","):[])};};function aiO(){var selected=aoj();return selected.files.concat(selected.folders).join(",");};function afZ(){var selected=agL();return(selected.files.length+selected.folders.length);};function aRM(jLink){var aFn=window.tH.MYF_oSelected.files;if(aFn.length){var beJ=tH.files.yx(aFn[0]),beL='/view/'+aFn.join(',')+'/gallery';if(beJ.filetype!='image'){if(beJ.clickLink&&aFn.length==1)beL=beJ.clickLink;else beL='/view/'+aFn.join(',');}if(jLink){jLink.attr('href',beL);}else{window.open(beL);}}else{aH(0,'You must select at least one file to view.');}};function akO(context){if(!context.files)context.files=[];if(!context.folders)context.folders=[];try{if(context.files.length==1&&context.folders.length<1){var Lu=tH.files.yx(context.files[0]);if(!Lu)Lu={filename:'',quickkey:context.files[0]};var lu=agW(Lu,'download');if((BrowserName()=="Internet Explorer"&&Bm()=="9.0")){if(window.top.location.protocol=="http:"){window.location=lu;}else{window.top.location=lu;}}else{window.open(lu);}}else{adP(context);}}catch(e){asO(e,'MYF:akO()');}};function MYF_DirectDownload(context){akO(context);};function aki(){if(!fu&& !hq){Ck();return false;}var rN=[];if(afv()){rN=tH.XE;}else{rN=tH.currentFolder.files;}var alh=[];$.each(rN,function(eC,aZL){if(aZL.filetype=='image'){alh.push(aZL.quickkey);}});akO({files:alh,folders:[]});return false;};function aeP(adT,x,quickkeys){x+=adT;if(quickkeys&&x>=quickkeys.length){tH.currentFolder=tH.root;if(akJ()>1){tH.root.owner_name='Custom View';}else{tH.root.owner_name=alu();}if(window.location.hash.slice(1).length>0&&window.location.hash.slice(1)!=tH.currentFolder.folderkey){var adj=tH.folders.yx(window.location.hash.slice(1));if(adj&&adj)tH.currentFolder=adj;}tH.currentFolder.share_type='multiple_keys';if(bcB){$("#folder_author").attr("title","shared by \""+bcB+"\"").text("shared by \""+bcB+"\"");$("#collabmodeContact .collabContactName").text(bcB).attr('title',bcB);}$.publish("folder/load",[tH.currentFolder]);MYF_fHideSpinner('folders');}if(!quickkeys){Zi(1,"Error: One or more of the files/folders that were shared<br/>are invalid or no longer exist.");}};function akz(){aeP(1);};function aeI(acm,x,quickkeys){var adZ=tH.root;var acD=new tH.Cp(acm);acD.Yw({success:function(){acD.parent=adZ;adZ.files[acm]=acD;tH.files.Yx(acm,acD);if(acD.owner_name&&typeof bcB=="undefined")window.bcB=acD.owner_name;if(acD.owner_name&&acD.owner_name!=bcB)bcB="Various Owners";aeP(1,x,quickkeys);},error:akz});};function ahF(afA,x,quickkeys){var adZ=tH.root;var adj=new tH.yJ(afA);adj.Yw({data:{recursive:"yes"}},{success:function(){adj.parent=adZ;adZ.folders[afA]=adj;tH.folders.Yx(afA,adZ.folders[afA]);if(typeof bcB=="undefined")window.bcB=adj.owner_name;if(adj.owner_name&&adj.owner_name!=bcB)bcB="Various Owners";aeP(1,x,quickkeys);},error:akz});};function agM(adZ){tH.aFA=false;tH.folders.Yx(adZ.folderkey,adZ);tH.folders.memory.myfiles=adZ;tH.currentFolder=adZ;if(window.location.hash.slice(1).length>0&&window.location.hash.slice(1)!=tH.currentFolder.folderkey){var adj=tH.folders.yx(window.location.hash.slice(1));if(adj&&adj){tH.currentFolder=adj;}}$.publish("folder/load",[tH.currentFolder]);tH.lo=true;$.publish('folderbrowser/load',tH.currentFolder);MYF_fHideSpinner('folders');};function auF(auC){$.each(auC,function(x,sD){if(sD.shared=='no'||sD.shared==''){tH.myaccountfolders[sD.folderkey]=sD;auF(sD.folders);}});};function awH(){$.each(tH.folders.memory,function(acm,acS){if(!acS|| !acS.folderkey){delete tH.folders.memory[acm];}else if(acm!='myfiles'&&acS.folderkey!='myfiles'){if(!acS.parent)if(acS.parent_folderkey){acS.parent=tH.folders.yx(acS.parent_folderkey);}else{acS.parent=tH.folders.yx("myfiles");}if(acS.parent){if(!acS.parent.folders){acS.parent.folders={};}acS.parent.folders[acm]=acS;}}});};function LB(){var MYF_sStoredFolderKey=aL('mfcurrentFolder')||'';var acC=false;if(window.location.hash.slice(1)==''){if(MYF_sStoredFolderKey){if(!atC&&localStorage[MYF_sUserEnc+'-folder-'+window.location.hash.slice(1)+'-'+((sortAscending)?'folders-':'files-')+sortBy+'-'+((sortAscending)?'asc':'desc')+'-1']){return MYF_sStoredFolderKey;}}}else{if(!atC&&localStorage[MYF_sUserEnc+'-folder-'+window.location.hash.slice(1)+'-'+((sortAscending)?'folders-':'files-')+sortBy+'-'+((sortAscending)?'asc':'desc')+'-1']){return window.location.hash.slice(1);}}if(!atC&&window.location.hash.slice(1)==''&&localStorage[MYF_sUserEnc+'-folder-myfiles-'+((sortAscending)?'folders-':'files-')+sortBy+'-'+((sortAscending)?'asc':'desc')+'-1']){return 'myfiles';}else{return '';}};function apC(){return aek;};function aRS(aZL){if(filterBy!="all"){return filters[filterBy](aZL);}return true;};function adI(){akO(tH.MYF_oSelected);};function adP(context){acL(context);};function acL(context){aol(context);};function aol(context){var oFilesToZip=ajU(context);aky(oFilesToZip);};function ajU(context){var aib=context.files.length+context.folders.length;if(context.folders.length==1&&context.folders[0]==tH.currentFolder.folderkey){aib=(parseInt(tH.currentFolder.file_count,10)||0)+(parseInt(tH.currentFolder.folder_count,10)||0);}var oFilesToZip={keys:"",count:aib};var aAW=[];if(context.files){var sKeys=context.files.join();if(sKeys){aAW.push(sKeys);}}if(context.folders){var sKeys=context.folders.join();if(sKeys){aAW.push(sKeys);}}oFilesToZip.keys=aAW.join();return oFilesToZip;};function aky(oFilesToZip){if(!fu&& !hq){Ck();return;}if(oFilesToZip.count<=0){aH(0,"You must select at least two items or one folder to zip.");return;}GH.apJ.open(oFilesToZip);};function aka(sTheFolderKey){var nz={'files':[],'folders':[]};var ajR=tH.folders.yx(sTheFolderKey);$.each(ajR.files,function(FG,aZL){nz.files.push({'quickKey':FG,'size':aZL['size']});});$.each(ajR.folders,function(qN){var ale=aka(qN);nz.folders.push({'folderKey':qN,'files':ale.files,'folders':ale.folders});});return nz;};function aiM(quickkey){if(fu==0||fu==4){LoadIframeLightbox('/templates/upgrade/statistics.html',750,390);}else{iZ=quickkey;DoAPopup('select_stats_popup',530,380);}};function ayz(folder){var adT=0;$.each(folder.folders,function(acm,acS){ayz(acS);adT+=acS.file_count;});folder.file_count=adT+sizeOf(folder.files);};function ama(aTk){if(!tH.configuration)tH.configuration={};if(!tH.configuration.viewable)tH.configuration.viewable={};tH.configuration.viewable.extensions=aTk;};function bbH(aSN){tH.azm=aSN;};function aLc(){if($("#dragIcon").length>0&&$("#dragIcon").is(":visible")){$("#dragIcon").css('top',e.pageY-10).css('left',e.pageX+10).css('z-index',9999);}};function aSs(){$(".logo a").click(function(e){window.location.hash="myfiles";aeV(e);return false;});};function aSq(){if(aL('mfsf-'+UserEmail).length>1){sortBy=(aL('mfsf-'+UserEmail))||'name';sortAscending=true;if(sortBy=="relevancy"||sortBy=="expire")sortBy="name";else if(aek&&sortBy=="downloads")sortBy="created";}if(!atC&&window.localStorage){if((localStorage['user']!=MYF_sUserEnc)||(!localStorage['current_api_version'])){localStorage.clear();localStorage['user']=MYF_sUserEnc;}}};function aMS(){return{files:function(item){return tH.Cp.Zo(item);},folders:function(item){return tH.yJ.aaW(item);},image:function(item){return tH.Cp.Zo(item)&&item.filetype==="image";},video:function(item){return tH.Cp.Zo(item)&&item.filetype==="video";},audio:function(item){return tH.Cp.Zo(item)&&item.filetype==="audio";},document:function(item){return tH.Cp.Zo(item)&&item.filetype==="document";},spreadsheet:function(item){return tH.Cp.Zo(item)&&item.filetype==="spreadsheet";},presentation:function(item){return tH.Cp.Zo(item)&&item.filetype==="presentation";},public:function(item){return item.privacy=="public";},private:function(item){return item.privacy=="private";}};};function aSM(){$("#myfiles_filtercontrol").find(".dropdown").dropdown({useLabel:false,command:function(cmd,elm){tH.aca=[];filterBy=cmd;$.publish("list/filter");$("#currentFilterlink").html($(elm).html());var aPr=$("#myfiles_filtercontrol").attr("class").match(/filter.*/)[0];$("#myfiles_filtercontrol").removeClass(aPr).addClass("filter"+$(elm).data("command").capitalize());}});$.subscribe("list/filter",function(){if(afv()&&$("#search-text").val().length)afB(window.tH.currentFolder,$('#search-text').val(),tH.aVy);else{tH.currentFolder.folders={};tH.currentFolder.files={};abH(tH.currentFolder);}$("#container").toggleClass("searchmode_filter",filterBy!="all");window.scrollTo(0,0);});};function aTX(){return{relevancy:Xz("relevancy"),folder:{name:axw("name"),created:axQ("created"),expire:axQ("delete_date")},file:{name:axw("filename"),created:axQ("created"),expire:axQ("delete_date"),size:Xz("size"),downloads:Xz("downloads")}};};function aed(){var alc=function(){if(sortBy!='name'){$("#container").removeClass(function(aYy,akY){var akG=[],ahK=akY.split(' ');for(var i=0;i<ahK.length;i++)if(ahK[i].indexOf("sort-")!== -1)akG.push(ahK[i]);return akG.join(' ');});}else{$("#myfiles_sortcontrol li span").removeClass('arrow_down arrow_up');}if(bfw()){sortAscending=true;$("#container").addClass('sort-name');}$("#container").addClass('sort-'+sortBy).removeClass('sort-ascending sort-descending').addClass(sortAscending?'sort-ascending':'sort-descending');};$("#myfiles_sortcontrol").find(".dropdown").dropdown({useLabel:true,command:function(cmd,elm){if(!bfw())tH.aca=[];if(sortBy===cmd){sortAscending= !sortAscending;}else{sortBy=cmd;if(sortBy!='relevancy'&&sortBy!='expire'&&sortBy!='date')aU('mfsf-'+UserEmail,sortBy,(60*60*24*30));}$("#myfiles_sortcontrol li").each(function(){$(this).find('span').removeClass('arrow_down arrow_up');if($(this).data('command')==sortBy)$(this).find('span').addClass('arrow_down');});$.publish("list/sort");}});$('#sort_current').delegate('span','click',function(e){if(sortBy!='name'){sortAscending= !sortAscending;}else{var asT=$('#sort_current').text();asT=asT.substring(0,asT.search(/\s/));asT=asT.toLowerCase();if(asT=='modified')asT='created';if(asT=='available')asT='expire';sortBy=asT;}if(sortBy!='relevancy'&&sortBy!='expire'&&sortBy!='date')aU('mfsf-'+UserEmail,sortBy,(60*60*24*30));$.publish("list/sort");aeV(e);});$('#myfiles_sortbyname').on('click',function(e){if(sortBy=='name'){sortAscending= !sortAscending;}sortBy='name';aU('mfsf-'+UserEmail,sortBy,(60*60*24*30));$.publish("list/sort");aeV(e);});$.subscribe("list/sort",function(){if(adz()||(afv()&&window.tH.XE&&window.tH.XE.length>0)){MYF_SearchMode_fSortList();alc();}else if(bfw()||(tH.currentFolder&&tH.currentFolder.folderkey=='trash')){alc();}else{if(tH.currentFolder){tH.currentFolder.folders={};tH.currentFolder.files={};abH(tH.currentFolder);aos(tH.currentFolder);}alc();}window.scrollTo(0,0);});var bfT=XO();if(bfT!='trash'&&sortBy=='name'){$("#container").addClass('sort-created');alc();}else{if(bfT=='trash'){$("#container").addClass('sort-expire');sortBy='name';}else if(sortBy=='expire'){sortBy='name';}var dD=(sortBy&&sortBy!='relevancy')?sortBy:'created';var $MYF_oSortElement=$('#myfiles_sortcontrol li[data-command="'+dD+'"]');var aZl=$MYF_oSortElement.text();if($MYF_oSortElement.length>0){$('#sort_current').html(aZl+' <span class="arrow_down"></span>');$MYF_oSortElement.find('span').addClass('arrow_down');alc();}else{sortBy='name';$.publish("list/sort");}}};function aSu(){};function aTC(){$("#owner_breadcrumb1").bind("draghover",function(e){$(this).toggleClass("folder_highlight",e.enter);aeV(e);});$("#followingHome a").click(function(){top.Rz("shared-items");return false;});$breadcrumbs.delegate("a.breadcrumb","dragenter dragover",function(e){e.preventDefault();return false;});$breadcrumbs.delegate("a.breadcrumb","drop",function(e){$(this).toggleClass("folder_highlight",false);var items;if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"))){var Lu={};if(items.files){Lu=tH.files.yx(items.files.split(",")[0]);}else{Lu=tH.folders.yx(items.folders.split(",")[0]);}var aGM=Lu.parent.folderkey;var acH=tH.folders.yx(aGM);var aVj=(aek|| !avH(acH.flag,"1"));if(aVj)LF.aFI(items.files,items.folders,$(this).data("key"));else LF.YO(items.files,items.folders,$(this).data("key"));}aeV(e);}else{var es=e.originalEvent.dataTransfer.files;var sFolderID=$(this).data('key');aeV(e);e.preventDefault();aXY(function(aWq){aWj(e,es,sFolderID,true);});}return false;});$('#myfilesCurrentFolderNameWrap').delegate(".breadCrumbsOptions","click",function(e){R({folders:[tH.currentFolder.folderkey]});aeV(e);});$folderUp.bind("draghover",function(e){$(e.target).toggleClass("folder_highlight",e.enter);}).bind("dragover",NQ).bind("drop",function(e){afA=$folderUp.find('a').attr('href').substring(1);abh(e,afA);aeV(e);return false;});};function aeB(){$("#thumbnailSize").delegate("a","click",function(){var sClickedClass=$(this).attr("class"),sThumbnailSize=sClickedClass.substr(sClickedClass.length-1);if(!$("#myfiles_wrap").hasClass("size"+sThumbnailSize)){$("#myfiles_wrap").removeClass('sizeS sizeM sizeL').addClass("size"+sThumbnailSize);aaZ();aU('mfsize',sThumbnailSize,1800);$.publish("thumbmode/sizechange",[sThumbnailSize]);}});$.subscribe("thumbmode/sizechange",function(){$('#main_list').empty();aBX=true;aSb=aHK;aua();});$.subscribe("view/changemode",function(){contextMenu.aoh();aCo=true;});};function aST(){$.subscribe("folder/render",function(folder){$("#folder_infobox").toggleClass("thisfolder_root",folder.folderkey=='myfiles');acv();$(window).resize();});$.subscribe("folder/load",function(folder){if(folder.folderkey===tH.currentFolder.folderkey){aps();}});var MYF_sSharedState='init';$.subscribe("folder/completed",function(folder){if(aek&&window.location.hash.slice(1).length>0){if(MYF_sSharedState==='init'){alb();MYF_sSharedState='root';}else if(MYF_sSharedState==='root'){MYF_sSharedState='loaded';setTimeout(aFV,500);}}});$.subscribe("folder/create",function(Ov,parent){aH(0,Ov.name+" created.","A new folder "+Ov.name+" has been created inside the folder "+parent.name+".",true);if(parent.folderkey===tH.currentFolder.folderkey){aoQ(Ov);window.scrollTo(0,0);}if(parent.folderkey!="myfiles"&&parent.parent&&parent.parent.folderkey===tH.currentFolder.folderkey){asN(parent);}aHa.aIX(parent.folderkey);});$.subscribe("file/create",function(NewFile,parent){aH(0,'<span class="shortenFileName">'+htmlspecialchars(NewFile.filename)+"</span> created.",'A new file <span class="shortenFileName">'+htmlspecialchars(NewFile.filename)+"</span> has been created inside the folder "+parent.name+".",true);parent.file_count=parseInt(parent.file_count)+1;if(parent.folderkey===tH.currentFolder.folderkey){$("#emptyfolder_upload").hide();aoQ(NewFile);window.scrollTo(0,0);}aHa.aIX(parent.folderkey);if(parent.folderkey!="myfiles"&&parent.parent)aHa.aIX(parent.parent.folderkey);FI();});$.subscribe("folder/delete",function(Ws,MYF_bPurge){var MYF_sActionPerformed=MYF_bPurge?'deleted.':'moved to Trash.';var aSW=false,aSh;if(Ws instanceof Array){var aRz=Ws.length;var aSK=false;if(aRz>5){aH(0,aRz+' folders were '+MYF_sActionPerformed,aRz+' folders were '+MYF_sActionPerformed,true);}else{aSK=true;}$.each(Ws,function(acm,adj){var aFD=tH.folders.yx(adj.parent.folderkey);if(aSK)aH(0,adj.name+' '+MYF_sActionPerformed,"The folder "+adj.name+' was '+MYF_sActionPerformed,true);if(adj.folderkey==tH.currentFolder.folderkey)aSW=true;if(aFD&&aFD.folderkey==tH.currentFolder.folderkey)aQO(adj);if(aFD&&aFD.folderkey!="myfiles"&&aFD.parent&&aFD.parent.folderkey==tH.currentFolder.folderkey)asN(aFD);});aHa.aIX(Ws[0].parent.folderkey);}else{aH(0,Ws.name+' '+MYF_sActionPerformed,'The folder '+Ws.name+' was '+MYF_sActionPerformed,true);var aFD=tH.folders.yx(Ws.parent.folderkey);aHa.aIX(Ws.parent.folderkey);if(Ws.folderkey==tH.currentFolder.folderkey)aSW=true;if(aFD&&aFD.folderkey==tH.currentFolder.folderkey)aQO(Ws);if(aFD&&aFD.folderkey!="myfiles"&&aFD.parent&&aFD.parent.folderkey==tH.currentFolder.folderkey)asN(aFD);}if(aSW)window.location.hash="#myfiles";mainList.aTN();FI();});$.subscribe("file/delete",function(items,MYF_bPurge){var MYF_sActionPerformed=MYF_bPurge?'deleted':'moved to Trash';if(items.length>1){aH(0,items.length+' files '+MYF_sActionPerformed,items.length+' files were '+MYF_sActionPerformed,true);}else{aH(0,'<span class="shortenFileName">'+htmlspecialchars(items[0].filename)+'</span> '+MYF_sActionPerformed,'The file <span class="shortenFileName">'+htmlspecialchars(items[0].filename)+'</span> was '+MYF_sActionPerformed,true);}$.each(items,function(x,dn){if(!dn.relevancy){var aFD=tH.folders.yx(dn.parent.folderkey);aQO(dn,false,x);if(aFD.folderkey!="myfiles"&&aFD.parent&&aFD.parent.folderkey==tH.currentFolder.folderkey)asN(aFD);}else{aQO(dn,false,x);}});aRG();aHa.aIX(items[0].parent.folderkey);mainList.aTN();FI();if(MYF_bPurge){SegmentIdentifyWithDiskSpace();}});$.subscribe("folder/move",function(items,source,destination){if(items.length>1){aH(0,items.length+" folders moved.",items.length+" folders have been moved from "+source.name+" to "+destination.name+".",true);}else{aH(0,'<span class="shortenFileName">'+htmlspecialchars(items[0].name||items[0].filename)+"<span> moved.",'<span class="shortenFileName">'+htmlspecialchars(items[0].name||items[0].filename)+"</span> has been moved from "+source.name+" to "+destination.name+".",true);}aHa.aIX(destination.folderkey);aHa.aIX(source.folderkey);if(source.folderkey!='myfiles'&&source.parent)aHa.aIX(source.parent.folderkey);if(destination.folderkey!='myfiles'&&destination.parent)aHa.aIX(destination.parent.folderkey);if(source.parent)aHa.aIX(source.parent.folderkey);if(!afv()){if(destination.folderkey===tH.currentFolder.folderkey){$.each(items,function(x,acS){aoQ(acS);});}if(source.folderkey===tH.currentFolder.folderkey){$.each(items,function(x,acS){aQO(acS);});}}if(destination.parent&&destination.parent.folderkey===tH.currentFolder.folderkey){asN(destination);}if(source.parent&&source.parent.folderkey===tH.currentFolder.folderkey){asN(source);}if(afv())$('#search').keydown();aos(tH.currentFolder,true);if(source.folderkey=='trash'||destination.folderkey=='trash')beg();});$.subscribe("file/move",function(items,source,destination){if(items.length>1){aH(0,items.length+" files moved.",items.length+" files have been moved from "+source.name+" to "+destination.name+".",true);}else{aH(0,'<span class="shortenFileName">'+htmlspecialchars(items[0].name||items[0].filename)+"</span> moved.",'<span class="shortenFileName">'+htmlspecialchars(items[0].name||items[0].filename)+"</span> has been moved from "+source.name+" to "+destination.name+".",true);}aHa.aIX(destination.folderkey);aHa.aIX(source.folderkey);if(source.folderkey!='myfiles')aHa.aIX(source.parent.folderkey);if(destination.folderkey!='myfiles')aHa.aIX(destination.parent.folderkey);if(source.parent||source.parent_folderkey)aHa.aIX(source.parent.folderkey||source.parent_folderkey);if(!afv()){if(source.folderkey===tH.currentFolder.folderkey){$.each(items,function(x,dn){aQO(dn);});}}if(destination.folderkey!='myfiles'&&destination.parent.folderkey===tH.currentFolder.folderkey){asN(destination);}if(source.folderkey!='myfiles'&&source.parent.folderkey===tH.currentFolder.folderkey){asN(source);}if(afv())$('#search').keydown();if(source.folderkey=='trash'||destination.folderkey=='trash')beg();FI();});$.subscribe("folder/copy",function(sourceitems,newitems,source,destination){if(sourceitems.length>1){if(destination&&destination.name)aH(0,sourceitems.length+" folders copied.",sourceitems.length+" folders have been copied from "+source.name+" to "+destination.name+".",true);else aH(0,sourceitems.length+" folders copied.",sourceitems.length+" folders have been copied from "+source.name+".",true);}else{aH(0,'<span class="shortenFileName">'+htmlspecialchars(sourceitems[0].name||sourceitems[0].filename)+"</span> copied.",'<span class="shortenFileName">'+htmlspecialchars(sourceitems[0].name||sourceitems[0].filename)+"</span> has been copied from "+source.name+" to "+destination.name+".",true);}aHa.aIX(destination.folderkey);aHa.aIX(source.folderkey);if(destination.folderkey==tH.currentFolder.folderkey){$.each(newitems,function(x,dn){aoQ(dn);});}if(afv())$('#search').keydown();FI();});$.subscribe("file/copy",function(sourceitems,newitems,source,destination){if(sourceitems.length>1){aH(0,newitems.length+" files copied.",newitems.length+" files have been copied from "+source.name+" to "+destination.name+".",true);}else{aH(0,'<span class="shortenFileName">'+htmlspecialchars(newitems[0].name||newitems[0].filename)+"</span> copied.",'<span class="shortenFileName">'+htmlspecialchars(newitems[0].name||newitems[0].filename)+"</span> has been copied from "+source.name+" to "+destination.name+".",true);}aHa.aIX(destination.folderkey);aHa.aIX(source.folderkey);if(destination.folderkey==tH.currentFolder.folderkey){$.each(newitems,function(x,acS){aoQ(acS);});}if(afv())$('#search').keydown();FI();SegmentIdentifyWithDiskSpace();});$.subscribe("filesandfolders/copy",function(files,folders,source,destination){aH(0,files.length+" files and "+folders.length+" folders copied.",files.length+" files and "+folders.length+" folders have been copied from "+source.name+" to "+destination.name+".",true);aHa.aIX(destination.folderkey);aHa.aIX(source.folderkey);if(destination.folderkey==tH.currentFolder.folderkey){$.each(files,function(x,dn){aoQ(dn);});$.each(folders,function(x,acS){aoQ(acS);});}if(afv())$('#search').keydown();FI();SegmentIdentifyWithDiskSpace();});$.subscribe("folder/update",function(item,command,showmessage){if(typeof showmessage=='undefined')showmessage=true;var $renderedRow=$("#folder-"+item.folderkey);if(showmessage===true)aH(0,item.name+" updated.","The folder "+item.name+" has been modified.",true);if($renderedRow.length){asN(item);}aHa.aIX(item.parent.folderkey);aos(tH.currentFolder);});$.subscribe("file/save",function(filename){aHa.aIX('myfiles');aH(0,'<span class="shortenFileName">'+htmlspecialchars(filename)+"</span> saved to My Files.",'The file <span class="shortenFileName">'+htmlspecialchars(filename)+"</span> has been saved to your account.",true);});$.subscribe("folder/follow",function(folder){aHa.aIX('myfiles');aH(0,folder.name+" added to My Files.","The folder "+folder.name+" has been added to your account.",true);});$.subscribe("folder/unfollow",function(folder){var acS=folder;if(acS){if(acS.parent.folderkey==tH.currentFolder.folderkey){aQO(acS);}var aSL=false;if(acS.folderkey==tH.currentFolder.folderkey){aSL=true;}aHa.aIX(acS.parent.folderkey);aHa.aIX(acS.folderkey);if(aSL){window.location.hash="#myfiles";}aH(0,acS.name+" removed from My Files.","The folder "+acS.name+" has been removed from your account.",true);}});$.subscribe("folders/follow",function(adT){aHa.aIX('myfiles');var ahO=" folders";var aSv=" have";if(adT==1){ahO=" folder";aSv=" has";}aH(0,adT+ahO+" added to My Files.",adT+ahO+aSv+" been added to your account.",true);});$.subscribe("document/update",function(aZL){if(UO()){setTimeout(function(){aBE(aZL);},250);}});$.subscribe("folder/lazy_load",function(es){if(UO()){$.each(es,function(x,aZL){if(aZL.filetype!='image'&&anD(aZL)){aBE(aZL);}});}tH.ayo();});$.subscribe("file/update",function(item,command,showmessage){if(typeof showmessage=='undefined')showmessage=true;if(showmessage===true)aH(0,'<span class="shortenFileName">'+htmlspecialchars(item.filename)+"</span> updated.",'The file <span class="shortenFileName">'+htmlspecialchars(item.filename)+"</span> has been modified.",true);asE(item);if(item.parent.folderkey==tH.currentFolder.folderkey){FI();if(command=="replace"&&UO()&&aCz(item)&&anD(item)){aBE(item);}}if(afv()){MYF_bNextSearchAll=typeof window.tH.currentFolder.files[item.quickkey]=='undefined';afB(window.tH.currentFolder,$('#search-text').val(),MYF_bNextSearchAll);}if(item.filetype=="")item.filetype="other";aHa.aIX(item.parent.folderkey);});$.subscribe("file/upload",function(aZL,aoE){var acH=tH.folders.yx(aZL.parent.folderkey);if(acH){aHa.aIX(acH.folderkey);if(tH.currentFolder.folderkey==acH.folderkey){if(!asE(aZL)&&aoE=="new")aoQ(aZL);if(UO()&&anD(aZL)&&aCz(aZL))aBE(aZL);}if(acH.folderkey!="myfiles"){aHa.aIX(acH.parent.folderkey);if(tH.currentFolder.folderkey==acH.parent.folderkey){asN(acH);}}}FI();});};function apy(aWc,aek){MYF_fShowSpinner('folders');var aYA=new auj({container_selector:"#folderTree .folderlist_content",linked_folder_class:"nav-linked-folder"},aWc,aek);return aYA;};function aUh(){$.subscribe("folder/render",function(folder){if(folder.folderkey!="trash"&& !acK){Xb.bau(folder.folderkey);Xb.aZC(folder.folderkey);}});$.subscribe("folder/unfollow",function(folder){beK(folder.folderkey);});$.subscribe("folder/delete folder/remove",function(folder){$.each(folder,function(x,acS){beK(acS.folderkey);});});$.subscribe("folder/create folder/add",function(folder,parent){bfr(folder,parent.folderkey);});$.subscribe("folder/move",function(item,source,destination){$.each(item,function(x,acS){beK(acS.folderkey);bfr(acS,destination.folderkey);});});$.subscribe("folder/update",function(folder){bfF(folder);});};function aTg(){Xb.aab.onFolderContextMenu=function(e,acS){var mode,data;mode="folder";data=acS.folderkey;if(acS.shared=="yes")mode=(!acS.parent||acS.parent.shared=="no")?"linked-folder":'sublinked-folder';contextMenu.open("folderbrowser",mode,aiH(e,-2,-2),data);aeV(e);return false;};Xb.aab.onFolderDrop=function(e,acS,wl){var items;$("#container").removeClass("drag_active");if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(e.originalEvent.dataTransfer.getData("Text").substr(0,1)=="{"){try{items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"));var Lu={};if(items.files){Lu=tH.files.yx(items.files.split(",")[0]);}else{Lu=tH.folders.yx(items.folders.split(",")[0]);}if(!Lu){var aLm=new tH.yJ(Xb.aQm[items.folders].parent);Lu=new tH.yJ(Xb.aQm[items.folders],aLm);}var aGM=(! !Lu.parent)?Lu.parent.folderkey:Lu.parent_folderkey;var acH=tH.folders.yx(aGM);var aVj=(aek||acH.shared=="yes"||acH.shared=="child");if(aVj)LF.aFI(items.files,items.folders,acS.folderkey);else LF.YO(items.files,items.folders,acS.folderkey);aeV(e);}finally{mainList.aTN();}}}else{aeV(e);e.preventDefault();var es=e.originalEvent.dataTransfer.files;var sFolderID=acS.folderkey;aXY(function(aWq){aWj(e,es,sFolderID,true);});}return false;};Xb.aab.onFolderDragOver=NQ;Xb.aab.onFolderClick=function(e,acS,wl){aft(false,true);var key=acS.folderkey;if(key!=window.location.hash.slice(1))window.location.hash=key;contextMenu.aoh();aeV(e);return false;};if('WebkitUserDrag'in document.body.style){Xb.aab.onFolderMouseDown=function(e,acS,wl){if(wl.style.webkitUserDrag!='element')wl.style.webkitUserDrag='element';};}Tw=false;Xb.aab.onFolderMouseDown=function(e,acS,wl){if(Tw)return false;else return true;};Xb.aab.onFolderDragStart=function(e,acS,wl){if(Tw)return false;Tw=true;setTimeout(function(){Tw=false;},500);if(aek){aeV(e);return false;}var key=acS.folderkey;var item=acS;if(!aTB(item)&& !aTB(item.parent)){if(NZ(item)!=2){aeV(e);return false;}}if(wl.style.webkitUserDrag=='element')e.originalEvent.dataTransfer.setDragImage(document.getElementById('preventDefaultDragImg'),0,0);mainList.aTN();$("#container").addClass("drag_active");tH.MYF_oSelected.folders.push(acS.folderkey);$.publish("list/selection");e.originalEvent.dataTransfer.setData("Text",JSON.stringify({files:"",folders:key}));return true;};Xb.aab.onFolderDragEnd=function(e,acS,wl){mainList.aTN();$("#container").removeClass("drag_active");$(".folder_highlight").removeClass("folder_highlight");};Xb.aab.onFolderDragEnter=function(e,acS,wl){$(wl).addClass("folder_highlight");return false;};Xb.aab.onFolderDragLeave=function(e,acS,wl){$(wl).removeClass("folder_highlight");return false;};Xb.aab.onFolderBrowserLoad=function(){for(aZG in Xb.aQm){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,bku(aZG));}};Xb.aab.onFolderAdd=function(aZG){if(!tH.folders.yx(aZG.folderkey))tH.folders.Yx(aZG.folderkey,bku(aZG));};$("#new_folder_trigger").click(function(){GH.abV.open(tH.currentFolder.folderkey||'');});$("#btn_expandlistview").click(function(){Xb.CD();return false;});$("#folderTree").find("a.popup-close").click(function(){Xb.CD();return false;});$("#imageview_showfolders").click(function(){Xb.CD();return false;});$('.trashCan').on('drop',function(e){var items;$("#container").removeClass("drag_active");if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(e.originalEvent.dataTransfer.getData("Text").substr(0,1)=="{"){try{items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"));var Lu={};if(items.files){Lu=tH.files.yx(items.files.split(",")[0]);}else{Lu=tH.folders.yx(items.folders.split(",")[0]);}if(!Lu){var aLm=new tH.yJ(Xb.aQm[items.folders].parent);Lu=new tH.yJ(Xb.aQm[items.folders],aLm);}var aGM=(! !Lu.parent)?Lu.parent.folderkey:Lu.parent_folderkey;var acH=tH.folders.yx(aGM);var aVj=(aek||acH.shared=="yes"||acH.shared=="child");if(!aVj&& !Lu.delete_date)LF.Zs(items.files,items.folders);aeV(e);}finally{mainList.aTN();}}}return false;}).on("dragenter dragover",function(e){$(this).addClass("folder_highlight");e.preventDefault();return false;}).on("dragleave",function(e){$(this).removeClass("folder_highlight");e.preventDefault();return false;});};function bku(mc){var adj=new tH.yJ(mc);adj.folders={};for(var x=0,l=mc.folders.length;x<l;x++){adj.folders[mc.folders[x].folderkey]=bku(mc.folders[x]);}if(mc.parent)adj.parent_folderkey=mc.parent.folderkey;return adj;};function aTY(){var Od=new agX(".myaccountlist_content",{});Od.$container=$("#form-save");Od.asf='myaccount';Od.amA=function(){return tH.myaccount.folderkey;};Od.anf=function(){try{WU=this;var ani={};ani['myaccount']=new alU({agV:'myaccount',amB:'My Files',agd:amJ(tH.myaccount.folders)||{},ams:'',NTN_sDisplayClass:'',UU:(parseInt(tH.myaccount.folder_count,10)>0?'yes':'no')});$.each(tH.myaccountfolders,function(x,folder){ani[x]=new alU({agV:x,amB:folder.name,agd:amJ(folder.folders)||{},ams:folder.parent.folderkey,NTN_sDisplayClass:(SHARED||folder.shared=='no'||folder.shared==''?'':'nav-linked-folder'),UU:(parseInt(folder.folder_count,10)>0?'yes':'no')});});WU.agY.Wr=ani;}catch(e){asO(e,'MYF:auA.anf()');}};Od.aHc=function(folder,noRoot){var aHp=Od.agY.Wr;if(noRoot){$.each(folder.folders,function(x,sD){if(!aHp[sD.folderkey]){Od.ans(sD);}});}else{Od.ans(folder);$.each(folder.folders,function(x,sD){if(!aHp[sD.folderkey]||aHp[sD.folderkey].agd.length<folder.folders.length){Od.ans(sD,(tH.folders.memory[folderkey].Zp().length<tH.azm)?'false':'true');}});}};return Od;};function aTU(){$.subscribe('myaccount/loaded',function(atA){auA.amK=atA;auA.ane();auA.amW();});$.subscribe("folder/nav_expand",function(folderkey){var acS=tH.myaccountfolders[folderkey];if(SHARED&&acS&&(!acS.folders||$.isEmptyObject(acS.folders))){aHa.aGU(acS,null,function(Uy){$.each(Uy.folders,function(x,abV){abV.parent=acS;tH.myaccountfolders[abV.folderkey]=abV;});auA.aHc(Uy);auA.aPN(folderkey);},true);}});};function aev(){$selectionactions.delegate("div[data-command]","dragover",NQ).delegate("div[data-command]","dragend",function(e){$(this).unbind('dragover drop');mainList.XF(e);}).delegate("div[data-command]","drop",function(e){var $this=$(this),cmd=$this.data("command"),selected=OK();var Lu={};if(tH.MYF_oSelected&&tH.MYF_oSelected.files.length){Lu=tH.files.yx(selected.files.split(",")[0]);}else{Lu=tH.folders.yx(selected.folders.split(",")[0]);}var aGM=Lu.parent.folderkey;var acH=tH.folders.yx(aGM);var aVj=(aek|| !aTB(acH));switch(cmd){case "view-items":aRM();break;case "move":if(aVj){GH.aFW.open(selected.files,selected.folders);}else{GH.aai.open(selected.files,selected.folders);}break;case "copy-items":GH.aFW.open(tH.MYF_oSelected);break;case "copy-item":GH.aFW.open(tH.MYF_oSelected);break;case "delete":GH.yw.open(selected.files,selected.folders);break;case "download":adI();break;case "share":R(tH.MYF_oSelected);break;case 'save-to-account':if(aZe)GH.avb.open(selected.files);else blX("RequireLogin");break;default:try{console.warn("unrecognized command");}catch(e){}break;}$("#container").removeClass("drag_active");$("#dragIcon").hide();$this.removeClass('folder_highlight');aeV(e);return false;}).delegate('span[data-command]','mousedown',function(e){var $this=$(this);var cmd=$this.data('command');switch(cmd){case 'view-items':aRM($('a',$this));break;}}).delegate('span[data-command]','click',function(e){var $this=$(this);var cmd=$this.data('command');var selected=mainList.WP();var Lu={};if(tH.MYF_oSelected&&tH.MYF_oSelected.files.length){Lu=tH.files.yx(tH.MYF_oSelected.files[0]);}else if(tH.MYF_oSelected.folders.length){Lu=tH.folders.yx(tH.MYF_oSelected.folders[0]);}var aGM=Lu.parent.folderkey;var acH=tH.folders.yx(aGM);var aVj=(aek|| !aTB(acH));var aTh=0;if(!aTB(acH)){aTh=NZ(acH);}switch(cmd){case 'view-items':return true;break;case 'move':if(aVj&& !window.afv()&&aTh!=2&&aTh!=3){GH.aFW.open(tH.MYF_oSelected.files,tH.MYF_oSelected.folders);}else{GH.aai.open(tH.MYF_oSelected.files,tH.MYF_oSelected.folders);}break;case 'copy-items':GH.aFW.open(tH.MYF_oSelected);break;case 'copy-item':GH.aFW.open(tH.MYF_oSelected);break;case 'delete':case 'purge':if(bfw())LF.bet(tH.MYF_oSelected.files.join(),tH.MYF_oSelected.folders.join(),true);else GH.yw.open(tH.MYF_oSelected.files,tH.MYF_oSelected.folders);break;case 'restore':GH.aXh.open({success:function(aNX){LF.YO(tH.MYF_oSelected.files.join(),tH.MYF_oSelected.folders.join(),aNX);}});break;case 'download':adI();break;case 'share':R(tH.MYF_oSelected);break;case 'save-to-account':if(aZe){GH.avb.open(selected.files);}else{blX("RequireLogin");}break;default:try{console.warn('unrecognized command');}catch(e){}}aeV(e);return false;}).find("div[data-command]").unbind("draghover").bind("draghover",function(e){$(this).toggleClass("folder_highlight",e.enter);});};function aUd(){var aYo=function(){var aeS={folders:[tH.currentFolder.folderkey]};if(aek&&afQ&&tH.currentFolder.folderkey==tH.root.folderkey){aeS={folders:ajm(tH.currentFolder.folders),files:ajm(tH.currentFolder.files)};}akO(aeS);};var aSR=function(){aMk(tH.currentFolder.folderkey);};var aYa=function(){var aeS={folders:[tH.currentFolder.folderkey]};if(aek&&afQ&&tH.currentFolder.folderkey==tH.root.folderkey){aeS={folders:ajm(tH.currentFolder.folders),files:ajm(tH.currentFolder.files)};}if(!afQ){var sD=tH.currentFolder,iPermissions=0,bShared=false;if(!aTB(sD)){bShared=true;iPermissions=NZ(sD);}}R(aeS);};$MYF_oFolderActions.delegate("#current_folder_download","click",function(e){aYo();aeV(e);});$MYF_oFolderActions.delegate("#new_folder_trigger","click",function(e){GH.abV.open(tH.currentFolder.folderkey);aeV(e);});$MYF_oFolderActions.delegate("#current_folder_share","click",function(e){aYa();aeV(e);});$('#headerControlsMyFiles').delegate("#inactive_uploadMenu","click",function(e){Zi(0,"Sorry, you do not have permission to upload to this folder.");aeV(e);}).delegate("#inactive_createMenu","click",function(e){Zi(0,"Sorry, you do not have permission to create a folder in this folder.");aeV(e);}).delegate("#inactive_createFile","click",function(e){Zi(0,"Sorry, you do not have permission to create a file in this folder.");aeV(e);}).delegate("#trash_restoreAll","click",function(e){GH.aXh.open({success:function(aNX){var aBu=new window.tH.aCa(window.aCQ||0);bed(function(beV){LF.YO(beV.files,beV.folders,aNX);});}});aeV(e);}).delegate("#trash_deleteAll","click",function(e){LF.MYF_mEmptyTrash(window.aCQ||0,true);aeV(e);}).delegate("#createMenu","click",function(e){GH.aRo.open('txt');});$("#shareMenu a").click(function(){var cmd=$(this).data("command");switch(cmd){case "download-folder":aYo();break;case "share-folder":aYa();break;case "unfollow-folder":aSR();break;}return false;});};function aet(){$("#upload_to_current_folder .show_uploader").click(function(){LF.ZR();Mj(tH.currentFolder.folderkey|"myfiles");});$("#emptyfolder_manual_upload").click(function(){LF.ZR();Mj(tH.currentFolder.folderkey|"myfiles");});$("#upload_to_current_folder").find(".dropdown").dropdown();$("#upload_from_web, #webUploadIndicator").click(function(){if(aZS){LoadIframeLightbox('/dynamic/webupload.php?folderkey='+tH.currentFolder.folderkey,700,420,false,false,true);}else{blu('/templates/web_upload/web_upload_upsell.php',600,450);}});};function aEo(){var $wrap=$("#container"),count=0,available=0,wb={};wb.Start=function(e){var dt=e.originalEvent.dataTransfer;dt.setData("Text",JSON.stringify(OK()));};wb.XF=function(e){$(".folder_highlight").removeClass("folder_highlight");};wb.ajP=function(){if(window.afv())return "aRL";else return "currentFolder";};wb.WI=function(ahO){if(ahO)return tH.MYF_oSelected[ahO];else return tH.MYF_oSelected;};wb.WP=function(ahO){if(!ahO)return{files:mainList.WI("files").join(","),folders:mainList.WI("folders").join(",")};else return mainList.WI(ahO).join(",");};wb.VB=function(ahO){if(!ahO)return tH.MYF_oSelected.files.length+tH.MYF_oSelected.folders.length;else return tH.MYF_oSelected[ahO].length;};wb.ZF=function(acm){if(!acm)return false;var ahO=(tH.files.yx(acm))?"files":"folders",Lu=tH[ahO].yx(acm);if(Lu&&$.inArray(acm,tH.MYF_oSelected[ahO])){tH.MYF_oSelected[ahO].push(acm);Lu.selected=true;}};wb.alB=function(acm){if(!acm)return false;var ahO=(tH.files.yx(acm))?"files":"folders",Lu=tH[ahO].yx(acm)||tH[mainList.ajP()][ahO][acm];if(Lu){var aiC=$.inArray(acm,tH.MYF_oSelected[ahO]);if(aiC!= -1){tH.MYF_oSelected[ahO].splice(aiC,1);Lu.selected=false;}}$.publish("list/selection");};wb.adh=function(acm,bmJ){if(!acm){return false;}var ahO=tH.files.yx(acm)?'files':'folders';var Lu=(tH[ahO].yx(acm)||tH[mainList.ajP()][ahO][acm]);if(Lu&&Lu.selected){return false;}if(typeof Lu==='undefined'){return false;}if(mainList.VB('folders')>=tH.aaI||mainList.VB('files')>=tH.aaI){if(!bmJ){var aQX=(mainList.VB('folders')>=tH.aaI)?'folder':'file';Zi(0,"Max "+aQX+" selection reached.<br />Only "+tH.aaI+" "+aQX+"s can be selected at a time.");}return false;}mainList.ZF(acm);$('#main_list li[data-key="'+acm+'"]').addClass('file_selected');$.publish('list/selection');return true;};wb.aNK=function(acm){if(!acm){return false;}mainList.alB(acm);if($("#main_list li[data-key = '"+acm+"']")){$("#main_list li[data-key = '"+acm+"']").removeClass("file_selected");}$.publish("list/selection");return true;};wb.aSn=function(acm){if(!acm){return false;}var ahO=(tH.files.yx(acm))?"files":"folders";var Lu=tH[ahO].yx(acm)||tH[mainList.ajP()][ahO][acm];if(Lu&&Lu.selected){return mainList.aNK(acm);}return mainList.adh(acm);};wb.akV=function(){tH.aSk=true;mainList.aVB(tH.aca);$.publish("list/selection");};wb.aTN=function(act){tH.aSk=false;tH.aQX=false;tH.aWb=false;tH.MYF_oSelected={files:[],folders:[]};if(tH[mainList.ajP()]){$.each(tH[mainList.ajP()].folders,function(){this.selected=false;});$.each(tH[mainList.ajP()].files,function(){this.selected=false;});$.each(tH.folders.memory,function(){this.selected=false;});$.each(tH.files.memory,function(){this.selected=false;});}$mainList.children(".file_selected").removeClass("file_selected");if(!act){$.publish('list/selection');}};wb.aVS=function(ahO){mainList.aTN(true);var aSY=tH.aca;tH.aQX=ahO;if(ahO=="folder"||ahO=="file"){aRs=$.grep(aSY,function(Lu){return((ahO=="file")?Lu.quickkey:Lu.folderkey);});}else{aRs=$.grep(aSY,function(Lu){return(Lu.filetype==ahO);});}var hI='';if(aRs.length){tH.aWb=true;$.each(aRs,function(){var aSF=(this.quickkey)?'file':'folder';if((mainList.VB(aSF+'s')+1)<=tH.aaI){mainList.adh((this.quickkey)?this.quickkey:this.folderkey,true);}else{hI=aSF;}});}if(hI){tH.aWb=false;Zi(0,"Max "+hI+" selection reached.<br>Only "+tH.aaI+" "+hI+"s can be selected at a time.");}$.publish("list/selection");};wb.aVB=function(aHl){tH.MYF_oSelected={files:[],folders:[]};var hI='';$.each(aHl,function(){if((this.shared!="yes"&&this.shared!="child"&&this.shared!=true)||(this.parent.shared=="yes"||this.parent.shared=="child")){var ahO=(this.quickkey)?"file":"folder",acm=(this.quickkey)?this.quickkey:this.folderkey;if((mainList.VB(ahO+'s')+1)<=tH.aaI){tH.MYF_oSelected[ahO+'s'].push(acm);tH[ahO+'s'].yx(acm).selected=true;$("#main_list li[data-key = '"+acm+"']").addClass("file_selected");}else{tH.aWb=false;hI=ahO;}}});if(hI){tH.aSk=false;Zi(0,"Max "+hI+" selection reached.<br>Only "+tH.aaI+" "+hI+"s can be selected at a time.");}};wb.apz=function($input){count=$input.length;};wb.available=available;return wb;};function afo(){$.subscribe("file/move folder/move file/delete folder/delete",function(){mainList.aTN();aua(true);});$.subscribe("selection/deselectall",function(){mainList.aTN();});$.subscribe('list/selection',function(bRobust){var aRO=tH.MYF_oSelected;var adT=mainList.VB();if(adT>0&&(aL('thumbview')==='on')){$('.thumbnailSelect').show();}else{$('.thumbnailSelect').hide();}$('.selected_count').html(adT);$('#myfiles_selection').toggleClass('all_files_selected',(mainList.available&&adT+$('li.collaborate-active').length===mainList.available));if($('#selection-actions').css('display')==='none'){ahb=$('#folder_infobox').outerHeight();}var aga=159-ahb;var bSlideDown=true;if((tH.currentFolder.shared!=='yes'||tH.currentFolder.shared!=='child')&&aRO.folders.length>0){$.each(aRO.folders,function(x){var oTempFolder=window.tH.folders.yx(aRO.folders[x]);if(oTempFolder.shared==='yes'){return bSlideDown=false;}});}if((adT>0||($('#main_list li.file_selected').length>0))&&bSlideDown){$('#folder_infobox').toggleClass('files_selected',adT>0);$('#selection-actions').slideDown(0,function(){$(window).trigger('resize');});}else{$('#selection-actions').slideUp(0,function(){$('#folder_infobox').toggleClass('files_selected',adT>0);$(window).trigger('resize');});}if(adT>0){$mainList.bind('clickoutside',function(e){var $target=$(e.target);if(!$target.parents("#folderTree, #myfiles_controlbar, #myfiles_selection, #contextmenu").length){mainList.aTN();}if(mainList.VB()==0){$mainList.unbind("clickoutside");}aeV(e);});}var MYF_oSelected=tH.MYF_oSelected;if(MYF_oSelected.folders.length){$("#folder_infobox").addClass("selection-hasfolders");$(".file-only-op").hide();}else{$("#folder_infobox").removeClass("selection-hasfolders");$(".file-only-op").show();$(".file-only-op[data-command='save-to-account']").toggle(aek&& !Yb);}if(!MYF_oSelected.files.length){$('#container').addClass('only-folders-selected');}else{$('#container').removeClass('only-folders-selected');}$("#selection-actions span[data-command='share']").toggle(!(MYF_oSelected.files.length>0&&MYF_oSelected.folders.length>0));if(MYF_oSelected.files.length==1&&MYF_oSelected.folders.length==0){var acD;if(afv()){for(var i=0;i<tH.XE.length;i++){var bdf=tH.XE[i];if(bdf&&bdf.quickkey&&bdf.quickkey==MYF_oSelected.files[0]){acD=bdf;break;}}}else{acD=tH.currentFolder.files[MYF_oSelected.files[0]];}$(".file-only-op[data-command='view-items']").toggle(acD&&acD.previewSupported);if(!bfw()){$("#selection-actions span[data-command='share']").show();}else{$("#selection-actions span[data-command='share']").hide();}}if(MYF_oSelected.files.length>1){$.each(MYF_oSelected.files,function(x){var acD;if(afv()){for(var i=0;i<tH.XE.length;i++){var bdf=tH.XE[i];if(bdf&&bdf.quickkey&&bdf.quickkey==MYF_oSelected.files[0]){acD=bdf;break;}}}else{acD=tH.currentFolder.files[MYF_oSelected.files[x]];}if(acD&&acD.filetype!="image"){$("*[data-command='view-items']").hide();}});}if(!aTB(tH.currentFolder)){var iMinPermissions=3;var bShareLinkEnabled=true;if(MYF_oSelected.files.length>0){$.each(MYF_oSelected.files,function(x){var nH=tH.files.yx(MYF_oSelected.files[x]);var iSelectedPermissions=NZ(nH);iMinPermissions=(iSelectedPermissions<iMinPermissions)?iSelectedPermissions:iMinPermissions;if(bShareLinkEnabled)bShareLinkEnabled=nH.privacy&&nH.privacy!="private"?true:false;if(iMinPermissions==0)return false;});}if(MYF_oSelected.folders.length>0&&iMinPermissions!=0){$.each(MYF_oSelected.folders,function(x){var nH=tH.folders.yx(MYF_oSelected.folders[x]);var iSelectedPermissions=NZ(nH);iMinPermissions=(iSelectedPermissions<iMinPermissions)?iSelectedPermissions:iMinPermissions;if(bShareLinkEnabled)bShareLinkEnabled=nH.privacy&&nH.privacy!="private"?true:false;if(iMinPermissions==0)return false;});}$("#selection-actions").toggleClass("showFollowing",iMinPermissions!=0).toggleClass("showFollow",iMinPermissions==0).toggleClass("collab-selection-view",iMinPermissions==1).toggleClass("collab-selection-edit",iMinPermissions==2).toggleClass("collab-selection-manage",iMinPermissions==3).toggleClass("shareLinkDisabled",!bShareLinkEnabled);if((MYF_oSelected.files.length>0&&MYF_oSelected.folders.length>0)||MYF_oSelected.files.length>1||MYF_oSelected.folders.length>1)$("#selection-actions").removeClass("showFollow showFollowing");}else $("#selection-actions").removeClass("showFollow showFollowing collab-selection-view collab-selection-edit collab-selection-manage shareLinkDisabled");if(bRobust){$.each(tH.MYF_oSelected.folders,function(){if($("#folder-"+this))$("#folder-"+this).addClass("file_selected");});$.each(tH.MYF_oSelected.files,function(){if($("#file-"+this))$("#file-"+this).addClass("file_selected");});}});$.subscribe("folder/render",function(){mainList.available=$mainList.children("li").length;});};function ahv(){$("#select_deselect_all").click(function(){if(tH.MYF_oSelected&&(tH.MYF_oSelected.files.length||tH.MYF_oSelected.folders.length)){mainList.aTN();}else{mainList.akV();}});$("#myfiles_selection").find(".dropdown").dropdown(function(cmd){switch(cmd){case "all":mainList.akV();break;case "deselect":mainList.aTN();break;default:mainList.aVS(cmd);break;}});};function afb(es){var $rows=$mainList.children("li").not(".collaborate-active").not('collaborate-disabled');return($rows.length-es.length==mainList.NA().length);};function aof(folder,type){if(type=="folder"){$.each(tH.aca,function(x){if(this.folderkey&&this.shared!="yes"&&this.shared!="child")mainList.adh(this.folderkey);});}else{$.each(tH.aca,function(x){if(this.filetype==type||type=="file"){if(this.quickkey&&this.shared!="yes"&&this.shared!="child")mainList.adh(this.quickkey);}});}$.publish("list/selection",[tH.MYF_oSelected,(tH.MYF_oSelected.files.length+tH.MYF_oSelected.folders.length)]);};function aiS(){var PK=new Image();var MYF_aClipboards=[];PK.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';$mainList.bind("clickoutside",function(e){aeV(e);}).delegate("li.folder, li.file","mouseenter",function(e){$(this).addClass("row_focus");aeV(e);}).delegate("li.folder, li.file","mouseleave",function(e){$(this).removeClass("row_focus");$(this).removeClass("folder_highlight");aeV(e);}).delegate("li.folder, li.file","contextmenu",function(e){if(tH.Pz){var afs="#"+$mainList.find(".updatename").not(":hidden").closest("li").attr("id");aTP(afs);}if(tH.MYF_oSelected&&tH.MYF_oSelected.files.length>0&&tH.MYF_oSelected.files&&tH.MYF_oSelected.files.indexOf($(this).data("key"))== -1&&tH.MYF_oSelected.folders.indexOf($(this).data("key"))== -1){mainList.ZF($(this).data("key"));}aeV(e);var mode,data,$this=$(this);$.each($(".row_context"),function(){if(!$(this).hasClass("file_selected"))mainList.alB($(this).data("key"));});if((tH.MYF_oSelected.files.length+tH.MYF_oSelected.folders.length)>1){mode="multiple";data=mainList.WP();}else{mode=$this.is(".file")?"file":"folder";data=$this.data("key");}contextMenu.open("mainlist",mode,aiH(e,-2,-2),data);return false;}).delegate("li.folder, li.file","click",function(e){var $selected=mainList.WI(),$row=$(this),$target=$(e.target);var Lu=tH[($row.hasClass('file')?'files':'folders')].yx($row.data('key'));if($target.hasClass('item-name')&& !(Lu&&Lu.delete_date))return;if($target.hasClass("collaborate-active")||$target.hasClass("collaborate-disabled")||$target.closest('li').hasClass("collaborate-active")||$target.closest('li').hasClass("collaborate-disabled")){mainList.aTN();aeV(e);return;}if(contextMenu.isVisible()){contextMenu.aoh();}if($target.is('a.sharedByUser')){if(Lu.quickkey){R({files:[Lu.quickkey]});}else{R({folders:[Lu.folderkey]});}}if($target.is(".updatename")||$target.is(".btns_column")||$target.parents(".btns_column").length||$target.is(".foldername")||$target.is("a")||$target.is("span.dropbox")){aeV(e);return;}if(tH.Pz){var afs="#"+$mainList.find(".updatename").not(":hidden").closest("li").attr("id");aTd($(afs).data('key'),($(afs).hasClass('file')?'file':'folder'));}if(mainList.VB()<=0){mainList.aTN();}if(e.shiftKey&&mainList.VB()){if(BrowserName()=="Internet Explorer"&&Bm()=="9.0")document.onselectstart=function(){return false;};if(document.selection)document.selection.empty();else if(window.getSelection)window.getSelection().removeAllRanges();var targetIndex,selectedIndex,targetType;function bcF($row){var bdc=$row.hasClass("file")?"files":"folders";return tH[bdc].yx($row.data('key')).itemrownum;};function bdN($row){if(mainList.VB()==1){var aSF=(mainList.VB("files")>0)?"files":"folders",acm=(aSF=='files')?mainList.WI("files")[0]:mainList.WI("folders")[0];return tH[aSF].yx(acm).itemrownum;}else{var bcK=bcF($row);if(bcK<$(".file_selected").first().data("rownum"))return $(".file_selected").last().data("rownum");else return $(".file_selected").first().data("rownum");}};selectedIndex=bdN($row);targetIndex=bcF($row);if(targetIndex!=selectedIndex){var aRs=[];if(targetIndex>selectedIndex)aRs=tH.aca.slice(selectedIndex,(targetIndex+1));else aRs=tH.aca.slice(targetIndex,(selectedIndex+1));$.each(aRs,function(x,item){var MYF_sKeyType=this.quickkey?'quickkey':'folderkey',MYF_bSelected=false,MYF_aTempSearch=tH.MYF_oSelected[MYF_sKeyType=='quickkey'?'files':'folders'];for(var i=0;i<MYF_aTempSearch.length;i++){if(MYF_aTempSearch[i]==this[MYF_sKeyType]){MYF_bSelected=true;break;}}if(!MYF_bSelected)mainList.ZF(this[MYF_sKeyType]);});$.publish("list/selection",true);}if(BrowserName()=="Internet Explorer"&&Bm()=="9.0"){window.setTimeout(function(){document.onselectstart=null;},1000);}}else{mainList.aSn($row.data('key'));}aeV(e);if(Lu&&Lu.delete_date)return false;}).delegate("li.folder a.download, li.file a.download","click",function(e){akO(adn(e));aeV(e);}).delegate("li.folder a.share, li.file a.share","click",function(e){R(adn(e));aeV(e);}).delegate("li.folder a.foldername","click",function(e){var afA=$(this).closest('li.folder').data("key"),tg=tH.folders.yx(afA);if(tg&&tg.delete_date){mainList.aSn(afA);aeV(e);return false;}if(afA==window.location.hash.slice(1)){aeV(e);return false;}}).delegate("li a.filetype_column","click",function(e){aeV(e);}).delegate("li.file a.nonshareableMark","click",function(e){if(!aZS){var data=$(this).closest('li').data("key");var tg=tH.files.yx(data);LoadIframeLightbox('/templates/archive_sharing_info.html',720,280,false,false,true);var checkLoadedState_Timer=null;var checkLoadedState=function(){try{if($('#modal_msg_iframe').contents().find('.mp_plan').length<=0){checkLoadedState_Timer=setTimeout(checkLoadedState,50);}else{$("#modal_msg_iframe").contents().find(".filename").text(tg.filename);$.each($('#modal_msg_iframe').contents().find('.mp_plan'),function(){var sPlanString=$(this).data('plan-string'),aPlanPricing=(oPricingData[sPlanString].length>0?oPricingData[sPlanString]:null).split('.');$(this).find(".monthly_text").text(aPlanPricing[0]);$(this).find(".cents").text(aPlanPricing[1]);});}}catch(e){}};checkLoadedState_Timer=setTimeout(checkLoadedState,50);}aeV(e);}).delegate("li.file a.dmcaReviewMark, li.file a.statusDMCAReview","click",function(e){var data=$(this).closest('li').data("key");var tg=window.tH.files.yx(data);var awR=[];LoadIframeLightbox('/templates/dmca_lightbox.html',500,475);if(!tg.dmca_company){awS(tg,function(ajz){setTimeout(function(){awQ(ajz,[data]);},500);});}aeV(e);}).delegate('li.file a.fileInfected','click',function(e){var aUW=$(this).closest('li').find('.item-name').text();LoadIframeLightbox('/templates/bitdefender/bitdefender.php',800,675,false,false,true);$('#modal_msg_iframe').on('load',function(){$(this).contents().find('.bdFileTitle').text(aUW);});aeV(e);}).delegate("div.search_details span.file_location a","click",function(e){if($(this).attr('href')==window.location.hash)$(window).hashchange();}).delegate("a.fileoptions","click",function(e){var aZz,arO,aYO=$(window),aZw=$(this),aYf=aZw.closest("li"),aZj=aZw.offset(),aWa=false,aYb=false;if((tH.MYF_oSelected.files.length+tH.MYF_oSelected.folders.length)>1&&ahz(aYf.data("key"))){aZz="multiple";arO=OK();}else{aZz=aYf.is(".file")?"file":"folder";arO=aYf.data("key");}if(aZj){if(aZj.left>aYO.width()/2){aZj.left+=aZw.outerWidth();aWa=true;}if(aZj.top-aYO.scrollTop()>aYO.height()/2){aYb=true;}else{aZj.top+=aZw.outerHeight()+1;}}contextMenu.CD("mainlist",aZz,aZj,arO,aWa,aYb);aeV(e);}).delegate("li.folder, li.file","dragstart",function(e){if($(this).find(".updatename").is(":visible"))return false;mainList.adh($(this).data("key"));var key=$(this).data("key"),type=$(this).hasClass("folder")?"folder":"file",item=type=='folder'?tH.folders.yx(key):tH.files.yx(key),acH=tH.currentFolder,aUv=(aek|| !aTB(acH)),iPermissions=0;$("#container").addClass("drag_active");if(aUv){iPermissions=NZ(acH);}if(type=='file'&&item&&item.parent&&item.parent.files&&parseInt($(".selected_count").html())==1&&(!aUv||iPermissions==2||iPermissions==3)){$.each(item.parent.files,function(x,aZL){if(aZL.quickkey!=item.quickkey&&aZL.filetype!="image"&&item.filetype!="image"&&avH(aZL.flag,3)==0){$('#file-'+aZL.quickkey).addClass('file_droppable').bind('draghover',function(e){$(this).toggleClass('folder_highlight',e.enter);$("#container").unbind("drop.fileupdate");}).bind("drop.fileupdate",function(e){GH.GA.open($(this).data('key')+","+item.quickkey);return false;});}});}function aGt(item){var aFO=[];var iPermissions=0;if(aUv)iPermissions=NZ(item);var aGZ='moving';if(item.parent.folderkey=='trash')aGZ='restoring';else if(aUv&&iPermissions!=2)aGZ='copying';var aGS=($("li.file_droppable").length>0&& !aUv)?aGZ+"/updating":aGZ;$("li.file_selected").each(function(i){if($(this).hasClass('folder')){aFO[i]=parseInt($(".selected_count").html())==1?"folder":"folders";}else{aFO[i]=parseInt($(".selected_count").html())==1?"file":"files";}});var aFe=aFO.filter(function(itm,i,aFO){return i==aFO.indexOf(itm);});if(aFe.length>1){aFT="folders &amp; files";}else{aFT=aFe[0];}if(!$('body').is('.windows.safari')){$("#dragIcon span").html($(".selected_count").is(":visible")?$(".selected_count").html():"1");$("#dragIcon strong").html(aGS+" "+aFT+" ");var aFJ=$("#myfiles_wrap").width()-$("#dragIcon").width()-42;if('setDragImage'in e.originalEvent.dataTransfer){$("#dragIcon").show();e.originalEvent.dataTransfer.setDragImage(PK,0,0);}$("body *").bind("dragover",function(e){$("#dragIcon").css('top',e.originalEvent.pageY+10).css('left',(e.originalEvent.pageX<aFJ)?e.originalEvent.pageX+10:null).css('z-index',9999);});}};aGt(item);mainList.Start(e);}).delegate("li.folder, li.file","dragend",function(e){$(this).removeClass('folder_highlight');$("li.file_droppable").unbind('dragover drop').removeClass('file_droppable');$("#container").removeClass("drag_active");$("#dragIcon").hide();mainList.XF(e);var MYF_oSelected=tH.MYF_oSelected;if((tH.currentFolder.shared!="yes"||tH.currentFolder.shared!="child")&&MYF_oSelected.folders.length>0){$.each(MYF_oSelected.folders,function(x){var oTempFolder=tH.folders.yx(MYF_oSelected.folders[x]);if(oTempFolder.shared=="yes"){mainList.aTN();}});}}).delegate("li.folder, li.file","dragover",function(e){var bIsFolder=false;if(this.id.split('-')[0]=='folder')bIsFolder=true;else{$("#main_list .folder_highlight").removeClass("folder_highlight");return;}var $oHighlightedFolders=$("#main_list .folder_highlight");if($oHighlightedFolders.length>1){$oHighlightedFolders.removeClass("folder_highlight");}if(bIsFolder&& !$(this).hasClass('folder_highlight')){$(this).addClass('folder_highlight');}NQ(e);}).delegate("li.folder","drop",abh).delegate("li.file","drop",function(e){$("#dragIcon").hide();try{var XU=e.dataTransfer||e.originalEvent.dataTransfer;if(!XU.types.contains("Files"))NQ(e);abh(e);}catch(e){}}).delegate("li.file a.private","click",function(e){var $row=$(this).closest("li");GH.abB.open("public",$row.data("key"));aeV(e);}).delegate("li.file a.public","click",function(e){var $row=$(this).closest("li");GH.abB.open("private",$row.data("key"));aeV(e);}).delegate("li.folder a.private","click",function(e){var $row=$(this).closest("li");GH.abz.open("public",$row.data("key"));aeV(e);}).delegate("li.folder a.public","click",function(e){var $row=$(this).closest("li");GH.abz.open("private",$row.data("key"));aeV(e);}).delegate("li.file a.password","click",function(e){var $row=$(this).closest("li");GH.aim.open($row.data("key"),true);aeV(e);}).delegate("a.rowTrashBtn.gbtnTertiary","click",function(e){var $row=$(this).closest("li"),bfm=$row.data("key"),bem=$row.hasClass('file');LF.bet(bem?bfm:'',!bem?bfm:'',true);aeV(e);}).delegate("a.rowTrashBtn.gbtnPrimary","click",function(e){var $row=$(this).closest("li"),bfm=$row.data("key"),bem=$row.hasClass('file');GH.aXh.open({success:function(aNX){var afA= !bem?bfm:'',bfb=bem?bfm:'';LF.YO(bfb,afA,aNX);}});aeV(e);}).delegate('li.mf_filecontainer.public','mouseenter',function(){var jItemRow=$(this);var sItemType=jItemRow.hasClass('folder')?'folder':'file';var jCopyButton=jItemRow.find('a.shareLinkEnabled');var jToolTip=jCopyButton.find('.tooltip');var aiK=tH[sItemType+'s'].yx(jItemRow.data('key'));var hg="Share link is enabled for this "+sItemType+".";if(typeof aiK==='undefined'){hg="Unable to find resource.";}else if(Clipboard.isSupported()){hg+="<br />Click to copy link.";MYF_aClipboards.forEach(function(e){e&&e.destroy();});MYF_aClipboards=[];var sCopyText=aiK.clickLink;if(!sCopyText){sCopyText=agW(aiK);}var oClipboard=new Clipboard(jCopyButton[0],{text:function(trigger){return sCopyText;}});oClipboard.on('success',function(e){Zi(0,"Copied to Clipboard");});}jToolTip.html(hg);});};function alm(){$("#viewtab1").click(function(){if(!$(this).hasClass('changeview_active')){$('#main_list').empty();$(this).addClass("changeview_active").siblings("div").removeClass("changeview_active");$("#myfiles_wrap").removeClass("thumbnailView sizeS sizeM sizeL").addClass("listView");aU('thumbview','off',1);aPC();$.publish('view/changemode');$(window).resize();}return false;});$("#viewtab2").click(function(){if(!$(this).hasClass('changeview_active')){if(!$("#container").hasClass("searchmode")){$('#main_list').empty();}$(this).addClass("changeview_active").siblings("div").removeClass("changeview_active");var aPv=function(){var sSizeClass="";if(aL('mfsize')){sSizeClass="size"+aL('mfsize');}else{sSizeClass="sizeS";}return sSizeClass;};$("#myfiles_wrap").removeClass("listView sizeS sizeM sizeL").addClass("thumbnailView "+aPv());aU('thumbview','on',1800);aOV();$.publish('view/changemode');}return false;});};function aOV(){if(!afv())tH.XY();};function aPC(){if(!afv())tH.XY();};function bgC(bhx,bhB){$("#container").removeClass(bhB).addClass(bhx);var $MYF_oSortElement=$('#myfiles_sortcontrol li[data-command="'+bhx.split('-')[1]+'"]'),aZl=$MYF_oSortElement.text();if($MYF_oSortElement.length>0){$('#sort_current').html(aZl+' <span class="arrow_down"></span>');$MYF_oSortElement.find('span').addClass('arrow_down');}sortBy='name';$.publish('list/sort');};function bfi(){bgC('sort-expire','sort-created sort-size sort-downloads sort-relevancy');$("#container").addClass("trashMode");};function bff(){if($('#container').hasClass('sort-expire')){bgC('sort-created','sort-expire');}if($('#container').hasClass('sort-date')){bgC('sort-created','sort-date');}$("#container").removeClass("trashMode");};function bfw(){return $("#container").hasClass("trashMode");};function aeT(){tH.aVy=true;$('#viewtab1, #viewtab2').hide();$("#container").addClass("searchmode");};function afv(){return $("#container").hasClass("searchmode");};function adz(){return $("#container").hasClass("searchresults");};function aGn(afE,aKZ){var MYF_iItemCount=afE.length;for(var i=0;i<MYF_iItemCount;i++){var bhc=(afE[i].type==='file')?'Cp':'yJ';afE[i]=new tH[bhc](afE[i]);}aeT();$('#main_list').css({margin:0});$('#search_all_folders').toggle(afE.length?false:true);if(!aKZ&&aGy.folderkey!=='myfiles'){$('#search_all_btn').show().on('click',function(e){afB(tH.folders.yx('myfiles'),$('#search').val(),true);tH.aVy=true;aeV(e);return false;});$('#no_results_folder').text('this folder');}else if(aKZ===true||aGy.folderkey==='myfiles'){$('#search_all_btn').hide();$('#no_results_folder').text('all folders');}else{$('#search_all_folders').hide();}$('#container').addClass('searchresults');$(window).trigger('resize');tH.XE=afE;setTimeout(function(){sortBy='relevancy';sortAscending=true;$('#sort_current span').trigger('click');$('#sort_current').html('Match <span class="arrow_down"></span>');MYF_fHideSpinner('search');},0);};function afB(sD,aes,aKZ,aee){if(aes.toLowerCase()==="let it snow")bnA();if(bfw())bff();aKZ=true;tH.aRL={files:{},folders:{}};MYF_fShowSpinner('search');tH.aYp=tH.aYp?true:UO();if(tH.aYp)$('#viewtab1').click();aes=aes||'';if(aes.length>=3){aGy=sD;aHa.aIX(sD.folderkey);aHa.aGY(sD,aes,aKZ,filterBy,{success:function(data){var aFY=data.response.results,aFt=[];aGT=[];$.each(aFY,function(x,item){if(item.type==="file")if(tH.currentFolder.files[item.quickkey])tH.aRL.files[item.quickkey]=tH.currentFolder.files[item.quickkey];else aFt.push(item.quickkey);else if(tH.currentFolder.folders[item.folderkey])tH.aRL.folders[item.folderkey]=tH.currentFolder.folders[item.folderkey];else aGT.push(item.folderkey);});if(aFt.length||aGT.length){if(aFt.length){window.tH.Cp.asi(aFt,{success:function(data){if(aFt.length===1){var acD=new tH.Cp(data.response.file_info);tH.aRL.files[acD.quickkey]=acD;}else{$.each(data.response.file_infos,function(x,file){var acD=new tH.Cp(file);tH.aRL.files[acD.quickkey]=acD;});}if(aGT.length){window.tH.yJ.asi(aGT,{success:function(data){if(aGT.length===1){var adj=new tH.yJ(data.response.folder_info);tH.aRL.folders[adj.folderkey]=adj;}else{$.each(data.response.folder_infos,function(x,folder){var adj=new tH.yJ(folder);tH.aRL.folders[adj.folderkey]=adj;});}aGn(aFY);}});}else{aGn(aFY,aKZ);}}});}else if(aGT.length){window.tH.yJ.asi(aGT,{success:function(data){if(aGT.length===1){var adj=new tH.yJ(data.response.folder_info);tH.aRL.folders[adj.folderkey]=adj;}else{$.each(data.response.folder_infos,function(x,folder){var adj=new tH.yJ(folder);tH.aRL.folders[adj.folderkey]=adj;});}aGn(aFY);}});}}else{aGn(aFY,aKZ);}},error:function(){try{console.warn('error searching files and folders.');}catch(e){}}});}};function aec(sD,aes){var Wi={data:{search_text:aes,version:2.5}};if(sD.folderkey!='myfiles'&&sD.folderkey!=''){Wi.data.folder_key=sD.folderkey;}var afi=0;var oItems=function(){sD.aFG(Wi,function(results){return results;});}};function MYF_SearchMode_fSortList(){var aio={},aiv={};$.each(window.tH.XE,function(x,Lu){if(Lu){if(Lu.filename){aiv[Lu.quickkey]=Lu;}else{aio[Lu.folderkey]=Lu;}}});var Zd=[],Zc=[],YD=[];if(sortBy=='relevancy'){Zd=$.values(aio);Zc=$.values(aiv);YD=Zd.concat(Zc).sort(YT.relevancy);}else{Zd=$.values(aio).sort(YT.folder[(sortBy=='created'?'created':'name')]);Zc=$.values(aiv).sort(YT.file[sortBy]);YD=Zd.concat(Zc);}if(!sortAscending){YD.reverse();}aoP(YD,true);};function aft(aCL,aYq){if(tH.currentFolder.folderkey=='trash')bfi();tH.aVy=true;tH.aRL={files:{},folders:{}};tH.XE=[];var Nx=$("#search-text").val().length?true:false;$("#search-text").val("").attr('placeholder','Search').blur();if(!aCL){aBe();}if(afv()&&(Nx||aYq)){aBe();$("#container").removeClass("searchmode searchresults searchmode_filter sort-relevancy");$("#search_all_folders").hide();$('#viewtab1, #viewtab2').show();if(tH.aYp)$('#viewtab2').click();tH.aYp=null;if(typeof tH.XE!="undefined")$.each(tH.XE,function(aea){delete aea.relevancy;});window.tH.XE&&delete window.tH.XE;window.tH.aca=[];var aLb=bfw();if(sortBy=="relevancy"||aLb){var Qo=(aL('mfsf-'+UserEmail)),dD=(Qo&&Qo!='relevancy')?Qo:'name',$MYF_oSortElement=$('#myfiles_sortcontrol li[data-command="'+dD+'"]');if($MYF_oSortElement.length>0&&dD!='name'&& !aLb)$MYF_oSortElement.click();else{var bfP=aLb?'expire':'created';sortAscending=true;if(aLb){abH(tH.currentFolder,true);$("#container").addClass("sort-"+bfP);sortBy='name';$.publish('list/sort');}else{$('#myfiles_sortbyname').click();$("#container").addClass("sort-"+bfP);}var $MYF_oSortElement=$('#myfiles_sortcontrol li[data-command="'+bfP+'"]'),aZl=$MYF_oSortElement.text();if($MYF_oSortElement.length>0){$('#sort_current').html(aZl+' <span class="arrow_down"></span>');$MYF_oSortElement.find('span').addClass('arrow_down');}}}else{}}else if($("#container").hasClass("searchmode_filter")&& !aCL&& !afv()){$("#myfiles_filtercontrol li[data-command='all']").click();$("#search-text").val("").attr('placeholder','Search').blur();$("#container").removeClass("searchmode_filter");}};function afJ(){$("#search_delete_button1, #search_exit_msg").click(function(e){aft(false,true);});if(filterBy!="all")$.subscribe("folder/render");else $.subscribe("folder/render",aft);$('#viewAllImagesToolTip').click(function(e){aft();});$("#search-text").focus(function(){aeT();});$("#search-text").bind("keydown","esc",function(){aft(false,true);});$("#search-text").bind("keydown",debounce(function(e){aoK(e);},400));$(".searchWrap").bind("clickoutside",function(e){if(afv()&& !$("#search-text").val())aft(false,true);else return;});};var MYF_oSpinnerCauses={};function MYF_fShowSpinner(MYF_sCause){var MYF_bSpinnerShowing= !$.isEmptyObject(MYF_oSpinnerCauses);MYF_oSpinnerCauses[MYF_sCause]=true;if(MYF_bSpinnerShowing){return;}$('body').addClass('pageSpinner');$('#main_files_container').css('opacity',0.5);};function MYF_fHideSpinner(MYF_sCause){if($.isEmptyObject(MYF_oSpinnerCauses)){return;}delete MYF_oSpinnerCauses[MYF_sCause];if(!$.isEmptyObject(MYF_oSpinnerCauses)){return;}$('body').removeClass('pageSpinner');$('#main_files_container, #folderTree').css('opacity','');};function aqU(vU){var apF=['*','?','\\','/'];var aqt=new RegExp('(\\'+apF.join('|\\')+')','g');return(''+vU).replace(aqt,' ');};function aoK(e){e=e||window.event;if(e.keyCode==27){return aft();}if(!e.target.value||(e.target.value+'').replace(' ','').length==0)MYF_fHideSpinner('search');var adK=aqU(e.target.value);if(e.keyCode==13){aeT();if(adK.length<3){Zi(0,"The search term must be at least 3 characters in length.");}else if(adK.length){afB(window.tH.currentFolder,adK,$("input[name='searchscope']:checked").val()=="global");}}$(window).scrollTop(0);};function abh(e,arh){var items;if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"))){var afA=arh||$(this).data("key");LF.YO(items.files,items.folders,afA);}if(e)aeV(e);mainList.aTN();return false;}};function aIh(e,arh){var items;if(!e.originalEvent.dataTransfer.files||e.originalEvent.dataTransfer.files.length==0){if(items=JSON.parse(e.originalEvent.dataTransfer.getData("Text"))){var afA=arh||$(this).data("key");LF.aFI(items.files,items.folders,afA);}if(e)aeV(e);mainList.aTN();return false;}};function aTw(aSU){return(function(){var ahR=this;var Dq=function(){ahR=this;if(auA){auA.$list.filter(".selectable").delegate("a.folder_name","click",function(e){var $this=$(this),$list=$this.closest(".myaccountlist_content");$("#save-create-subfolder-content").hide();$("#save-create").show();$("#save-create-subfolder-name").val("");$list.find(".current_folder_location").removeClass("current_folder_location");$this.closest("li").addClass("current_folder_location expanded").removeClass("collapsed");return false;});}};var abU=function(){$("input").blur();$(".popup:visible").find(".popup-close").click();};$(".popup_content").delegate("keydown","esc",abU);$("#page_screen").click(function(e){$(".popup:visible").find(".popup-close").click();aeV(e);});var afh;var MYF_aPopupClipboards=[];if(aSU>=0){afh=(function(){var $form=$("#create_dropbox_popup").popup(),popup=$form.data("popup");function open(Bz){if(Bz=='popup')popup.open();else zW(Bz,0);if(Clipboard.isSupported()){MYF_aPopupClipboards.forEach(function(e){e&&e.destroy();});MYF_aPopupClipboards=[];var oDropBoxCopyLink=new Clipboard($('#dropbox-copy-link')[0],{text:function(){return $('#dbx_text_embeded').val();}});var oHostedFileDropCopyLink=new Clipboard($('#hostedfiledrop-copy-link')[0],{text:function(){return $('#hostedfiledrop_text_share').val();}});var showCopyNotification=function(e){Zi(0,"Copied to Clipboard");};oDropBoxCopyLink.on('success',showCopyNotification);oHostedFileDropCopyLink.on('success',showCopyNotification);MYF_aPopupClipboards.push(oDropBoxCopyLink);MYF_aPopupClipboards.push(oHostedFileDropCopyLink);}else{$('#dropbox-copy-link').hide();$("#hostedfiledrop-copy-link").hide();}};return{open:open,popup:popup,close:popup.close};})();}else{afh=(function(){var $form=$("#create_dropbox_popup").popup(),popup=$form.data("popup");function open(Bz){popup.open();};return{open:open,popup:popup,close:popup.close};})();}aij("#dbx_input_header","span.fileDropPreviewCount",parseInt($('#dbx_input_header').attr('maxlength'),10),true,false,true);var avb=alT('#form-save',templates);var apJ=(function(){var $popup=$("#bulk-download-confirm").popup(),popup=$popup.data("popup"),apR;function open(oFilesToZip){apR=oFilesToZip;$popup.find("#bulk-download-confirm-items").html(oFilesToZip.count);popup.open();$popup.find('.confirm').focus();};$popup.delegate(".confirm","click",function(e){if(aME)aME={};LF.aUA(apR.keys);popup.close();aeV(e);});awJ($popup,true,true);return{open:open,popup:popup,close:popup.close};})();var aai=awP('#form-move',templates);var aFW=aFj('#form-copy',templates);var aXh=aIt('#form-dest',templates);var aUD=aVH('#upload-existing-file-conflict',templates);var abV=ri('#create-folder',templates);var yw=avA("#delete-folders-files",templates);var abB=avx('#privacy-file','file',templates);var MYF_oFileChoice=aRC('#action-choice-file',templates);var aNJ=aOx('#collaborate-file',templates);var abz=avx('#privacy-folder','folder',templates);var aby=awZ("#details-file",'file',templates);var abC=awZ("#details-folder","folder",templates);var aRo=bdt("#create-file","file",templates);var GA=awo('#update-file',templates);var aim=avk('#password-file',templates);var arW=asx('#rss-share-popup',templates);var ajj=ayB('#create_new_account_popup',templates);var Xv=(function(){var gH=CreateSharePopup('sharebox',templates);function Oh(NN){var avT=$('#sharebox').find('.share-popup');if(avT&&NN){avT.addClass(NN);}};function open(context){var files=((typeof context.files=="string"&&context.files.length>0)?context.files.split(","):context.files)||[],folders=((typeof context.folders=="string"&&context.folders.length>0)?context.folders.split(","):context.folders)||[];gH.Clear();$.each(files,function(x,key){var tg=tH.files.yx(key);if(!tg){tg=window.tH.currentFolder.files[key];}var aTa=aek||tg.shared;if(tg.permissions){if(NZ(tg)===3){aTa=false;}}var boc=(tg.privacy=="private");if(tg.share_link_enabled!==undefined&&tg.share_link_enabled!='yes')boc=true;gH.ald(tg.quickkey,tg.filename,tg.size,tg.filetype,tg.hash,aCf(tg),boc,aTa,NZ(tg));});$.each(folders,function(x,key){var tg=tH.folders.yx(key);if(!tg){tg=window.tH.currentFolder.folders[key];}var aTa=aek||tg.shared===true||tg.shared=="yes";if(tg.permissions){if(NZ(tg)===3){aTa=false;}}var boc=(tg.privacy=="private");if(tg.share_link_enabled!==undefined&&tg.share_link_enabled!='yes')boc=true;gH.akb(tg.name,tg.folderkey,boc,aTa,NZ(tg));});var aAk=function(aXp){var mH=[];var aEw=[];$.each(files,function(x,key){var tg=window.tH.currentFolder.files[key]||tH.files.yx(key);if(tg){if(!aZS&&tg.dmca&& !aXp){Oh('dmcaReviewPop');mH.push(tg.quickkey);aEw.push(tg.hash);}if(!aZS&&tg.copyright&& !aXp){Oh('copyrightPop');}if(tg.fileInfected){Oh('virusPop');}}});if(mH.length){$('#sharebox').undelegate('#share-box-dmca-button','click').delegate('#share-box-dmca-button','click',function(e){var tg=aEw.join(',');var awR=[];abU();LoadIframeLightbox('/templates/dmca_lightbox.html',500,475);if(!tg.dmca_company){awS(tg,function(ajz){setTimeout(function(){awQ(ajz,mH);},500);});}aeV(e);});}};var atv=new window.tH.Dv();if(!acK)atv.Yw(function(data){var aXp=false,aMQ={facebook:null,gmail:null,twitter:null},ajz=data.response;if(ajz.result=='Success'){if(avH(ajz.user_info.options,4)==1)aXp=true;for(var aOc in aMQ){if(ajz.user_info[aOc]){var aMI=ajz.user_info[aOc].synced;if(aMI&&aMI!='0000-00-00 00:00:00'){aMQ[aOc]=aMI;}}}}gH.Show(null,(!aZn&& !aZS)?'unverifiedShare':'',false,aMQ);aAk(aXp);});else{gH.Show(null,'loginShare');}if(tH.currentFolder.shared&&tH.currentFolder.shared!='no'){$('#sharebox').addClass('conservative');}else if(!acK&& !aek){$('#sharebox').removeClass('conservative');}};function close(){gH.Hide();};return{open:open,popup:gH.popup,close:close,ali:gH.ali,ShowTab:gH.ShowTab};})();return{aai:aai,aFW:aFW,avb:avb,aXh:aXh,yw:yw,abB:abB,abz:abz,aby:aby,abC:abC,aRo:aRo,aim:aim,ajj:ajj,GA:GA,Xv:Xv,Dq:Dq,abU:abU,aUD:aUD,abV:abV,afh:afh,apJ:apJ,arW:arW,aNJ:aNJ,MYF_oFileChoice:MYF_oFileChoice};})();};var awr=false;function aIP(){var $root=$("#contextmenu"),aRb=false,Wc={};Wc.open=function(context,mode,pos,data,aWa,aYb){Wc.aoh();$root.removeClass("image video canEdit hasPreview collab-folder-menu collab-folder-menu-view collab-folder-menu-edit collab-folder-menu-manage"+"collab-file-menu collab-file-menu-view collab-file-menu-edit collab-file-menu-manage"+"collab-mix-menu-view collab-mix-menu-edit collab-mix-menu-manage hasPassword showFollowing showFollow shareLinkDisabled");bho=false;if(mode=="file"){var file=tH.files.yx(data);if(file&&file.delete_date)bho=true;}else if(mode=="folder"||mode=="linked-folder"||mode=="sublinked-folder"){var folder=tH.folders.yx(data);if(folder&&folder.delete_date)bho=true;}else if(mode=="multiple"){if(data.folders){var aio=data.folders.split(',');for(var i=0;i<aio.length;i++){var folder=tH.folders.yx(aio[i]);if(folder&&folder.delete_date){bho=true;break;}}}if(!bho&&data.files){var aiv=data.files.split(',');for(var i=0;i<aiv.length;i++){var file=tH.files.yx(aiv[i]);if(file&&file.delete_date){bho=true;break;}}}}if(mode=="linked-folder"||mode=="sublinked-folder"){data=((mode=="linked-folder")?"shared-":'sub-')+data;mode='folder';}if(bho)mode='trashMode';if(mode=="file"){var file=tH.files.yx(data);if(file&&file.filetype&&(file.filetype==='image'))$root.addClass("image");if(file&&file.axV())$root.addClass("hasPreview");if(file&&file.aFP()&&aTB(window.tH.currentFolder))$root.addClass("canEdit");}$(["#contextmenu",context,mode].join("-")).show().closest(".dropdown").data("context",data);$(["#contextmenu",context,mode].join("-")).trigger("acN");$root.removeClass('hide').addClass('show').css(pos);aRb=true;$(["#contextmenu",context,mode].join("-")).trigger("adm",[aWa,aYb]);awr=false;$root.on('clickoutside',function(e){if(awr){awr=false;return;}Wc.aoh();});$('#main_files_container').on('mouseup.ContextMenu',function(e){awr=(e.which==3);});};Wc.aoh=function(){$.each($(".row_context"),function(x,Lu){if(!$(this).hasClass("file_selected"))mainList.aNK($(this).data("key"));});$root.hide().children("ul").hide().removeData("context");$root.removeClass("image video canEdit hasPreview collab-folder-menu collab-folder-menu-view collab-folder-menu-edit collab-folder-menu-manage"+"collab-file-menu collab-file-menu-view collab-file-menu-edit collab-file-menu-manage"+"collab-mix-menu-view collab-mix-menu-edit collab-mix-menu-manage hasPassword showFollowing showFollow shareLinkDisabled");$(".row_context").removeClass("row_context");$root.removeClass('fixed show').addClass('hide');aRb=false;$root.off("clickoutside");$('#main_files_container').off('mouseup.ContextMenu');};Wc.isVisible=function(){return aRb;};Wc.CD=function(){if(aRb){this.aoh();}else{this.open.apply(null,arguments);}};Wc.Wn=function(aZF,aWa,aYb){var aZP=$(window);var aZb=aZF.parent();var aZk=parseInt(aZb.css('left'));var aZB=parseInt(aZb.css('top'));var MYF_iPadding=20;function aZI(){if(aWa||(aZF.width()+aZk>aZP.width()&&(aZk-aZF.width()>=0))){aZb.css('left',(aZk-aZF.outerWidth())+'px');}var MYF_bPointUpFits=aZB-(aZF.height()+MYF_iPadding)>=0;if(MYF_bPointUpFits&&(aYb||aZF.height()+aZB-aZP.scrollTop()>aZP.height())){aZb.css('top',(aZB-aZF.outerHeight()+3)+'px');}if(aZb.hasClass('fixed')){aZb.css('top',(aZB-parseInt(aZP.scrollTop()))+'px');}};aZI();setTimeout(aZI,0);};Wc.anX=function(WQ){var CZ=parseInt(WQ.parent().parent().parent().css('top'))+100;var iLeft=parseInt(WQ.parent().parent().parent().css('left'))+100;if((80+CZ-$(window).scrollTop()>$(window).height())&&(CZ-WQ.height()>=0)){WQ.css('top',-45);}else{WQ.css('top',0);}if(205+iLeft>$(window).width()&&(iLeft-205>=0)){WQ.css('left','55%');}else{WQ.css('left','100%');}};Wc.aan=function(MYF_bPublished){var bfC="Copied to Clipboard";var MYF_jList=$(this).closest('ul');if(MYF_bPublished){if(MYF_jList.attr('id')==='contextmenu-mainlist-multiple'){bfC+="<br />Warning: One or more items were private, but have now been made public.";}else{bfC+="<br />Warning: This item was private, but has now been made public.";}}Zi(0,bfC);mainList.aTN();};aSC(Wc);return Wc;};var MYF_aClipboards=[];function aSC(HA){$("#contextmenu-mainlist-file").on('acN',function(){var $this=$(this),quickkey=$this.closest(".dropdown").data("context"),file=tH.files.yx(quickkey);if(typeof file=='undefined'){var aQo=$('#file-'+quickkey+' .file_location a').attr('href').substr('#search-'.length);file={parent:new tH.yJ(aQo)};}$("#contextmenu").toggleClass("hasPassword",file.password_protected=='yes');$("#contextmenu").toggleClass("canEdit",aGe(file));if(!aTB(file)){var iPermissions=NZ(file);$("#contextmenu").toggleClass("showFollow",iPermissions==0).toggleClass("showFollowing",iPermissions!=0).toggleClass("collab-file-menu-view",iPermissions==1).toggleClass("collab-file-menu-edit",iPermissions==2).toggleClass("collab-file-menu-manage",iPermissions==3).toggleClass("shareLinkDisabled",!file.privacy||file.privacy=="private");}$("#file-"+quickkey).addClass("row_context");if($("#file-"+quickkey).hasClass("development")){$("#contextmenu").addClass("development-item");}else{$("#contextmenu").removeClass("development-item");}}).on('adm',function(auo,aWa,aYb){var $this=$(this);var quickkey=$this.closest(".dropdown").data("context");var file=tH.files.memory[quickkey];var iPermissions=0;$("#contextmenu").toggleClass("private-item-menu",file.abL());HA.Wn($this,aWa,aYb);$("#contextmenu").toggleClass("video",file.filetype=="video").toggleClass("audio",file.filetype=="audio");if(!aTB(file)){iPermissions=NZ(file);}var jCopyLink=$this.find('li[data-command="copy-link"]');if(Clipboard.isSupported()){MYF_aClipboards.forEach(function(e){e&&e.destroy();});MYF_aClipboards=[];if(jCopyLink[0]){var fo=$this.closest('.dropdown').data('context');var aZL=tH.files.yx(fo);var bPublished=false;var fCopyLink=function(){var MYF_jList=$('#contextmenu-mainlist-file').closest('ul');MYF_jList.removeClass('private-item-menu');bPublished=false;if(aZL.privacy==='private'){aZL=new tH.Cp(aZL);aZL.privacy='public';aZL.aax(function(){tH.files.memory[fo].privacy='public';});MYF_jList.addClass('private-item-menu');bPublished=true;var aYf=$('#file-'+fo);if(aYf.length){aYf.removeClass('private').addClass('public').find('.shareLinkEnabled').show();}}return agW(aZL);};var oClipboard=new Clipboard(jCopyLink[0],{text:fCopyLink});oClipboard.on('success',function(){HA.aan(bPublished);});MYF_aClipboards.push(oClipboard);}}else{jCopyLink.hide();}if(!file){return false;}var aYu=file.password_protected=='yes'?true:false;try{$this.find("li[data-command='share']").show();$this.find("li[data-command='public']").toggle(file.abL());$this.find("li[data-command='private']").toggle(file.Zt());$this.find("li[data-command='save-file']").toggle((!Yb&&aek!==0)&& !aYu);$this.find("li[data-command='password']").text('Remove Password');$this.find("li[data-command='set-avatar']").toggle(file.filetype=="image");var axe='View';$this.find("li[data-command='file-preview']").text(axe);}catch(e){try{console.warn(e);}catch(e){}}}).on('click','li[data-command]',function(e){var $this=$(this),cmd=$this.data("command"),quickkey=$this.closest(".dropdown").data("context"),file=tH.files.memory[quickkey],iPermissions=0,bShared=false;if(!aTB(file)){bShared=true;iPermissions=NZ(file);}switch(cmd){case "copy-link":break;case "save-file":if(aZe)GH.avb.open(quickkey);else{blX("RequiresLogin");}break;case "download":akO({files:[quickkey]});break;case "share":R({files:[quickkey]});break;case "file-preview":var aTo='view';if(file.filetype=="video")aTo='watch';else if(file.filetype=="audio")aTo='listen';window.open('/'+aTo+'/'+quickkey+'/'+aNy(file.filename));break;case "edit-file":if(file.edit&&parseInt(file.edit)===3){akO({files:[quickkey]});}else{if(file.size>10485760)Zi(0,"Only files smaller than 10 MB can be edited. This file is too large.");else window.open('/edit/'+quickkey+'/'+aNy(file.filename));}break;case "collab-file":GH.aNJ.open(quickkey);break;case "move":GH.aai.open(quickkey);break;case "copy-items":GH.aFW.open({files:[quickkey]});break;case "delete":GH.yw.open(quickkey);break;case "rename":aTn(quickkey,"file");break;case "desc":GH.aby.open(quickkey,"description");break;case "stats":aiM(quickkey);break;case "password":GH.aim.open(quickkey);break;case "public":GH.abB.open("public",quickkey);break;case "private":GH.abB.open("private",quickkey);break;case "set-avatar":QZ(quickkey);break;default:break;}HA.aoh();aeV(e);}).on('mouseenter','.dropdown li.submenu',function(e){var em=$(this).find('.submenu-sendto');em.show();HA.anX(em);aeV(e);}).on('mouseleave','.dropdown li.submenu',function(e){$(this).find('.submenu-sendto').hide();aeV(e);});$("#contextmenu-mainlist-folder").off('acN adm').off('click','li[data-command]').off('mouseenter mouseleave','.dropdown li.submenu').on('acN',function(){var $this=$(this),folderkey=$this.closest(".dropdown").data("context"),folder=tH.folders.yx(folderkey),bShared=false;if(!aTB(folder)){bShared=true;var iPermissions=NZ(folder);$("#contextmenu").toggleClass("showFollow",iPermissions==0).toggleClass("showFollowing",iPermissions!=0).toggleClass("collab-folder-menu-view",iPermissions==1).toggleClass("collab-folder-menu-edit",iPermissions==2).toggleClass("collab-folder-menu-manage",iPermissions==3).toggleClass("shareLinkDisabled",!folder.privacy||folder.privacy=="private");}if(SHARED)$("li[data-command='rename']").removeClass("multimode-item").addClass("normal-item");else $("li[data-command='rename']").addClass("multimode-item").removeClass("normal-item");$("#folder-"+folderkey).addClass("row_context");}).on('adm',function(auo,aWa,aYb){var $this=$(this);var folderkey=$this.closest(".dropdown").data("context");var folder=tH.folders.yx(folderkey);var bShared=false;var iPermissions=0;if(!aTB(folder)){bShared=true;iPermissions=NZ(folder);}var jCopyLink=$this.find('li[data-command="copy-link"]');if(Clipboard.isSupported()){MYF_aClipboards.forEach(function(e){e&&e.destroy();});MYF_aClipboards=[];if(jCopyLink[0]){var qN=$this.closest('.dropdown').data('context');var sD=tH.folders.yx(qN);var bPublished=false;var fCopyLink=function(){var MYF_jList=$('#contextmenu-mainlist-folder').closest('ul');MYF_jList.removeClass('private-item-menu');bPublished=false;if(sD.privacy==='private'){sD=new tH.yJ(sD);sD.aax(function(){tH.folders.memory[qN].privacy='public';});MYF_jList.addClass('private-item-menu');bPublished=true;var aYf=$('#folder-'+qN);if(aYf.length){aYf.removeClass('private').addClass('public').find('.shareLinkEnabled').show();}}return agW(sD);};var oClipboard=new Clipboard(jCopyLink[0],{text:fCopyLink});oClipboard.on('success',function(){HA.aan(bPublished);});MYF_aClipboards.push(oClipboard);}}else{jCopyLink.hide();}$("#contextmenu").toggleClass("private-item-menu",folder.abL());HA.Wn($this,aWa,aYb);try{$this.find("li[data-command='public']").toggle(folder.abL()&& !bShared);$this.find("li[data-command='private']").toggle(folder.Zt()&& !bShared);}catch(e){try{console.warn(e);}catch(e){}}}).on('click','li[data-command]',function(e){var $this=$(this),cmd=$this.data("command"),folderkey=$this.closest(".dropdown").data("context"),folder=tH.folders.yx(folderkey),iPermissions=0,bShared=false;if(!aTB(folder)){bShared=true;iPermissions=NZ(folder);}switch(cmd){case "copy-link":break;case "unfollow-folder":aMk(folderkey);break;case "download":akO({folders:[folderkey]});break;case "subfolder":GH.abV.open(folderkey);break;case "share":R({folders:[folderkey]});break;case "move":GH.aai.open(null,folderkey);break;case "copy-items":GH.aFW.open({files:[],folders:[folderkey]});break;case "delete":GH.yw.open(null,folderkey);break;case "rename":aTn(folderkey,"folder");break;case "desc":GH.abC.open(folderkey,"description");break;case "dropbox":GH.afh.open(folderkey);break;case "public":GH.abz.open("public",folderkey);break;case "private":GH.abz.open("private",folderkey);break;case "rss":GH.arW.open(folder);break;default:try{console.warn("unrecognized command");}catch(e){}break;}HA.aoh();aeV(e);}).on('mouseenter','.dropdown li.submenu',function(e){var em=$(this).find('.submenu-sendto');em.show();HA.anX(em);aeV(e);}).on('mouseleave','.dropdown li.submenu',function(e){$(this).find('.submenu-sendto').hide();aeV(e);});$("#contextmenu-mainlist-multiple").off('acN adm').off('mousedown click','li[data-command]').on('acN',function(){$.publish("list/selection");var $this=$(this),selected=tH.MYF_oSelected,files=selected.files.length?selected.files:false,folders=selected.folders.length?selected.folders:false;if(aek){$this.find("li[data-command='save-file']").hide();if(!Yb){if(files.length>1&& !folders.length){$this.find("li[data-command='save-file']").show();}else{$this.find("li[data-command='save-file']").hide();}}}}).on('adm',function(auo,aWa,aYb){var $this=$(this),selected=tH.MYF_oSelected,files=selected.files.length?selected.files:false,folders=selected.folders.length?selected.folders:false,aeX=files||[],afe=folders||[],aYY=true;$.each(files,function(x,quickkey){$("#file-"+quickkey).addClass("row_context");});$.each(folders,function(x,folderkey){$("#folder-"+folderkey).addClass("row_context");});var aWH=false,bhA=false;for(var i=0;i<files.length;i++){var aYv=tH.files.memory[files[i]];if(aYv.password_protected!='yes'&&aYY)aYY=false;if(aYv.filetype=="image")aWH=true;if(aYv.fileInfected)bhA=true;}var jCopyLink=$this.find('li[data-command="copy-link"]');if(Clipboard.isSupported()){MYF_aClipboards.forEach(function(e){e&&e.destroy();});MYF_aClipboards=[];if(jCopyLink[0]){var aeX=tH.MYF_oSelected.files||[];var afe=tH.MYF_oSelected.folders||[];var bPublished=false;var fCopyLink=function(){var MYF_jList=$('#contextmenu-mainlist-multiple').closest('ul');MYF_jList.removeClass('private-item-menu');bPublished=false;$.each(aeX,function(MYF_iIndex,acm){var dn=tH.files.memory[acm];if(dn.privacy==='private'){dn=new tH.Cp(dn);dn.aax(function(){tH.files.memory[acm].privacy='public';});MYF_jList.addClass('private-item-menu');bPublished=true;var aYf=$('#file-'+acm);if(aYf.length){aYf.removeClass('private').addClass('public').find('.shareLinkEnabled').show();}}});$.each(afe,function(MYF_iIndex,acm){var acS=tH.folders.memory[acm];if(acS.privacy==='private'){acS=new tH.yJ(acS);acS.aax(function(){tH.folders.memory[acm].privacy='public';});MYF_jList.addClass('private-item-menu');bPublished=true;var aYf=$('#folder-'+acm);if(aYf.length){aYf.removeClass('private').addClass('public').find('.shareLinkEnabled').show();}}});return adv('folder',aeX.concat(afe).join(','),'shared');};var oClipboard=new Clipboard(jCopyLink[0],{text:fCopyLink});oClipboard.on('success',function(){HA.aan(bPublished);});MYF_aClipboards.push(oClipboard);}}else{jCopyLink.hide();}$this.find("li[data-command='share']").toggle(!(aeX.length>0&&afe.length>0));$this.find("li[data-command='update']").toggle(!aWH&&(files&&files.length===2)&& !folders&&(!aek||Yb));$this.find("li[data-command='save-file']").toggle(!Yb&& !aYY&&aek&&(!tH.MYF_oSelected.files.length|| !tH.MYF_oSelected.folders.length));var rO="";if(files&&folders)rO="mix";else if(files)rO="file";else if(folders)rO="folder";if(!aTB(tH.currentFolder)&&rO!=""){var iMinPermissions=3;var bShareLinkEnabled=true;if(files){$.each(files,function(x){var nH=tH.files.yx(files[x]);var iSelectedPermissions=NZ(nH);iMinPermissions=(iSelectedPermissions<iMinPermissions)?iSelectedPermissions:iMinPermissions;if(bShareLinkEnabled)bShareLinkEnabled=nH.privacy&&nH.privacy!="private"?true:false;if(iMinPermissions==0)return false;});}if(folders&&iMinPermissions!=0){$.each(folders,function(x){var nH=tH.folders.yx(folders[x]);var iSelectedPermissions=NZ(nH);iMinPermissions=(iSelectedPermissions<iMinPermissions)?iSelectedPermissions:iMinPermissions;if(bShareLinkEnabled)bShareLinkEnabled=nH.privacy&&nH.privacy!="private"?true:false;if(iMinPermissions==0)return false;});}$("#contextmenu").toggleClass("collab-"+rO+"-view",iMinPermissions==1).toggleClass("collab-"+rO+"-edit",iMinPermissions==2).toggleClass("collab-"+rO+"-manage",iMinPermissions==3).toggleClass("shareLinkDisabled",!bShareLinkEnabled);}HA.Wn($this,aWa,aYb);}).on('mousedown','li[data-command]',function(e){var $this=$(this);var cmd=$this.data('command');switch(cmd){case 'view-items':aRM($('a',$this));break;}}).on('click','li[data-command]',function(e){var $this=$(this);var cmd=$this.data('command');var selected=$this.closest('.dropdown').data('context');switch(cmd){case 'copy-link':break;case 'view-items':return true;break;case 'move':GH.aai.open(selected.files,selected.folders);break;case 'copy-items':GH.aFW.open(window.tH.MYF_oSelected);break;case 'delete':GH.yw.open(selected.files,selected.folders);break;case 'email':R(tH.MYF_oSelected);GH.Xv.ShowTab('email');break;case 'download':adI();break;case 'share':R(window.tH.MYF_oSelected);break;case 'update':GH.GA.open(selected.files);break;case 'dropbox':GH.afh.open($this.data('key'));break;case 'save-file':if(aZe){GH.avb.open(selected.files);}else{blX("RequireLogin");}break;default:try{console.warn('unrecognized command');}catch(e){}}HA.aoh();aeV(e);});$("#contextmenu-mainlist-trashMode").off('acN adm').off('mousedown click','li[data-command]').on('acN',function(){$.publish("list/selection");}).on('adm',function(auo,aWa,aYb){var $this=$(this),selected=tH.MYF_oSelected,files=selected.files.length?selected.files:false,folders=selected.folders.length?selected.folders:false;$this.find('.number_of_selectedobjects').toggle(selected.files.length+selected.folders.length>1);if(!files&& !folders){selected=$this.closest('.dropdown').data('context');if(tH.files.memory[selected])$("#file-"+selected).addClass("row_context");else if(tH.folders.memory[selected])$("#folder-"+selected).addClass("row_context");}else{$.each(files,function(x,quickkey){$("#file-"+quickkey).addClass("row_context");});$.each(folders,function(x,folderkey){$("#folder-"+folderkey).addClass("row_context");});}HA.Wn($this,aWa,aYb);}).on('click','li[data-command]',function(e){var $this=$(this),cmd=$this.data('command'),selected=$this.closest('.dropdown').data('context'),bdZ=selected.folders||'',bfG=selected.files||'';if(bdZ.length==0&&bfG.length==0){if(tH.files.memory[selected])bfG=selected;else if(tH.folders.memory[selected])bdZ=selected;}switch(cmd){case 'delete':LF.bet(bfG,bdZ,true);break;case 'restore':GH.aXh.open({success:function(aNX){LF.YO(bfG,bdZ,aNX);}});break;default:try{console.warn('unrecognized command');}catch(e){}}HA.aoh();aeV(e);});$("#contextmenu-folderbrowser-folder").off('acN adm click').off('click','li[data-command]').on('acN',function(){var $this=$(this),adg=$this.closest(".dropdown").data("context").split("-"),adQ=adg[0],TM=false;if(adg.length>1){TM=(adg[0]=='shared');adQ=adg[1];}$("[data-folderkey='"+adQ+"']").addClass("row_context");$this.parent().addClass('fixed');}).on('adm',function(){var $this=$(this),acy=false,TM=false,adg=$this.closest(".dropdown").data("context").split("-"),adQ=adg[0],bShared=false,iPermissions=0;if(adg.length>1){TM=(adg[0]=='shared');acy=true;adQ=adg[1];}var adj=tH.folders.yx(adQ);if(!aTB(adj)){bShared=true;iPermissions=NZ(adj);}var jCopyCommand=$this.find('li[data-command="copy-link"]');if(Clipboard.isSupported()){var fCopyLink;var bPublished=false;if(aek&&afI.split(',').length>=1){fCopyLink=function(){var MYF_jList=$('#contextmenu-folderbrowser-folder').closest('ul');MYF_jList.removeClass('private-item-menu');bPublished=false;$.each(afI.split(','),function(MYF_iIndex,acm){var acS=tH.folders.memory[acm];if(acS.privacy==='private'){acS=new tH.yJ(acS);acS.aax(function(){tH.folders.memory[acm].privacy='public';});MYF_jList.addClass('private-item-menu');bPublished=true;}});return adv('folder',afI,'shared');}}else if(adQ!=='myfiles'){var aea=tH.folders.yx(adQ);if(aea){var beQ=Encoder.XSSEncode(aNy(aea.name))||'';fCopyLink=function(){return adv('folder',adQ,beQ);}}}if(fCopyLink){var oClipboard=new Clipboard(jCopyCommand[0],{text:fCopyLink});oClipboard.on('success',function(){HA.aan(bPublished);});MYF_aClipboards.push(oClipboard);}}else{jCopyCommand.hide();}$("#folderbrowser-unfollow").toggle(bShared&&aTB(adj.parent)&&iPermissions!=0);if(!aek){if(adQ=='myfiles'){$("#folderbrowser-copylink").hide();$("#folderbrowser-rename").hide();$("#folderbrowser-delete").hide();$("#folderbrowser-subfolder").show();$("#folderbrowser-share").hide();}else{$("#folderbrowser-copylink").show();if(bShared){$("#folderbrowser-rename").toggle(iPermissions==2);$("#folderbrowser-subfolder").toggle(iPermissions==2);$("#folderbrowser-delete").toggle(iPermissions==2);$("#folderbrowser-share").hide();}else{$("#folderbrowser-rename").show();$("#folderbrowser-subfolder").show();$("#folderbrowser-delete").toggle(!acy);$("#folderbrowser-share").show();}}}else{$("#folderbrowser-copylink").show();$("#folderbrowser-rename").hide();$("#folderbrowser-delete").hide();$("#folderbrowser-subfolder").hide();$('#folderbrowser-add').toggle(!(adQ=='myfiles'));$("#folderbrowser-share").show();}HA.Wn($this);$("[data-folderkey='"+adQ+"']").addClass("row_context");}).on('click','li[data-command]',function(e){var $this=$(this),cmd=$this.data("command"),adg=$this.closest(".dropdown").data("context").split("-"),adQ=adg[0];if(adg.length>1){adQ=adg[1];}folderkey=adQ;switch(cmd){case "rename":GH.abC.open(folderkey,"name");break;case "subfolder":GH.abV.open(folderkey);break;case "copy-link":break;case "delete":GH.yw.open(null,folderkey);break;case "share":R({folders:[folderkey]});break;default:try{console.warn("unrecognized command");}catch(e){}break;}HA.aoh();aeV(e);});};function aMk(adW){var acS=tH.folders.yx(adW),aBu=new tH.aCa();aBu.aAe(adW,{success:function(arO){if(arO&&arO.response&&arO.response.result&&arO.response.result.toLowerCase()==="success"){Zi(0,"You are no longer following the folder '"+acS.name+"'. You may view all the items you follow within the Following App.");setTimeout(function(){if(acS.privacy=="private")top.Rz('shared-items');else location.reload(true);},1000);}else Zi(0,"Unable to stop following the folder '"+acS.name+"' at this time. Please try again later");},error:function(){Zi(0,"Unable to stop following the folder '"+acS.name+"' at this time. Please try again later");}});};function aTE(){LF.Zs.onBefore=function(quickkeys,Bz){var AP=null;if(Bz){var adj=tH.currentFolder;while(adj&&adj.folderkey!='myfiles'){if(Bz.indexOf(adj.folderkey)!== -1){AP=adj;break;}else{if(adj.parent_folderkey=="myfiles")break;adj=adj.parent||tH.folders.yx(adj);}}}if(AP)window.location.hash='#'+(AP.parent_folderkey||AP.parent.folderkey||'myfiles');quickkeys.length&&$.each(quickkeys,function(x,key){$('#file-'+key).hide();});Bz.length&&$.each(Bz,function(x,key){$('#folder-'+key).hide();});};LF.Zs.onSuccess=function(rN,SP){if(rN){$.publish("file/delete",[rN,false]);}if(SP){$.publish("folder/delete",[SP,false]);}beg();};LF.bet.onSuccess=function(rN,SP){if(rN){$.publish("file/delete",[rN,true]);}if(SP){$.publish("folder/delete",[SP,true]);}aoP(tH.aca);beg();};LF.MYF_mEmptyTrash.onSuccess=function(){var oTrashFolder=tH.folders.yx('trash');window.tH.aca=[];aoP(window.tH.aca);if(oTrashFolder){if(oTrashFolder.total_files>0){aH(0,oTrashFolder.total_files+" files deleted.",oTrashFolder.total_files+" files were deleted.",true);}if(oTrashFolder.total_folders>0){aH(0,oTrashFolder.total_folders+" folders deleted.",oTrashFolder.total_folders+" folders were deleted.",true);}oTrashFolder.folders={};oTrashFolder.files={};oTrashFolder.total_files=0;oTrashFolder.total_folders=0;}beg();};LF.YO.onBefore=function(quickkeys,Bz,dest){var aVW=[],aAc=true;function aVZ(anZ,avp){if(anZ instanceof tH.yJ&&typeof(anZ.parent.folderkey)!="undefined"&&anZ.parent.folderkey!==anZ.folderkey){avp.push(anZ.folderkey);return aVZ(anZ.parent,avp);}else return avp;};aVW=aVZ(dest,[]);$.each(quickkeys.split(","),function(x,key){$('#file-'+key).hide();});$.each(Bz.split(","),function(x,key){if($.inArray(key,aVW)!= -1)aAc=false;});if(aAc===true){$.each(Bz.split(","),function(x,key){$("#folder-"+key).hide();});}else return false;};LF.YO.onSuccess=function(item,source,dest){$.publish((item[0].quickkey?"file":"folder")+"/move",[item,source,dest]);};LF.YO.onError=function(quickkeys,Bz,dest){$.each(quickkeys.split(","),function(x,key){$('#file-'+key).show();});$.each(Bz.split(","),function(x,key){$('#folder-'+key).show();});};LF.aFI.onSuccess=function(sourceitems,newitems,source,dest,totalfiles,totalfolders){if(totalfiles&&totalfolders){$.publish("filesandfolders/copy",[totalfiles,totalfolders,source,dest]);}else{$.publish((sourceitems[0].quickkey?"file":"folder")+"/copy",[sourceitems,newitems,source,dest]);}};LF.aUA.onError=function(keys,response,error){switch(error){case 148:Ck();break;case 149:Eh(keys,false);break;case 153:aUG(keys);break;case 155:Eh(keys,true);break;case 156:case 157:DisplayZipInsufficientBandwidthApproval();break;default:try{if(typeof response.message!='undefined')aH(0,response.message);}catch(e){}}};LF.Wt.onSuccess=function(folder,subfolder,oOptions){$.publish("folder/create",[subfolder,folder]);if(oOptions&&oOptions.filedrop){GH.afh.open(subfolder.folderkey);}};LF.aah.onSuccess=function(item){if(item)$.publish((item.quickkey?"file":"folder")+"/update",[item,"privacy"]);};LF.ajl.onSuccess=function(aZL){$.publish("file/save",aZL.filename);};LF.aal.onError=function(item,info){aTP();};LF.aal.onSuccess=function(item,info){item.desc=item.description;$.publish((item.quickkey?"file":"folder")+"/update",[item,info]);};LF.agk.onSuccess=function(ahD,agI){$.publish("file/delete",[[ahD],true]);$.publish("file/update",[agI,"replace"]);};LF.agD.onSuccess=function(file){$.publish("file/update",[file,"password"]);};};function aTG(){$(document).bind("keydown","esc",function(){contextMenu.aoh();mainList.aTN();GH.abU();aft();$(".dropdown").removeClass("show_dropdown").unbind("clickoutside");$(".dropdownOnClick").removeClass("show_dropdown").unbind("clickoutside");}).bind("keydown","u",function(){var MYF_bSharedFolder=(aek|| !avH(tH.currentFolder.flag,"1"));var gC=(NZ(tH.currentFolder)=="2");if($("input:focus").length==0&&(!MYF_bSharedFolder||gC)&& !bfw()){Mj(window.tH.currentFolder.folderkey|"myfiles");}}).bind("keydown","ctrl+a",function(){if($("input:focus").length==0){$(".dropdown").removeClass("show_dropdown").unbind("clickoutside");mainList.akV();return false;}}).bind("keydown","shift+del",function(){if($("input:focus").length==0&& !aek){if(tH.currentFolder&&(tH.currentFolder.shared=="yes"||tH.currentFolder.shared=="child"))return;if(mainList.VB()){if(bfw())LF.bet(mainList.WP("files"),mainList.WP("folders"),false);else GH.yw.open(mainList.WP("files"),mainList.WP("folders"),false);}}}).bind("keydown","del",function(){if($("input:focus").length==0&& !aek){if(tH.currentFolder&&(tH.currentFolder.shared=="yes"||tH.currentFolder.shared=="child"))return;if(mainList.VB()){if(bfw())LF.bet(mainList.WP("files"),mainList.WP("folders"),true);else GH.yw.open(mainList.WP("files"),mainList.WP("folders"));}}}).bind("keydown","ctrl+home ctrl+end pageup pagedown home end",function(){$(window).scroll();}).bind("keydown","n",function(){var sD=tH.currentFolder,iPermissions=0,bAllowed=false;if(!aTB(sD)){iPermissions=NZ(sD);bAllowed=iPermissions==2||iPermissions==3;}if($("input:focus").length==0&&(!aek||bAllowed)&& !bfw()){GH.abV.open(window.abM);return false;}});if(lc()=="Mac"){$(document).bind("keydown","backspace",function(e){if($("input:focus").length==0&& !aek){if(mainList.VB()){GH.yw.open(mainList.WP("files"),mainList.WP("folders"));e.preventDefault();aeV(e);}}});}};function aTy(){$("#popup-section").show();};function aAw(){if(window.tH.root){if(window.tH.root.owner_name)$("#collabmodeContact .collabContactName").text(window.tH.root.owner_name).attr('title',window.tH.root.owner_name);if(window.tH.root.avatar){var sAvatarURL="";if(window.tH.root.avatar.indexOf("gravatar.com.de.a2ip.ru")!== -1)sAvatarURL=window.tH.root.avatar+'&'+aC(4);else sAvatarURL=window.tH.root.avatar+'?'+aC(4);$("#collabmodeContact .shareContactAvatar").css("background-image",'url('+sAvatarURL+')');}}};function aSy(aSQ){var quickkeys=afI.split(",");if(quickkeys.length>1){var myfiles=new window.tH.yJ("myfiles");myfiles.name="Shared Files";myfiles.shared="yes";window.tH.folders.memory.myfiles=myfiles;window.tH.root=myfiles;$('.searchBtnMin').css('visibility','hidden');var x=0;$.each(quickkeys,function(x,quickkey){if(quickkey.length==11||quickkey.length==15){aeI(quickkey,x,quickkeys);}else if(quickkey.length==13){ahF(quickkey,x,quickkeys);}else{aeP(1,x,quickkeys);}});}else{window.tH.root=new window.tH.yJ(afI);window.tH.root.shared="yes";window.tH.root.Yw({data:{recursive:"yes"}},{success:function(response,data){aAw();agM(window.tH.root);},error:function(ado,aco,aiN){var ajz=JSON.parse(ado.responseText);var agU={};agU['134']=["You do not have access to view this folder. If this is your folder, please login."];agU['114']=agU['134'];agU['112']=["Folder not found."];var aln=agU[ajz.response.error.toString()]||["An error occurred while retrieving the folder."];if(ajz.response.error.toString()==='114'){top.location.href="/error.php?errno=999&quickkey="+afI+"&origin=folder";}Zi(0,aln[0]);}});}$(window).hashchange(function(){window.tH.aca=[];agM(window.tH.root);});};function aSB(){if($('body').hasClass('myfiles')){var aRj=false,aRg=[],aRq=[];$('#myfiles_wrap').css({'overflow':'auto','-webkit-user-select':'none','-khtml-user-select':'none','-ms-user-select':'none','-moz-user-select':'none','-o-user-select':'none','user-select':'none'});$('#myfiles_wrap').dragToSelect({selectables:'#main_list li',not:'.collaborate-active',excludes:['li.row_container','#myfiles_viewtabs_bar','#myfiles_selection','#header','#contextmenu','#listbox_container','.popup','#folderTree'],selectedClass:'dragselect_selected',onShow:function(ctrlKeyOnSelect){if(!ctrlKeyOnSelect){mainList.aTN();aRg=[];aRq=[];aQC=[];aRr=[];}if(BrowserName()=="Internet Explorer"&&Bm()=="9.0")document.onselectstart=function(){return false;};if(document.selection)document.selection.empty();else if(window.getSelection)window.getSelection().removeAllRanges();},onHide:function(ctrlKeyOnSelect,oSelectBoxDim){var aZJ=$("#main_list li:first");if(!ctrlKeyOnSelect){$.each(tH.MYF_oSelected.files.concat(tH.MYF_oSelected.folders),function(x,acm){if(tH.currentFolder.files[acm])tH.currentFolder.files[acm].selected=false;else tH.currentFolder.folders[acm].selected=false;});if(tH.MYF_oSelected)tH.MYF_oSelected={files:[],folders:[]};$('#main_list li').removeClass('file_selected');}if(aZJ.length>0){var aYJ=aZJ.outerWidth(true),aYB=aZJ.outerHeight(true),aRW=$("#main_list"),aZq=aRW.offset(),aZi=Math.min(aZq.left+aRW.innerWidth(),oSelectBoxDim.left+oSelectBoxDim.width),aYe=oSelectBoxDim.top+oSelectBoxDim.height,aYz=UO()?Math.floor(aRW.innerWidth()/aYJ):1,aTO=Math.min(aYz,Math.max(0,Math.ceil((oSelectBoxDim.left-aZq.left)/aYJ))),aVQ=Math.min(aYz,Math.max(aTO,Math.ceil((aZi-aZq.left)/aYJ))),aZr=$("#main_files_container").offset().top+aRW.position().top,agh=Math.max(0,Math.ceil((oSelectBoxDim.top-aZr)/aYB)),acj=Math.max(agh,Math.ceil((aYe-aZr)/aYB));if(acj>0&&agh===0)agh=1;if(aVQ>0&&aTO===0)aTO=1;if(acj>0&&aVQ>0){for(var aYw=agh;aYw<=acj;aYw++){for(var aVv=aTO;aVv<=aVQ;aVv++){var aCM=(((aYw-1)*aYz)-1)+aVv;if(aCM>=0){var Lu=tH.aca[aCM];if(typeof Lu!=='undefined'){if(Lu.quickkey){if(!tH.MYF_oSelected.files[Lu.quickkey])mainList.ZF(Lu.quickkey);}else if(Lu.folderkey){if(!tH.MYF_oSelected.files[Lu.folderkey])mainList.ZF(Lu.folderkey);}}}}}}}$selectedRows=$('#main_list .dragselect_selected');$('#main_list .dragselect_selected').removeClass('dragselect_selected');$selectedRows.addClass("file_selected");$newSelectedRows=$('#main_list .file_selected');if(BrowserName()=="Internet Explorer"){setTimeout(function(){$.publish("list/selection");document.onselectstart=null;},100);}$(".myfiles").css({'-webkit-user-select':'text','-khtml-user-select':'text','-ms-user-select':'text','-moz-user-select':'text','-o-user-select':'text','user-select':'text'});return true;},onRefresh:function(){$(".myfiles").css({'-webkit-user-select':'text','-khtml-user-select':'text','-ms-user-select':'text','-moz-user-select':'text','-o-user-select':'text','user-select':'text'});},selectOnMove:true});}};function aTj(){tH.aWM=true;WC('');if(!aek)beg();$(window).hashchange(function(){if(window.tH.bov)clearTimeout(window.tH.bov);bff();window.tH.aca=[];alb();});aHa.aJg();if(!aek)alb(LF);aXK();};function amD(aUb,aSD){if(aUb)$(document).ready(function(){LoadIframeLightbox("/dynamic/alert.php?alert_ids="+aSD,700,400);});};function aXK(){var aUq=document.getElementById('folderTree'),aUk=document.getElementById('main_files_container'),aVo=$('#fileDropWrap'),aWz=null;if(window.addEventListener){window.addEventListener('click',function(e){aVo.removeClass('windowDragEnter folderDragEnter');},true);window.addEventListener('drop',function(e){aVo.removeClass('windowDragEnter folderDragEnter');},true);window.addEventListener('dragenter',function(e){if(!tH.currentFolder||((aek|| !avH(tH.currentFolder.flag,"1"))&&NZ(tH.currentFolder)!="2"))return;var aXo=e.dataTransfer.types?e.dataTransfer.types[0]:'';if(!bfw()&& !afv()&&aXo&&(aXo=='Files'||aXo=='application/x-moz-file'||($('body').is('.safari')&&aXo.indexOf("text")=== -1))){$('#ddFoldername').text(tH.currentFolder.name||'My Files');aVo.addClass('windowDragEnter');var $MYF_oTarget=$(e.target);if(aWz){aWz=null;clearInterval(aWz);}if($MYF_oTarget.is('#main_list li.folder, .folderlist_content li')||$MYF_oTarget.parents('#main_list li.folder, .folderlist_content li').length>0){aVo.addClass('folderDragEnter');}else{aWz=setTimeout(function(){aVo.removeClass('folderDragEnter');},0);}}},true);window.addEventListener('dragleave',function(e){if(e.pageX<=0||e.pageY<=0|| !e.currentTarget||e.pageX>=aVo.outerWidth())aVo.removeClass('windowDragEnter folderDragEnter');},true);}};function amb(){$window.scroll(debounce(function(){if(bha){return;}aua();window.tH.bkc=new Date().getTime();},23)).resize(function(){aHF=abc();aua();});};function aDA(aTv,aUe,aTL){return function(){if(auO){return;}auO=true;if(aTv){blu('/templates/welcome/myfiles_welcome.php',895,570,{queue:true});}if(aUe){LoadIframeLightbox('/dynamic/template_popup.php?page=email_validation_lightbox',720,535,false,false,true,true);}MYF_WIDGET_STORAGE_calculateUsedStoragePercent(aTL);MYF_WIDGET_STORAGE_updateStorageDisplay();};};function bed(xf,bhg){var aBu=new window.tH.aCa(window.aCQ||0);var MYF_aTrashFolders=[];var MYF_aTrashFiles=[];var MYF_iTrashFolderCount= -1;var MYF_iTrashFileCount= -1;var bec= -1;var MYF_aRawTrashFolders;var MYF_aRawTrashFiles;aBu.beN({content_type:'folders'},function(arO){if(arO.response.folders){for(var i=0;i<arO.response.folders.length;i++){var aRN=arO.response.folders[i].folderkey;if(aRN){MYF_aTrashFolders.push(aRN);}}}MYF_iTrashFolderCount=(parseInt(arO.response.folder_count,10)||0);if(MYF_iTrashFileCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');if(bhg){MYF_aRawTrashFolders=arO.response.folders;if(typeof MYF_aRawTrashFiles=='undefined'){return;}return xf({folders:MYF_aRawTrashFolders,files:MYF_aRawTrashFiles},bec);}xf({folders:MYF_aTrashFolders.join(),files:MYF_aTrashFiles.join()},bec);});aBu.beN({content_type:'files'},function(arO){if(arO.response.files){for(var i=0;i<arO.response.files.length;i++){var aRN=arO.response.files[i].quickkey;if(aRN){MYF_aTrashFiles.push(aRN);}}}MYF_iTrashFileCount=parseInt(arO.response.file_count,10);if(MYF_iTrashFolderCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');if(bhg){MYF_aRawTrashFiles=arO.response.files;if(typeof MYF_aRawTrashFolders=='undefined'){return;}return xf({folders:MYF_aRawTrashFolders,files:MYF_aRawTrashFiles},bec);}xf({folders:MYF_aTrashFolders.join(),files:MYF_aTrashFiles.join()},bec);});};function beg(){var aBu=new window.tH.aCa(window.aCQ||0);var MYF_iTrashFolderCount= -1;var MYF_iTrashFileCount= -1;var bec= -1;aBu.beN({data_only:'yes',content_type:'folders'},function(arO){if(!arO.response){return;}MYF_iTrashFolderCount=(parseInt(arO.response.folder_count,10)||0);if(MYF_iTrashFileCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');});aBu.beN({data_only:'yes',content_type:'files'},function(arO){if(!arO.response){return;}MYF_iTrashFileCount=parseInt(arO.response.file_count,10);if(MYF_iTrashFolderCount== -1){return;}bec=MYF_iTrashFolderCount+MYF_iTrashFileCount;$('#trash_restoreAll, #trash_deleteAll').toggle(bec>0);$('.trashCan').text('Trash ('+bec+' items)');});};function aTs(aSH,aTa){if(aSH&&aTa){auA=aTY();aTU();}};function aTK(aTi){if(aTi){LT(document.getElementById('container'));LT(document.getElementById('footer'));}};function bfu(bfC){$('#loadingMessage').text(bfC||'Working...');$('body').addClass('pageLoad');};function bek(){$('body').removeClass('pageLoad');if(typeof window.parent.$!='undefined'){window.parent.$('#mfAppFrameLoading').fadeOut(500,function(){$(this).remove();});}};function Rn(Ha){if(!Ha||(!Ha.data.resources&& !Ha.data.resource))return false;var sResource=Ha.data.resources?Ha.data.resources:Ha.data.resource;if(!tH.folders.yx(sResource))return false;tH.yJ.asi(sResource,function(oResponse){$("#folder-"+sResource).toggleClass("sharedByUser",oResponse.response.folder_info.shared_by_user);$("#mffb-"+sResource).toggleClass("sharedByUser",oResponse.response.folder_info.shared_by_user);if(!oResponse.response.folder_info.shared_by_user){$("#folder-"+sResource).removeClass("sharedByUser");$("#mffb-"+sResource).removeClass("sharedByUser");}else{$("#folder-"+sResource).addClass("sharedByUser");$("#mffb-"+sResource).addClass("sharedByUser");}});};function QZ(fo){if(!fo||fo.length==0)return false;aWc=tH.adq();var Ha={session_token:aWc,response_format:"json",quick_key:fo};$.getJSON("/api/1.4/user/set_avatar.php",Ha,function(){setTimeout(function(){$.getJSON("/api/1.4/user/get_avatar.php",{session_token:aWc,response_format:"json"},function(oResponse){var sAvatarURL="";if(oResponse.response.avatar.indexOf("gravatar.com.de.a2ip.ru")!== -1)sAvatarURL=oResponse.response.avatar+'&'+aC(4);else sAvatarURL=oResponse.response.avatar+'?'+aC(4);window.parent.$(".appAvatar").css("background-image",'url('+sAvatarURL+')');Zi(0,"Successfully Set Avatar");});},1000);}).fail(function(oFail){if(!oFail|| !oFail.responseText){Zi(0,"Error: Unknown Error.");}var oFailResponse=JSON.parse(oFail.responseText),iErrorCode=oFailResponse.error,bcJ=oFailResponse.message;Zi(0,"Error: "+bcJ+" ("+iErrorCode+")");});};function bnA(){var ww=0;var wh=0;var maxw=0;var minw=0;var maxh=0;var textShadowSupport=true;var xv=0;var snowflakes=["\u2744","\u2745","\u2746"];var prevTime;var absMax=200;var flakeCount=0;$(init);function init(){var detectSize=function(){ww=$(window).width();wh=$(window).height();maxw=ww+300;minw= -300;maxh=wh+300;};detectSize();$(window).resize(detectSize);if(!$('body').css('textShadow')){textShadowSupport=false;}var i=50;while(i--){addFlake(true);}prevTime=new Date().getTime();setInterval(move,50);};function addFlake(initial){flakeCount++;var sizes=[{r:1.0,css:{fontSize:15+Math.floor(Math.random()*20)+'px',textShadow:'9999px 0 0 rgba(238, 238, 238, 0.5)'},v:2},{r:0.6,css:{fontSize:50+Math.floor(Math.random()*20)+'px',textShadow:'9999px 0 2px #eee'},v:6},{r:0.2,css:{fontSize:90+Math.floor(Math.random()*30)+'px',textShadow:'9999px 0 6px #eee'},v:12},{r:0.1,css:{fontSize:150+Math.floor(Math.random()*50)+'px',textShadow:'9999px 0 24px #eee'},v:20}];var $nowflake=$('<span class="winternetz">'+snowflakes[Math.floor(Math.random()*snowflakes.length)]+'</span>').css({color:'#eee',display:'block',position:'fixed',background:'transparent',width:'auto',height:'auto',margin:'0',padding:'0',textAlign:'left',zIndex:9999});if(textShadowSupport){$nowflake.css('textIndent','-9999px');}var r=Math.random();var i=sizes.length;var v=0;while(i--){if(r<sizes[i].r){v=sizes[i].v;$nowflake.css(sizes[i].css);break;}}var x=(-300+Math.floor(Math.random()*(ww+300)));var y=0;if(typeof initial=='undefined'|| !initial){y= -300;}else{y=(-300+Math.floor(Math.random()*(wh+300)));}$nowflake.css({left:x+'px',top:y+'px'});$nowflake.data('x',x);$nowflake.data('y',y);$nowflake.data('v',v);$nowflake.data('half_v',Math.round(v*0.5));$('body').append($nowflake);};function move(){if(Math.random()>0.8){xv+= -1+Math.random()*2;if(Math.abs(xv)>3){xv=3*(xv/Math.abs(xv));}}var newTime=new Date().getTime();var diffTime=newTime-prevTime;prevTime=newTime;if(diffTime<55&&flakeCount<absMax){addFlake();}else if(diffTime>150){$('span.winternetz:first').remove();flakeCount--;}$('span.winternetz').each(function(){var x=$(this).data('x');var y=$(this).data('y');var v=$(this).data('v');var half_v=$(this).data('half_v');y+=v;x+=Math.round(xv*v);x+= -half_v+Math.round(Math.random()*v);if(x>maxw){x= -300;}else if(x<minw){x=ww;}if(y>maxh){$(this).remove();flakeCount--;addFlake();}else{$(this).data('x',x);$(this).data('y',y);$(this).css({left:x+'px',top:y+'px'});if(v>=6){$(this).animate({rotate:'+='+half_v+'deg'},0);}}});}} (function($){zo=function(air,ahC){var xo=this;var ajr=air||"";var $PRG_oRoot=xo.$PRG_oRoot=$(air);xo.ahC=ahC;xo.aiB="progress-current";xo.ahU="progress-total";xo.aih=function(){};xo.ajd=false;xo.adH=100;};zo.prototype.aiy=function(ahX,ajk,ahC){var xo=this;xo.ajd=false;ahC&&xo.ajA(ahC);xo.$PRG_oRoot.html('<p><span id="'+xo.aiB+'">0</span> / <span id="'+xo.ahU+'">0</span> '+xo.aiY()+' &hellip;</p><div class="progressbar sm"><div id="progress-bar-filled"></div></div>');ajk&&xo.aiw(ajk);if(ahX){xo.aje(ahX)}else{xo.aje(0);}};zo.prototype.alq=function(adH){var xo=this;xo.adH=parseInt(adH);};zo.prototype.alz=function(){var xo=this;return parseInt(xo.adH);};zo.prototype.aia=function(ahX){var xo=this;var ais=ahX+xo.aiu();xo.aje(Math.min(ais,xo.ajp()));};zo.prototype.aje=function(ahX){var xo=this;var ajb=xo.ajp();var ahS=Math.max(Math.min(ahX,ajb),0);$("#"+xo.aiB).text(ahS||0);$("#progress-bar-filled").css("width",Math.min((ahS/ajb*100)||0,100)+'%');if((ahS==ajb||(ahS/ajb*100>=xo.adH))&&ajb>0&& !xo.ajd){xo.ajd=true;xo.aih.apply();}};zo.prototype.aiu=function(){var xo=this;return parseInt($("#"+xo.aiB).text())||0;};zo.prototype.aiw=function(ajk){var xo=this;$("#"+xo.ahU).text(ajk||0);};zo.prototype.ajp=function(){var xo=this;return parseInt($("#"+xo.ahU).text())||0;};zo.prototype.ajA=function(ahC){var xo=this;xo.ahC=ahC;};zo.prototype.aiY=function(){var xo=this;return xo.ahC||"";};zo.prototype.ajs=function(ajc){var xo=this;xo.aih=ajc;};})(jQuery); function du(eu,mE,mF){var ib='';var gQ='';for(var eh=0;eh<5;eh++){if(eh>0)ib=eh;else ib='';var gQ=document.getElementById('sharedtabsfileinfo'+ib+eu+'-desc');if(gQ)gQ.innerHTML=mE.replace(/"/g,'&#34;');var gQ=document.getElementById('sharedtabsfileinfo'+ib+eu+'-tags');if(gQ)gQ.innerHTML=mF.replace(/"/g,'&#34;');}};function dL(nI){for(var eh=1;document.getElementById(nI+eh+'-1')&&eh<=20;eh++){ae('sharetabsfile'+eh+'-',1);Xc(0,document.getElementById('sharetemplatefile'+eh),eh,'sharedtabsfileinfo'+eh+'-');}};function dT(gi,gK){var ky=document.getElementById('preview_img');if(ky){if(gi>4)gi=4;ky.src='http://www.mediafire.com.de.a2ip.ru/conv/'+gK+gi+'g.jpg';}};function Xc(jK,ml,eu,nN){if(!ml)return false;var gb="";gb=hU[jK];gb=cY(gb,nN,eu);ml.innerHTML=gb;};function ae(mC,hv){var ah;for(var eh=1;(ah=document.getElementById(mC+eh));eh++){if(eh==hv)ah.className="current";else ah.className="sharetab";}};function cW(gi,nD,gK,fo){var lS=document.getElementById('uploaded_html_'+nD+'41');var lQ=document.getElementById('uploaded_bbs_'+nD+'42');if(lS&&lQ){lS.value="<a href='http://www.mediafire.com.de.a2ip.ru/view/?"+fo+"' target='_blank'><img src='http://www.mediafire.com.de.a2ip.ru/convkey/"+gK.substr(0,4)+'/'+fo+gi+"g.jpg' border='0' alt='Simple, Free Image and File Hosting at MediaFire'></a>";lQ.value="[URL=http://www.mediafire.com.de.a2ip.ru/view/?"+fo+"][IMG]http://www.mediafire.com.de.a2ip.ru/convkey/"+gK.substr(0,4)+'/'+fo+gi+"g.jpg[/IMG][/URL]";}};function cY(ei,eO,eu){ei=ei.replace(/#FILENAME#/g,document.getElementById(eO+'fn').value);var qE="";var ag="";if(document.getElementById(eO+'desc').innerHTML==''){qE="<span style='color: #555'>No description entered</span>";ag="No description entered";}else{qE=document.getElementById(eO+'desc').innerHTML;ag=document.getElementById(eO+'desc').innerHTML;}ei=ei.replace(/#DESCRIPTION#/g,qE.replace(/"/g,'&#34;'));ei=ei.replace(/#DESCRIPTION_URL#/g,escape(ag));ei=ei.replace(/#DESCRIPTION_ORIG#/g,document.getElementById(eO+'desc').innerHTML.replace(/"/g,'&#34;'));ei=ei.replace(/#FILENUM#/g,eu);var sTags=document.getElementById(eO+'tags').innerHTML;sTags=sTags.replace(/&lt;/g,"\x3c");sTags=sTags.replace(/&gt;/g,'>');ei=ei.replace(/#TAGS_URL#/g,escape(sTags));ei=ei.replace(/#TAGS_DISP#/g,sTags);ei=ei.replace(/#IMGKEY#/g,document.getElementById(eO+'imgkey').value);ei=ei.replace(/#FILENAME#/g,document.getElementById(eO+'fn').value);ei=ei.replace(/#FILENAME_URL#/g,escape(document.getElementById(eO+'fn').value));ei=ei.replace(/#UPLOADDATE#/g,document.getElementById(eO+'upload').value);ei=ei.replace(/#FILESIZE#/g,document.getElementById(eO+'fs').value);ei=ei.replace(/#DOWNLOADS#/g,document.getElementById(eO+'dls').value);ei=ei.replace(/#TAGS#/g,document.getElementById(eO+'tagorig').value.replace(/"/g,'&#34;'));ei=ei.replace(/#RAND1#/g,aC(5));ei=ei.replace(/#FILENUM#/g,db(1000,3000));if(lB==1){ei=ei.replace(/#SSL#/g,'s');ei=ei.replace(/#URLKEY#/g,'');}else{ei=ei.replace(/#SSL#/g,'');var baa=aX(document.getElementById(eO+'imgkey').value);if(isNaN(baa)){ei=ei.replace(/#NOIMG_START#/g,'<!--');ei=ei.replace(/#NOIMG_END#/g,'-->');}ei=ei.replace(/#URLKEY#/g,baa);}var kg=document.getElementById(eO+'show_cantbrowse');if(!kg)ei=ei.replace(/#STYLE_CANTBROWSE#/g,'display: none');else if(kg&&kg.value==1)ei=ei.replace(/#STYLE_CANTBROWSE#/g,'');else ei=ei.replace(/#STYLE_CANTBROWSE#/g,'display: none');var lx=document.getElementById(eO+'show_owner');if(lx&&lx.value==1)ei=ei.replace(/#STYLE_SHOWOWNER#/g,'');else ei=ei.replace(/#STYLE_SHOWOWNER#/g,'display: none');var io=document.getElementById(eO+'show_download');if(io&&io.value==1)ei=ei.replace(/#STYLE_SHOWDOWNLOAD#/g,'');else ei=ei.replace(/#STYLE_SHOWDOWNLOAD#/g,'display: none');if(document.getElementById(eO+'folder').value==2){var mO=String(document.getElementById(eO+'qk').value);if(mO.length==13)ei=ei.replace(/#QUICKKEY#/g,mO);else ei=ei.replace(/#QUICKKEY#/g,'sharekey='+mO);}else ei=ei.replace(/#QUICKKEY#/g,document.getElementById(eO+'qk').value);if(document.getElementById(eO+'folder').value==1){ei=ei.replace(/#STYLE_FILEONLY#/g,'');ei=ei.replace(/#STYLE_NOTFILE#/g,'display: none');}else{ei=ei.replace(/#STYLE_FILEONLY#/g,'display: none');ei=ei.replace(/#STYLE_NOTFILE#/g,'');}if(document.getElementById(eO+'showpicture').value==1){ei=ei.replace(/#STYLE_PICTURE#/g,'');ei=ei.replace(/#STYLE_NOTPICTURE#/g,'display: none');}else{ei=ei.replace(/#STYLE_NOTPICTURE#/g,'');ei=ei.replace(/#STYLE_PICTURE#/g,'display: none');}if(document.getElementById(eO+'showpicturebox').value==1)ei=ei.replace(/#STYLE_PICTUREBOX#/g,'');else ei=ei.replace(/#STYLE_PICTUREBOX#/g,'display: none');var nG=document.getElementById(eO+'nonmyfiles');if(nG){if(document.getElementById(eO+'nonmyfiles').value==1)ei=ei.replace(/#STYLE_HIDENONMYFILES#/g,'display: none');else ei=ei.replace(/#STYLE_HIDENONMYFILES#/g,'');}if(document.getElementById(eO+'savemyfiles').value==0)ei=ei.replace(/#STYLE_SAVE#/g,'');else ei=ei.replace(/#STYLE_SAVE#/g,'display: none');if(document.getElementById(eO+'editinfo').value==1)ei=ei.replace(/#STYLE_EDITINFO#/g,'');else ei=ei.replace(/#STYLE_EDITINFO#/g,'display: none');var lf=document.getElementById(eO+'showviewimage');if(lf&&lf.value==1)ei=ei.replace(/#STYLE_VIEWIMAGE#/g,'');else ei=ei.replace(/#STYLE_VIEWIMAGE#/g,'display: none');if(UserLogin==1)ei=ei.replace(/#EMAILADDY#/g,UserEmail);else ei=ei.replace(/#EMAILADDY#/g,'');ei=ei.replace(/#NOIMG_START#/g,'');ei=ei.replace(/#NOIMG_END#/g,'');return ei;} var fS=0;var mk=0;var nF=0;var oG='';var oN='';var ov=10;var nb=10;function CalendarSetup(){var ah;var currentTime=new Date();var month=currentTime.getMonth()+1;var day=currentTime.getDate();var bnT=currentTime.getFullYear();var hc='';var gP='';if(month<10)hc='0'+month;else hc=''+month;if(day<10)gP='0'+day;else gP=''+day;if((ah=document.getElementById('input_time_end')))ah.value=bnT+'-'+hc+'-'+gP;currentTime.setDate(currentTime.getDate()-7);month=currentTime.getMonth()+1;day=currentTime.getDate();bnT=currentTime.getFullYear();if(month<10)hc='0'+month;else hc=''+month;if(day<10)gP='0'+day;else gP=''+day;if((ah=document.getElementById('input_time_start')))ah.value=bnT+'-'+hc+'-'+gP;Calendar.setup({inputField:"input_time_end",ifFormat:"%Y-%m-%d",button:"input_time_end_trigger",weekNumbers:false,iy:bbp});Calendar.setup({inputField:"input_time_start",ifFormat:"%Y-%m-%d",button:"input_time_start_trigger",weekNumbers:false,iy:bak});};function bbL(){var eh=0;for(eh=2;eh<nb;eh++){nd('report_contents'+eh);DoHide('report_contents'+eh);}};function dj(kz,ij){var arD=document.getElementById(kz);if(arD){if(ij!=1)arD.innerHTML='';DoShow(kz);}if(!ij){DoAPopup('report_loading_popup',453,332);bbQ();document.getElementById('customize_report_form').submit();}else{var ah=document.getElementById('statswork');if(ah){if(ah.location)ah.location=ij;else ah.src=ij;}}};function bak(){var hD=document.getElementById('input_time_start'),hA=document.getElementById('time_start'),iStartDateLimit=new Date().getTime()-((86400*1000)*window.P7_iStartLimit),aDateComponents=hD.value.match(/(\d+)/g),iStartDate=new Date(aDateComponents[0],aDateComponents[1]-1,aDateComponents[2]).getTime();var sStartDate=hD.value+'';if(iStartDate<iStartDateLimit){var oStartDate=new Date(iStartDateLimit),sStartMonth=('0'+(oStartDate.getMonth()+1)).slice(-2),sStartDate=('0'+(oStartDate.getDate())).slice(-2);sStartDate=oStartDate.getFullYear()+'-'+sStartMonth+'-'+sStartDate;}if(hD&&hA){hA.value=sStartDate;hD.value=sStartDate;}};function bbp(){var hD=document.getElementById('input_time_end');var hA=document.getElementById('time_end');if(hD&&hA){hA.value=hD.value+'';}};function ao(hg){var ah=document.getElementById('stats_status_message');if(ah){ah.className='show';ah.innerHTML=hg;if(document.getElementById('pagename')&&document.getElementById('pagename').value=='myfiles')Zi(0,hg);}else Zi(0,hg);};function bbc(){var ah=document.getElementById('stats_status_message');if(ah){ah.className='hide';ah.innerHTML='';}};function aO(fV){var i=0;var ah;for(eh=1;document.getElementById('report_type_display_'+eh);eh++){ah=document.getElementById('report_type_display_'+eh);if(eh==fV){ah.className='report_option_highlighted';}else{ah.className='report_option';}}ah=document.getElementById('report_type_preview_image');if(ah)ah.src='/images/bg/stats/'+fV+'_preview.png';ah=document.getElementById('country');ah=document.getElementById('query_type');if(ah)ah.value=fV;fS=fV;bbh(fS);ah=document.getElementById('form_bandwidth_filter');if(ah)if(fS==3)ah.className='hide';else ah.className='show';ah=document.getElementById('form_downloads_filter');if(ah)if(fS==3)ah.className='hide';else ah.className='show';ah=document.getElementById('form_bandwidth_filter_fields');if(ah)if(fS==3)ah.className='hide';else ah.className='show';ah=document.getElementById('form_downloads_filter_fields');if(ah)if(fS==3)ah.className='hide';else ah.className='show';};function aI(fV){ah=document.getElementById('report_type_preview_image');if(ah){if(fV!=mk)ah.src='/images/bg/stats/'+fV+'_preview.png';}mk=fV;};function aR(azZ){var i=0;var ah;for(eh=1;document.getElementById('report_type_time_'+eh);eh++){ah=document.getElementById('report_type_time_'+eh);if(eh==azZ){ah.className='time_option_highlighted';}else{ah.className='time_option';}}ah=document.getElementById('date_range');if(ah){if(azZ==4){ah.className='show';}else{ah.className='hide';}}ah=document.getElementById('country');ah=document.getElementById('time_fixed');if(ah)ah.value=azZ;nF=azZ;};function azE(kI,nU,lJ,mz,kS,kM,mZ){if(!mZ){var chart=new FusionCharts(kI,nU,lJ,mz,"0","0");chart.setTransparent();chart.setDataURL(escape(kS));chart.render(kM);}else{var map=new FusionMaps(kI,"MapID",lJ,mz,"0","0");map.setTransparent();map.setDataURL(escape(kS));map.render(kM);}};function cz(kG){var ah=document.getElementById('country');var eh=0;var MO=false;if(ah&&hi){if(au(ah))at(ah);if(kG)MO=true;else MO=false;kP(ah,'Any','',MO);kP(ah,'United States','US',MO);hi.multiSort(1);for(eh=2;hi[eh];eh++){MO=false;if(hi[eh][1]==kG)MO=true;kP(ah,hi[eh][0],hi[eh][1],MO);}}else return false;return;};function cC(Sz){var ah=document.getElementById('region');var eh=0;var MO=false;if(ah&&bao){if(au(ah))at(ah);if(Sz)MO=true;else MO=false;kP(ah,'Any','',MO);for(eh=0;bao[eh];eh++){MO=false;if(bao[eh][1]==Sz)MO=true;kP(ah,bao[eh][2],bao[eh][1],MO);}}else return false;return;};function qo(hl,fc,iV){var ah;var MO=false;ah=document.getElementById('bandwidth_type');if(ah){if(au(ah))at(ah);if(1==hl)MO=true;kP(ah,'Greater Than',1,MO);MO=false;if(2==hl)MO=true;kP(ah,'Less Than',2,MO);}MO=false;ah=document.getElementById('bandwidth_amount');if(ah){if(fc>0)ah.value=fc;else ah.value='';}MO=false;ah=document.getElementById('bandwidth_multi');if(ah){if(au(ah))at(ah);if(1==iV)MO=true;kP(ah,'B',1,MO);MO=false;if(2==iV)MO=true;kP(ah,'KB',2,MO);MO=false;if(3==iV)MO=true;kP(ah,'MB',3,MO);MO=false;if(4==iV)MO=true;kP(ah,'GB',4,MO);}MO=false;return;};function aZY(lO,iS,lC,iU){var ah;var MO=false;ah=document.getElementById('filesize_min_amount');if(ah){if(lO>0)ah.value=lO;else ah.value='';}ah=document.getElementById('filesize_min_multi');if(ah){if(au(ah))at(ah);if(1==iS)MO=true;kP(ah,'B',1,MO);MO=false;if(2==iS)MO=true;kP(ah,'KB',2,MO);MO=false;if(3==iS)MO=true;kP(ah,'MB',3,MO);MO=false;if(4==iS)MO=true;kP(ah,'GB',4,MO);}MO=false;ah=document.getElementById('filesize_max_amount');if(ah){if(lC>0)ah.value=lC;else ah.value='';}ah=document.getElementById('filesize_max_multi');if(ah){if(au(ah))at(ah);if(1==iU)MO=true;kP(ah,'B',1,MO);MO=false;if(2==iU)MO=true;kP(ah,'KB',2,MO);MO=false;if(3==iU)MO=true;kP(ah,'MB',3,MO);MO=false;if(4==iU)MO=true;kP(ah,'GB',4,MO);}MO=false;return;};function baL(mr){ah=document.getElementById('fileext');if(ah){if(mr)ah.value=mr;else ah.value='';}else return false;return;};function cA(hl,fc){var ah;var MO=false;ah=document.getElementById('download_type');if(ah){if(au(ah))at(ah);if(1==hl)MO=true;kP(ah,'Greater Than',1,MO);MO=false;if(2==hl)MO=true;kP(ah,'Less Than',2,MO);}MO=false;ah=document.getElementById('download_amount');if(ah){if(fc>0)ah.value=fc;else ah.value='';}MO=false;return;};function bbh(fV,fk,mh){var ah;var MO=false;ah=document.getElementById('sort_dir');if(ah){if(au(ah))at(ah);if(1==mh)MO=true;kP(ah,'Descending',1,MO);MO=false;if(2==mh)MO=true;kP(ah,'Ascending',2,MO);MO=false;}ah=document.getElementById('sort_field');if(ah){if(au(ah))at(ah);switch(fV){case '1':case 1:MO=false;if(1==fk)MO=true;kP(ah,'Downloaders',1,MO);MO=false;if(2==fk)MO=true;kP(ah,'Bandwidth',2,MO);MO=false;if(3==fk)MO=true;kP(ah,'Transfers',3,MO);MO=false;if(4==fk)MO=true;kP(ah,'File Name',4,MO);MO=false;break;if(5==fk)MO=true;kP(ah,'File Size',5,MO);MO=false;break;case '2':case 2:MO=false;if(1==fk)MO=true;kP(ah,'Downloaders',1,MO);MO=false;if(2==fk)MO=true;kP(ah,'Bandwidth',2,MO);MO=false;if(3==fk)MO=true;kP(ah,'Avg. File Size',3,MO);MO=false;if(4==fk)MO=true;kP(ah,'Country',4,MO);MO=false;break;case '3':case 3:MO=false;if(1==fk)MO=true;kP(ah,'Hits',1,MO);MO=false;if(2==fk)MO=true;kP(ah,'Avg. File Size',3,MO);MO=false;if(3==fk)MO=true;kP(ah,'Domain',4,MO);MO=false;break;case '4':case 4:MO=false;if(1==fk)MO=true;kP(ah,'Downloaders',1,MO);MO=false;if(2==fk)MO=true;kP(ah,'Bandwidth',2,MO);MO=false;if(3==fk)MO=true;kP(ah,'Avg. File Size',3,MO);MO=false;if(4==fk)MO=true;kP(ah,'File Type',4,MO);MO=false;break;default:return false;break;}}return;};function cB(fc){var ah;var MO=false;ah=document.getElementById('num_rows');if(ah){if(!(fc>0))fc=10;if(au(ah))at(ah);if(10==fc)MO=true;kP(ah,'10',10,MO);MO=false;if(20==fc)MO=true;kP(ah,'20',20,MO);MO=false;if(35==fc)MO=true;kP(ah,'35',35,MO);MO=false;if(50==fc)MO=true;kP(ah,'50',50,MO);}return;};function bcV(){cz();cC();qo();aZY();cA();cB();bbh(fS);baL();};function dB(){var kB=document.getElementById('save_report_name');if(kB){kB.value='';DoShow('save_report_form');DoHide('save_report_busy');DoAPopup('save_stats_popup',500,180);}};function dY(){var jI=document.getElementById('saved_reports_list');var eY=document.getElementById('statswork');var ez='';if(jI&&eY){if(au(jI))at(jI);DoHide('load_report_form');DoShow('load_report_busy');DoAPopup('load_stats_popup',500,330);ez='/dynamic/statistics.php?doviaget=1&report_list=1';if(eY.location)eY.location=ez;else eY.src=ez;}};function dJ(kb){var eY=document.getElementById('statswork');var ez='';if(eY){DoHide('load_report_form');DoShow('load_report_busy');ez='/dynamic/statistics.php?doviaget=1&load_report='+kb;if(eY.location)eY.location=ez;else eY.src=ez;}return false;};function dK(kb){var eY=document.getElementById('statswork');var ez='';if(eY){DoHide('load_report_form');DoShow('load_report_busy');ez='/dynamic/statistics.php?doviaget=1&delete_report='+kb;if(eY.location)eY.location=ez;else eY.src=ez;}return false;};function dr(){var fI=document.getElementById('save_report_name');var eY=document.getElementById('statswork');var ez='';var ah;if(fI&&eY){if(fI.value.length>=1&&fI.value.length<=60){DoHide('save_report_form');DoShow('save_report_busy');ez='/dynamic/statistics.php?doviaget=1&save_report=1&report_name='+escape(fI.value);if((ah=document.getElementById('query_type'))&&ah.value){ez+='&'+'query_type='+escape(ah.value);}if((ah=document.getElementById('time_fixed'))&&ah.value){ez+='&'+'time_fixed='+escape(ah.value);}if((ah=document.getElementById('time_start'))&&ah.value){ez+='&'+'time_start='+escape(ah.value);}if((ah=document.getElementById('time_end'))&&ah.value){ez+='&'+'time_end='+escape(ah.value);}if((ah=document.getElementById('country'))&&ah.value){ez+='&'+'country='+escape(ah.value);}if((ah=document.getElementById('region'))&&ah.value){ez+='&'+'region='+escape(ah.value);}if((ah=document.getElementById('filesize_min_amount'))&&ah.value){ez+='&'+'filesize_min_amount='+escape(ah.value);}if((ah=document.getElementById('filesize_max_amount'))&&ah.value){ez+='&'+'filesize_max_amount='+escape(ah.value);}if((ah=document.getElementById('filesize_min_multi'))&&ah.value){ez+='&'+'filesize_min_multi='+escape(ah.value);}if((ah=document.getElementById('filesize_max_multi'))&&ah.value){ez+='&'+'filesize_max_multi='+escape(ah.value);}if((ah=document.getElementById('sort_field'))&&ah.value){ez+='&'+'sort_field='+escape(ah.value);}if((ah=document.getElementById('sort_dir'))&&ah.value){ez+='&'+'sort_dir='+escape(ah.value);}if((ah=document.getElementById('fileext'))&&ah.value){ez+='&'+'fileext='+escape(ah.value);}if((ah=document.getElementById('bandwidth_type'))&&ah.value){ez+='&'+'bandwidth_type='+escape(ah.value);}if((ah=document.getElementById('bandwidth_amount'))&&ah.value){ez+='&'+'bandwidth_amount='+escape(ah.value);}if((ah=document.getElementById('bandwidth_multi'))&&ah.value){ez+='&'+'bandwidth_multi='+escape(ah.value);}if((ah=document.getElementById('download_type'))&&ah.value){ez+='&'+'download_type='+escape(ah.value);}if((ah=document.getElementById('download_amount'))&&ah.value){ez+='&'+'download_amount='+escape(ah.value);}if(eY.location)eY.location=ez;else eY.src=ez;}else{Zi(0,"Enter a report name before saving the report.");}}else{Zi(0,"Unable to save report, malformed HTML.");}} function addwarning(){var thealinks=document.getElementsByTagName("a");if(!thealinks){return;}for(var x=0;x!=thealinks.length;x++){if(thealinks[x].className=="addToolTip"){thealinks[x].setAttribute("tooltiptext",thealinks[x].title);thealinks[x].removeAttribute("title");thealinks[x].onmouseover=function ed(){eb(this.getAttribute("tooltiptext"))};thealinks[x].onmouseout=function ec(){asZ();};}}};var offsetfromcursorX= -7;var offsetfromcursorY=23;var offsetdivfrompointerX=13;var offsetdivfrompointerY=13;document.write('<div id="theToolTip"></div>');var ie=document.all;var ns6=document.getElementById&& !document.all;var enabletip=false;if(ie||ns6){var tipobj=document.all?document.all["theToolTip"]:document.getElementById?document.getElementById("theToolTip"):"";}var pointerobj=document.all?document.all["ToolTipPointer"]:document.getElementById?document.getElementById("ToolTipPointer"):"";function ietruebody(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body;};function eb(thetext,thewidth,thecolor){if(ns6||ie){if(typeof thewidth!=="undefined"){tipobj.style.width=thewidth+"px";}if(typeof thecolor!=="undefined"&&thecolor!==""){tipobj.style.backgroundColor=thecolor;}tipobj.innerHTML=thetext;enabletip=true;return false;}};function positiontip(e){if(enabletip){var nondefaultpos=false;var curX=(ns6)?e.pageX:event.clientX+ietruebody().scrollLeft;var curY=(ns6)?e.pageY:event.clientY+ietruebody().scrollTop;var winwidth=ie&& !window.opera?ietruebody().clientWidth:window.innerWidth-20;var winheight=ie&& !window.opera?ietruebody().clientHeight:window.innerHeight-20;var rightedge=ie&& !window.opera?winwidth-event.clientX-offsetfromcursorX:winwidth-e.clientX-offsetfromcursorX;var bottomedge=ie&& !window.opera?winheight-event.clientY-offsetfromcursorY:winheight-e.clientY-offsetfromcursorY;var leftedge=(offsetfromcursorX<0)?offsetfromcursorX*(-1): -1000;if(rightedge<tipobj.offsetWidth){tipobj.style.left=curX-tipobj.offsetWidth+"px";nondefaultpos=true;}else if(curX<leftedge){tipobj.style.left="5px";}else{tipobj.style.left=curX+offsetfromcursorX-offsetdivfrompointerX+"px";pointerobj.style.left=curX+offsetfromcursorX+"px";}if(bottomedge<tipobj.offsetHeight){tipobj.style.top=curY-tipobj.offsetHeight-offsetfromcursorY+"px";nondefaultpos=true;}else{tipobj.style.top=curY+offsetfromcursorY+offsetdivfrompointerY+"px";pointerobj.style.top=curY+offsetfromcursorY+"px";}tipobj.style.visibility="visible";if(!nondefaultpos){pointerobj.style.visibility="visible";}else{pointerobj.style.visibility="hidden";}}};function asZ(){if(ns6||ie){enabletip=false;tipobj.style.visibility="hidden";pointerobj.style.visibility="hidden";tipobj.style.left="-1000px";tipobj.style.backgroundColor='';tipobj.style.width='';}};function Tk(){document.onmousemove=positiontip;addwarning();return;} function ee(){title="MediaFire - Cloud storage for everyone.";url="http://www.mediafire.com.de.a2ip.ru";if(window.sidebar){window.sidebar.addPanel(title,url,"");}else if(window.external){window.external.AddFavorite(url,title);}else if(window.opera&&window.print){alert("Sorry, your web browser does not support automatically adding Bookmarks/Favorites.  Press 'Ctrl-D' in Firefox or 'Ctrl-T' in Opera to manually bookmark MediaFire.");return true;}} (function(){function XV(aam,abA,abt,atn){this.type=aam;this.WF=abA;this.Wm=abt;this.auQ=atn||false;this.manifest={};this.atW=true;this.memory={};};XV.prototype.ave=function(){var auw=this;auw.auQ=true;window.localStorage&&localStorage.clear();};XV.prototype.ats=function(){var auw=this;auw.auQ=false;};XV.prototype.auX=function(){this.atW=false;};XV.prototype.yx=function(VU){if(VU){if(this.memory[VU]){return this.memory[VU];}}else{if(sizeOf(this.memory)){return this.memory;}else{return this.memory;}}};XV.prototype.auT=function(){if(this.auq|| !this.atW|| !window.localStorage){return false;}if(!localStorage['manifest-'+this.type]){return false;}this.manifest=JSON.parse(localStorage['manifest-'+this.type]);return true;};XV.prototype.atY=function(){if(this.auq|| !this.atW|| !window.localStorage){return false;}this.manifest=amJ(this.memory,1);return true;};XV.prototype.atG=function(){if(this.auq|| !this.atW|| !window.localStorage){return false;}localStorage['manifest-'+this.type]=JSON.stringify(this.manifest);return true;};XV.prototype.Yx=function(VU,abi){this.memory[VU]=abi;};XV.prototype.abg=function(VU){this.memory[VU]&&(delete this.memory[VU]);};XV.prototype.abE=function(){for(var VU in this.memory){if(this.memory.hasOwnProperty(VU)){delete this.memory[VU];}}};window.XV=XV;})(); (function($){var YL,Za,Zh,aop=45000,aoN=3,Zr=new YR(2),Ys=4000,aar=[],aaw={},aaI=100,acq={},agS=function(){},aAM=1000000,azm=20,aPP=7*24*60*60*1000,aOw=null,aXs=180000,aXi=null,bqt=false,boI={'prev':'','count':0};function Zm(Zg,Yj){var Qb=this;if(Yj){while((Qb!=Qb.parent)&&(Qb=Qb.parent)){if(Qb===Zg){return true;}}return false;}else{return Zg===this.parent;}};function aQQ(MFAPI_iDelay){if(!MFAPI_iDelay)MFAPI_iDelay=aPP;if(aOw!=null){clearTimeout(aOw);aOw=null;}var MFAPI_iTargetExpiration= +new Date+MFAPI_iDelay;aOw=setTimeout(function(){var MFAPI_iNow= +new Date;if(MFAPI_iNow<MFAPI_iTargetExpiration){aQQ(MFAPI_iTargetExpiration-MFAPI_iNow);}else{dZ();Zi(3,"Logging off due to inactivity...");setTimeout(dS,2000);}},MFAPI_iDelay);};function Ll(vm){if(typeof vm=='function'){return vm;}if(vm&&vm.success&&(typeof vm.success=='function')){return vm.success;}else{return(function(){});}};function ack(vm){if(vm&&vm.error&&(typeof vm.error=='function')){return vm.error;}if(acq.error){return acq.error;}else{return(function(){});}};function aiW(vm){var acM={};acM.success=Ll(vm);acM.error=ack(vm);return acM;};function Cp(Yd,XK){this.filename="";this.created="";this.desc="";this.description="";this.tags="";this.note="";this.privacy="public";this.password_protected="no";this.size=0;this.downloads=0;this.flag=0;this.hash="";this.parent="";this.filetype="";this.image_status="ready";this.preview="no";if(typeof Yd==="string"){this.quickkey=Yd;}else if(Yd){$.extend(this,Yd);}if(typeof XK!=="undefined"){if(typeof XK.files=='undefined'&&XK.myfiles){XK=XK.myfiles;this.parent_name=XK.name;}this.parent=XK;if(!XK.files)XK.files={};XK.files[this.quickkey]=this;}};Cp.Zo=function(YP){return YP instanceof Cp;};Cp.YH=function(Yd,vm){var Qb=this;WJ($.extend({type:"POST",url:"/api/1.4/file/delete.php?r="+aC(4),data:{quick_key:Yd}},aiW(vm)),1,true);};Cp.beo=function(bea,vm){var Qb=this;WJ($.extend({type:"POST",url:"/api/1.4/file/purge.php?r="+aC(4),data:{quick_key:bea}},aiW(vm)),1,true);};Cp.aVK=function(acg,ZT,ady,aex,aVa,acM,bdr,bjp,MFAPI_bInstantUpload){var Qb=this;var data={filename:acg,hash:ZT,size:ady,folder_key:aex};if(aVa)data.action_on_duplicate=aVa;if(bdr)data.resumable='yes';if(bjp)data.path=bjp;WJ({type:"POST",url:"/api/1.4/upload/check.php?r="+aC(4),data:data,success:function(MFAPI_oCheckData){var MFAPI_bHandleDuplicate=MFAPI_oCheckData.response.file_exists!='yes'||(aVa&&aVa!=='skip');if(MFAPI_bInstantUpload&&MFAPI_oCheckData.response&&MFAPI_oCheckData.response.hash_exists=='yes'&&MFAPI_bHandleDuplicate){WJ({type:"POST",url:"/api/1.4/upload/instant.php?r="+aC(4),data:data,success:function(MFAPI_oInstantData){$.extend(MFAPI_oCheckData,MFAPI_oInstantData);if(acM.success){acM.success(MFAPI_oCheckData);}},error:acM.error||acq.error||{}});}else if(acM.success){acM.success(MFAPI_oCheckData);}},error:acM.error||acq.error||{}});};Cp.adu=function(acg,ZT,ady,aex,acM){var Qb=this;WJ({type:"POST",url:"/api/1.4/upload/instant.php?r="+aC(4),data:{filename:acg,hash:ZT,size:ady,folder_key:aex},success:acM.success||{},error:acM.error||acq.error||{}});};Cp.aad=function(Yd,WW,vm){var data={quick_key:Yd};if(WW){data.folder_key=WW;}WJ($.extend({type:"POST",url:"/api/1.4/file/move.php?r="+aC(4),data:data},aiW(vm)),-2,true);};Cp.aET=function(Yd,WW,vm){aXY(function(aXS){var data={quick_key:Yd};if(WW){data.folder_key=WW;}if(YL){data.session_token=YL;}WJ($.extend({type:"POST",url:"/api/1.4/file/copy.php?r="+aC(4),data:data},aiW(vm)),-2,true);});};Cp.aUT=function(Yv,aUP,vm){var data={keys:Yv,meta_only:'yes'};if(aUP){for(aMT in aUP){data[aMT]=aUP[aMT]?'yes':'no';}}if(YL)data.session_token=YL;WJ({type:"POST",url:"/api/1.4/file/zip.php?r="+aC(4),data:data,success:function(){data.response_format='json';data.meta_only='no';var Bi=$('<form>',{method:'post',action:'/api/1.4/file/zip.php?r='+aC(4),target:'zipdownload',style:'display: none'});for(var aWd in data){var TY=$('<input>',{name:aWd,value:data[aWd]});Bi.append(TY);}var app=$('<input>',{type:'submit'});Bi.append(app);$(document.body).append(Bi);Bi.trigger('submit');},error:ack(vm)},-2,true);};Cp.auY=function(Yd,WW,vm){var data={quick_key:Yd};if(WW&&WW!='myfiles'){data.folder_key=WW;}WJ($.extend({type:"POST",url:"/api/1.4/file/copy.php?r="+aC(4),data:data},aiW(vm)),-2,true);};Cp.asi=function(asa,vm){var Qb=this;var ase='';if($.isArray(asa))ase=asa.join();else ase=asa;var aiT=function(WH,ts,Yi){Ll(vm).apply(this,[WH,ts,Yi]);};WJ({type:"POST",url:"/api/1.4/file/get_info.php?r="+aC(4),data:{quick_key:ase},success:aiT,error:ack(vm)});};Cp.prototype.WJ=function(YM,WH,vm,aas,aXO){if(!vm){vm=WH;WH={};}if(!WH.quick_key)WH.quick_key=this.quickkey;WJ($.extend({url:YM,data:WH},aiW(vm)),aas,aXO);};Cp.prototype.avz=function(){return this.filename||'';};Cp.prototype.WX=function(){return this.quickkey;};Cp.prototype.Yw=function(vm){var Qb=this;var aiT=function(WH,ts,Yi){if(WH){$.each(WH.response.file_info,function(WX,aey){Qb[WX]=aey;});if(Qb.filename===null){Qb.filename='UNKNOWN FILE';}}Ll(vm).apply(this,[WH,ts,Yi]);};this.WJ("/api/1.4/file/get_info.php?r="+aC(4),{success:aiT,error:ack(vm)});};Cp.prototype.aNW=function(Wi,vm){if(!vm){vm=Wi;Wi={};}Wi.data=Wi.data||{};if(YL)Wi.data.session_token=YL;var aiT=function(WH){Ll(vm).apply(this,[WH.response]);};this.WJ("/api/1.4/file/one_time_key.php?r="+aC(4),Wi.data,{success:aiT,error:ack(vm)});};Cp.prototype.aYV=function(vm){var Qb=this;var aiT=function(WH){Ll(vm).apply(this,[WH.response]);};this.WJ("/api/1.4/file/get_links.php?link_type=direct_download&r="+aC(4),{},{success:aiT,error:ack(vm)});};Cp.prototype.MFAPI_GetLinks=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}Wi.data=Wi.data||{};var aiT=function(WH){Ll(vm).apply(this,[WH.response]);};this.WJ("/api/1.4/file/get_links.php?r="+aC(4),Wi,{success:aiT,error:ack(vm)});};Cp.MFAPI_ConfigureOneTimeKey=function(MFAPI_sKey,Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}Wi.data=Wi.data||{};Wi.data.token=MFAPI_sKey;Wi.url="/api/1.4/file/configure_one_time_key.php?r="+aC(4);var aiT=function(WH){Ll(vm).apply(this,[WH.response]);};Wi.success=aiT;Wi.error=ack(vm);WJ(Wi);};Cp.prototype.YH=function(vm){var Qb=this;var acU=vm.error||acq.error||false;var aiT=function(data,adB,Yi){if(Yi.status==200){Ll(vm).apply(this,[data,adB,Yi]);}else{ack(vm).apply(this,[data,adB,Yi]);}};this.WJ("/api/1.4/file/delete.php?r="+aC(4),{},{success:aiT,error:acU},1,true);};Cp.prototype.beo=function(vm){var Qb=this;var acU=vm.error||acq.error||false;var aiT=function(data,adB,Yi){if(Yi.status==200){Ll(vm).apply(this,[data,adB,Yi]);}else{ack(vm).apply(this,[data,adB,Yi]);}};this.WJ("/api/1.4/file/purge.php?r="+aC(4),{},{success:aiT,error:acU},1,true);};Cp.prototype.aad=function(WW,vm){var WH={};if(!vm){vm=WW;WW=null;}if(WW){WH.folder_key=WW;}var acU=vm.error||false;this.WJ("/api/1.4/file/move.php?r="+aC(4),{},aiW(vm),1,true);};Cp.prototype.aET=function(WW,vm){aXY(function(aXS){var WH={};if(!vm){vm=WW;WW=null;}if(WW){WH.folder_key=WW;}if(YL){data.session_token=YL;}var acU=vm.error||false;this.WJ("/api/1.4/file/copy.php?r="+aC(4),{},aiW(vm),1,true);});};Cp.prototype.Yn=function(WH,vm){var Qb=this;var aiT=function(YB){WH.filename&&(WH.filename=WH.filename.stripTags());WH.tags&&(WH.tags=WH.tags.stripTags()+'');WH.description&&(WH.description=WH.description.stripTags());$.extend(Qb,WH);Ll(vm).apply(this,arguments);};this.WJ("/api/1.4/file/update.php?r="+aC(4),WH,{success:aiT,error:ack(vm)},1,true);};Cp.prototype.agq=function(ahc,vm){var WH={from_quickkey:this.quickkey,to_quickkey:ahc};this.WJ("/api/1.4/file/update_file.php?r="+aC(4),WH,vm,1,true);};Cp.prototype.aiV=function(vm,folderkey){this.WJ("/api/1.4/file/copy.php?r="+aC(4),{},vm,1,true);};Cp.prototype.aax=function(vm){this.Yn({privacy:"public"},vm);};Cp.prototype.aaG=function(vm){this.Yn({privacy:"private"},vm);};Cp.prototype.Zt=function(){return(this.privacy==="public");};Cp.prototype.abL=function(){return(this.privacy==="private");};Cp.prototype.abQ=function(){return this.password_protected==="yes";};Cp.prototype.axV=function(){return aCf(this);};Cp.prototype.aFP=function(){return aGe(this);};Cp.prototype.abK=Zm;Cp.prototype.Zp=function(){var YA=[],Yu=this;while((Yu!=Yu.parent)&&(Yu=Yu.parent)){YA.push(Yu);}return YA;};Cp.prototype.aqD=function(arn){var aqA=this.ajw();var apK=arn.ajw();if(aqA&&apK){if(aqA.toLowerCase()!==apK.toLowerCase()){return false;}}else if(aqA||apK){return false;}return true;};Cp.prototype.ajw=function(){var ahM=/\.[^.]+$/;var ajh=undefined;var ahZ=undefined;if(typeof this.filename!=='string'){return false;}if(!(ajh=this.filename.match(ahM))){return false;}if(!(ahZ=ajh[0])){return false;}return ahZ;};function yJ(WX,XK){this.desc="";this.description="";this.tags="";this.created="";this.privacy="public";this.custom_url="";this.shared="";this.dropbox_enabled="";this.avatar="";this.parent="";this.owner_name="";this.file_count="0";this.flag=0;this.folder_count=0;this.total_folders=0;this.total_files=0;if(typeof WX==="string"){this.folderkey=WX;}else if(WX){$.extend(this,WX);}if(typeof XK!=="undefined"){this.parent=XK;}if(!this.folders){this.folders={};}if(!this.files){this.files={};}};yJ.aaW=function(YP){return YP instanceof yJ;};yJ.YH=function(Yv,vm){WJ($.extend({type:"POST",url:"/api/1.4/folder/delete.php?r="+aC(4),data:{folder_key:Yv}},aiW(vm)),-2,true);};yJ.beo=function(Yv,vm){WJ($.extend({type:"POST",url:"/api/1.4/folder/purge.php?r="+aC(4),data:{folder_key:Yv}},aiW(vm)),-2,true);};yJ.aad=function(Yv,WW,acM){if(!acM){acM={};}if(!acM.success){acM.success=WW;WW=null;}var WH={folder_key_src:Yv};if(WW){WH.folder_key_dst=WW;}if(WH.folder_key_src===WH.folder_key_dst){}WJ($.extend({type:"POST",url:"/api/1.4/folder/move.php?r="+aC(4),data:WH},aiW(acM)),-2,true);};yJ.aET=function(aTq,WW,vm){aXY(function(aXS){var data={folder_key_src:aTq};if(WW){data.folder_key_dst=WW;}if(YL){data.session_token=YL;}WJ($.extend({type:"POST",url:"/api/1.4/folder/copy.php?r="+aC(4),data:data},aiW(vm)),-2,true);});};yJ.asi=function(aLU,vm,bkB){var Qb=this;var aMn='';if($.isArray(aLU))aMn=aLU.join();else aMn=aLU;bkM=bkB?"yes":"no";var aiT=function(WH,ts,Yi){Ll(vm).apply(this,[WH,ts,Yi]);};WJ({type:"POST",url:"/api/1.4/folder/get_info.php?r="+aC(4),data:{folder_key:aMn,details:bkM},success:aiT,error:ack(vm)},false,true);};yJ.prototype.avz=function(){return this.name||'';};yJ.prototype.WX=function(){return this.folderkey;};yJ.prototype.WJ=function(YM,Wi,vm,aas,aXO){if(!vm){vm=Wi;Wi={};}Wi.data=Wi.data||{};if(!Wi.data.folder_key){Wi.data.folder_key=this.folderkey;}$.extend(Wi,aiW(vm));WJ($.extend({url:YM},Wi),aas,aXO);};yJ.prototype.Yw=function(Wi,vm){if(!vm){vm=Wi;Wi={};}if(Wi.data){YU=Wi.data.recursive;}else{YU="no";}var Qb=this;if(!Qb.folders){Qb.folders={};}Wi.type="POST";var aiT=function(WH,ts,Yi){if(WH){Qb.etag=Yi.getResponseHeader("etag");if(WH.response.folder_info){var YJ=WH.response.folder_info;if(Qb.name===null){Qb.name='UNKNOWN FOLDER';}if(typeof SHARED=='undefined'|| !SHARED&&YJ.flag)Qb.shared=avH(YJ.flag,1)==1?"no":"yes";$.each(YJ,function(WX,aey){if((WX!='files')&&(WX!='folders')){Qb[WX]=aey;}});if((YJ.folders&&YJ.folders.length>0)||(YJ.files&&YJ.files.length>0)){Qb.Yy(YJ,(YU==="yes"),true);Qb.ZW(YJ.files);}else{WH.empty_results=true;}}}Ll(vm).apply(this,arguments);};this.WJ("/api/1.4/folder/get_info.php?r="+aC(4),Wi,{success:aiT,error:ack(vm)});};yJ.prototype.aEn=function(Wi,vm,aas){if(!aas){aas=vm;vm=Wi;Wi={};}var Qb=this;if(!Qb.folders){Qb.folders={};}if(!Qb.files){Qb.files={};}var aiT=function(WH,ts,Yi){var aKi=[];var MFAPI_bTrashFolder=(Qb.folderkey==='trash');if(WH){var YJ=MFAPI_bTrashFolder?WH.response:WH.response.folder_content;if(YJ){$.each(YJ,function(WX,aey){if((WX!='files')&&(WX!='folders')&&(WX!='content_type')){Qb[WX]=aey;}});if((YJ.folders&&YJ.folders.length>0)||(YJ.files&&YJ.files.length>0)){if(YJ.folders){YJ.folderCount=YJ.folders.length;$.each(YJ.folders,function(aCl,aIk){if((typeof SHARED=='undefined'|| !SHARED)&&aIk.flag)YJ.folders[aCl].shared=avH(aIk.flag,1)?"no":"yes";if(Qb.shared=="yes"||Qb.shared=="child"){YJ.folders[aCl].shared="child";YJ.folders[aCl].owner_name=Qb.owner_name;}YJ.folders[aCl].parent_chunk=YJ.chunk_number;aKi.push(YJ.folders[aCl]);});Qb.Yy(YJ,false,false);if(YJ.more_chunks!="yes")Qb.folders_loaded=true;else Qb.folders_loaded=false;}if(YJ.files){$.each(YJ.files,function(aCl,aGX){YJ.files[aCl].parent_chunk=YJ.chunk_number;aKi.push(YJ.files[aCl]);});Qb.ZW(YJ.files);if(YJ.more_chunks!="yes")Qb.files_loaded=true;else Qb.files_loaded=false;}Qb[YJ.content_type+"_chunk"]=YJ.chunk_number;}if(!YJ[YJ.content_type]||YJ[YJ.content_type].length==0){Qb[YJ.content_type+"_loaded"]=true;}if(YJ.content_type&&YJ.chunk_number)Qb[YJ.content_type+"_chunk"]=YJ.chunk_number;}}Ll(vm).call(this,Qb,aKi,WH);};var MFAPI_sContentUrl='/api/1.4/folder/get_content.php';if(this.folderkey==='trash'){MFAPI_sContentUrl='/api/1.4/device/get_trash.php';}this.WJ(MFAPI_sContentUrl+"?r="+aC(4),Wi,{success:aiT,error:ack(vm)},aas);};yJ.prototype.abT=function(vm){var Qb=this;var aiT=function(WH,ts,Yi){if(WH){if(WH.response.folder_info.note){var YJ=WH.response.folder_info.note;Qb.note_subject=YJ.subject||'';Qb.note_description=YJ.description||'';}else{Qb.note_subject='';Qb.note_description='';}}Ll(vm).apply(this,arguments);};this.WJ("/api/1.4/folder/get_info.php?r="+aC(4),{success:aiT,error:ack(vm)});};yJ.prototype.ZL=function(vm){var Qb=this;Qb.Yw({data:{recursive:"yes",folder_key:Qb.ZA()}},vm);};yJ.prototype.ZA=function(){var Yv=[];$.each(this.folders,function(ZC){Yv.push(ZC);});return Yv.join(",");};yJ.prototype.YS=function(Yj,vm){var Qb=this;if(!vm){vm=Yj;Yj=false;}var YF=Qb.aaf();if(Qb.folderkey!="myfiles"){if(YF<=Ys){Qb.Yw({data:{recursive:"yes"}},vm);}else{if(Qb.aag()<Ys){Qb.Yw({data:{recursive:"no"}},function(){if(Yj){var Zq=[];var aaH=[];$.each(Qb.folders||[],function(WX,XN){if(XN.aaf()>Ys){XN.YS(true,vm);}else{Zq.push(XN);}});}Ll(vm).apply(this,arguments);});}else{var YC=0;Qb.Ze(YC,Ys,YF,function(){if(Yj){$.each(Qb.folders||[],function(WX,XN){XN.YS(true,vm);});}Ll(vm).apply(this,arguments);});}}}else{$.each(Qb.folders||[],function(WX,XN){if(XN.folderkey!==null){XN.YS(true,vm);}});}};yJ.prototype.Ze=function(YC,Ys,YF,vm){var Qb=this;var Wi={data:{recursive:"no",start:YC,limit:Ys}};var aiT=function(){if(Wi.data.empty_result||(YC+Ys>=YF)){Ll(vm).apply(this,arguments);}else{Qb.Ze(YC+Ys,Ys,YF,vm);}};Qb.Yw(Wi,{success:aiT,error:ack(vm)});};yJ.prototype.aaf=function(){var Qb=this;var ajF=Qb.aag();$.each(Qb.folders,function(WX,XN){ajF+=parseInt(XN.aaf());});return ajF;};yJ.prototype.YH=function(vm){var Qb=this;this.WJ("/api/1.4/folder/delete.php?r="+aC(4),{},vm,-2,true);};yJ.prototype.beo=function(vm){var Qb=this;this.WJ("/api/1.4/folder/purge.php?r="+aC(4),{},vm,-2,true);};yJ.prototype.aad=function(WW,vm){if(!vm){vm=WW;WW=null;}var WH={};if(WW){WH.folder_key_dst=WW;}this.WJ("/api/1.4/folder/move.php?r="+aC(4),{data:WH},vm,-2,true);};yJ.prototype.Yn=function(WH,vm){var self=this;var aiT=function(data){if(WH.foldername){WH.name=WH.foldername;delete WH.foldername;}delete WH.privacy_recursive;WH.description&&(WH.description=WH.description.stripTags());$.extend(self,WH);Ll(vm).apply(self,arguments);};this.WJ("/api/1.4/folder/update.php?r="+aC(4),{data:WH},{success:aiT,error:ack(vm)},1,true);};yJ.prototype.aoo=function(YG,XK,vm){if(!vm){vm=XK;XK=null;}var data={foldername:YG};if(XK){data.parent=XK;}this.WJ("/api/1.4/folder/create.php?r="+aC(4),{data:data},vm,1,true);};yJ.prototype.aET=function(WW,vm){aXY(function(aXS){var WH={folder_key_src:this.folderkey};if(!vm){vm=WW;WW=null;}if(WW){WH.folder_key_dst=WW;}if(YL){data.session_token=YL;}var acU=vm.error||false;this.WJ("/api/1.4/folder/copy.php?r="+aC(4),{},aiW(vm),1,true);});};yJ.prototype.aax=function(Yj,vm){this.Yn({privacy:"public",privacy_recursive:(! !Yj?"yes":"no")},vm);};yJ.prototype.aaG=function(Yj,vm){this.Yn({privacy:"private",privacy_recursive:(! !Yj?"yes":"no")},vm);};yJ.prototype.Zt=function(){return(this.privacy==="public");};yJ.prototype.abL=function(){return(this.privacy==="private");};yJ.prototype.aaM=function(){return!$.isEmptyObject(this.folders)|| !$.isEmptyObject(this.files);};yJ.prototype.aag=function(Ya){var Qb=this;var ajF=parseInt(Qb.file_count||0);if(isNaN(ajF)){ajF=0;}if(Ya){$.each(Qb.folders,function(folderkey,folder){ajF+=folder.aag(true);});}return ajF;};yJ.prototype.MFAPI_FolderCount=function(Ya){var Qb=this,MFAPI_iFolderCount;if(typeof Qb.folder_count!=="undefined"){MFAPI_iFolderCount=(parseInt(Qb.folder_count,10)||0);}else{MFAPI_iFolderCount=(parseInt(sizeOf(Qb.folders),10)||0);}if(isNaN(MFAPI_iFolderCount)){MFAPI_iFolderCount=0;}if(Ya){$.each(Qb.folders,function(folderkey,folder){MFAPI_iFolderCount+=folder.MFAPI_FolderCount(true);});}return MFAPI_iFolderCount;};yJ.prototype.MFAPI_ChildCount=function(){return(this.aag()+this.MFAPI_FolderCount());};yJ.prototype.Yp=function(YG,vm){var XK=this,data={foldername:YG,parent_key:XK.folderkey};if(data.parent_key==="myfiles"){data.parent_key="";}var aiT=function(response){var Zf=response.response,data={name:YG.stripTags(),folderkey:Zf.folder_key,created:Zf.created,privacy:Zf.privacy?Zf.privacy:'private',permissions:Zf.permissions};Ll(vm).call(null,new yJ(data,XK),response);};WJ({url:"/api/1.4/folder/create.php?r="+aC(4),data:data,success:aiT,error:ack(vm)},1,true);};yJ.prototype.CreateSubFile=function(aQp,aOZ,vm){var XK=this,data={};if(aQp)data.filename=aQp;if(aOZ)data.file_extension=aOZ;if(XK.folderkey&&XK.folderkey!="myfiles")data.parent_key=XK.folderkey;data.type='text';var aiT=function(response){Ll(vm).call(null,new Cp(response.response.fileinfo,XK),response);};WJ({url:"/api/1.4/file/create.php?r="+aC(4),data:data,success:aiT,error:ack(vm)},1,true);};yJ.prototype.aaL=function(){var Qb=this;var Zq={};if(Qb.folders.constructor==Array){$.each(Qb.folders,function(WX,XN){Zq[XN.folderkey]=XN;});Qb.folders=Zq;}};yJ.prototype.aaJ=function(){var Zn={};$.each(this.files,function(WX,Yl){Zn[Yl.quickkey]=Yl;});this.files=Zn;};yJ.prototype.awa=function(awA){var Qb=this;$.each(awA,function(WX,avB){if(WX!='files'&&WX!='folders'){Qb[WX]=avB;}});};yJ.prototype.Yy=function(YE,Yj,YZ){var Qb=this;if(Yj&&(!YZ)){Qb.folders={};Qb.files={};}if(Qb.folders&&Qb.folders.constructor==Array){Qb.aaL();}if(Qb.files&&Qb.files.constructor==Array){Qb.aaJ();}if(Qb.name===null){Qb.name='UNKNOWN FOLDER';}$.each(YE.folders||{},function(WX,XN){if(!Qb.folders)Qb.folders={};if(!YZ||(!Qb.folders[XN.folderkey])||(Qb.folders[XN.folderkey].constructor==Object)){Qb.folders[XN.folderkey]=new yJ(XN,Qb);}$.each(XN,function(afy,aey){if((afy!='files')&&(afy!='folders')){Qb.folders[XN.folderkey][afy]=XN[afy];}if(Qb.shared=="yes"&&Qb.shared=="child")Qb.folders[XN.folderkey].shared="child";});if(!Qb.folders[XN.folderkey].owner_name){Qb.folders[XN.folderkey].owner_name=Qb.owner_name;}if(Yj){Qb.folders[XN.folderkey].Yy(YE.folders[WX],true,YZ);}});if(YE.files)Qb.ZW(YE.files);};yJ.prototype.ZW=function(YE){var Qb=this;if(!Qb.files){Qb.files={};}$.each(YE||{},function(WX,Yl){if(Yl.quickkey){Qb.files[Yl.quickkey]=new Cp(Yl,Qb);Qb.files[Yl.quickkey].owner_name=Qb.owner_name;if(Qb.files[Yl.quickkey].filename===null){Qb.files[Yl.quickkey].filename='UNKNOWN FILE';}Qb.files[Yl.quickkey].preview=aCf(Yl)?"yes":"no";}});Qb.aaJ();};yJ.prototype.abK=Zm;yJ.prototype.Zp=function(){var YA=[],Yu=this;while((Yu!=Yu.parent)&&(Yu=Yu.parent)){YA.push(Yu);}return YA;};yJ.prototype.aHV=function(vm){var aiT=function(data,ts){Ll(vm).call(null,data);};WJ({url:"/api/1.4/folder/get_depth.php?r="+aC(4),data:{folder_key:this.folderkey},success:aiT});};yJ.prototype.aaz=function(Yj){var Qb=this;aar.push(this);aaw[this.folderkey]=this;if(Yj){$.each(Qb.folders,function(WX,XN){XN.aaz(true);});}};yJ.prototype.aeo=function(){var gg=[];gg=gg.concat($.values(this.folders),$.values(this.files));if(sizeOf(this.folders)){$.each(this.folders,function(folderkey,folder){gg=gg.concat(folder.aeo());});}return gg;};yJ.prototype.aFG=function(Wi,vm){var aiT=function(data,ts){Ll(vm).call(null,data);};WJ($.extend({url:"/api/1.4/folder/search.php?r="+aC(4),success:aiT,error:ack(vm)},Wi));};function cD(YX){this.session_token=YX||YL;};cD.prototype.sB=function(vm){WJ($.extend({url:"/api/1.4/billing/get_invoice.php?r="+aC(4)},aiW(vm)));};function Dv(YX){this.session_token=YX||YL;};function bpF(){if(bqt||$("#modal_window_popup").length==0){return;}bqt=true;if(window.top.location.protocol=="http:"){window.localStorage&&localStorage.clear();top.location='/logout.php';return;}function bqi(bqg){YL=bqg;if(typeof beR!="undefined")beR(YL);bqt=false;Zr.Zl();};var brl={hideCloseButton:true,queue:false,forceUserAction:true,onLoadCallback:function(){$("#modal_msg_iframe")[0].contentWindow.bqJ=bqi;},transparent:false};blu('/templates/confirm/confirm_login.php',415,265,brl);};Dv.prototype.acA=function(vm){var aiT=function(data,ts,Yi){YL=this.session_token||YL;Ll(vm).call(null,data);};var aBJ=function(data,ts,Yi){$.getJSON('/dynamic/get_session_token.php?rand='+aC(5),function(oResponseData){if(oResponseData.session_token){YL=oResponseData.session_token;if(typeof beR!="undefined")beR(YL);}else if(oResponseData.error=="user_logged_out"){Zr.aaU(true);bpF();}});};WJ({url:"/api/1.4/user/renew_session_token.php?r="+aC(4),success:aiT,error:aBJ},-2);};Dv.prototype.aZf=function(vm,Wi){var aiT=vm.success;WJ($.extend({type:"POST",url:"/api/1.4/user/fetch_tos.php?r="+aC(4),success:aiT,error:ack(vm)},Wi));};Dv.prototype.Yw=function(vm){WJ($.extend({url:"/api/1.4/user/get_info.php?r="+aC(4)},aiW(vm)));};Dv.prototype.aFf=function(Wi,vm){if(!YL){return;}if(!vm){vm=Wi;Wi={};}var aiT=function(data,ts,Yi){if(data){var myfiles=new tH.yJ({name:"My Files",folderkey:"myfiles",created:"",etag:Yi.getResponseHeader("etag")});myfiles.folder_count=data.response.folder_content.folders.length;myfiles.Yy(data.response.folder_content,false);$.each(myfiles.folders,function(WX,XN){if(parseInt(XN.file_count)==0){if(XN.name===null){XN.name='UNKNOWN FOLDER';}}XN.aaz(true);});aar.sort(aaB);}Ll(vm).call(null,myfiles,data);};WJ({url:"/api/1.4/folder/get_content.php?r="+aC(4),data:$.extend({content_type:"folders"},Wi),success:aiT,error:ack(vm)});};Dv.prototype.aDZ=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/user/get_devices.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};Dv.prototype.aKH=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/user/link_facebook.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};Dv.prototype.boC=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/user/unlink_facebook.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};Dv.prototype.boq=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/user/link_twitter.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};Dv.prototype.bnE=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/user/unlink_twitter.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};Dv.prototype.aWB=function(Wi,vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/upload/set_options.php?r="+aC(4),data:Wi,success:Ll(vm),error:ack(vm)},1,true);};Dv.prototype.aXn=function(vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/user/get_settings.php?r="+aC(4),success:Ll(vm),error:ack(vm)});};Dv.prototype.lq=function(Wi,vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/user/set_settings.php?r="+aC(4),data:Wi,success:Ll(vm),error:ack(vm)},1);};Dv.prototype.azo=function(Wi,vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/user/update.php?r="+aC(4),data:Wi,success:Ll(vm),error:ack(vm)},1);};Dv.prototype.Vw=function(Wi,vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/upload/add_web_upload.php?r="+aC(4),data:Wi,success:Ll(vm),error:ack(vm)});};Dv.prototype.Vu=function(Wi,vm){if(!YL){return;}WJ({type:"POST",url:"/api/1.4/upload/get_web_uploads.php?r="+aC(4),data:Wi,success:Ll(vm),error:ack(vm)});};function aCO(){};aCO.Yw=function(Wi,vm){if(!vm){vm=Wi;Wi={};}var aiT=function(data,ts,Yi){if(data&&data.response){var RF=data.response;window.tH.configuration=RF;window.tH.current_api_version=RF.current_api_version;if(localStorage&&localStorage['current_api_version']!=RF.current_api_version){var aXG,aWP;if(localStorage['user']){aXG=localStorage['user'].split("_");aWP=aXG[0]+"_"+RF.current_api_version.replace(".","_");localStorage['user']=aWP;MYF_sUserEnc=aWP;}else if(MYF_sUserEnc){aXG=MYF_sUserEnc.split("_");aWP=aXG[0]+"_"+RF.current_api_version.replace(".","_");localStorage['user']=aWP;MYF_sUserEnc=aWP;}localStorage.clear();localStorage['current_api_version']=RF.current_api_version;}delete window.tH.configuration.action;delete window.tH.configuration.result;}Ll(vm).call(null,data);};WJ($.extend({url:"/api/1.4/system/get_info.php?r="+aC(4),success:aiT},Wi));};aCO.aIx=function(vm){WJ($.extend({url:"/api/1.4/system/get_version.php?r="+aC(4)},aiW(vm)));};function aBS(YX){this.session_token=YX||YL;this.aDt=function(Wi,vm){if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/contact/fetch.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};this.ZD=function(Wi,vm){if(!vm){vm=Wi;Wi={};}Wi.timeout=90000;WJ($.extend({url:"/api/1.4/contact/add.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi),1,true);};this.boU=function(Wi,vm){if(!vm){vm=Wi;Wi={};}Wi.timeout=90000;WJ($.extend({url:"/api/1.4/contact/get_sources.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi),1,true);};};function SU(){};SU.prototype.Sx=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/notifications/peek_cache.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};SU.prototype.Uh=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/notifications/get_cache.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};function aCa(aCh){this.aCh=aCh||0;};aCa.prototype.bgL=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_status.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.hV=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/notifications/send_message.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.hH=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.5/device/share_resources.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.aQJ=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/request_foreign_resource.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.im=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/unshare_resources.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.hS=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_user_shares.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.jj=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_resource_shares.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.Qu=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_foreign_resources.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.Wh=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/toggle_foreign_resource_sync.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.aMs=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/set_foreign_resource_sync.php?r="+aC(4),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.beN=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_trash.php?r="+aC(4)+'&device_id='+Qb.aCh+'&data_only='+(Wi.data_only?'yes':'no')+(Wi.content_type?'&content_type='+Wi.content_type:''),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.MFAPI_EmptyTrash=function(vm){var Qb=this;WJ($.extend({url:"/api/1.4/device/empty_trash.php?r="+aC(4),success:Ll(vm),error:ack(vm)},{}));};aCa.prototype.bgS=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/device/get_changes.php?r="+aC(4)+"&device_id="+Qb.aCh+"&revision="+(Wi.revision?Wi.revision:'0'),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.bx=function(Wi,vm){var Qb=this;if(!vm){vm=Wi;Wi={};}WJ($.extend({url:"/api/1.4/file/recently_modified.php?r="+aC(4)+"&number_of_files="+(Wi.amount?Wi.amount:'10'),success:Ll(vm),error:ack(vm)},Wi));};aCa.prototype.aAe=function(axv,vm){if(!vm){return;}WJ({url:"/api/1.4/device/unfollow_resource.php?r="+aC(4),success:Ll(vm),error:ack(vm),data:{resource:axv}});};function aaB(a,b){return a.aag()-b.aag();};function YQ(YX,ZB,ZH,anz,aoi,awe,axa,aXx){YL=YX;Zh=ZB;Za=ZH;if(anz)aop=anz;if(aoi)aoN=aoi;if(awe)Ys=awe;if(axa){aaI=axa;window.tH.aaI=aaI;}if(aXx)aXi=aXx;if(YL)aQQ();if(aXi)aXL();if(YL)bhs();boV();};function boV(){$(window).hashchange(function(){Zr.aaU(false,true);});};function aXL(){var aWU=aL(aXi);if(aWU){var aXz=JSON.parse(aWU),aWv=new Date().getTime();for(var i=0;i<aXz.length;i++){var aXj=aXz[i],aWX=aXj.id.split('::');if(aWv-parseInt(aWX[1],10)<=aXs){WJ(aXj.options,aXj.priority,false);aWR(aXj.id);}}}};function aWR(aWu){var aWU=aL(aXi);if(aWU){var aXz=JSON.parse(aWU);for(var i=0;i<aXz.length;i++){if(aXz[i].id==aWu){aXz.splice(i,1);if(aXz.length>0)aU(aXi,JSON.stringify(aXz),300);else baO(aXi);break;}}}};var bgd=null;function bhs(){var bfX=new window.tH.aCa(window.aCQ);bfX.bgL(function(bgb){var bgY=false;if(bgb.response&&bgb.response.async_jobs_in_progress=='yes')bgY=true;clearInterval(bgd);bgd=null;if(bgY){bfu('Working...');bgd=setTimeout(bhs,1000);}else{bek();if(typeof FI!=='undefined')FI(null,null,null,true);}});};function WJ(Wi,aas,aXO,boi){Wi.data=Wi.data||{};if(typeof(aas)=='undefined'||isNaN(aas)){aas=1;}if(aXO&&aXi){var aWu=aC(5)+'::'+new Date().getTime();$.extend(Wi,{complete:function(aWe){try{var RF=JSON.parse(aWe.responseText);if(RF.response.asynchronous=='yes')bhs();if(RF.response.error!=104&&RF.response.error!=105)aWR(aWu);}catch(e){}}});var aXj={id:aWu,options:Wi,priority:aas};var aXz=[],aWU=aL(aXi);if(aWU)aXz=JSON.parse(aWU);aXz.push(aXj);aU(aXi,JSON.stringify(aXz),300);}else{$.extend(Wi,{complete:function(aWe){try{var RF=JSON.parse(aWe.responseText);if(RF.response.asynchronous=='yes')bhs();}catch(e){}}});}if(YL&&Wi.url.indexOf('user/renew_session_token')===false&&Wi.url.indexOf('folder/get_revision')===false){aQQ();}if(YL)Wi.data.session_token=YL;if(Za)Wi.data.response_format=Za;$.extend(Wi,{beforeSend:function(req){req.setRequestHeader("Cache-Control","no-cache");}});if(aas<0){if(aas== -1){Zr.aaU();if(Wi.url){Wi.timeout=Wi.timeout||aop;Zr.bhq(Wi);}Zr.Zl();}else{if(Wi.url){Wi.timeout=Wi.timeout||aop;Zr.bhq(Wi);}}}else{Zr.aaS({WH:Wi,Yi:null,boi:boi},aas);}};function YR(YY){this.YK=[];this.YW=[[],[],[]];this.YY=YY||2;};YR.prototype.ZD=function(MF,aas){if(aas===undefined|| !this.YW[aas])aas=1;this.YW[aas].push(MF);};YR.prototype.aaS=function(MF,aas){this.ZD(MF,aas);this.Zl();};YR.prototype.bhq=function(Wi){if(!Wi.url)return;var Qb=this;var bcG=Wi.success,aKS=Wi.error;var aUr=jQuery.extend(true,{},Wi);aUr.success=null;aUr.error=null;$.ajax(aUr).success(function(data,statusText,jqXHR){if(data===null||data==''||$.isEmptyObject(data)){Qb.aaS({WH:Wi,Yi:null},1);}else if(bcG){bcG(data,statusText,jqXHR);}}).error(function(data,statusText,errorThrown){if(statusText=="timeout"){Qb.aaS({WH:Wi,Yi:null},1);}else if(statusText=="error"){var oResponse=jQuery.parseJSON(data.responseText);if(oResponse&&(oResponse.response.error==100)){Qb.aaS({WH:Wi,Yi:null},1);}else if(oResponse&&(oResponse.response.error==104||oResponse.response.error==105)){$.getJSON('/dynamic/get_session_token.php?rand='+aC(5),function(oResponseData){if(oResponseData.session_token){YL=oResponseData.session_token;if(typeof beR!="undefined"){beR(YL);}Qb.aaU();aXL();}else if(oResponseData.error=="user_logged_out"){Qb.aaU();bpF();}});}else if($.isFunction(aKS)){aKS(data,statusText,errorThrown);}}});};YR.prototype.Zl=function(){if(bqt){this.aaU();return;}if(this.YK.length<this.YY){var aau=2;if(this.YW[0].length>0){aau=0;}else if(this.YW[1].length>0){aau=1;}if(this.YW[aau].length>0){var Qb=this;var MF=Qb.YW[aau].shift();if(boI.prev==MF.WH.url.substring(0,MF.WH.url.indexOf('?'))){boI.count++;}else{boI.prev=MF.WH.url.substring(0,MF.WH.url.indexOf('?'));boI.count=1;boI.start=(new Date()).getTime();}if(boI.prev.indexOf('peek_cache')!= -1&&boI.count>3){if((new Date()).getTime()-boI.start<30*1000){return;}boI.count=1;boI.start=(new Date()).getTime();}Qb.YK.push(MF);if(MF&&MF.WH.url){MF.WH.timeout=MF.WH.timeout||aop;var bcG=MF.WH.success,aKS=MF.WH.error;var aUr=jQuery.extend(true,{},MF.WH);aUr.success=null;aUr.error=null;if(YL&&aUr.data.session_token!=YL){aUr.data.session_token=YL;}MF.Yi=$.ajax(aUr).success(function(data,statusText,jqXHR){if(data===null||data==''||$.isEmptyObject(data)){if(!MF.ajt||MF.ajt<aoN){MF.ajt=MF.ajt?MF.ajt+1:1;Qb.aaS(MF,aau);}else if($.isFunction(aKS)){aKS(data,statusText,jqXHR);}}else if(bcG){bcG(data,statusText,jqXHR);}}).error(function(data,statusText,errorThrown){if(statusText=="timeout"){if(!MF.ajt||MF.ajt<aoN){MF.ajt=MF.ajt?MF.ajt+1:1;Qb.aaS(MF,aau);}else if($.isFunction(aKS)){aKS(data,statusText,errorThrown);}}else if(statusText=="error"){var oResponse;try{oResponse=jQuery.parseJSON(data.responseText);}catch(e){}if(oResponse&&(oResponse.response.error==100)){if(!MF.ajt||MF.ajt<aoN){MF.ajt=MF.ajt?MF.ajt+1:1;Qb.aaS(MF,aau);}else if($.isFunction(aKS)){aKS(data,statusText,errorThrown);}}else if(oResponse&&(oResponse.response.error==104||oResponse.response.error==105)){$.getJSON('/dynamic/get_session_token.php?rand='+aC(5),function(oResponseData){if(oResponseData.session_token){YL=oResponseData.session_token;if(typeof beR!="undefined"){beR(YL);}Qb.aaU();Qb.ZD(MF,0);aXL();}else if(oResponseData.error=="user_logged_out"){Qb.aaU();Qb.ZD(MF,0);bpF();}});}else if($.isFunction(aKS)){aKS(data,statusText,errorThrown);}}}).always(function(){if($.isArray(Qb.YK)&&Qb.YK.length){var bpW=$.inArray(MF,Qb.YK);if(bpW!= -1){Qb.YK.splice(bpW,1);}}Qb.Zl();});}}else{agS.call(null);}}};YR.prototype.aaU=function(MFAPI_bSkipAdd,boo){var Qb=this;var bnZ=[];for(var i=0;i<Qb.YK.length;i++){var MF=Qb.YK[i];if(MF){if(!boo||MF.boi){MF.Yi&&MF.Yi.abort();MF.Yi=null;if(boo)bnZ.push(i);if(MFAPI_bSkipAdd!==true)Qb.ZD(MF,0);}}}if(boo){for(var i=0;i<bnZ.length;i++){Qb.YK.splice(bnZ[i],1);}}else{Qb.YK=[];}};var adq=function(){if(YL)return YL;else return false;};window.tH={Cp:Cp,yJ:yJ,cD:cD,Dv:Dv,aCO:aCO,SU:SU,aBS:aBS,aCa:aCa,YQ:YQ,acq:acq,agS:agS,aAM:aAM,azm:azm,adq:adq,aQQ:aQQ};})(jQuery); var MFTOUR_sPreviousSlideHash=false,MFTOUR_bIsAnimating=false;function aow($self){$self.bind("click",function(){$self.removeClass('collapsed');$self.addClass('expanded');var bottomAreaOffset=$('#main .bottom-area').offset();var bottomAreaTop=bottomAreaOffset.top;$self.slideUp(1000,'easeOutQuad');$('#main .top-area').children().animate({"opacity":"0"},500);$("#main .top-area").attr("prevBottom",$("#main .top-area").css("bottom"));$('#main .top-area').animate({"bottom":'0'},1000,'easeOutQuad',function(){$self.unbind('click');apq($self,false);});});};function anE($self){$('#main .top-area').children().hide();apq($self,true);};function apq($self,anT){$.ajax({"url":"/tour/tour.php","method":"POST","success":function(response){$('#tour-content-container').append(response);alK(response);$('#tour-wrap').height($(window).height()).css({"margin-top":'100%'});$('#tour-wrap').animate({"margin-top":'0%'},1000,'easeOutExpo',function(){$(this).css({height:'auto'});});$(".tour-hide").unbind("click").bind("click",function(e){if(anT){$('#main .top-area').children().show();}$("#tour-wrap").animate({"margin-top":"100%","bottom":"-100%"},1000,"easeOutExpo",function(){if(!anT){$("#main .top-area").animate({"bottom":$("#main .top-area").attr("prevBottom")},1000,"easeOutQuad",function(){$("#main .top-area").attr("style","");}).children().animate({"opacity":"1"},500);$self.slideDown(1000,"easeOutQuad");$self.removeClass('expanded');$self.addClass('collapsed');aow($self);}$(window).unbind(".tour-hash");location.hash='noslide';$("body").removeClass("tour");$("#tour-content-container").children().remove();});e.stopPropagation();e.preventDefault();return false;});}});};function alK(response){location.hash="slide1";MFTOUR_sPreviousSlideHash=null;$(window).bind("hashchange.tour-hash",function(){if(location.hash=="#noslide"||location.hash==""){$(".tour-hide").trigger("click");return false;}if(MFTOUR_bIsAnimating){location.hash=MFTOUR_sPreviousSlideHash;return false;}if(isNaN(parseInt(location.hash.replace("#","").replace("slide","")))){return false;}if(parseInt(location.hash.replace("#","").replace("slide",""))<1||parseInt(location.hash.replace("#","").replace("slide",""))>$("#tour-slides .slide").length){location.hash="slide1";return false;}if(!MFTOUR_sPreviousSlideHash){MFTOUR_sPreviousSlideHash=location.hash;return false;}if(MFTOUR_sPreviousSlideHash==location.hash){return false;}apE(location.hash,MFTOUR_sPreviousSlideHash);MFTOUR_sPreviousSlideHash=location.hash;});if(location.hash=="#slide1"&& !MFTOUR_sPreviousSlideHash){$(window).hashchange();}if($("#tour").length>0)$("#tour").show();$(window).trigger('resize');$('body').addClass('tour');setTimeout(function(){$('.full #tour-nav, .condensed #tour-nav').animate({"bottom":"0"},1000,'easeOutExpo');},1000);$("#tour-nav li.tour-icon a.current span").css({opacity:'1'});var HW=false;$("#tour-slide7 #signup-link").delegate("","click",function(){$(this).hide();$(".basic-spinner").css({"display":"block"});});$("#tour-slide6").delegate("a#tour-slide6-trigger","click",function(e){$("#tour-slide6-inner").animate({"opacity":"0"},500,"easeOutExpo",function(){$("#tour-verticalslider").animate({"margin-top":"-280px"},500,"easeOutExpo",function(){$("#tour-companies-popup p, #tour-companies-popup a").css({"display":"block"});$("#tour-companies-popup p, #tour-companies-popup a").animate({"opacity":"1"},500,"easeOutExpo");});});e.stopPropagation();e.preventDefault();return false;}).delegate("a#tour-slide6-close","click",function(e){$("#tour-companies-popup p, #tour-companies-popup a").animate({"opacity":"0"},500,"easeOutExpo",function(){$("#tour-companies-popup p, #tour-companies-popup a").css({"display":"none"});$("#tour-verticalslider").animate({"margin-top":"0px"},500,"easeOutExpo",function(){$("#tour-slide6-inner").animate({"opacity":"1"},500,"easeOutExpo");});});e.stopPropagation();e.preventDefault();});$("#tour-slides").delegate("#tour-previous","click",function(e){if($("#tour-slides .slide.current").hasClass("firstslide")){return false;}if(MFTOUR_bIsAnimating){return false;}location.hash="slide"+(parseInt($("#tour-slides .slide.current").index())-parseInt(1)-parseInt(1));e.stopPropagation();e.preventDefault();return false;}).delegate("#tour-next","click",function(e){if($("#tour-slides .slide.current").hasClass("lastslide")){return false;}if(MFTOUR_bIsAnimating){return false;}location.hash="slide"+(parseInt($("#tour-slides .slide.current").index())-parseInt(1)+parseInt(1));e.stopPropagation();e.preventDefault();return false;});};function apE(bTo){var $current=$("#tour-slides .slide.current"),$currentIndex=$current.index(),$next=$("#tour-slides").find(".slide:eq("+(parseInt(bTo.replace("#","").replace("slide",""))-1)+")"),$nextIndex=$next.index();if(MFTOUR_bIsAnimating)return false;MFTOUR_bIsAnimating=true;$next.css({"left":(($nextIndex<$currentIndex)?"-":"")+$(window).width()+"px"}).show();$next.addClass("current").animate({"left":"0"},1000,"easeOutExpo",function(){MFTOUR_bIsAnimating=false;});$current.removeClass("current").animate({"left":(($nextIndex>$currentIndex)?"-":"")+$(window).width()+"px"},1000,"easeOutExpo",function(){$(this).hide();});if($next.hasClass('firstslide')){$("#tour-previous").fadeOut();}else{$("#tour-previous").fadeIn();}if($next.hasClass('lastslide')){$("#tour-next").fadeOut();}else{$("#tour-next").fadeIn();}}(function(){$(document).keydown(function(event){if(event.keyCode=='37'&&$('body').hasClass('tour')){event.preventDefault();$('#tour-previous').trigger('click');}if(event.keyCode=='39'&&$('body').hasClass('tour')){event.preventDefault();$('#tour-next').trigger('click');}});$('body').delegate(".tour-dropdown-from-top","click",function(e){var amu=false;$("html, body").animate({"scrollTop":0},500,"easeOutExpo",function(){if(!amu){amu=true;if($("#titlebar").length==0){$("#content_container #header").after($("<div/>",{"id":"titlebar","class":"removeOnHide"}));}$("#titlebar").attr("prevHeight",$("#titlebar").height());var $windowHeight=$(window).height();$(window).bind("resize.tour",function(){$("#titlebar").css({"height":$(window).height()});});$("#titlebar > *").animate({"opacity":"0"},1000,"easeOutExpo");$(".footer").hide();$("#main").animate({"opacity":"0"},500,"easeOutExpo",function(){$(this).css({"display":"none"});$("body").css({"overflow":"hidden"});$("#titlebar").animate({"height":$windowHeight+"px"},1000,"easeOutExpo",function(){$.ajax({"url":"/tour/tour.php","method":"POST","success":function(response){$("body").append($("<div></div>",{"id":"tour"}).append(response));$("#tour .wrap .right .btn").hide();$('#tour-wrap').css({"height":$(window).height(),"margin-top":'100%'}).animate({"margin-top":"0"},1000,"easeOutExpo",function(){$(this).css({"height":"auto"});});alK(response);amu=false;}});});});}});e.stopPropagation();e.preventDefault();return false;}).delegate(".tour-hide","click",function(e){var abI=parseInt($("#titlebar").attr("prevHeight")),$windowHeight=$(window).height();if($("#titlebar").hasClass("removeOnHide"))abI=0;location.hash='noslide';$("#tour-wrap").animate({"margin-top":"100%","bottom":"-100%"},1000,"easeOutExpo",function(){$("#tour").remove();$(".footer").show();$("#main").show();$("#titlebar").animate({"height":abI+"px"},1000,"easeOutExpo",function(){$("body").removeClass("tour").css({"overflow":"auto"});$(window).unbind("resize.tour");if($("#titlebar").hasClass("removeOnHide"))$("#titlebar").remove();$("#main").animate({"opacity":"1"},500,"easeOutExpo");$("#titlebar > *").animate({"opacity":"1"},1000,"easeOutExpo");});});$(window).unbind(".tour-hash");e.stopPropagation();e.preventDefault();return false;}).delegate(".tour-content","click",function(e){$("#tour-next").trigger("click");});})(jQuery); (function($){agi=function(anb,Wr,amC){var Xa=this;amC=amC||{};Xa.$NVT_oRoot=$(anb)||{};Xa.Wr=Wr||{};Xa.alS=(amC.alS||'key').replace('data-','');Xa.alM=amC.alM||'nav-arrow';Xa.amm=amC.amm||'nav-display-name';Xa.amc=amC.amc||function(){};};agi.prototype.amQ=function(anb){var Xa=this;if(anb&&$(anb).length){Xa.$NVT_oRoot=$(anb);}Xa.$NVT_oRoot.undelegate("a."+Xa.alM,"click").delegate("a."+Xa.alM,"click",function(e){var $NVT_oElm=$(this).closest("li");var Wo=$NVT_oElm.data(Xa.alS);Xa.amg(Wo);aeV(e);return false;})};agi.prototype.ami=function(anm){var Xa=this;if(!Xa.Wr[anm])return '<ul></ul>';return '<ul>'+Xa.Wr[anm].amf(Xa)+'</ul>';};agi.prototype.amv=function(anm){var Xa=this;Xa.$NVT_oRoot&&Xa.$NVT_oRoot.html(Xa.ami(anm));};agi.prototype.alQ=function(){var Xa=this;$.each(Xa.Wr,function(Wo,bpl){bpl.amq='collapsed';});};agi.prototype.anu=function(Wo,amq){var Xa=this;if(!amq){return;}Xa.Wr[Wo]&&Xa.Wr[Wo].amy(amq,Xa.$NVT_oRoot);};agi.prototype.amU=function(Wo){var Xa=this;Xa.anu(Wo,'expanded');};agi.prototype.amx=function(Wo){var Xa=this;Xa.anu(Wo,'collapsed');};agi.prototype.aFZ=function(Wo,alX){var Xa=this;var bpl=Xa.Wr[Wo];if(Xa.Wr&&bpl.ams&&Xa.Wr[bpl.ams]){delete Xa.Wr[bpl.ams].agd[Wo];bpl.ams=alX;Xa.Wr[alX].agd[Wo]=Wo;}};agi.prototype.amF=function(bpl){var Xa=this;if(!bpl|| !bpl.ams|| !Xa.Wr[bpl.ams]){return;}Xa.Wr[bpl.ams].agd[bpl.agV]=bpl.agV;Xa.Wr[bpl.agV]=bpl;};agi.prototype.alI=function(Wo){var Xa=this;if(!Wo){return;}var bpl=Xa.Wr[Wo];if(!bpl){return;}if(Xa.Wr&&bpl.ams&&Xa.Wr[bpl.ams]){delete Xa.Wr[bpl.ams].agd[Wo];}function anx(alF){$.each(bpl.agd,function(alV,amk){anx(alV);if(Xa.Wr&&alV&&Xa.Wr[alV]){delete Xa.Wr[alV];}});};if(Xa.Wr&&Wo&&Xa.Wr[Wo]){delete Xa.Wr[Wo];}bpl&&(delete bpl);};agi.prototype.amg=function(Wo){var Xa=this;Xa.Wr[Wo].amj(Xa.$NVT_oRoot);};agi.prototype.amw=function(Wo){var Xa=this;return Xa.Wr[Wo].ahs;};agi.prototype.aml=function(Wo){var Xa=this;function anq(bpl){if(!bpl){return;}bpl.amy('expanded',Xa.$NVT_oRoot);var ame=Xa.Wr[bpl.ams];if(!ame||ame==bpl){return;}anq(ame);};anq(Xa.Wr[Wo]);};function anh(fO){return function string_sorter(a,b){try{if(a[fO].toLowerCase()<b[fO].toLowerCase()){return-1;}else{return 1}}catch(e){return 0;}};};alU=function(alW){var Yf=this;alW=alW||{};Yf.agV=alW.agV||'';Yf.amB=alW.amB||'';Yf.ahs=alW.ahs||'collapsed';Yf.agd=alW.agd||{};Yf.ams=alW.ams||'';Yf.NTN_sDisplayClass=alW.NTN_sDisplayClass||'';Yf.UU=alW.UU||'no';};alU.prototype.amf=function(alY){var Yf=this;var anp= !$.isEmptyObject(Yf.agd);var aOH=(Yf.UU=="yes"||anp);var li='<li id="nav-'+Yf.agV+'" class="'+Yf.ahs+' '+Yf.NTN_sDisplayClass+'" data-'+alY.alS+'="'+Yf.agV+'">';if(aOH){li+='<a class="'+alY.alM+'" href="javascript:void(0);"></a>';}li+='<a href="javascript:void(0);" class="'+alY.amm+'" title="'+htmlspecialchars(Yf.amB)+'">'+htmlspecialchars(Yf.amB)+'</a><ul>';if(anp){var amM=[];$.each(Yf.agd,function(amo){if(this==tH.root.folderkey)delete Yf.agd[tH.root.folderkey];amM.push(alY.Wr[amo]);});$.each(amM.sort(anh('amB')),function(amR,amz){if(amz){li+=amz.amf(alY);}});}li+='</ul></li>';return li;};alU.prototype.amj=function(ana){var Yf=this;if(Yf.ahs=='collapsed')$.publish('folder/nav_expand',[Yf.agV]);else $.publish('folder/nav_collapse',[Yf.agV]);Yf.amy(((Yf.ahs=='collapsed')?'expanded':'collapsed'),ana);};alU.prototype.amy=function(ahs,ana){var Yf=this;Yf.ahs=ahs||'collapsed';Yf.atb(ana).removeClass('expanded').removeClass('collapsed').addClass(Yf.ahs);};alU.prototype.atb=function(ana){var Yf=this;ana=ana||$(document);return ana.find("li#nav-"+Yf.agV);};})(jQuery); (function($){agX=function(amY,alN){var WU=this;alN=alN||{};amY=amY||'.folderlist_content';WU.$list=$(amY);WU.amA=false;WU.anf=function(){};WU.amK={};WU.asf='';WU.agY=new agi(amY,{},{alS:'data-folderkey',alM:'folder_arrow',amm:'folder_name'});};agX.prototype.amn=function(anc){var WU=this;WU.amA=anc;};agX.prototype.amZ=function(){var WU=this;return WU.amA;};agX.prototype.ano=function(anc){var WU=this;WU.anf=anc;};agX.prototype.amO=function(){var WU=this;return WU.anf;};agX.prototype.amt=function(){var WU=this;if(WU.amA&&WU.amA.constructor&&WU.amA.apply&&WU.amA.call){return WU.amA.call(WU);}else{return WU.asf;}};agX.prototype.ane=function(amY){var WU=this;if(amY&&$(amY).length){WU.$list=$(amY)}var WU=this;WU.anf.call(WU);WU.agY.amQ(amY);WU.$list.filter(":not(.selectable)").delegate("a.folder_name","click",function(e){window.location.hash="#"+$(this).closest("li").data("folderkey");return false;});};agX.prototype.ang=function(){var WU=this;return WU.amK.folderkey||'myfiles';};agX.prototype.amW=function(){var WU=this;$.each(WU.agY.Wr,function(){if(this.ams==this.agV)WU.agY.Wr[this.agV].ams="myfiles";});WU.agY.amv(WU.ang());WU.$list.filter(".droppable").find("a.folder_name").bind("draghover",function(e){var $drop=$(this).toggleClass("folder_highlight",e.enter);var Ow=$drop.data("timeout");if(e.enter&&$drop.parent().hasClass("collapsed")){if(Ow){clearTimeout(Ow);Ow=null;}Ow=setTimeout(function(){$drop.parent().addClass("expanded").removeClass("collapsed");$.publish('folder/nav_expand',[$drop.parent().data('folderkey')]);},500);$drop.data("timeout",Ow);}else{if(Ow){clearTimeout(Ow);$drop.data("timeout",null);}}});WU.amT();};agX.prototype.amT=function(arQ,avs){var WU=this,asW=arQ||WU.amt();if(arQ&& !WU.amA){WU.asf=arQ;}if(!avs){WU.agY.amU(WU.ang());WU.agY.aml(asW);WU.$list.find(".current_folder_location").removeClass("current_folder_location").end().find("li#nav-"+(asW||'')).addClass("current_folder_location");}};agX.prototype.aPN=function(arQ){var WU=this;WU.agY.amU(arQ);WU.agY.aml(arQ);};agX.prototype.ant=function(){var WU=this;WU.agY.alQ();WU.agY.amg(WU.ang());WU.agY.amv(WU.ang());WU.amT();};agX.prototype.amN=function(amS){var WU=this;if(amS instanceof Array){$.each(amS,function(atK,atM){WU.agY.alI(atM);});}else{WU.agY.alI(amS);}WU.amW();};agX.prototype.amr=function(alC,avs){var WU=this;var amG=new alU({agV:alC.folderkey,amB:alC.name,agd:amJ(alC.folders)||{},ams:alC.parent.folderkey,NTN_sDisplayClass:(alC.shared=='no'||alC.shared==''||SHARED?'':'nav-linked-folder folder_name'),UU:(parseInt(alC.folder_count,10)>0?'yes':'no')});WU.agY.amF(amG);if(!avs){WU.amW();}};agX.prototype.ann=function(alC,amV){var WU=this;if((typeof alC).toLowerCase()=='string'){WU.agY.aFZ(alC,amV);}else{if(typeof alC=='object'&&alC.length){$.each(alC,function(avS,arQ){WU.agY.aFZ(arQ,amV);});}}WU.amW();};agX.prototype.ans=function(alC,avs){var WU=this;WU.amr(alC,avs);};agX.prototype.apG=function(){var WU=this;var $FLB_oFolderList=$('#folderTree .folderlist_content ul');var aqJ=WU.$list.outerHeight();var aqs=$FLB_oFolderList.outerHeight();$('#folderTree .indicator-down').css({top:aqJ+10});if(aqs<=aqJ){$('#folderTree .indicator-up').hide();$('#folderTree .indicator-down').hide();}else{if(WU.$list.scrollTop()==0){$('#folderTree .indicator-up').hide();$('#folderTree .indicator-down').show();}else if(WU.$list.scrollTop()>=aqs-aqJ){$('#folderTree .indicator-up').show();$('#folderTree .indicator-down').hide();}else{$('#folderTree .indicator-up').show();$('#folderTree .indicator-down').show();}}};})(jQuery); (function($){asR=function(adG,acK,aaK,abZ,atC){var atg=this;atg.atw=acK,atg.auS=aaK,atg.atx=abZ;atg.atB=adG;atg.aty=atC;atg.aTA=false;if(!window.tH|| !window.tH.Cp|| !window.tH.yJ){return false;}if(!acK){atg.atB.Yw(function(data){if(data.response.result=='Success'){atg.aTA=(avH(data.response.user_info.options,20)==0)?true:false;tH.user_info=data.response.user_info;}});}window.tH.Cp.WF=function(input){var file=$.extend(true,{},input);file.parent=file.parent&&file.parent.folderkey;return JSON.stringify(file);};window.tH.Cp.Wm=function(input){try{var file=JSON.parse(input);var fileext=new window.tH.Cp(file);return fileext;}catch(e){return false;}};window.tH.yJ.WF=function(input){var folder=$.extend(true,{},input);folder.parent=folder.parent&&folder.parent.folderkey;folder.folders=$.map($.values(folder.folders),function(folder){return folder.folderkey;});folder.files=$.map($.values(folder.files),function(file){return file.quickkey;});return JSON.stringify(folder);};window.tH.yJ.Wm=function(input){try{var folder=JSON.parse(input);folderext=new window.tH.yJ(folder);return folderext;}catch(e){return false;}};window.tH.folders=new XV("folder",window.tH.yJ.WF,window.tH.yJ.Wm,acK||atC);window.tH.files=new XV("file",window.tH.Cp.WF,window.tH.Cp.Wm,acK||atC);};asR.prototype.auk=function(){atg=this;atg.aty=true;window.tH.folders.ave();window.tH.files.ave();};asR.prototype.ZR=function(){atg=this;atg.auS=new Date().getTime();};asR.prototype.adF=function(){var atg=this;if(atg.atw){return true;}acY=new Date().getTime();if(!atg.aTA&&(acY-atg.auS>atg.atx)){QU();LoadIframeLightbox('/templates/confirm/confirm_login.php',415,265,false,false,true,false,false,function(){dZ();$('#modal_msg_iframe').unbind('load.LoadIframeLightbox');});return false;}else{atg.ZR();return true;}};asR.prototype.ahG=function(quickkey){if(quickkey){var file=window.tH.files.yx(quickkey);if(file&&file.quickkey){var parent=file.parent;if(parent){parent.file_count--;parent.files&&parent.files[quickkey]&&(delete parent.files[quickkey]);tH.folders.Yx(parent.folderkey,parent);}window.tH.files.abg(quickkey);}}};asR.prototype.Zs=function(quickkeys,Bz){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}atj.onBefore&&atj.onBefore.call(atg,quickkeys,Bz);var bfA=[],beb=[];if(quickkeys){var bfn=quickkeys.split(",");for(var i=0;i<bfn.length;i++){var Lu=tH.files.yx(bfn[i]);if(Lu&&Lu.delete_date){bfA.push(bfn[i]);bfn.splice(i,1);}}quickkeys=bfn.join();}if(Bz){var beP=Bz.split(",");for(var i=0;i<beP.length;i++){var Lu=tH.folders.yx(beP[i]);if(Lu&&Lu.delete_date){beb.push(beP[i]);beP.splice(i,1);}}Bz=beP.join();}if(bfA.length>0||beb.length>0)atg.bet(bfA.join(),beb.join(),false);quickkeys&&window.tH.Cp.YH(quickkeys,{success:function(data,aco,ado){var att=[];$.each(quickkeys.split(","),function(x,key){var file=window.tH.files.yx(key);file&&att.push(file);atg.ahG(key);});if(data.response)atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,att,'');},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,quickkeys,'');Zi(0,"There was a problem while deleting the file(s).");}});Bz&&window.tH.yJ.YH(Bz,{success:function(data,aco,ado){var auN=[];$.each(Bz.split(","),function(x,key){var folder=window.tH.folders.yx(key);if(folder){folder&&auN.push(folder);window.tH.folders.abg(key);folder.parent&&folder.parent.folders&&folder.parent.folders[key]&&(delete folder.parent.folders[key]);folder.parent.folder_count=Math.max(0,(parseInt(folder.parent.folder_count,10)||0)-1);if(typeof folder.total_folders!=='undefined')folder.total_folders=Math.max(0,parseInt(folder.total_folders)-1);window.tH.folders.Yx(folder.parent.folderkey,folder.parent);}});if(data.response)atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,'',auN);},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,'',Bz);Zi(0,"There was a problem while deleting the folder(s).");}});};asR.prototype.bet=function(quickkeys,Bz,confirm,bgz){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}var beA=function(){atj.onBefore&&atj.onBefore.call(atg,quickkeys,Bz);quickkeys&&window.tH.Cp.beo(quickkeys,{success:function(data,aco,ado){var att=[];$.each(quickkeys.split(","),function(x,key){var file=window.tH.files.yx(key);file&&att.push(file);atg.ahG(key);});if(data.response)atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,att,'');},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,quickkeys,'');Zi(0,"There was a problem while purging the file(s).");}});Bz&&window.tH.yJ.beo(Bz,{success:function(data,aco,ado){var auN=[];$.each(Bz.split(","),function(x,key){var folder=window.tH.folders.yx(key);if(folder){folder&&auN.push(folder);window.tH.folders.abg(key);folder.parent&&folder.parent.folders&&folder.parent.folders[key]&&(delete folder.parent.folders[key]);folder.parent.folder_count=Math.max(0,(parseInt(folder.parent.folder_count,10)||0)-1);if(typeof folder.total_folders!=='undefined')folder.total_folders=Math.max(0,parseInt(folder.total_folders)-1);window.tH.folders.Yx(folder.parent.folderkey,folder.parent);}});if(data.response)atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,'',auN);},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,quickkeys,'');Zi(0,"There was a problem while purging the folder(s).");}});};if(confirm){var beC=(quickkeys.length>0?quickkeys.split(',').length:0)+(Bz.length>0?Bz.split(',').length:0);if(beC<1)return;var bfz=((quickkeys.length==0)?'Folder':(Bz.length==0)?'File':'Item')+(beC>1?'s':''),bey=(beC>1)?'these '+beC+' ':'this ';QS(bgz?'Empty Trash':("Delete "+bfz),"Are you sure you want to permanently delete "+bey+bfz.toLowerCase()+"?",[['yes','Yes'],['no','No','gbtnPrimary']],function(bdW){if(bdW=='yes'){beA();}});}else{beA();}};asR.prototype.MYF_mEmptyTrash=function(device_id,confirm){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}var beA=function(){atj.onBefore&&atj.onBefore.call(atg,quickkeys,Bz);var bmT=new window.tH.aCa(device_id||0);bmT.MFAPI_EmptyTrash({success:function(data,aco,ado){if(data.response&&data.response.myfiles_revision)atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg);},error:function(){atj.onError&&atj.onError.call(atg);Zi(0,"There was a problem while emptying trash.");}});};if(confirm){QS('Empty Trash',"Are you sure you want to permanently delete all the items in your trash?",[['yes','Yes'],['no','No','gbtnPrimary']],function(bdW){if(bdW=='yes'){beA();}},[600]);}else{beA();}};var dy=false,cN=null;asR.prototype.YO=function(quickkeys,Bz,dest){var atg=this;var atj=arguments.callee;if(dy)return;if(!atg.adF()){return;}if(dest==="myfiles"){dest=null;}var anZ=(window.tH.folders.yx(dest))?window.tH.folders.yx(dest):Xb.aQm[dest];var iDestPermission=0;if(anZ.permissions){iDestPermission=NZ(anZ);}if(dest&&dest!='myfiles'&&anZ.shared!='no'&&anZ.shared!=''&&iDestPermission!=2){Zi(0,"You cannot move items into a linked folder.");return;}if(document.getElementById('container').className.indexOf('collabmode')!== -1){var adZ=new tH.yJ('myfiles');adZ.folderkey='myfiles';adZ.name='My Files';adZ.files=[];adZ.folders=[];window.tH.folders.Yx("myfiles",adZ);}var MYF_oTempDest;if(quickkeys){var acD=window.tH.files.yx(quickkeys.split(",")[0]);MYF_oTempDest=anZ;if(!MYF_oTempDest|| !acD){atj.onError&&atj.onError.call(atg,quickkeys,'',dest);Zi(0,"There was a problem while attempting to move a file.");return;}if(acD.parent&&acD.parent.folderkey==MYF_oTempDest.folderkey){return;}atj.onBefore&&atj.onBefore.call(atg,quickkeys,'',anZ);dy=true;tH.Cp.aad(quickkeys,dest,{success:function(data){var file,source,destination=window.tH.folders.yx(dest||"myfiles");var att=[];$.each(quickkeys.split(","),function(x,key){file=window.tH.files.yx(key);if(!file){return;}att.push(file);source=file.parent;source.files&&source.files[key]&&(delete source.files[key]);source.file_count=parseInt(source.file_count)-1;if(source&&typeof source.total_files!=='undefined')source.total_files=Math.max(0,parseInt(source.total_files)-1);if(destination&&typeof destination.total_files!=='undefined')destination.total_files=Math.max(0,parseInt(destination.total_files)+1);if(source.file_count<0)source.file_count=0;if(source.files&&source.files[key])delete source.files[key];if(destination){destination.file_count=parseInt(destination.file_count)+1;if(!destination.files)destination.files={};destination.files[key]=file;file.parent=destination;window.tH.folders.Yx(destination.folderkey,destination);window.tH.folders.Yx(source.folderkey,source);if(window.tH.currentFolder&&window.tH.currentFolder.folderkey==destination.folderkey)window.tH.currentFolder=destination;}else{destination=Xb.aQm[dest];}if(data.response.new_names&&data.response.new_names["file_"+key])file.filename=data.response.new_names["file_"+key];window.tH.files.Yx(file.quickkey,file);if(window.tH.currentFolder&&window.tH.currentFolder.folderkey==source.folderkey)window.tH.currentFolder=source;});atg.ato(data.response.myfiles_revision);if(!Bz.length){dy=false;atj.onSuccess&&atj.onSuccess.call(atg,att,source,destination);}},error:function(ado,aco,aiN){window.localStorage&&localStorage.clear();var ajz='',MYF_sErrCode='';if(aco!='abort'&&ado.responseText){try{ajz=JSON.parse(ado.responseText);}catch(e){}if(ajz){MYF_sErrCode=ajz.response.error.toString();}}destination=window.tH.folders.yx(dest||"myfiles");$.each(quickkeys.split(","),function(x,key){var file=window.tH.files.yx(key);if(MYF_sErrCode=='114'){Zi(0,"You do not have write permissions to move "+file.filename+" into the folder "+destination.name+".");}else{Zi(0,"There was a problem while attempting to move "+file.filename+".");}});if(!Bz.length)dy=false;atj.onError&&atj.onError.call(atg,quickkeys,'',dest);}});}if(Bz){var adj=(window.tH.folders.yx(Bz.split(",")[0]))?window.tH.folders.yx(Bz.split(",")[0]):Xb.aQm[Bz.split(",")[0]];MYF_oTempDest=anZ;if(!MYF_oTempDest|| !adj){Zi(0,"There was a problem while attempting to move a folder.");return;}if(anZ.folderkey&&Bz.match(anZ.folderkey)){return;}if((adj.parent&&adj.parent.folderkey==MYF_oTempDest.folderkey)||(adj.folderkey==MYF_oTempDest.folderkey)){Zi(0,"There was a problem while attempting to move a folder.");return;}atj.onBefore&&atj.onBefore.call(atg,'',Bz,anZ);var aUC=[],aUS=true;function aUY(abS,abR){if((abS instanceof tH.yJ||abS instanceof auj.aZG)&&typeof(abS.parent)!="undefined"&&typeof(abS.parent.folderkey)!="undefined"){abR.push(abS.folderkey);return aUY(abS.parent,abR);}else return abR;};aUC=aUY(MYF_oTempDest,[]);$.each(Bz.split(","),function(x,key){if($.inArray(key,aUC)!= -1)aUS=false;});if(aUS===false){Zi(0,"There was a problem attempting to move a folder.");return;}dy=true;tH.yJ.aad(Bz,dest,{success:function(data){var folder;var source;var destination=(window.tH.folders.yx(dest||'myfiles')?window.tH.folders.yx(dest||'myfiles'):Xb.aQm[dest||'myfiles']);var auN=[];$.each(Bz.split(","),function(x,key){folder=window.tH.folders.yx(key);if(!folder)return;auN.push(folder);source= ! !folder.parent?folder.parent:window.tH.folders.yx(folder.parent_folderkey);source.folders&&source.folders[key]&&(delete source.folders[key]);source.folder_count=Math.max(0,(parseInt(source.folder_count,10)||0)-1);if(destination){destination.folders[key]=folder;destination.folder_count=(parseInt(destination.folder_count,10)||0)+1;folder.parent=destination;window.tH.folders.Yx(destination.folderkey,destination);if(window.tH.currentFolder&&window.tH.currentFolder.folderkey==destination.folderkey){window.tH.currentFolder=destination;}}else{destination=Xb.aQm[dest];}source.total_folders=Math.max(0,(parseInt(source.total_folders,10)||0)-1);destination.total_folders=Math.max(0,(parseInt(destination.total_folders,10)||0)+1);if(data.response.new_names&&data.response.new_names["folder_"+key])folder.name=data.response.new_names["folder_"+key];window.tH.folders.Yx(folder.folderkey,folder);window.tH.folders.Yx(source.folderkey,source);if(window.tH.currentFolder&&window.tH.currentFolder.folderkey==source.folderkey)window.tH.currentFolder=source;});if(data.response.myfiles_revision)atg.ato(data.response.myfiles_revision);dy=false;atj.onSuccess&&atj.onSuccess.call(atg,auN,source,destination);},error:function(ado,aco,aiN){window.localStorage&&localStorage.clear();var ajz='',MYF_sErrCode='';if(aco!='abort'&&ado.responseText){try{ajz=JSON.parse(ado.responseText);}catch(e){}if(ajz){MYF_sErrCode=ajz.response.error.toString();}}destination=window.tH.folders.yx(dest||"myfiles");$.each(Bz.split(","),function(x,key){var folder=window.tH.folders.yx(key);if(MYF_sErrCode=='114'){Zi(0,"You do not have write permissions to move "+folder.name+" into the folder "+destination.name+".");}else{Zi(0,"There was a problem while attempting to move "+folder.name+".");}});dy=false;if(atj.onError){atj.onError.call(atg,'',Bz,dest);}}});}};asR.prototype.aFI=function(quickkeys,Bz,dest){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}var anZ;if(dest==="myfiles"){MAL_sAPIDest=null;}else{MAL_sAPIDest=dest;}anZ=window.tH.folders.yx(dest);if(dest!='myfiles'&&anZ.shared!=''&&anZ.shared!='no'){var iPermissions=NZ(anZ);if(iPermissions!=2){Zi(0,"You cannot copy items into a linked folder.");return;}}if(document.getElementById('container').className.indexOf('collabmode')!== -1){var adZ=new tH.yJ('myfiles');adZ.folderkey='myfiles';adZ.name='My Files';adZ.files=[];adZ.folders=[];window.tH.folders.Yx("myfiles",adZ);}var ahQ=[],aSI=[],aUc=[],aSJ=[];if(quickkeys){if(quickkeys.indexOf(",")!= -1){ahQ=quickkeys.split(",");}else{ahQ.push(quickkeys);}}if(Bz){if(Bz.indexOf(",")!= -1){aSI=Bz.split(",");}else{aSI.push(Bz);}}var MYF_oTempDest=window.tH.folders.yx(dest);if(quickkeys){var acD=window.tH.files.yx(quickkeys.split(",")[0]);if(!MYF_oTempDest|| !acD){atj.onError&&atj.onError.call(atg,quickkeys,'',dest);Zi(0,"There was a problem while attempting to copy a file. --- !!!");return;}atj.onBefore&&atj.onBefore.call(atg,quickkeys,'',anZ);tH.Cp.aET(quickkeys,MAL_sAPIDest,{success:function(data){var file,source=acD.parent,destination=window.tH.folders.yx(dest||"myfiles"),aSm=[];$.each(quickkeys.split(","),function(x,key){file=window.tH.files.yx(key);if(!file){return;}aSm.push(file);});if(data.response.new_quickkeys.length>0)window.tH.Cp.asi(data.response.new_quickkeys.join(),function(WH){if(WH.response){function aKG(ayY){if(anZ&&typeof anZ.total_files!=='undefined')anZ.total_files=Math.max(0,parseInt(anZ.total_files)+1);anZ.files[ayY.quickkey]=ayY;anZ.file_count=parseInt(anZ.file_count)+1;ayY.parent=anZ;window.tH.files.Yx(ayY.quickkey,ayY);window.tH.folders.Yx(anZ.folderkey,anZ);aSJ.push(ayY);};if(WH.response.file_info){var ayY=new window.tH.Cp(WH.response.file_info,anZ);aKG(ayY);}if(WH.response.file_infos){$.each(WH.response.file_infos,function(x,aLE){var ayY=new window.tH.Cp(aLE,anZ);aKG(ayY);});}aSS();}});function aSS(){atg.ato(data.response.myfiles_revision);if(!Bz)atj.onSuccess&&atj.onSuccess.call(atg,aSm,aSJ,source,destination);}},error:function(ado,aco,aiN){window.localStorage&&localStorage.clear();var ajz='',MYF_sErrCode='';if(aco!='abort'&&ado.responseText){try{ajz=JSON.parse(ado.responseText);}catch(e){}if(ajz){MYF_sErrCode=ajz.response.error.toString();}}var destination=window.tH.folders.yx(dest||"myfiles");$.each(quickkeys.split(","),function(x,key){var file=window.tH.files.yx(key);if(MYF_sErrCode=='114'){Zi(0,"You do not have write permissions to copy "+file.filename+" into the folder "+destination.name+".");}else if(MYF_sErrCode=='162'){var aWi=new window.tH.Dv();aWi.aXn(function(aYn){var aZt=aYn.response.settings;if(aZt)Ni(file.size,aZt.storage_limit,aZt.used_storage_size,true,aZt.storage_limit_exceeded);else Zi(0,"The file  "+file.filename+" exceeded your total storage limit.");});}else{Zi(0,"There was a problem while attempting to copy "+file.filename+".");}});atj.onError&&atj.onError.call(atg,quickkeys,'',dest);}});}if(Bz){var adj=window.tH.folders.yx(Bz.split(",")[0]);if(!MYF_oTempDest|| !adj){atj.onError&&atj.onError.call(atg,Bz,'',dest);Zi(0,"There was a problem while attempting to copy a file. --- !!!");return;}atj.onBefore&&atj.onBefore.call(atg,Bz,'',anZ);tH.yJ.aET(Bz,MAL_sAPIDest,{success:function(data){var folder,source=adj.parent,destination=window.tH.folders.yx(dest||"myfiles");var aNx=[];$.each(Bz.split(","),function(x,key){folder=window.tH.folders.yx(key);aNx.push(folder);if(!folder){return;}});if(data.response.new_folderkeys.length>0)window.tH.yJ.asi(data.response.new_folderkeys.join(),function(WH){if(WH.response){function aKR(acP){if(typeof destination.total_folders!=='undefined')destination.total_folders=Math.max(0,parseInt(destination.total_folders)+1);destination.folders[acP.folderkey]=acP;destination.folder_count=(parseInt(destination.folder_count,10)||0)+1;acP.parent=destination;window.tH.folders.Yx(acP.folderkey,acP);window.tH.folders.Yx(destination.folderkey,destination);aUc.push(acP);$.publish('folder/add',[acP,destination]);};if(WH.response.folder_info){var acP=new window.tH.yJ(WH.response.folder_info,destination);aKR(acP);}if(WH.response.folder_infos){$.each(WH.response.folder_infos,function(x,aLX){var acP=new window.tH.yJ(aLX,destination);aKR(acP);});}aTz();}});function aTz(){atg.ato(data.response.myfiles_revision);if(!quickkeys.length){atj.onSuccess&&atj.onSuccess.call(atg,aNx,aUc,source,destination);}else{atj.onSuccess&&atj.onSuccess.call(atg,aNx,source,destination,aSJ,aUc);}}},error:function(ado,aco,aiN){window.localStorage&&localStorage.clear();var ajz='',MYF_sErrCode='';if(aco!='abort'&&ado.responseText){try{ajz=JSON.parse(ado.responseText);}catch(e){}if(ajz){MYF_sErrCode=ajz.response.error.toString();}}var destination=window.tH.folders.yx(dest||"myfiles");$.each(Bz.split(","),function(x,key){var folder=window.tH.folders.yx(key);if(MYF_sErrCode=='114'){Zi(0,"You do not have write permissions to copy "+folder.name+" into the folder "+destination.name+".");}else if(MYF_sErrCode=='162'){aWg(false,false,true);}else{Zi(0,"There was a problem while attempting to copy "+folder.name+".");}});atj.onError&&atj.onError.call(atg,quickkeys,'',dest);}});}};asR.prototype.aUA=function(keys,confirm){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}if(!keys||keys==""){atj.onError&&atj.onError.call(atg,keys,confirm);return;}atj.onBefore&&atj.onBefore.call(atg,keys,confirm);tH.Cp.aUT(keys,confirm,{error:function(ado,aco,aiN){var ajz={},aUB=0;if(aco!='abort'&&ado.responseText){try{ajz=JSON.parse(ado.responseText);}catch(e){}if(ajz){MYF_sErrCode=aUB=ajz.response.error;}}atj.onError&&atj.onError.call(atg,keys,ajz.response,aUB);}});};asR.prototype.Wt=function(folderkey,name,oOptions){var atg=this;var atj=arguments.callee;var aUp="There was a problem while creating the subfolder.";if(!atg.adF()){return;}if(!folderkey)folderkey='myfiles';atg.ZR();var folder=tH.folders.yx(folderkey);if(!folder){folder=new tH.yJ(folderkey);}atj.onBefore&&atj.onBefore.call(atg,folder);tH.yJ.prototype.Yp.call(folder,name,{success:function(subfolder,data){if(typeof folder.total_folders!=='undefined')folder.total_folders=Math.max(0,parseInt(folder.total_folders)+1);subfolder.name=data.response.name||subfolder.name;folder.folder_count=(parseInt(folder.folder_count,10)||0)+1;folder.folders[subfolder.folderkey]=subfolder;window.tH.folders.Yx(subfolder.folderkey,subfolder);subfolder.flag=folder.flag;atj.onSuccess&&atj.onSuccess.call(atg,folder,subfolder,oOptions);window.tH.folders.Yx(folder.folderkey,folder);atg.ato(data.response.myfiles_revision);},error:function(data){var aUf=$.parseJSON(data.responseText).response.message;window.localStorage&&localStorage.clear();atj.onBefore&&atj.onBefore.call(atg,folder);Zi(0,aUf?aUf:aUp);}});};asR.prototype.SubFile=function(folderkey,name,extension,bbz){var atg=this;var aUp="There was a problem while creating the file.";if(!atg.adF()){return;}atg.ZR();var folder=window.tH.folders.yx(folderkey);if(!folder){Zi(0,aUp);return;}folder.CreateSubFile(name,extension,{success:function(subfile,data){folder.files[subfile.quickkey]=subfile;window.tH.files.Yx(subfile.quickkey,subfile);window.tH.folders.Yx(folder.folderkey,folder);bbz.onSuccess&&bbz.onSuccess.call(atg,subfile);},error:function(data){var ST=$.parseJSON(data.responseText).response,MN=ST.message,SL=parseInt(ST.error,10);window.localStorage&&localStorage.clear();bbz.onError&&bbz.onError.call(atg);if(SL==162)aWg(true,false,true);else Zi(0,(MN?MN:aUp));}});};asR.prototype.aah=function(status,quickkey,folderkey,recursive,bjv){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}atg.ZR();var bbz={};if(quickkey){var file=window.tH.files.yx(quickkey);bbz.error=function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,file);Zi(0,"There was a problem while updating the file.");};bbz.success=function(data){atj.onSuccess&&atj.onSuccess.call(atg,file);if(file&&window.tH&&window.tH.files)window.tH.files.Yx(file.quickkey,file);atg.ato(data.response.myfiles_revision);if(bjv)bjv(data);};var acD=file?file:new tH.Cp(quickkey);if(!acD){bbz.error();return;}atj.onBefore&&atj.onBefore.call(atg,acD);if(status=='public')acD.aax(bbz);else acD.aaG(bbz);}if(folderkey){var folder=window.tH.folders.yx(folderkey);bbz.error=function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,folder);Zi(0,"There was a problem while updating the folder.");};bbz.success=function(data){function aba(folder){folder.privacy=status;$.each(folder.folders,function(x,folder){aba(folder);window.tH.folders.Yx(folder.folderkey,folder);});$.each(folder.files,function(x,file){file.privacy=status;window.tH.files.Yx(file.quickkey,file);atj.onSuccess&&atj.onSuccess.call(atg,file);});window.tH.folders.Yx(folder.folderkey,folder);atj.onSuccess&&atj.onSuccess.call(atg,folder);};if(recursive){aba(folder);}if(window.tH&&window.tH.folder)window.tH.folders.Yx(folder.folderkey,folder);atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,folder);if(bjv)bjv(data);};if(!folder){bbz.error();return;}atj.onBefore&&atj.onBefore.call(atg,folder);if(status=='public'){folder.aax(recursive,bbz);}else{folder.aaG(recursive,bbz);}}};asR.prototype.aal=function(info,quickkey,folderkey,bypass){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}atg.ZR();if(quickkey){var aUp="There was a problem while updating the file.";if(bypass){file=new window.tH.Cp(quickkey);}else{var file=window.tH.files.yx(quickkey);if(!file){Zi(0,aUp);return;}}atj.onBefore&&atj.onBefore.call(atg,file,info);file.Yn(info,{success:function(data){window.tH.files.Yx(file.quickkey,file);atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,file,info);},error:function(data){var ajz;if(data&&data.responseText){try{ajz=JSON.parse(data.responseText);}catch(e){}}else if(!ajz){ajz={response:{error:999}};}window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,file,info);switch(ajz.response.error){case 106:aUp="The file suffix can only be changed to another suffix that is of the same type as the original suffix.";break;case 158:aUp="A file with that name already exists in the destination folder";break;case 118:aUp="The file name should be at least 3 characters and not containing \\ / * ? \" < > |";break;case 999:aUp="An Unknown error occured.";break;}Zi(0,aUp);}});}if(folderkey){var aUp="There was a problem while updating the folder.";var folder=window.tH.folders.yx(folderkey);if(!folder){Zi(0,aUp);return;}atj.onBefore&&atj.onBefore.call(atg,folder,info);folder.Yn(info,{success:function(data){window.tH.folders.Yx(folder.folderkey,folder);atg.ato(data.response.myfiles_revision);atj.onSuccess&&atj.onSuccess.call(atg,folder,info);$.publish("folder/update",[folder,null,true]);},error:function(data){var ajz;if(data&&data.responseText){try{ajz=JSON.parse(data.responseText);}catch(e){}}if(!ajz)ajz={response:{error:0}};window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,folder,info);switch(ajz.response.error){case 159:aUp="A folder with that name already exists in the destination folder";break;case 117:case 185:aUp="Invalid folder name";break;}Zi(0,aUp);}});}};asR.prototype.ajl=function(quickkey){var atg=this;var atj=arguments.callee;atg.ZR();atj.onBefore&&atj.onBefore.call(atg,quickkey);var es=[],aZL;if(typeof quickkey=='object')es=quickkey.files;else es.push(quickkey);for(var i=0,aSX=es.length;i<aSX;++i){if((aZL=window.tH.files.yx(es[i]))){aZL.aiV({success:function(x){atj.onSuccess&&atj.onSuccess.call(atg,aZL);},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,aZL);Zi(0,"There was a problem while saving the file(s) to your account.");}});}else{Zi(0,"There was a problem while saving the file(s) to your account.");}}};asR.prototype.ahE=function(user){var atg=this;var atj=arguments.callee;if(!user)user=atg.atB;atj.onBefore&&atj.onBefore.call(atg);user.Yw(function(data){if(data.response.result=='Success'){atg.aTA=(avH(data.response.user_info.options,20)==0)?true:false;}});user.acA({success:function(e){window.aaA=0;atj.onSuccess&&atj.onSuccess.call(atg,e);},error:function(e){if(window.aaA<3){window.aaA++;setTimeout(function(){atg.ahE(user);},60000);}else{clearInterval(window.aqg);window.aqg=null;atj.onError&&atj.onError.call(atg,e);window.aqd=true;}}});};asR.prototype.agk=function(afV,afR){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}atg.ZR();var ahD=window.tH.files.yx(afV);var agI=window.tH.files.yx(afR);var aNp=agI.parent;if(!ahD|| !agI){Zi(0,"There was a problem while updating the file.");return;}if(Gm(ahD.filename)!=Gm(agI.filename)){Zi(0,"There was a problem while updating the file.<br />Files must have the same file extension. ");return;}atj.onBefore&&atj.onBefore.call(atg,ahD,agI);ahD.agq(afR,{success:function(){var agc=Array('filename','created','privacy','size','hash');for(var i=0;i<agc.length;i++){var agr=agc[i];agI[agr]=ahD[agr];}aNp.files[agI.quickkey]=agI;tH.folders.Yx(aNp.folderkey,aNp);tH.files.Yx(afR,agI);atg.ahG(afV);atj.onSuccess&&atj.onSuccess.call(atg,ahD,agI);},error:function(){window.localStorage&&localStorage.clear();atj.onError&&atj.onError.call(atg,ahD,agI);Zi(0,"There was a problem while updating the file.");}});};asR.prototype.agD=function(quickkey,mG){var atg=this;var atj=arguments.callee;if(!atg.adF()){return;}atg.ZR();var file=window.tH.files.yx(quickkey);if(!file){Zi(0,"There was a problem while updating the password on the file.");return;}atj.onBefore&&atj.onBefore.call(atg,file);};asR.prototype.atL=function(){var atg=this;if(!window.tH){return false;}if(window.tH.myfiles_revision){return window.tH.myfiles_revision;}if((!atg.atw)&&(!atg.aty)&&window.localStorage&&localStorage['myfiles_revision']){var atJ=JSON.parse(localStorage['myfiles_revision']);window.tH.myfiles_revision=atJ;if(sizeOf(atJ)){return atJ;}}return false;};asR.prototype.ato=function(Ym){var atg=this;if(Ym instanceof Object){if(Ym.epoch&&Ym.revision){window.tH.myfiles_revision=Ym;if(!atg.atw&& !atg.aty){localStorage['myfiles_revision']=JSON.stringify(Ym);}}}};})(jQuery); (function($){auV=function(aue,atT,atE,auf,auW){var auZ=this;auZ.aue=aue||[];auZ.atT=atT||function(){};auZ.atE=atE||1000;auZ.auf=auf||10;auZ.aud=0;auZ.aum='';auZ.atQ=null;auZ.auW=auW||false;};auV.prototype.atR=function(){var auZ=this;if(!auZ.atE){return false;}if(auZ.auW){auZ.atQ=setTimeout(function(auZ){auZ.atD();},auZ.atE,auZ);}else{auZ.atQ=setInterval(function(auZ){auZ.atD();},auZ.atE,auZ);}return true;};auV.prototype.atD=function(){var auZ=this;if(auZ.aum.length){if(!auZ.auW){clearInterval(auZ.atQ);}else{clearTimeout(auZ.atQ);}return;}if((auZ.aud>=auZ.auf)||(!auZ.aue)||(auZ.aue.length==0)){if(!auZ.auW){clearInterval(auZ.atQ);}else{clearTimeout(auZ.atQ);}return;}auZ.aud+=1;auZ.atT(auZ.aue);if(auZ.auW){auZ.atQ=setTimeout(function(auZ){auZ.atD();},auZ.atE,auZ);}};auV.prototype.atm=function(){var auZ=this;auZ.aum='stop';if(!auZ.auW){clearInterval(auZ.atQ);}else{clearTimeout(auZ.atQ);}auZ.atD=function(){};auZ.atR=function(){return false;};};})(jQuery);(function($){aHE=function(aJL,aIM,aJi,aOQ){var aHQ=this;aHQ.aJL=(aJL)?aJL:null;aHQ.aJu=true;aHQ.aJW=(aJi)?aJi:false;aHQ.aOQ=(aOQ)?aOQ:1123220;try{aHQ.aKA=('localStorage'in window&&window['localStorage']!==null);}catch(e){aHQ.aKA=false;}aHQ.aJI=(aHQ.aJL&& !aHQ.aJu&& !aHQ.aJW&&aHQ.aKA);aHQ.aGF=null;if(window.Worker&&JS_LoadTime){aHQ.aGF=new Worker('/js/ww_cache_folders_'+JS_LoadTime+'.js');aHQ.aIJ();}};aJK={};function aJr(aKb){if(typeof aKb=='function'){return aKb;}if(aKb&&aKb.success&&(typeof aKb.success=='function')){return aKb.success;}else{return(function(){});}};function aJZ(aKb){if(aKb&&aKb.error&&(typeof aKb.error=='function')){return aKb.error;}else{return(function(){});}};function aKx(aIU){function aKr(aJl,aKt){if(typeof aKt==='number'){return String(aKt);}return aKt;};return JSON.stringify(aIU,aKr);};function aJD(aJj){return $.parseJSON(aJj);};aHE.prototype.aJg=function(){var aHQ=this;if(!localStorage)return;var aLd=[];if(BrowserName()==="Internet Explorer"&&Bm()[0]==="8"|| !Object.keys){for(member in window.localStorage){aLd.push(member);}}else{aLd=Object.keys(localStorage);}for(var i=0,aSi=aLd.length;i<aSi;i++){var aKs=aLd[i];var aKj=aKs.split("-");if(aKj[0]==aHQ.aJL&&aHQ.aGF){aHQ.aGF.postMessage({cmd:'parse-data',key:aKs,params:localStorage[aKs]});}if(aKj[0]!=aHQ.aJL&&aKj[1]=="FOLDERCONTENT"){localStorage.clear();}}};aHE.prototype.aIJ=function(){var aHQ=this;aHQ.aGF.onmessage=function(event){var aHr={};if(event.data.key&&aJK){aHr=aJK[event.data.key];}if(aHr)var aKz=aHr.folder;if(window.tH)window.tH.aQQ();if(event.data.value&&event.data.value.expires){var aPZ=new Date();var aOW=new Date(event.data.value.expires);var aOR=event.data.message.split("-");if(aOR[1]=="found"&&aPZ>aOW){event.data.message=aOR[0]+"-not-found";}}switch(event.data.message){case "content-found":var aJS=aKU(aKz,event.data.value);aKz=aJS.folder;var aJn=aJS.items;aHQ.aJP(aKz,aJn,event.data.value,true,aHr.callbacks,event.data.key,aHr.options);break;case "content-not-found":aHQ.aGU(aKz,aHr.options,aHr.callbacks,false,true);break;case "info-found":aKz=aMt(aKz,event.data.value);if(aHr.callback){if(typeof aHr.callback=='function')aHr.callback(aKz);else if(aHr.callback.success)aHr.callback.success(aKz);}break;case "info-not-found":aHQ.aLI(aKz,aHr.callback,true);break;case "search-found":aJr(aHr.callbacks).call(this,event.data.value);break;case "search-not-found":aHQ.aGY(aKz,aHr.searchterm,aHr.searchall,aHr.filter,aHr.callbacks,true);break;case "depth-found":aJr(aHr.callbacks).call(this,event.data.value);break;case "depth-not-found":aHQ.aLA(aKz,aHr.callbacks,true);break;}};};aHE.prototype.aJo=function(aJz,aJl){var aHQ=this;var aKy=null;if(localStorage&&localStorage['user']&&localStorage['user']!=aHQ.aJL){aHQ.aJL=localStorage['user'];}if(!aJl)aKy=aHQ.aJL+"-"+aJz;else if(aJz)aKy=aHQ.aJL+"-"+aJz+"-"+aJl;return aKy;};aHE.prototype.aIZ=function(aJz,aJl){var aHQ=this;if(!aHQ.aJI)return false;if(window.tH)window.tH.aQQ();var aKy=(!aJz)?aJl:aHQ.aJo(aJz,aJl);if(localStorage[aKy]){var aPh=aJD(localStorage[aKy]);if(aPh.expires){var aPZ=new Date();var aOW=new Date(aPh.expires);if(aPZ>aOW)return false;else return aPh;}else return aPh;}else return false};aHE.prototype.aJq=function(aJz,aJl){var aHQ=this;var aKy=(!aJz)?aJl:aHQ.aJo(aJz,aJl);if(aHQ.aGF){aHQ.aGF.postMessage({cmd:'remove-data',key:aKy});}if(localStorage&&localStorage[aKy]){localStorage.removeItem(aKy);}};aHE.prototype.aJB=function(aJz,aJl,aJs){var aHQ=this;var aPZ=new Date();aPZ.setSeconds(aPZ.getSeconds()+aHQ.aOQ);var aOW=aPZ;aJs.expires=aOW;var aKy=aHQ.aJo(aJz,aJl);var aJy=aKx(aJs);if(aHQ.aGF){aHQ.aGF.postMessage({cmd:'parse-data',key:aKy,params:aJy});}if(!aHQ.aJI)return false;localStorage[aKy]=aJy;if(localStorage[aKy])return true;else return false;};aHE.prototype.aJP=function(aKz,aKf,aJt,aKc,aKm,aJv,aJJ){var aHQ=this;if(!aKz.folders)aKz.folders={};if(!aKz.files)aKz.files={};var aJn=[];$.each(aKf,function(aJl,aIN){var lA;if(aIN.parent_chunk){lA=aIN.parent_chunk;}if(aIN.folderkey){var aJC;if(aIN.folderkey!="myfiles"){aJC=new window.tH.yJ(aIN,aKz);aJC.parent=aKz;}else{aJC=new window.tH.yJ(aIN);}window.tH.folders.Yx(aJC.folderkey,aJC);if(aIN.folderkey!="myfiles")aJn.push(aJC);}else{var aJT=new window.tH.Cp(aIN,aKz);aJT.parent=aKz;window.tH.files.Yx(aJT.quickkey,aJT);aJn.push(aJT);}});var RQ_bTrashApi=(aJt.response.action.indexOf('device/get_trash')!= -1);var RQ_iChunkSize=RQ_bTrashApi?parseInt(aJt.response.chunk_size):parseInt(aJt.response.folder_content.chunk_size);var RQ_bLoaded=RQ_bTrashApi?(aKf.length<RQ_iChunkSize):(aJt.response.folder_content.more_chunks!="yes");if(!aKz.status)aKz.status={};if(!aKz.status[aJJ.data.filter])aKz.status[aJJ.data.filter]={};if(!aKz.status[aJJ.data.filter][aJJ.data.order_by])aKz.status[aJJ.data.filter][aJJ.data.order_by]={};if(!aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction])aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction]={files:{},folders:{}};if(!aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction][aJJ.data.content_type])aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction][aJJ.data.content_type]={};aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction][aJJ.data.content_type].chunk=(!aJJ.data.chunk)?1:aJJ.data.chunk;aKz.status[aJJ.data.filter][aJJ.data.order_by][aJJ.data.order_direction][aJJ.data.content_type].loaded=(!aJt.response)?false:RQ_bLoaded;if(!window.tH.root&&aKz.folderkey=="myfiles"){window.tH.root=aKz;}if(aKz.folderkey=="myfiles")aKz.name="My Files";if(!aKz.parent&& !aKz.parent_folderkey)aKz.parent_folderkey="myfiles";if(!aKc){aHQ.aJB("FOLDERCONTENT",aJv,aJt);}aJr(aKm).call(this,aKz,aJn);};aHE.prototype.aGU=function(aKz,aJJ,aKm,aJm,aJV){var aHQ=this;if(!aKz.name){aHQ.aLI(aKz,{success:function(aKo){if(aKo.name=="myfiles")aKo.name="My Files";delete aKz.folders;delete aKz.files;if(!aJJ.data.chunk||aJJ.data.chunk==1){var aGE=window.tH.folders.yx(aKz.folderkey);if(aGE){if(aGE.folders)$.each(aGE.folders,function(x,aMr){window.tH.folders.abg(aMr.folderkey);});if(aGE.files)$.each(aGE.files,function(x,aIW){window.tH.files.abg(aIW.quickkey);});window.tH.folders.memory[aGE.folderkey].files={};window.tH.folders.memory[aGE.folderkey].folders={};}}if(!aKz.shared&&avH(aKo.flag,1)===0){window.location="/?"+aKo.folderkey;return false;}if(!aHQ.aJi&&(aKo.shared=="yes"||aKo.shared=="child")){aJZ(aKm).call();window.location.hash="myfiles";}else aHQ.aGU(aKo,aJJ,aKm);},error:aJZ(aKm)});}else{var aKv=aJm||false;aJJ=$.extend(true,{data:{content_type:"folders",filter:"",order_by:"name",order_direction:"asc",chunk:1}},aJJ);var aJe=aJJ.data.content_type||"folders";var RQ_sFilter=aJJ.data.filter||"all";var aJY=aJJ.data.order_by||"name";var aIQ=aJJ.data.order_direction||"asc";var aJG=aJJ.data.chunk||1;var aJv=aKz.folderkey+"-"+aJe+"-"+RQ_sFilter+"-"+aJY+"-"+aIQ+"-"+aJG;var aJc={};var aII=function(aKz,aKf,aFb,aKc,aJJ){aHQ.aJP(aKz,aKf,aFb,aKc,aKm,aJv,aJJ);};if(aHQ.aGF&& !aJV&& !aJm){var aJx=aHQ.aJo('FOLDERCONTENT',aJv);aJK[aJx]={folder:aKz,options:aJJ,callbacks:aKm};aHQ.aGF.postMessage({cmd:"request-data",key:aJx,prefix:"content"});}else if(!aKv&&(aJc=aHQ.aIZ('FOLDERCONTENT',aJv))!==false){var aJn=[];var aJS=aKU(aKz,aJc);aKz=aJS.folder;aJn=aJS.items;aII(aKz,aJn,aJc,true,aJJ);}else{if(!aKz.aEn)aKz=new tH.yJ(aKz.folderkey);aKz.aEn(aJJ,{success:function(aKz,aKf,aJt){aII(aKz,aKf,aJt,false,aJJ);},error:aJZ(aKm)},1);}}};aHE.prototype.aLI=function(aKz,aLq,aJV,fX){var aHQ=this;if(aHQ.aGF&& !aJV){var aJx=aHQ.aJo('FOLDERINFO',aKz.folderkey);aJK[aJx]={folder:aKz,callback:aLq};aHQ.aGF.postMessage({cmd:"request-data",key:aJx,prefix:"info"});}else if((aJS=aHQ.aIZ("FOLDERINFO",aKz.folderkey))!==false){aKz=aMt(aKz,aJS);aJr(aLq).call(this,aKz);}else{if(aKz instanceof tH.yJ===false)aKz=new tH.yJ(aKz.folderkey);aKz.Yw({data:{recursive:"no",start:"1",limit:"1"}},{success:function(aJt){aJt.etag=aKz.etag;aHQ.aJB("FOLDERINFO",aKz.folderkey,aJt);aJr(aLq).call(this,aKz);},error:aJZ(aLq)});}};function aMt(aKz,aJS){if(!aKz)aKz=window.tH.folders.yx(aJS.folderkey);if(aJS&&aJS.response&&aJS.response.folder_info){if(aJS.etag)aKz.etag=aJS.etag;var aFb=aJS.response.folder_info;if(aKz.name===null){aKz.name='UNKNOWN FOLDER';}if(aJS.flag)aJS.shared=(avH(aJS.flag,1)==1&& !SHARED)?"no":"yes";$.each(aFb,function(aIG,aJp){if((aIG!='files')&&(aIG!='folders')){aKz[aIG]=aJp;}});aKz.folders={};aKz.files={};}return aKz;};function aKU(aKz,aJc){var aJn=[];if(aJc){if(aJc.response.folder_content){aFb=aJc.response.folder_content;$.each(aFb,function(aIG,aJp){if((aIG!='files')&&(aIG!='folders')&&(aIG!='content_type')&&(aIG!='chunk_size')&& ! !(aKz[aIG])){aKz[aIG]=aJp;}});if((aFb.folders&&aFb.folders.length>0)||(aFb.files&&aFb.files.length>0)){if(aFb.folders){$.each(aFb.folders,function(aKu,aGE){if(aGE.flag)aFb.folders[aKu].shared=(avH(aGE.flag,1)==1&& !SHARED)?"no":"yes";if(!SHARED&&(aKz.shared=="yes"||aKz.shared=="child")){aFb.folders[aKu].shared="child";aFb.folders[aKu].owner_name=aKz.owner_name;}aFb.folders[aKu].parent_chunk=aFb.chunk_number;aJn.push(aFb.folders[aKu]);});aKz.Yy(aFb,false,false);if(aFb.more_chunks!="yes")aKz.folders_loaded=true;else aKz.folders_loaded=false;}if(aFb.files){$.each(aFb.files,function(aKu,aIW){aFb.files[aKu].parent_chunk=aFb.chunk_number;aJn.push(aFb.files[aKu]);});if(!aKz.ZW)aKz=new tH.yJ(aKz);aKz.ZW(aFb.files);if(aFb.more_chunks!="yes")aKz.files_loaded=true;else aKz.files_loaded=false;}}if(!aFb[aFb.content_type]||aFb[aFb.content_type].length==0){aKz[aFb.content_type+"_loaded"]=true;}if(aFb.content_type&&aFb.chunk_number)aKz[aFb.content_type+"_chunk"]=aFb.chunk_number;}}return{folder:aKz,items:aJn};};aHE.prototype.aGY=function(aKz,aJf,aLY,RQ_sFilter,aKm,aJV){var aHQ=this;var aJv=aKz.folderkey+"-"+aJf;if(aHQ.aGF&& !aJV&& !aLY){var aJx=aHQ.aJo('SEARCH',aKz.folderkey);aJK[aJx]={folder:aKz,searchterm:aJf,searchall:aLY,filter:RQ_sFilter,callbacks:aKm};aHQ.aGF.postMessage({cmd:"request-data",key:aJx,prefix:"search"});}else if((aIR=aHQ.aIZ('SEARCH',aJv))!==false&& !aLY){aJr(aKm).call(this,aIR);}else{var Wi={data:{search_text:aJf,version:2.5}};if(aKz.folderkey!='myfiles'&&aKz.folderkey!=''){Wi.data.folder_key=aKz.folderkey;}if(aLY){Wi.data.search_all='yes';Wi.data.folder_key='';}if(RQ_sFilter)Wi.data.filter=RQ_sFilter;aKz.aFG(Wi,{success:function(data){if(data.response.results.length>0&& !Wi.data.search_all)aHQ.aJB("SEARCH",aJv,data);aJr(aKm).call(this,data);},error:aJZ(aKm)});}};aHE.prototype.aLA=function(aKz,aLq,aJV){var aHQ=this;var aJv=aKz.folderkey;if(aHQ.aGF&& !aJV){var aJx=aHQ.aJo('DEPTH',aKz.folderkey);aJK[aJx]={folder:aKz,callbacks:aLq};aHQ.aGF.postMessage({cmd:"request-data",key:aJx,prefix:"depth"});}else if((aKK=aHQ.aIZ("DEPTH",aJv))!==false){aJr(aLq).call(this,aKK);}else{aKz.aHV({success:function(data){aHQ.aJB("DEPTH",aJv,data);aJr(aLq).call(this,data);},error:aJZ(aLq)});}};aHE.prototype.aIX=function(aIK){var aHQ=this;var aLd=[];if(aHQ.aGF){aHQ.aGF.postMessage({cmd:'uncache-folder',folderkey:aIK});}if(!localStorage)return;if(BrowserName()==="Internet Explorer"&&Bm()[0]==="8"|| !Object.keys){for(member in window.localStorage){aLd.push(member);}}else{aLd=Object.keys(localStorage);}if(aLd&&aLd.length>0){for(var i=0;i<aLd.length;i++){var aKs=aLd[i];if(aKs){var aKj=aKs.split("-");if(aKj[0]==aHQ.aJL&&aKj[2]==aIK){aHQ.aJq(false,aKs);}}}}}})(jQuery);(function($){var bdB,bcw;function bbn(bdE,bca,beq){if(typeof beq!="undefined")bcw=beq==1;else bcw=false;if(typeof bca=="string")bdB=bca;this.bbU={};this.aQm={};this.aab={container_selector:"#folderTree .folderlist_content",folder_browser_class:"",current_folder_class:"current_folder_location",expanded_folder_class:"expanded",collapsed_folder_class:"collapsed",linked_folder_class:"linked_folder",shared_by_folder_class:"sharedByUser",add_arrow:true,display_linked_folders:true,onFolderDrop:function(){},onFolderContextMenu:function(){},onFolderClick:function(){},onFolderMouseDown:function(){},onArrowClick:function(){},onFolderDragOver:function(){},onFolderDragStart:function(){},onFolderDragEnd:function(){},onFolderDragEnter:function(){},onFolderDragLeave:function(){},onFolderBrowserLoad:function(){},onFolderAdd:function(){}};for(bdn in bdE){if(typeof this.aab[bdn]!="undefined")this.aab[bdn]=bdE[bdn];}this.baB=$(this.aab.container_selector);bdV.push(this);};bbn.prototype.acI=function(bby,bcD,bct){var bbu=this;if(!bct&&typeof bcD=="function")bct=bcD;if(!bct&& !bcD&&typeof bby=="function")bct=bby;var Ta=bcD=='trash';if(!bby||typeof bby!="string")bby='myfiles';if(!bcD||typeof bcD!="string"||Ta)bcD=bby;this.bby=bby;this.bcD=bcD;this.beI(bby,function(bbU){bbu.bbU=bbU;bbu.bcE(bbU);bbu.beT();bbu.aZC(bbU.folderkey,function(){if(bbu.aQm[bcD]){bbu.aZC(bcD,function(){if(!Ta)bbu.bau(bcD);});}else{var bai=new aZG({folderkey:bcD});bai.bdQ(bbU.folderkey,function(bdw){bbu.bdS(bdw,function(){if(!Ta)bbu.bau(bcD);});});}});bbu.bfd();if(! !bct)bct(bbu);bbu.aab.onFolderBrowserLoad();});};bbn.prototype.bcE=function(baT){this.aQm[baT.folderkey]=new aZG(baT);for(ben in baT.folders){this.bcE(baT.folders[ben])}};bbn.prototype.beI=function(aZW,baM){if(!aZW){try{console.error("required folderkey is missing");}catch(e){}return;}if(aZW=="myfiles"&& !bdB){try{console.error("can't load myfiles without session token");}catch(e){}return;}var bai;if(!this.aQm[aZW]){bai=new aZG({folderkey:aZW});bai.bep(function(){bai.bcc(function(baT,bci){if(! !baM)baM(baT,bci);});});}else{bai=this.aQm[aZW];bai.bcc(function(baT,bci){if(! !baM)baM(baT,bci);});}};bbn.prototype.bdS=function(bcu,baM){var bbu=this;if(bcu.length>0){var bdb=0;bfp();}else{if(! !baM)baM();}function bfp(){var bfB=bcu[bdb];bbu.aZC(bfB.folderkey,function(){bdb++;if(bcu[bdb])bfp();else if(! !baM)baM();});}};bbn.prototype.beT=function(){if(this.bbU){var bei=$("<ul></ul>");var bee=this.bdK(this.bbU);bei.append(bee);this.baB.html(bei);}};bbn.prototype.aVb=function(aZW){if(this.aQm[aZW]){var bai=this.aQm[aZW];if(bai.parent){bai.parent=new aZG(bai.parent);for(var x=0,l=bai.parent.folders.length;x<l;x++){if(bai.parent.folders[x].folderkey==aZW){bai.parent.folders.splice(x,1);break;}}bai.parent.folder_count=bai.parent.folders.length;if(this.baB.find("#mffb-"+bai.parent.folderkey+" > ul > li").length<2)bai.parent.folder_count=0;this.aQm[bai.parent.folderkey]=new aZG(bai.parent);this.bew(bai.parent);}delete this.aQm[aZW];}if(typeof aZW!="undefined"&&aZW&&this.baB.find("#mffb-"+aZW).length>0)this.baB.find("#mffb-"+aZW).remove();if(bai&&bai.parent&&this.baB.find("#mffb-"+bai.parent.folderkey+" > ul > li").length==0)this.baB.find("#mffb-"+bai.parent.folderkey+" > ul").remove();$('a.folder_arrow').each(function(x,bnD){var MFFB_jArrowParent=$(bnD).parent();var bai=MFFB_jArrowParent.data('info');if(!bai|| !parseInt(bai.folder_count,10)){$(bnD).remove();MFFB_jArrowParent.find('ul').remove();}});};bbn.prototype.bew=function(aZG){var MFFB_jFolderList=this.baB.find('#mffb-'+aZG.folderkey);if(MFFB_jFolderList.length){var MFFB_jArrowAnchor=MFFB_jFolderList.children('a.folder_arrow');if(MFFB_jArrowAnchor.length){if(!aZG|| !parseInt(aZG.folder_count,10)){MFFB_jArrowAnchor.remove();}}else if(this.aab.add_arrow&&aZG&&parseInt(aZG.folder_count,10)>0){MFFB_jFolderList.prepend('<a href="javascript:void(0)" class="folder_arrow"></a>');}}};bbn.prototype.aZE=function(baT){if(baT.folderkey&&this.aQm[baT.folderkey]){if(baT.name&&baT.name!=this.aQm[baT.folderkey].name){this.aQm[baT.folderkey].name=baT.name;if($("#mffb-"+baT.folderkey).length>0)$("#mffb-"+baT.folderkey+" .folder_name").first().text(baT.name);}var MFFB_oCachedFolder=this.aQm[baT.folderkey];if(baT&&MFFB_oCachedFolder&&baT.folder_count!=MFFB_oCachedFolder.folder_count){this.aQm[baT.folderkey].folder_count=Math.max(0,(parseInt(baT.folder_count,10)||0));this.bew(this.aQm[baT.folderkey])}}};function mn(aZG,ds){var kn=false;if(aZG&&aZG.folderkey&&ds&&ds.length>0){for(var x=0,l=ds.length;x<l;x++){if(ds[x].folderkey&&aZG.folderkey==ds[x].folderkey)kn=true;}}return kn;};bbn.prototype.aVp=function(ber,bbJ,bdX){if(this.aQm[bbJ]&&ber.folderkey){var bai=new aZG(ber);var bdR=this.aQm[bbJ];if(bai.shared=="yes"&&(bdR.shared=="yes"||bdR.shared=="child")){bai.shared="child";}if((bai.shared=="yes"||bai.shared=="child")&&this.aab.display_linked_folders==false){var iPermissions=bod(bai);if(iPermissions!=2)return;}if(bdR.chunk_number>0){bai.parent=this.aQm[bbJ];this.aQm[bai.folderkey]=bai;if(!mn(bai,this.aQm[bbJ].folders)){this.aQm[bbJ].folders.push(bai);}this.aQm[bbJ].folder_count=this.aQm[bbJ].folders.length;this.aQm[bbJ].folders.sort(function(a,b){var bcM=a.name.toLowerCase();var bfJ=b.name.toLowerCase();return(bcM<bfJ)? -1:(bcM>bfJ)?1:0;});var bcU=null;if(this.baB.find("#mffb-"+bbJ+" > ul").length==0)this.baB.find("#mffb-"+bbJ).append($("<ul></ul>"));if(this.aab.add_arrow&&this.baB.find("#mffb-"+bbJ+" > a.folder_arrow").length==0)this.baB.find("#mffb-"+bbJ).prepend($('<a href="javascript:void(0)" class="folder_arrow"></a>'));if(!bdX){for(var x=0,l=this.aQm[bbJ].folders.length;x<l;x++){if(this.aQm[bbJ].folders[x].folderkey==bai.folderkey&&this.baB.find("#mffb-"+bbJ).find("#mffb-"+bai.folderkey).length==0){if(bcU&&this.baB.find("#mffb-"+bcU).length>0){if(x+1<this.aQm[bbJ].folders.length){this.baB.find("#mffb-"+bcU).after(this.bdK(bai));}else{if(this.aQm[bbJ].finished_loading){this.baB.find("#mffb-"+bcU).after(this.bdK(bai));}else{this.aQm[bbJ].folders.splice(x,1);}}}else if(this.baB.find("#mffb-"+bai).length==0){this.baB.find("#mffb-"+bbJ+" > ul").prepend(this.bdK(bai));}}if(this.aQm[bbJ].folders[x])bcU=this.aQm[bbJ].folders[x].folderkey;}}else{this.baB.find("#mffb-"+bbJ+" > ul").append(this.bdK(bai));}}else{this.aQm[bbJ].folder_count=(parseInt(this.aQm[bbJ].folder_count,10)||0)+1;if(this.aab.add_arrow&&this.baB.find("#mffb-"+bbJ+" > a.folder_arrow").length==0)this.baB.find("#mffb-"+bbJ).removeClass("expanded").addClass("collapsed").prepend($('<a href="javascript:void(0)" class="folder_arrow"></a>'));}this.aab.onFolderAdd(bai);}};bbn.prototype.bdK=function(aZG){var bbT=$("<li></li>").addClass(this.aab.collapsed_folder_class);if(aZG.shared=="yes"||aZG.shared=="child")bbT.addClass(this.aab.linked_folder_class);if(aZG.shared_by_user)bbT.addClass(this.aab.shared_by_folder_class);bbT.data("info",aZG).data("folderkey",aZG.folderkey).attr("id","mffb-"+aZG.folderkey).html('<a href="javascript:void(0)" class="folder_name" title="'+aZG.name.replace(/"/g,"''")+'">'+aZG.name.replace(/&/g,'&amp;').replace(/</g,'&lt;')+'</a>');if(aZG.folders.length>0){var bel=$("<ul></ul>");for(var x=0;x<aZG.folders.length;x++){var sShared=aZG.folders[x].shared;var permissions=0;if(sShared=="yes"||sShared=="child"){if(!bod(aZG.folders[x])){var bai=aZG.folders[x];var sTempShared=bai.shared;while(sTempShared=="child"){bai=bai.parent;sTempShared=bai.shared;}iPermissions=bod(bai);}else{iPermissions=bod(aZG.folders[x]);}}if((sShared!="yes"&&sShared!="child")||((sShared=="yes"||sShared=="child")&&(this.aab.display_linked_folders==true||iPermissions==2)))bel.append(this.bdK(aZG.folders[x]));}bbT.append(bel);}if(this.aab.add_arrow&&((parseInt(aZG.folder_count,10)||0)>1||aZG.folders.length)){bbT.prepend($('<a href="javascript:void(0)" class="folder_arrow"></a>'));}return bbT;};bbn.prototype.bfd=function(){var bbu=this;this.baB.delegate("a.folder_name","click",function(e){var bai=$(this).closest("li").data("info");if(!$(this).hasClass(bbu.aab.current_folder_class))bbu.aZC(bai.folderkey,function(){bbu.bau(bai.folderkey);});else bbu.beD(bai.folderkey,function(){});bbu.aab.onFolderClick(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.folder_name","mousedown",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderMouseDown(e,bbu.aQm[bai.folderkey],this);}).delegate("a.folder_name","dragover",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderDragOver(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.folder_name","dragstart",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderDragStart(e,bbu.aQm[bai.folderkey],this);}).delegate("a.folder_name","dragend",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderDragEnd(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.folder_name","dragenter",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderDragEnter(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.folder_name","dragleave",function(e){var bai=$(this).closest("li").data("info");bbu.aab.onFolderDragLeave(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.folder_arrow","click",function(e){var bai=$(this).closest("li").data("info");bbu.beD(bai.folderkey);bbu.aab.onArrowClick(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("a.load_more","click",function(e){var beW=$(this).closest("li");$(this).text("Loading...");beW.addClass("loading");var bai=$(this).closest("li").closest("ul").closest("li").data("info");var bfk=bbu.aQm[bai.folderkey];bfk.bcc(function(baT,bci){beW.remove();bbu.bdU(baT,bci);});}).delegate("li","drop",function(e){var bai=$(this).data("info");bbu.aab.onFolderDragLeave(e,bbu.aQm[bai.folderkey],$(this).find("a.folder_name")[0]);bbu.aab.onFolderDrop(e,bbu.aQm[bai.folderkey],this);return false;}).delegate("li","contextmenu",function(e){var bai=$(this).data("info");bbu.aab.onFolderContextMenu(e,bbu.aQm[bai.folderkey],this);return false;});};bbn.prototype.bdU=function(aZG,bci){var bbu=this;if(aZG&&aZG.folderkey){for(var i=0,l=bci.length;i<l;i++){var bai=bci[i];bbu.aVp(bai,aZG.folderkey,true);}}if(!aZG.finished_loading)bcj(aZG,bbu);};function bcj(aZG,bbu){if(aZG.folderkey&&bbu.baB.find("#mffb-"+aZG.folderkey).length>0&&bbu.baB.find("#mffb-"+aZG.folderkey+" > ul").length>0&&bbu.baB.find("#mffb-"+aZG.folderkey+" > ul > li > a.load_more").length==0){bbu.baB.find("#mffb-"+aZG.folderkey+" > ul").append($("<li class='load_more_folders'></li>").html("<a href='javascript:void(0)' class='load_more'>Load More&hellip;</a>").data('key',aZG.folderkey));}};bbn.prototype.bau=function(aZW){if(this.baB.find("#mffb-"+aZW).length>0){this.baB.find("li").removeClass(this.aab.current_folder_class);this.baB.find("#mffb-"+aZW).addClass(this.aab.current_folder_class);}};bbn.prototype.bfg=function(){this.baB.find("li").removeClass(this.aab.current_folder_class);};bbn.prototype.aZC=function(aZW,baM){var bbu=this;var bai=this.aQm[aZW];if(!bai||((parseInt(bai.folder_count,10)||0)>0&&bai.folders.length==0)){this.beI(aZW,function(baT,bci){var bgT=bfh(baT);if(bgT){bbu.bcE(baT);bbu.bdU(baT,bci);}});}else{bfh(bai);if(typeof MYF_fHideSpinner=='function'){MYF_fHideSpinner('folders');}}function bfh(aZG){var bgT=false;if(aZG.folderkey&&bbu.baB.find("#mffb-"+aZG.folderkey).length>0&& !bbu.baB.find("#mffb-"+aZG.folderkey).hasClass(bbu.aab.expanded_folder_class)){bbu.baB.find("#mffb-"+aZG.folderkey).removeClass(bbu.aab.collapsed_folder_class).addClass(bbu.aab.expanded_folder_class);if(!aZG.finished_loading)bcj(aZG,bbu);if(typeof aZG.parent!="undefined")bbu.aZC(aZG.parent.folderkey);bgT=true;}if(! !baM)baM();if(typeof MYF_fHideSpinner=='function'){MYF_fHideSpinner('folders');}return bgT;}};bbn.prototype.bej=function(aZW){if(this.baB.find("#mffb-"+aZW).length>0){this.baB.find("#mffb-"+aZW).removeClass(this.aab.expanded_folder_class).addClass(this.aab.collapsed_folder_class);}};bbn.prototype.beD=function(aZW,baM){if(this.baB.find("#mffb-"+aZW).length>0){if(this.baB.find("#mffb-"+aZW).hasClass(this.aab.expanded_folder_class)){this.bej(aZW);if(! !baM)baM();}else{this.aZC(aZW,baM);}}};bbn.prototype.bfx=function(bcf){if(bcf){bdB=bcf;}};function aZG(bcb){var bcA={avatar:"",chunk_number:0,created:"",file_count:"0",finished_loading:false,flag:"2",folder_count:0,folders:new Array(),folderkey:"",name:"untitled",owner_name:"",privacy:"public",shared:"no"};for(bcg in bcA){if(typeof bcb[bcg]!="undefined"){this[bcg]=bcb[bcg];}else this[bcg]=bcA[bcg];}if(this.folders&&Object.prototype.toString.call(this.folders)!=="[object Array]"){var yr=this.folders;this.folders=new Array();for(var yc in yr){this.folders.push(new aZG(yc));}this.folders.sort(function(a,b){var bcM=a.name.toLowerCase();var bfJ=b.name.toLowerCase();return(bcM<bfJ)? -1:(bcM>bfJ)?1:0;});}if(bcb.parent&& !bcb.parent instanceof aZG){bcb.parent.folders=new Array();this.parent=new aZG(bcb.parent);}if(!bcw&&beZ(this.flag,1)==0&&this.folderkey!="myfiles"){this.shared="yes";}if(typeof bcb['permissions']!="undefined"){this.permissions=bcb['permissions'];}if(typeof bcb['shared_by_user']!="undefined"){this.shared_by_user=bcb['shared_by_user'];}};aZG.prototype.bep=function(baM){var bbt=this;bdA({url:"1.4/folder/get_info.php",data:{folder_key:this.folderkey},success:function(bbw){for(bcg in bbt){if(typeof bbw.response.folder_info[bcg]!="undefined")bbt[bcg]=bbw.response.folder_info[bcg];}if(bbt.folderkey=="myfiles")bbt.name="My Files";if(! !baM)baM(bbt);},error:function(bdC){try{console.error('error occured');}catch(e){}}},this);};aZG.prototype.bdQ=function(bby,baM){var bbt=this;if(!baM&&typeof bby=="function"){baM=bby;bby=null;}var bdw={folder_key:this.folderkey};if(bby)bdw.root_folderkey=bby;bdA({url:"1.4/folder/get_depth.php",data:bdw,success:function(bbw){if(bbw.response&&bbw.response.folder_depth&&bbw.response.folder_depth.chain_folders){if(! !baM)baM(bbw.response.folder_depth.chain_folders.reverse());}else if(! !baM)baM(bbw);},error:function(bdC){try{console.error('error occured');}catch(e){}}},this);};aZG.prototype.bcc=function(baM){var bbt=this;bdA({url:"1.4/folder/get_content.php",data:{folder_key:this.folderkey,chunk:this.chunk_number+1,content_type:"folders"},success:function(bbw){var bci=new Array();if(bbw.response&&bbw.response.folder_content&&bbw.response.folder_content.folders){if(bbw.response.folder_content.chunk_number=="1"){bbt.folders=new Array();bbt.chunk_number=1;}else if(bbw.response.folder_content.chunk_number){bbt.chunk_number=parseInt(bbw.response.folder_content.chunk_number);}var beB=bbw.response.folder_content.folders.length;for(var x=0;x<beB;x++){var bai=new aZG(bbw.response.folder_content.folders[x]);bai.parent=bbt;bbt.folders.push(bai);bci.push(bai);}if(bbw.response.folder_content.more_chunks!="yes"){bbt.finished_loading=true;}}if(! !baM)baM(bbt,bci);},error:function(bdC){try{console.error('error occured');}catch(e){}}},this);};var bgQ=false,aPu=new Array();function bgn(bdw){for(var x=0,l=aPu.length;x<l;x++){if(aPu[x]==bdw)return true;}return false;};function bdA(bcn,bgm){if(bgQ&& !bgm){if(!bgn(bcn))aPu.push(bcn);return;}bgQ=true;var bdC=bfl();var bdw= !bcn.data?{}:bcn.data;bdw.session_token=bdB;bdw.response_format="json";bdw.rand=Math.floor(Math.random()*1000)+1000;var beO="www.mediafire.com.de.a2ip.ru";if(window.location.host.indexOf("mediafire.com.de.a2ip.ru")> -1)beO=window.location.host;var bfH=window.location.protocol+"//"+beO+"/api/"+bcn.url;var bcp='';for(var bdx in bdw){if(bdw[bdx])bcp+="&"+bdx+"="+bdw[bdx];}bcp=bcp.substring(1);bdC.open("GET",bfH+"?"+bcp,true);bdC.onreadystatechange=function(){var bgA;if(bdC.readyState==4&&bdC.status==200){bcn.success(JSON.parse(bdC.responseText));if(aPu.length>0){bgA=aPu[0];aPu.splice(0,1);bdA(bgA,true);}else bgQ=false;}else if(bdC.readyState==4){if(bcn.error)bcn.error(bdC);if(aPu.length>0){bgA=aPu[0];aPu.splice(0,1);bdA(bgA,true);}else bgQ=false;}};bdC.send(null);};function bfl(){if(typeof XMLHttpRequest=="undefined")XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")};return new XMLHttpRequest();};function bod(apI){if(!apI.permissions)return 0;if(typeof apI.permissions=="object"){if(!apI.permissions.value)return 0;return parseInt(apI.permissions.value);}else{return parseInt(apI.permissions);}};function beZ(bev,bfe){return(parseInt(bev)>>parseInt(bfe))%2;};window.auj=bbn;window.auj.aZG=aZG;window.bdV=new Array();window.beR=function(bdP){for(var i=0,l=bdV.length;i<l;i++){bdV[i].bfx(bdP);}};window.bfr=function(aZG,bfq){for(var i=0,l=bdV.length;i<l;i++){bdV[i].aVp(aZG,bfq);}};window.beK=function(aZW){for(var i=0,l=bdV.length;i<l;i++){bdV[i].aVb(aZW);}};window.bfF=function(aZG){for(var i=0,l=bdV.length;i<l;i++){bdV[i].aZE(aZG);}};})(jQuery);(function($){$.popup=function(POP_oElement,options){var POP_oBase=this;var $POP_oElement=POP_oBase.$POP_oElement=$(POP_oElement);POP_oBase.POP_oElement=POP_oElement;POP_oBase.$root=POP_oBase.$POP_oElement.data("popup",POP_oBase).wrap('<div class="popup"><div class="popup_content" /></div>').parent().parent().prepend('<a href="javascript:void(0);" class="popup-close"></a>');POP_oBase.close(true);POP_oBase.options=$.extend({},$.popup.defaultOptions,options);};$.popup.prototype.open=function(bSkipFade,CZ,iLeft,Fj,iRight){dZ();var $JQ_oThis=this;var $win=$(window);if(bSkipFade)this.$root[0].style.display='block';else this.$root.fadeIn();$('body').addClass('lightboxActive');function akX($JQ_oElement,$JQ_oWindow,JQ_bFirstTime){var JQ_oCssObject={};JQ_oCssObject.top=Math.max(0,((($JQ_oWindow.height()-$JQ_oElement.outerHeight(true))/2)+$JQ_oWindow.scrollTop()<$JQ_oWindow.scrollTop())?($JQ_oWindow.scrollTop()+10):((($JQ_oWindow.height()-$JQ_oElement.outerHeight(true))/2)+$JQ_oWindow.scrollTop()))+"px";JQ_oCssObject.left=Math.max(0,(($JQ_oWindow.width()-$JQ_oElement.outerWidth(true))/2))+"px";$JQ_oElement.css(JQ_oCssObject);};if(typeof CZ!='undefined'&&typeof iLeft!='undefined'){var SM={top:CZ,left:iLeft};if(typeof Fj!='undefined')SM.bottom=Fj;if(typeof iRight!='undefined')SM.right=iRight;this.$root.css(SM);}else{akX(this.$root,$win,true);$win.resize(function(){akX($JQ_oThis.$root,$win,false);});}if(window.Ms){window.Ms(this.$root.context.id);}if(window.OX){var PM=this.$root[0],Oy=function(e){window.OX(e.target.offsetWidth,e.target.offsetHeight);};window.OX(PM.offsetWidth,PM.offsetHeight);PJ(PM,Oy);}};$.popup.prototype.close=function(POP_bInitClose){cU();this.$root.fadeOut();if(!POP_bInitClose&&window.MYF_TriggerDesktopClose){window.MYF_TriggerDesktopClose(this.$root.context.id);}if(this.$root.context.id=='sharebox'){$(this.$root.context).children().first().remove();}$('body').removeClass('lightboxActive');};$.popup.defaultOptions={};$.fn.popup=function(options){return this.each(function(){var POP_oBase=new $.popup(this,options),opts=POP_oBase.options,$this=$(this);POP_oBase.$root.delegate(".close, .popup-close","click",function(){POP_oBase.close();});});};})(jQuery); jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10* --t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});(function($){$.fn.tabs=function(options){return this.each(function(){var $root=$(this),$nav=$root.children("ul"),$content=$root.children("div"),opts=$.extend({},$.fn.tabs.defaults,options);$root.data("tabs",opts);$nav.find("li > a").click(function(){var $a=$(this),$li=$a.parent(),adR=opts.currentClass;$li.addClass(adR).siblings().removeClass(adR);$content.filter("."+adR).trigger("close").removeClass(adR).end().filter("#"+$a.attr("href").slice(1)).addClass(adR).trigger("open");return false;});});};$.fn.tabs.defaults={currentClass:"current"};})(jQuery); jQuery.fn.dragToSelect=function(conf){var c=typeof(conf)=='object'?conf:{};var config=jQuery.extend({selectables:'#main_list li',not:'.collaborate-active',excludes:['li.row_container','#myfiles_viewtabs_bar','#myfiles_controlbar_outer','#header','#contextmenu','#folderTree'],className:'jquery-drag-to-select',activeClass:'dragselect_active',disabledClass:'dragselect_disabled',selectedClass:'dragselect_selected',scrollTH:10,percentCovered:0.8,autoScroll:false,selectOnMove:false,onShow:function(){return true;},onHide:function(){return true;},onRefresh:function(){return true;}},c);var ctrlKeyDown=false;var ctrlKeyOnMousedown=false;var ctrlKeyOnSelect=false;var realParent=jQuery(this);var parent=realParent;var mouseIsUp=true;var mouseIsDown=false;var mouseMoved=false;do{if(/auto|scroll|hidden/.test(parent.css('overflow'))){break;}parent=parent.parent();}while(parent[0].parentNode);if(conf=='disable'){parent.addClass(config.disabledClass);return this;}else if(conf=='enable'){parent.removeClass(config.disabledClass);return this;}var parentOffset=parent.offset();var parentDim={left:parentOffset.left,top:parentOffset.top,width:parent.width(),height:parent.height()};var selectBoxOrigin={left:0,top:0};var selectBox=jQuery('<div/>').appendTo(parent).attr('class',config.className).css({position:'absolute',background:'#def',display:'none',opacity:.3,filter:'alpha(opacity=30)',zIndex:500,border:'1px solid #369'});var showSelectBox=function(e){if(parent.is('.'+config.disabledClass)){return;}selectBoxOrigin.left=e.pageX-parentDim.left+parent[0].scrollLeft;selectBoxOrigin.top=e.pageY-parentDim.top+parent[0].scrollTop;var css={left:selectBoxOrigin.left+'px',top:selectBoxOrigin.top+'px',width:'0',height:'0',zIndex:'-100'};selectBox.css(css).show();config.onShow(ctrlKeyDown);};var refreshSelectBox=function(e){if(!selectBox.is(':visible')||parent.is('.'+config.disabledClass)){return;}var left=e.pageX-parentDim.left+parent[0].scrollLeft;var top=e.pageY-parentDim.top+parent[0].scrollTop;var newLeft=left;var newTop=top;var newWidth=selectBoxOrigin.left-newLeft;var newHeight=selectBoxOrigin.top-newTop;if(left>selectBoxOrigin.left){newLeft=selectBoxOrigin.left;newWidth=left-selectBoxOrigin.left;}if(top>selectBoxOrigin.top){newTop=selectBoxOrigin.top;newHeight=top-selectBoxOrigin.top;}var css={left:newLeft+'px',top:newTop+'px',width:newWidth+'px',height:newHeight+'px'};selectBox.css(css);config.onRefresh();};var hideSelectBox=function(){if(!selectBox.is(":visible")||parent.is('.'+config.disabledClass)){return;}if(typeof config.onHide!='undefined'){var oSelectBoxOffset=selectBox.offset();var oSelectBoxDimensions={'top':oSelectBoxOffset.top,'left':oSelectBoxOffset.left,'width':selectBox.width(),'height':selectBox.height()};config.onHide(ctrlKeyOnSelect,oSelectBoxDimensions);}selectBox.hide();ctrlKeyOnSelect=false;};var scrollPerhaps=function(e){if(!selectBox.is(':visible')||parent.is('.'+config.disabledClass)){return;}if((e.pageY+config.scrollTH)>(parentDim.top+parentDim.height)){parent[0].scrollTop+=config.scrollTH;}if((e.pageY-config.scrollTH)<parentDim.top){parent[0].scrollTop-=config.scrollTH;}};$(document).bind('keydown','ctrl',function(){ctrlKeyDown=true;});$(document).bind('keyup','ctrl',function(){ctrlKeyDown=false;});var selectElementsInRange=function(){if(!selectBox.is(':visible')||parent.is('.'+config.disabledClass)){return;}var selectables=realParent.find(config.selectables).not(config.not);var selectBoxOffset=selectBox.offset();var selectBoxDim={left:selectBoxOffset.left,top:selectBoxOffset.top,width:selectBox.width(),height:selectBox.height()};selectables.each(function(i){var el=$(this);var elOffset=el.offset();var elDim={left:elOffset.left,top:elOffset.top,width:el.width(),height:el.height()};var elSelected=el.hasClass(config.selectedClass);if(percentCovered(selectBoxDim,elDim)>config.percentCovered){if(!elSelected)el.addClass(config.selectedClass);}else if(elSelected){el.removeClass(config.selectedClass);}});};var percentCovered=function(dim1,dim2){if((dim1.left<=dim2.left)&&(dim1.top<=dim2.top)&&((dim1.left+dim1.width)>=(dim2.left+dim2.width))&&((dim1.top+dim1.height)>(dim2.top+dim2.height))){return 100;}else{dim1.right=dim1.left+dim1.width;dim1.bottom=dim1.top+dim1.height;dim2.right=dim2.left+dim2.width;dim2.bottom=dim2.top+dim2.height;var l=Math.max(dim1.left,dim2.left);var r=Math.min(dim1.right,dim2.right);var t=Math.max(dim1.top,dim2.top);var b=Math.min(dim1.bottom,dim2.bottom);if(b>=t&&r>=l){var percent=(((r-l)*(b-t))/(dim2.width*dim2.height))*100;return percent;}}return 0;};if(jQuery.fn.disableTextSelect){parent.disableTextSelect();}parent.on('mousedown.dts',function(e){var withinSelectableArea=true;$.each(config.excludes,function(x,sArea){if($(e.target).closest(sArea).length>0)withinSelectableArea=false;});if((e.pageX+20)>$(document.body).width())withinSelectableArea=false;if(withinSelectableArea&&e.which==1){mouseIsDown=true;mouseIsUp=false;if(ctrlKeyDown){ctrlKeyOnMousedown=true;}parent.on('mousemove.dts',function(e){if(mouseIsDown){mouseMoved=true;if(!selectBox.is(':visible')){showSelectBox(e);}else if(selectBox.width()){selectBox.css('z-index','100');}refreshSelectBox(e);if(config.selectables&&config.selectOnMove){selectElementsInRange();}if(config.autoScroll){scrollPerhaps(e);}}}).on('mouseleave.dts',function(e){if(mouseIsDown){$(this).mouseup();}}).on('mouseup.dts',function(e){if(mouseMoved){mouseIsUp=true;mouseIsDown=false;mouseMoved=false;if(config.selectables){selectElementsInRange();}if(ctrlKeyDown&&ctrlKeyOnMousedown){ctrlKeyOnSelect=true;ctrlKeyDown=false;ctrlKeyOnMousedown=false;}hideSelectBox();}if(!mouseIsUp||mouseIsDown){mouseIsUp=true;mouseIsDown=false;}parent.unbind('mousemove.dts mouseleave.dts mouseup.dts');})}});return this;};/*!
 * clipboard.js v1.6.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e,t,n;return function e(t,n,o){function i(a,c){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return i(n?n:e)},s,s.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){function o(e,t){for(;e&&e.nodeType!==i;){if(e.matches(t))return e;e=e.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=o},{}],2:[function(e,t,n){function o(e,t,n,o,r){var a=i.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function i(e,t,n,o){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&o.call(e,n)}}var r=e("./closest");t.exports=o},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function o(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!c.string(t))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(e))return i(e,t,n);if(c.nodeList(e))return r(e,t,n);if(c.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function r(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var c=e("./is"),l=e("delegate");t.exports=o},{"./is":3,delegate:2}],5:[function(e,t,n){function o(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(e),o.removeAllRanges(),o.addRange(i),t=o.toString()}return t}t.exports=o},{}],6:[function(e,t,n){function o(){}o.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function o(){i.off(e,o),t.apply(n,arguments)}var i=this;return o._=t,this.on(e,o,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],i=[];if(o&&t)for(var r=0,a=o.length;r<a;r++)o[r].fn!==t&&o[r].fn._!==t&&i.push(o[r]);return i.length?n[e]=i:delete n[e],this}},t.exports=o},{}],7:[function(t,n,o){!function(i,r){if("function"==typeof e&&e.amd)e(["module","select"],r);else if("undefined"!=typeof o)r(n,t("select"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function(){function e(t){o(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function e(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function e(){var t=this,n="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[n?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function e(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function e(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function e(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function e(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function e(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function e(){this.removeFake()}},{key:"action",set:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function e(){return this._action}},{key:"target",set:function e(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function e(){return this._target}}]),e}();e.exports=c})},{select:5}],8:[function(t,n,o){!function(i,r){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof o)r(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=i(t),s=i(n),f=i(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.resolveOptions(n),o.listenClick(e),o}return c(t,e),d(t,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:function e(t){var n=this;this.listener=(0,f.default)(t,"click",function(e){return n.onClick(e)})}},{key:"onClick",value:function e(t){var n=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(n),target:this.target(n),text:this.text(n),trigger:n,emitter:this})}},{key:"defaultAction",value:function e(t){return l("action",t)}},{key:"defaultTarget",value:function e(t){var n=l("target",t);if(n)return document.querySelector(n)}},{key:"defaultText",value:function e(t){return l("text",t)}},{key:"destroy",value:function e(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],n="string"==typeof t?[t]:t,o=!!document.queryCommandSupported;return n.forEach(function(e){o=o&&!!document.queryCommandSupported(e)}),o}}]),t}(s.default);e.exports=h})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});
(function($,e,b){var c="hashchange",h=document,f,g=$.event.special,i=h.documentMode,d="on"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return "#"+j.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,"")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&& !d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||l(a());n()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain="'+t+'"<\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);(function($){var o=$('<b/>');$.subscribe=function(topic,fn){function wrapper(){return fn.apply(this,Array.prototype.slice.call(arguments,1));};wrapper.guid=fn.guid=fn.guid||($.guid?$.guid++ :$.event.guid++);o.bind(topic,wrapper);};$.unsubscribe=function(){o.unbind.apply(o,arguments);};$.publish=function(){o.trigger.apply(o,arguments);};})(jQuery);(function(jQuery){jQuery.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":"\"",",":"<",".":">","/":"?","\\":"|"}};function keyHandler(handleObj){if(typeof handleObj.data!=="string"){return;}var origHandler=handleObj.handler,keys=handleObj.data.toLowerCase().split(" ");handleObj.handler=function(event){if(this!==event.target&&(/textarea|select/i.test(event.target.nodeName)||event.target.type==="text")){return;}var special=event.type!=="keypress"&&jQuery.hotkeys.specialKeys[event.which],character=String.fromCharCode(event.which).toLowerCase(),key,modif="",possible={};if(event.altKey&&special!=="alt"){modif+="alt+";}if(event.ctrlKey&&special!=="ctrl"){modif+="ctrl+";}if(event.metaKey&& !event.ctrlKey&&special!=="meta"){modif+="meta+";}if(event.shiftKey&&special!=="shift"){modif+="shift+";}if(special){possible[modif+special]=true;}else{possible[modif+character]=true;possible[modif+jQuery.hotkeys.shiftNums[character]]=true;if(modif==="shift+"){possible[jQuery.hotkeys.shiftNums[character]]=true;}}for(var i=0,l=keys.length;i<l;i++){if(possible[keys[i]]){return origHandler.apply(this,arguments);}}};};jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:keyHandler};});})(jQuery); (function($){$.dropdown=function(DD_oElement,options){var DD_oBase=this;var $DD_oElement=DD_oBase.$DD_oElement=$(DD_oElement);DD_oBase.DD_oElement=DD_oElement;DD_oBase.$DD_oElement.data("dropdown",DD_oBase);if(typeof options==="function"){options={command:options};}DD_oBase.options=$.extend({},$.dropdown.defaultOptions,options);};$.dropdown.prototype.show=function(){this.$DD_oElement.addClass("show_dropdown");};$.dropdown.prototype.hide=function(){this.$DD_oElement.removeClass("show_dropdown");};$.dropdown.prototype.toggle=function(showOrHide){this.$DD_oElement.toggleClass("show_dropdown",showOrHide);};$.dropdown.prototype.isHidden=function(){this.$DD_oElement.hasClass("show_dropdown");};$.dropdown.prototype.label=function(body){this.$DD_oElement.find(this.options.acc).html(body);};$.dropdown.defaultOptions={useLabel:false,acc:"> a",adc:"click",ada:"li[data-command]",adD:"click",command:$.noop,acN:$.noop,adm:$.noop,stayOpen:false};$.fn.dropdown=function(options){return this.each(function(){var DD_oBase=new $.dropdown(this,options),opts=DD_oBase.options;var $DD_oSelf=$(this);$DD_oSelf.find(opts.acc).bind(opts.adc,function(e){opts.acN.call($DD_oSelf);DD_oBase.toggle();opts.adm.call($DD_oSelf);});$DD_oSelf.delegate(opts.ada,opts.adD,function(e){opts.command.call($DD_oSelf,$(this).data("command"),this,e);if(opts.useLabel){DD_oBase.label(this.innerHTML);}DD_oBase.hide();});$DD_oSelf.mouseleave(function(e){if(opts.stayOpen===false){DD_oBase.hide();}});});};})(jQuery); (function($){$.zC=function(elm,Gz){var base=this;var $elm=base.$elm=$(elm);base.elm=elm;base.Gz=$.extend({},$.zC.afT,Gz);var XC=null;var $PlaceHolderDiv=null;var UL=null;if(XC=$elm.attr('placeholderdiv')){$PlaceHolderDiv=$('#'+XC);}else{UL=$elm.attr('placeholdertext');aaT=$elm.attr('placeholderfont');$PlaceHolderDiv=jQuery('<div><span style="'+aaT+'">'+UL+'</span></div>');switch($elm.css('position')){case 'static':{$PlaceHolderDiv.css('position','relative');$PlaceHolderDiv.css('left','-'+$elm.width()+'px');$PlaceHolderDiv.css('display','inline');}break;case 'absolute':{$PlaceHolderDiv.css('position','absolute');$PlaceHolderDiv.css('top',$elm.css('top'));$PlaceHolderDiv.css('left',$elm.css('left'));$PlaceHolderDiv.css('width',$elm.css('width'));$PlaceHolderDiv.css('height',$elm.css('height'));$PlaceHolderDiv.css('align','left');$PlaceHolderDiv.css('vertical-align','bottom');}break;}$elm.after($PlaceHolderDiv);}$elm.data('PlaceHolderDiv',$PlaceHolderDiv);var zc=null;switch(typeof(zc=$elm.val())){case 'string':{if(zc!==''){base.Gy();}}break;}};$.zC.afT={afa:1.0,ahg:250,ajD:0.5,agR:250,acw:0.0,aiD:250};$.zC.prototype.Jc=function(){this.Jb(this.Gz.afa,this.Gz.ahg);};$.zC.prototype.GE=function(){this.Jb(this.Gz.ajD,this.Gz.agR);};$.zC.prototype.Gy=function(){this.Jb(this.Gz.acw,this.Gz.aiD,true);};$.zC.prototype.Jb=function(uz,UD,aoU){var self=this;if(typeof UD==='undefined'){UD=250;}if(uz>0&& !(self.$elm.is(":visible"))){switch(self.$elm.css('position')){case 'static':self.$elm.data('PlaceHolderDiv').css('display','inline');break;case 'absolute':self.$elm.data('PlaceHolderDiv').show();break;}}this.$elm.data('PlaceHolderDiv').fadeTo(UD,uz,function(){if(aoU){self.$elm.data('PlaceHolderDiv').hide();}});};$.zC.ahN=function(Gd){var zc=null;var aB=Gd.target;var $Element=$(aB);switch(typeof(zc=$Element.val())){case 'string':{if(zc!==''){$Element.Gy();return;}}break;}$Element.Jc();};$.zC.aiL=function(Gd){var zc=null;var aB=Gd.target;var $Element=$(aB);switch(typeof(zc=$Element.val())){case 'string':{if(zc!==''){$Element.Gy();return;}}break;}$Element.GE();};$.zC.aix=function(Gd){var zc=null;var aB=Gd.target;var $Element=$(aB);switch(typeof(zc=$Element.val())){case 'string':{if(zc!==''){$Element.Gy();return;}}break;}$Element.GE();};$.fn.zC=function(options){return this.each(function(){var base=new $.zC(this,options);var $self=$(this);$self.blur(function(){var zc=null;switch(typeof(zc=$self.val())){case 'string':{if(zc!==''){base.Gy();return;}}break;}base.Jc();});$self.focus(function(){var zc=null;switch(typeof(zc=$self.val())){case 'string':{if(zc!==''){base.Gy();return;}}break;}base.GE();});$self.keyup(function(){var zc=null;switch(typeof(zc=$self.val())){case 'string':{if(zc!==''){base.Gy();return;}}break;}base.GE();});$self.data('PlaceHolderDiv').click(function(){$self.focus();});});};})(jQuery);aiR=function(aB){if(typeof aB==='undefined'){$("input[type='text'],input[type='password']").filter('[placeholderdiv]').each(function(eC,aB){if(typeof aB==='undefined'){return;}$(aB).zC();});$("input[type='text'],input[type='password']").filter('[placeholdertext]').each(function(eC,aB){if(typeof aB==='undefined'){return;}$(aB).zC();});return;}}; 