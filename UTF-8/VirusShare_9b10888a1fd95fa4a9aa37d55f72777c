webpackJsonp([87],{475:function(e,t,a){e.exports=a.p+"images/flight-left.svg"},529:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}a(530);var i=a(6),n=r(i),o=a(298),s=r(o),l=a(300),d=r(l),c=a(395),p=r(c),f=n.default.createClass({displayName:"ModalDialog",propTypes:{cls:n.default.PropTypes.string,style:n.default.PropTypes.object,onClose:n.default.PropTypes.func,height:n.default.PropTypes.number,isOpen:n.default.PropTypes.bool,close:n.default.PropTypes.func},getInitialState:function(){return{isOpen:this.props.isOpen||!1}},registered:!1,backHooker:function(){var e=this;return setTimeout(function(){return e.close()},0),!1},componentWillUnmount:function(){this.registered=!1,p.default.unRegister(this.backHooker,this)},componentWillReceiveProps:function(e){this.setState({isOpen:e.isOpen}),!this.props.isOpen&&e.isOpen?(this.registered=!0,p.default.register(this.backHooker,this)):this.props.isOpen&&!e.isOpen&&(this.registered=!1,p.default.unRegister(this.backHooker,this)),e.isOpen&&(0,d.default)("html").addClass("fy-html-unscroll")},componentDidMount:function(){var e=this.refs.self;this.PcSize(e)},createInnerBox:function(){var e=this.props,t=s.default.extend({},e.style),a=n.default.createElement("div",{onClick:function(e){e.stopPropagation()},onTouchMove:function(e){e.stopPropagation()},style:t,className:e.cls?e.cls:"fy-modal-dialog-inner-box fy-flex-column"},e.children);return a},close:function(){this.registered=!1,p.default.unRegister(this.backHooker,this);var e=this;(0,d.default)("html").removeClass("fy-html-unscroll"),setTimeout(function(){e.setState({isOpen:!1}),e.onClose(),e.props.close&&e.props.close()},300)},onClose:function(){(0,d.default)("html").removeClass("fy-html-unscroll"),this.props.onClose&&this.props.onClose()},PcSize:function(e){if("pc"===window.terminal){var t=e.style,a=.89*document.body.clientHeight,r=.75*a;t.width=r+"px",t.height=a+"px",t.position="fixed",t.left="26.35%",t.left="50%",t.marginLeft="-"+r/2+"px",t.bottom="5.5%"}},onTouchMove:function(e){e.preventDefault(),this.PcSize()},render:function(){var e=this.props,t=this.state,a={display:t.isOpen?"":"none",height:e.height?e.height+"rem":"100%"};return t.isOpen&&!this.registered&&(this.registered=!0,p.default.register(this.backHooker,this)),n.default.createElement("div",null,n.default.createElement("div",{onTouchMove:this.onTouchMove,ref:"self",className:"fy-modal-dialog",style:a,onClick:this.close},this.createInnerBox()))}});e.exports=f},530:function(e,t,a){var r=a(531);"string"==typeof r&&(r=[[e.id,r,""]]);a(305)(r,{});r.locals&&(e.exports=r.locals)},531:function(e,t,a){t=e.exports=a(304)(),t.push([e.id,".fy-modal-dialog{position:fixed;z-index:9999;background-color:rgba(0,0,0,.5);width:100%;height:100%;bottom:0;left:0;overflow:hidden}.fy-modal-dialog-inner-box{width:100%;height:50%;background-color:#fff;position:absolute;bottom:0;z-index:901}",""])},661:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(6),n=r(i);a(662);var o=a(311),s=r(o),l=a(306),d=r(l),c=a(297),p=r(c),f=a(363),u=r(f),m=a(298),h=r(m),g=a(335),y=a(299),w=r(y),b=a(664),k=r(b),v=a(665),x=r(v),P=a(666),N=r(P),I=a(667),C=r(I),E=a(307),T=r(E),S=a(359),O=(r(S),a(499)),M=r(O),_=n.default.createClass({displayName:"PaymentsComponent",propTypes:{orderType:n.default.PropTypes.string,orderNo:n.default.PropTypes.string,paymentNo:n.default.PropTypes.string,isFree:n.default.PropTypes.bool,isOld:n.default.PropTypes.bool,successbackRouter:n.default.PropTypes.string,alipayReturnUrl:n.default.PropTypes.string,wxReturnUrl:n.default.PropTypes.string,wxFailedUrl:n.default.PropTypes.string,wxCancelUrl:n.default.PropTypes.string,successCallback:n.default.PropTypes.func,errorCallback:n.default.PropTypes.func,closeDialog:n.default.PropTypes.func,onClickPayWay:n.default.PropTypes.func},getInitialState:function(){return{allPayWays:[{payType:"AliPay",icon:k.default,iconColor:"#1CCAF1",text:s.default.getString("PAY_ZHIFUBAO")},{payType:"WePay",icon:C.default,iconColor:"#0FCF1A",text:s.default.getString("PAY_WEIXIN")},{payType:"UnionPay",icon:x.default,text:s.default.getString("YINLIAN_SHOUJI")},{payType:"Yiwangtong",icon:N.default,text:s.default.getString("PAY_YIWANGTONG")},{payType:"UnionH5Pay",icon:x.default,text:s.default.getString("YINLIAN_SHOUJI")}]}},componentWillMount:function(){var e=this;M.default.get(["paytypes"],function(t,a){!t&&a&&!function(){for(var t=a.paytypes?a.paytypes.list:[],r=e.state.allPayWays,i=function(e){h.default.extend(t[e],r.filter(function(a){return t[e].val==a.payType})[0])},n=0;n<t.length;n++)i(n);e.setState({payWays:t})}()},!1,!0)},showOrNot:function(e){if(window.isNative){if("UnionH5Pay"==e)return{display:"none"}}else{if(browser&&browser.versions&&browser.versions.weixin&&"AliPay"==e)return{display:"none"};if("wx"==window.platform||"web"==window.platform){if("UnionPay"==e||"Yiwangtong"==e)return{display:"none"};if("web"==window.platform&&"WePay"==e)return{display:"none"}}}return{}},render:function(){var e=this,t=this,a=this.state.payWays||[],r=n.default.createElement("div",{className:"hna-pay-ways"},a.map(function(a){return n.default.createElement("div",{className:"pay-way",onClick:function(){return t.toPayByWay(a.payType)},style:e.showOrNot(a.payType)},n.default.createElement("div",{className:"logo"},n.default.createElement("div",{className:"fy-content-r"},n.default.createElement(u.default,{className:"logoIcon",path:a.icon,fill:a.iconColor}))),n.default.createElement("div",null,n.default.createElement("div",{className:"fy-content-center-v"},n.default.createElement("div",{style:{width:"100%"}},n.default.createElement("div",{className:"font_14"},a.name,n.default.createElement("span",{className:"pay-way-title font_10",style:{display:a.title?"":"none"}},a.title)),n.default.createElement("div",{className:"pay-way-detail"},n.default.createElement("span",{className:"font_10"},a.detail))))))}));return r},toPayByWay:function(e){var t=this;t.props.closeDialog&&"function"==typeof t.props.closeDialog&&t.props.closeDialog(),t.props.onClickPayWay&&"function"==typeof t.props.onClickPayWay&&t.props.onClickPayWay();var a={};if(a.orderType=this.props.orderType,this.props.paymentNo&&""!==this.props.paymentNo?a.paymentNo=this.props.paymentNo:a.ordOrderNo=this.props.orderNo,"AliPay"==e)window.isNative?(a.optype="ALIPAY",this.props.dispatch((0,g.payByZhifuBaoPlugin)(a,this.props.successCallback,!1,this.props.errorCallback))):(a.optype="ALIPAYWAP",a.returnUrl=this.props.alipayReturnUrl,this.props.dispatch((0,g.payByZhifuBaoPlugin)(a,this.props.successCallback,!0,this.props.errorCallback)));else if("WePay"==e){if(window.isNative)a.optype="WECHAT",this.props.dispatch((0,g.payByWXByPlugin)(a,this.props.successCallback,this.props.errorCallback));else if("wx"==window.platform||"WX"==window.platform){var r=d.default.get("hna_cache_wechat_openid");a.optype="WECHATJS",a.openId=r;var i=this.props.orderNo,n="GAISHENG"===a.orderType?"change":this.props.location.query.from||"book";a.returnUrl=p.default.getAPPHost()+"index.html?singleLink=unionh5pay&orderNo="+i+"&wechatNo="+r+"&targetUrl="+this.props.successbackRouter+"&isFree="+(this.props.isFree?"true":"false")+"&isOld="+(this.props.isOld?"true":"false")+"&from="+n,a.failedUrl=p.default.getAPPHost()+"index.html",a.cancelUrl=p.default.getAPPHost()+"index.html",this.props.dispatch((0,g.payByWX)(a,null,this.props.errorCallback))}}else if("UnionPay"==e||"Yiwangtong"==e){var o={};"UnionPay"==e?(a.optype="UNIONPAY",o={payData:a,type:3}):"Yiwangtong"==e&&(a.optype="CMBPAY",o={payData:a,type:2}),T.default.payByTP({params:o,success:function(e){e?(e=JSON.parse(e),e.success&&t.props.successCallback&&"function"==typeof t.props.successCallback&&t.props.successCallback()):t.props.errorCallback&&"function"==typeof t.props.errorCallback&&t.props.errorCallback()},error:function(e){t.props.errorCallback&&"function"==typeof t.props.errorCallback&&t.props.errorCallback()}})}else if("UnionH5Pay"==e){a.optype="UNIONH5PAY";var s=window.location.href;s.indexOf("#")!=-1&&(s=s.slice(0,s.indexOf("#")));var l=this.props.orderNo,c=this.props.otherParams?this.props.otherParams.price:"",f="GAISHENG"===a.orderType?"change":this.props.location.query.from||"book";a.returnUrl=p.default.getAPPHost()+"index.html?singleLink=unionh5pay&orderNo="+l+"&targetUrl="+this.props.successbackRouter+"&price="+c+"&isFree="+(this.props.isFree?"true":"false")+"&isOld="+(this.props.isOld?"true":"false")+"&from="+f;var u=this.props.dispatch((0,g.unionH5Pay)(a));u.then(function(e){e&&e.success&&e.data&&e.data.unionPay&&e.data.unionPay.redirectUrl&&(window.location.href=e.data.unionPay.redirectUrl)}).catch(function(e){e&&e.errorMessage?(0,w.default)(e.errorMessage):(0,w.default)("抱歉，你的订单处理失败！"),t.props.errorCallback&&"function"==typeof t.props.errorCallback&&t.props.errorCallback()})}}});e.exports=_},662:function(e,t,a){var r=a(663);"string"==typeof r&&(r=[[e.id,r,""]]);a(305)(r,{});r.locals&&(e.exports=r.locals)},663:function(e,t,a){t=e.exports=a(304)(),t.push([e.id,".hna-pay-ways{position:absolute;bottom:0;left:0;width:100%;background-color:#fff}.hna-pay-ways .pay-way{width:100%;min-height:2.5rem;padding:.6875rem 0;border-top:1px solid #ededed;font-size:0;position:relative}.hna-pay-ways .pay-way>div{display:inline-block;height:100%}.hna-pay-ways .pay-way .logo{width:42%;text-align:right}.hna-pay-ways .pay-way .logo>div{height:100%}.hna-pay-ways .pay-way .logo .logoIcon{width:1.8rem;height:1.8rem;margin-right:1rem;vertical-align:middle}.hna-pay-ways .pay-way>div:last-child{width:58%;font-size:.875rem;height:100%;color:#4a4a4a;position:relative}.hna-pay-ways .pay-way>div:last-child>div{height:100%;width:100%}.hna-pay-ways .pay-way>div:last-child>div .pay-way-title{padding:0 5px;color:#e1514c;border:1px solid #e1514c;border-radius:2px;box-sizing:border-box;margin-left:.8rem}.hna-pay-ways .pay-way>div:last-child>div .pay-way-detail{color:#9b9b9b}.hna-pay-ways .pay-way>div:last-child>div .pay-way-detail .font_10{font-weight:300}",""])},664:function(e,t,a){e.exports=a.p+"images/pay_zhifubao.svg"},665:function(e,t,a){e.exports=a.p+"images/icon_yinlian.svg"},666:function(e,t,a){e.exports=a.p+"images/icon_yiwangtong.svg"},667:function(e,t,a){e.exports=a.p+"images/pay_weixin.svg"},1198:function(e,t,a){var r=a(1199);"string"==typeof r&&(r=[[e.id,r,""]]);a(305)(r,{});r.locals&&(e.exports=r.locals)},1199:function(e,t,a){t=e.exports=a(304)(),t.push([e.id,".hna-prf,.hna-prf .hna-prf-layout{background-color:#f5f5f5}.hna-prf{width:100%}.hna-prf .orderNum{padding-left:2.75rem;height:3.25rem;margin-left:-1.5rem;width:140%;background:#FFF;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf .middleMsgItem{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.hna-prf .ticketStatus{padding:.1rem .2rem;border:1px solid #e1514c;border-radius:3px;color:#e1514c}.hna-prf .segType{padding:.1rem;background:#000;color:#FFF}.hna-prf .segType-flight{transform:rotate(0);-webkit-transform:rotate(0)}.hna-prf .segType-flight-other{transform:rotate(180deg);-webkit-transform:rotate(180deg)}.hna-prf-layout .refundItem{background-color:#FFF;margin-top:.56rem;padding:.6125rem 1.56rem 1.25rem 1.25rem}.hna-prf-layout .refundItem .cabinMsg{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:.75rem}.hna-prf-layout .refundItem .flightPlace{margin-top:.5rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf-layout .refundItem .startPlace{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1}.hna-prf-layout .refundItem .middleMsg{-webkit-box-flex:2;-webkit-flex-grow:2;flex-grow:2;text-align:center;color:#9B9B9B}.hna-prf-layout .refundItem .endPlace{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;text-align:right}.hna-prf-layout .cityPadding{margin-left:.3rem}.hna-prf-layout .fc-padding{margin-left:.3rem;color:#e1514c}.hna-prf-layout .cutLine{background-color:#ededed;height:1px;margin-top:1rem;margin-bottom:1.25rem}.hna-prf-layout .refundItem .backCutLine{margin-top:.75rem;border:1px dashed #eee}.hna-prf-layout .refundItem .middleMsgCutLineDiv{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf-layout .refundItem .middleMsgCutLine{background-color:#9b9b9b;height:1px;margin-top:.25rem;margin-bottom:.25rem;width:100%}.hna-prf-layout .refundItem .circle{width:.25rem;height:.25rem;background-color:#FFF;border:.0625rem solid #9b9b9b;-webkit-border-radius:20rem}.hna-prf-layout .refundItem .checkboxDiv{-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1}.hna-prf-layout .refundItem .passengerDiv{margin-top:.75rem;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf-layout .contact{background-color:#FFF;margin-top:.56rem;display:-webkit-box;display:-webkit-flex;display:flex;padding:.6125rem .8rem .6125rem 1.25rem}.hna-prf-layout .contact span:nth-child(2){margin-left:3.5rem}.hna-prf-layout .refundNotice{margin-top:.5rem;height:1.2rem;display:-webkit-box;display:-webkit-flex;display:flex;background:#fff;padding:.875rem 1.25rem}.hna-prf-layout .notice-text{border-bottom:1px solid #323232}.hna-prf-layout .description{background-color:#FFF;margin-top:.5rem;padding:1.75rem .375rem .68rem}.hna-prf-layout .reason{padding-left:1.125rem;padding-right:1rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.hna-prf-layout .reason-select{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf-layout .descAreaDiv{padding-right:.625rem}.hna-prf-layout .descAreaDiv textarea{font-size:.875rem;font-weight:300}.hna-prf-layout .descArea{height:3.43rem;width:100%;border:none;padding-top:.5rem;padding-left:1.125rem;font-weight:300;font-weight:.875rem}.hna-prf-layout .price-detail{background-color:#FFF;margin-top:.5rem;padding:.625rem .675rem 1.25rem .375rem}.hna-prf-layout .price-detail-title{background-color:#FFF;display:-webkit-box;display:-webkit-flex;display:flex;margin-bottom:.6rem;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.hna-prf-layout .price-detail-content{background-color:#FFF;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:.2rem}.hna-prf-layout .price-detail-content-item{display:-webkit-box;display:-webkit-flex;display:flex}.hna-prf-layout .adult-child{width:5rem;text-align:right}.hna-prf .refund-button{width:100%;bottom:0;height:2.75rem;margin-top:.4375rem;background:#e1514c;color:#FFF;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf .point-refund-button{margin-top:2.3rem;width:70%;margin-left:15%;font-size:1rem}.hna-prf .defaultText{text-align:center}.hna-prf .downPic,.hna-prf .refund-pay-detail{width:1.18rem;height:1.18rem}.hna-prf .select{height:2.5rem;position:relative;background-color:#ededed}.hna-prf .select>div{position:absolute;height:2.5rem;right:1.25rem;top:0;line-height:2.5rem;color:#e1514c}.hna-prf .reason-item>div{height:2.75rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf .refund-price-detail{margin-top:.5625rem;background-color:#fff;height:5.18rem;padding-left:1.31rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.hna-prf .refund-price-total{background-color:#fff;height:3rem;margin-top:.5625rem;padding-right:1.43rem;text-align:right}.hna-prf .refund-price-total>span{position:relative;top:20%}.hna-prf .day-gap-wrapper{width:1.2rem;height:100%;position:relative}.hna-prf .day-gap{width:1.1rem;height:1.1rem;border-radius:50%;border:1px solid #444D54;line-height:1.2rem;text-align:center;float:left;vertical-align:middle;position:absolute;top:0;left:0;margin-left:.5rem;margin-top:-.875rem;-webkit-transform:translate3d(0,-75%,0);transform:translate3d(0,-75%,0)}.hna-prf .pay-ways{position:absolute;bottom:0;left:0;width:100%;background-color:#fff}.hna-prf .pay-ways .pay-way{width:100%;height:2.75rem;line-height:2.75rem;border-top:1px solid #ededed;font-size:0}.hna-prf .pay-ways .pay-way>div{display:inline-block}.hna-prf .pay-ways .pay-way .logo{width:45%;text-align:right}.hna-prf .pay-ways .pay-way .logo .logoIcon{width:1.8rem;height:1.8rem;margin-right:1rem;vertical-align:middle}.hna-prf .pay-ways .pay-way>div:last-child{width:55%;font-size:.875rem;color:#4a4a4a}",""])},1202:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.PointOrderRefundModel,a=e.PointBookPayModel,r=e.OrderDetailModel;return{PointBookPayModel:a,PointOrderRefundModel:t,OrderDetailModel:r}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(6),s=r(o),l=a(248),d=a(311),c=r(d),p=a(185);a(1198);var f=(a(317),a(330),a(335)),u=a(297),m=r(u),h=a(299),g=r(h),y=a(506),w=r(y),b=a(529),k=r(b),v=a(363),x=r(v),P=a(310),N=r(P),I=a(475),C=r(I),E=a(307),T=r(E),S=a(306),O=r(S),M=a(440),_=r(M),D=a(661),F=r(D),A=a(548),L=r(A),R=s.default.createClass({displayName:"TicketMsgItemView",getFlightMsg:function(){var e=this.props.orderItem,t=new Object;if(t.flightNo=e.segment.flightNo,t.airline=e.segment.airline,t.dep=e.segment.dep,t.arr=e.segment.arr,t.depDateTime=e.segment.depDateTime,t.arrDateTime=e.segment.arrDateTime,t.cabin=e.segment.cabin,t.depCity=e.segment.depCity,t.arrCity=e.segment.arrCity,t.depShowDate=e.segment.orderItem.startDate,t.isChange=e.segment.orderItem.isChange,null!=t.depShowDate&&t.depShowDate.length>0){var a=t.depShowDate.split("-");t.depShowDate=c.default.getString("DATE_FORMAT_MD").format(a[1],a[2])}return t.orderItem=e,t},initLayout:function(){var e=this.props.orderItem,t=e.segment.orderItem.startDate,a=e.segment.orderItem.endDate,r=N.default.DateDiff(a,t,"-");r=Math.round(r);var i="none";r>0&&(i="block");var n=s.default.createElement("div",null,s.default.createElement("div",null,s.default.createElement("span",{className:"ticketStatus font_10"},e.segment.orderItem.ticketState)),s.default.createElement("div",{className:"flightPlace"},s.default.createElement("div",{className:"startPlace"},s.default.createElement("p",{className:"font_24"},e.segment.orderItem.startTime),s.default.createElement("p",{className:"font_14"},e.segment.orderItem.startPlace)),s.default.createElement("div",{className:"middleMsg"},s.default.createElement(U,this.props)),s.default.createElement("div",{className:"endPlace"},s.default.createElement("p",{className:"font_24"},e.segment.orderItem.endTime),s.default.createElement("p",{className:"font_14"},e.segment.orderItem.endPlace)),s.default.createElement("div",{className:"day-gap",style:{display:i}},"+",r)),s.default.createElement("div",{className:"backCutLine"}),s.default.createElement("div",{className:"cabinMsg font_14"},s.default.createElement("div",null,s.default.createElement("span",{style:{display:"G"==e.segment.orderItem.segType?"inline":"none"}},s.default.createElement(x.default,{className:"segType-flight",path:C.default,fill:"#e1514c"})),s.default.createElement("span",{style:{display:"G"==e.segment.orderItem.segType?"none":"inline"}},s.default.createElement(x.default,{className:"segType-flight-other",path:C.default,fill:"#e1514c"})),s.default.createElement("span",{style:{marginLeft:"1.56rem"}},e.segment.orderItem.startDate),s.default.createElement("span",{style:{marginLeft:"2rem"},className:"fc-padding"},e.segment.orderItem.airline,e.segment.orderItem.flightNo),s.default.createElement("span",{className:"fc-padding"},"|"),s.default.createElement("span",{className:"fc-padding"},e.segment.orderItem.cabin+c.default.getString("LABEL_CANBIN")))));return n},render:function(){return this.initLayout()}}),U=s.default.createClass({displayName:"MiddleMsgItemView",initLayout:function(){var e=this.props.orderItem.segment.orderItem,t=e.durTime,a=e.stop,r=c.default.getString("THROUGH");null!=e.durTime&&e.durTime.split(":").length>1&&(t=e.durTime.split(":")[0]+"h"+e.durTime.split(":")[0]+"m"),0!=a&&(r=c.default.getString("PASSING_POINT"));var i=s.default.createElement("div",{className:"middleMsgItem font_12"},s.default.createElement("p",null,t),s.default.createElement("div",{className:"middleMsgCutLineDiv"},s.default.createElement("div",{className:"circle"}),s.default.createElement("div",{className:"middleMsgCutLine"}),s.default.createElement("div",{className:"circle"})),s.default.createElement("p",null,r));return i},render:function(){return this.initLayout()}}),H=s.default.createClass({displayName:"PassengerMsgItemView",onSelectPassenger:function(e,t){var a=this;setTimeout(function(){return a.timeOutSelectHandle(e,t)},100)},_initPassenger:function(){var e=this.props.PointOrderRefundModel,t=e.get("saveSelect"),a=this;if(null!=t&&0!=t.length){t=JSON.parse(t);var r=this.props.orderItem.passenger.selectPassengerMsg;r.map(function(e,r){for(var i="checkBoxField"+r,n=0;n<t.length;n++){var o=t[n];if(o.idNo==e.idNo&&o.segIndex==e.segIndex){a.refs[i].setStatus(!0);var s=new Array;s.push(e)}}})}},componentDidMount:function(){},timeOutSelectHandle:function(e,t){var a=this.props.PointOrderRefundModel,r=this.refs[e].isChecked(),i=new Array;i.push(t),r?2==a.get("orderType")&&this.props.interChecked(!0,t):2==a.get("orderType")&&((0,g.default)(c.default.getString("INTER_REFUND")),this.props.interChecked(!1,t))},checkedSomeOne:function(e){var t=this,a=this.props.orderItem.passengers,r=new Object;return a.map(function(a,i){var n="checkBoxField"+i;t.refs[n].isChecked()||a.idNo!=e.idNo?t.refs[n].isChecked()&&a.idNo==e.idNo&&(a.segIndex!=e.segIndex&&t.refs[n].setStatus(!1),r=a):(a.segIndex!=e.segIndex&&t.refs[n].setStatus(!0),r=a)}),r},getPassengerMsg:function(){var e=this,t=this.props.orderItem.passengers,a=new Array,r=new Array;t.map(function(t,i){var n="checkBoxField"+i;e.refs[n];e.refs[n].isChecked()?a.push(t):r.push(t)});var i=new Object;return i.selectPassengerMsg=a,i.upnSelectPassengerMsg=r,i},isChecked:function(){var e=this,t=!1,a=this.props.orderItem.passengers;return a.map(function(a,r){var i="checkBoxField"+r;e.refs[i].isChecked()&&(t=!0)}),t},initLayout:function(){var e=this.props.orderItem.passenger.selectPassengerMsg,t=s.default.createElement("div",null,e.map(function(t,a){var r=e[a],i=new Object,n="none";if(a<e.length-1&&(i=e[a+1],n="inline-flex"),a%2==0){var o=s.default.createElement("div",{className:"passengerDiv font_6"},s.default.createElement("div",{className:"checkboxDiv"},s.default.createElement("span",{className:"cityPadding font_14"},r.nameCn,r.nameG)),s.default.createElement("div",{className:"checkboxDiv",style:{display:n}},s.default.createElement("span",{className:"cityPadding font_14"},i.nameCn,i.nameG)));return o}}));return t},render:function(){return this.initLayout()}}),B=s.default.createClass({displayName:"RefundItemView",getFlightMsg:function(){var e=new Object;return this.refs.passengerMsgItemView.isChecked()&&(e=this.refs.ticketMsgItemView.getFlightMsg()),e},_interChecked:function(e){var t=this.refs.passengerMsgItemView.checkedSomeOne(e);return t},_initPassenger:function(){this.refs.passengerMsgItemView._initPassenger()},getPassengerMsg:function(){var e=new Array;return this.refs.passengerMsgItemView.isChecked()&&(e=this.refs.passengerMsgItemView.getPassengerMsg()),e},initLayout:function(){var e=s.default.createElement("div",{className:"refundItem"},s.default.createElement(R,n({ref:"ticketMsgItemView"},this.props)),s.default.createElement("div",{className:"backCutLine"}),s.default.createElement(H,n({ref:"passengerMsgItemView"},this.props)));return e},render:function(){return this.initLayout()}}),W=s.default.createClass({displayName:"OrderNoView",getInitialState:function(){return{isShowDialog:!1,params:"",content:"",isShowSinDialog:!1,singleText:"",cutClick:"1"}},closeConfirmDialog:function(){this.setState({isShowDialog:!1})},showConfirmDialog:function(e){this.setState({isShowDialog:!0,params:e})},initLayout:function(){var e=this.props.PointOrderRefundModel,t=this,a=s.default.createElement("div",null,s.default.createElement("div",{style:{textAlign:"center"}},c.default.getString("POINT_REFUND_CONFIRM"))),r=s.default.createElement("div",{className:"font_12 orderNum"},s.default.createElement("span",null,c.default.getString("ORDERNO_TEXT"),"："),s.default.createElement("span",null,e.get("orderNo")),s.default.createElement(w.default,{title:c.default.getString("TIP_TEXT"),content:a,buttons:[{text:c.default.getString("CONFIRM_NO"),callBackFn:function(){t.closeConfirmDialog()}},{text:c.default.getString("CONFIRM_YES"),callBackFn:function(){t.props.refundCallback(t.state.params),t.closeConfirmDialog()}}],isShowDialog:this.state.isShowDialog,onClose:this.closeConfirmDialog,isShowTitle:!0}));return r},render:function(){return this.initLayout()}}),j=s.default.createClass({displayName:"RefundItemList",getRefundMsg:function(){var e=this,t=this.props.PointOrderRefundModel,a=t.get("selectList"),r=new Array,i=0;return a.map(function(t,a){var n=e.refs["refundItemView"+a].getFlightMsg(),o=e.refs["refundItemView"+a].getPassengerMsg();null!=o&&0!=o.length&&(r[i]=new Object,r[i].segment=n,r[i].passenger=o,i++)}),r},initPassenger:function(){var e=this.props.PointOrderRefundModel,t=this,a=e.get("orderList");a.map(function(e,a){t.refs["refundItemView"+a]._initPassenger()})},interChecked:function(e,t){var a=this.props.PointOrderRefundModel,r=a.get("orderList"),i=this,n=new Array;r.map(function(e,a){var r=i.refs["refundItemView"+a]._interChecked(t);n.push(r)});for(var o=new Array,s=0;s<n.length;s++){var l=n[s];0!=l.price.tktAmount&&o.push(l)}},initLayout:function(){var e=this.props.PointOrderRefundModel,t=e.get("selectMsg"),a=this,r=s.default.createElement("div",null,t.map(function(e,t){var r="refundItemView"+t;return s.default.createElement(B,n({ref:r,interChecked:a.interChecked,orderItem:e},a.props))}));return r},render:function(){return this.initLayout()}}),Y=s.default.createClass({displayName:"PriceDetail",initLayout:function(){var e=this.props.PointOrderRefundModel,t=e.get("payPrice"),a=s.default.createElement("div",null,s.default.createElement("div",{className:"refund-price-detail font_14"},s.default.createElement("div",null,s.default.createElement("p",null,c.default.getString("POINT_PAY_PRICE_DETAIL_1").format("¥"+t)),s.default.createElement("p",null,c.default.getString("POINT_PAY_PRICE_DETAIL_2").format(this.props.point+c.default.getString("POINT_BOOK_POINTTEXT")+"+¥"+this.props.price)),s.default.createElement("p",{className:"font_12"},c.default.getString("POINT_PAY_PRICE_DETAIL_3")))));return a},render:function(){return this.initLayout()}}),V=s.default.createClass({displayName:"PriceTotal",initLayout:function(){var e=this.props.PointOrderRefundModel,t=e.get("payPrice"),a=s.default.createElement("div",null,s.default.createElement("div",{className:"refund-price-total"},s.default.createElement("span",{className:"font_12"},c.default.getString("TOTAL_MONEY")," : "),s.default.createElement("span",{className:"font_24"},"¥"+t)));return a},render:function(){return this.initLayout()}}),z=(0,p.withRouter)(s.default.createClass({displayName:"PointOrderRefundPayView",mixins:[window.GlobalMixin],getInitialState:function(){return{haveSearch:!1,actionType:"",content:"",isShowModal:!1,modalHeight:"",payTax:0,payPoint:0,currentSystime:0}},componentWillMount:function(){window.AppTitle=c.default.getString("REFUND_TITLE_PAY"),this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave),T.default.isWXInstalled({success:function(e){e=JSON.parse(e),!e.success||"0"!==e.data.status&&0!==e.data.status||(window.isWXInstalled=!0)}})},routerWillLeave:function(e){var t=e.pathname;return!!this.state.canLeave||(this.leaveConfirm(function(){m.default.go(t)}),!1)},back:function(){var e=m.default.RouterHandle.routeHashs[m.default.RouterHandle.routeHashs.length-2];e||(e="/"),this.leaveConfirm(function(){m.default.back(e)})},leaveConfirm:function(e){var t=this;m.default.showConfirm({content:"确定要取消支付吗？",title:c.default.getString("WARN_TIPS_TITLE"),buttons:[{text:c.default.getString("CLOSE_DIALOG"),callBackFn:function(){}},{text:c.default.getString("CONFIRM_YES"),callBackFn:function(){t.setState({canLeave:!0}),setTimeout(function(){e&&"function"==typeof e&&e()},100)}}]})},componentDidMount:function(){var e=0,t=0,a=this.props.PointOrderRefundModel.get("selectMsg");if(a&&a.length){var r=!0,i=!1,n=void 0;try{for(var o,s=a[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,d=l.passenger.selectPassengerMsg.length;e+=l.segment.orderItem.spendPoint*d,t+=l.segment.orderItem.spendTax*d}}catch(e){i=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw n}}}this.setState({payTax:t,payPoint:e});var c=this;this.props.dispatch((0,f.checkLoginPromise)()).then(function(e){e&&e.systime&&c.setState({currentSystime:e.systime})}).catch(function(){rs&&rs.systime&&c.setState({currentSystime:rs.systime})})},shouldComponentUpdate:function(e,t){return this.state.currentSystime===t.currentSystime},componentWillUpdate:function(){m.default.RouterHandle.regComponent({path:this.props.location.pathname,component:this})},componentDidUpdate:function(){},checkCommit:function(){},zhiFuBaoSuccessCallback:function(){m.default.go("/order/PointRefundSuccess")},backPage:function(){return"/order/detail"},closeDialog:function(){this.state.dialogObj&&this.state.dialogObj.close()},showPayWays:function(){var e=this,t=this.props,a=t.PointOrderRefundModel,r=t.OrderDetailModel,i="TUIPIAO",o="",l="",d="",c="",p=!0,f=!1,u="/order/detail/",h=window.location.href,g={};h.indexOf("#")!=-1&&(h=h.slice(0,h.indexOf("#"))),g.orderNo=a.get("orderNo"),g.isFree=r.get("isFree")||!0,g.isOld=r.get("isOld")||!1;var y=e.backPage();h+="#"+y,"/order/detail"===y&&(h+="/"+JSON.stringify(g)),h+="?clearhash=false",o=h;var w=O.default.get("hna_cache_wechat_openid"),b="";window.location.port&&"80"!==window.location.port&&(b=":"+window.location.port);var k=window.location.protocol+"//"+window.location.hostname+b+window.location.pathname,v=k+"?wechatNo="+w+"&state=1#/order/list";l=v+"?success",d=v+"?failed",c=v+"?cancel";var x=s.default.createElement(F.default,n({},this.props,{orderType:i,orderNo:a.get("refundPayNo"),paymentNo:"",alipayReturnUrl:o,wxReturnUrl:l,wxFailedUrl:d,wxCancelUrl:c,successbackRouter:u,successCallback:function(){e.setState({canLeave:!0},function(){m.default.go("/order/PointRefundSuccess")})},dispatch:this.props.dispatch,closeDialog:this.closeDialog,isFree:p,isOld:f})),P={style:{height:"auto"},content:x},N=new _.default(P);this.setState({dialogObj:N}),N.show()},fillContent:function(e,t){this.setState({content:e,isShowModal:!0,modalHeight:t})},initLayout:function(){var e=this.props.PointOrderRefundModel,t=(e.get("haveSearch"),e.get("orderList"),this),a=s.default.createElement("div",{className:"hna-prf fy-flex-column"},s.default.createElement("div",{className:"hna-prf-layout fy-scrollable"},s.default.createElement(W,n({refundCallback:this.orderRefundPoint,ref:"orderNoView"},this.props)),s.default.createElement(j,n({},this.props,{ref:"refundItemList"})),s.default.createElement(Y,n({},this.props,{price:this.state.payTax,point:this.state.payPoint
})),s.default.createElement(V,this.props),s.default.createElement(L.default,{onClick:this.showPayWays,height:2.75,extendClass:"point-refund-button",buttonText:c.default.getString("LABEL_BOOK_PAY")})),s.default.createElement(k.default,{isOpen:this.state.isShowModal,style:{height:this.state.modalHeight},onClose:function(){t.setState({isShowModal:!1,content:""})}},this.state.content));return a},render:function(){return this.initLayout()}}));e.exports=(0,l.connect)(i)(z)}});