var Prototype={Version:"1.6.0",Browser:{IE:!(!window.attachEvent||window.opera),Opera:!!window.opera,WebKit:-1<navigator.userAgent.indexOf("AppleWebKit/"),Gecko:-1<navigator.userAgent.indexOf("Gecko")&&-1==navigator.userAgent.indexOf("KHTML"),MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)},BrowserFeatures:{XPath:!!document.evaluate,ElementExtensions:!!window.HTMLElement,SpecificElementExtensions:document.createElement("div").__proto__&&document.createElement("div").__proto__!==document.createElement("form").__proto__},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(b){return b}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);Prototype.Browser.WebKit&&(Prototype.BrowserFeatures.XPath=!1);var Class={create:function(){function f(){this.initialize.apply(this,arguments)}var e=null,h=$A(arguments);Object.isFunction(h[0])&&(e=h.shift());Object.extend(f,Class.Methods);f.superclass=e;f.subclasses=[];if(e){var g=function(){};g.prototype=e.prototype;f.prototype=new g;e.subclasses.push(f)}for(e=0;e<h.length;e++){f.addMethods(h[e])}f.prototype.initialize||(f.prototype.initialize=Prototype.emptyFunction);return f.prototype.constructor=f},Methods:{addMethods:function(l){var k=this.superclass&&this.superclass.prototype,r=Object.keys(l);Object.keys({toString:!0}).length||r.push("toString","valueOf");for(var q=0,p=r.length;q<p;q++){var o=r[q],n=l[o];if(k&&Object.isFunction(n)&&"$super"==n.argumentNames().first()){var m=n,n=Object.extend(function(b){return function(){return k[b].apply(this,arguments)}}(o).wrap(m),{valueOf:function(){return m},toString:function(){return m.toString()}})}this.prototype[o]=n}return this}}},Abstract={};Object.extend=function(e,d){for(var f in d){e[f]=d[f]}return e};Object.extend(Object,{inspect:function(d){try{return void 0===d?"undefined":null===d?"null":d.inspect?d.inspect():d.toString()}catch(c){if(c instanceof RangeError){return"..."}throw c}},toJSON:function(f){switch(typeof f){case"undefined":case"function":case"unknown":return;case"boolean":return f.toString()}if(null===f){return"null"}if(f.toJSON){return f.toJSON()}if(!Object.isElement(f)){var e=[],h;for(h in f){var g=Object.toJSON(f[h]);void 0!==g&&e.push(h.toJSON()+": "+g)}return"{"+e.join(", ")+"}"}},toQueryString:function(b){return $H(b).toQueryString()},toHTML:function(b){return b&&b.toHTML?b.toHTML():String.interpret(b)},keys:function(e){var d=[],f;for(f in e){d.push(f)}return d},values:function(e){var d=[],f;for(f in e){d.push(e[f])}return d},clone:function(b){return Object.extend({},b)},isElement:function(b){return b&&1==b.nodeType},isArray:function(b){return b&&b.constructor===Array},isHash:function(b){return b instanceof Hash},isFunction:function(b){return"function"==typeof b},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isUndefined:function(b){return"undefined"==typeof b}});Object.extend(Function.prototype,{argumentNames:function(){var b=this.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",").invoke("strip");return 1!=b.length||b[0]?b:[]},bind:function(){if(2>arguments.length&&void 0===arguments[0]){return this}var e=this,d=$A(arguments),f=d.shift();return function(){return e.apply(f,d.concat($A(arguments)))}},bindAsEventListener:function(){var e=this,d=$A(arguments),f=d.shift();return function(a){return e.apply(f,[a||window.event].concat(d))}},curry:function(){if(!arguments.length){return this}var d=this,c=$A(arguments);return function(){return d.apply(this,c.concat($A(arguments)))}},delay:function(){var e=this,d=$A(arguments),f=1000*d.shift();return window.setTimeout(function(){return e.apply(e,d)},f)},wrap:function(d){var c=this;return function(){return d.apply(this,[c.bind(this)].concat($A(arguments)))}},methodize:function(){if(this._methodized){return this._methodized}var b=this;return this._methodized=function(){return b.apply(null,[this].concat($A(arguments)))}}});Function.prototype.defer=Function.prototype.delay.curry(0.01);Date.prototype.toJSON=function(){return'"'+this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+'Z"'};var Try={these:function(){for(var g,f=0,l=arguments.length;f<l;f++){var k=arguments[f];try{g=k();break}catch(h){}}return g}};RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(b){return String(b).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(d,c){this.callback=d;this.frequency=c;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1000*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=!0,this.execute()}finally{this.currentlyExecuting=!1}}}});Object.extend(String,{interpret:function(b){return null==b?"":String(b)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,{gsub:function(g,f){var l="",k=this,h;for(f=arguments.callee.prepareReplacement(f);0<k.length;){(h=k.match(g))?(l+=k.slice(0,h.index),l+=String.interpret(f(h)),k=k.slice(h.index+h[0].length)):(l+=k,k="")}return l},sub:function(e,d,f){d=this.gsub.prepareReplacement(d);f=void 0===f?1:f;return this.gsub(e,function(b){return 0>--f?b[0]:d(b)})},scan:function(d,c){this.gsub(d,c);return String(this)},truncate:function(d,c){d=d||30;c=void 0===c?"...":c;return this.length>d?this.slice(0,d-c.length)+c:String(this)},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var b=RegExp(Prototype.ScriptFragment,"im");return(this.match(RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(a){return(a.match(b)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},escapeHTML:function(){var b=arguments.callee;b.text.data=this;return b.div.innerHTML},unescapeHTML:function(){var b=new Element("div");b.innerHTML=this.stripTags();return b.childNodes[0]?1<b.childNodes.length?$A(b.childNodes).inject("",function(d,e){return d+e.nodeValue}):b.childNodes[0].nodeValue:""},toQueryParams:function(d){var c=this.strip().match(/([^?#]*)(#.*)?$/);return c?c[1].split(d||"&").inject({},function(h,g){if((g=g.split("="))[0]){var l=decodeURIComponent(g.shift()),k=1<g.length?g.join("="):g[0];void 0!=k&&(k=decodeURIComponent(k));l in h?(Object.isArray(h[l])||(h[l]=[h[l]]),h[l].push(k)):h[l]=k}return h}):{}},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(b){return 1>b?"":Array(b+1).join(this)},camelize:function(){var f=this.split("-"),e=f.length;if(1==e){return f[0]}for(var h="-"==this.charAt(0)?f[0].charAt(0).toUpperCase()+f[0].substring(1):f[0],g=1;g<e;g++){h+=f[g].charAt(0).toUpperCase()+f[g].substring(1)}return h},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(d){var c=this.gsub(/[\x00-\x1f\\]/,function(f){var e=String.specialChar[f[0]];return e?e:"\\u00"+f[0].charCodeAt().toPaddedString(2,16)});return d?'"'+c.replace(/"/g,'\\"')+'"':"'"+c.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(!0)},unfilterJSON:function(b){return this.sub(b||Prototype.JSONFilter,"#{1}")},isJSON:function(){var b=this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(b)},evalJSON:function(a){var b=this.unfilterJSON();try{if(!a||b.isJSON()){return eval("("+b+")")}}catch(c){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())},include:function(b){return -1<this.indexOf(b)},startsWith:function(b){return 0===this.indexOf(b)},endsWith:function(d){var c=this.length-d.length;return 0<=c&&this.lastIndexOf(d)===c},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(d,c){return(new Template(this,c)).evaluate(d)}});(Prototype.Browser.WebKit||Prototype.Browser.IE)&&Object.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}});String.prototype.gsub.prepareReplacement=function(d){if(Object.isFunction(d)){return d}var c=new Template(d);return function(b){return c.evaluate(b)}};String.prototype.parseQuery=String.prototype.toQueryParams;Object.extend(String.prototype.escapeHTML,{div:document.createElement("div"),text:document.createTextNode("")});with(String.prototype.escapeHTML){div.appendChild(text)}var Template=Class.create({initialize:function(d,c){this.template=d.toString();this.pattern=c||Template.Pattern},evaluate:function(b){Object.isFunction(b.toTemplateReplacements)&&(b=b.toTemplateReplacements());return this.template.gsub(this.pattern,function(a){if(null==b){return""}var n=a[1]||"";if("\\"==n){return a[2]}var m=b,l=a[3],k=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;a=k.exec(l);if(null==a){return n}for(;null!=a;){var h=a[1].startsWith("[")?a[2].gsub("\\\\]","]"):a[1],m=m[h];if(null==m||""==a[3]){break}l=l.substring("["==a[3]?a[1].length:a[0].length);a=k.exec(l)}return n+String.interpret(m)}.bind(this))}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={},Enumerable={each:function(f,e){var h=0;f=f.bind(e);try{this._each(function(a){f(a,h++)})}catch(g){if(g!=$break){throw g}}return this},eachSlice:function(h,g,n){g=g?g.bind(n):Prototype.K;for(var m=-h,l=[],k=this.toArray();(m+=h)<k.length;){l.push(k.slice(m,m+h))}return l.collect(g,n)},all:function(e,d){e=e?e.bind(d):Prototype.K;var f=!0;this.each(function(a,c){f=f&&!!e(a,c);if(!f){throw $break}});return f},any:function(e,d){e=e?e.bind(d):Prototype.K;var f=!1;this.each(function(a,c){if(f=!!e(a,c)){throw $break}});return f},collect:function(e,d){e=e?e.bind(d):Prototype.K;var f=[];this.each(function(a,c){f.push(e(a,c))});return f},detect:function(e,d){e=e.bind(d);var f;this.each(function(a,c){if(e(a,c)){throw f=a,$break}});return f},findAll:function(e,d){e=e.bind(d);var f=[];this.each(function(a,c){e(a,c)&&f.push(a)});return f},grep:function(f,e,h){e=e?e.bind(h):Prototype.K;var g=[];Object.isString(f)&&(f=RegExp(f));this.each(function(b,a){f.match(b)&&g.push(e(b,a))});return g},include:function(d){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(d)){return !0}var c=!1;this.each(function(a){if(a==d){throw c=!0,$break}});return c},inGroupsOf:function(d,c){c=void 0===c?null:c;return this.eachSlice(d,function(a){for(;a.length<d;){a.push(c)}return a})},inject:function(e,d,f){d=d.bind(f);this.each(function(b,a){e=d(e,b,a)});return e},invoke:function(d){var c=$A(arguments).slice(1);return this.map(function(a){return a[d].apply(a,c)})},max:function(e,d){e=e?e.bind(d):Prototype.K;var f;this.each(function(a,c){a=e(a,c);if(void 0==f||a>=f){f=a}});return f},min:function(e,d){e=e?e.bind(d):Prototype.K;var f;this.each(function(a,c){a=e(a,c);if(void 0==f||a<f){f=a}});return f},partition:function(f,e){f=f?f.bind(e):Prototype.K;var h=[],g=[];this.each(function(a,c){(f(a,c)?h:g).push(a)});return[h,g]},pluck:function(d){var c=[];this.each(function(a){c.push(a[d])});return c},reject:function(e,d){e=e.bind(d);var f=[];this.each(function(a,c){e(a,c)||f.push(a)});return f},sortBy:function(d,c){d=d.bind(c);return this.map(function(a,e){return{value:a,criteria:d(a,e)}}).sort(function(h,g){var l=h.criteria,k=g.criteria;return l<k?-1:l>k?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var e=Prototype.K,d=$A(arguments);Object.isFunction(d.last())&&(e=d.pop());var f=[this].concat(d).map($A);return this.map(function(a,c){return e(f.pluck(c))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray,every:Enumerable.all,some:Enumerable.any});function $A(e){if(!e){return[]}if(e.toArray){return e.toArray()}for(var d=e.length,f=Array(d);d--;){f[d]=e[d]}return f}Prototype.Browser.WebKit&&($A=function(e){if(!e){return[]}if((!Object.isFunction(e)||"[object NodeList]"!=e)&&e.toArray){return e.toArray()}for(var d=e.length,f=Array(d);d--;){f[d]=e[d]}return f});Array.from=$A;Object.extend(Array.prototype,Enumerable);Array.prototype._reverse||(Array.prototype._reverse=Array.prototype.reverse);Object.extend(Array.prototype,{_each:function(e){for(var d=0,f=this.length;d<f;d++){e(this[d])}},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(b){return null!=b})},flatten:function(){return this.inject([],function(d,c){return d.concat(Object.isArray(c)?c.flatten():[c])})},without:function(){var b=$A(arguments);return this.select(function(a){return !b.include(a)})},reverse:function(b){return(!1!==b?this:this.toArray())._reverse()},reduce:function(){return 1<this.length?this:this[0]},uniq:function(b){return this.inject([],function(a,f,e){0!=e&&(b?a.last()==f:a.include(f))||a.push(f);return a})},intersect:function(b){return this.uniq().findAll(function(a){return b.detect(function(c){return a===c})})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"},toJSON:function(){var b=[];this.each(function(a){a=Object.toJSON(a);void 0!==a&&b.push(a)});return"["+b.join(", ")+"]"}});Object.isFunction(Array.prototype.forEach)&&(Array.prototype._each=Array.prototype.forEach);Array.prototype.indexOf||(Array.prototype.indexOf=function(e,d){d||(d=0);var f=this.length;for(0>d&&(d=f+d);d<f;d++){if(this[d]===e){return d}}return -1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e,d){d=isNaN(d)?this.length:(0>d?this.length+d:d)+1;var f=this.slice(0,d).reverse().indexOf(e);return 0>f?f:d-f-1});Array.prototype.toArray=Array.prototype.clone;function $w(b){return Object.isString(b)?(b=b.strip())?b.split(/\s+/):[]:[]}Prototype.Browser.Opera&&(Array.prototype.concat=function(){for(var g=[],f=0,l=this.length;f<l;f++){g.push(this[f])}f=0;for(l=arguments.length;f<l;f++){if(Object.isArray(arguments[f])){for(var k=0,h=arguments[f].length;k<h;k++){g.push(arguments[f][k])}}else{g.push(arguments[f])}}return g});Object.extend(Number.prototype,{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(b){$R(0,this,!0).each(b);return this},toPaddedString:function(e,d){var f=this.toString(d||10);return"0".times(e-f.length)+f},toJSON:function(){return isFinite(this)?this.toString():"null"}});$w("abs round ceil floor").each(function(b){Number.prototype[b]=Math[b].methodize()});function $H(b){return new Hash(b)}var Hash=Class.create(Enumerable,function(){function b(d,e){return Object.isUndefined(e)?d:d+"="+encodeURIComponent(String.interpret(e))}return{initialize:function(c){this._object=Object.isHash(c)?c.toObject():Object.clone(c)},_each:function(){var e=0,g=function(c){this.key=c};g.prototype.key="foo";for(var f in new g("bar")){e++}return 1<e}()?function(g){var m=[],l;for(l in this._object){var k=this._object[l];if(!m.include(l)){m.push(l);var h=[l,k];h.key=l;h.value=k;g(h)}}}:function(f){for(var k in this._object){var h=this._object[k],g=[k,h];g.key=k;g.value=h;f(g)}},set:function(d,e){return this._object[d]=e},get:function(c){return this._object[c]},unset:function(d){var e=this._object[d];delete this._object[d];return e},toObject:function(){return Object.clone(this._object)},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(d){var e=this.detect(function(a){return a.value===d});return e&&e.key},merge:function(c){return this.clone().update(c)},update:function(c){return(new Hash(c)).inject(this,function(e,d){e.set(d.key,d.value);return e})},toQueryString:function(){return this.map(function(a){var d=encodeURIComponent(a.key);return(a=a.value)&&"object"==typeof a&&Object.isArray(a)?a.map(b.curry(d)).join("&"):b(d,a)}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(c){return c.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:function(){return Object.toJSON(this.toObject())},clone:function(){return new Hash(this)}}}());Hash.prototype.toTemplateReplacements=Hash.prototype.toObject;Hash.from=$H;var ObjectRange=Class.create(Enumerable,{initialize:function(e,d,f){this.start=e;this.end=d;this.exclusive=f},_each:function(d){for(var c=this.start;this.include(c);){d(c),c=c.succ()}},include:function(b){return b<this.start?!1:this.exclusive?b<this.end:b<=this.end}}),$R=function(e,d,f){return new ObjectRange(e,d,f)},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,Responders:{responders:[],_each:function(b){this.responders._each(b)},register:function(b){this.include(b)||this.responders.push(b)},unregister:function(b){this.responders=this.responders.without(b)},dispatch:function(f,e,h,g){this.each(function(b){if(Object.isFunction(b[f])){try{b[f].apply(b,[e,h,g])}catch(a){}}})}}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(b){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,b||{});this.options.method=this.options.method.toLowerCase();Object.isString(this.options.parameters)&&(this.options.parameters=this.options.parameters.toQueryParams())}});Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,a,d){$super(d);this.transport=Ajax.getTransport();this.request(a)},request:function(e){this.url=e;this.method=this.options.method;e=Object.clone(this.options.parameters);["get","post"].include(this.method)||(e._method=this.method,this.method="post");this.parameters=e;if(e=Object.toQueryString(e)){"get"==this.method?this.url+=(this.url.include("?")?"&":"?")+e:/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&(e+="&_=")}try{var d=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(d)}Ajax.Responders.dispatch("onCreate",this,d);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||e:null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(f){this.dispatchException(f)}},onStateChange:function(){var b=this.transport.readyState;1<b&&(4!=b||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var g={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};"post"==this.method&&(g["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(g.Connection="close"));if("object"==typeof this.options.requestHeaders){var f=this.options.requestHeaders;if(Object.isFunction(f.push)){for(var l=0,k=f.length;l<k;l+=2){g[f[l]]=f[l+1]}}else{$H(f).each(function(a){g[a.key]=a.value})}}for(var h in g){this.transport.setRequestHeader(h,g[h])}},success:function(){var b=this.getStatus();return !b||200<=b&&300>b},getStatus:function(){try{return this.transport.status||0}catch(b){return 0}},respondToReadyState:function(g){g=Ajax.Request.Events[g];var f=new Ajax.Response(this);if("Complete"==g){try{this._complete=!0,(this.options["on"+f.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(f,f.headerJSON)}catch(l){this.dispatchException(l)}var k=f.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&k&&k.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&this.evalResponse()}try{(this.options["on"+g]||Prototype.emptyFunction)(f,f.headerJSON),Ajax.Responders.dispatch("on"+g,this,f,f.headerJSON)}catch(h){this.dispatchException(h)}"Complete"==g&&(this.transport.onreadystatechange=Prototype.emptyFunction)},getHeader:function(d){try{return this.transport.getResponseHeader(d)}catch(c){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(b){(this.options.onException||Prototype.emptyFunction)(this,b);Ajax.Responders.dispatch("onException",this,b)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(d){this.request=d;d=this.transport=d.transport;var c=this.readyState=d.readyState;if(2<c&&!Prototype.Browser.IE||4==c){this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(d.responseText),this.headerJSON=this._getHeaderJSON()}4==c&&(d=d.responseXML,this.responseXML=void 0===d?null:d,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(b){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(b){return null}},getResponseHeader:function(b){return this.transport.getResponseHeader(b)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var d=this.getHeader("X-JSON");if(!d){return null}d=decodeURIComponent(escape(d));try{return d.evalJSON(this.request.options.sanitizeJSON)}catch(c){this.request.dispatchException(c)}},_getResponseJSON:function(){var d=this.request.options;if(!d.evalJSON||"force"!=d.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")){return null}try{return this.transport.responseText.evalJSON(d.sanitizeJSON)}catch(c){this.request.dispatchException(c)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,a,h,g){this.container={success:a.success||a,failure:a.failure||(a.success?null:a)};g=g||{};var f=g.onComplete;g.onComplete=function(d,e){this.updateContent(d.responseText);Object.isFunction(f)&&f(d,e)}.bind(this);$super(h,g)},updateContent:function(f){var e=this.container[this.success()?"success":"failure"],h=this.options;h.evalScripts||(f=f.stripScripts());if(e=$(e)){if(h.insertion){if(Object.isString(h.insertion)){var g={};g[h.insertion]=f;e.insert(g)}else{h.insertion(e,f)}}else{e.update(f)}}this.success()&&this.onComplete&&this.onComplete.bind(this).defer()}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,a,f,e){$super(e);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=a;this.url=f;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(b){this.options.decay&&(this.decay=b.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=b.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(f){if(1<arguments.length){for(var e=0,h=[],g=arguments.length;e<g;e++){h.push($(arguments[e]))}return h}Object.isString(f)&&(f=document.getElementById(f));return Element.extend(f)}Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(h,g){for(var n=[],m=document.evaluate(h,$(g)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),l=0,k=m.snapshotLength;l<k;l++){n.push(Element.extend(m.snapshotItem(l)))}return n});if(!window.Node){var Node={}}Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});(function(){var b=this.Element;this.Element=function(e,g){g=g||{};e=e.toLowerCase();var f=Element.cache;if(Prototype.Browser.IE&&g.name){return e="<"+e+' name="'+g.name+'">',delete g.name,Element.writeAttribute(document.createElement(e),g)}f[e]||(f[e]=Element.extend(document.createElement(e)));return Element.writeAttribute(f[e].cloneNode(!1),g)};Object.extend(this.Element,b||{})}).call(window);Element.cache={};Element.Methods={visible:function(b){return"none"!=$(b).style.display},toggle:function(b){b=$(b);Element[Element.visible(b)?"hide":"show"](b);return b},hide:function(b){$(b).style.display="none";return b},show:function(b){$(b).style.display="";return b},remove:function(b){b=$(b);b.parentNode.removeChild(b);return b},update:function(d,c){d=$(d);c&&c.toElement&&(c=c.toElement());if(Object.isElement(c)){return d.update().insert(c)}c=Object.toHTML(c);d.innerHTML=c.stripScripts();c.evalScripts.bind(c).defer();return d},replace:function(e,d){e=$(e);if(d&&d.toElement){d=d.toElement()}else{if(!Object.isElement(d)){d=Object.toHTML(d);var f=e.ownerDocument.createRange();f.selectNode(e);d.evalScripts.bind(d).defer();d=f.createContextualFragment(d.stripScripts())}}e.parentNode.replaceChild(d,e);return e},insert:function(g,f){g=$(g);if(Object.isString(f)||Object.isNumber(f)||Object.isElement(f)||f&&(f.toElement||f.toHTML)){f={bottom:f}}var l,k,h;for(position in f){l=f[position],position=position.toLowerCase(),k=Element._insertionTranslations[position],l&&l.toElement&&(l=l.toElement()),Object.isElement(l)?k.insert(g,l):(l=Object.toHTML(l),h=g.ownerDocument.createRange(),k.initializeRange(g,h),k.insert(g,h.createContextualFragment(l.stripScripts())),l.evalScripts.bind(l).defer())}return g},wrap:function(e,d,f){e=$(e);Object.isElement(d)?$(d).writeAttribute(f||{}):d=Object.isString(d)?new Element(d,f):new Element("div",d);e.parentNode&&e.parentNode.replaceChild(d,e);d.appendChild(e);return d},inspect:function(d){d=$(d);var c="<"+d.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(b){var a=b.first();b=b.last();(a=(d[a]||"").toString())&&(c+=" "+b+"="+a.inspect(!0))});return c+">"},recursivelyCollect:function(e,d){e=$(e);for(var f=[];e=e[d];){1==e.nodeType&&f.push(Element.extend(e))}return f},ancestors:function(b){return $(b).recursivelyCollect("parentNode")},descendants:function(b){return $A($(b).getElementsByTagName("*")).each(Element.extend)},firstDescendant:function(b){for(b=$(b).firstChild;b&&1!=b.nodeType;){b=b.nextSibling}return $(b)},immediateDescendants:function(b){if(!(b=$(b).firstChild)){return[]}for(;b&&1!=b.nodeType;){b=b.nextSibling}return b?[b].concat($(b).nextSiblings()):[]},previousSiblings:function(b){return $(b).recursivelyCollect("previousSibling")},nextSiblings:function(b){return $(b).recursivelyCollect("nextSibling")},siblings:function(b){b=$(b);return b.previousSiblings().reverse().concat(b.nextSiblings())},match:function(d,c){Object.isString(c)&&(c=new Selector(c));return c.match($(d))},up:function(f,e,h){f=$(f);if(1==arguments.length){return $(f.parentNode)}var g=f.ancestors();return e?Selector.findElement(g,e,h):g[h||0]},down:function(f,e,h){f=$(f);if(1==arguments.length){return f.firstDescendant()}var g=f.descendants();return e?Selector.findElement(g,e,h):g[h||0]},previous:function(f,e,h){f=$(f);if(1==arguments.length){return $(Selector.handlers.previousElementSibling(f))}var g=f.previousSiblings();return e?Selector.findElement(g,e,h):g[h||0]},next:function(f,e,h){f=$(f);if(1==arguments.length){return $(Selector.handlers.nextElementSibling(f))}var g=f.nextSiblings();return e?Selector.findElement(g,e,h):g[h||0]},select:function(){var d=$A(arguments),c=$(d.shift());return Selector.findChildElements(c,d)},adjacent:function(){var d=$A(arguments),c=$(d.shift());return Selector.findChildElements(c.parentNode,d).without(c)},identify:function(e){e=$(e);var d=e.readAttribute("id"),f=arguments.callee;if(d){return d}do{d="anonymous_element_"+f.counter++}while($(d));e.writeAttribute("id",d);return d},readAttribute:function(e,d){e=$(e);if(Prototype.Browser.IE){var f=Element._attributeTranslations.read;if(f.values[d]){return f.values[d](e,d)}f.names[d]&&(d=f.names[d]);if(d.include(":")){return e.attributes&&e.attributes[d]?e.attributes[d].value:null}}return e.getAttribute(d)},writeAttribute:function(h,g,n){h=$(h);var m={},l=Element._attributeTranslations.write;"object"==typeof g?m=g:m[g]=void 0===n?!0:n;for(var k in m){g=l.names[k]||k,n=m[k],l.values[k]&&(g=l.values[k](h,n)),!1===n||null===n?h.removeAttribute(g):!0===n?h.setAttribute(g,g):h.setAttribute(g,n)}return h},getHeight:function(b){return $(b).getDimensions().height},getWidth:function(b){return $(b).getDimensions().width},classNames:function(b){return new Element.ClassNames(b)},hasClassName:function(e,d){if(e=$(e)){var f=e.className;return 0<f.length&&(f==d||RegExp("(^|\\s)"+d+"(\\s|$)").test(f))}},addClassName:function(d,c){if(d=$(d)){return d.hasClassName(c)||(d.className+=(d.className?" ":"")+c),d}},removeClassName:function(d,c){if(d=$(d)){return d.className=d.className.replace(RegExp("(^|\\s+)"+c+"(\\s+|$)")," ").strip(),d}},toggleClassName:function(d,c){if(d=$(d)){return d[d.hasClassName(c)?"removeClassName":"addClassName"](c)}},cleanWhitespace:function(e){e=$(e);for(var d=e.firstChild;d;){var f=d.nextSibling;3!=d.nodeType||/\S/.test(d.nodeValue)||e.removeChild(d);d=f}return e},empty:function(b){return $(b).innerHTML.blank()},descendantOf:function(g,f){g=$(g);f=$(f);if(g.compareDocumentPosition){return 8===(g.compareDocumentPosition(f)&8)}if(g.sourceIndex&&!Prototype.Browser.Opera){var l=g.sourceIndex,k=f.sourceIndex,h=f.nextSibling;if(!h){do{f=f.parentNode}while(!(h=f.nextSibling)&&f.parentNode)}if(h){return l>k&&l<h.sourceIndex}}for(;g=g.parentNode;){if(g==f){return !0}}return !1},scrollTo:function(d){d=$(d);var c=d.cumulativeOffset();window.scrollTo(c[0],c[1]);return d},getStyle:function(e,d){e=$(e);d="float"==d?"cssFloat":d.camelize();var f=e.style[d];f||(f=(f=document.defaultView.getComputedStyle(e,null))?f[d]:null);return"opacity"==d?f?parseFloat(f):1:"auto"==f?null:f},getOpacity:function(b){return $(b).getStyle("opacity")},setStyle:function(f,e){f=$(f);var h=f.style;if(Object.isString(e)){return f.style.cssText+=";"+e,e.include("opacity")?f.setOpacity(e.match(/opacity:\s*(\d?\.?\d*)/)[1]):f}for(var g in e){"opacity"==g?f.setOpacity(e[g]):h["float"==g||"cssFloat"==g?void 0===h.styleFloat?"cssFloat":"styleFloat":g]=e[g]}return f},setOpacity:function(d,c){d=$(d);d.style.opacity=1==c||""===c?"":0.00001>c?0:c;return d},getDimensions:function(h){h=$(h);var g=$(h).getStyle("display");if("none"!=g&&null!=g){return{width:h.offsetWidth,height:h.offsetHeight}}var g=h.style,n=g.visibility,m=g.position,l=g.display;g.visibility="hidden";g.position="absolute";g.display="block";var k=h.clientWidth;h=h.clientHeight;g.display=l;g.position=m;g.visibility=n;return{width:k,height:h}},makePositioned:function(d){d=$(d);var c=Element.getStyle(d,"position");"static"!=c&&c||(d._madePositioned=!0,d.style.position="relative",window.opera&&(d.style.top=0,d.style.left=0));return d},undoPositioned:function(b){b=$(b);b._madePositioned&&(b._madePositioned=void 0,b.style.position=b.style.top=b.style.left=b.style.bottom=b.style.right="");return b},makeClipping:function(b){b=$(b);if(b._overflow){return b}b._overflow=Element.getStyle(b,"overflow")||"auto";"hidden"!==b._overflow&&(b.style.overflow="hidden");return b},undoClipping:function(b){b=$(b);if(!b._overflow){return b}b.style.overflow="auto"==b._overflow?"":b._overflow;b._overflow=null;return b},cumulativeOffset:function(e){var d=0,f=0;do{d+=e.offsetTop||0,f+=e.offsetLeft||0,e=e.offsetParent}while(e);return Element._returnOffset(f,d)},positionedOffset:function(f){var e=0,h=0;do{if(e+=f.offsetTop||0,h+=f.offsetLeft||0,f=f.offsetParent){if("BODY"==f.tagName){break}var g=Element.getStyle(f,"position");if("relative"==g||"absolute"==g){break}}}while(f);return Element._returnOffset(h,e)},absolutize:function(g){g=$(g);if("absolute"!=g.getStyle("position")){var f=g.positionedOffset(),l=f[1],f=f[0],k=g.clientWidth,h=g.clientHeight;g._originalLeft=f-parseFloat(g.style.left||0);g._originalTop=l-parseFloat(g.style.top||0);g._originalWidth=g.style.width;g._originalHeight=g.style.height;g.style.position="absolute";g.style.top=l+"px";g.style.left=f+"px";g.style.width=k+"px";g.style.height=h+"px";return g}},relativize:function(e){e=$(e);if("relative"!=e.getStyle("position")){e.style.position="relative";var d=parseFloat(e.style.top||0)-(e._originalTop||0),f=parseFloat(e.style.left||0)-(e._originalLeft||0);e.style.top=d+"px";e.style.left=f+"px";e.style.height=e._originalHeight;e.style.width=e._originalWidth;return e}},cumulativeScrollOffset:function(e){var d=0,f=0;do{d+=e.scrollTop||0,f+=e.scrollLeft||0,e=e.parentNode}while(e);return Element._returnOffset(f,d)},getOffsetParent:function(b){if(b.offsetParent){return $(b.offsetParent)}if(b==document.body){return $(b)}for(;(b=b.parentNode)&&b!=document.body;){if("static"!=Element.getStyle(b,"position")){return $(b)}}return $(document.body)},viewportOffset:function(f){var e=0,h=0,g=f;do{if(e+=g.offsetTop||0,h+=g.offsetLeft||0,g.offsetParent==document.body&&"absolute"==Element.getStyle(g,"position")){break}}while(g=g.offsetParent);g=f;do{Prototype.Browser.Opera&&"BODY"!=g.tagName||(e-=g.scrollTop||0,h-=g.scrollLeft||0)}while(g=g.parentNode);return Element._returnOffset(h,e)},clonePosition:function(h,g,n){n=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},n||{});g=$(g);var m=g.viewportOffset();h=$(h);var l=[0,0],k=null;"absolute"==Element.getStyle(h,"position")&&(k=h.getOffsetParent(),l=k.viewportOffset());k==document.body&&(l[0]-=document.body.offsetLeft,l[1]-=document.body.offsetTop);n.setLeft&&(h.style.left=m[0]-l[0]+n.offsetLeft+"px");n.setTop&&(h.style.top=m[1]-l[1]+n.offsetTop+"px");n.setWidth&&(h.style.width=g.offsetWidth+"px");n.setHeight&&(h.style.height=g.offsetHeight+"px");return h}};Element.Methods.identify.counter=1;Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};if(!document.createRange||Prototype.Browser.Opera){Element.Methods.insert=function(k,h){k=$(k);if(Object.isString(h)||Object.isNumber(h)||Object.isElement(h)||h&&(h.toElement||h.toHTML)){h={bottom:h}}var p=Element._insertionTranslations,o,n,m,l;for(n in h){o=h[n],n=n.toLowerCase(),m=p[n],o&&o.toElement&&(o=o.toElement()),Object.isElement(o)?m.insert(k,o):(o=Object.toHTML(o),l=("before"==n||"after"==n?k.parentNode:k).tagName.toUpperCase(),p.tags[l]?(l=Element._getContentFromAnonymousElement(l,o.stripScripts()),"top"!=n&&"after"!=n||l.reverse(),l.each(m.insert.curry(k))):k.insertAdjacentHTML(m.adjacency,o.stripScripts()),o.evalScripts.bind(o).defer())}return k}}Prototype.Browser.Opera?(Element.Methods._getStyle=Element.Methods.getStyle,Element.Methods.getStyle=function(d,c){switch(c){case"left":case"top":case"right":case"bottom":if("static"==Element._getStyle(d,"position")){return null}default:return Element._getStyle(d,c)}},Element.Methods._readAttribute=Element.Methods.readAttribute,Element.Methods.readAttribute=function(d,c){return"title"==c?d.title:Element._readAttribute(d,c)}):Prototype.Browser.IE?($w("positionedOffset getOffsetParent viewportOffset").each(function(b){Element.Methods[b]=Element.Methods[b].wrap(function(f,k){k=$(k);var h=k.getStyle("position");if("static"!=h){return f(k)}k.setStyle({position:"relative"});var g=f(k);k.setStyle({position:h});return g})}),Element.Methods.getStyle=function(e,d){e=$(e);d="float"==d||"cssFloat"==d?"styleFloat":d.camelize();var f=e.style[d];!f&&e.currentStyle&&(f=e.currentStyle[d]);return"opacity"==d?(f=(e.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&f[1]?parseFloat(f[1])/100:1:"auto"==f?"width"!=d&&"height"!=d||"none"==e.getStyle("display")?null:e["offset"+d.capitalize()]+"px":f},Element.Methods.setOpacity=function(f,e){f=$(f);var h=f.currentStyle;if(h&&!h.hasLayout||!h&&"normal"==f.style.zoom){f.style.zoom=1}var h=f.getStyle("filter"),g=f.style;if(1==e||""===e){return(h=h.replace(/alpha\([^\)]*\)/gi,""))?g.filter=h:g.removeAttribute("filter"),f}0.00001>e&&(e=0);g.filter=h.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*e+")";return f},Element._attributeTranslations={read:{names:{"class":"className","for":"htmlFor"},values:{_getAttr:function(d,c){return d.getAttribute(c,2)},_getAttrNode:function(e,d){var f=e.getAttributeNode(d);return f?f.value:""},_getEv:function(d,c){return(c=d.getAttribute(c))?c.toString().slice(23,-2):null},_flag:function(d,c){return $(d).hasAttribute(c)?c:null},style:function(b){return b.style.cssText.toLowerCase()},title:function(b){return b.title}}}},Element._attributeTranslations.write={names:Object.clone(Element._attributeTranslations.read.names),values:{checked:function(d,c){d.checked=!!c},style:function(d,c){d.style.cssText=c?c:""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc").each(function(b){Element._attributeTranslations.write.names[b.toLowerCase()]=b;Element._attributeTranslations.has[b.toLowerCase()]=b}),function(b){Object.extend(b,{href:b._getAttr,src:b._getAttr,type:b._getAttr,action:b._getAttrNode,disabled:b._flag,checked:b._flag,readonly:b._flag,multiple:b._flag,onload:b._getEv,onunload:b._getEv,onclick:b._getEv,ondblclick:b._getEv,onmousedown:b._getEv,onmouseup:b._getEv,onmouseover:b._getEv,onmousemove:b._getEv,onmouseout:b._getEv,onfocus:b._getEv,onblur:b._getEv,onkeypress:b._getEv,onkeydown:b._getEv,onkeyup:b._getEv,onsubmit:b._getEv,onreset:b._getEv,onselect:b._getEv,onchange:b._getEv})}(Element._attributeTranslations.read.values)):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=function(d,c){d=$(d);d.style.opacity=1==c?0.999999:""===c?"":0.00001>c?0:c;return d}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=function(f,e){f=$(f);f.style.opacity=1==e||""===e?"":0.00001>e?0:e;if(1==e){if("IMG"==f.tagName&&f.width){f.width++,f.width--}else{try{var h=document.createTextNode(" ");f.appendChild(h);f.removeChild(h)}catch(g){}}}return f},Element.Methods.cumulativeOffset=function(e){var d=0,f=0;do{d+=e.offsetTop||0;f+=e.offsetLeft||0;if(e.offsetParent==document.body&&"absolute"==Element.getStyle(e,"position")){break}e=e.offsetParent}while(e);return Element._returnOffset(f,d)});if(Prototype.Browser.IE||Prototype.Browser.Opera){Element.Methods.update=function(e,d){e=$(e);d&&d.toElement&&(d=d.toElement());if(Object.isElement(d)){return e.update().insert(d)}d=Object.toHTML(d);var f=e.tagName.toUpperCase();f in Element._insertionTranslations.tags?($A(e.childNodes).each(function(a){e.removeChild(a)}),Element._getContentFromAnonymousElement(f,d.stripScripts()).each(function(a){e.appendChild(a)})):e.innerHTML=d.stripScripts();d.evalScripts.bind(d).defer();return e}}document.createElement("div").outerHTML&&(Element.Methods.replace=function(g,f){g=$(g);f&&f.toElement&&(f=f.toElement());if(Object.isElement(f)){return g.parentNode.replaceChild(f,g),g}f=Object.toHTML(f);var l=g.parentNode,k=l.tagName.toUpperCase();if(Element._insertionTranslations.tags[k]){var h=g.next(),k=Element._getContentFromAnonymousElement(k,f.stripScripts());l.removeChild(g);h?k.each(function(b){l.insertBefore(b,h)}):k.each(function(b){l.appendChild(b)})}else{g.outerHTML=f.stripScripts()}f.evalScripts.bind(f).defer();return g});Element._returnOffset=function(e,d){var f=[e,d];f.left=e;f.top=d;return f};Element._getContentFromAnonymousElement=function(f,e){var h=new Element("div"),g=Element._insertionTranslations.tags[f];h.innerHTML=g[0]+e+g[1];g[2].times(function(){h=h.firstChild});return $A(h.childNodes)};Element._insertionTranslations={before:{adjacency:"beforeBegin",insert:function(d,c){d.parentNode.insertBefore(c,d)},initializeRange:function(d,c){c.setStartBefore(d)}},top:{adjacency:"afterBegin",insert:function(d,c){d.insertBefore(c,d.firstChild)},initializeRange:function(d,c){c.selectNodeContents(d);c.collapse(!0)}},bottom:{adjacency:"beforeEnd",insert:function(d,c){d.appendChild(c)}},after:{adjacency:"afterEnd",insert:function(d,c){d.parentNode.insertBefore(c,d.nextSibling)},initializeRange:function(d,c){c.setStartAfter(d)}},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};(function(){this.bottom.initializeRange=this.top.initializeRange;Object.extend(this.tags,{THEAD:this.tags.TBODY,TFOOT:this.tags.TBODY,TH:this.tags.TD})}).call(Element._insertionTranslations);Element.Methods.Simulated={hasAttribute:function(e,d){d=Element._attributeTranslations.has[d]||d;var f=$(e).getAttributeNode(d);return f&&f.specified}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);!Prototype.BrowserFeatures.ElementExtensions&&document.createElement("div").__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=document.createElement("div").__proto__,Prototype.BrowserFeatures.ElementExtensions=!0);Element.extend=function(){if(Prototype.BrowserFeatures.SpecificElementExtensions){return Prototype.K}var e={},d=Element.Methods.ByTag,f=Object.extend(function(k){if(!k||k._extendedByPrototype||1!=k.nodeType||k==window){return k}var h=Object.clone(e),b=k.tagName,a;d[b]&&Object.extend(h,d[b]);for(a in h){b=h[a],!Object.isFunction(b)||a in k||(k[a]=b.methodize())}k._extendedByPrototype=Prototype.emptyFunction;return k},{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(e,Element.Methods),Object.extend(e,Element.Methods.Simulated))}});f.refresh();return f}();Element.hasAttribute=function(d,c){return d.hasAttribute?d.hasAttribute(c):Element.Methods.Simulated.hasAttribute(d,c)};Element.addMethods=function(l){function k(a){a=a.toUpperCase();Element.Methods.ByTag[a]||(Element.Methods.ByTag[a]={});Object.extend(Element.Methods.ByTag[a],l)}function r(g,f,t){t=t||!1;for(var s in g){var h=g[s];Object.isFunction(h)&&(t&&s in f||(f[s]=h.methodize()))}}function q(e){var d,f={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};f[e]&&(d="HTML"+f[e]+"Element");if(window[d]){return window[d]}d="HTML"+e+"Element";if(window[d]){return window[d]}d="HTML"+e.capitalize()+"Element";if(window[d]){return window[d]}window[d]={};window[d].prototype=document.createElement(e).__proto__;return window[d]}var p=Prototype.BrowserFeatures,o=Element.Methods.ByTag;l||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)}));if(2==arguments.length){var n=l;l=arguments[1]}n?Object.isArray(n)?n.each(k):k(n):Object.extend(Element.Methods,l||{});p.ElementExtensions&&(r(Element.Methods,HTMLElement.prototype),r(Element.Methods.Simulated,HTMLElement.prototype,!0));if(p.SpecificElementExtensions){for(var m in Element.Methods.ByTag){p=q(m),Object.isUndefined(p)||r(o[m],p.prototype)}}Object.extend(Element,Element.Methods);delete Element.ByTag;Element.extend.refresh&&Element.extend.refresh();Element.cache={}};document.viewport={getDimensions:function(){var b={};$w("width height").each(function(a){var d=a.capitalize();b[a]=self["inner"+d]||document.documentElement["client"+d]||document.body["client"+d]});return b},getWidth:function(){return this.getDimensions().width},getHeight:function(){return this.getDimensions().height},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};var Selector=Class.create({initialize:function(b){this.expression=b.strip();this.compileMatcher()},compileMatcher:function(){if(Prototype.BrowserFeatures.XPath&&!/(\[[\w-]*?:|:checked)/.test(this.expression)){return this.compileXPathMatcher()}var a=this.expression,b=Selector.patterns,c=Selector.criteria,d,e;if(Selector._cache[a]){this.matcher=Selector._cache[a]}else{for(this.matcher=["this.matcher = function(root) {","var r = root, h = Selector.handlers, c = false, n;"];a&&d!=a&&/\S/.test(a);){d=a;for(var f in b){if(e=b[f],e=a.match(e)){this.matcher.push(Object.isFunction(c[f])?c[f](e):(new Template(c[f])).evaluate(e));a=a.replace(e[0],"");break}}}this.matcher.push("return h.unique(n);\n}");eval(this.matcher.join("\n"));Selector._cache[this.expression]=this.matcher}},compileXPathMatcher:function(){var h=this.expression,g=Selector.patterns,n=Selector.xpath,m,l;if(Selector._cache[h]){this.xpath=Selector._cache[h]}else{for(this.matcher=[".//*"];h&&m!=h&&/\S/.test(h);){m=h;for(var k in g){if(l=h.match(g[k])){this.matcher.push(Object.isFunction(n[k])?n[k](l):(new Template(n[k])).evaluate(l));h=h.replace(l[0],"");break}}}this.xpath=this.matcher.join("");Selector._cache[this.expression]=this.xpath}},findElements:function(b){b=b||document;return this.xpath?document._getElementsByXPath(this.xpath,b):this.matcher(b)},match:function(k){this.tokens=[];for(var h=this.expression,p=Selector.patterns,o=Selector.assertions,n,m;h&&n!==h&&/\S/.test(h);){n=h;for(var l in p){if(m=p[l],m=h.match(m)){if(o[l]){this.tokens.push([l,Object.clone(m)]),h=h.replace(m[0],"")}else{return this.findElements(document).include(k)}}}}h=!0;for(l=0;o=this.tokens[l];l++){if(p=o[0],o=o[1],!Selector.assertions[p](k,o)){h=!1;break}}return h},toString:function(){return this.expression},inspect:function(){return"#<Selector:"+this.expression.inspect()+">"}});Object.extend(Selector,{_cache:{},xpath:{descendant:"//*",child:"/*",adjacent:"/following-sibling::*[1]",laterSibling:"/following-sibling::*",tagName:function(b){return"*"==b[1]?"":"[local-name()='"+b[1].toLowerCase()+"' or local-name()='"+b[1].toUpperCase()+"']"},className:"[contains(concat(' ', @class, ' '), ' #{1} ')]",id:"[@id='#{1}']",attrPresence:"[@#{1}]",attr:function(b){b[3]=b[5]||b[6];return(new Template(Selector.xpath.operators[b[2]])).evaluate(b)},pseudo:function(d){var c=Selector.xpath.pseudos[d[1]];return c?Object.isFunction(c)?c(d):(new Template(Selector.xpath.pseudos[d[1]])).evaluate(d):""},operators:{"=":"[@#{1}='#{3}']","!=":"[@#{1}!='#{3}']","^=":"[starts-with(@#{1}, '#{3}')]","$=":"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']","*=":"[contains(@#{1}, '#{3}')]","~=":"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]","|=":"[contains(concat('-', @#{1}, '-'), '-#{3}-')]"},pseudos:{"first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","only-child":"[not(preceding-sibling::* or following-sibling::*)]",empty:"[count(*) = 0 and (count(text()) = 0 or translate(text(), ' \t\r\n', '') = '')]",checked:"[@checked]",disabled:"[@disabled]",enabled:"[not(@disabled)]",not:function(l){for(var k=l[6],r=Selector.patterns,q=Selector.xpath,p,o,n=[];k&&p!=k&&/\S/.test(k);){p=k;for(var m in r){if(l=k.match(r[m])){o=Object.isFunction(q[m])?q[m](l):(new Template(q[m])).evaluate(l);n.push("("+o.substring(1,o.length-1)+")");k=k.replace(l[0],"");break}}}return"[not("+n.join(" and ")+")]"},"nth-child":function(b){return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*) + 1) ",b)},"nth-last-child":function(b){return Selector.xpath.pseudos.nth("(count(./following-sibling::*) + 1) ",b)},"nth-of-type":function(b){return Selector.xpath.pseudos.nth("position() ",b)},"nth-last-of-type":function(b){return Selector.xpath.pseudos.nth("(last() + 1 - position()) ",b)},"first-of-type":function(b){b[6]="1";return Selector.xpath.pseudos["nth-of-type"](b)},"last-of-type":function(b){b[6]="1";return Selector.xpath.pseudos["nth-last-of-type"](b)},"only-of-type":function(d){var c=Selector.xpath.pseudos;return c["first-of-type"](d)+c["last-of-type"](d)},nth:function(f,e){var h,g=e[6];"even"==g&&(g="2n+0");"odd"==g&&(g="2n+1");if(h=g.match(/^(\d+)$/)){return"["+f+"= "+h[1]+"]"}if(h=g.match(/^(-?\d*)?n(([+-])(\d+))?/)){return"-"==h[1]&&(h[1]=-1),g=h[1]?Number(h[1]):1,h=h[2]?Number(h[2]):0,(new Template("[((#{fragment} - #{b}) mod #{a} = 0) and ((#{fragment} - #{b}) div #{a} >= 0)]")).evaluate({fragment:f,a:g,b:h})}}}},criteria:{tagName:'n = h.tagName(n, r, "#{1}", c);   c = false;',className:'n = h.className(n, r, "#{1}", c); c = false;',id:'n = h.id(n, r, "#{1}", c);        c = false;',attrPresence:'n = h.attrPresence(n, r, "#{1}"); c = false;',attr:function(b){b[3]=b[5]||b[6];return(new Template('n = h.attr(n, r, "#{1}", "#{3}", "#{2}"); c = false;')).evaluate(b)},pseudo:function(b){b[6]&&(b[6]=b[6].replace(/"/g,'\\"'));return(new Template('n = h.pseudo(n, "#{1}", "#{6}", r, c); c = false;')).evaluate(b)},descendant:'c = "descendant";',child:'c = "child";',adjacent:'c = "adjacent";',laterSibling:'c = "laterSibling";'},patterns:{laterSibling:/^\s*~\s*/,child:/^\s*>\s*/,adjacent:/^\s*\+\s*/,descendant:/^\s/,tagName:/^\s*(\*|[\w\-]+)(\b|$)?/,id:/^#([\w\-\*]+)(\b|$)/,className:/^\.([\w\-\*]+)(\b|$)/,pseudo:/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|(?=\s)|(?=:))/,attrPresence:/^\[([\w]+)\]/,attr:/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/},assertions:{tagName:function(d,c){return c[1].toUpperCase()==d.tagName.toUpperCase()},className:function(d,c){return Element.hasClassName(d,c[1])},id:function(d,c){return d.id===c[1]},attrPresence:function(d,c){return Element.hasAttribute(d,c[1])},attr:function(e,d){var f=Element.readAttribute(e,d[1]);return Selector.operators[d[2]](f,d[3])}},handlers:{concat:function(f,e){for(var h=0,g;g=e[h];h++){f.push(g)}return f},mark:function(e){for(var d=0,f;f=e[d];d++){f._counted=!0}return e},unmark:function(e){for(var d=0,f;f=e[d];d++){f._counted=void 0}return e},index:function(g,f,l){g._counted=!0;if(f){g=g.childNodes;f=g.length-1;for(var k=1;0<=f;f--){var h=g[f];1!=h.nodeType||l&&!h._counted||(h.nodeIndex=k++)}}else{for(f=0,k=1,g=g.childNodes;h=g[f];f++){1!=h.nodeType||l&&!h._counted||(h.nodeIndex=k++)}}},unique:function(g){if(0==g.length){return g}for(var f=[],l,k=0,h=g.length;k<h;k++){(l=g[k])._counted||(l._counted=!0,f.push(Element.extend(l)))}return Selector.handlers.unmark(f)},descendant:function(g){for(var f=Selector.handlers,l=0,k=[],h;h=g[l];l++){f.concat(k,h.getElementsByTagName("*"))}return k},child:function(h){for(var g=0,n=[],m;m=h[g];g++){for(var l=0,k;k=m.childNodes[l];l++){1==k.nodeType&&"!"!=k.tagName&&n.push(k)}}return n},adjacent:function(f){for(var e=0,h=[],g;g=f[e];e++){(g=this.nextElementSibling(g))&&h.push(g)}return h},laterSibling:function(g){for(var f=Selector.handlers,l=0,k=[],h;h=g[l];l++){f.concat(k,Element.nextSiblings(h))}return k},nextElementSibling:function(b){for(;b=b.nextSibling;){if(1==b.nodeType){return b}}return null},previousElementSibling:function(b){for(;b=b.previousSibling;){if(1==b.nodeType){return b}}return null},tagName:function(h,g,n,m){n=n.toUpperCase();var l=[],k=Selector.handlers;if(h){if(m){if("descendant"==m){for(g=0;m=h[g];g++){k.concat(l,m.getElementsByTagName(n))}return l}h=this[m](h);if("*"==n){return h}}for(g=0;m=h[g];g++){m.tagName.toUpperCase()==n&&l.push(m)}return l}return g.getElementsByTagName(n)},id:function(g,f,l,k){l=$(l);var h=Selector.handlers;if(!l){return[]}if(!g&&f==document){return[l]}if(g){if(k){if("child"==k){for(f=0;k=g[f];f++){if(l.parentNode==k){return[l]}}}else{if("descendant"==k){for(f=0;k=g[f];f++){if(Element.descendantOf(l,k)){return[l]}}}else{if("adjacent"==k){for(f=0;k=g[f];f++){if(Selector.handlers.previousElementSibling(l)==k){return[l]}}}else{g=h[k](g)}}}}for(f=0;k=g[f];f++){if(k==l){return[l]}}return[]}return l&&Element.descendantOf(l,f)?[l]:[]},className:function(f,e,h,g){f&&g&&(f=this[g](f));return Selector.handlers.byClassName(f,e,h)},byClassName:function(k,h,p){k||(k=Selector.handlers.descendant([h]));h=" "+p+" ";for(var o=0,n=[],m,l;m=k[o];o++){l=m.className,0!=l.length&&(l==p||(" "+l+" ").include(h))&&n.push(m)}return n},attrPresence:function(g,f,l){g||(g=f.getElementsByTagName("*"));f=[];for(var k=0,h;h=g[k];k++){Element.hasAttribute(h,l)&&f.push(h)}return f},attr:function(l,k,r,q,p){l||(l=k.getElementsByTagName("*"));k=Selector.operators[p];p=[];for(var o=0,n;n=l[o];o++){var m=Element.readAttribute(n,r);null!==m&&k(m,q)&&p.push(n)}return p},pseudo:function(g,f,l,k,h){g&&h&&(g=this[h](g));g||(g=k.getElementsByTagName("*"));return Selector.pseudos[f](g,l,k)}},pseudos:{"first-child":function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){Selector.handlers.previousElementSibling(g)||h.push(g)}return h},"last-child":function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){Selector.handlers.nextElementSibling(g)||h.push(g)}return h},"only-child":function(g,f,l){f=Selector.handlers;l=0;for(var k=[],h;h=g[l];l++){f.previousElementSibling(h)||f.nextElementSibling(h)||k.push(h)}return k},"nth-child":function(e,d,f){return Selector.pseudos.nth(e,d,f)},"nth-last-child":function(e,d,f){return Selector.pseudos.nth(e,d,f,!0)},"nth-of-type":function(e,d,f){return Selector.pseudos.nth(e,d,f,!1,!0)},"nth-last-of-type":function(e,d,f){return Selector.pseudos.nth(e,d,f,!0,!0)},"first-of-type":function(e,d,f){return Selector.pseudos.nth(e,"1",f,!1,!0)},"last-of-type":function(e,d,f){return Selector.pseudos.nth(e,"1",f,!0,!0)},"only-of-type":function(f,e,h){var g=Selector.pseudos;return g["last-of-type"](g["first-of-type"](f,e,h),e,h)},getIndices:function(e,d,f){return 0==e?0<d?[d]:[]:$R(1,f).inject([],function(b,a){0==(a-d)%e&&0<=(a-d)/e&&b.push(a);return b})},nth:function(t,s,r,q,p){if(0==t.length){return[]}"even"==s&&(s="2n+0");"odd"==s&&(s="2n+1");r=Selector.handlers;var o=[],n=[],m;r.mark(t);m=0;for(var l;l=t[m];m++){l.parentNode._counted||(r.index(l.parentNode,q,p),n.push(l.parentNode))}if(s.match(/^\d+$/)){for(s=Number(s),m=0;l=t[m];m++){l.nodeIndex==s&&o.push(l)}}else{if(m=s.match(/^(-?\d*)?n(([+-])(\d+))?/)){for("-"==m[1]&&(m[1]=-1),s=Selector.pseudos.getIndices(m[1]?Number(m[1]):1,m[2]?Number(m[2]):0,t.length),m=0,q=s.length;l=t[m];m++){for(p=0;p<q;p++){l.nodeIndex==s[p]&&o.push(l)}}}}r.unmark(t);r.unmark(n);return o},empty:function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){"!"==g.tagName||g.firstChild&&!g.innerHTML.match(/^\s*$/)||h.push(g)}return h},not:function(h,g,n){var m=Selector.handlers;g=(new Selector(g)).findElements(n);m.mark(g);n=0;for(var l=[],k;k=h[n];n++){k._counted||l.push(k)}m.unmark(g);return l},enabled:function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){g.disabled||h.push(g)}return h},disabled:function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){g.disabled&&h.push(g)}return h},checked:function(f,e,h){e=0;h=[];for(var g;g=f[e];e++){g.checked&&h.push(g)}return h}},operators:{"=":function(d,c){return d==c},"!=":function(d,c){return d!=c},"^=":function(d,c){return d.startsWith(c)},"$=":function(d,c){return d.endsWith(c)},"*=":function(d,c){return d.include(c)},"~=":function(d,c){return(" "+d+" ").include(" "+c+" ")},"|=":function(d,c){return("-"+d.toUpperCase()+"-").include("-"+c.toUpperCase()+"-")}},matchElements:function(k,h){var p=(new Selector(h)).findElements(),o=Selector.handlers;o.mark(p);for(var n=0,m=[],l;l=k[n];n++){l._counted&&m.push(l)}o.unmark(p);return m},findElement:function(e,d,f){Object.isNumber(d)&&(f=d,d=!1);return Selector.matchElements(e,d||"*")[f||0]},findChildElements:function(k,h){var p=h.join(",");h=[];p.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/,function(b){h.push(b[1].strip())});for(var p=[],o=Selector.handlers,n=0,m=h.length,l;n<m;n++){l=new Selector(h[n].strip()),o.concat(p,l.findElements(k))}return 1<m?o.unique(p):p}});function $$(){return Selector.findChildElements(document,$A(arguments))}var Form={reset:function(b){$(b).reset();return b},serializeElements:function(k,h){"object"!=typeof h?h={hash:!!h}:void 0===h.hash&&(h.hash=!0);var p,o,n=!1,m=h.submit,l=k.inject({},function(d,c){!c.disabled&&c.name&&(p=c.name,o=$(c).getValue(),null==o||"submit"==c.type&&(n||!1===m||m&&p!=m||!(n=!0))||(p in d?(Object.isArray(d[p])||(d[p]=[d[p]]),d[p].push(o)):d[p]=o));return d});return h.hash?l:Object.toQueryString(l)},Methods:{serialize:function(d,c){return Form.serializeElements(Form.getElements(d),c)},getElements:function(b){return $A($(b).getElementsByTagName("*")).inject([],function(d,e){Form.Element.Serializers[e.tagName.toLowerCase()]&&d.push(Element.extend(e));return d})},getInputs:function(k,h,p){k=$(k);k=k.getElementsByTagName("input");if(!h&&!p){return $A(k).map(Element.extend)}for(var o=0,n=[],m=k.length;o<m;o++){var l=k[o];h&&l.type!=h||p&&l.name!=p||n.push(Element.extend(l))}return n},disable:function(b){b=$(b);Form.getElements(b).invoke("disable");return b},enable:function(b){b=$(b);Form.getElements(b).invoke("enable");return b},findFirstElement:function(d){d=$(d).getElements().findAll(function(b){return"hidden"!=b.type&&!b.disabled});var c=d.findAll(function(b){return b.hasAttribute("tabIndex")&&0<=b.tabIndex}).sortBy(function(b){return b.tabIndex}).first();return c?c:d.find(function(b){return["input","select","textarea"].include(b.tagName.toLowerCase())})},focusFirstElement:function(b){b=$(b);b.findFirstElement().activate();return b},request:function(f,e){f=$(f);e=Object.clone(e||{});var h=e.parameters,g=f.readAttribute("action")||"";g.blank()&&(g=window.location.href);e.parameters=f.serialize(!0);h&&(Object.isString(h)&&(h=h.toQueryParams()),Object.extend(e.parameters,h));f.hasAttribute("method")&&!e.method&&(e.method=f.method);return new Ajax.Request(g,e)}},Element:{focus:function(b){$(b).focus();return b},select:function(b){$(b).select();return b}}};Form.Element.Methods={serialize:function(e){e=$(e);if(!e.disabled&&e.name){var d=e.getValue();if(void 0!=d){var f={};f[e.name]=d;return Object.toQueryString(f)}}return""},getValue:function(d){d=$(d);var c=d.tagName.toLowerCase();return Form.Element.Serializers[c](d)},setValue:function(e,d){e=$(e);var f=e.tagName.toLowerCase();Form.Element.Serializers[f](e,d);return e},clear:function(b){$(b).value="";return b},present:function(b){return""!=$(b).value},activate:function(d){d=$(d);try{d.focus(),!d.select||"input"==d.tagName.toLowerCase()&&["button","reset","submit"].include(d.type)||d.select()}catch(c){}return d},disable:function(b){b=$(b);b.blur();b.disabled=!0;return b},enable:function(b){b=$(b);b.disabled=!1;return b}};var Field=Form.Element,$F=Form.Element.Methods.getValue;Form.Element.Serializers={input:function(d,c){switch(d.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(d,c);default:return Form.Element.Serializers.textarea(d,c)}},inputSelector:function(d,c){if(void 0===c){return d.checked?d.value:null}d.checked=!!c},textarea:function(d,c){if(void 0===c){return d.value}d.value=c},select:function(k,h){if(void 0===h){return this["select-one"==k.type?"selectOne":"selectMany"](k)}for(var p,o,n=!Object.isArray(h),m=0,l=k.length;m<l;m++){if(p=k.options[m],o=this.optionValue(p),n){if(o==h){p.selected=!0;break}}else{p.selected=h.include(o)}}},selectOne:function(d){var c=d.selectedIndex;return 0<=c?this.optionValue(d.options[c]):null},selectMany:function(g){var f,l=g.length;if(!l){return null}var k=0;for(f=[];k<l;k++){var h=g.options[k];h.selected&&f.push(this.optionValue(h))}return f},optionValue:function(b){return Element.extend(b).hasAttribute("value")?b.value:b.text}};Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,a,f,e){$super(e,f);this.element=$(a);this.lastValue=this.getValue()},execute:function(){var b=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(b)?this.lastValue!=b:String(this.lastValue)!=String(b)){this.callback(this.element,b),this.lastValue=b}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(d,c){this.element=$(d);this.callback=c;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var b=this.getValue();this.lastValue!=b&&(this.callback(this.element,b),this.lastValue=b)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(b){if(b.type){switch(b.type.toLowerCase()){case"checkbox":case"radio":Event.observe(b,"click",this.onElementEvent.bind(this));break;default:Event.observe(b,"change",this.onElementEvent.bind(this))}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});if(!window.Event){var Event={}}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{},relatedTarget:function(b){switch(b.type){case"mouseover":b=b.fromElement;break;case"mouseout":b=b.toElement;break;default:return null}return Element.extend(b)}});Event.Methods=function(){var d;if(Prototype.Browser.IE){var c={0:1,1:4,2:2};d=function(b,e){return b.button==c[e]}}else{d=Prototype.Browser.WebKit?function(f,e){switch(e){case 0:return 1==f.which&&!f.metaKey;case 1:return 1==f.which&&f.metaKey;default:return !1}}:function(f,e){return f.which?f.which===e+1:f.button===e}}return{isLeftClick:function(a){return d(a,0)},isMiddleClick:function(a){return d(a,1)},isRightClick:function(a){return d(a,2)},element:function(b){b=Event.extend(b).target;return Element.extend(b.nodeType==Node.TEXT_NODE?b.parentNode:b)},findElement:function(g,f){var h=Event.element(g);return h.match(f)?h:h.up(f)},pointer:function(b){return{x:b.pageX||b.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:b.pageY||b.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(b){return Event.pointer(b).x},pointerY:function(b){return Event.pointer(b).y},stop:function(b){Event.extend(b);b.preventDefault();b.stopPropagation();b.stopped=!0}}}();Event.extend=function(){var b=Object.keys(Event.Methods).inject({},function(d,e){d[e]=Event.Methods[e].methodize();return d});if(Prototype.Browser.IE){return Object.extend(b,{stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}}),function(a){if(!a){return !1}if(a._extendedByPrototype){return a}a._extendedByPrototype=Prototype.emptyFunction;var d=Event.pointer(a);Object.extend(a,{target:a.srcElement,relatedTarget:Event.relatedTarget(a),pageX:d.x,pageY:d.y});return Object.extend(a,b)}}Event.prototype=Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(Event.prototype,b);return Prototype.K}();Object.extend(Event,function(){function k(b){if(b._eventID){return b._eventID}arguments.callee.id=arguments.callee.id||1;return b._eventID=++arguments.callee.id}function h(e,d){var f=l[e]=l[e]||{};return f[d]=f[d]||[]}function p(s,r,q){var b=k(s),b=h(b,r);if(b.pluck("handler").include(q)){return !1}var a=function(c){if(!Event||!Event.extend||c.eventName&&c.eventName!=r){return !1}Event.extend(c);q.call(s,c)};a.handler=q;b.push(a);return a}function o(b,f,e){return h(b,f).find(function(c){return c.handler==e})}function n(f,d,q){var g=l[f]=l[f]||{};if(!g[d]){return !1}g[d]=g[d].without(o(f,d,q))}function m(){for(var d in l){for(var c in l[d]){l[d][c]=null}}}var l=Event.cache;window.attachEvent&&window.attachEvent("onunload",m);return{observe:function(f,c,q){f=$(f);var g=c&&c.include(":")?"dataavailable":c;c=p(f,c,q);if(!c){return f}f.addEventListener?f.addEventListener(g,c,!1):f.attachEvent("on"+g,c);return f},stopObserving:function(q,e,a){q=$(q);var g=k(q),d=e&&e.include(":")?"dataavailable":e;if(!a&&e){return h(g,e).each(function(c){q.stopObserving(e,c.handler)}),q}if(!e){return Object.keys(l[g]=l[g]||{}).each(function(c){q.stopObserving(c)}),q}var b=o(g,e,a);if(!b){return q}q.removeEventListener?q.removeEventListener(d,b,!1):q.detachEvent("on"+d,b);n(g,e,a);return q},fire:function(f,e,q){f=$(f);f==document&&document.createEvent&&!f.dispatchEvent&&(f=document.documentElement);if(document.createEvent){var g=document.createEvent("HTMLEvents");g.initEvent("dataavailable",!0,!0)}else{g=document.createEventObject(),g.eventType="ondataavailable"}g.eventName=e;g.memo=q||{};document.createEvent?f.dispatchEvent(g):f.fireEvent(g.eventType,g);return g}}}());Object.extend(Event,Event.Methods);Element.addMethods({fire:Event.fire,observe:Event.observe,stopObserving:Event.stopObserving});Object.extend(document,{fire:Element.Methods.fire.methodize(),observe:Element.Methods.observe.methodize(),stopObserving:Element.Methods.stopObserving.methodize()});(function(){function e(){f||(d&&window.clearInterval(d),document.fire("dom:loaded"),f=!0)}var d,f=!1;document.addEventListener?Prototype.Browser.WebKit?(d=window.setInterval(function(){/loaded|complete/.test(document.readyState)&&e()},0),Event.observe(window,"load",e)):document.addEventListener("DOMContentLoaded",e,!1):(document.write("<script id=__onDOMContentLoaded defer src=//:>\x3c/script>"),$("__onDOMContentLoaded").onreadystatechange=function(){"complete"==this.readyState&&(this.onreadystatechange=null,e())})})();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(d,c){return Element.insert(d,{before:c})},Top:function(d,c){return Element.insert(d,{top:c})},Bottom:function(d,c){return Element.insert(d,{bottom:c})},After:function(d,c){return Element.insert(d,{after:c})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(e,d,f){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(e,d,f)}this.xcomp=d;this.ycomp=f;this.offset=Element.cumulativeOffset(e);return f>=this.offset[1]&&f<this.offset[1]+e.offsetHeight&&d>=this.offset[0]&&d<this.offset[0]+e.offsetWidth},withinIncludingScrolloffsets:function(f,e,h){var g=Element.cumulativeScrollOffset(f);this.xcomp=e+g[0]-this.deltaX;this.ycomp=h+g[1]-this.deltaY;this.offset=Element.cumulativeOffset(f);return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+f.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+f.offsetWidth},overlap:function(d,c){if(!d){return 0}if("vertical"==d){return(this.offset[1]+c.offsetHeight-this.ycomp)/c.offsetHeight}if("horizontal"==d){return(this.offset[0]+c.offsetWidth-this.xcomp)/c.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(b){Position.prepare();return Element.absolutize(b)},relativize:function(b){Position.prepare();return Element.relativize(b)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(e,d,f){f=f||{};return Element.clonePosition(d,e,f)}};document.getElementsByClassName||(document.getElementsByClassName=function(d){function c(b){return b.blank()?null:"[contains(concat(' ', @class, ' '), ' "+b+" ')]"}d.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(b,g){g=g.toString().strip();var f=/\s/.test(g)?$w(g).map(c).join(""):c(g);return f?document._getElementsByXPath(".//*"+f,b):[]}:function(o,n){n=n.toString().strip();var t=[],s=/\s/.test(n)?$w(n):null;if(!s&&!n){return t}var r=$(o).getElementsByTagName("*");n=" "+n+" ";for(var q=0,p,l;p=r[q];q++){p.className&&(l=" "+p.className+" ")&&(l.include(n)||s&&s.all(function(b){return !b.toString().blank()&&l.include(" "+b+" ")}))&&t.push(Element.extend(p))}return t};return function(f,e){return $(e||document.body).getElementsByClassName(f)}}(Element.Methods));Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(b){this.element=$(b)},_each:function(b){this.element.className.split(/\s+/).select(function(c){return 0<c.length})._each(b)},set:function(b){this.element.className=b},add:function(b){this.include(b)||this.set($A(this).concat(b).join(" "))},remove:function(b){this.include(b)&&this.set($A(this).without(b).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);Element.addMethods();try{NodeList&&NodeList.prototype&&!NodeList.prototype._each&&(Object.extend(NodeList.prototype,{_each:function(e){for(var d=0,f=this.length;d<f;++d){e(this[d])}}}),Object.extend(NodeList.prototype,Enumerable))}catch(exception$$1){}var windowsInternetExplorer=!1,isGecko=!1,isMozilla=!1,isFirefox=!1,isCamino=!1,isSafari=!1,isNS=!1,isWebKit=!1,isOpera=!1,isiPhone=!1,isEarlyWebKitVersion=!1,browserDetected=!1,listOfIE7FloatsFix=[];function detectBrowser(){if(!1===browserDetected){windowsInternetExplorer=!1;var d=navigator.appVersion;if(-1!=d.indexOf("MSIE")&&-1==d.indexOf("Macintosh")){d=d.split("MSIE"),actualBrowserVersion=document.documentMode?8:parseFloat(d[1]),effectiveBrowserVersion=document.documentMode?document.documentMode:parseFloat(d[1]),windowsInternetExplorer=!0}else{d=navigator.userAgent.toLowerCase();isGecko=-1!=d.indexOf("gecko");isMozilla=this.isGecko&&d.indexOf("gecko/")+14==d.length;isFirefox=this.isGecko&&-1!=d.indexOf("firefox");isCamino=this.isGecko&&-1!=d.indexOf("camino");isSafari=this.isGecko&&-1!=d.indexOf("safari");isNS=this.isGecko?-1!=d.indexOf("netscape"):-1!=d.indexOf("mozilla")&&-1==d.indexOf("spoofer")&&-1==d.indexOf("compatible")&&-1==d.indexOf("opera")&&-1==d.indexOf("webtv")&&-1==d.indexOf("hotjava");isOpera=!!window.opera;var c=d.match(/applewebkit\/(\d+)/);c&&(isiPhone=-1!=d.indexOf("mobile/"),isWebKit=!0,webKitVersion=parseInt(c[1]),isEarlyWebKitVersion=522>webKitVersion)}browserDetected=!0}}detectBrowser();function shouldApplyCSSBackgroundPNGFix(){return windowsInternetExplorer&&7>effectiveBrowserVersion}function photocastHelper(f){f=new IWURL(f);if(navigator.mimeTypes&&0<navigator.mimeTypes.length){var e=navigator.mimeTypes["application/photo"];if(e){e=e.description;try{var h=e.split(" ");h&&1<h.length&&600<=h[1]&&(f.mProtocol="photo")}catch(g){}}}window.location=f.toURLString()}function loadCSS(d){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",d);document.getElementsByTagName("head")[0].appendChild(c)}function loadMozillaCSS(b){(isMozilla||isFirefox||isCamino)&&loadCSS(b)}function utf8sequence(b){return 127>=b?[b]:2047>=b?[192|b>>>6,128|b&63]:65535>=b?[224|b>>>12,128|b>>>6&63,128|b&63]:2097151>=b?[240|b>>>18,128|b>>>12&63,128|b>>>6&63,128|b&63]:67108863>=b?[248|b>>>24,128|b>>>18&63,128|b>>>12&63,128|b>>>6&63,128|b&63]:2147483647>=b?[252|b>>>30,128|b>>>24&63,128|b>>>18&63,128|b>>>12&63,128|b>>>6&63,128|b&63]:[]}function utf8encode(g){for(var f=[],l=0,k=0;k<g.length;++k){var h=g.charCodeAt(k);if(0!=l){56320<=h&&57343>=h&&(h=1024*(l-55296)+(h-56320)+65536,l=0)}else{if(!(55296>h||57343<h)){55296<=h&&56320>h&&(l=h);continue}}f=f.concat(utf8sequence(h))}g="";for(k=0;k<f.length;++k){g+=String.fromCharCode(f[k])}return g}function IELatin1Munge(f){for(var e="",h=0;h<f.length;h++){var g=f.charCodeAt(h);switch(g){case 128:g=8364;break;case 130:g=8218;break;case 131:g=402;break;case 132:g=8222;break;case 133:g=8230;break;case 134:g=8224;break;case 135:g=8225;break;case 136:g=710;break;case 137:g=8240;break;case 138:g=352;break;case 139:g=8249;break;case 140:g=338;break;case 142:g=381;break;case 145:g=8216;break;case 146:g=8217;break;case 147:g=8220;break;case 148:g=8221;break;case 149:g=8226;break;case 150:g=8211;break;case 151:g=8212;break;case 152:g=732;break;case 153:g=8482;break;case 154:g=353;break;case 155:g=8250;break;case 156:g=339;break;case 158:g=382;break;case 159:g=376}e+=String.fromCharCode(g)}return e}function IEConvertURLForPNGFix(d){var c=d;windowsInternetExplorer&&decodeURI(d).match(/[^\x00-\x7f]/)&&(c=IELatin1Munge(utf8encode(decodeURI(d))));return c}function fixAllIEPNGs(f){if(windowsInternetExplorer&&8>effectiveBrowserVersion){for(var e=0;e<document.images.length;++e){if(".png"==document.images[e].src.slice(-4).toLowerCase()){var h=$(document.images[e]),g=function(a){if(!a.originalSrc&&!a.hasClassName("noAutoPNGFix")&&!a.hasClassName("noAutoPNGFixInTree")&&void 0==a.up(".noAutoPNGFixInTree")){if(""==a.style.width&&""==a.style.height){var d=a.height;a.style.width=px(a.width);a.style.height=px(d)}d='src="'+IEConvertURLForPNGFix(a.src)+'", sizingMethod="scale"';a.setFilter("progid:DXImageTransform.Microsoft.AlphaImageLoader",d);a.originalSrc=a.src;a.src=f}};h.complete?g(h):h.onload=g.bind(null,h)}}}}function toPixels(e){var d=0,f=window.screen.logicalXDPI?window.screen.logicalXDPI/72:1.3333;0<e.indexOf("px")?d=parseFloat(e):0<e.indexOf("pt")?d=f*parseFloat(e):0<e.indexOf("in")?d=72*f*parseFloat(e):0<e.indexOf("pc")?d=12*f*parseFloat(e):0<e.indexOf("mm")?d=2.83465*f*parseFloat(e):0<e.indexOf("cm")&&(d=28.3465*f*parseFloat(e));return d}function toPixelsAtElement(f,e,h){var g=0;0<e.indexOf("%")?(g=0,g=h?$(f.parentNode).getHeight():$(f.parentNode).getWidth(),g=g*parseFloat(e)/100):g=0<e.indexOf("em")?parseFloat(e)*toPixels(Element.getStyle(f,"fontSize")):toPixels(e);return g}function backgroundPositionDimension(g,f,l,k){var h=0;if("center"===f){h=l/2-k/2}else{if("right"===f||"bottom"===f){h=l-k}else{if("left"===f||"top"===f){h=0}else{if(0<f.indexOf("px")){h=parseFloat(f)}else{if(0<f.indexOf("em")){h=parseFloat(f)*toPixels(g.currentStyle.fontSize)}else{if(0<f.indexOf("%")){h=parseFloat(f)*l/100}else{if(0<f.indexOf("pt")||0<f.indexOf("in")||0<f.indexOf("pc")||0<f.indexOf("cm")||0<f.indexOf("mm")){h=toPixels(f)}}}}}}}return h}function elementHasCSSBGPNG(b){return b.currentStyle&&b.currentStyle.backgroundImage&&-1!=b.currentStyle.backgroundImage.indexOf("url(")&&-1!=b.currentStyle.backgroundImage.indexOf('.png")')}function fixupIEPNGBG(t){if(t&&elementHasCSSBGPNG(t)){var s=t.currentStyle.backgroundImage,r=t.currentStyle.backgroundRepeat,q=t.currentStyle.backgroundPositionX,p=t.currentStyle.backgroundPositionY,o=s.indexOf("url("),n=s.indexOf(")",o),m=s.substring(o+4,n);'"'==m.charAt(0)&&(m=m.substring(1));'"'==m.charAt(m.length-1)&&(m=m.substring(0,m.length-1));var m=IEConvertURLForPNGFix(m),l="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+m+"', sizingMethod='crop');",s=function(B){var h=B.width,e=B.height,d=0,a=0,d=t.style.width?parseInt(t.style.width,10):t.offsetWidth,a=t.style.height?parseInt(t.style.height,10):t.offsetHeight,c=parseInt(t.style.paddingLeft||0,10);if(0!==d&&0!==a){var C=1,H=1,A=0,G=0;-1!=r.indexOf("repeat-x")&&1==h&&e==a||-1!=r.indexOf("repeat-y")&&h==d&&1==e||"repeat"==r&&1==h&&1==e?(h=d,e=a,l="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+m+"', sizingMethod='scale');"):-1!=r.indexOf("no-repeat")||0===h&&0===e?(h=d,e=a):-1!=r.indexOf("repeat-x")||0===e?(H=Math.floor(d/h),G=d-h*H,e=a):-1!=r.indexOf("repeat-y")?(C=Math.floor(a/e),A=a-e*C,h=d):(H=Math.floor(d/h),C=Math.floor(a/e),G=d-h*H,A=a-e*C);var F=$(document.createElement("div")),k=!0;F.setStyle({position:"relative",zIndex:"1",left:0,top:0,background:"transparent"});isNaN(parseInt(t.style.width,10))||(F.style.width=px(d));isNaN(parseInt(t.style.height,10))||(F.style.height=px(a));for(;t.hasChildNodes();){3==t.firstChild.nodeType?null===/^ *$/.exec(t.firstChild.data)&&(k=!1):k=!1,F.appendChild(t.firstChild)}k&&(F.style.lineHeight=0);var E=backgroundPositionDimension(t,q,d,B.width);B=backgroundPositionDimension(t,p,a,B.height);for(var E=E-c,c="",D=0;D<C;D++){for(currentCol=0;currentCol<H;currentCol++){c+="<div class='pngtile' style=\"position: absolute; line-height: 0px; width: "+(h==d?"100%":px(h))+"; height: "+(e==a?"100%":px(e))+"; left:"+(E+currentCol*h)+"px; top:"+(B+D*e)+"px; filter:"+l+'" > </div>'}0!==G&&(c+="<div class='pngtile' style=\"position: absolute; line-height: 0px; width: "+G+"px; height: "+e+"px; left:"+(E+currentCol*h)+"px; top:"+(B+D*e)+"px; filter:"+l+'" > </div>')}if(0!==A){for(currentCol=0;currentCol<H;currentCol++){c+="<div class='pngtile' style=\"position: absolute; line-height: 0px; width: "+h+"px; height: "+A+"px; left:"+(E+currentCol*h)+"px; top:"+(B+D*e)+"px; filter:"+l+'" > </div>'}0!==G&&(c+="<div class='pngtile' style=\"position: absolute; line-height: 0px; width: "+G+"px; height: "+A+"px; left:"+(E+currentCol*h)+"px; top:"+(B+D*e)+"px; filter:"+l+'" > </div>')}t.innerHTML=c;k||t.appendChild(F);t.style.background=""}},o=new Image;o.src=m;o.complete?s(o):o.onload=s.bind(null,o)}}function fixupIEPNGBGsInTree(f,e){if(shouldApplyCSSBackgroundPNGFix()){try{var h=$(f).select("div");isDiv(f)&&h.push(f);h.each(function(b){(!$(b).hasClassName("noAutoPNGFix")&&!$(b).hasClassName("noAutoPNGFixInTree")&&$(void 0==b.up(".noAutoPNGFixInTree"))||e)&&fixupIEPNGBG(b)})}catch(g){}}}function fixupAllIEPNGBGs(){setTimeout(fixupIEPNGBGsInTree.bind(null,document),1)}function optOutOfCSSBackgroundPNGFix(b){shouldApplyCSSBackgroundPNGFix()&&$(b).select("div").each(function(c){elementHasCSSBGPNG(c)&&$(c).addClassName("noAutoPNGFix")})}function fixupIECSS3Opacity(v){if(windowsInternetExplorer){var u=$(v);if(u&&1>parseFloat(u.currentStyle.getAttribute("opacity"))){v=parseFloat(u.currentStyle.getAttribute("opacity"));u.style.height=px(u.offsetHeight);var t=u;if("img"==u.tagName.toLowerCase()){t=$(document.createElement("div")),t.setStyle({position:u.style.position,top:u.style.top,left:u.style.left,width:u.style.width,height:u.style.height,opacity:u.style.opacity,zIndex:u.style.zIndex}),u.setStyle({left:0,top:0,opacity:""}),"a"==u.parentNode.tagName.toLowerCase()&&(u=u.parentNode),u.parentNode.insertBefore(t,u),t.appendChild(u)}else{if("div"==u.tagName.toLowerCase()){var s=u.offsetWidth,r=u.offsetHeight;extents=new IWExtents(-100,-100,s+100,2*r+100);var q=u.getStyle("position"),p=u.getStyle("float"),o="relative"==q||"absolute"==q,n="absolute"==q&&"none"==p,t=$(document.createElement("div")),l=u.className,l=l.replace(/(shadow_\d+)/g,""),l=l.replace(/(stroke_\d+)/g,""),l=l.replace(/(reflection_\d+)/g,"");t.className=l;t.setStyle({position:o?q:"relative",styleFloat:p,clear:u.getStyle("clear"),width:px(extents.right-extents.left),height:px(extents.bottom-extents.top),opacity:u.style.opacity,zIndex:u.style.zIndex});n?t.setStyle({top:px((parseFloat(u.getStyle("top"))||0)+extents.top),left:px((parseFloat(u.getStyle("left"))||0)+extents.left)}):t.setStyle({marginTop:px((parseFloat(u.getStyle("marginTop"))||0)+extents.top),marginLeft:px((parseFloat(u.getStyle("marginLeft"))||0)+extents.left),marginBottom:px((parseFloat(u.getStyle("marginBottom"))||0)-(extents.bottom-r)),marginRight:px((parseFloat(u.getStyle("marginRight"))||0)-(extents.right-s))});u.setStyle({position:"absolute",styleFloat:"none",clear:"none",left:px(-extents.left),top:px(-extents.top),margin:0,verticalAlign:"baseline",display:"block",opacity:""});if(7>effectiveBrowserVersion||8<=actualBrowserVersion){u.className=u.className.replace(/(shadow_\d+)/g,"")}u.parentNode.insertBefore(t,u);t.appendChild(u)}}$(t).setFilter("progid:DXImageTransform.Microsoft.BasicImage","opacity="+v)}}}function IWSetDivOpacity(e,d,f){windowsInternetExplorer?0.99>d||!0==f?$(e).setFilter("alpha","opacity="+100*d):$(e).killFilter("alpha"):$(e).setOpacity(d)}function IMpreload(g,f,l){var k=f+"_rollover_"+l,h=g+"/"+k+".png";self[k]=new Image;self[k].src=h;f=f+"_link_"+l;g=g+"/"+f+".png";self[f]=new Image;self[f].src=g;return !0}function swapAlphaImageLoaderFilterSrc(e,d){var f='src="'+IEConvertURLForPNGFix(d)+'", sizingMethod="scale"';e.setFilter("progid:DXImageTransform.Microsoft.AlphaImageLoader",f);e.originalSrc=e.src}function IMmouseover(f,e){var h=f+"_rollover_"+e,g=$(f+"_link_"+e);g&&(windowsInternetExplorer&&g.originalSrc?swapAlphaImageLoaderFilterSrc(g,self[h].src):g.src=self[h].src);return !0}function IMmouseout(f,e){var h=f+"_link_"+e,g=$(h);g&&(windowsInternetExplorer&&g.originalSrc?swapAlphaImageLoaderFilterSrc(g,self[h].src):g.src=self[h].src);return !0}var quicktimeAvailable=!1,quicktimeVersion702=!1,isQuicktimeDetectionInitialized=!1,minVersionNum=117604352,minVersionArray=["7","0","2"];function initializeQuicktimeDetection(){if(null!==navigator.plugins&&0<navigator.plugins.length){for(i=0;i<navigator.plugins.length;i++){var f=navigator.plugins[i];if(-1!=f.name.toLowerCase().indexOf("quicktime plug-in ")){quicktimeAvailable=!0;quicktimeVersionString=f.name.substring(18);f=quicktimeVersionString.split(".");for(j=0;j<minVersionArray.length&&j<f.length;j++){var e=f[j],h=minVersionArray[j];if(e>h||e==h&&j==minVersionArray.length-1){quicktimeVersion702=!0;break}else{if(e<h){break}}}break}}}else{if(window.ActiveXObject){try{quicktimeObj=new ActiveXObject("QuickTimeCheckObject.QuickTimeCheck.1"),null!==quicktimeObj&&(quicktimeAvailable=!0,quicktimeVersionNum=quicktimeObj.QuickTimeVersion,quicktimeVersionNum>=minVersionNum&&(quicktimeVersion702=!0))}catch(g){}}}isQuicktimeDetectionInitialized=!0}function fixupPodcast(f,e){isQuicktimeDetectionInitialized||initializeQuicktimeDetection();if(!quicktimeVersion702){var h=$(f),g=$(e);h&&g&&(g.style.display="inline",h.parentNode.removeChild(h))}}function allListBulletImagesContainedBy(f){for(var e=[],h=0;h<f.childNodes.length;++h){var g=f.childNodes[h];"IMG"!=g.nodeName||"SPAN"!=f.nodeName&&"A"!=f.nodeName||null==f.parentNode||"P"!=f.parentNode.nodeName||null==f.parentNode.parentNode||"LI"!=f.parentNode.parentNode.nodeName||(e=e.concat([g]));e=e.concat(allListBulletImagesContainedBy(g))}return e}function hideAllListBulletImagesContainedBy(b){$A(allListBulletImagesContainedBy(b)).invoke("hide")}function showAllListBulletImagesContainedBy(b){$A(allListBulletImagesContainedBy(b)).invoke("show")}function getChildOfType(e,d,f){e=$(e).select(d);return f<e.length?e.item(f):null}function containsFixedHeightIntermediate(d,c){return d===c||null==d?!1:0<parseFloat(d.style.height)?!0:containsFixedHeightIntermediate(d.parentNode,c)}function getShrinkableParaDescendants(b){return $(b).select("div.paragraph, p").findAll(function(a){return !containsFixedHeightIntermediate(a,b)})}var MINIMUM_FONT="10",UNITS="";function elementFontSize(d){var c=MINIMUM_FONT;document.defaultView?(d=document.defaultView.getComputedStyle(d,null))&&(c=d.getPropertyValue("font-size")):d.currentStyle&&(c=d.currentStyle.fontSize);0===UNITS.length&&c!=MINIMUM_FONT&&(UNITS=c.substring(c.length-2,c.length));return parseFloat(c)}function isExceptionToOneLineRule(b){return $(b).hasClassName("Header")}var HEIGHT_ERROR_MARGIN=2;function adjustFontSizeIfTooBig(F){var E,D,C=$(F);if(C&&(F=C.selectFirst("div.text-content"))){hideAllListBulletImagesContainedBy(F);var B=F.offsetHeight,A=B;""!==C.style.height&&(A=parseFloat(C.style.height));if(B>A+HEIGHT_ERROR_MARGIN){var z=200,y=getShrinkableParaDescendants(F),x=!1,v=!1;for(i=0;i<y.length;i++){E=y[i];var t=elementLineHeight(E);isNaN(t)||(v=(x=x||1.5*t>=A)&&isExceptionToOneLineRule(E));t=elementFontSize(E);isNaN(t)||(z=Math.min(z,t));for(j=0;j<E.childNodes.length;j++){if(D=E.childNodes[j],"SPAN"==D.nodeName||"A"==D.nodeName){t=elementFontSize(D),isNaN(t)||(z=Math.min(z,t))}}}for(var t=parseFloat(MINIMUM_FONT),o=0;z>t&&B>A+HEIGHT_ERROR_MARGIN&&10>o;){++o;if(x&&!v){E=parseInt(C.style.width,10),F.style.width=px(E*Math.pow(1.05,o))}else{for(B=Math.max(0.95,t/z),i=0;i<y.length;i++){E=y[i];var w=elementFontSize(E)*B,s=elementLineHeight(E)*B;for(j=0;j<E.childNodes.length;j++){if(D=E.childNodes[j],"SPAN"==D.nodeName||"A"==D.nodeName){var u=elementLineHeight(D)*B;isNaN(u)||(D.style.lineHeight=u+UNITS);u=elementFontSize(D)*B;isNaN(u)||(D.style.fontSize=u+UNITS,z=Math.min(z,u))}}isNaN(s)||(E.style.lineHeight=s+UNITS);isNaN(w)||(E.style.fontSize=w+UNITS,z=Math.min(z,w))}}B=F.offsetHeight}}showAllListBulletImagesContainedBy(F)}}function elementLineHeight(d){var c=MINIMUM_FONT;document.defaultView?(d=document.defaultView.getComputedStyle(d,null))&&(c=d.getPropertyValue("line-height")):d.currentStyle&&(c=d.currentStyle.lineHeight);0===UNITS.length&&c!=MINIMUM_FONT&&(UNITS=c.substring(c.length-2,c.length));return parseFloat(c)}function adjustLineHeightIfTooBig(t){var s=$(t);if(s&&(t=s.selectFirst("div.text-content"))){hideAllListBulletImagesContainedBy(t);var r=t.offsetHeight,q=r;""!==s.style.height&&(q=parseFloat(s.style.height));if(r>q+HEIGHT_ERROR_MARGIN){for(var s=!0,p=0;s&&r>q+HEIGHT_ERROR_MARGIN&&10>p;){s=!1;++p;r=getShrinkableParaDescendants(t);for(i=0;i<r.length;i++){var o,n,m=r[i];o=elementFontSize(m);n=0.95*elementLineHeight(m);!isNaN(n)&&n>=1.1*o&&(m.style.lineHeight=n+UNITS,s=!0);for(j=0;j<m.childNodes.length;j++){var l=m.childNodes[j];if("SPAN"==l.nodeName||"A"==l.nodeName){o=elementFontSize(l),n=0.95*elementLineHeight(l),!isNaN(n)&&n>=1.1*o&&(l.style.lineHeight=n+UNITS,s=!0)}}}r=t.offsetHeight}}showAllListBulletImagesContainedBy(t)}}function isDiv(b){return b.nodeType==Node.ELEMENT_NODE&&"DIV"==b.tagName}function fixupAllMozInlineBlocks(){if(isFirefox||isCamino){for(var l=$$("div.inline-block"),k=0,r=l.length;k<r;++k){var q=l[k],p=document.createElement("div");p.style.position="relative";p.style.overflow="visible";for(var o=0,n=q.childNodes.length;o<n;++o){var m=q.childNodes[0];q.removeChild(m);p.appendChild(m)}q.appendChild(p)}}}function getWidthDefiningAncestor(b){return b.up('[style~="width:"]')||document.body}function updateListOfIE7FloatsFix(f){f=$(f);var e=f.getStyle("float");if("left"==e||"right"==e){f=getWidthDefiningAncestor(f);for(var h=f.select('[style~="float:"]');0<h.length;){var g=h.shift(),e=g.getStyle("float");"left"!=e&&"right"!=e||getWidthDefiningAncestor(g)!==f||!listOfIE7FloatsFix.include(g)&&listOfIE7FloatsFix.push(g)}}}function fixupFloatsIfIE7(){if(windowsInternetExplorer&&7==effectiveBrowserVersion&&0<listOfIE7FloatsFix.length){for(var e=[],d,f;0<listOfIE7FloatsFix.length;){d=listOfIE7FloatsFix.shift(),f=d.getStyle("display"),$(d).hide(),e.push({element:d,displayStyle:f})}for(;0<e.length;){f=e.shift(),d=f.element,f=f.displayStyle,$(d).setStyle({display:f})}}}function joltLater(b){setTimeout(function(c){$(c).hide()}.bind(null,b),100);setTimeout(function(c){$(c).show()}.bind(null,b),200)}function performPostEffectsFixups(){fixupAllMozInlineBlocks();fixupFloatsIfIE7()}function reduceLeftMarginIfIE6(b){windowsInternetExplorer&&7>effectiveBrowserVersion&&($(b).style.marginLeft=px(parseFloat($(b).style.marginLeft||0)-1))}function reduceRightMarginIfIE6(b){windowsInternetExplorer&&7>effectiveBrowserVersion&&($(b).style.marginRight=px(parseFloat($(b).style.marginRight||0)-1))}Object.objectType=function(d){var c=typeof d;"object"==c&&d.constructor==Array&&(c="Array");return c};var trace=function(){};function ajaxGetDocumentElement(d){var c=null;d&&(d.responseXML&&d.responseXML.documentElement?c=d.responseXML:d.responseText&&(window.DOMParser?c=(new DOMParser).parseFromString(d.responseText,"text/xml"):window.ActiveXObject&&(c=new ActiveXObject("MSXML.DOMDocument"))&&(c.async=!1,c.loadXML(d.responseText))));return c?c.documentElement:null}function iWLog(b){window.console?window.console.log(b):window.dump&&window.dump(b+"\n")}function iWPosition(h,g,n,m,l){var k="";h&&(k="position: absolute; ");h="";m&&l&&(h=" width: "+m+"px; height: "+l+"px;");return k+"left: "+g+"px; top: "+n+"px;"+h}var gIWUtilsTransparentGifURL="";function setTransparentGifURL(b){""==gIWUtilsTransparentGifURL&&(gIWUtilsTransparentGifURL=b)}function transparentGifURL(){(function(){return""!=gIWUtilsTransparentGifURL}).assert("Transparent image URL not set");return gIWUtilsTransparentGifURL}function imgMarkup(h,g,n,m,l){var k="";h&&(g=g||"",n=n||"",m=m||"",windowsInternetExplorer&&(7>effectiveBrowserVersion||8>effectiveBrowserVersion&&!1!==l)&&(g+=" filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+IEConvertURLForPNGFix(h)+"', sizingMethod='scale');",h=gIWUtilsTransparentGifURL),0<g.length&&(g=' style="'+g+'"'),0<n.length&&(n=" "+n),0<m.length&&(m=' alt="'+m.stringByEscapingXML(!0)+'"'),k='<img src="'+h+'"'+g+n+m+" />");return k}function setImgSrc(e,d,f){windowsInternetExplorer&&(7>effectiveBrowserVersion||8>effectiveBrowserVersion&&!1!==f)&&".png"==d.slice(-4).toLowerCase()?($(e).setFilter("progid:DXImageTransform.Microsoft.AlphaImageLoader",'src="'+IEConvertURLForPNGFix(d)+'", sizingMethod="scale"'),e.src=gIWUtilsTransparentGifURL):e.src=d}function iWOpacity(d){var c="";return c=windowsInternetExplorer?" progid:DXImageTransform.Microsoft.Alpha(opacity="+100*d+"); ":" opacity: "+d+"; "}var IWRange=Class.create({initialize:function(d,c){this.setLocation(d);this.setLength(c)},length:function(){return this.p_length},setLength:function(b){this.p_length=parseFloat(b)},location:function(){return this.p_location},setLocation:function(b){this.p_location=parseFloat(b)},max:function(){return this.location()+this.length()},min:function(){return this.location()},shift:function(b){this.setLocation(this.location()+b)},containsLocation:function(b){return b>=this.min()&&b<this.max()}}),IWPageRange=Class.create(IWRange,{initialize:function($super,a,d){$super(a,d)},setMax:function(d){var c=this.p_lengthForMax(d);this.setLocation(Math.max(d-c,0));this.setLength(d-this.location())},shift:function($super,a){$super(a);this.setMax(this.max())},p_lengthForMax:function(b){return 9>=b?5:3}});function px(b){return b.toString()+"px"}function depx(b){return parseInt(b||0)}function locationHRef(){var b=window.location.href;b.match(/file:\/[^\/]/)&&(b="file://"+b.substr(5));return b}function IWZeroSize(){return new IWSize(0,0)}var IWSize=Class.create({initialize:function(d,c){this.width=d;this.height=c},scale:function(e,d,f){void 0===f&&(f=!1);void 0===d&&(d=e);e=new IWSize(this.width*e,this.height*d);f&&(e.width=Math.round(e.width),e.height=Math.round(e.height));return e},scaleToTargetSize:function(g,f){var l=new IWSize(this.width,this.height);if(0<l.width&&0<l.height){var k=g.width/l.width,h=g.height/l.height,k=f?Math.min(k,h):Math.max(k,h);l.width*=k;l.height*=k}return l},scaleToFit:function(b){return this.scaleToTargetSize(b,!0)},round:function(){return this.scale(1,1,!0)},toString:function(){return"Size("+this.width+", "+this.height+")"},aspectRatio:function(){return this.width/this.height},subtractSize:function(b){return new IWSize(this.width-b.width,this.height-b.height)}});function IWZeroPoint(){return new IWPoint(0,0)}var IWPoint=Class.create({initialize:function(d,c){this.x=d;this.y=c},scale:function(e,d,f){void 0===f&&(f=!1);void 0===d&&(d=e);e=new IWPoint(this.x*e,this.y*d);f&&(e.x=Math.round(e.x),e.y=Math.round(e.y));return e},round:function(){return this.scale(1,1,!0)},offset:function(d,c){return new IWPoint(this.x+d,this.y+c)},toString:function(){return"Point("+this.x+", "+this.y+")"}});function IWZeroRect(){return new IWRect(0,0,0,0)}var IWRect=Class.create({initialize:function(){1==arguments.length?(this.origin=arguments[0].origin,this.size=arguments[0].size):2==arguments.length?(this.origin=arguments[0],this.size=arguments[1]):4==arguments.length&&(this.origin=new IWPoint(arguments[0],arguments[1]),this.size=new IWSize(arguments[2],arguments[3]))},clone:function(){return new IWRect(this.origin.x,this.origin.y,this.size.width,this.size.height)},toString:function(){return"Rect("+this.origin.toString()+", "+this.size.toString()+")"},maxX:function(){return this.origin.x+this.size.width},maxY:function(){return this.origin.y+this.size.height},union:function(f){var e=Math.min(this.origin.x,f.origin.x),h=Math.min(this.origin.y,f.origin.y),g=Math.max(this.maxX(),f.maxX());f=Math.max(this.maxY(),f.maxY());return new IWRect(e,h,g-e,f-h)},intersection:function(f){var e=Math.max(this.origin.x,f.origin.x),h=Math.max(this.origin.y,f.origin.y),g=Math.min(this.maxX(),f.maxX());f=Math.min(this.maxY(),f.maxY());return e<g&&h<f?new IWRect(e,h,g-e,f-h):new IWRect(0,0,0,0)},scale:function(f,e,h){void 0===h&&(h=!1);void 0===e&&(e=f);var g=this.origin.scale(f,e,h);f=this.size.scale(f,e,h);return new IWRect(g.x,g.y,f.width,f.height)},scaleSize:function(e,d,f){e=this.size.scale(e,d,f);return new IWRect(this.origin.x,this.origin.y,e.width,e.height)},round:function(){return this.scale(1,1,!0)},offset:function(e,d){var f=this.origin.offset(e,d);return new IWRect(f.x,f.y,this.size.width,this.size.height)},offsetToOrigin:function(){return this.offset(-this.origin.x,-this.origin.y)},centerPoint:function(){return this.offset(this.size.width/2,this.size.height/2)},position:function(){return iWPosition(!0,this.origin.x,this.origin.y,this.size.width,this.size.height)},clip:function(){return"clip: rect("+this.origin.y+"px, "+this.maxX()+"px, "+this.maxY()+"px, "+this.origin.x+"px);"},toExtents:function(){return new IWExtents(this.origin.x,this.origin.y,this.origin.x+this.size.width,this.origin.y+this.size.height)},paddingToRect:function(b){return new IWPadding(this.origin.x-b.origin.x,this.origin.y-b.origin.y,b.maxX()-this.maxX(),b.maxY()-this.maxY())},fill:function(b){b.fillRect(this.origin.x,this.origin.y,this.size.width,this.size.height)},clear:function(b){b.clearRect(this.origin.x,this.origin.y,this.size.width,this.size.height)}}),IWExtents=Class.create({initialize:function(f,e,h,g){this.left=f;this.top=e;this.right=h;this.bottom=g},clone:function(){return new IWExtents(this.left,this.top,this.right,this.bottom)},toRect:function(){return new IWRect(this.left,this.top,this.right-this.left,this.bottom-this.top)}}),IWPadding=Class.create({initialize:function(f,e,h,g){this.left=f;this.top=e;this.right=h;this.bottom=g}}),IWNotificationCenter=Class.create({initialize:function(){this.mDispatchTable=[]},addObserver:function(f,e,h,g){this.p_observersForName(h).push([f,e,g])},removeObserver:function(b){},postNotification:function(d){if(null!=d.name()){var c=this.mDispatchTable[d.name()];this.p_postNotificationToObservers(d,c)}this.p_postNotificationToObservers(d,this.mDispatchTable[null])},postNotificationWithInfo:function(e,d,f){this.postNotification(new IWNotification(e,d,f))},p_postNotificationToObservers:function(h,g){if(null!=h&&null!=g){for(var n=0;n<g.length;n++){var m=g[n][0],l=g[n][1],k=g[n][2];null!=k&&k!==h.object()||l.call(m,h)}}},p_observersForName:function(b){void 0===this.mDispatchTable[b]&&(this.mDispatchTable[b]=[]);return this.mDispatchTable[b]}}),NotificationCenter=new IWNotificationCenter,IWNotification=Class.create({initialize:function(e,d,f){this.mName=e;this.mObject=d;this.mUserInfo=f},name:function(){return this.mName},object:function(){return this.mObject},userInfo:function(){return this.mUserInfo}}),IWAssertionsEnabled=!0;function IWAssert(g,f){if(IWAssertionsEnabled){var l=function(e,d){var m='Assertion failed: "'+e.toString().match(/return[\t\r ]*([^};\r]*)/)[1]+'"';null!=d&&(m+=".  "+d);iWLog(m)},k=function(d,c){!1==d()&&l(d,c)};k(function(){return"function"==typeof g},"IWAssert requires its first argument to be a function.  Try wrapping your assertion in function(){return ... }");var h=g();k(function(){return null!=h},"The result of your assertion function is null; did you remember your return statement?");k(function(){return !0==h||!1==h},"The result of your assertion function is neither true nor false");!1==h&&l(g,f)}}Function.prototype.assert=function(b){IWAssert(this,b)};function getTextFromNode(e){if(e.textContent){return e.textContent}if(e.innerText){return e.innerText}var d="";if(e.nodeType==Node.ELEMENT_NODE){e=e.childNodes;for(var f=0;f<e.length;++f){d+=getTextFromNode(e[f])}}else{if(e.nodeType==Node.TEXT_NODE){return e.nodeValue}}return d}function getChildElementsByTagNameNS(k,h,p,o){for(var n=[],m=0;m<k.childNodes.length;++m){var l=k.childNodes[m];l.namespaceURI?l.namespaceURI==h&&(l.localName&&l.localName==o?n.push(l):l.tagName==p+":"+o&&n.push(l)):""==h&&l.tagName==o&&n.push(l)}return n}function getFirstChildElementByTagNameNS(f,e,h,g){f=getChildElementsByTagNameNS(f,e,h,g);return 0<f.length?f[0]:null}function getChildElementTextByTagName(f,e){var h="";if(null!==f){var g=f.getElementsByTagName(e);if(1<g.length){throw"MultipleResults"}1==g.length&&(h=getTextFromNode(g[0]))}return h}function getChildElementTextByTagNameNS(g,f,l,k){var h="";if(g){g=getChildElementsByTagNameNS(g,f,l,k);if(1<g.length){throw"MultipleResults"}1==g.length&&(h=getTextFromNode(g[0]))}return h}function adjustNodeIds(d,c){""!=d.id&&(d.id+="$"+c);$(d).childElements().each(function(b){adjustNodeIds(b,c)})}function substituteSpans(d,c){$H(c).each(function(a){var e="span."+a.key;$(d).select(e).each(function(b){var h=a.value[0],f=a.value[1];"text"==h?b.update(f):"html"==h&&(b.innerHTML=f)})})}Element.addMethods({selectFirst:function(e,d){var f=$(e).select(d);return 0<f.length?$(f[0]):null},setVisibility:function(d,c){d=$(d);d.style.display=c?"inline":"none";return d},ensureHasLayoutForIE:function(b){b=$(b);windowsInternetExplorer&&8>effectiveBrowserVersion&&!b.currentStyle.hasLayout&&(b.style.zoom=1)},setFilter:function(e,d,f){e=$(e);e.style.filter=e.style.filter.replace(RegExp(d+"\\([^\\)]*\\);","gi"),"")+d+"("+f+"); ";return e},killFilter:function(d,c){d=$(d);d.style.filter=d.style.filter.replace(RegExp(c+"\\([^\\)]*\\);","gi"),"");return d},cloneNodeExcludingIDs:function(h,g){var n=h.cloneNode(g);if(g){for(var m=n.select("[id]"),l=0,k=m.length;l<k;++l){m[l].id=""}}n.id="";return n}});Object.extend(Array.prototype,{contains:function(b){return -1!=$A(this).indexOf(b)},isEqual:function(d){if(this.length==d.length){for(var c=0;c<this.length;++c){if(this[c]!=d[c]){return !1}}return !0}return !1},minusArray:function(d){var c=$A(this);$A(d).each(function(b){c=c.without(b)});return c}});String.stringWithFormat=function(h){for(var g="",n=1,m=/%((\d+)\$)?([%s])?/;;){foundIndex=h.search(m);if(-1==foundIndex){g+=h;break}0<foundIndex&&(g+=h.substring(0,foundIndex));var l=h.match(m),k=l[3];"%"==k?g+="%":(argumentNumber=l[2]?parseInt(l[2]):n++,argument=argumentNumber<arguments.length?arguments[argumentNumber]:"","s"==k&&(g+=argument));h=h.substring(foundIndex+l[0].length)}return g};Object.extend(String.prototype,{lastPathComponent:function(){return this.substr(this.lastIndexOf("/")+1)},pathExtension:function(){var d=this.lastIndexOf("/"),c=this.lastIndexOf(".");return c>d+1&&0<c?this.slice(c+1):this},stringByDeletingLastPathComponent:function(){return this.substr(0,this.lastIndexOf("/"))},stringByDeletingPathExtension:function(){var d=this.lastIndexOf("/"),c=this.lastIndexOf(".");return c>d+1&&0<c?this.slice(0,c):this},stringByAppendingPathComponent:function(b){return this.endsWith("/")?this+b:this+"/"+b},stringByAppendingAsQueryString:function(b){return this+"?"+$H(b).toQueryString()},stringByUnescapingXML:function(){var b=this.replace(/&lt;/g,"<"),b=b.replace(/&gt;/g,">"),b=b.replace(/&quot;/g,'"'),b=b.replace(/&apos;/g,"'");return b=b.replace(/&amp;/g,"&")},stringByEscapingXML:function(d){var c=this.replace(/&/g,"&amp;"),c=c.replace(/</g,"&lt;");d&&(c=c.replace(/>/g,"&gt;"),c=c.replace(/"/g,"&quot;"),c=c.replace(/'/g,"&apos;"));return c},stringByConvertingNewlinesToBreakTags:function(){return this.replace(/\n\r|\n|\r/g,"<br />")},urlStringByDeletingQueryAndFragment:function(){var d=this,c=d.lastIndexOf("?");if(0<c){return d.substr(0,c)}c=d.lastIndexOf("#");0<c&&(d=d.substr(0,c));return d},toRelativeURL:function(d){var c=this;d&&0==this.indexOf(d)&&(d=d.length,"/"==this.charAt(d)&&++d,c=this.substring(d));return c},toAbsoluteURL:function(){var b=this;-1==this.indexOf(":/")&&(b=document.URL.urlStringByDeletingQueryAndFragment().stringByDeletingLastPathComponent().stringByAppendingPathComponent(this));return b},toRebasedURL:function(b){return this.toRelativeURL(b).toAbsoluteURL()},httpURLRegExp:function(){void 0==String.m_httpurlRegExp&&(String.m_httpurlRegExp=RegExp("((http)|(feed)|(https))://(((((((([A-Za-z]|[0-9])(([A-Za-z]|[0-9])|-)*([A-Za-z]|[0-9]))|([A-Za-z]|[0-9]))\\.)*(([A-Za-z]([A-Za-z]|-)*([A-Za-z]|[0-9]))|[A-Za-z]))|([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)))(:[0-9]+)?)(/(((((([A-Za-z]|[0-9]|[$_.+-]|[!*'(),])|(%([0-9]|[A-Fa-f])([0-9]|[A-Fa-f]))))|[;:@&=])*)(/((((([A-Za-z]|[0-9]|[$_.+-]|[!*'(),])|(%([0-9]|[A-Fa-f])([0-9]|[A-Fa-f]))))|[;:@&=])*))*)(\\?((((([A-Za-z]|[0-9]|[$_.+-]|[!*'(),])|(%([0-9]|[A-Fa-f])([0-9]|[A-Fa-f]))))|[;:@&=])*))?)?"));return String.m_httpurlRegExp},isHTTPURL:function(){var b=this.match(this.httpURLRegExp());return b?b[0]==this:!1},firstHTTPURL:function(){var b=this.match(this.httpURLRegExp());return b?b[0]:void 0},httpURLQueryString:function(){var b=this.indexOf("?"),b=-1==b?this.indexOf("&"):b;return -1==b?"":this.slice(b+1)},plaintextgsub:function(f,e){for(var h=this;;){var g=h.indexOf(f);if(-1==g){break}h=h.substr(0,g)+e+h.substr(g+f.length)}return h}});function IWURL(e){try{if(0==arguments.length||1==arguments.length&&(""==e||null==e)){this.p_initWithParts(null,null,null,null,null)}else{if(1==arguments.length){e.replace("file://localhost/","file:///");var d=e.match(/^([A-Z]+):\/\/([^/]*)((\/[^?#]*)(\?([^#]*))?(#(.*))?)?/i);d?this.p_initWithParts(d[1],d[2],d[4]||"/",d[6]||null,d[8]||null):(d=e.match(/^([^?#]*)(\?([^#]*))?(#(.*))?/))&&this.p_initWithParts(null,null,d[1],d[3]||null,d[5]||null)}}}catch(f){print("Exception Parsing URL:"+f)}}Object.extend(IWURL,{p_normalizePathComponents:function(e){for(var d=0;d<e.length;){var f=e[d];""==f||"."==f?e.splice(d,1):".."==f?0<d?(f=e[d-1],"/"==f?e.splice(d,1):".."!=f?(e.splice(d-1,2),d-=1):d+=1):d+=1:d+=1}return e}});Object.extend(IWURL.prototype,{p_initWithParts:function(g,f,l,k,h){this.mProtocol=g;this.mAuthority=f;this.mQuery=k;this.mFragment=h;this.mPathComponents=null;if(l){this.mPathComponents=l.split("/");""==this.mPathComponents[0]&&(this.mPathComponents[0]="/");for(g=0;g<this.mPathComponents.length;++g){this.mPathComponents[g]=decodeURIComponent(this.mPathComponents[g])}this.mPathComponents=IWURL.p_normalizePathComponents(this.mPathComponents)}},copy:function(){var d=new IWURL;d.mProtocol=this.mProtocol;d.mAuthority=this.mAuthority;d.mQuery=this.mQuery;d.mFragment=this.mFragment;d.mPathComponents=null;if(this.mPathComponents){d.mPathComponents=[];for(var c=0;c<this.mPathComponents.length;++c){d.mPathComponents[c]=String(this.mPathComponents[c])}}return d},toString:function(){var b="null";this.mPathComponents&&(b="",this.mPathComponents.each(function(a){b=""==b?"[ "+a:b+(", "+a)}),b=""==b?"[]":b+" ]");return"{"+this.mProtocol+", "+this.mAuthority+", "+b+", "+this.mQuery+", "+this.mFragment+"}"},isAbsolute:function(){return this.mPathComponents&&this.mPathComponents.length&&"/"==this.mPathComponents[0]},isRelative:function(){return null==this.mProtocol},encodedPathComponents:function(){for(var d=[],c=0;c<this.mPathComponents.length;){0==c&&"/"==this.mPathComponents[0]?d.push("/"):d.push(encodeURIComponent(this.mPathComponents[c])),c+=1}return d},encodedPath:function(){return this.isAbsolute()?"/"+this.encodedPathComponents().slice(1).join("/"):this.encodedPathComponents().join("/")},toURLString:function(){return this.isRelative()?this.encodedPath()+(this.mQuery?"?"+this.mQuery:"")+(this.mFragment?"#"+this.mFragment:""):this.mProtocol+"://"+this.mAuthority+this.encodedPath()+(this.mQuery?"?"+this.mQuery:"")+(this.mFragment?"#"+this.mFragment:"")},isEqual:function(e){var d=!0;if(this.mPathComponents&&e.mPathComponents&&this.mPathComponents.length==e.mPathComponents.length){for(var f=0;f<this.mPathComponents.length;++f){if(this.mPathComponents[f]!=e.mPathComponents[f]){d=!1;break}}}else{d=!1}return this.mProtocol==e.mProtocol&&this.mAuthority==e.mAuthority&&d&&this.mQuery==e.mQuery&&this.mFragment==e.mFragment},resolve:function(d){if(!this.isRelative()){return new IWURL(this.toURLString())}var c=d.copy();c.mQuery=null;c.mFragment=null;null==c.mPathComponents&&(c.mPathComponents=[]);this.mPathComponents.each(function(b){c.mPathComponents.push(b)});c.mPathComponents=IWURL.p_normalizePathComponents(c.mPathComponents);return c},relativize:function(e){if(e&&e.mPathComponents&&0<e.mPathComponents.length&&this.mProtocol==e.mProtocol&&this.mAuthority==e.mAuthority){for(var d=0,f=0;f<Math.min(this.mPathComponents.length,e.mPathComponents.length);++f){if(this.mPathComponents[f]==e.mPathComponents[f]){d=f}else{break}}f=[];for(e=e.mPathComponents.length-1;e>d;--e){f.push("..")}for(d+=1;d<this.mPathComponents.length;++d){f.push(this.mPathComponents[d])}d=new IWURL;d.mPathComponents=IWURL.p_normalizePathComponents(f);d.mQuery=this.mQuery;d.mFragment=this.mFragment;return d}return this.copy()}});
var IWAllImages={},IWAllImageObjects={};function IWCreateImage(b){return IWAllImages[b]||new IWImage(b)}var IWNamedImages={};function IWImageNamed(b){return(b=IWNamedImages[b])?IWCreateImage(b):null}function IWRegisterNamedImage(b,d){IWNamedImages[b]=d}var IWImageEnableUnload=isiPhone,IWImage=Class.create({initialize:function(b){IWAllImages.hasOwnProperty(b)&&iWLog("warning -- use IWCreateImage rather than new IWImage and you'll get better performance");this.mPreventUnloading=0;this.mLoaded=this.mLoading=!1;this.mURL=b;this.mCallbacks=[];IWAllImages[b]=this},sourceURL:function(){return this.mURL},loaded:function(){return this.mLoaded},load:function(b,f){if(this.mLoaded&&null!=b){f?setTimeout(b,0):b()}else{if(null!=b&&this.mCallbacks.push(b),!1==this.mLoading){this.mLoading=!0;var e=new Image;IWAllImageObjects[this.sourceURL()]=e;e.onload=this.p_onload.bind(this);e.src=this.mURL}}},unload:function(b){(b||IWImageEnableUnload)&&this.mLoaded&&(0>=this.mPreventUnloading?(this.mLoading=this.mLoaded=!1,IWAllImageObjects[this.sourceURL()]=null):this.mPreventedUnload=!0)},preventUnloading:function(){0==this.mPreventUnloading&&(this.mPreventedUnload=!1);++this.mPreventUnloading},allowUnloading:function(){--this.mPreventUnloading;0>=this.mPreventUnloading&&this.mPreventedUnload&&this.unload()},naturalSize:function(){(function(){return void 0!==this.mNaturalSize}).bind(this).assert();return this.mNaturalSize},imgObject:function(){return IWAllImageObjects[this.sourceURL()]},p_onload:function(){this.preventUnloading();this.mLoaded=!0;if(void 0===this.mNaturalSize){var b=this.imgObject();(function(){return void 0!==b}).assert();this.mNaturalSize=new IWSize(b.width,b.height)}for(var d=0;d<this.mCallbacks.length;++d){this.mCallbacks[d]()}this.mCallbacks=[];this.allowUnloading()},toString:function(){return"IWImage("+this.mNaturalSize+", "+this.mURL+")"}});function IWCreateLoadingArea(){null==IWSharedLoadingAreaManager&&(IWSharedLoadingAreaManager=new IWLoadingAreaManager);return IWSharedLoadingAreaManager.createLoadingArea()}var IWLoadingAreaManager=Class.create({initialize:function(){var b=$(document.createElement("div"));b.setStyle({visibility:"hidden",position:"absolute",width:0,height:0,overflow:"hidden"});document.body.appendChild(b);this.mCurrentLoadingArea=b},createLoadingArea:function(){var b=document.createElement("div");this.mCurrentLoadingArea.appendChild(b);return b}}),IWSharedLoadingAreaManager=null,IWSharedEffectRegistry=null,allStyleSheetsLoaded=!1,timeStyleSheetsAppearedInDOM=null;function IWCreateEffectRegistry(){null==IWSharedEffectRegistry&&(IWSharedEffectRegistry=new IWEffectRegistry);return IWSharedEffectRegistry}var IWEffectRegistry=Class.create({initialize:function(){this.mEffects=null},registerEffects:function(b){this.mEffects=b},applyEffects:function(){var b=[],b=b.concat(this.p_queueForEffectType("crop")),b=b.concat(this.p_queueForEffectType("stroke")),b=b.concat(this.p_queueForEffectType("reflection")),b=b.concat(this.p_queueForEffectType("shadow"));this.p_applyEffectsFromQueue(b)},p_queueForEffectType:function(f){for(var h=[],g=0,e=f+"_"+g++;effect=this.mEffects[e];){h=h.concat(this.p_queueForEffectClass(effect,e)),e=f+"_"+g++}return h},p_queueForEffectClass:function(h,l,k){var g=[];for(k=k||$$("."+l);k&&0<k.length;){var j=k.shift(),i=j.select("."+l);0<i.length&&(k=k.minusArray(i),g=g.concat(this.p_queueForEffectClass(h,l,i)));g.push({element:j,effect:h})}return g},p_allStyleSheetsLoaded:function(){if(isCamino||isFirefox){if(null!=timeStyleSheetsAppearedInDOM){duration=(new Date).getTime()-timeStyleSheetsAppearedInDOM,100<duration&&(allStyleSheetsLoaded=!0,timeStyleSheetsAppearedInDOM=null)}else{if(!allStyleSheetsLoaded){for(var b=0,f=document.styleSheets.length;b<f;b++){var e=document.styleSheets[b];e.href&&-1!=e.href.indexOf("Moz.css")&&(timeStyleSheetsAppearedInDOM=(new Date).getTime())}}}}else{allStyleSheetsLoaded=!0}return allStyleSheetsLoaded},p_applyEffectsFromQueue:function(f){for(var h=(new Date).getTime(),g=0,e=this.p_allStyleSheetsLoaded();0<f.length&&100>g&&e;){(g=f.shift())&&g.effect&&g.element&&g.effect.applyToElement(g.element),g=(new Date).getTime()-h}0<f.length?setTimeout(this.p_applyEffectsFromQueue.bind(this,f),0):performPostEffectsFixups()}});function IWChildOffset(g,j,i){var f=0,h=0;if(j){for(;g&&g!=j;){i&&"absolute"!=g.style.position&&"relative"!=g.style.position||(f+=g.offsetLeft,h+=g.offsetTop),g=g.parentNode}}return new IWPoint(f,h)}function IWImageExtents(j,p,o,i,n,m){o=new IWRect(o,i,n-o,m-i);for(i=0;i<p.length;++i){n=new IWRect(p[i].offsetLeft,p[i].offsetTop,p[i].offsetWidth,p[i].offsetHeight);if(j){for(m=p[i].parentNode;m&&m!=j;){if("absolute"==m.style.position||"relative"==m.style.position){n.origin.x+=m.offsetLeft||0,n.origin.y+=m.offsetTop||0}var l=function(b){return"hidden"==b},k=[m.style.overflow,m.style.overflowX].any(l),l=[m.style.overflow,m.style.overflowY].any(l);if(k||l){k=new IWRect(k?m.offsetLeft:n.origin.x,l?m.offsetTop:n.origin.y,k?m.offsetWidth:n.size.width,l?m.offsetHeight:n.size.height),n=n.intersection(k)}m=m.parentNode}}0<n.size.width&&0<n.size.height&&(o=0<o.size.width&&0<o.size.height?o.union(n):n.clone())}return{left:o.origin.x,top:o.origin.y,right:o.origin.x+o.size.width,bottom:o.origin.y+o.size.height}}function IWEffectChildren(b,f){b=$(b);var e=b.select(".inline-block");return b.descendants().findAll(function(c){if(!f&&c.match("div.badge-fill")||c.match("img")){for(var i=!1,h=0,d=e.length;!1==i&&h<d;++h){i=c.descendantOf(e[h])}return!1==i}return!1})}function IWClippingNode(b){if(b){if(b.style&&(b.style.overflow||b.style.overflowX||b.style.overflowY)){if([b.style.overflow,b.style.overflowX,b.style.overflowY].include("hidden")){return b}}else{return IWClippingNode(b.parentNode)}}return null}var IWShadow=Class.create({initialize:function(b){this.mBlurRadius=b.blurRadius;this.mOffset=b.offset;this.mColor=b.color;this.mOpacity=b.opacity},applyToElement:function(D){new IWPoint(D.offsetLeft,D.offsetTop);var B=new IWSize(D.offsetWidth,D.offsetHeight),A=1;if(null!=D){if(D=$(D),A=D.getStyle("opacity"),windowsInternetExplorer){var C=$(D.cloneNode(!1));D.parentNode.insertBefore(C,D);var z=$(document.createElement("DIV")),y=D.cloneNodeExcludingIDs(!0);z.appendChild(y);z.select("map").each(function(b){b.parentNode.removeChild(b)});z.select(".IWReflection").invoke("remove");C.appendChild(z);C.appendChild(D);D.setStyle({top:0,left:0});var x=0.5*this.mBlurRadius,w=this.mOffset.y-0.6*this.mBlurRadius;z.setStyle({position:"absolute",left:px(this.mOffset.x-0.6*this.mBlurRadius-500),top:px(w-500),width:px(B.width+1000),height:px(B.height+1000)});y.setStyle({position:"absolute",left:px(500),top:px(500),padding:0,margin:0});z.style.filter="progid:DXImageTransform.Microsoft.MaskFilter() progid:DXImageTransform.Microsoft.MaskFilter(color="+this.mColor+") progid:DXImageTransform.Microsoft.Alpha(opacity="+100*this.mOpacity*A+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+x+")";C.hasClassName("inline-block")&&(z=C.style.top,y=C.style.marginTop,z&&!y?(z=toPixelsAtElement(C,z,!0),C.style.marginTop=px(-z)):!z&&y?(y=toPixelsAtElement(C,y,!0),C.style.rootTop=px(-y)):z&&y&&(z=toPixelsAtElement(C,z,!0),y=toPixelsAtElement(C,y,!0),z!=y&&(C.style.rootTop=px(-y))));0!=D.offsetTop&&(C=(C=D.style.top)?toPixelsAtElement(D,C,!0):0,C-=D.offsetTop,D.style.top=px(C))}else{var r=IWEffectChildren(D,!1),C=IWImageExtents(D,r,0,0,B.width,B.height),v=void 0;D.sandwich&&D.sandwich.canvas&&(v=D.sandwich.canvas);C.left-=Math.max(this.mBlurRadius-this.mOffset.x,0);C.top-=Math.max(this.mBlurRadius-this.mOffset.y,0);C.right+=Math.max(this.mBlurRadius+this.mOffset.x,0);C.bottom+=Math.max(this.mBlurRadius+this.mOffset.y,0);C.left=Math.floor(C.left);C.top=Math.floor(C.top);C.right=Math.ceil(C.right);C.bottom=Math.ceil(C.bottom);var u=C.left,o=C.top;C.right-=C.left;C.bottom-=C.top;C.left=0;C.top=0;var F=C.right-C.left,E=C.bottom-C.top;void 0===v&&(v=$(document.createElement("canvas")));if((C=v.getContext?v.getContext("2d"):null)&&C.shadowColor){$(v).setAttribute("width",F);$(v).setAttribute("height",E);$(v).setStyle({position:"absolute",top:px(o),left:px(u)});var j=void 0;D.sandwich&&D.sandwich.workingCanvas&&(j=D.sandwich.workingCanvas);void 0===j&&(j=v.cloneNode(!1));var i=this,C=D.sandwich||{};C.loadedElements=[];C.elementCount=r.length;C.loadedElementCount=0;C.canvas=v;C.workingCanvas=j;D.sandwich=C;C.onImageLoad=function(h,a,g){var f=IWChildOffset(a,D,!0);this.loadedElements[h]={imgObject:g.imgObject(),left:f.x-u,top:f.y-o,width:a.offsetWidth,height:a.offsetHeight,render:function(b){b.drawImage(this.imgObject,this.left,this.top,this.width,this.height)}};this.loadedElementCount++;this.loadedElementCount==this.elementCount&&this.renderShadow()};C.registerDiv=function(f,a){var e=IWChildOffset(a,D,!0);this.loadedElements[f]={divElement:a,left:e.x-u,top:e.y-o,width:a.offsetWidth,height:a.offsetHeight,render:function(g){var h=this.divElement,d=h.getStyle("background-color"),h=parseFloat(h.style.opacity||1);g.save();g.globalAlpha*=h;g.fillStyle=d;g.fillRect(this.left,this.top,this.width,this.height);g.restore()}};this.loadedElementCount++;this.loadedElementCount==this.elementCount&&this.renderShadow()};C.renderShadow=function(){null===v.parentNode&&D.insertBefore(v,D.firstChild);v.parentNode.insertBefore(j,v);var a=j.getContext("2d");(new IWRect(0,0,F,E)).clear(a);var p=D.getStyle("background-image"),p=p&&0==p.indexOf("url("),n=D.getStyle("background-color"),m=i.p_alphaComponent(n);IWAssert(function(){return 0==m||1==m},"alpha must be 0 or 1 for background color if shadow is applied");p=p||0<m;n=(new IWRect(-u,-o,B.width,B.height)).round();p&&(a.fillStyle="rgba(0,0,0,1)",n.fill(a));for(var k=0;k<this.loadedElements.length;++k){var l=this.loadedElements[k],d=$(IWClippingNode(r[k]));if(d&&d.descendantOf(D)){var c=IWChildOffset(d,D,!0);a.save();a.rect(c.x-u,c.y-o,d.offsetWidth,d.offsetHeight);a.clip();l.render(a);a.restore()}else{l.render(a)}}a=v.getContext("2d");(new IWRect(0,0,F,E)).clear(a);k=!0;a.globalAlpha=A;if(a.shadowColor){k=!0;a.save();if(k=!(isWebKit&&isEarlyWebKitVersion)){(l=i.mColor.toLowerCase().match(/#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/))&&4<=l.length?a.shadowColor="rgba("+parseInt(l[1],16)+", "+parseInt(l[2],16)+", "+parseInt(l[3],16)+", "+i.mOpacity+")":(l=i.mColor.match(/rgb\(([0-9\.]+),[ ]*([0-9\.]+),[ ]*([0-9\.]+)\)/))&&4<=l.length?a.shadowColor="rgba("+l[1]+", "+l[2]+", "+l[3]+", "+i.mOpacity+")":(iWLog("not using shadow alpha, failed to match "+i.mColor),k=!1)}!1==k&&(a.globalAlpha*=i.mOpacity,a.shadowColor=i.mColor);a.shadowBlur=i.mBlurRadius;a.shadowOffsetX=i.mOffset.x;a.shadowOffsetY=i.mOffset.y;a.drawImage(j,0,0);a.restore();k=!1==k?1>i.mOpacity:!1}k&&a.drawImage(j,0,0);if(p){n.clear(a);a.save();a.globalAlpha=A;a.rect(n.origin.x,n.origin.y,n.size.width,n.size.height);a.clip();for(k=0;k<this.loadedElements.length;++k){this.loadedElements[k].render(a)}a.restore()}j.parentNode&&(j.parentNode.removeChild(j),delete this.workingCanvas,this.workingCanvas=null);for(a=0;a<r.length;++a){r[a].style.opacity=0}};if(0<r.length){for(z=0;z<r.length;++z){y=$(r[z]),y.match("img")?(x=IWCreateImage(y.src),x.load(C.onImageLoad.bind(C,z,y,x))):y.match("div")&&C.registerDiv(z,y)}}else{C.renderShadow()}j.style.visibility="hidden"}}}},p_alphaComponent:function(b){var d=1;b&&-1!=b.indexOf("rgba(")&&b.match(/rgba\((?:\s*\S+\s*,\s*){3}(\S+)\s*\)/)&&(d=RegExp.$1);return d}}),IWReflection=Class.create({initialize:function(b){this.mOpacity=b.opacity;this.mOffset=Math.max(b.offset,1);this.mFadeSustain=0.4;this.mMaxSustain=120},applyToElement:function(y){var w=new IWRect(y.offsetLeft,y.offsetTop,y.offsetWidth,y.offsetHeight),v=0.75*Math.min(y.offsetHeight*this.mFadeSustain,this.mMaxSustain);if(null!=y){var x=IWEffectChildren(y,!0),u=IWImageExtents(y,x,0,0,w.size.width,w.size.height),t=u.right-u.left,r=u.bottom-u.top,q=u.left,j=u.top,p=r-w.size.height;if(windowsInternetExplorer){var o=$(document.createElement("div"));o.setStyle({position:"absolute",left:px(u.left),top:px(w.size.height),marginTop:px(this.mOffset),width:px(t),height:px(v),overflow:"hidden",filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+100*this.mOpacity+", style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy=100)"});o.addClassName("IWReflection");v=$(document.createElement("div"));v.setStyle({position:"relative",width:px(t),height:px(r),filter:"flipv"});t=$(y.cloneNode(!0));t.setStyle({left:px(-u.left),top:px(-u.top),position:"absolute"});t.className=t.className.replace(/(shadow_\d+)/g,"");o.appendChild(v);v.appendChild(t);y.insertBefore(o,y.firstChild)}else{o=$(document.createElement("canvas"));u.right-=u.left;u.bottom-=u.top;u.left=0;u.top=0;o.setAttribute("width",u.right-u.left);o.setAttribute("height",v+this.mOffset/2);o.setStyle({position:"absolute",top:px(w.size.height),marginTop:px(this.mOffset),left:px(q)});y.insertBefore(o,y.firstChild);var i=o.getContext("2d");i.clearRect(0,0,o.width,o.height);u={loadedImgs:[]};u.imgCount=x.length;var z=this;u.onImageLoad=function(h,c,b){var a=IWChildOffset(c,y,!0);this.loadedImgs[h]={imgObject:b.imgObject(),left:a.x-q,top:a.y-j-p,width:c.offsetWidth,height:c.offsetHeight};c=!1;if(this.loadedImgs.length>=this.imgCount){for(c=!0,h=0;c&&h<this.loadedImgs.length;++h){void 0===this.loadedImgs[h]&&(c=!1)}}if(c){i.save();i.translate(0,w.size.height-1);i.scale(1,-1);for(h=0;h<this.loadedImgs.length;++h){c=this.loadedImgs[h],(b=$(IWClippingNode(x[h])))&&b.descendantOf(y)?(a=IWChildOffset(b,y,!0),i.save(),i.rect(a.x-q,a.y-j-p,b.offsetWidth,b.offsetHeight),i.clip(),i.drawImage(c.imgObject,c.left,c.top,c.width,c.height),i.restore()):i.drawImage(c.imgObject,c.left,c.top,c.width,c.height)}i.restore();i.save();i.globalCompositeOperation="destination-out";h=i.createLinearGradient(0,0,0,o.height);h.addColorStop(1,"rgba(255, 255, 255, 1.0)");h.addColorStop(0,"rgba(255, 255, 255, "+(1-z.mOpacity)+")");i.fillStyle=h;-1!=navigator.appVersion.indexOf("WebKit")?(i.rect(0,0,o.width,2*o.height),i.fill()):i.fillRect(0,0,o.width,2*o.height);i.restore()}};for(t=0;t<x.length;++t){r=x[t],v=IWCreateImage(r.src),v.load(u.onImageLoad.bind(u,t,r,v))}}}}}),kLeft=0,kTopLeft=1,kTop=2,kTopRight=3,kRight=4,kBottomRight=5,kBottom=6,kBottomLeft=7,kPartCount=8,IWStrokeParts=Class.create({initialize:function(f,h,g,e){this.mStrokeParts=f;this.mMaxImageSize=h;if(this.mShouldClip=g){this.mStrokeWidth=e}},p_imageLayout:function(j){var p=this.mStrokeParts,o=this.mMaxImageSize.width-j.width,i=this.mMaxImageSize.height-j.height;j=p[kTopLeft].rect;var n=p[kTopRight].rect.offset(-o,0),m=p[kBottomRight].rect.offset(-o,-i),l=p[kBottomLeft].rect.offset(0,-i),k=p[kTop].rect;k.size.width=n.origin.x-k.origin.x;o=p[kRight].rect.offset(-o,0);o.size.height=m.origin.y-o.origin.y;i=p[kBottom].rect.offset(0,-i);i.size.width=m.origin.x-i.origin.x;p=p[kLeft].rect;p.size.height=l.origin.y-p.origin.y;return[p,j,k,n,o,m,i,l]},p_imageMarkup:function(h,l){for(var k="",g=this.p_imageLayout(h),j=kLeft;j<kPartCount;++j){var i=g[j].position();l&&(i+="z-index: "+l+";");k+=imgMarkup(this.mStrokeParts[j].url,i)}return k},markupForImageStreamEntry:function(j,p){var o=new IWRect(0,0,p.width,p.height),i="",n="",m=o.clone();if(this.mShouldClip){var l=this.mStrokeWidth/2+1,k=this.mStrokeWidth/2+1,i='<div style="overflow: hidden; '+(new IWRect(l,k,p.width-this.mStrokeWidth-2,p.height-this.mStrokeWidth-2)).position()+'">',n="</div>";m.origin.x-=l;m.origin.y-=k}o='<div class="framedImage" style="'+o.position()+'">';o=o+i+j.thumbnailMarkupForRect(m);o+=n;o+=this.p_imageMarkup(p,2);return o+="</div>"},applyToElement:function(i){i=$(i);if(null!=i){i.parentNode&&$(i.parentNode).ensureHasLayoutForIE();var n=new IWSize(i.offsetWidth,i.offsetHeight);i.insert(this.p_imageMarkup(n,i.hasClassName("aboveStrokesAndFrames")?-1:"auto"));if(!i.hasClassName("flowDefining")&&"absolute"!=i.style.position){var m=new IWRect(0,0,i.offsetWidth,i.offsetHeight),h=IWZeroRect();this.p_imageLayout(n).each(function(b){h=h.union(b)});var n=m.paddingToRect(h),m=(m=Element.getStyle(i,"marginLeft"))?toPixelsAtElement(i,m,!1):0,l=Element.getStyle(i,"marginTop"),l=l?toPixelsAtElement(i,l,!0):0,k=Element.getStyle(i,"marginRight"),k=k?toPixelsAtElement(i,k,!1):0,j=Element.getStyle(i,"marginBottom"),j=j?toPixelsAtElement(i,j,!0):0;windowsInternetExplorer?(i.setStyle({marginLeft:px(Math.max(0,n.left-1)+m),marginTop:px(Math.max(0,n.top-1)+l),marginRight:px(Math.max(0,n.right-1)+k),marginBottom:px(Math.max(0,n.bottom-1)+j)}),7==effectiveBrowserVersion&&updateListOfIE7FloatsFix(i)):i.setStyle({marginLeft:px(n.left+m),marginTop:px(n.top+l),marginRight:px(n.right+k),marginBottom:px(n.bottom+j)})}}},strokeExtra:function(b){b||(b=this.mMaxImageSize);rect=new IWRect(IWZeroPoint(),b);b=this.p_imageLayout(rect.size);var d=IWZeroRect();b.each(function(c){d=d.union(c)});return rect.paddingToRect(d)}}),IWStroke=Class.create({initialize:function(b,f,e){this.mStrokeURL=b;this.mStrokeRect=f;this.mMaxImageSize=e},p_strokeRect:function(b){return this.mStrokeRect.scale(b.width/this.mMaxImageSize.width,b.height/this.mMaxImageSize.height,!0)},p_imageMarkup:function(b,f){var e=this.p_strokeRect(b).position();f&&(e+="z-index: "+f+";");return imgMarkup(this.mStrokeURL,e)},markupForImageStreamEntry:function(f,h){var g=new IWRect(0,0,h.width,h.height),e='<div class="framedImage" style="'+g.position()+'">',e=e+f.thumbnailMarkupForRect(g),e=e+this.p_imageMarkup(h,2);return e+"</div>"},applyToElement:function(h){h=$(h);if(null!=h){h.parentNode&&$(h.parentNode).ensureHasLayoutForIE();var l=new IWSize(h.offsetWidth,h.offsetHeight);h.insert(this.p_imageMarkup(l,h.hasClassName("aboveStrokesAndFrames")?-1:"auto"));if(!h.hasClassName("flowDefining")&&"absolute"!=h.style.position){var l=(new IWRect(0,0,h.offsetWidth,h.offsetHeight)).paddingToRect(this.mStrokeRect),k=Element.getStyle(h,"marginLeft"),k=k?toPixelsAtElement(h,k,!1):0,g=Element.getStyle(h,"marginTop"),g=g?toPixelsAtElement(h,g,!0):0,j=Element.getStyle(h,"marginRight"),j=j?toPixelsAtElement(h,j,!1):0,i=Element.getStyle(h,"marginBottom"),i=i?toPixelsAtElement(h,i,!0):0;h.setStyle({marginLeft:px(l.left+k),marginTop:px(l.top+g),marginRight:px(l.right+j),marginBottom:px(l.bottom+i)});windowsInternetExplorer&&7==effectiveBrowserVersion&&updateListOfIE7FloatsFix(h)}}},strokeExtra:function(b){void 0===b&&(b=this.mMaxImageSize);return(new IWRect(IWZeroPoint(),b)).paddingToRect(this.p_strokeRect(b))}}),IWEmptyStroke=Class.create({initialize:function(){},markupForImageStreamEntry:function(f,h){var g=new IWRect(0,0,h.width,h.height),e='<div class="framedImage" style="'+g.position()+'">',e=e+f.thumbnailMarkupForRect(g);return e+"</div>"},applyToElement:function(b){},strokeExtra:function(){return new IWPadding(0,0,0,0)}}),kSFRFrameTopLeft=0,kSFRFrameTop=1,kSFRFrameTopRight=2,kSFRFrameRight=3,kSFRFrameBottomRight=4,kSFRFrameBottom=5,kSFRFrameBottomLeft=6,kSFRFrameLeft=7,kSFRFrameClip=0,kSFRFrameStretchEvenly=1,kSFRFrameStretchToFit=2,IWPhotoFrame=Class.create({initialize:function(N,L,K,M,J,I,H,G,D,F,E,C,v,u,B,A,r,o,j,i){this.mImages=N;this.mMaskImages=L;this.mTilingMode=K;this.mLeftInset=J;this.mTopInset=I;this.mRightInset=H;this.mBottomInset=G;this.mUnscaledLeftWidth=D;this.mUnscaledTopHeight=F;this.mUnscaledRightWidth=E;this.mUnscaledBottomHeight=C;this.mLeftTileHeight=v;this.mTopTileWidth=u;this.mRightTileHeight=B;this.mBottomTileWidth=A;this.mAdornmentURL=r;this.mAdornmentPosition=o;this.mAdornmentSize=j;this.mMinimumAssetScale=i;this.setAssetScale(M)},setAssetScale:function(b){b=Math.min(b,1);this.mAssetScale=b=Math.max(this.mMinimumAssetScale,b);this.mLeftWidth=this.scaledValue(this.mUnscaledLeftWidth);this.mTopHeight=this.scaledValue(this.mUnscaledTopHeight);this.mRightWidth=this.scaledValue(this.mUnscaledRightWidth);this.mBottomHeight=this.scaledValue(this.mUnscaledBottomHeight)},scaledValue:function(b){return Math.ceil(b*this.mAssetScale)},markupForImageStreamEntry:function(i,n){var m=this.mAssetScale,h=this.maximumAssetScaleForImageSize(n);h<m&&h>=this.mMinimumAssetScale&&this.setAssetScale(h);var l=this.coverageRect(new IWRect(0,0,n.width,n.height)),k=new IWRect(-l.origin.x,-l.origin.y,n.width,n.height),l=l.offsetToOrigin(),j='<div class="framedImage" style="'+l.position()+'">',j=j+i.thumbnailMarkupForRect(k);h>=this.mMinimumAssetScale&&(null!=this.mImages&&(j+=this.p_buildFrame(this.mImages,l.size,2)),null!=this.mAdornmentURL&&(j+=this.p_adornmentMarkupForRect(k,2)));j+="</div>";m!=this.mAssetScale&&this.setAssetScale(m);return j},strokeExtra:function(){var b=0;this.mAdornmentURL&&(b=Math.max(0,(this.scaledValue(this.mAdornmentSize.height)-this.mTopHeight)/2-this.mAdornmentPosition.y));return new IWPadding(this.mLeftWidth-this.scaledValue(this.mLeftInset),this.mTopHeight-this.scaledValue(this.mTopInset)+b,this.mRightWidth-this.scaledValue(this.mRightInset),this.mBottomHeight-this.scaledValue(this.mBottomInset))},applyToElement:function(h){h=$(h);if(null!=h){h.parentNode&&$(h.parentNode).ensureHasLayoutForIE();var l="",k=new IWRect(0,0,h.offsetWidth,h.offsetHeight);if(k.size.width>=this.scaledValue(this.mLeftInset)+this.scaledValue(this.mRightInset)&&k.size.height>=this.scaledValue(this.mTopInset)+this.scaledValue(this.mTopInset)){if(null!=this.mImages){var g=this.coverageRect(k),j=new IWRect(g.origin.x,g.origin.y,0,0),l=l+('<div style="'+j.position()+'">'),l=l+this.p_buildFrame(this.mImages,g.size,h.hasClassName("aboveStrokesAndFrames")?-1:"auto"),l=l+"</div>"}null!=this.mAdornmentURL&&(l+=this.p_adornmentMarkupForRect(k))}h.insert(l);if(!h.hasClassName("flowDefining")&&"absolute"!=h.style.position){var l=this.strokeExtra(),k=(k=Element.getStyle(h,"marginLeft"))?toPixelsAtElement(h,k,!1):0,g=(g=Element.getStyle(h,"marginTop"))?toPixelsAtElement(h,g,!0):0,j=(j=Element.getStyle(h,"marginRight"))?toPixelsAtElement(h,j,!1):0,i=Element.getStyle(h,"marginBottom"),i=i?toPixelsAtElement(h,i,!0):0;h.setStyle({marginLeft:px(l.left+k),marginTop:px(l.top+g),marginRight:px(l.right+j),marginBottom:px(l.bottom+i)});windowsInternetExplorer&&7==effectiveBrowserVersion&&updateListOfIE7FloatsFix(h)}}},maximumAssetScaleForImageSize:function(g){var j=1;if(g.width>this.mLeftInset+this.mRightInset&&g.height>this.mTopInset+this.mBottomInset){j=1}else{if(g.width<Math.ceil(this.mLeftInset*this.mMinimumAssetScale)+Math.ceil(this.mRightInset*this.mMinimumAssetScale)||g.height<Math.ceil(this.mTopInset*this.mMinimumAssetScale)+Math.ceil(this.mBottomInset*this.mMinimumAssetScale)){j=0}else{j=1;if(this.mLeftInset+this.mRightInset>=g.width&&0<this.mLeftInset+this.mRightInset){var i=Math.floor(this.mLeftInset/(this.mLeftInset+this.mRightInset)*g.width)/this.mLeftInset,f=Math.floor(this.mRightInset/(this.mLeftInset+this.mRightInset)*g.width)/this.mRightInset,i=i-1e-7,f=f-1e-7,j=Math.max(i,f);g.width<Math.ceil(this.mLeftInset*j)+Math.ceil(this.mRightInset*j)&&(j=Math.min(i,f));if(j<this.mMinimumAssetScale||g.width<Math.ceil(this.mLeftInset*j)+Math.ceil(this.mRightInset*j)){j=this.mMinimumAssetScale}}i=1;if(this.mTopInset+this.mBottomInset>=g.height&&0<this.mTopInset+this.mBottomInset){var f=Math.floor(this.mTopInset/(this.mTopInset+this.mBottomInset)*g.height)/this.mTopInset,h=Math.floor(this.mBottomInset/(this.mTopInset+this.mBottomInset)*g.height)/this.mBottomInset,f=f-1e-7,h=h-1e-7,i=Math.max(f,h);g.height<Math.ceil(this.mTopInset*i)+Math.ceil(this.mBottomInset*i)&&(i=Math.min(f,h));if(i<this.mMinimumAssetScale||g.height<Math.ceil(this.mTopInset*i)+Math.ceil(this.mBottomInset*i)){i=this.mMinimumAssetScale}}j=Math.min(j,i)}}return j},coverageRect:function(f){var h=f.origin.x+this.scaledValue(this.mLeftInset),g=f.origin.y+this.scaledValue(this.mTopInset),e=f.maxX()-this.scaledValue(this.mRightInset);f=f.maxY()-this.scaledValue(this.mBottomInset);h-=this.mLeftWidth;e+=this.mRightWidth;g-=this.mTopHeight;f+=this.mBottomHeight;return(new IWRect(h,g,e-h,f-g)).round()},p_buildFrame:function(v,t,s){var u=t.width;t=t.height;var r=this.mLeftWidth,q=u-this.mRightWidth,p=this.mTopHeight,o=t-this.mBottomHeight,i="",n=s?"z-index: "+s+";":"";if(r<=q+1&&p<=o+1){var j=new IWRect(0,0,this.mLeftWidth,this.mTopHeight),i=imgMarkup(v[kSFRFrameTopLeft].sourceURL(),j.position()+n),j=new IWRect(0,t-this.mBottomHeight,this.mLeftWidth,this.mBottomHeight),i=i+imgMarkup(v[kSFRFrameBottomLeft].sourceURL(),j.position()+n),j=new IWRect(u-this.mRightWidth,0,this.mRightWidth,this.mTopHeight),i=i+imgMarkup(v[kSFRFrameTopRight].sourceURL(),j.position()+n),j=new IWRect(u-this.mRightWidth,t-this.mBottomHeight,this.mRightWidth,this.mBottomHeight),i=i+imgMarkup(v[kSFRFrameBottomRight].sourceURL(),j.position()+n),n=new IWSize(this.mLeftWidth,this.scaledValue(this.mLeftTileHeight)),j=new IWRect(0,p,n.width,n.height),i=i+this.p_tiles(v[kSFRFrameLeft].sourceURL(),j,p,o,!0,s),n=new IWSize(this.mRightWidth,this.scaledValue(this.mRightTileHeight)),j=new IWRect(u-this.mRightWidth,p,n.width,n.height),i=i+this.p_tiles(v[kSFRFrameRight].sourceURL(),j,p,o,!0,s),n=new IWSize(this.scaledValue(this.mTopTileWidth),this.mTopHeight),j=new IWRect(r,0,n.width,n.height),i=i+this.p_tiles(v[kSFRFrameTop].sourceURL(),j,r,q,!1,s),n=new IWSize(this.scaledValue(this.mBottomTileWidth),this.mBottomHeight),j=new IWRect(r,t-this.mBottomHeight,n.width,n.height),i=i+this.p_tiles(v[kSFRFrameBottom].sourceURL(),j,r,q,!1,s)}return i},p_adornmentRectForRect:function(b){var d=new IWPoint;b=this.coverageRect(b);d.x=(b.size.width-(this.mLeftWidth+this.mRightWidth))*this.mAdornmentPosition.x;d.x+=b.origin.x+this.mLeftWidth;d.y=this.mTopHeight/2+(b.origin.y+this.mAdornmentPosition.y);b=new IWSize(this.scaledValue(this.mAdornmentSize.width),this.scaledValue(this.mAdornmentSize.height));d=new IWPoint(d.x-b.width/2,d.y-b.height/2);return new IWRect(d,b)},p_adornmentMarkupForRect:function(b,f){var e=f?"z-index: "+f+";":"";return imgMarkup(this.mAdornmentURL,this.p_adornmentRectForRect(b).position()+e)},p_tiles:function(y,w,v,x,u,t){var r="";if(v<x){t=t?"z-index: "+t+";":"";var q=w.clone(),j=this.mTilingMode;u?(q.size.height=Math.ceil(x-v),1==w.size.height&&(j=kSFRFrameStretchToFit)):(q.size.width=Math.ceil(x-v),1==w.size.width&&(j=kSFRFrameStretchToFit));if(j==kSFRFrameStretchToFit){r+=imgMarkup(y,q.position()+t)}else{var p=w.size,p=u?p.height:p.width,o=Math.ceil((x-v)/p);if(5>p||20<o){IWAssert(function(){return!0},"Please remove this assert and the surrouding block."),iWLog("Too many frame image tiles are getting generated.  Performance may be affected.")}j==kSFRFrameStretchEvenly?(p=(x-v)/o,u?w.size.height=p:w.size.width=p):j==kSFRFrameClip&&(r+='<div style="'+q.position()+'overflow: hidden; ">',w.origin.x=0,w.origin.y=0);for(v=0;v<o;++v){x=Math.round(w.origin.x);var q=Math.round(w.origin.x+w.size.width),i=Math.round(w.origin.y),z=Math.round(w.origin.y+w.size.height);x=new IWRect(x,i,q-x,z-i);r+=imgMarkup(y,x.position()+t);w=u?w.offset(0,p):w.offset(p,0)}j==kSFRFrameClip&&(r+="</div>")}}return r}});
var widgets=[],identifiersToStringLocalizations=[],Widget=Class.create({initialize:function(h,e,l,k,j,i){h&&(this.instanceID=h,this.widgetPath=e,this.sharedPath=l,this.sitePath=k,this.preferences=j,this.runningInApp=void 0===i?!1:i,this.onloadReceived=!1,this.preferences&&!0==this.runningInApp&&(this.preferences.widget=this,setTransparentGifURL(this.sharedPath.stringByAppendingPathComponent("None.gif"))),this.div().widget=this,window[h]=this,widgets.push(this),widgets[h]=this,this.constructor.instances||(this.constructor.instances=[]),this.constructor.instances.push(this))},div:function(){var b=this.instanceID;1==arguments.length&&(b=this.instanceID+"-"+arguments[0]);return $(b)},onload:function(){this.onloadReceived=!0},onunload:function(){},didBecomeSelected:function(){},didBecomeDeselected:function(){},didBeginEditing:function(){},didEndEditing:function(){},setNeedsDisplay:function(){},preferenceForKey:function(d){var c;this.preferences&&(c=this.preferences[d]);return c},initializeDefaultPreferences:function(d){var c=this;$H(d).each(function(b){void 0===c.preferenceForKey(b.key)&&c.setPreferenceForKey(b.value,b.key,!1)})},setPreferenceForKey:function(e,d,f){this.runningInApp?(void 0===f&&(f=!0),!1==f&&this.preferences.disableUndoRegistration&&this.preferences.disableUndoRegistration(),this.preferences[d]=e,!1==f&&this.preferences.enableUndoRegistration&&this.preferences.enableUndoRegistration()):(this.preferences[d]=e,this.changedPreferenceForKey(d))},changedPreferenceForKey:function(b){},postNotificationWithNameAndUserInfo:function(d,c){void 0!==window.NotificationCenter&&NotificationCenter.postNotification(new IWNotification(d,null,c))},sizeWillChange:function(){},sizeDidChange:function(){},widgetWidth:function(){var b=this.div();return b?b.offsetWidth:null},widgetHeight:function(){var b=this.div();return b?b.offsetHeight:null},getInstanceId:function(d){var c=this.instanceID+"-"+d;2==arguments.length&&(c+="$"+arguments[1]);return c},getElementById:function(d){var c=this.getInstanceId.apply(this,arguments);return $(c)},localizedString:function(b){return LocalizedString(this.widgetIdentifier,b)},showView:function(e){e=this.m_views[e];if(e!=this.m_currentView&&e!=this.m_futureView){this.m_futureView=e;this.m_fadeAnimation&&this.m_fadeAnimation.stop();var d=this.m_currentView,f=this.m_currentView=e;this.m_futureView=null;this.m_fadeAnimation=new SimpleAnimation(function(){delete this.m_fadeAnimation}.bind(this));this.m_fadeAnimation.pre=function(){d&&d.ensureDiv().setStyle({zIndex:0,opacity:1});f&&(f.ensureDiv().setStyle({zIndex:1,opacity:0}),f.show(),f.render())};this.m_fadeAnimation.post=function(){!d||d.hide();!f||f.ensureDiv().setStyle({zIndex:"",opacity:1});f&&f.doneFadingIn&&f.doneFadingIn()};this.m_fadeAnimation.update=function(b){!f||f.ensureDiv().setOpacity(b);!d||d.ensureDiv().setOpacity(1-b)}.bind(this);this.m_fadeAnimation.start()}}});Widget.onload=function(){for(var b=0;b<widgets.length;b++){widgets[b].onload()}};Widget.onunload=function(){for(var b=0;b<widgets.length;b++){widgets[b].onunload()}};function RegisterWidgetStrings(d,c){identifiersToStringLocalizations[d]=c}function LocalizedString(f,e){var h=void 0,g=identifiersToStringLocalizations[f];void 0===g?iWLog("warning: no localizations for widget "+f+", (key:"+e+")"):h=g[e];void 0===h&&(iWLog("warning: couldn't find a localization for '"+e+"' for widget "+f),h=e);return h}function WriteLocalizedString(d,c){document.write(LocalizedString(d,c))}var JSONFeedRendererWidget=Class.create(Widget,{initialize:function($super,a,l,k,i,h,j){a&&$super(a,l,k,i,h,j)},changedPreferenceForKey:function(a){try{var b=this.preferenceForKey(a);"sfr-shadow"==a&&(this.sfrShadow=null!=b?eval(b):null,this.renderFeedItems("sfr-shadow"));"sfr-stroke"==a&&(this.sfrStroke=null!==b?eval(b):null,this.invalidateFeedItems("sfr-stroke"));"sfr-reflection"==a&&(this.sfrReflection=null!==b?eval(b):null,this.invalidateFeedItems("sfr-reflection"))}catch(c){iWLog("JSONFeedRendererWidget: exception"),debugPrintException(c)}},invalidateFeedItems:function(b){trace("invalidateFeedItems(%s)",b);null!==this.pendingRender&&clearTimeout(this.pendingRender);this.pendingRender=setTimeout(function(){this.pendingRender=null;this.renderFeedItems(b)}.bind(this),50)},rerenderImage:function(j,i,p,o,m,l,n,k){j.update();o&&(j.strokeApplied=!1,j.reflectionApplied=!1,j.shadowApplied=!1,j.setStyle({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),j.style.position="relative",i.style.position="relative",p=p||transparentGifURL(),p=IWCreateImage(p),p.load(function(f,e,r,q,g){e=this.croppingDivForImage(f,m,l);r.appendChild(e);q&&q();f.sourceURL()!==transparentGifURL()&&this.applyEffects(r);g&&g()}.bind(this,p,i,j,n,k)))},croppingDivForImage:function(i,h,n){var m=null;if(i.loaded()){var k=$(document.createElement("img"));k.src=i.sourceURL();var j=i.naturalSize(),m=$(document.createElement("div"));m.appendChild(k);i=function(b){b&&(j=new IWSize(b.width,b.height));b=j;if("Square"==h){b=new IWSize(n,n)}else{if("Landscape"==h){b=new IWSize(n,0.75*n)}else{if("Portrait"==h){b=new IWSize(n,n*(4/3))}else{var d=n/b.width;b=b.scale(d,d,!0)}}}d=b.width/j.width;j.aspectRatio()>b.aspectRatio()&&(d=b.height/j.height);var d=j.scale(d),c=new IWPoint(Math.abs(d.width-b.width)/2,Math.abs(d.height-b.height)/2);k.setStyle({width:px(d.width),height:px(d.height),marginLeft:px(-c.x),marginTop:px(-c.y),position:"relative"});m.setStyle({width:px(b.width),height:px(b.height),overflow:"hidden",position:"relative"});m.className="crop"};if(windowsInternetExplorer&&7>effectiveBrowserVersion&&-1!=k.src.indexOf(transparentGifURL())){var l=new Image;l.src=k.originalSrc;l.complete?i(l):l.onload=i.bind(null,l)}else{i(null)}}return m},applyEffects:function(d){if(this.sfrShadow||this.sfrReflection||this.sfrStroke){if(void 0===d.offsetWidth||void 0===d.offsetHeight||0===d.offsetWidth||0===d.offsetHeight){setTimeout(JSONFeedRendererWidget.prototype.applyEffects.bind(this,d),0);return}this.sfrStroke&&!1==d.strokeApplied&&(this.sfrStroke.applyToElement(d),d.strokeApplied=!0);this.sfrReflection&&!1==d.reflectionApplied&&(this.sfrReflection.applyToElement(d),d.reflectionApplied=!0);this.sfrShadow&&!this.disableShadows&&!1==d.shadowApplied&&(this.sfrShadow.applyToElement(d),d.shadowApplied=!0);this.runningInApp&&419>=window.webKitVersion&&this.preferences.setNeedsDisplay&&this.preferences.setNeedsDisplay()}if(windowsInternetExplorer){var c=d.select(".crop");if(c=c[c.length-1]){c.onclick=function(){for(var a=d.parentNode,e=locationHRef();a&&"A"!=a.tagName;){a=a.parentNode}a&&(e=a.href);window.location=e},c.onmouseover=function(){this.style.cursor="pointer"}}}},summaryExcerpt:function(e,d){var f=document.createElement("div");f.innerHTML=e;0<d?(new HTMLTextModel(f)).truncateAroundPosition(d,"..."):0===d&&(f.innerHTML="");return f.innerHTML}}),PrefMarkupWidget=Class.create(Widget,{initialize:function($super,a,l,k,i,h,j){a&&$super(a,l,k,i,h,j)},onload:function(){this.runningInApp||this.setUpSubDocumentOnLoad()},setUpSubDocumentOnLoad:function(){var b=this;this.getElementById("frame")&&setTimeout(function(){b.loadedSubDocument()},250)},loadedSubDocument:function(){var d=this.getElementById("frame"),d=d.contentWindow||d.contentDocument;d.document&&(d=d.document);if(d.body){this.fixTargetOnElements(d,"a"),this.fixTargetOnElements(d,"form")}else{var c=this;setTimeout(function(){c.loadedSubDocument()},250)}},fixTargetOnElements:function(g,e){for(var j=g.getElementsByTagName(e),i=0;i<j.length;i++){var h=j[i].target;if(void 0===h||""==h){j[i].target="_top"}}}});function IWScrollbar(b){}IWScrollbar.prototype._init=function(){var b=null,b=null;this._track=$(document.createElement("div"));b=this._track.style;b.height="100%";b.width="100%";this.scrollbar.appendChild(this._track);b=$(document.createElement("div"));b.style.position="absolute";this._setObjectStart(b,0);this._track.appendChild(b);b=$(document.createElement("div"));b.style.position="absolute";this._track.appendChild(b);b=$(document.createElement("div"));b.style.position="absolute";windowsInternetExplorer||this._setObjectEnd(b,0);this._track.appendChild(b);this._thumb=$(document.createElement("div"));b=this._thumb.style;b.position="absolute";this._setObjectSize(this._thumb,this.minThumbSize);this._track.appendChild(this._thumb);b=$(document.createElement("div"));b.style.position="absolute";this._setObjectStart(b,0);this._thumb.appendChild(b);b=$(document.createElement("div"));b.style.position="absolute";this._thumb.appendChild(b);b=$(document.createElement("div"));b.style.position="absolute";windowsInternetExplorer||this._setObjectEnd(b,0);this._thumb.appendChild(b);this.setSize(this.size);this.setTrackStart(this.trackStartPath,this.trackStartLength);this.setTrackMiddle(this.trackMiddlePath);this.setTrackEnd(this.trackEndPath,this.trackEndLength);this.setThumbStart(this.thumbStartPath,this.thumbStartLength);this.setThumbMiddle(this.thumbMiddlePath);this.setThumbEnd(this.thumbEndPath,this.thumbEndLength);this._thumb.style.display="none";Event.observe(this._track,"mousedown",this._mousedownTrackHandler,!1);Event.observe(this._thumb,"mousedown",this._mousedownThumbHandler,!1)};IWScrollbar.prototype.remove=function(){this.scrollbar.removeChild(this._track)};IWScrollbar.prototype._captureEvent=function(b){b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mousedownThumb=function(b){Event.observe(document,"mousemove",this._mousemoveThumbHandler,!0);Event.observe(document,"mouseup",this._mouseupThumbHandler,!0);Event.observe(document,"mouseover",this._captureEventHandler,!0);Event.observe(document,"mouseout",this._captureEventHandler,!0);this._thumbStart_temp=this._getMousePosition(b);this._scroll_thumbStartPos=this._getThumbStartPos();b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mousemoveThumb=function(d){var c=this._getMousePosition(d)-this._thumbStart_temp;this.scrollTo(this._contentPositionForThumbPosition(this._scroll_thumbStartPos+c));d.stopPropagation();d.preventDefault()};IWScrollbar.prototype._mouseupThumb=function(b){Event.stopObserving(document,"mousemove",this._mousemoveThumbHandler,!0);Event.stopObserving(document,"mouseup",this._mouseupThumbHandler,!0);Event.stopObserving(document,"mouseover",this._captureEventHandler,!0);Event.stopObserving(document,"mouseout",this._captureEventHandler,!0);delete this._thumbStart_temp;delete this._scroll_thumbStartPos;b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mousedownTrack=function(b){this._track_mouse_temp=this._getMousePosition(b)-this._trackOffset;b.altKey?(this.scrollTo(this._contentPositionForThumbPosition(this._track_mouse_temp-this._thumbLength/2)),delete this._track_mouse_temp):(this._track_scrolling=!0,Event.observe(this._track,"mousemove",this._mousemoveTrackHandler,!0),Event.observe(this._track,"mouseover",this._mouseoverTrackHandler,!0),Event.observe(this._track,"mouseout",this._mouseoutTrackHandler,!0),Event.observe(document,"mouseup",this._mouseupTrackHandler,!0),this._trackScrollOnePage(this),this._track_timer=setInterval(this._trackScrollDelay,500,this));b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._trackScrollDelay=function(b){b._track_scrolling&&(clearInterval(b._track_timer),b._trackScrollOnePage(b),b._track_timer=setInterval(b._trackScrollOnePage,150,b))};IWScrollbar.prototype._mousemoveTrack=function(b){this._track_mouse_temp=this._getMousePosition(b)-this._trackOffset;b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mouseoverTrack=function(b){this._track_mouse_temp=this._getMousePosition(b)-this._trackOffset;this._track_scrolling=!0;b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mouseoutTrack=function(b){this._track_scrolling=!1;b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._mouseupTrack=function(b){clearInterval(this._track_timer);Event.stopObserving(this._track,"mousemove",this._mousemoveTrackHandler,!0);Event.stopObserving(this._track,"mouseover",this._mouseoverTrackHandler,!0);Event.stopObserving(this._track,"mouseout",this._mouseoutTrackHandler,!0);Event.stopObserving(document,"mouseup",this._mouseupTrackHandler,!0);delete this._track_mouse_temp;delete this._track_scrolling;delete this._track_timer;b.stopPropagation();b.preventDefault()};IWScrollbar.prototype._trackScrollOnePage=function(d){if(d._track_scrolling){var c=Math.round(d._trackLength*d._getViewToContentRatio());d._track_mouse_temp<d._thumbStart?d.scrollByThumbDelta(-c):d._track_mouse_temp>d._thumbStart+d._thumbLength&&d.scrollByThumbDelta(c)}};IWScrollbar.prototype.setScrollArea=function(b){this.scrollarea&&(Event.stopObserving(this.scrollbar,"mousewheel",this.scrollarea._mousewheelScrollHandler,!0),Event.stopObserving(this.scrollbar,"DOMMouseScroll",this.scrollarea._mousewheelScrollHandler,!0));this.scrollarea=b;Event.observe(this.scrollbar,"mousewheel",this.scrollarea._mousewheelScrollHandler,!0);Event.observe(this.scrollbar,"DOMMouseScroll",this.scrollarea._mousewheelScrollHandler,!0)};IWScrollbar.prototype.refresh=function(){this._trackOffset=this._computeTrackOffset();this._trackLength=this._computeTrackLength();var b=this._getViewToContentRatio();1<=b||!this._canScroll()?(this.autohide&&this.hide(),this._thumb.style.display="none",this.scrollbar.style.appleDashboardRegion="none"):(this._thumbLength=Math.max(Math.round(this._trackLength*b),this.minThumbSize),this._numScrollablePixels=this._trackLength-this._thumbLength-2*this.padding,this._setObjectLength(this._thumb,this._thumbLength),windowsInternetExplorer&&(this._setObjectStart(this._thumb.down().next(),this.thumbStartLength),this._setObjectLength(this._thumb.down().next(),this._thumbLength-this.thumbStartLength-this.thumbEndLength),this._setObjectStart(this._thumb.down().next(1),this._thumbLength-this.thumbEndLength),this._setObjectLength(this._thumb.down().next(1),this.thumbEndLength),this.fixedUpIEPNGBGs||(fixupIEPNGBGsInTree(this._track),Event.stopObserving(this._track,"mousedown",this._mousedownTrackHandler),Event.stopObserving(this._thumb,"mousedown",this._mousedownThumbHandler),Event.observe(this._track,"mousedown",this._mousedownTrackHandler),Event.observe(this._thumb,"mousedown",this._mousedownThumbHandler),this.fixedUpIEPNGBGs=!0)),this._thumb.style.display="block",this.scrollbar.style.appleDashboardRegion="dashboard-region(control rectangle)",this.show());this.verticalHasScrolled();this.horizontalHasScrolled()};IWScrollbar.prototype.setAutohide=function(b){this.autohide=b;1<=this._getViewToContentRatio()&&b?this.hide():this.show()};IWScrollbar.prototype.hide=function(){this._track.style.display="none";this.hidden=!0};IWScrollbar.prototype.show=function(){this._track.style.display="block";this.hidden=!1};IWScrollbar.prototype.setSize=function(b){this.size=b;this._setObjectSize(this.scrollbar,b);this._setObjectSize(this._track.down().next(),b);this._setObjectSize(this._thumb.down().next(),b)};IWScrollbar.prototype.setTrackStart=function(e,d){this.trackStartPath=e;this.trackStartLength=d;var f=this._track.down();f.style.background="url("+e+") no-repeat top left";this._setObjectLength(f,d);this._setObjectSize(f,this.size);this._setObjectStart(this._track.down().next(),d)};IWScrollbar.prototype.setTrackMiddle=function(b){this.trackMiddlePath=b;this._track.down().next().style.background="url("+b+") "+this._repeatType+" top left"};IWScrollbar.prototype.setTrackEnd=function(e,d){this.trackEndPath=e;this.trackEndLength=d;var f=this._track.down().next(1);f.style.background="url("+e+") no-repeat top left";this._setObjectLength(f,d);this._setObjectSize(f,this.size);windowsInternetExplorer||this._setObjectEnd(this._track.down().next(),d)};IWScrollbar.prototype.setThumbStart=function(e,d){this.thumbStartPath=e;this.thumbStartLength=d;var f=this._thumb.down();f.style.background="url("+e+") no-repeat top left";this._setObjectLength(f,d);this._setObjectSize(f,this.size);this._setObjectStart(this._thumb.down().next(),d)};IWScrollbar.prototype.setThumbMiddle=function(b){this.thumbMiddlePath=b;this._thumb.down().next().style.background="url("+b+") "+this._repeatType+" top left"};IWScrollbar.prototype.setThumbEnd=function(e,d){this.thumbEndPath=e;this.thumbEndLength=d;var f=this._thumb.down().next(1);f.style.background="url("+e+") no-repeat top left";this._setObjectLength(f,d);this._setObjectSize(f,this.size);windowsInternetExplorer||this._setObjectEnd(this._thumb.down().next(),d)};IWScrollbar.prototype._contentPositionForThumbPosition=function(b){return 1<=this._getViewToContentRatio()?0:(b-this.padding)*((this._getContentLength()-this._getViewLength())/this._numScrollablePixels)};IWScrollbar.prototype._thumbPositionForContentPosition=function(b){if(1<=this._getViewToContentRatio()){return this.padding}b=this.padding+b/((this._getContentLength()-this._getViewLength())/this._numScrollablePixels);isNaN(b)&&(b=0);return b};IWScrollbar.prototype.scrollByThumbDelta=function(b){0!=b&&this.scrollTo(this._contentPositionForThumbPosition(this._thumbStart+b))};function IWVerticalScrollbar(d){this.scrollarea=null;this.scrollbar=$(d);this.minThumbSize=28;this.padding=-1;this.hidden=this.autohide=!0;this.size=19;this.trackStartPath=transparentGifURL();this.trackStartLength=18;this.trackMiddlePath=transparentGifURL();this.trackEndPath=transparentGifURL();this.trackEndLength=18;this.thumbStartPath=transparentGifURL();this.thumbStartLength=9;this.thumbMiddlePath=transparentGifURL();this.thumbEndPath=transparentGifURL();this.thumbEndLength=9;this._thumb=this._track=null;this._thumbLength=this._numScrollablePixels=this._trackLength=this._trackOffset=0;this._repeatType="repeat-y";this._thumbStart=this.padding;var c=this;this._captureEventHandler=function(b){c._captureEvent(b)};this._mousedownThumbHandler=function(b){c._mousedownThumb(b)};this._mousemoveThumbHandler=function(b){c._mousemoveThumb(b)};this._mouseupThumbHandler=function(b){c._mouseupThumb(b)};this._mousedownTrackHandler=function(b){c._mousedownTrack(b)};this._mousemoveTrackHandler=function(b){c._mousemoveTrack(b)};this._mouseoverTrackHandler=function(b){c._mouseoverTrack(b)};this._mouseoutTrackHandler=function(b){c._mouseoutTrack(b)};this._mouseupTrackHandler=function(b){c._mouseupTrack(b)};this._init()}IWVerticalScrollbar.prototype=new IWScrollbar(null);IWVerticalScrollbar.prototype.scrollTo=function(b){this.scrollarea.verticalScrollTo(b)};IWVerticalScrollbar.prototype._setObjectSize=function(d,c){d.style.width=c+"px"};IWVerticalScrollbar.prototype._setObjectLength=function(d,c){d.style.height=c+"px"};IWVerticalScrollbar.prototype._setObjectStart=function(d,c){d.style.top=c+"px"};IWVerticalScrollbar.prototype._setObjectEnd=function(d,c){d.style.bottom=c+"px"};IWVerticalScrollbar.prototype._getMousePosition=function(b){return void 0!=b?Event.pointerY(b):0};IWVerticalScrollbar.prototype._getThumbStartPos=function(){return this._thumb.offsetTop};IWVerticalScrollbar.prototype._computeTrackOffset=function(){for(var d=this.scrollbar,c=0;d.offsetParent;){c+=d.offsetTop,d=d.offsetParent}return c};IWVerticalScrollbar.prototype._computeTrackLength=function(){return this.scrollbar.offsetHeight};IWVerticalScrollbar.prototype._getViewToContentRatio=function(){return this.scrollarea.viewToContentHeightRatio};IWVerticalScrollbar.prototype._getContentLength=function(){return this.scrollarea.content.scrollHeight};IWVerticalScrollbar.prototype._getViewLength=function(){return this.scrollarea.viewHeight};IWVerticalScrollbar.prototype._canScroll=function(){return this.scrollarea.scrollsVertically};IWVerticalScrollbar.prototype.verticalHasScrolled=function(){var b=this._thumbPositionForContentPosition(this.scrollarea.content.scrollTop);this._thumbStart=b;this._thumb.style.top=b+"px"};IWVerticalScrollbar.prototype.horizontalHasScrolled=function(){};function IWHorizontalScrollbar(d){this.scrollarea=null;this.scrollbar=$(d);this.minThumbSize=28;this.padding=-1;this.hidden=this.autohide=!0;this.size=19;this.trackStartPath=transparentGifURL();this.trackStartLength=18;this.trackMiddlePath=transparentGifURL();this.trackEndPath=transparentGifURL();this.trackEndLength=18;this.thumbStartPath=transparentGifURL();this.thumbStartLength=9;this.thumbMiddlePath=transparentGifURL();this.thumbEndPath=transparentGifURL();this.thumbEndLength=9;this._thumb=this._track=null;this._thumbLength=this._numScrollablePixels=this._trackLength=this._trackOffset=0;this._repeatType="repeat-x";this._thumbStart=this.padding;var c=this;this._captureEventHandler=function(b){c._captureEvent(b)};this._mousedownThumbHandler=function(b){c._mousedownThumb(b)};this._mousemoveThumbHandler=function(b){c._mousemoveThumb(b)};this._mouseupThumbHandler=function(b){c._mouseupThumb(b)};this._mousedownTrackHandler=function(b){c._mousedownTrack(b)};this._mousemoveTrackHandler=function(b){c._mousemoveTrack(b)};this._mouseoverTrackHandler=function(b){c._mouseoverTrack(b)};this._mouseoutTrackHandler=function(b){c._mouseoutTrack(b)};this._mouseupTrackHandler=function(b){c._mouseupTrack(b)};this._init()}IWHorizontalScrollbar.prototype=new IWScrollbar(null);IWHorizontalScrollbar.prototype.scrollTo=function(b){this.scrollarea.horizontalScrollTo(b)};IWHorizontalScrollbar.prototype._setObjectSize=function(d,c){d.style.height=c+"px"};IWHorizontalScrollbar.prototype._setObjectLength=function(d,c){d.style.width=c+"px"};IWHorizontalScrollbar.prototype._setObjectStart=function(d,c){d.style.left=c+"px"};IWHorizontalScrollbar.prototype._setObjectEnd=function(d,c){d.style.right=c+"px"};IWHorizontalScrollbar.prototype._getMousePosition=function(b){return void 0!=b?Event.pointerX(b):0};IWHorizontalScrollbar.prototype._getThumbStartPos=function(){return this._thumb.offsetLeft};IWHorizontalScrollbar.prototype._computeTrackOffset=function(){for(var d=this.scrollbar,c=0;d.offsetParent;){c+=d.offsetLeft,d=d.offsetParent}return c};IWHorizontalScrollbar.prototype._computeTrackLength=function(){return this.scrollbar.offsetWidth};IWHorizontalScrollbar.prototype._getViewToContentRatio=function(){return this.scrollarea.viewToContentWidthRatio};IWHorizontalScrollbar.prototype._getContentLength=function(){return this.scrollarea.content.scrollWidth};IWHorizontalScrollbar.prototype._getViewLength=function(){return this.scrollarea.viewWidth};IWHorizontalScrollbar.prototype._canScroll=function(){return this.scrollarea.scrollsHorizontally};IWHorizontalScrollbar.prototype.verticalHasScrolled=function(){};IWHorizontalScrollbar.prototype.horizontalHasScrolled=function(){var b=this._thumbPositionForContentPosition(this.scrollarea.content.scrollLeft);this._thumbStart=b;this._thumb.style.left=b+"px"};function IWScrollArea(f){this.content=$(f);this.scrollsHorizontally=this.scrollsVertically=!0;this.singlepressScrollPixels=10;this.viewHeight=0;this.viewToContentHeightRatio=1;this.viewWidth=0;this.viewToContentWidthRatio=1;this._scrollbars=[];var e=this;this._refreshHandler=function(){e.refresh()};this._keyPressedHandler=function(){e.keyPressed(event)};this._mousewheelScrollHandler=function(b){e.mousewheelScroll(b)};this.content.style.overflow="hidden";this.content.scrollTop=0;this.content.scrollLeft=0;Event.observe(this.content,"mousewheel",this._mousewheelScrollHandler,!0);Event.observe(this.content,"DOMMouseScroll",this._mousewheelScrollHandler,!0);this.refresh();for(var h=arguments.length,g=1;g<h;++g){this.addScrollbar(arguments[g])}}IWScrollArea.prototype.addScrollbar=function(b){b.setScrollArea(this);this._scrollbars.push(b);b.refresh()};IWScrollArea.prototype.removeScrollbar=function(f){for(var e=this._scrollbars,h=e.length,g=0;g<h;++g){if(e[g]==f){e.splice(g,1);break}}};IWScrollArea.prototype.remove=function(){Event.stopObserving(this.content,"mousewheel",this._mousewheelScrollHandler,!0);Event.stopObserving(this.content,"DOMMouseScroll",this._mousewheelScrollHandler,!0);for(var e=this._scrollbars,d=e.length,f=0;f<d;++f){e[f].setScrollArea(null)}};IWScrollArea.prototype.refresh=function(){this.viewHeight=this.content.offsetHeight;this.viewWidth=this.content.offsetWidth;this.content.scrollHeight>this.viewHeight?(this.viewToContentHeightRatio=this.viewHeight/this.content.scrollHeight,this.verticalScrollTo(this.content.scrollTop)):(this.viewToContentHeightRatio=1,this.verticalScrollTo(0));this.content.scrollWidth>this.viewWidth?(this.viewToContentWidthRatio=this.viewWidth/this.content.scrollWidth,this.horizontalScrollTo(this.content.scrollLeft)):(this.viewToContentWidthRatio=1,this.horizontalScrollTo(0));for(var e=this._scrollbars,d=e.length,f=0;f<d;++f){e[f].refresh()}};IWScrollArea.prototype.focus=function(){Event.observe(document,"keypress",this._keyPressedHandler,!0)};IWScrollArea.prototype.blur=function(){Event.stopObserving(document,"keypress",this._keyPressedHandler,!0)};IWScrollArea.prototype.reveal=function(f){var e=0,h=f;do{e+=h.offsetTop,h=h.offsetParent}while(h&&h!=this.content);var g=0,h=f;do{g+=h.offsetLeft,h=h.offsetParent}while(h&&h!=this.content);this.verticalScrollTo(e);this.horizontalScrollTo(g)};IWScrollArea.prototype.verticalScrollTo=function(e){if(this.scrollsVertically){var d=this.content.scrollHeight-this.viewHeight;0>e?e=0:e>d&&(e=d);this.content.scrollTop=e;e=this._scrollbars;for(var d=e.length,f=0;f<d;++f){e[f].verticalHasScrolled()}}};IWScrollArea.prototype.horizontalScrollTo=function(e){if(this.scrollsHorizontally){var d=this.content_width-this.viewWidth;0>e?e=0:e>d&&(e=d);this.content.scrollLeft=e;e=this._scrollbars;for(var d=e.length,f=0;f<d;++f){e[f].horizontalHasScrolled()}}};IWScrollArea.prototype.keyPressed=function(d){var c=!0;if(!d.altKey&&!d.shiftKey){switch(d.keyIdentifier){case"Home":this.verticalScrollTo(0);break;case"End":this.verticalScrollTo(this.content.scrollHeight-this.viewHeight);break;case"Up":this.verticalScrollTo(this.content.scrollTop-this.singlepressScrollPixels);break;case"Down":this.verticalScrollTo(this.content.scrollTop+this.singlepressScrollPixels);break;case"PageUp":this.verticalScrollTo(this.content.scrollTop-this.viewHeight);break;case"PageDown":this.verticalScrollTo(this.content.scrollTop+this.viewHeight);break;case"Left":this.horizontalScrollTo(this.content.scrollLeft-this.singlepressScrollPixels);break;case"Right":this.horizontalScrollTo(this.content.scrollLeft+this.singlepressScrollPixels);break;default:c=!1}c&&(d.stopPropagation(),d.preventDefault())}};IWScrollArea.prototype.mousewheelScroll=function(b){this.verticalScrollTo(this.content.scrollTop-(b.wheelDelta?b.wheelDelta/120*this.singlepressScrollPixels:b.detail/-2*this.singlepressScrollPixels));b.stopPropagation();b.preventDefault()};var View=Class.create({initialize:function(d,c){this.m_widget=d;this.m_parentDiv=c;this.m_divInstanceId=this.m_divId;this.hide()},ensureDiv:function(){var b=this.m_widget.div(this.m_divInstanceId);b||(b=new Element("div",{id:this.m_widget.getInstanceId(this.m_divInstanceId)}),b.addClassName(this.m_divClass),this.m_parentDiv.appendChild(b));return $(b)},hide:function(){this.ensureDiv().hide()},show:function(){this.ensureDiv().show()},render:function(){},resize:function(){}}),StatusView=Class.create(View,{initialize:function($super,a,d){$super(a,d);this.render();this.hide()},render:function(){var d="<table class='StatusMessageTable'><tr><td>";this.badgeImage&&(d+=imgMarkup(this.m_widget.widgetPath+"/"+this.badgeImage,"","id='"+this.p_badgeImgId()+"'",""));d+="</td></tr></table>";if(this.upperRightBadgeWidth&&this.upperRightBadgeHeight){var c=this.upperRightBadge?this.m_widget.widgetPath+"/"+this.upperRightBadge:transparentGifURL(),d=d+imgMarkup(c,"","class='StatusUpperRightBadge' width='"+this.upperRightBadgeWidth+"' height='"+this.upperRightBadgeHeight+"' ","")}c=this.m_widget.sharedPath.stringByAppendingPathComponent("Translucent-Overlay.png");d+=imgMarkup(c,"position: absolute; top: 0; left: 0;","id='"+this.p_overlayImgId()+"' width='700' height='286' ","");this.statusMessageKey&&(d+="<div id='"+this.p_statusMessageBlockId()+"' class='StatusMessageBlock' ><span>"+this.m_widget.localizedString(this.statusMessageKey)+"</span></div>");this.ensureDiv().update(d);this.resize()},resize:function(){var h=this.runningInApp?window.innerWidth:this.m_widget.div().offsetWidth,e=this.runningInApp?window.innerHeight:this.m_widget.div().offsetHeight;if(this.badgeImage){var l=$(this.p_badgeImgId()),k=new IWSize(this.badgeImageWidth,this.badgeImageHeight);if(k.width>h||k.height>e){var j=new IWSize(h,e),k=k.scaleToFit(j)}l.width=k.width;l.height=k.height}var l=Math.max(h,700),k=Math.min(e/2-286,0),j=Math.min(h/2-350,0),i=$(this.p_overlayImgId());i.width=l;i.height=286;i.setStyle({left:px(j),top:px(k)});if(l=$(this.p_statusMessageBlockId())){h={left:px(Math.max((h-l.offsetWidth)/2,0))},this.statusMessageVerticallyCentered&&(e=px(Math.max((e-l.offsetHeight)/2,0)),h.top=e),l.setStyle(h)}this.footerView&&this.footerView.resize()},doneFadingIn:function(){this.m_widget.setPreferenceForKey(!0,"x-viewDoneFadingIn",!1)},p_badgeImgId:function(){return this.m_widget.getInstanceId(this.m_divId+"-badge")},p_overlayImgId:function(){return this.m_widget.getInstanceId(this.m_divId+"-overlay")},p_statusMessageBlockId:function(){return this.m_widget.getInstanceId(this.m_divId+"-messageBlock")}});
var TimerWidget=Class.create(Widget,{widgetIdentifier:"com-apple-iweb-widget-timer",types:["text","digital","odometer","flip"],minFontFactor:1.2,initialize:function($super,b,m,j,l,k,h){null!=b&&($super(b,m,j,l,k,h),this.autosizing=0,this.view=null,this.units=[this.localizedString("Secs"),this.localizedString("Mins"),this.localizedString("Hours"),this.localizedString("Days"),this.localizedString("Years")],b=new Date,b.setDate(b.getDate()),this.initializingDefaultPreferences=!0,this.initializeDefaultPreferences({type:1,target:b.getTime(),unitsRange:{location:1,length:4},labelsEnabled:1}),this.initializingDefaultPreferences=void 0,this.updateFromPreferences())},onload:function(){this.view||this.p_createView()},onunload:function(){void 0===this.refreshInterval||0==this.refreshInterval||clearInterval(this.refreshInterval);this.view=null},changedPreferenceForKey:function(a){this.initializingDefaultPreferences||"type"!=a&&"target"!=a&&"unitsRange"!=a&&"labelsEnabled"!=a||(this.updateFromPreferences(),this.p_createView());"labelFontSize"==a?this.view&&this.view.updateFromLabelFontSize():"labelFontFactor"==a&&this.view&&this.view.updateFromLabelFontFactor()},setDocumentInternalCSS:function($super,b){$super(b);var h=this.p_currentFontFamily();if(this.lastFontFamily!=h){this.lastFontFamily=h;var h=new Element("table"),e=new Element("tr",{className:"Timer_Labels"}),g=new Element("td");h.appendChild(e);e.appendChild(g);h.setStyle({position:"absolute",top:"0px"});e.setStyle({fontSize:"100px"});g.innerText="0123456789:";this.div().appendChild(h);e=Math.max(h.offsetHeight/100,this.minFontFactor);this.div().removeChild(h);this.setPreferenceForKey(e,"labelFontFactor")}},updateFromPreferences:function(){this.targetDate=this.p_targetDateFromPreferences();this.unitsRange=this.p_unitsRangeFromPreferences();this.labelsEnabledValue=this.p_labelsEnabledFromPreferences()},p_currentFontFamily:function(){var c=void 0,d=this.div().selectFirst(".Timer_Labels");d&&(c=d.getStyle("font-family"));return c},p_targetDateFromPreferences:function(){var a=this.preferenceForKey("target");var d=new Date(a);var e=new Date();e.setDate(e.getDate()+1);var g=e.getFullYear();var f=e.getMonth();var c=e.getDate();d.setFullYear(g);d.setMonth(f);d.setDate(c);return d},p_unitsRangeFromPreferences:function(){var a=this.preferenceForKey("unitsRange");return new IWRange(a.location,a.length)},p_labelsEnabledFromPreferences:function(){return 0<this.preferenceForKey("labelsEnabled")?!0:!1},currentTimeDelta:function(){return Math.max(0,this.targetDate-new Date)},p_createView:function(){var a=null!=this.view?this.view.timerDisplayHeight:-1;viewType=this.preferenceForKey("type");void 0===this.refreshInterval||0==this.refreshInterval||clearInterval(this.refreshInterval);this.view=null;switch(this.types[viewType]){case"odometer":this.view=new OdometerTimerView(this,a);break;case"flip":this.view=new FlipTimerView(this,a);break;case"digital":this.view=new DigitalTimerView(this,a);break;case"text":this.view=new TextualTimerView(this,a);break;default:iWLog("timer widget could not instatiate unknown view"),this.view=null}this.view.setSelectedStyle();this.runningInApp&&(window.onresize=function(){0==this.autosizing&&this.view.resize(!1)}.bind(this),this.view.resizeWidgetWindow());this.view.refresh();this.refreshInterval=setInterval(this.view.refresh.bind(this.view),1000)}}),TimerView=Class.create({labelClassName:"Timer_Labels",initialize:function(d,e){if(d){this.widget=d;this.div=d.div();this.p_calculateRatios();var f=toPixels(this.div.getStyle("width"));this.widgetAspectRatio=toPixels(this.div.getStyle("height"))/f;this.handlingHandleResize=0;f=this.widget.getElementById("timer");void 0!==f&&f.update();this.timerDisplayHeight=e;this.sDigitsNumber=this.mDigitsNumber=this.hDigitsNumber=this.dDigitsNumber=this.yDigitsNumber=0;this.p_setNumberOfDigitsPerUnit()}},refresh:function(){this.render()},render:function(){},ensureVisible:function(){var a=this.widget.div().selectFirst(".timer_widget");a&&a.setStyle({visibility:"visible"})},setSelectedStyle:function(){this.widget.setPreferenceForKey(this.labelClassName,"x-selected-style-class",!1)},updateFromLabelFontSize:function(){var a=this.widget.preferenceForKey("labelFontSize");this.timerDisplayHeight=this.fontFactor*this.digitsToLabelsFontsRatio*a;this.resize(!0);0==this.handlingHandleResize&&this.resizeWidgetWindow()},updateFromLabelFontFactor:function(){this.p_calculateRatios();this.updateFromLabelFontSize()},setLabelFontSize:function(c){10<=c||(c=10);50>=c||(c=50);var d=this.widget.preferenceForKey("labelFontSize");!this.widget.runningInApp||!this.handlingHandleResize&&d||this.widget.preferences.isUndoingOrRedoing()||c!=d&&this.widget.setPreferenceForKey(c,"labelFontSize",!!d)},resize:function(d){if(d){this.widget.runningInApp?(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight):(this.windowWidth=Math.ceil(this.widget.div().offsetWidth),this.windowHeight=Math.ceil(this.widget.div().offsetHeight));var e=this.resizeTimer(!0);this.widgetWidth=e.width;this.widgetHeight=e.height;this.widgetAspectRatio=this.widgetHeight/this.widgetWidth}else{++this.handlingHandleResize;try{var f=d=!1;this.windowWidth!=window.innerWidth&&(this.windowWidth=window.innerWidth,d=!0);this.windowHeight!=window.innerHeight&&(this.windowHeight=window.innerHeight,f=!0);if(d||f){e=this.windowHeight/this.windowWidth,e>this.widgetAspectRatio?(this.widgetWidth=this.windowWidth,this.widgetHeight=this.windowWidth*this.widgetAspectRatio):(this.widgetWidth=e<this.widgetAspectRatio?this.windowHeight/this.widgetAspectRatio:this.windowWidth,this.widgetHeight=this.windowHeight),this.resizeTimer(!1)}}finally{--this.handlingHandleResize}}},resizeWidgetWindow:function(){++this.widget.autosizing;try{this.widget.setPreferenceForKey({width:this.widgetWidth,height:this.widgetHeight,centerHor:!0},"x-widgetSize",!1)}finally{--this.widget.autosizing}},resizeTimer:function(a){},timeUnits:function(g,h){(function(){return 0<=h.min()&&h.min()<=h.max()&&5>=h.max()}).assert("Invalid time units range (min="+h.min()+", max="+h.max()+")");var m=[0,0,0,0,0],j=[365,24,60,60,1000],l=h.min(),k=g;for(i=4;i>=l;i--){m[i]=Math.floor(k/j[i]),k/=j[i],i>l&&(m[i]%=j[i-1])}return{y:m[0],d:m[1],h:m[2],m:m[3],s:m[4]}},heightWithLabels:function(a){return this.widget.labelsEnabledValue?a*(1+this.labelsToDigitsFontsRatio):a},heightWithoutLabels:function(a){return this.widget.labelsEnabledValue?a/(1+this.labelsToDigitsFontsRatio):a},getDigitsFromInteger:function(e,g){(function(){return 0<=e&&0<=g}).assert("getDigitsFromInteger - Invalid arguments: in_value="+e+" in_length="+g);var k=[],h=0,j=e;do{j=this.intMod(j,10),k.push(j.remainder),j=j.ratio,h++}while(2>h||0==g&&0!=j||0<g&&h<g);return k.reverse()},intMod:function(c,d){(function(){return 0<=c&&0<d}).assert("intMod - Invalid arguments: in_value="+c+" in_div="+d);return{ratio:Math.floor(c/d),remainder:Math.floor(c%d)}},p_calculateRatios:function(){this.fontFactor=this.widget.preferenceForKey("labelFontFactor")||this.widget.minFontFactor;this.digitsToLabelsFontsRatio=5/this.fontFactor-1;this.labelsToDigitsFontsRatio=1/this.digitsToLabelsFontsRatio;this.widget.runningInApp&&this.widget.setPreferenceForKey(this.labelsToDigitsFontsRatio,"x-labelsToDigitsFontsRatio",!1)},p_setNumberOfDigitsPerUnit:function(){var d=this.widget.currentTimeDelta(),e=this.widget.unitsRange,f=e.min(),d=this.timeUnits(d,e);this.yDigitsNumber=e.containsLocation(0)?this.getDigitsFromInteger(d.y,0).size():0;this.dDigitsNumber=e.containsLocation(1)?this.getDigitsFromInteger(d.d,1==f?0:3).size():0;this.hDigitsNumber=e.containsLocation(2)?this.getDigitsFromInteger(d.h,2==f?0:2).size():0;this.mDigitsNumber=e.containsLocation(3)?this.getDigitsFromInteger(d.m,3==f?0:2).size():0;this.sDigitsNumber=e.containsLocation(4)?this.getDigitsFromInteger(d.s,4==f?0:2).size():0},labelsRowMarkup:function(){var d="";if(0<this.widget.labelsEnabledValue){var e=this.widget.unitsRange,f=e.min(),e=e.max();for(i=4-f;i>4-e;i--){d+="<td style='text-align: center;' class='fg-label'>"+this.widget.units[i]+"</td>",i>4-e+1&&(d+="<td class='fg-label-separator'></td>")}}return d}}),TextualTimerView=Class.create(TimerView,{timerType:"text",initialize:function($super,b,d){$super(b,d);d=this.widget.unitsRange;b="";for(i=d.min();i<d.max();i++){b+="<td></td>",d.containsLocation(i+1)&&(b+="<td>:</td>")}d=new Template("<table border='0' id='#{table_id}'><tr id='#{digit_id}' class='#{label_class}'>#{columns}</tr><tr id='#{labels_id}' class='#{labels_class}'>#{labels_markup}</tr></table>");this.widget.getElementById("timer").update(d.evaluate({table_id:this.widget.getInstanceId("timer_block"),digit_id:this.widget.getInstanceId("timer_digit_block"),label_class:this.labelClassName,columns:b,labels_id:this.widget.getInstanceId("timer_labels_block"),labels_class:this.labelClassName,labels_markup:this.labelsRowMarkup()}));this.widget.getElementById("timer_digit_block").selectFirst("td").setStyle({textAlign:"right"});this.resize(!0)},render:function($super){var b=this.widget.currentTimeDelta(),k=this.widget.unitsRange,g=this.widget.getElementById("timer_digit_block"),b=this.timeUnits(b,k),b=[b.y,b.d,b.h,b.m,b.s],j=[1,3,2,2,2],g=g.select("td");for(i=k.min();i<k.max();i++){var h=2;i>k.min()&&(h=Math.max(h,j[i]));g[2*(i-k.min())].update(b[i].toPaddedString(h,10))}this.ensureVisible()},resizeTimer:function(d){var e=0;d?0<this.timerDisplayHeight?(this.heightWithLabels(this.timerDisplayHeight),e=this.timerDisplayHeight):e=0<this.widgetHeight?this.heightWithoutLabels(this.widgetHeight):this.heightWithoutLabels(this.windowHeight):e=this.heightWithoutLabels(this.widgetHeight);d=e/(this.digitsToLabelsFontsRatio*this.fontFactor);this.setLabelFontSize(d);d=this.widget.preferenceForKey("labelFontSize");this.widget.getElementById("timer_digit_block").setStyle({fontSize:px(this.digitsToLabelsFontsRatio*d)});var f=this.widget.getElementById("timer_labels_block");0<this.widget.labelsEnabledValue?f.setStyle({fontSize:px(d)}):f.setStyle({fontSize:"0"});this.timerDisplayHeight=e;this.render();e=!1;(d=this.widget.getElementById("timer_block"))&&0<d.offsetWidth&&0<d.offsetHeight&&(void 0===this.totalNativeWidth||void 0===this.totalNativeHeight||this.totalNativeWidth!=d.offsetWidth||this.totalNativeHeight!=d.offsetHeight)&&(this.totalNativeWidth=d.offsetWidth,this.totalNativeHeight=d.offsetHeight,this.widgetWidth=this.totalNativeWidth,this.widgetHeight=this.totalNativeHeight,this.widgetAspectRatio=this.widgetHeight/this.widgetWidth,e=!0);e&&0==this.handlingHandleResize&&this.widget.view===this&&this.resizeWidgetWindow();return new IWSize(this.totalNativeWidth,this.totalNativeHeight)}}),GraphicalTimerView=Class.create(TimerView,{initialize:function($super,b,d){$super(b,d);this.preloadAssets();b="<div class='graphical_timer'><div class='graphical_timer_background'>"+this.makeBGMarkup();b+="</div>";b+="<div class='graphical_timer_foreground'>";b+=this.makeFGMarkup();b+="</div>";b+="<div class='graphical_timer_labels'>";b+=this.makeLabelMarkup();b+="</div>";b+="</div>";this.widget.getElementById("timer").update(b);this.setBGImageSources();this.setNativeGeometry();this.resize(!0)},preloadAssets:function(){this.digits=[{image:IWCreateImage(this.assetPath("0",this.widget.widgetPath+"/"+this.timerType+"/0.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("1",this.widget.widgetPath+"/"+this.timerType+"/1.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("2",this.widget.widgetPath+"/"+this.timerType+"/2.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("3",this.widget.widgetPath+"/"+this.timerType+"/3.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("4",this.widget.widgetPath+"/"+this.timerType+"/4.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("5",this.widget.widgetPath+"/"+this.timerType+"/5.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("6",this.widget.widgetPath+"/"+this.timerType+"/6.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("7",this.widget.widgetPath+"/"+this.timerType+"/7.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("8",this.widget.widgetPath+"/"+this.timerType+"/8.pdf")),size:new IWSize(120,150)},{image:IWCreateImage(this.assetPath("9",this.widget.widgetPath+"/"+this.timerType+"/9.pdf")),size:new IWSize(120,150)}];this.digits.each(function(a){a.image.load()});this.digitSize=$(this.digits).pluck("size").inject(new IWSize(0,0),function(c,d){return d.width>c.width?d:c});this.separator={image:IWCreateImage(this.assetPath("fg-separator",this.widget.widgetPath+"/"+this.timerType+"/fg-separator.pdf")),size:new IWSize(50,150)};this.separator.image.load();this.leftCap={image:IWCreateImage(this.assetPath("bg-cap-left",this.widget.widgetPath+"/"+this.timerType+"/bg-cap-left.pdf")),size:new IWSize(5,45)};this.leftCap.image.load();this.rightCap={image:IWCreateImage(this.assetPath("bg-cap-right",this.widget.widgetPath+"/"+this.timerType+"/bg-cap-right.pdf")),size:new IWSize(5,45)};this.rightCap.image.load();this.center={image:IWCreateImage(this.assetPath("bg-center",this.widget.widgetPath+"/"+this.timerType+"/bg-center.pdf")),size:new IWSize(30,45)};this.center.image.load()},makeBGMarkup:function(){var a;a=""+("<img id='"+this.widget.instanceID+"-bg-cap-left' src='' />");a+="<img id='"+this.widget.instanceID+"-bg-center' src='' />";return a+="<img id='"+this.widget.instanceID+"-bg-cap-right' src='' />"},makeFGMarkup:function(){var c="",d=imgMarkup(this.separator.image.sourceURL(),"","class='fg-separator' ","",!1),c=c+"<div class='graphical_digits_placeholder'>"+"<img class='fg-digit' src='' />".times(this.yDigitsNumber),c=c+d.times(0<this.yDigitsNumber&&0<this.dDigitsNumber),c=c+"<img class='fg-digit' src='' />".times(this.dDigitsNumber),c=c+d.times(0<this.dDigitsNumber&&0<this.hDigitsNumber),c=c+"<img class='fg-digit' src='' />".times(this.hDigitsNumber),c=c+d.times(0<this.hDigitsNumber&&0<this.mDigitsNumber),c=c+"<img class='fg-digit' src='' />".times(this.mDigitsNumber),c=c+d.times(0<this.mDigitsNumber&&0<this.sDigitsNumber),c=c+"<img class='fg-digit' src='' />".times(this.sDigitsNumber);return c+="</div>"},setBGImageSources:function(){setImgSrc(this.widget.getElementById("bg-cap-left"),this.leftCap.image.sourceURL(),!1);setImgSrc(this.widget.getElementById("bg-cap-right"),this.rightCap.image.sourceURL(),!1);setImgSrc(this.widget.getElementById("bg-center"),this.center.image.sourceURL(),!1)},setNativeGeometry:function(){var c=this.leftCap.size.height,d=0.55*(c/this.digitSize.height);this.numberOfDigits=this.widget.div().select("img.fg-digit").size();this.numberOfSeparators=this.widget.div().select("img.fg-separator").size();this.digitNativeHeight=this.digitSize.height*d;this.digitNativeWidth=this.digitSize.width*d;this.separatorNativeWidth=this.separator.size.width*(this.textSeparator?d:1);this.separatorNativeHeight=this.separator.size.height*(this.textSeparator?d:1);this.leftCapNativeWidth=this.leftCap.size.width;this.rightCapNativeWidth=this.rightCap.size.width;this.totalNativeHeight=this.heightWithLabels(c);this.totalNativeWidth=this.leftCapNativeWidth+this.digitNativeWidth*this.numberOfDigits+this.separatorNativeWidth*this.numberOfSeparators+this.rightCapNativeWidth},assetPath:function($super,b,d){return this.widget.preferenceForKey(b)||d},fitTimerIntoView:function(j,k,q,n,p){var o=q,m=n,l=1;p?(0<this.timerDisplayHeight?(l=this.heightWithLabels(this.timerDisplayHeight)/k,m=k*l):(m=this.windowHeight,l=m/k),o=j*l):n/q<k/j?(l=m/k,o=j*l):(l=o/j,m=k*l);return{width:o,height:m,scale:l}},centerTimerInView:function(d,e,h,g){this.widget.div().select("div.graphical_timer")[0].setStyle({width:px(d),height:px(e),left:px(0)});(d=this.widget.getElementById("timer_labels_table"))&&d.setStyle({left:px(0+g),top:px(e)})},setFGDigits:function(h,j,o,l){l=this.getDigitsFromInteger(l,o);for(var n=0;n<o;++n){var m=h[j+n],k=l[n];m.digit!=k&&(m.digit=k,setImgSrc(m,this.digits[k].image.sourceURL(),!1));m.visible()||m.show()}},makeLabelMarkup:function(){var a="";0<this.widget.labelsEnabledValue&&(a="<table border='0' class='"+this.labelClassName+"' id='"+this.widget.getInstanceId("timer_labels_table")+"' style='position: absolute; left:0; top: 0; width:100%; height:100%;'><tr>"+this.labelsRowMarkup()+"</tr></table>");return a},resizeTimer:function(x){x=this.fitTimerIntoView(this.totalNativeWidth,this.totalNativeHeight,this.widgetWidth,this.widgetHeight,x);var y=x.scale,w=x.width,t=this.heightWithoutLabels(x.height),v=0;this.widget.getElementById("bg-cap-left");this.widget.getElementById("bg-cap-right");this.widget.getElementById("bg-center");var u=Math.floor(this.leftCap.size.width*y);this.widget.getElementById("bg-cap-left").setStyle({height:px(t),width:px(u),left:px(v)});var v=v+u,s=this.widget.getElementById("bg-center"),r=Math.floor(w-2*u);s.setStyle({height:px(t),width:px(r),left:px(v)});v+=r;this.widget.getElementById("bg-cap-right").setStyle({height:px(t),width:px(u),left:px(v)});var v=v+u,v=u,q=this.digitNativeHeight*y,o=this.digitNativeWidth*y,j=this.textSeparator?this.separatorNativeHeight*y:t,p=this.separatorNativeWidth/this.separatorNativeHeight*j,u=(this.digitNativeWidth*this.numberOfDigits+this.separatorNativeWidth*this.numberOfSeparators)*y,y=this.widget.div().select("div.graphical_digits_placeholder")[0];y.setStyle({left:px((w-u)/2),height:px(t)});v=0;y.select("img").each(function(f){var d=f.hasClassName("fg-digit")?q:j,h=Math.max(f.hasClassName("fg-digit")?o:p,1),g=(t-d)/2;f.setStyle({height:px(d),top:px(g),left:px(v),width:px(h)});v+=h});u=this.resizeLabels(x.height,o,p);this.centerTimerInView(w,t,u,y.offsetLeft);this.timerDisplayHeight=t;this.render();return new IWSize(x.width,x.height)},resizeLabels:function(x,y,w){var t=0,v=this.widget.getElementById("timer_labels_table");x/=((v?1:0)+this.digitsToLabelsFontsRatio)*this.fontFactor;this.setLabelFontSize(x);t=x*this.fontFactor;if(v){x=this.widget.preferenceForKey("labelFontSize");v.setStyle({fontSize:px(x)});x=v.select("td.fg-label");var u=0;this.widget.unitsRange.min();for(var s=[this.yDigitsNumber,this.dDigitsNumber,this.hDigitsNumber,this.mDigitsNumber,this.sDigitsNumber],r=0,q=this.widget.unitsRange.min();q<this.widget.unitsRange.max();q++){for(var o=s[q],j=u,p=0;p<o;p++){u+=y,r++}x[q-this.widget.unitsRange.min()].setStyle({width:px(u-j)});q<this.widget.unitsRange.max()-1&&(u+=w)}v.setStyle({width:px(u-0)});v.select("td.fg-label-separator").each(function(b){b.setStyle({width:px(w)})})}return t},render:function($super){var b=this.widget.currentTimeDelta(),b=this.timeUnits(b,this.widget.unitsRange),k=this.widget.div().select("img.fg-digit"),g=this.widget.div().select("img.fg-separator"),j=0,h=0;0<this.yDigitsNumber&&(this.setFGDigits(k,j,this.yDigitsNumber,b.y),j+=this.yDigitsNumber);0<this.yDigitsNumber&&0<this.dDigitsNumber&&(this.p_setFGSeparator(g,h),++h);0<this.dDigitsNumber&&(this.setFGDigits(k,j,this.dDigitsNumber,b.d),j+=this.dDigitsNumber);0<this.dDigitsNumber&&0<this.hDigitsNumber&&(this.p_setFGSeparator(g,h),++h);0<this.hDigitsNumber&&(this.setFGDigits(k,j,this.hDigitsNumber,b.h),j+=this.hDigitsNumber);0<this.hDigitsNumber&&0<this.mDigitsNumber&&(this.p_setFGSeparator(g,h),++h);0<this.mDigitsNumber&&(this.setFGDigits(k,j,this.mDigitsNumber,b.m),j+=this.mDigitsNumber);0<this.mDigitsNumber&&0<this.sDigitsNumber&&this.p_setFGSeparator(g,h);0<this.sDigitsNumber&&this.setFGDigits(k,j,this.sDigitsNumber,b.s);this.ensureVisible()},p_setFGSeparator:function(d,e){var f=d[e];f.visible()||f.show()}}),OdometerTimerView=Class.create(GraphicalTimerView,{timerType:"odometer",initialize:function($super,b,d){this.textSeparator=!1;return $super(b,d)},preloadAssets:function($super){$super();this.leftCap.size=new IWSize(9,50);this.rightCap.size=new IWSize(9,50);this.center.size=new IWSize(38,50);this.separator.size=new IWSize(5,50);$A(this.digits).each(function(b){b.size=new IWSize(210,280)})}}),FlipTimerView=Class.create(GraphicalTimerView,{timerType:"flip",initialize:function($super,b,d){this.textSeparator=!1;return $super(b,d)},preloadAssets:function($super){$super();this.leftCap.size=new IWSize(8,50);this.rightCap.size=new IWSize(8,50);this.center.size=new IWSize(39,50);this.separator.size=new IWSize(1,50);$A(this.digits).each(function(b){b.size=new IWSize(39,50)})}}),DigitalTimerView=Class.create(GraphicalTimerView,{timerType:"digital",initialize:function($super,b,d){this.textSeparator=!0;$super(b,d)},preloadAssets:function($super){$super();this.leftCap.size=new IWSize(5,45);this.rightCap.size=new IWSize(5,45);this.center.size=new IWSize(30,45);this.separator.size=new IWSize(50,150);$A(this.digits).each(function(b){b.size=new IWSize(120,150)})}});
(function(){var a={};a.Years=". ()";a.Days=".";a.Hours=".";a.Mins=".";a.Secs=".";RegisterWidgetStrings("com-apple-iweb-widget-timer",a)})();