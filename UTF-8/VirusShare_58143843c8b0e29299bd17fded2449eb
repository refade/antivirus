def("widget-profile",function(){(function(d,s,id){expose.init=function(){var self=this.dom;var timer;var configWidget=JSON.parse(self.getAttribute("data-config"));var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}js=d.createElement(s);js.id=id;js.src=configWidget.sourceJs;var callbackHeader=function(status){try{instances.header[0].showItens(status);}catch(e){console.error("[widget-profile] A função instances.header[0].showItens() não existe!");}};js.onload=js.onreadystatechange=function(){js.onload=null;js.onreadystatechange=null;timer=setInterval(function(){if(typeof UOL=="undefined"){return false;}clearInterval(timer);if(UOL.hasOwnProperty("perfil")&&UOL.perfil.hasOwnProperty("widgets")&&UOL.perfil.widgets.hasOwnProperty("Notify")&&typeof UOL.perfil.widgets.Notify==="function"){window.widgetProfile=UOL.perfil.widgets.Notify({avatarSize:configWidget.avatarSize,avatarIconColor:configWidget.avatarIconColor,widgetStyle:{username:configWidget.widgetStyle.username,counter:configWidget.widgetStyle.counter,zIndex:configWidget.widgetStyle.zIndex},responsive:true,linkCheckout:{sg:"2668383698",sa:configWidget["ga-id"]},target:"profile-avatar",callback:{onInit:function(data){var status=data.isLogged?1:0;callbackHeader(status);}}});}else{callbackHeader(2);}},200);};js.onerror=function(){callbackHeader(3);};fjs.parentNode.insertBefore(js,fjs);};}(document,"script","widget-profile-jssdk"));});def("areas/musica/modal-deezer",function(){include("modal");expose.init=function(){if(window.location.href.indexOf("#20170730")!=-1){var modal=this.modal.open(this.dom);}};expose.selector=".modal-deezer";});def("bannersticky",function(){(function(){expose.init=function(){var self=this;setTimeout(function(){var separator=$(".article.scroll-base .divider.separator");if($(".title-header").height()==null){var title=$(".blog-header");}else{var title=$(".title-header");}if(($(".title-kicker").height()!=null)&&($(".title-header").height()==null)){var title=$(".title-kicker");}if(($(".title-header-image").height()!=null)&&($(".title-header").height()==null)){var title=$(".title-header-image");}if(Config.platform=="mobile"){if($(".title-header")==null&&$(".h-headline").height()!=null){var title=$(".h-headline");}}var bannerContainer=$(".bannersticky-top-container");var banner=$(".bannersticky-top");function reziseBannerContainer(){if(window.location.search.substring(1).indexOf("testeTopoFixo")==-1){bannerContainer.css("min-height",banner.css("height"));}else{$("#banner-responsive-top-horizontal-1").find("iframe").css({height:"230px","background-color":"#000",border:"1px solid #000"});}}reziseBannerContainer();banner.show();if(separator.size()>0&&(separator.offset().top<title.offset().top)){var content=separator.first();}else{if(title.size()>0&&title.is(":visible")){var content=title;}else{banner.css("position","relative");return;}}$(".bannersticky-top",self.dom).scrollfix({limit:content});$(window).on("resize",function(){banner.css("width",document.querySelector("body").getBoundingClientRect().width+"px");reziseBannerContainer();});var intervalCount=0;var bannerResizeInterval=setInterval(function(){intervalCount++;reziseBannerContainer();if(intervalCount>=5){clearInterval(bannerResizeInterval);}},1000);},1000);};expose.selector=".bannersticky-top-container";})();});def("bannersmart",function(){expose.init=function(){var cacheDays;Config.components.bannersmart.showAgain?cacheDays=Config.components.bannersmart.showAgain:cacheDays=15;var SmartBanner={"version":"0.0.2131","sb":$(".bannersmart"),"platform":null,"showAgain":cacheDays,"storageEnabled":true,"control":{"closed":{}}};SmartBanner.init=function(appName){console.log("VERSAO SMART BANNER: "+SmartBanner.version);SmartBanner.storage.detect();SmartBanner.storage.load();SmartBanner.setData();SmartBanner.detectDevice();console.log("plataforma",SmartBanner.platform);if(SmartBanner.platform==undefined){return;}SmartBanner.setAppName();if(SmartBanner.appName==undefined){return;}if(SmartBanner.appName=="favorito"){SmartBanner.appendBookmarkTpl();}else{SmartBanner.appendSmartBannerTpl();}SmartBanner.bind();SmartBanner.sb.slideDown("fast");};SmartBanner.storage={detect:function(){try{localStorage.setItem("storageDetection","true");localStorage.removeItem("storageDetection");}catch(e){SmartBanner.storageEnabled=false;}},get:function(key){return JSON.parse(localStorage.getItem(key));},set:function(key,value){return localStorage.setItem(key,JSON.stringify(value));},save:function(){if(SmartBanner.storageEnabled){SmartBanner.storage.set("sb-control",SmartBanner.control);}},load:function(){if(SmartBanner.storageEnabled){if(SmartBanner.storage.get("sb-control")){SmartBanner.control=SmartBanner.storage.get("sb-control");}}}};SmartBanner.setAppName=function(){var name=SmartBanner.sb.data("app");SmartBanner.appName=SmartBanner.chooseOne(name.match(",")?name.split(","):[name]);};SmartBanner.chooseOne=function(names){var now=new Date().getTime();names=names.filter(function(el){return(!(el in SmartBanner.control.closed)||(el in SmartBanner.control.closed&&SmartBanner.control.closed[el]<now))&&(SmartBanner._data[SmartBanner.platform][el].validation());});return names[Math.floor(Math.random()*names.length)];};SmartBanner.bind=function(){$(".close",SmartBanner.sb).on("click touchend",function(e){e.preventDefault();SmartBanner.close();});};SmartBanner.close=function(){var now=new Date();now.setDate(now.getDate()+SmartBanner.showAgain);SmartBanner.control.closed[SmartBanner.appName]=now.getTime();SmartBanner.storage.save();SmartBanner.sb.slideUp("fast");};SmartBanner.detectDevice=function(userAgent){var UA=userAgent||navigator.userAgent;if(UA.match(/iPhone|iPod|iPad/i)!=null&&UA.match(/Safari/i)!=null){SmartBanner.iDevice=UA.match(/iPad/)?"tablet":"phone";SmartBanner.platform="ios";}else{if(UA.match(/Android/i)!=null){SmartBanner.platform="android";}}if(UA.match(/Windows Phone/i)){SmartBanner.platform=null;}};SmartBanner.appendSmartBannerTpl=function(){var appData=SmartBanner._data[SmartBanner.platform][SmartBanner.appName];if(SmartBanner.iDevice!==undefined&&appData.hasOwnProperty(SmartBanner.iDevice)){appData=$.extend({},appData,appData[SmartBanner.iDevice]);}var store=SmartBanner._data.storeName[SmartBanner.platform];$(".bannersmart").find(".info .appStore").html(store).end().find("a").attr("href",appData.storeUrl).end().show();};SmartBanner.appendBookmarkTpl=function(){var appData=SmartBanner._data[SmartBanner.platform][SmartBanner.appName];if(SmartBanner.iDevice!==undefined&&appData.hasOwnProperty(SmartBanner.iDevice)){appData=$.extend({},appData,appData[SmartBanner.iDevice]);}$(".bannersmart").html("");var tpl="<span class='close'>X</span> "+"<span class='logo' style='background-image: url("+appData.iconUrl+");'></span> "+"<div class='info no-button'> "+"<strong>"+appData.title+"</strong> "+"<span>"+appData.instructions+"</span> "+"</div>";$(".bannersmart").html(tpl);};SmartBanner.setData=function(){var platform="";var app="";for(platform in Config.components.bannersmart.apps.platforms){var x=Config.components.bannersmart.apps.platforms[platform];for(app in Config.components.bannersmart.apps[x]){Config.components.bannersmart.apps[x][app].validation=function(){return true;};}}SmartBanner._data=Config.components.bannersmart.apps;};SmartBanner.init();};});def("areas/estilo/travel-submenu",function(){});def("video-embed",function(){include("//player.mais.uol.com.br/js/uolplayer.min","breakpoints");window.playerEvents={onPlay:function(obj){refresh({"init":false});$(obj.mediaPlayer.mediaElement).trigger("onPlay",obj);},onPause:function(obj){$(obj.mediaPlayer.mediaElement).trigger("onPause",obj);refresh();},onResume:function(obj){refresh({"init":false});$(obj.mediaPlayer.mediaElement).trigger("onResume",obj);},onEnd:function(obj){$(obj.mediaPlayer.mediaElement).trigger("onEnd",obj);},onFullscreen:function(obj){$(obj.mediaPlayer.mediaElement).trigger("onFullscreen",obj);},onResize:function(obj){$(obj.mediaPlayer.mediaElement).trigger("onResize",obj);},onInit:function(obj){setTimeout(function(){try{var data=obj.mediaPlayer.wrapper.dataset;if($(obj.mediaPlayer.wrapper).parents().attr("data-autoplayscroll")=="true"){return;}if(data.hasOwnProperty("metricsPlay")){data=JSON.parse(data.metricsPlay);}hitAudience.countClick(data);}catch(e){}},1000);}};expose.player=null;expose.navigationVideoScroll=function(){var self=this;function videoHidden(coord){var parent=$(this).closest(".collection-item")&&$(this).closest(".article");parent=parent.find('[class*="read-more-btn"]:last')[0]&&parent.find('[class*="read-more-btn"]:last').is(":visible")?parent.find('[class*="read-more-btn"]:last')[0].getBoundingClientRect():false;return parent&&(parent.top+window.pageYOffset)<coord?true:false;}function defineStatus(dom){var callback=null;var coord=this.bottom+window.pageYOffset;if(videoHidden.call(dom,coord)){callback="hidden";}else{if(this.bottom<=0){callback="stop";}else{if(coord<=(window.innerHeight+window.pageYOffset)){callback="start";}}}return callback;}function isLoaded(){if(this=="loading"){try{isLoaded.call(this);}catch(e){return false;}}else{return true;}}window.addEventListener("scroll",function(){var status=defineStatus.call(self.dom.getBoundingClientRect(),self.dom);if(self.dom.dataset.scrollstatus=="stop"||status=="hidden"){return;}if(/start|stop/.test(status)&&self.dom.dataset.scrollstatus!=status&&isLoaded.call(self.player.getState())){self.player.play();self.dom.setAttribute("data-scrollStatus",status);}});};expose.bind=function(){$(this.dom).on("click",function(){this.setAttribute("data-scrollStatus","stop");});if(!this.breakpoints.checkin("xs")&&!("ontouchstart" in window)&&this.dom.dataset.hasOwnProperty("autoplayscroll")){this.navigationVideoScroll();}};expose.LoadMais=function(){var self=this;this.interval=setInterval(function(){if(window.UOLPlayer){clearInterval(self.interval);$.extend(window.UOLPlayer,playerEvents);self.player=new window.UOLPlayer(self.dom.querySelector(".uolplayer"));self.bind.call(self);}},500);};expose.init=function(){this.LoadMais.call(this);};});def("album-content",function(){(function(){include("/hammer/2.0.4/hammer.min","/masonry/3.3.1/masonry.pkgd","modal","breakpoints","querystring");expose.type="";expose.prevType="";expose.views=[];expose.viewsList=[];expose.total=0;expose.configs={};expose.audienceTime=2000;expose.audienceTimer;expose.audienceIndex=0;expose.getFinish=function(){return this.total<=this.views.length&&this.prevType=="full";};var mode={};mode.full={init:function(){if(!this.configs.start){var bannerContainer=$(this.dom).find(".banner-album");var banner=$(bannerContainer).find(".ads").children().first();if(banner.children().size()==0&&!this.breakpoints.checkin("xs")&&!this.breakpoints.checkin("sm")&&banner.length>0){window.uolads&&window.uolads.push({"id":banner[0].id});if(!banner.children().size()==0){$(".close-banner .ads-wrapper").prepend('<div class="button-close"><div class="close-click"><span class="text-close">FECHAR</span><svg class="svg-icon svg-icon-close"><use xlink:href="#svg-close" /></span></div></div>');}}var infoHeight=$(this.dom).find(".photo-info").eq(this.photo-1).outerHeight();setTimeout(function(){bannerContainer.animate({"bottom":"100px"},500);},500);var closeBanner=function(){$(".close-banner").hide();};$(this.dom).find(".button-close").on("click",closeBanner);if(!this.breakpoints.checkin("xs")&&!this.breakpoints.checkin("sm")){$(this.dom).find(".close-banner").css("marginBottom","0px");}}!this.swipe&&mode.full.related.call(this);this.photoActive=$(this.dom).find(".photo-item").eq(this.photo-1).addClass("on");this.swipe&&mode.full.related.call(this);!this.swipe&&mode.full.effects.photo.call(this);mode.full.effects.caption.init.call(this);mode.full.effects.cover.call(this);var banner=$(this.dom).find(".banner-album");if(banner.hasClass("notFull")){banner.removeClass("notFull");banner.show();}},related:function(){var self=this;if(this.configs.related||this.getFinish()){var seemore=$(this.dom).find(".album-content-related");if(!(this.related&&this.related.visible)){this.related=this.modal.open(seemore,"fade:related:related");this.related.enableClickClose();$(self.dom).find(".photo-nav").children().addClass("on");self.photo=this.swipe?$(self.dom).attr("data-photo"):hash();this.related.onclose=function(){$(self.dom).find(".photo-nav").children().removeClass("on");self.views=[];if(self.type=="full"){self.update.call(self,{photo:parseInt(self.photo)+(!self.swipe&&($(self.dom).find(".photo-next").hasClass("active")?1:+1))});}};}}},isAnimated:function(){return this.prevActive&&this.prevActive.is(":animated")||this.photoActive&&this.photoActive.is(":animated");},effects:{init:function(){var self=this;("ontouchstart" in window)&&mode.full.effects.swipe.call(this);$(document).on("keyup.full",function(e){(e.keyCode==37||e.keyCode==39)&&$(self.dom).find(e.keyCode==39?".photo-next":".photo-prev").trigger("click");});$(window).on("resize.full",function(){mode.full.effects.photo.call(self);});if(("ontouchstart" in window)&&this.breakpoints.checkin("xs")){$(this.dom).find(".photo-nav").hide();$(".album-content-full .photo").on("click.full",function(e){("ontouchstart" in window)&&mode.full.effects.fullscreen.call(self);});}},swipe:function(){var self=this;var move=function(){return $(this).filter(":not(:has(.photo-item:animated))").length;};$(this.dom).filter(":not(:has(.photo-item:animated))").hammer().on("panstart.full",function(e){if(move.call(this)){$(this).find(".photo-item").removeAttr("style").find(".mask").width(0);}}).on("panleft.full panright.full",function(e){if(move.call(this)){$(this).data("pos",e.type).find(".photo-item").data("pos",e.type).removeClass("panleft panright on");var prev=(self.photoActive.addClass("on").prev(".photo-item").length?self.photoActive.prev(".photo-item"):self.photoActive.siblings(".photo-item:last")).addClass("panright on");var next=(self.photoActive.next(".photo-item").length?self.photoActive.next(".photo-item"):self.photoActive.siblings(".photo-item:first")).addClass("panleft on");if(Math.abs(e.gesture.deltaX)>window.innerWidth){e.gesture.deltaX=(e.gesture.deltaX<0?-1:1)*window.innerWidth;}self.photoActive.add(prev).add(next).css("margin-left",e.gesture.deltaX);}}).on("panend.full",function(e){if(move.call(this)){if(Math.abs(e.gesture.deltaX)*100/self.photoActive.width()>5){var left=$(self.dom).data("pos")=="panright"?"100%":"-100%";}$(self.dom).find(".photo-item.on").animate({"margin-left":left||0},300,function(){var pos=$(this).hasClass($(this).data("pos"));$(this).removeAttr("style").removeClass("panleft panright on");if(left){if(pos){self.swipe=true;self.update.call(self,{photo:$(this).attr("data-photo")});crazyloadinit();$(self.dom).find(".photo-nav i").removeClass("active").filter($(this).data("pos")=="panright"?".photo-prev":".photo-next").addClass("active");}}else{self.photoActive.addClass("on");}});}}).find(".photo-full [data-src]").removeClass("auto").addClass("contain");},photo:function(){var item=this.photoActive.find(".photo-full [data-src]");var crops=typeof item.data("crop")=="object"?item.data("crop"):this.parse(item.data("crop"),{});var opt=this.breakpoints.sortOptions(Object.keys(crops),true);opt=opt?crops[opt]:item.data("src").replace(/.*_(\d+x\d+).*/,"$1");var percent=(window.innerHeight-50)*100/opt.split("x")[1];var fit=this.breakpoints.checkin("xs")||opt.split("x")[1]==1||(window.innerHeight-50)<opt.split("x")[1]||window.innerWidth<opt.split("x")[0];item[fit?"removeClass":"addClass"]("auto")[fit?"addClass":"removeClass"]("contain");var offset=((window.innerWidth-opt.split("x")[0]*(fit?percent/100:1))/2);if(this.prevActive.length&&this.photoActive.length&&this.photoActive.attr("data-photo")!=this.prevActive.attr("data-photo")){this.prevActive.removeClass("no-mask").addClass("on").fadeOut(200,function(){$(this).removeClass("on");});this.photoActive.removeClass("on").fadeIn(400,function(){$(this).addClass("on no-mask");});}else{this.prevActive.removeClass("on");this.photoActive.addClass("on no-mask");}$(this.dom).find(".mask").width(offset);},cover:function(){var self=this;if(this.configs.start){$(this.dom).addClass("cover");}else{$(this.dom).find(".album-content-info, .cover").fadeOut(200,function(){$(self.dom).removeClass("cover").find(".album-content-info").removeAttr("style");});}},fullscreen:function(){$(this.dom).toggleClass("fullscreen");},caption:{init:function(){if(!this.breakpoints.checkin("lg")&&!this.breakpoints.checkin("md")){this.photoActive.off().on("click.full",".setinha",function(e){var _this=$(this).closest(".photo-info");if($(_this).find(".photo-description").hasClass("wn")){mode.full.effects.caption.hide.call(_this,e);}else{mode.full.effects.caption.show.call(_this,e);}});}else{this.photoActive.on("mouseover.full",".photo-info",mode.full.effects.caption.show);this.photoActive.on("mouseleave.full",".photo-info",mode.full.effects.caption.hide);}},show:function(e){var banner=$(".album").find(".banner-album");e.preventDefault();var item=$(this).find(".photo-description");var h1=item.height();var h2=item.addClass("wn").removeAttr("style").height();item.css("max-height",h1).animate({"max-height":h2},300);$(".photo-info").each(function(){var self=$(this);var item=self.find(".photo-description");if(!item.is(":animated")){item.addClass("wn").css("max-height",500);}self.find(".setinha").toggleClass("svg-icon-single-arrow-up svg-icon-single-arrow-down");});},hide:function(e){var banner=$(".album").find(".banner-album");e.preventDefault();var item=$(this).find(".photo-description");if(!item.length){item=$(this).siblings(".photo-description");}var h1=item.height();var h2=item.removeClass("wn").removeAttr("style").height();item.addClass("wn").css("max-height",h1).animate({"max-height":h2},300,function(){$(this).removeClass("wn");});$(".photo-info").each(function(){var self=$(this);var item=self.find(".photo-description");if(!item.is(":animated")){item.removeAttr("style").removeClass("wn");}self.find(".setinha").toggleClass("svg-icon-single-arrow-down svg-icon-single-arrow-up");});}}}};mode.list={init:function(){var bannerContainer=$(this.dom).find(".banner-album");if(!this.breakpoints.checkin("xs")&&!this.breakpoints.checkin("sm")){bannerContainer.hide();}setTimeout(function(){window.uolads&&uolads.push({id:"banner-responsive-album-1"});},500);},effects:{init:function(){var self=this;$(".album-content-container",this.dom).on("scroll.list",function(ev){mode.list.effects.update.call(self);crazyloadinit();});if(navigator.msPointerEnabled&&("ontouchstart" in window)){document.addEventListener("pointerout",function(e){mode.list.effects.update.call(self);},false);}},update:function(){var self=this;$(this.dom).find(".photo-item:not(.no-photo):not(.more)").filter(function(i){var top=this.getBoundingClientRect().top-50;if((top>0||top+$(this).outerHeight()<0)){return false;}self.photo=parseInt(this.getAttribute("data-photo"));self.pid=this.id.replace("foto-","");if(parseInt(self.dom.getAttribute("data-photo"))!=self.photo){count.call(self);}});}}};mode.mosaic={init:function(){$(this.dom).find(".photo-item").attr({"data-type":this.prevType,"data-photo":function(i){return i+1;}});if(!this.breakpoints.checkin("xs")&&!this.breakpoints.checkin("sm")){$(this.dom).find(".banner-album").hide();$(this.dom).find(".banner-album").addClass("notFull");}setTimeout(function(){window.uolads&&uolads.push({id:"banner-responsive-album-1"});},500);},effects:{init:function(){var self=this;$(".album-content-container",this.dom).on("scroll.mosaic",function(ev){crazyloadinit();});mode.mosaic.masonry=$(self.dom).find(".photos").masonry({itemSelector:".photo-item"});}}};function count(){if(this.viewsList.indexOf(parseInt(this.photo))==-1){this.viewsList.push(parseInt(this.photo));if(this.type=="list"){if(this.photo%5==0){var adsId=(this.photo/5);window.uolads&&uolads.push({id:"banner-responsive-horizontal-"+adsId});}}}if(this.views.indexOf(parseInt(this.photo))==-1){this.views.push(parseInt(this.photo));}this.dom.setAttribute("data-photo",this.photo);var stringParams=this.querystring.urlReplacement(location.href,"foto",this.pid);stringParams=stringParams.split("?")[1];if("history" in window){history.replaceState(null,null,"?"+stringParams);}else{location.hash="#"+stringParams;}if(this.dom.className.indexOf("cover")==-1){audience.call(this,"click");}if(this.dom.getAttribute("data-ref")&&!this.pageview){audience.call(this,"count");this.pageview=true;}}function audience(type){var audienceComponents=this.dom.getAttribute("data-type")=="mosaic"?["album","comment-counter"]:["share","album","comment-counter"];var self=this;if(type=="count"){var audience={itemId:Audience.id||"",mediaName:"Álbum",mediaTitle:Audience.title,mediaInteractionView:this.type,components:audienceComponents};if(typeof Collection!="undefined"){audience.collection=Collection.title;}this.audienceCount=true;hitAudience.countMetrics(audience);}else{hitAudience.attr("mediaInteractionView",this.type);hitAudience.attr("components",audienceComponents);var audience_config={id:this.pid,reference:"fotos",title:(this.dom.querySelector(".h1")&&this.dom.querySelector(".h1").innerHTML)};if(this.type=="list"){this.audienceTimer&&clearTimeout(this.audienceTimer);this.audienceTimer=setTimeout(function(){if(self.audienceIndex!=self.pid){self.audienceIndex=self.pid;hitAudience.countMedia(audience_config);}},this.audienceTime);}else{hitAudience.countMedia(audience_config);}}}function fixed(el){$(this.dom).find(".album-header")[el.scrollTop<1?"removeClass":"addClass"]("sticky");}function hash(){var hash=location.hash.match(/foto=([^&]*)/);var param=location.search.match(/foto=([^&]*)/);return(hash&&hash[1]||param&&param[1]);}expose.prepare=function(){var self=this;this.total=parseInt(this.dom.getAttribute("data-total"));this.prevType="full";this.type=this.dom.getAttribute("data-type")||this.prevType;if(this.breakpoints.checkin("xs")){this.type=this.dom.getAttribute("data-type-mobile");$(this.dom).find(".album-header")[this.type=="full"?"addClass":"removeClass"]("black");}var modal=this.getModal();this.window=$((modal||{}).dom||window);var pushState=this.dom.getAttribute("data-pstate");var linkAlbum=this.dom.getAttribute("data-link");linkAlbum={hostname:linkAlbum.match(/\/\/([^/]+)[\/]/)[1],pathname:linkAlbum.match(/\/[^/]+\/(?:album|fotos?)\/[^#\?]+/g)[0],protocol:linkAlbum.match(/^https?/)[0],href:linkAlbum};if(pushState&&location.hostname===linkAlbum.hostname&&location.protocol===linkAlbum.protocol&&location.href.indexOf(linkAlbum.pathname)!==-1&&"history" in window){try{history.replaceState(null,null,linkAlbum.href);}catch(err){console.error("Não foi possível fazer o replaceState",err);}this.dom.removeAttribute("data-pstate");}if(modal){modal.onbeforeclose=function(){if((location.hash.indexOf("foto=")!=-1||location.search.indexOf("foto=")!=-1)&&("history" in window&&"replaceState" in history)){history.replaceState(null,null,location.toString().replace(/[#\?].*/,""));}self.destroy();};}$(this.dom).on("click","[data-type]",function(e){e.preventDefault();var banner=$(self.dom).find(".banner-album");banner.css("display","block");if(this.className.match(/\bon/g)||$(this).hasClass("loading-ajax")){return;}var photo;if(!self.dom.className.match(/cover/)){var photo=this.getAttribute("data-photo");var math=photo&&photo.match(/^(\+|\-)\d+/);if(math){photo=self.photo+parseInt(math[0]);}}if(self.type=="mosaic"&&photo){self.photo=photo;}self.swipe=false;self.update.call(self,{type:this.getAttribute("data-type"),photo:photo,el:this});});this.update.call(this,{start:true,photo:hash()||self.type=="full"&&this.dom.getAttribute("data-cover")});};expose.update=function(configs){this.configs=configs||{};if(!this.configs.start){this.prevType=this.type;}this.type=this.configs.type||this.type;if(this.type=="full"&&mode.full.isAnimated.call(this)&&!this.swipe){return;}$(this.configs.el).addClass("loading-ajax");if(this.type==this.prevType||this.configs.start){mount.call(this);}else{var arg={"mode":this.type,"search":{"params":{"path":this.dom.getAttribute("data-link").replace(".htm","").replace(/https?:\/\//g,"")}}};if(this.type=="list"){arg.pos=String(this.photo);}this.getjson(Config.components.service.filename+"?json&type=album-content&args="+JSON.stringify(arg),function(data){$(this.dom).html($(data.body).html());if(this.configs.el){$(this.dom).find("[data-type]").filter(".active").removeClass("active").end().filter(this.configs.el).addClass("active");$(this.dom).find(".album-header")[this.configs.el.getAttribute("data-type")=="full"?"addClass":"removeClass"]("black");}mount.call(this);crazyloadinit();});}function mount(){$(this.configs.el).removeClass("loading-ajax");if(this.configs.photo&&isNaN(this.configs.photo)){this.configs.photo=$(this.dom).find('[id*="'+this.configs.photo+'"]').index(".photo-item")+1;}if(this.configs.photo===0){this.configs.photo=this.total;}this.photo=parseInt(this.configs.photo||this.dom.getAttribute("data-photo"))||1;if(hash()!==null&&!this.dom.querySelector(".photo-item#foto-"+hash())){var dataLink=this.dom.getAttribute("data-link")||location.hostname+location.pathname;this.getjson(Config.components.service.filename+'?json&type=album-content&args={"search":{"params":{"prid":"'+hash()+'","path":"'+dataLink.replace(".htm","").replace("http://","").replace("https://","")+'"}}}',function(data){var markup=$(data.body).find(".photos .photo-item:first");if(markup.length){this.photo=++this.total;$(this.dom).find(".photos .photo-item:last").after(markup.attr("data-photo",this.photo).find(".photo-current").text(this.photo).end());$(this.dom).attr("data-total",this.total).find(".divisor, .value").text(this.total);render();view.call(this);}else{this.photo=1;view.call(this);}});}else{if(this.total<this.photo||this.photo<0){this.photo=1;}view.call(this);}}};function view(){var self=this;if(!this.configs.start&&$(this.dom).hasClass("cover")&&!this.dom.getAttribute("data-init-hash")){this.photo=1;}var diffview=this.configs.start||this.prevType!=this.type;diffview&&this.destroy();this.prevActive=$(this.dom).find(".photo-item.on");$(this.dom).attr({"data-type":this.type,"data-photo":this.photo}).removeClass("album-content-list album-content-full album-content-mosaic cover").addClass("album-content-"+self.type).find(".album-header .line").addClass("on").end().find(".photo-item").removeAttr("style").removeClass("on").removeAttr("data-type").end().find("a").removeClass("on").filter("[data-type="+this.type+"]").addClass("on");if(this.breakpoints.checkin("xs")||this.breakpoints.checkin("sm")){$(this.dom).hasClass("album-content-list")?$(this.dom).find(".setinha").attr("style","display: none !important"):$(this.dom).find(".setinha").attr("style","display: inline !important");}else{$(this.dom).find(".setinha").attr("style","display: none !important");}$(this.dom).find(".photo-description p").each(function(i){if($(this).text().length<35){$(this).closest(".photo-info").find(".setinha").attr("style","display: none !important");}});mode[this.type].init.call(this);if(diffview){mode[self.type].effects.init.call(self);$(this.dom).find(".album-content-container").css("visibility","visible").hide().fadeIn("normal",function(){self.configs.start&&crazyloadinit();});$(this.dom).find(".album-header-view .line").css("left",$(this.dom).find(".album-header-view .on").position().left);}this.pid=this.dom.querySelector('.photo-item[data-photo="'+this.photo+'"]').id.replace("foto-","");if(this.type!="full"){this.related&&this.related.close();}count.call(this);this.window.scrollTop(0);}expose.destroy=function(){$(window).off("resize.full");$(document).off("keyup.full");this.photoActive&&this.photoActive.off("mouseover.full mouseleave.full click.full");$(this.dom).off("panstart.full panleft.full panright.full panend.full");$(".album-content-full .photo").off("click.full");$(".album-content-container",this.dom).off("scroll.list scroll.mosaic");mode.mosaic.masonry&&$(this.dom).find(".photos").masonry().masonry("destroy");};expose.init=function(){this.prepare();};}());});def("album-embed",function(){(function(){include("modal","breakpoints");inherit("bootstrap/open-album");var openAlbum=function(e,el){this.openModalAlbum(e,el);if(!e.hasOwnProperty("originalEvent")){return;}var ref;if(isThumb(el)){ref="abrir-thumb";}};var isThumb=function(el){return el.parentNode.className.indexOf("small-item")!==-1;};var validateVerticalImg=function(){var crops=$(this.dom).find("img:first").data("crop");var opt=this.breakpoints.sortOptions(Object.keys(crops),true);var crop=crops[opt].split("x");if(crop[0]/crop[1]>1){return;}this.dom.className+=" img-vertical";};var openIfFirstItem=function(){var selAlbum=".album-embed.gallery";var colItem=$(selAlbum).parents(".collection-item");if(colItem.length===0){$(selAlbum+" a:first:not(.first-trigger)").trigger("click").addClass("first-trigger");}};expose.init=function(){this.on("click","a",openAlbum);validateVerticalImg.call(this);openIfFirstItem();};}());});def("list-highlights",function(){(function(){include("modal");expose.listLazyLoader=function(){var self=this,collection=$(this.dom).parents(".collection-item").data("url"),args={search:{params:{path:(collection?collection:location.origin+location.pathname).replace(/\.html?/,"")}},lazy:$(this.dom).data("lazy")};function loader(args){var params={"type":"list-highlights","args":JSON.stringify(args),"json":true};$.get(Config.components.service.filename,params,function(data){if(data.body&&data.body.length){for(var item=0;item<=1;item++){$("a[name^="+item+"]",data.body).each(function(){if($("a[name="+this.name+"]",self.dom).length==0){$(this).parent().appendTo($("ul",self.dom).eq(item));args.lazy.loaded++;}});}render();if(args.lazy.loaded<args.lazy.total){args.lazy.first=args.lazy.loaded;loader(args);}else{self.initialItem();console.info("[listLazyLoader] ",args.lazy.loaded," itens carregados.");}}else{console.error("[listLazyLoader] Erro no carregamento dos itens da lista.");}});}if(args.lazy.counter<args.lazy.total){args.lazy.first=args.lazy.counter;args.lazy.loaded=args.lazy.counter;loader(args);console.info("[listLazyLoader] inicializado.");}else{this.initialItem();}};expose.initialItem=function(){var self=$(this.dom),ad=$(".bannersticky-top"),adHeight=ad.length>0&&ad.height()>100?ad.height()+20:0+20,parent=self.closest(".article").find(".btn[data-open], .read-more-btn .btn"),initialItem=self.attr("data-initial");if(initialItem){if(parent.length>0){parent.trigger("click");}var el=$('[name="'+initialItem+'"]'),y=el.offset().top;$("body, html").animate({scrollTop:y-adHeight},600,function(){setTimeout(function(){el.parents("li").addClass("selected").find(".layer").fadeOut(2000);},300);});}};expose.init=function(){this.listLazyLoader();};}());});def("bootstrap/scroll",function(){include("breakpoints");function ScrollController(obj){var containerSize=0,contentSize=0,positionY=0,self=this;function doScroll(){obj.container.triggerHandler("scroll",{scrollY:positionY,containerSize:containerSize,contentSize:contentSize,maxScroll:self.maxScroll()});obj.content.css("top",positionY);self.updateScrollbar();}this.maxScroll=function(){return(contentSize-containerSize)*-1;};this.increment=function(variant){if(variant>0&&positionY>this.maxScroll()){positionY=Math.max(positionY-variant,this.maxScroll());doScroll();return true;}else{if(variant<0&&positionY<0){positionY=Math.min(positionY+variant*-1,0);doScroll();return true;}}return false;};this.scrollBarTo=function(moveTo){var trackSize=obj.scrollBarTrack.outerHeight();var setTop=Math.min(moveTo,obj.scrollBarTrack.outerHeight()-obj.scrollBar.outerHeight());setTop=setTop<0?0:setTop;positionY=setTop*-1/trackSize*contentSize;obj.scrollBar.css("top",setTop);doScroll();};this.scrollTo=function(moveTo){var setTop=Math.max(moveTo,(contentSize-containerSize)*-1);positionY=setTop>0?0:setTop;doScroll();};this.paged=function(toTop){if(toTop&&positionY<0){positionY=Math.min(0,positionY+containerSize);doScroll();return true;}else{if(!toTop&&positionY>this.maxScroll()){positionY=Math.max(positionY-containerSize,this.maxScroll());doScroll();return true;}}return false;};this.updateScrollbar=function(){containerSize=obj.container.outerHeight();contentSize=obj.content.outerHeight();var scrollBarHeight=containerSize/contentSize*100;var scrollBarTop=positionY*-1/contentSize*100;obj.scrollBar.css({height:scrollBarHeight+"%",top:scrollBarTop+"%"});if(scrollBarHeight==100){obj.scrollBarWrap.addClass("disabled");}else{obj.scrollBarWrap.removeClass("disabled");}};this.scrollAll=function(toTop){if(toTop&&positionY<0){positionY=0;doScroll();return true;}else{if(positionY>this.maxScroll()){positionY=this.maxScroll();doScroll();return true;}}return false;};}function Scrollbar(scrollable,config){var scroll,overTimer,activeTimer,inactiveTime=3000,heightDefined=false,self=this;self.container=$(scrollable);function init(){var markup='<div class="scrollbar-container">'+'<div class="scrollbar-wrap">'+'<div class="scrollbar-track" />'+'<div class="scrollbar scroll-animate" />'+"</div>"+"</div>";self.container.attr("tabindex","0").wrapInner('<div class="scroll-content scroll-animate" />').append(markup);self.content=self.container.find(".scroll-content");self.scrollBar=self.container.find(".scrollbar");self.scrollBarContainer=self.container.find(".scrollbar-container");self.scrollBarTrack=self.container.find(".scrollbar-track");self.scrollBarWrap=self.container.find(".scrollbar-wrap");scroll=new ScrollController(self);scroll.updateScrollbar();bind();}function defineHeight(){if(!heightDefined){if(!config.dynamicHeight){self.container.height(self.container.parent().height());}scroll.updateScrollbar();heightDefined=true;}}function inactivityWatcher(){clearTimeout(overTimer);self.container.addClass("is-over");overTimer=setTimeout(function(){self.container.removeClass("is-over");},inactiveTime);}function bind(){self.container.on("keydown",function(e){var scrolled;switch(e.keyCode){case 9:e.preventDefault();break;case 38:scrolled=scroll.increment(-50);break;case 40:scrolled=scroll.increment(50);break;case 33:scrolled=scroll.paged(true);break;case 32:case 34:scrolled=scroll.paged();break;case 36:scrolled=scroll.scrollAll(true);break;case 35:scrolled=scroll.scrollAll();break;}inactivityWatcher();if(scrolled){e.preventDefault();}}).on("mouseenter",function(){self.container.focus();defineHeight();}).on("mouseleave",function(){self.container.blur();});self.container.on("wheel mousewheel",function(e){var scrolled=scroll.increment(e.originalEvent.deltaY>0?50:-50);if(scrolled){e.preventDefault();}inactivityWatcher();}).on("mouseenter mousemove mouseleave",function(){inactivityWatcher();});self.container.on("touchstart",function(e){if(scroll.maxScroll()<0){e.preventDefault();}defineHeight();clearTimeout(activeTimer);self.container.addClass("is-active");self.content.removeClass("scroll-animate");var originalY=e.originalEvent.touches[0].clientY;var originalContentY=self.content.position().top;self.container.on("touchmove",function(e){if(scroll.maxScroll()<0){e.preventDefault();}scroll.scrollTo(originalContentY+(e.originalEvent.touches[0].clientY-originalY));});}).on("touchend",function(){self.content.addClass("scroll-animate");activeTimer=setTimeout(function(){self.container.removeClass("is-active");},inactiveTime);});self.scrollBarContainer.on("mouseenter",function(){self.scrollBarContainer.addClass("is-over");}).on("mouseleave",function(){self.scrollBarContainer.removeClass("is-over");});self.scrollBar.on("mousedown",function(e){e.preventDefault();var originalY=e.clientY;var originalBarY=self.scrollBar.position().top;self.scrollBar.removeClass("scroll-animate");self.content.removeClass("scroll-animate");self.scrollBarContainer.addClass("is-active");clearTimeout(activeTimer);self.container.addClass("is-active");$(window).on("mousemove",function(e){e.preventDefault();scroll.scrollBarTo(originalBarY+(e.clientY-originalY));}).on("mouseup",function(){$(window).off("mousemove");self.scrollBar.addClass("scroll-animate");self.content.addClass("scroll-animate");self.scrollBarContainer.removeClass("is-active");activeTimer=setTimeout(function(){self.container.removeClass("is-active");},inactiveTime);});});$(window).on("resize",function(){scroll.updateScrollbar();});}init();console.log("[scroll] Component scroll initiated");}expose.init=function(){var dataset=this.dom.dataset||$(this.dom).data();var config=this.parse(dataset.scroll,false);if(!config||(config.breakpoints&&config.breakpoints.indexOf(this.breakpoints.breakpoint.name)!=-1)){new Scrollbar(this.dom,config);}};});def("playlist-embed",function(){(function(){include("breakpoints");var self=this;expose.positions=[];expose.player=null;expose.playlistSelect=function(mediaId,video){var html='<div class="uolplayer" id="uolplayer_{{mediaId}}" data-mediaid="{{mediaId}}" data-autoplay="true" data-playlist="true"></div>';video.find(".video-embed .uolplayer").remove().end().find(".video-embed").append(html.replace(/{{mediaId}}/g,mediaId));this.player=new UOLPlayer(document.querySelector("#uolplayer_"+mediaId));};expose.playerStatus=function(elem,type){if($(this.dom).find("a.selected small").length==0){$(this.dom).find("a.selected .thumbnail-image").append("<small>Assistido</small>");}$(this.dom).find(".thumbnail.selected").removeClass("selected");$(this.dom).find("a.active").removeClass("active paused");$(elem).addClass("visualized selected").addClass(type!="onEnd"&&"active").addClass(type=="onPause"&&"paused");if(type=="onPlay"&&this.breakpoints.checkin("md",true)){this.playlistPosition(elem);}};expose.playlistPosition=function(elem){var thumbnails=$(this.dom).find(".thumbnails");var thumbIndex=$(elem).parent().prev().index();if(thumbIndex!=-1){var thumbHeight=$(elem).parent().prev().outerHeight()/2;var position=this.positions[(thumbIndex>=0?thumbIndex:0)];}thumbnails.animate({scrollTop:(position?position+thumbHeight:0)+"px"});};expose.controlBar=function(pos){var control=$(this.dom).find(".cont-control");var self=this;!control.is(":visible")&&control.slideToggle(self.dinamicBar(true));$(this.dom).find(".playlist-current").text(pos+1);};expose.getPositions=function(){var self=this;var thumbArray=$(self.dom).find(".thumbnail-item");for(var i=0,len=thumbArray.length;i<len;i++){self.positions[i]=$(thumbArray[i]).position().top;}};expose.dinamicBar=function(){if(this.breakpoints.breakpoint.name=="md"||this.breakpoints.breakpoint.name=="lg"){if($(this.dom).hasClass("column")){var itemsHeight=[$(this.dom).find(".video-embed").height(),$(this.dom).find(".cont-control").height()];$(this.dom).find(".related-videos").css("height",itemsHeight[0]-itemsHeight[1]).css("overflow-x","hidden");return;}}$(this.dom).find(".related-videos").removeAttr("style");};expose.bind=function(){var self=this;var thumbnail="a.thumbnail";var video=$(self.dom).find(".player");$(self.dom).find(thumbnail).on("click",function(ev){ev.preventDefault();$(".initial-state").removeClass("initial-state");if(!$(this).hasClass("active")){var mediaId=this.dataset.mediaid;if(mediaId){if(self.player){self.player=self.player.changeVideo(mediaId);self.playerStatus(this,"onPlay");}else{self.playlistSelect(mediaId,video);}}}if(self.breakpoints.checkin("xs")||self.breakpoints.checkin("sm")||!/column/.test(self.dom.className)){$("html, body").animate({scrollTop:$(self.dom).offset().top-100});}}).eq(0).parent().addClass("initial-state");if(this.breakpoints.checkin("xs")||this.breakpoints.checkin("sm")){$(self.dom).find(".read-more .read-more-btn button.close").on("click",function(){var headerHeight=50;$("html, body").animate({scrollTop:$(self.dom).offset().top-headerHeight},600);});}$(video).on("onChangeVideo onChange onChangevideo",".video-element",function(ev,obj){console.log("changed");});$(video).on("onPlay onPause onResume onEnd",".video-element",function(ev,obj){var itens=$(self.dom).find(thumbnail);var videoPlayItem=$(self.dom).find(".uolplayer").attr("data-playlist");var active=itens.filter('[data-mediaid="'+obj.mediaId+'"]');self.controlBar(itens.index(active));self.playerStatus(active,ev.type);if(ev.type=="onEnd"){active.parent()[active.parent().next().length?"next":"siblings"](":first:not(:has(.visualized))").find(".thumbnail").trigger("click");}});if(this.breakpoints.checkin("xs")){$(self.dom).on("touchstart",".playlist-control",function(ev){$(this).toggleClass("active");});}$(".related-videos, .read-more, .thumbnails",this.dom).on("scroll",function(e,data){crazyload();($(self.dom).find(".degrade").stop())[data.scrollY<=(data.maxScroll+50)?"fadeOut":"fadeIn"]("fast");});};expose.init=function(){this.bind();this.getPositions();this.dinamicBar();};})();});def("quiz-content",function(){expose.control=[];expose.totalquestions="";expose.resultreturn=function(pts){var val=0;if(this.type=="majority"){var obj={};for(var x in pts){obj["Faixa "+pts[x]]=obj["Faixa "+pts[x]]!=undefined?obj["Faixa "+pts[x]]+1:1;}for(var key in obj){if(obj[key]>val&&$(this.dom).find(".result .text-result:eq("+(parseInt(key.match(/\d+/g))-1)+")").length){val=parseInt(key.match(/\d+/g));}}}else{for(var x in pts){val+=pts[x];}}return val;};expose.updateQuestion=function(item,remount,callee){if(remount){item[0].removeClass("responded success error").find("li").removeClass("not-hidden").show().end().find(".justification").hide().end().find(".btn").removeClass("not-hover selected disabled certain wrong").end().find('.btn [class*="icon-"]').attr("class","icon-unselected");if(callee&&item[1]){arguments.callee([item[1]]);}}else{item[0].addClass("not-hover selected").find('[class*="icon-"]').attr("class","icon-selected").end().parent().siblings(":not(.last)").find(".btn").addClass("not-hover disabled");}};expose.majorityandpoints=function(configs){var params=!configs.item.hasClass("responded")?[[configs.self],false,false]:[[configs.item,configs.self],true,true];this.updateQuestion(params[0],params[1],params[2]);configs.item.addClass("responded");this.control["Question "+(configs.item.index()+1)]=configs.self.parent().data("band");};expose.hits=function(configs){var ind=configs.self.parent().index();var indr=configs.item.data("answer")-1;var bool=ind!=indr;var cropsquare=configs.item.hasClass("crop-square");if(bool){configs.self.addClass("not-hover selected wrong").parent().addClass("not-hidden").find('[class*="icon-"]').attr("class","icon-close-2");if(ind>indr&&!cropsquare){configs.self.parent().attr("data-index",ind);configs.self.closest("ol").prepend(configs.self.parent());}}else{configs.self.addClass("selected");this.control["Question "+(configs.item.index()+1)]=configs.item.data("points")||1;}if(cropsquare){configs.item.find("li").addClass("not-hidden").end().find("li:not(:eq("+indr+"), :eq("+ind+")) .btn").addClass("not-hover disabled");}configs.item.addClass(bool?"responded error":"responded success").find("li:eq("+(configs.item.data("answer")-(bool&&ind>indr&&!cropsquare?0:1))+")").siblings(":not(.not-hidden, .last, [data-index])").hide().end().find(".btn").addClass("not-hover certain").end().find('.btn [class*="icon-"]').attr("class","icon-checked").end().end().find(".justification").show();};expose.warning=function(data){return data.length==1?"a questão "+data[0]:"as questões "+data.join(", ").replace(/,([^,]+)+$/g," e $1");};expose.updatewarning=function(ind){var item=this.dom.querySelector(".warning span");if(item){var notresponded=item.innerHTML.match(/\d+/g).filter(function(v){return v!=ind;});item.innerHTML=this.warning.call(this,notresponded);}};expose.incompletequiz=function(configs){if(configs.item.index()==configs.questions.getAttribute("data-questions")-1&&!this.dom.querySelector(".warning")){var allquestions=this.dom.querySelectorAll(".item");var notresponded=[];for(var i=0;i<allquestions.length;i++){if(!allquestions[i].getAttribute("class").match(/responded/g)){notresponded.push(i+1);}}if(notresponded.length>0){var warning='<div class="warning">'+'<h3 class="title-warning">Ops!</h3>'+"<p>Você não respondeu <span>"+this.warning.call(this,notresponded)+"</span>. Responda para ver o seu resultado.</p>"+"</div>";$(this.dom).find(".result").show(function(){$(this).prepend(warning);});}}};expose.showresult=function(){if(this.totalquestions==0){if($(this.dom).find(".warning").length){$(this.dom).find(".warning").remove();}var result=this.resultreturn.call(this,this.control);if($(this.dom).find(".result .text-result").length==1){$(this.dom).find(".result, .result .text-result").show().end().find(".restart").removeClass("hidden").end().find(".points .user-pts").text(result);}else{var ind="";var listresult=$(this.dom).find(".result .text-result");for(var i=0;i<listresult.length;i++){var range=listresult[i].getAttribute("data-range").match(/\d+/g);if(range.length==2&&range[0]<=result&&range[1]>=result){ind=i;break;}else{if(range.length==1&&range[0]==result&&$(this.dom).find(".result .text-result:eq("+i+")").length){ind=i;break;}}}$(this.dom).find(".result, .result .text-result:eq("+ind+")").show().end().find(".restart").removeClass("hidden").end().find(".points .user-pts").text(result);}this.dom.setAttribute("data-finish",true);}};expose.restart=function(){var self=this;this.control=[];this.totalquestions="";[].forEach.call(this.dom.querySelectorAll(".item"),function(item){self.updateQuestion([$(item)],true);var element=item.querySelector("[data-index]");element&&$(element).insertAfter($("li:eq("+element.getAttribute("data-index")+")",item)).removeAttr("data-index");});$(this.dom).removeAttr("data-finish").find(".result, .result .text-result").hide().end().find(".restart").addClass("hidden").end().find(".points .user-pts").text("");var scroller=$(this.dom).closest(".modal-wrapper").length?$(this.dom).closest(".modal-wrapper"):$("html, body");scroller.animate({scrollTop:scroller.hasClass("modal-wrapper")?0:$(this.dom).offset().top-100});};expose.init=function(){var scope=this;scope.questions=this.dom.querySelector(".questions");scope.type=scope.questions.getAttribute("data-type");this.on("click",".btn-alternative",function(e){var self=$(e.target).closest(".btn");var item=self.closest(".item");if((item.hasClass("responded")&&scope.type=="hits")||!scope.type||scope.dom.hasAttribute("data-finish")){return;}if(this.totalquestions==""&&scope.questions.getAttribute("data-questions")&&!item.hasClass("responded")){this.totalquestions=scope.questions.getAttribute("data-questions")-1;}else{if(!item.hasClass("responded")){this.totalquestions=this.totalquestions-1;}}this[scope.type=="hits"?"hits":"majorityandpoints"].call(this,{"self":self,"item":item});this.updatewarning.call(this,item.index()+1);this.incompletequiz.call(this,{"item":item,"questions":scope.questions});this.showresult.call(this);});this.on("click",".restart",this.restart);};});def("quiz-embed",function(){(function(){include("modal","breakpoints");expose.init=function(){this.on("click","a",function(e,el){e.preventDefault();if(this.dom.className.indexOf("opened")==-1){var self=this;var padding=50;if(self.breakpoints.checkin(["xs"])){var padding=10;var width="100%";}else{if(self.breakpoints.checkin(["sm"])){var width=738;var padding=40;}else{if(self.breakpoints.checkin(["md"])){var width=640;}else{var width=820;}}}var modal=this.modal.open({type:"quiz-content",args:{"mode-collection":true,ref:this.dom.getAttribute("data-ref").replace(/[\#\?].*/g,""),search:{params:{path:el.getAttribute("href").replace(/http:\/\/|.htm|\?dev/g,"").replace(/[\#\?].*/g,"")}}}},"center",{width:width,padding:padding});modal.onbeforeshow=function(){modal.addButtonClose();crazyloadinit();};this.dom.className+=" opened";modal.onclose=function(){$(".ads").each(function(){var banner=$(this).children().first();if(banner.children().size()==0){window.uolads&&window.uolads.push(banner[0]);}});$(".bannersticky-top-container").css("height",$(".bannersticky-top").css("height"));setTimeout(function(){$(".bannersticky-top").css("width",$(window).width());},100);self.dom.className=self.dom.className.replace("opened","");};}});if(instances.$apply("collection","getPosition",[this,false])==0){this.trigger("click","a:first");}};}());});def("suggest",function(){instances.suggest=[];expose.create=function(dom,events){var suggest=new this.Suggest();if(dom instanceof jQuery){var dom=dom[0];}suggest.dom=dom;suggest.input=suggest.dom&&suggest.dom.querySelector(".suggest[data-args]");if(events){suggest.setEvents(events);}suggest.events.call(suggest);return suggest;};expose.Suggest=function(){instances.suggest.push(this);};expose.Suggest.prototype.fired=false;expose.Suggest.prototype.storage={};expose.Suggest.prototype.lastRequest=function(){};expose.Suggest.prototype.onSuccess=function(){};expose.Suggest.prototype.onCancel=function(){};expose.Suggest.prototype.onEmpty=function(){};expose.Suggest.prototype.onBeforeSearch=function(){};expose.Suggest.prototype.setEvents=function(events){for(key in events){this[key]=events[key];}};expose.Suggest.prototype.search=function(item,e){if(!item.getAttribute("data-search")){return;}this.onBeforeSearch.call(this);location.href=item.getAttribute("data-search")+encodeURIComponent(item.value);};expose.Suggest.prototype.events=function(){var self=this;this.input&&$(this.input).on("keyup",function(e){var val=this.value;var length=this.getAttribute("data-length");clearTimeout(self.lastRequest);if((val==""||(length&&val.length<=length)||(!length&&val.length<=3)||e.keyCode==27)&&self.fired){self.fired=false;if(e.keyCode==27){this.value="";}self.onCancel.call(self);return;}if((!length&&val.length>=4)||(length&&val.length>=length)){self[e.keyCode==13?"search":"request"].call(self,this,e);}});this.dom&&$(this.dom).on("click","[data-search-suggest]",function(e){e.preventDefault();var txt=this.innerHTML||this.text;self.input.value=txt;self.search.call(self,self.input,e);});};expose.Suggest.prototype.request=function(item,e){var self=this;this.lastRequest=setTimeout(function(){var url=location.origin+Config.components.service.filename+"?type=suggest&args="+encodeURIComponent(item.getAttribute("data-args").replace(/{{value}}/g,lib.string.slug(item.value)));$.get(url,function(response){var response=(function(){try{return JSON.parse(response.trim());}catch(e){}return response.trim();})();self[response.message=="empty result"?"onEmpty":"onSuccess"].call(self,response.data||undefined);self.lastRequest=function(){};self.fired=true;});},1000);};});def("navigation-search-list",function(){include("suggest");expose.libSuggest=function(){var suggest=lib.suggest.create(this.dom);var list=this.dom.querySelector(".suggest-list"),inputBox=this.dom.querySelector(".input-box");var suggestCancelAndEmpty=function(){inputBox.className=inputBox.className.replace(/ visible/,"");list.innerHTML="";list.removeAttribute("style");};suggest.onSuccess=function(data){inputBox.className=inputBox.className+" visible";list.innerHTML=data;};suggest.onBeforeSearch=function(){this.storage.audience.call(this.dom,$(this.input).data("config-omniture"));};suggest.onCancel=suggestCancelAndEmpty;suggest.onEmpty=suggestCancelAndEmpty;suggest.storage={"audience":hitAudience.countClick};};expose.changePage=function(e,val){var val=e.type=="click"&&val?val:this.value;if((e.type=="keyup"&&e.keyCode==13||e.type!="keyup")&&val!=""){hitAudience.countClick.call(self.dom,$(this).data("config-omniture"));window.location.href=e.type!="change"?this.getAttribute("data-search")+encodeURIComponent(val):val;}};expose.formFilter=function(){$(this).data("formFilter").config({onSelect:function(el,event,data){if(data.url&&data.url!=""){window.location.href=data.url;}}});};expose.init=function(){var self=this;if(this.dom.querySelector(".suggest")){this.libSuggest.call(this);}else{$(this.dom).on("keyup","#filled-normal",self.changePage);}$(this.dom).on("click","span.icon-search",function(e){self.changePage.call(this,e,$(self.dom).find(".fildBusca").val());});$(this.dom).on("change",".categorias",self.changePage);$(".form-filter",this.dom).each(self.formFilter);};});def("collection-home",function(){expose.init=function(){var self=this;this.getjson(Config.components.service.filename+'?type=home&args={"title":{"loadajax":true},"search":{"params":{"path":"'+$(this.dom).attr("data-path")+'"}}}',function(data){self.dom.innerHTML=data.body;});$(window).on("scroll.collection-home",function(){if(this.innerHeight/2.8>=self.dom.getBoundingClientRect().top){$(this).off("scroll.collection-home");setTimeout(function(){hitAudience.countMetrics({mediaType:"home",mediaName:"Home",mediaTitle:"Home"});},2000);}});};expose.selector=".collection-home";});def("collection-index",function(){(function(){expose.init=function(){var self=this;$(".ads",self.dom).css("margin-top","0");document.onreadystatechange=function(){if(document.readyState==="complete"){makeScrollable(self);}};setTimeout(function(){makeScrollable(self);},1500);$(window).on("resize",function(){makeScrollable(self);});};function makeScrollable(self){var content=$(".row",self.dom);if(content.length){$(".scrollFixed, [class*=fixed]",self.dom).scrollfix({limit:content,marginTop:50});$(".ads",self.dom).css("position","inherit");$(".ads",self.dom).scrollfix({limit:content,marginTop:10});}}expose.selector=".collection-index";})();});def("metrics",function(){expose.selector="script";expose.keyLoaded="data-metrics-initiated";expose.init=function(){var body=document.body;if(!body.getAttribute(this.keyLoaded)){this.dataMetrics();}};expose.dataMetrics=function(){document.body.setAttribute(this.keyLoaded,true);$("body").on("click","[data-metrics]",function(e){var self=e.currentTarget;if(location.search.indexOf("blockLink")!=-1||window.Audience.blockLink){e.preventDefault();}try{var data=JSON.parse(self.getAttribute("data-metrics"));}catch(e){console.warn("JSON de métricas do clique inválido");var data=false;}if(!data.onlyLoad){if(typeof data.component=="undefined"){data.component=window["Audience"||"Metrics"].mediaType;}if(typeof data.action=="undefined"){if(this.getAttribute("href")&&["","#"].indexOf(this.getAttribute("href"))===-1&&this.href.indexOf(":void(0)")===-1){data.action=this.href;}else{data.action="clique";}}if(data){console.warn("countNewMetrics",data);hitAudience.countClick.call(this,data);}else{console.warn("Métrica de clique não disparada");}}});};});def("teaser",function(){(function(){include("ie");expose.selector=false;var config={dom:"body",input:null,output:null,limit:100,invert:false};function Teaser(options){var self=this;if(isNaN(options.limit)){delete options.limit;}config=$.extend(config,options);if(!config.input.length||!config.input[0].type.match(/text/gi)){return false;}$(config.dom).on("keydown keyup blur mouseover mouseout",config.input.selector,function(){var enters=(this.value.match(/(\r|\n)/g,"")||[]).length;var length=this.value.replace(/(\r|\n)/g,"").length;length+=(enters*2);if(typeof self.ie!=="undefined"&&self.ie.is&&self.ie.version<=9){if(length>config.limit){this.value=this.value.substring(0,config.limit);}}var size=config.invert?config.limit-length:length;$(this).parent().find(config.output.selector).text(size<0?0:size);});$(config.input).attr("maxlength",config.limit).keyup();return this;}function length(){return config.input[0].value.length;}function currentLength(){return config.output[0].innerText;}expose={length:length,currentLength:currentLength,create:Teaser};}());});def("tabs",function(){(function(undefined){include("breakpoints","/iscroll/iscroll.min.js");expose.isWeb=null;expose.breakpoint=null;expose.widthOfList=function(){var tabs=$(this.dom).find(".nav-tabs li"),itemsWidth=0;tabs.each(function(){var itemWidth=$(this).outerWidth();itemsWidth+=itemWidth;});return itemsWidth;};expose.reAdjust=function(){var _that=this,_self=$(this.dom),wrapper=_self.find(".wrapper"),breakpoint=this.breakpoints.breakpoint.name=="lg"||this.breakpoints.breakpoint.name=="md";this.isWeb=breakpoint;this.breakpoint=this.breakpoints.breakpoint.name;(this.widthOfList()!=0)&&_self.find(".nav-tabs").css("width",this.widthOfList());if(wrapper.outerWidth()<this.widthOfList()){_self.find(".nav-tabs").addClass("left");}else{_self.find(".nav-tabs").removeClass("left");}if(wrapper.outerWidth()<this.widthOfList()){_self.find(".nav-wrapper").css("width",this.widthOfList());_self.find(".tab-wrapper").addClass("slider");}else{if(_self.find(".tab-wrapper").hasClass("slider")){_self.find(".tab-wrapper").removeClass("slider");}}if(this.iScroll){_that.iScroll.destroy();_that.iScroll=null;_that.configIscroll();}$(window).load(function(){_that.configIscroll();});};expose.toggle=function(scroll){var maxScroll=-(scroll.maxScrollX),posX=-(scroll.x);if(posX>0&&posX<maxScroll){$(this.dom).find(".tab-wrapper.slider").addClass("on-left").addClass("on-right");}if(posX==0){$(this.dom).find(".tab-wrapper.slider").addClass("on-left").removeClass("on-right");}if(posX==maxScroll){$(this.dom).find(".tab-wrapper.slider").addClass("on-right").removeClass("on-left");}};expose.configIscroll=function(){var mobile={scrollX:true,scrollY:false,click:true};var web={scrollX:true,scrollY:false,snap:true,disableMouse:true};var _that=this;var config=(this.isWeb)?web:mobile;this.iScroll=new IScroll(this.dom.querySelector(".tab-container"),config);_that.iScroll.scrollToElement("li.active",0,true,true);$(this.dom).find(".scroller-right").on("click",function(ev){_that.iScroll.next();});$(this.dom).find(".scroller-left").on("click",function(ev){_that.iScroll.prev();});_that.iScroll.on("scrollEnd",function(){_that.toggle(this);});_that.toggle(_that.iScroll);};expose.bind=function(){var breakpoint=this.breakpoints.breakpoint.name,_that=this,_self=$(this.dom),tabs=_self.find(".inner-tabs a");$(window).on("resize",function(e){_that.reAdjust();});tabs.on("click",function(event){var self=this,tab=$(self).closest(".tabs"),items=$(".inner-tabs a",tab),contents=$(".tab-item",tab);items.each(function(i){$(this).parent("li")[self==this?"addClass":"removeClass"]("active");contents.eq(i)[self==this?"addClass":"removeClass"]("active");});});};expose.init=function(){this.reAdjust();this.bind();};})();});def("rating",function(){(function(){expose.init=function(){var self=this;function active(e){var classe=e.type!="click"?"h-":"";var $parent=$(this).closest(".rating");$(this).parent().children().removeClass(classe+"on "+classe+"off");if(e.type!="mouseleave"){$(this).nextAll().addClass(classe+"off").end().prevAll().add($(this)).addClass(classe+"on");}if(e.type=="click"){$parent.attr("data-rating",$(this).data("value"));}}$(self.dom).each(function(item){if(!$(this).data("rating")){$(this).attr("data-rating",$(this).find(".on").length);}});$("body").on("click",".rating:not(.average) .rating-star",active).on("mouseenter",".rating:not(.average) .rating-star",active).on("mouseleave",".rating:not(.average) .rating-star",active);};})();});