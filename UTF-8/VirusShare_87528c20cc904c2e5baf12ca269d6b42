
(function(e){var a=/^\s*|\s*$/g,b,d="B".replace(/A(.)|B/,"$1")==="$1";var c={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var s=this,q=document,o=navigator,g=o.userAgent,m,f,l,k,j,r;s.isIE11=g.indexOf("Trident/")!=-1&&(g.indexOf("rv:")!=-1||o.appName.indexOf("Netscape")!=-1);s.isOpera=e.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(o.appName)||s.isIE11;s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isIE7=s.isIE&&/MSIE [7]/.test(g);s.isIE8=s.isIE&&/MSIE [8]/.test(g);s.isIE9=s.isIE&&/MSIE [9]/.test(g);s.isGecko=!s.isWebKit&&!s.isIE11&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\/(\d*)/)[1]>=534;s.isIE12=(g.indexOf("Edge/")!=-1&&!s.isIE&&!s.isIE11)?12:false;if(s.isIE12){s.isWebKit=false}if(e.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(m=0;m<f.length;m++){r=f[m].href;if(r){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}k=r?r.match(/.*\//)[0]:""}}function h(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){s.suffix="_src"}if((j=i.src.indexOf("?"))!=-1){s.query=i.src.substring(j+1)}s.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(k&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=k+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}l=q.getElementsByTagName("head")[0];if(l){f=l.getElementsByTagName("script");for(m=0;m<f.length;m++){if(h(f[m])){return}}}return},is:function(g,f){if(!f){return g!==b}if(f=="array"&&c.isArray(g)){return true}return typeof(g)==f},isArray:Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"},makeMap:function(f,j,h){var g;f=f||[];j=j||",";if(typeof(f)=="string"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(i,f,h){var j,g;if(!i){return 0}h=h||i;if(i.length!==b){for(j=0,g=i.length;j<g;j++){if(f.call(h,i[j],j,i)===false){return 0}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(h,i[j],j,i)===false){return 0}}}}return 1},map:function(g,h){var i=[];c.each(g,function(f){i.push(h(f))});return i},grep:function(g,h){var i=[];c.each(g,function(f){if(!h||h(f)){i.push(f)}});return i},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return-1},extend:function(n,k){var j,f,h,g=arguments,m;for(j=1,f=g.length;j<f;j++){k=g[j];for(h in k){if(k.hasOwnProperty(h)){m=k[h];if(m!==b){n[h]=m}}}}return n},trim:function(f){return(f?""+f:"").replace(a,"")},create:function(o,f,j){var n=this,g,i,k,l,h,m=0;o=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(o);k=o[3].match(/(^|\.)(\w+)$/i)[2];i=n.createNS(o[3].replace(/\.\w+$/,""),j);if(i[k]){return}if(o[2]=="static"){i[k]=f;if(this.onCreate){this.onCreate(o[2],o[3],i[k])}return}if(!f[k]){f[k]=function(){};m=1}i[k]=f[k];n.extend(i[k].prototype,f);if(o[5]){g=n.resolve(o[5]).prototype;l=o[5].match(/\.(\w+)$/i)[1];h=i[k];if(m){i[k]=function(){return g[l].apply(this,arguments)}}else{i[k]=function(){this.parent=g[l];return h.apply(this,arguments)}}i[k].prototype[k]=i[k];n.each(g,function(p,q){i[k].prototype[q]=g[q]});n.each(f,function(p,q){if(g[q]){i[k].prototype[q]=function(){this.parent=g[q];return p.apply(this,arguments)}}else{if(q!=k){i[k].prototype[q]=p}}})}n.each(f["static"],function(p,q){i[k][q]=p});if(this.onCreate){this.onCreate(o[2],o[3],i[k].prototype)}},walk:function(i,h,j,g){g=g||this;if(i){if(j){i=i[j]}c.each(i,function(k,f){if(h.call(g,k,f,j)===false){return false}c.walk(k,h,j,g)})}},createNS:function(j,h){var g,f;h=h||e;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||e;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(j,i){var h=this,g;g=function(){var f=h.unloads,l,m;if(f){for(m in f){l=f[m];if(l&&l.func){l.func.call(l.scope,1)}}if(e.detachEvent){e.detachEvent("onbeforeunload",k);e.detachEvent("onunload",g)}else{if(e.removeEventListener){e.removeEventListener("unload",g,false)}}h.unloads=l=f=w=g=0;if(e.CollectGarbage){CollectGarbage()}}};function k(){var l=document;function f(){l.detachEvent("onstop",f);if(g){g()}l=0}if(l.readyState=="interactive"){if(l){l.attachEvent("onstop",f)}e.setTimeout(function(){if(l){l.detachEvent("onstop",f)}},0)}}j={func:j,scope:i||this};if(!h.unloads){if(e.attachEvent){e.attachEvent("onunload",g);e.attachEvent("onbeforeunload",k)}else{if(e.addEventListener){e.addEventListener("unload",g,false)}}h.unloads=[j]}else{h.unloads.push(j)}return j},removeUnload:function(i){var g=this.unloads,h=null;c.each(g,function(j,f){if(j&&j.func==i){g.splice(f,1);h=i;return false}});return h},explode:function(f,g){if(!f||c.is(f,"array")){return f}return c.map(f.split(g||","),c.trim)},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(d){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===b){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};c._init();e.tinymce=e.tinyMCE=c})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:false,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(b,a){this.listeners.push({cb:b,scope:a||this.scope});return b},addToTop:function(d,b){var a=this,c={cb:d,scope:b||a.scope};if(a.inDispatch){a.listeners=[c].concat(a.listeners)}else{a.listeners.unshift(c)}return d},remove:function(c){var b=this.listeners,a=null;tinymce.each(b,function(e,d){if(c==e.cb){a=e;b.splice(d,1);return false}});return a},dispatch:function(){var a=this,e,b=arguments,c,d=a.listeners,f;a.inDispatch=true;for(c=0;c<d.length;c++){f=d[c];e=f.cb.apply(f.scope,b.length>0?b:[f.scope]);if(e===false){break}}a.inDispatch=false;return e}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,i,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w\-]*:?\/\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||"http")+"://mce_host"+f.toAbsPath(h,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});c=g.base_uri;if(c){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host==="mce_host"){f.port=c.port}if(!f.host||f.host==="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var d=this,f;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:d});if((b.host!="mce_host"&&d.host!=b.host&&b.host)||d.port!=b.port||d.protocol!=b.protocol){return b.getURI()}var c=d.getURI(),e=b.getURI();if(c==e||(c.charAt(c.length-1)=="/"&&c.substr(0,c.length-1)==e)){return c}f=d.toRelPath(d.path,b.path);if(b.query){f+="?"+b.query}if(b.anchor){f+="#"+b.anchor}return f},toAbsolute:function(b,c){b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f===1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length===0||f[c]==="."){continue}if(f[c]===".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!==0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(c,e,d){var b=new Date();b.setTime(b.getTime()-1000);this.set(c,"",b,e,d)}})})();(function(){function serialize(o,quote){var i,v,t,name;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&Object.prototype.toString.call(o)==="[object Array]"){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(name in o){if(o.hasOwnProperty(name)){v+=typeof o[name]!="function"?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):""}}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}})(tinymce);tinymce.util.Quirks=function(a){var j=tinymce.VK,f=j.BACKSPACE,l=j.DELETE,e=a.dom,n=a.selection,K=a.settings,z=a.parser,r=a.serializer,H=tinymce.each;function D(Q,P){try{a.getDoc().execCommand(Q,false,P)}catch(O){}}function q(){var O=a.getDoc().documentMode;return O?O:6}function C(O){return O.isDefaultPrevented()}function M(){function O(U){var Q,S,P,V,R,T,W;function X(){if(R.nodeType==3){if(U&&T==R.length){return true}if(!U&&T===0){return true}}}Q=n.getRng();var Y=[Q.startContainer,Q.startOffset,Q.endContainer,Q.endOffset];if(!Q.collapsed){U=true}R=Q[(U?"start":"end")+"Container"];T=Q[(U?"start":"end")+"Offset"];if(R.nodeType==3){S=e.getParent(Q.startContainer,e.isBlock);if(U){S=e.getNext(S,e.isBlock)}if(S&&(X()||!Q.collapsed)){P=e.create("em",{id:"__mceDel"});H(tinymce.grep(S.childNodes),function(Z){P.appendChild(Z)});S.appendChild(P)}}Q=e.createRng();Q.setStart(Y[0],Y[1]);Q.setEnd(Y[2],Y[3]);n.setRng(Q);a.getDoc().execCommand(U?"ForwardDelete":"Delete",false,null);if(P){V=n.getBookmark();while(W=e.get("__mceDel")){e.remove(W,true)}n.moveToBookmark(V)}}a.onKeyDown.add(function(P,R){var Q;Q=R.keyCode==l;if(!C(R)&&(Q||R.keyCode==f)&&!j.modifierPressed(R)){R.preventDefault();O(Q)}});a.addCommand("Delete",function(){O()})}function t(){function O(R){var Q=e.create("body");var S=R.cloneContents();Q.appendChild(S);return n.serializer.serialize(Q,{format:"html"})}function P(Q){var S=O(Q);var T=e.createRng();T.selectNode(a.getBody());var R=O(T);return S===R}a.onKeyDown.add(function(R,T){var S=T.keyCode,Q;if(!C(T)&&(S==l||S==f)){Q=R.selection.isCollapsed();if(Q&&!e.isEmpty(R.getBody())){return}if(tinymce.isIE&&!Q){return}if(!Q&&!P(R.selection.getRng())){return}R.setContent("");R.selection.setCursorLocation(R.getBody(),0);R.nodeChanged()}})}function L(){a.onKeyDown.add(function(O,P){if(!C(P)&&P.keyCode==65&&j.metaKeyPressed(P)){P.preventDefault();O.execCommand("SelectAll")}})}function N(){if(!a.settings.content_editable){e.bind(a.getDoc(),"focusin",function(O){n.setRng(n.getRng())});e.bind(a.getDoc(),"mousedown",function(O){if(O.target==a.getDoc().documentElement){a.getWin().focus();n.setRng(n.getRng())}})}}function E(){a.onKeyDown.add(function(O,R){if(!C(R)&&R.keyCode===f){if(n.isCollapsed()&&n.getRng(true).startOffset===0){var Q=n.getNode();var P=Q.previousSibling;if(P&&P.nodeName&&P.nodeName.toLowerCase()==="hr"){e.remove(P);tinymce.dom.Event.cancel(R)}}}})}function B(){if(!Range.prototype.getClientRects){a.onMouseDown.add(function(P,Q){if(!C(Q)&&Q.target.nodeName==="HTML"){var O=P.getBody();O.blur();setTimeout(function(){O.focus()},0)}})}}function h(){a.onClick.add(function(O,P){P=P.target;if(/^(IMG|HR)$/.test(P.nodeName)){n.getSel().setBaseAndExtent(P,0,P,1)}if(P.nodeName=="A"&&e.hasClass(P,"mceItemAnchor")){n.select(P)}O.nodeChanged()})}function c(){function P(){var R=e.getAttribs(n.getStart().cloneNode(false));return function(){var S=n.getStart();if(S!==a.getBody()){e.setAttrib(S,"style",null);H(R,function(T){S.setAttributeNode(T.cloneNode(true))})}}}function O(){return!n.isCollapsed()&&e.getParent(n.getStart(),e.isBlock)!=e.getParent(n.getEnd(),e.isBlock)}function Q(R,S){S.preventDefault();return false}a.onKeyPress.add(function(R,T){var S;if(!C(T)&&(T.keyCode==8||T.keyCode==46)&&O()){S=P();R.getDoc().execCommand("delete",false,null);S();T.preventDefault();return false}});e.bind(a.getDoc(),"cut",function(S){var R;if(!C(S)&&O()){R=P();a.onKeyUp.addToTop(Q);setTimeout(function(){R();a.onKeyUp.remove(Q)},0)}})}function b(){var P,O;e.bind(a.getDoc(),"selectionchange",function(){if(O){clearTimeout(O);O=0}O=window.setTimeout(function(){var Q=n.getRng();if(!P||!tinymce.dom.RangeUtils.compareRanges(Q,P)){a.nodeChanged();P=Q}},50)})}function A(){document.body.setAttribute("role","application")}function x(){a.onKeyDown.add(function(O,Q){if(!C(Q)&&Q.keyCode===f){if(n.isCollapsed()&&n.getRng(true).startOffset===0){var P=n.getNode().previousSibling;if(P&&P.nodeName&&P.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(Q)}}}})}function F(){if(q()>7){return}D("RespectVisibilityInDesign",true);a.contentStyles.push(".mceHideBrInPre pre br {display: none}");e.addClass(a.getBody(),"mceHideBrInPre");z.addNodeFilter("pre",function(O,Q){var R=O.length,T,P,U,S;while(R--){T=O[R].getAll("br");P=T.length;while(P--){U=T[P];S=U.prev;if(S&&S.type===3&&S.value.charAt(S.value-1)!="\n"){S.value+="\n"}else{U.parent.insert(new tinymce.html.Node("#text",3),U,true).value="\n"}}}});r.addNodeFilter("pre",function(O,Q){var R=O.length,T,P,U,S;while(R--){T=O[R].getAll("br");P=T.length;while(P--){U=T[P];S=U.prev;if(S&&S.type==3){S.value=S.value.replace(/\r?\n$/,"")}}}})}function g(){e.bind(a.getBody(),"mouseup",function(Q){var P,O=n.getNode();if(O.nodeName=="IMG"){if(P=e.getStyle(O,"width")){e.setAttrib(O,"width",P.replace(/[^0-9%]+/g,""));e.setStyle(O,"width","")}if(P=e.getStyle(O,"height")){e.setAttrib(O,"height",P.replace(/[^0-9%]+/g,""));e.setStyle(O,"height","")}}})}function d(){a.onKeyDown.add(function(U,V){var T,O,P,R,S,W,Q;T=V.keyCode==l;if(!C(V)&&(T||V.keyCode==f)&&!j.modifierPressed(V)){O=n.getRng();P=O.startContainer;R=O.startOffset;Q=O.collapsed;if(P.nodeType==3&&P.nodeValue.length>0&&((R===0&&!Q)||(Q&&R===(T?0:1)))){W=P.previousSibling;if(W&&W.nodeName=="IMG"){return}nonEmptyElements=U.schema.getNonEmptyElements();V.preventDefault();S=e.create("br",{id:"__tmp"});P.parentNode.insertBefore(S,P);U.getDoc().execCommand(T?"ForwardDelete":"Delete",false,null);P=n.getRng().startContainer;W=P.previousSibling;if(W&&W.nodeType==1&&!e.isBlock(W)&&e.isEmpty(W)&&!nonEmptyElements[W.nodeName.toLowerCase()]){e.remove(W)}e.remove("__tmp")}}})}function J(){a.onKeyDown.add(function(S,T){var Q,P,U,O,R;if(C(T)||T.keyCode!=j.BACKSPACE){return}Q=n.getRng();P=Q.startContainer;U=Q.startOffset;O=e.getRoot();R=P;if(!Q.collapsed||U!==0){return}while(R&&R.parentNode&&R.parentNode.firstChild==R&&R.parentNode!=O){R=R.parentNode}if(R.tagName==="BLOCKQUOTE"){S.formatter.toggle("blockquote",null,R);Q=e.createRng();Q.setStart(P,0);Q.setEnd(P,0);n.setRng(Q)}})}function I(){function O(){a._refreshContentEditable();D("StyleWithCSS",false);D("enableInlineTableEditing",false);if(!K.object_resizing){D("enableObjectResizing",false)}}if(!K.readonly){a.onBeforeExecCommand.add(O);a.onMouseDown.add(O)}}function v(){function O(P,Q){H(e.select("a"),function(T){var R=T.parentNode,S=e.getRoot();if(R.lastChild===T){while(R&&!e.isBlock(R)){if(R.parentNode.lastChild!==R||R===S){return}R=R.parentNode}e.add(R,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(P,Q){if(Q==="CreateLink"){O(P)}});a.onSetContent.add(n.onSetContent.add(O))}function o(){if(K.forced_root_block){a.onInit.add(function(){D("DefaultParagraphSeparator",K.forced_root_block)})}}function s(){function O(Q,P){if(!Q||!P.initial){a.execCommand("mceRepaint")}}a.onUndo.add(O);a.onRedo.add(O);a.onSetContent.add(O)}function i(){a.onKeyDown.add(function(P,Q){var O;if(!C(Q)&&Q.keyCode==f){O=P.getDoc().selection.createRange();if(O&&O.item){Q.preventDefault();P.undoManager.beforeChange();e.remove(O.item(0));P.undoManager.add()}}})}function u(){var O;if(q()>=10){O="";H("p div h1 h2 h3 h4 h5 h6".split(" "),function(P,Q){O+=(Q>0?",":"")+P+":empty"});a.contentStyles.push(O+"{padding-right: 1px !important}")}}function y(){var Q,P,ag,O,ab,ae,ac,af,R,S,ad,Z,Y,aa=document,W=a.getDoc();if(!K.object_resizing||K.webkit_fake_resize===false){return}D("enableObjectResizing",false);ad={n:[0.5,0,0,-1],e:[1,0.5,1,0],s:[0.5,1,0,1],w:[0,0.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};function U(ak){var aj,ai;aj=ak.screenX-ae;ai=ak.screenY-ac;Z=aj*ab[2]+af;Y=ai*ab[3]+R;Z=Z<5?5:Z;Y=Y<5?5:Y;if(j.modifierPressed(ak)||(ag.nodeName=="IMG"&&ab[2]*ab[3]!==0)){Z=Math.round(Y/S);Y=Math.round(Z*S)}e.setStyles(O,{width:Z,height:Y});if(ab[2]<0&&O.clientWidth<=Z){e.setStyle(O,"left",Q+(af-Z))}if(ab[3]<0&&O.clientHeight<=Y){e.setStyle(O,"top",P+(R-Y))}}function ah(){function ai(aj,ak){if(ak){if(ag.style[aj]||!a.schema.isValid(ag.nodeName.toLowerCase(),aj)){e.setStyle(ag,aj,ak)}else{e.setAttrib(ag,aj,ak)}}}ai("width",Z);ai("height",Y);e.unbind(W,"mousemove",U);e.unbind(W,"mouseup",ah);if(aa!=W){e.unbind(aa,"mousemove",U);e.unbind(aa,"mouseup",ah)}e.remove(O);T(ag)}function T(al){var aj,ak,ai;V();aj=e.getPos(al);Q=aj.x;P=aj.y;ak=al.offsetWidth;ai=al.offsetHeight;if(ag!=al){ag=al;Z=Y=0}H(ad,function(ao,am){var an;an=e.get("mceResizeHandle"+am);if(!an){an=e.add(W.documentElement,"div",{id:"mceResizeHandle"+am,"class":"mceResizeHandle",style:"cursor:"+am+"-resize; margin:0; padding:0"});e.bind(an,"mousedown",function(ap){ap.preventDefault();ah();ae=ap.screenX;ac=ap.screenY;af=ag.clientWidth;R=ag.clientHeight;S=R/af;ab=ao;O=ag.cloneNode(true);e.addClass(O,"mceClonedResizable");e.setStyles(O,{left:Q,top:P,margin:0});W.documentElement.appendChild(O);e.bind(W,"mousemove",U);e.bind(W,"mouseup",ah);if(aa!=W){e.bind(aa,"mousemove",U);e.bind(aa,"mouseup",ah)}})}else{e.show(an)}e.setStyles(an,{left:(ak*ao[0]+Q)-(an.offsetWidth/2),top:(ai*ao[1]+P)-(an.offsetHeight/2)})});if(!tinymce.isOpera&&ag.nodeName=="IMG"){ag.setAttribute("data-mce-selected","1")}}function V(){if(ag){ag.removeAttribute("data-mce-selected")}for(var ai in ad){e.hide("mceResizeHandle"+ai)}}a.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}");function X(){var ai=e.getParent(n.getNode(),"table,img");H(e.select("img[data-mce-selected]"),function(aj){aj.removeAttribute("data-mce-selected")});if(ai){T(ai)}else{V()}}a.onNodeChange.add(X);e.bind(W,"selectionchange",X);a.serializer.addAttributeFilter("data-mce-selected",function(ai,aj){var ak=ai.length;while(ak--){ai[ak].attr(aj,null)}})}function G(){if(q()<9){z.addNodeFilter("noscript",function(O){var P=O.length,Q,R;while(P--){Q=O[P];R=Q.firstChild;if(R){Q.attr("data-mce-innertext",R.value)}}});r.addNodeFilter("noscript",function(O){var P=O.length,Q,S,R;while(P--){Q=O[P];S=O[P].firstChild;if(S){S.value=tinymce.html.Entities.decode(S.value)}else{R=Q.attributes.map["data-mce-innertext"];if(R){Q.attr("data-mce-innertext",null);S=new tinymce.html.Node("#text",3);S.value=R;S.raw=true;Q.append(S)}}}})}}function m(){a.contentStyles.push("body {min-height: 100px}");a.onClick.add(function(O,P){if(P.target.nodeName=="HTML"){a.execCommand("SelectAll");a.selection.collapse(true);a.nodeChanged()}})}function k(){a.onInit.add(function(){var O;a.getBody().addEventListener("mscontrolselect",function(P){setTimeout(function(){if(a.selection.getNode()!=P.target){O=a.selection.getRng();n.fakeRng=a.dom.createRng();n.fakeRng.setStartBefore(P.target);n.fakeRng.setEndAfter(P.target)}},0);P.preventDefault();if(P.target.tagName=="IMG"){window.setTimeout(function(){a.selection.select(P.target)},0)}},false);a.getDoc().addEventListener("selectionchange",function(P){if(O&&!tinymce.dom.RangeUtils.compareRanges(a.selection.getRng(),O)){n.fakeRng=O=null}},false)});if(tinymce.isIE12){a.onClick.add(function(O,P){P=P.target;if(/^(IMG|HR|TABLE)$/.test(P.nodeName)){n.select(P)}if(P.nodeName=="A"&&e.hasClass(P,"mceItemAnchor")){n.select(P)}O.nodeChanged()})}}function p(){function O(){var P=a.dom.create("br");a.getBody().appendChild(P);P.parentNode.removeChild(P)}a.onBeforeGetContent.add(O)}x();J();t();if(tinymce.isWebKit){d();M();N();h();o();if(tinymce.isIDevice){b()}else{y();L()}}if(tinymce.isIE&&!tinymce.isIE11){E();A();F();g();i();u();G()}if(tinymce.isIE11){m();k()}if(tinymce.isIE12){k();y()}if(tinymce.isGecko&&!tinymce.isIE11){E();B();c();I();v();s()}if(tinymce.isOpera){y()}};(function(j){var a,g,d,k=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,i={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","\u0060":"&#96;"};d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(l){var m;m=document.createElement("div");m.innerHTML=l;return m.textContent||m.innerText||l}function e(m,p){var n,o,l,q={};if(m){m=m.split(",");p=p||10;for(n=0;n<m.length;n+=2){o=String.fromCharCode(parseInt(m[n],p));if(!g[o]){l="&"+m[n+1]+";";q[o]=l;q[l]=o}}return q}}a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);j.html=j.html||{};j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:b,function(n){return g[n]||n})},encodeAllRaw:function(l){return(""+l).replace(f,function(m){return g[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:b,function(n){if(n.length>1){return"&#"+(((n.charCodeAt(0)-55296)*1024)+(n.charCodeAt(1)-56320)+65536)+";"}return g[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,l,m){m=m||a;return n.replace(l?k:b,function(o){return g[o]||m[o]||o})},getEncodeFunc:function(l,o){var p=j.html.Entities;o=e(o)||a;function m(r,q){return r.replace(q?k:b,function(s){return g[s]||o[s]||"&#"+s.charCodeAt(0)+";"||s})}function n(r,q){return p.encodeNamed(r,q,o)}l=j.makeMap(l.replace(/\+/g,","));if(l.named&&l.numeric){return m}if(l.named){if(o){return n}return p.encodeNamed}if(l.numeric){return p.encodeNumeric}return p.encodeRaw},decode:function(l){return l.replace(c,function(n,m,o){if(m){o=parseInt(o,m.length===2?16:10);if(o>65535){o-=65536;return String.fromCharCode(55296+(o>>10),56320+(o&1023))}else{return i[o]||String.fromCharCode(o)}}return d[n]||a[n]||h(n)})}}})(tinymce);tinymce.html.Styles=function(f,h){var m=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,j=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,g,k,b={},l,e,a,n="\uFEFF";f=f||{};if(h){e=h.getValidStyles();a=h.getInvalidStyles()}l=("\\\" \\' \\; \\: ; : "+n).split(" ");for(k=0;k<l.length;k++){b[l[k]]=n+k;b[n+k]=l[k]}function d(p,t,s,i){function q(r){r=parseInt(r,10).toString(16);return r.length>1?r:"0"+r}return"#"+q(t)+q(s)+q(i)}return{toHex:function(i){return i.replace(m,d)},parse:function(u){var B={},s,p,z,t,y=f.url_converter;var A=f.url_converter_scope||this;function r(H,K,E){var J,F,D,I;J=B[H+"-top"+K];if(!J){return}F=B[H+"-right"+K];if(!F){return}D=B[H+"-bottom"+K];if(!D){return}I=B[H+"-left"+K];if(!I){return}var G=[J,F,D,I];k=G.length-1;while(k--){if(G[k]!==G[k+1]){break}}if(k>-1&&E){return}B[H+K]=k==-1?G[0]:G.join(" ");delete B[H+"-top"+K];delete B[H+"-right"+K];delete B[H+"-bottom"+K];delete B[H+"-left"+K]}function x(E){var F=B[E],D;if(!F){return}F=F.split(" ");D=F.length;while(D--){if(F[D]!==F[0]){return false}}B[E]=F[0];return true}function C(F,E,D,G){if(!x(E)){return}if(!x(D)){return}if(!x(G)){return}B[F]=B[E]+" "+B[D]+" "+B[G];delete B[E];delete B[D];delete B[G]}function v(D){t=true;return b[D]}function i(E,D){if(t){E=E.replace(/\uFEFF[0-9]/g,function(F){return b[F]})}if(!D){E=E.replace(/\\([\'\";:])/g,"$1")}return E}function q(E,D,H,G,J,F){J=J||F;if(J){J=i(J);return"'"+J.replace(/\'/g,"\\'")+"'"}D=i(D||H||G);if(!f.allow_script_urls){var I=D.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(I)){return""}if(!f.allow_svg_data_urls&&/^data:image\/svg/i.test(I)){return""}}if(y){D=y.call(A,D,"style")}return"url('"+D.replace(/\'/g,"\\'")+"')"}if(u){u=u.replace(/[\u0000-\u001F]/g,"");u=u.replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(D){return D.replace(/[;:]/g,v)});while((s=c.exec(u))){p=s[1].replace(o,"").toLowerCase();z=s[2].replace(o,"");z=z.replace(/\\[0-9a-f]+/g,function(D){return String.fromCharCode(parseInt(D.substr(1),16))});if(p&&z.length>0){if(!f.allow_script_urls&&(p=="behavior"||/expression\s*\(|\/\*|\*\//.test(z))){continue}if(p==="font-weight"&&z==="700"){z="bold"}else{if(p==="color"||p==="background-color"){z=z.toLowerCase()}}z=z.replace(m,d);z=z.replace(j,q);B[p]=t?i(z,true):z}c.lastIndex=s.index+s[0].length}r("border","",true);r("border","-width");r("border","-color");r("border","-style");r("padding","");r("margin","");C("border","border-width","border-style","border-color");if(B.border==="medium none"){delete B.border}if(B["border-image"]==="none"){delete B["border-image"]}}return B},serialize:function(s,i){var r="",q,t;function p(x){var A,y,v,z;A=e[x];if(A){for(y=0,v=A.length;y<v;y++){x=A[y];z=s[x];if(z!==g&&z.length>0){r+=(r.length>0?" ":"")+x+": "+z+";"}}}}function u(x,v){var y;y=a["*"];if(y&&y[x]){return false}y=a[v];if(y&&y[x]){return false}return true}if(i&&e){p("*");p(i)}else{for(q in s){t=s[q];if(t!==g&&t.length>0){if(!a||u(q,i)){r+=(r.length>0?" ":"")+q+": "+t+";"}}}}return r}}};(function(j){var b={},d={};var c=j.makeMap,h=j.each,e=j.extend,g=j.explode,k=j.inArray;function f(l,m){return l?l.split(m||" "):[]}function i(t){var q={},u,n;var r,s,m,p,l;function v(A,x,D){var C,B,E,z=arguments;function y(J,I){var H={},G,F;for(G=0,F=J.length;G<F;G++){H[J[G]]=I||{}}return H}D=D||[];x=x||"";if(typeof D==="string"){D=f(D)}for(B=3;B<z.length;B++){if(typeof z[B]==="string"){z[B]=f(z[B])}D.push.apply(D,z[B])}A=f(A);C=A.length;while(C--){E=[].concat(f(x),u);q[A[C]]={attributes:y(E),attributesOrder:E,children:y(D,d)}}}function o(A,z){var C,y,B,x;A=f(A);C=A.length;z=f(z);while(C--){y=q[A[C]];for(B=0,x=z.length;B<x;B++){y.attributes[z[B]]={};y.attributesOrder.push(z[B])}}}if(b[t]){return b[t]}u=f("id accesskey class dir lang style tabindex title");u.push.apply(u,f("onclick ondblclick onmousedown onmouseup onmouseover onmousemove onmouseout onkeypress onkeydown onkeyup"));if(t!="html4"){u.push.apply(u,f("ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop onmousewheel onscroll"))}u.push.apply(u,f("itemscope itemtype itemid itemprop itemref"));n=f("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");r=f("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment");if(t!="html4"){u.push.apply(u,f("contenteditable contextmenu draggable dropzone hidden spellcheck translate"));n.push.apply(n,f("article aside details dialog figure header footer hgroup section nav"));r.push.apply(r,f("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))}if(t!="html5-strict"){u.push("xml:lang");p=f("acronym applet basefont big font strike tt");r.push.apply(r,p);h(p,function(x){v(x,"",r)});m=f("center dir isindex noframes");n.push.apply(n,m);s=[].concat(n,r);h(m,function(x){v(x,"",s)})}s=s||[].concat(n,r);v("html","manifest","head body");v("head","","base command link meta noscript script style title");v("title hr noscript br");v("base","href target");v("link","href rel media hreflang type sizes hreflang");v("meta","name http-equiv content charset");v("style","media type scoped");v("script","src async defer type charset");v("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s);v("address dt dd div caption","",s);v("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r);v("blockquote","cite",s);v("ol","reversed start type","li");v("ul","","li");v("li","value",s);v("dl","","dt dd");v("a","href target rel media hreflang type",r);v("q","cite",r);v("ins del","cite datetime",s);v("img","src sizes srcset alt usemap ismap width height");v("iframe","src name width height",s);v("embed","src type width height");v("object","data type typemustmatch name usemap form width height",s,"param");v("param","name value");v("map","name",s,"area");v("area","alt coords shape href target rel media hreflang type");v("table","border","caption colgroup thead tfoot tbody tr"+(t=="html4"?" col":""));v("colgroup","span","col");v("col","span");v("tbody thead tfoot","","tr");v("tr","","td th");v("td","colspan rowspan headers",s);v("th","colspan rowspan headers scope abbr",s);v("form","accept-charset action autocomplete enctype method name novalidate target",s);v("fieldset","disabled form name",s,"legend");v("label","form for",r);v("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");v("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",t=="html4"?s:r);v("select","disabled form multiple name required size","option optgroup");v("optgroup","disabled label","option");v("option","disabled label selected value");v("textarea","cols dirname disabled form maxlength name readonly required rows wrap");v("menu","type label",s,"li");v("noscript","",s);if(t!="html4"){v("wbr");v("ruby","",r,"rt rp");v("figcaption","",s);v("mark rt rp summary bdi","",r);v("canvas","width height",s);v("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",s,"track source");v("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",s,"track source");v("picture","","img source");v("source","src srcset type media sizes");v("track","kind src srclang label default");v("datalist","",r,"option");v("article section nav aside header footer","",s);v("hgroup","","h1 h2 h3 h4 h5 h6");v("figure","",s,"figcaption");v("time","datetime",r);v("dialog","open",s);v("command","type label icon disabled checked radiogroup command");v("output","for form name",r);v("progress","value max",r);v("meter","value min max low high optimum",r);v("details","open",s,"summary");v("keygen","autofocus challenge disabled form keytype name")}o("form","onblur onchange onfocus onselect onsubmit");if(t!="html5-strict"){o("script","language xml:space");o("style","xml:space");o("object","declare classid code codebase codetype archive standby align border hspace vspace");o("embed","align name hspace vspace");o("param","valuetype type");o("a","charset name rev shape coords");o("br","clear");o("applet","codebase archive code object alt name width height align hspace vspace");o("img","name longdesc align border hspace vspace");o("iframe","longdesc frameborder marginwidth marginheight scrolling align");o("font basefont","size color face");o("input","usemap align");o("select","onchange");o("textarea");o("h1 h2 h3 h4 h5 h6 div p legend caption","align");o("ul","type compact");o("li","type");o("ol dl menu dir","compact");o("pre","width xml:space");o("hr","align noshade size width");o("isindex","prompt");o("table","summary width frame rules cellspacing cellpadding align bgcolor");o("col","width align char charoff valign");o("colgroup","width align char charoff valign");o("thead","align char charoff valign");o("tr","align char charoff valign bgcolor");o("th","axis align char charoff valign nowrap bgcolor width height");o("form","accept");o("td","abbr axis scope align char charoff valign nowrap bgcolor width height");o("tfoot","align char charoff valign");o("tbody","align char charoff valign");o("area","nohref");o("body","background bgcolor text link vlink alink");o("form","onreset")}if(t!="html4"){o("input button select textarea","autofocus");o("input textarea","placeholder");o("a","download");o("link script img","crossorigin");o("iframe","sandbox seamless allowfullscreen");o("form","oncontextmenu onformchange onforminput oninput oninvalid");o("video audio","onabort oncanplay oncanplaythrough ondurationchange onemptied onended onerror onloadeddata onloadedmetadata onloadstart onpause onplay onplaying onprogress onratechange onreadystatechange onseeked onseeking onstalled onsuspend ontimeupdate onvolumechange onwaiting")}h(f("a form meter progress dfn"),function(x){if(q[x]){delete q[x].children[x]}});delete q.caption.children.table;b[t]=q;return q}function a(m,n){var l;if(m){l={};if(typeof m=="string"){m={"*":m}}h(m,function(p,o){l[o]=l[o.toUpperCase()]=n=="map"?c(p,/[, ]/):g(p,/[, ]/)})}return l}j.html.Schema=function(I){var D=this,B={},p={},o=[],M,l,G;var v,y,H,z,A;var E,u,t,m,L;var x={},q={};function s(P,N,O){var Q=I[P];if(!Q){Q=b[P];if(!Q){Q=c(N," ",c(N.toUpperCase()," "));Q=e(Q,O);b[P]=Q}}else{Q=c(Q,/[, ]/,c(Q.toUpperCase(),/[, ]/))}return Q}I=I||{};G=i(I.schema);if(I.verify_html===false){I.valid_elements="*[*]"}M=a(I.valid_styles);l=a(I.invalid_styles,"map");A=a(I.valid_classes,"map");v=s("whitespace_elements","pre script noscript style textarea video audio iframe object");y=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");H=s("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");z=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls itemscope");u=s("non_empty_elements","td th iframe video audio object script",H);t=s("move_caret_before_on_enter_elements","table",u);m=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");E=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",m);L=s("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");h((I.special||"script noscript style textarea").split(" "),function(N){q[N]=new RegExp("</"+N+"[^>]*>","gi")});function n(N){return new RegExp("^"+N.replace(/([?+*])/g,".$1")+"$")}function K(Z){var T,P,ah,ad,O,R,ac,af,X,ag,aj,W,S,ae,N,aa,Q,ak,ab,V=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,Y=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,U=/[*?+]/;if(Z){Z=f(Z,",");if(B["@"]){aa=B["@"].attributes;Q=B["@"].attributesOrder}for(T=0,P=Z.length;T<P;T++){O=V.exec(Z[T]);if(O){ae=O[1];X=O[2];N=O[3];af=O[5];W={};S=[];R={attributes:W,attributesOrder:S};if(ae==="#"){R.paddEmpty=true}if(ae==="-"){R.removeEmpty=true}if(O[4]==="!"){R.removeEmptyAttrs=true}if(aa){for(ak in aa){W[ak]=aa[ak]}S.push.apply(S,Q)}if(af){af=f(af,"|");for(ah=0,ad=af.length;ah<ad;ah++){O=Y.exec(af[ah]);if(O){ac={};aj=O[1];ag=O[2].replace(/::/g,":");ae=O[3];ab=O[4];if(aj==="!"){R.attributesRequired=R.attributesRequired||[];R.attributesRequired.push(ag);ac.required=true}if(aj==="-"){delete W[ag];S.splice(k(S,ag),1);continue}if(ae){if(ae==="="){R.attributesDefault=R.attributesDefault||[];R.attributesDefault.push({name:ag,value:ab});ac.defaultValue=ab}if(ae===":"){R.attributesForced=R.attributesForced||[];R.attributesForced.push({name:ag,value:ab});ac.forcedValue=ab}if(ae==="<"){ac.validValues=c(ab,"?")}}if(U.test(ag)){R.attributePatterns=R.attributePatterns||[];ac.pattern=n(ag);R.attributePatterns.push(ac)}else{if(!W[ag]){S.push(ag)}W[ag]=ac}}}}if(!aa&&X=="@"){aa=W;Q=S}if(N){R.outputName=X;B[N]=R}if(U.test(X)){R.pattern=n(X);o.push(R)}else{B[X]=R}}}}}function C(N){B={};o=[];K(N);h(G,function(P,O){p[O]=P.children})}function r(O){var N=/^(~)?(.+)$/;if(O){b.text_block_elements=b.block_elements=null;h(f(O,","),function(T){var R=N.exec(T),S=R[1]==="~",U=S?"span":"div",Q=R[2];p[Q]=p[U];x[Q]=U;if(!S){E[Q.toUpperCase()]={};E[Q]={}}if(!B[Q]){var P=B[U];P=e({},P);delete P.removeEmptyAttrs;delete P.removeEmpty;B[Q]=P}h(p,function(V,W){if(V[U]){p[W]=V=e({},p[W]);V[Q]=V[U]}})})}}function F(N){var O=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(N){h(f(N,","),function(S){var R=O.exec(S),P,Q;if(R){Q=R[1];if(Q){P=p[R[2]]}else{P=p[R[2]]={"#comment":{}}}P=p[R[2]];h(f(R[3],"|"),function(T){if(Q==="-"){p[R[2]]=P=e({},p[R[2]]);delete P[T]}else{P[T]={}}})}})}}function J(N){var P=B[N],O;if(P){return P}O=o.length;while(O--){P=o[O];if(P.pattern.test(N)){return P}}}if(!I.valid_elements){h(G,function(O,N){B[N]={attributes:O.attributes,attributesOrder:O.attributesOrder};p[N]=O.children});if(I.schema!="html5-strict"){h(f("strong/b em/i"),function(N){N=f(N,"/");B[N[1]].outputName=N[0]})}B.img.attributesDefault=[{name:"alt",value:""}];h(f("ol ul sub sup blockquote font table tbody tr strong b"),function(N){if(B[N]){B[N].removeEmpty=true}});h(f("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(N){B[N].paddEmpty=true})}else{C(I.valid_elements)}r(I.custom_elements);F(I.valid_children);K(I.extended_valid_elements);F("+ol[ul|ol],+ul[ul|ol]");if(I.invalid_elements){h(g(I.invalid_elements),function(N){if(B[N]){delete B[N]}})}if(!J("span")){K("span[!data-mce-type|*]")}D.children=p;D.getValidStyles=function(){return M};D.getInvalidStyles=function(){return l};D.getValidClasses=function(){return A};D.getBoolAttrs=function(){return z};D.getBlockElements=function(){return E};D.getTextBlockElements=function(){return m};D.getTextInlineElements=function(){return L};D.getShortEndedElements=function(){return H};D.getSelfClosingElements=function(){return y};D.getNonEmptyElements=function(){return u};D.getMoveCaretBeforeOnEnterElements=function(){return t};D.getWhiteSpaceElements=function(){return v};D.getSpecialElements=function(){return q};D.isValidChild=function(N,P){var O=p[N];return!!(O&&O[P])};D.isValid=function(O,N){var Q,P,R=J(O);if(R){if(N){if(R.attributes[N]){return true}Q=R.attributePatterns;if(Q){P=Q.length;while(P--){if(Q[P].pattern.test(O)){return true}}}}else{return true}}return false};D.getElementRule=J;D.getCustomElements=function(){return x};D.addValidElements=K;D.setValidElements=C;D.addCustomElements=r;D.addValidChildren=F;D.elements=B}})(tinymce);(function(a){var b=a.each,c=a.html.Entities;a.html.SaxParser=function(e,g){var d=this;function f(){}e=e||{};d.schema=g=g||new a.html.Schema();if(e.fix_self_closing!==false){e.fix_self_closing=true}b("comment cdata text start end pi doctype".split(" "),function(h){if(h){d[h]=e[h]||f}});d.findEndTag=function(l,j,o){var k=1,h,n,m,i;i=l.getShortEndedElements();m=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;m.lastIndex=h=o;while((n=m.exec(j))){h=m.lastIndex;if(n[1]==="/"){k--}else{if(!n[1]){if(n[2]in i){continue}k++}}if(k===0){break}}return h};d.parse=function(G){var r=this,j,I=0,L,D,C=[],Q,T,E,t;var B,u,P,J,R;var y,q,n,v,V,S,H;var W,O,h;var U,M,o,F,N,k,z=0;var m=c.decode,A,K=a.makeMap("src,href,data,background,formaction,poster");var l=/((java|vb)script|mhtml):/i,p=/^data:/i;function x(X){var Z,Y;Z=C.length;while(Z--){if(C[Z].name===X){break}}if(Z>=0){for(Y=C.length-1;Y>=Z;Y--){X=C[Y];if(X.valid){r.end(X.name)}}C.length=Z}}function s(ac,Y,ag,ae,ad){var aa,ab,X=/[\s\u0000-\u001F]+/g;Y=Y.toLowerCase();ag=Y in J?Y:m(ag||ae||ad||"");if(y&&!B&&Y.indexOf("data-")!==0){aa=S[Y];if(!aa&&H){ab=H.length;while(ab--){aa=H[ab];if(aa.pattern.test(Y)){break}}if(ab===-1){aa=null}}if(!aa){return}if(aa.validValues&&!(ag in aa.validValues)){return}}if(K[Y]&&!e.allow_script_urls){var Z=ag.replace(X,"");try{Z=decodeURIComponent(Z)}catch(af){Z=unescape(Z)}if(l.test(Z)){return}if(!e.allow_html_data_urls&&p.test(Z)&&!/^data:image\//i.test(Z)){return}}Q.map[Y]=ag;Q.push({name:Y,value:ag})}o=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");F=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;P=g.getShortEndedElements();M=e.self_closing_elements||g.getSelfClosingElements();J=g.getBoolAttrs();y=e.validate;u=e.remove_internals;A=e.fix_self_closing;N=g.getSpecialElements();while((j=o.exec(G))){if(I<j.index){r.text(m(G.substr(I,j.index-I)))}if((L=j[6])){L=L.toLowerCase();if(L.charAt(0)===":"){L=L.substr(1)}x(L)}else{if((L=j[7])){L=L.toLowerCase();if(L.charAt(0)===":"){L=L.substr(1)}R=L in P;if(A&&M[L]&&C.length>0&&C[C.length-1].name===L){x(L)}if(!y||(q=g.getElementRule(L))){n=true;if(y){S=q.attributes;H=q.attributePatterns}if((V=j[8])){B=V.indexOf("data-mce-type")!==-1;if(B&&u){n=false}Q=[];Q.map={};V.replace(F,s)}else{Q=[];Q.map={}}if(y&&!B){W=q.attributesRequired;O=q.attributesDefault;h=q.attributesForced;U=q.removeEmptyAttrs;if(U&&!Q.length){n=false}if(h){T=h.length;while(T--){v=h[T];t=v.name;k=v.value;if(k==="{$uid}"){k="mce_"+z++}Q.map[t]=k;Q.push({name:t,value:k})}}if(O){T=O.length;while(T--){v=O[T];t=v.name;if(!(t in Q.map)){k=v.value;if(k==="{$uid}"){k="mce_"+z++}Q.map[t]=k;Q.push({name:t,value:k})}}}if(W){T=W.length;while(T--){if(W[T]in Q.map){break}}if(T===-1){n=false}}if((v=Q.map["data-mce-bogus"])){if(v==="all"){I=r.findEndTag(g,G,o.lastIndex);o.lastIndex=I;continue}n=false}}if(n){r.start(L,Q,R)}}else{n=false}if((D=N[L])){D.lastIndex=I=j.index+j[0].length;if((j=D.exec(G))){if(n){E=G.substr(I,j.index-I)}I=j.index+j[0].length}else{E=G.substr(I);I=G.length}if(n){if(E.length>0){r.text(E,true)}r.end(L)}o.lastIndex=I;continue}if(!R){if(!V||V.indexOf("/")!=V.length-1){C.push({name:L,valid:n})}else{if(n){r.end(L)}}}}else{if((L=j[1])){if(L.charAt(0)===">"){L=" "+L}if(!e.allow_conditional_comments&&L.substr(0,3)==="[if"){L=" "+L}r.comment(L)}else{if((L=j[2])){r.cdata(L)}else{if((L=j[3])){r.doctype(L)}else{if((L=j[4])){r.pi(L,j[5])}}}}}}I=j.index+j[0].length}if(I<G.length){r.text(m(G.substr(I)))}for(T=C.length-1;T>=0;T--){L=C[T];if(L.valid){r.end(L.name)}}}}})(tinymce);(function(d){var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(k,l,j){var i,h,f=j?"lastChild":"firstChild",g=j?"prev":"next";if(k[f]){return k[f]}if(k!==l){i=k[g];if(i){return i}for(h=k.parent;h&&h!==l;h=h.parent){i=h[g];if(i){return i}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if((g=f.attributes)){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new b(g.name,g.type),h,f,m,j,k;if((m=g.attributes)){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!=="id"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}n.attributes=k}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,i=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{i.next=g}if(h.lastChild===f){h.lastChild=i;if(i){i.next=null}}else{g.prev=i}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,i){var g;if(h.parent){h.remove()}g=f.parent||this;if(i){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,i=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){i.push(h)}}return i},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(k){var f=this,j=f.firstChild,h,g;if(j){do{if(j.type===1){if(j.attributes.map["data-mce-bogus"]){continue}if(k[j.name]){return false}h=j.attributes.length;while(h--){g=j.attributes[h].name;if(g==="name"||g.indexOf("data-mce-bookmark")===0){return false}}}if(j.type===8){return false}if((j.type===3&&!c.test(j.value))){return false}}while((j=a(j,f)))}return true},walk:function(f){return a(this,null,f)}});d.extend(b,{create:function(g,f){var i,h;i=new b(g,e[g]||1);if(f){for(h in f){i.attr(h,f[h])}return i}}});d.html.Node=b})(tinymce);(function(d){var a=d.html.Node,e=d.each,b=d.explode,f=d.extend,c=d.makeMap;d.html.DomParser=function(k,l){var j=this,i={},h=[],m={},g={};k=k||{};k.validate="validate"in k?k.validate:true;k.root_name=k.root_name||"body";j.schema=l=l||new d.html.Schema();function n(r){var t,u,B,A,D,s,v,p,z;var o,y,q,C,x;y=c("tr,td,th,tbody,thead,tfoot,table");o=l.getNonEmptyElements();q=l.getTextBlockElements();for(t=0;t<r.length;t++){u=r[t];if(!u.parent||u.fixed){continue}if(q[u.name]&&u.parent.name=="li"){C=u.next;while(C){if(q[C.name]){C.name="li";C.fixed=true;u.parent.insert(C,u.parent)}else{break}C=C.next}u.unwrap(u);continue}A=[u];for(B=u.parent;B&&!l.isValidChild(B.name,u.name)&&!y[B.name];B=B.parent){A.push(B)}if(B&&A.length>1){A.reverse();D=s=j.filterNode(A[0].clone());for(z=0;z<A.length-1;z++){if(l.isValidChild(s.name,A[z].name)){v=j.filterNode(A[z].clone());s.append(v)}else{v=s}for(p=A[z].firstChild;p&&p!=A[z+1];){x=p.next;v.append(p);p=x}s=v}if(!D.isEmpty(o)){B.insert(D,A[0],true);B.insert(u,D)}else{B.insert(u,A[0],true)}B=A[0];if(B.isEmpty(o)||B.firstChild===B.lastChild&&B.firstChild.name==="br"){B.empty().remove()}}else{if(u.parent){if(u.name==="li"){C=u.prev;if(C&&(C.name==="ul"||C.name==="ul")){C.append(u);continue}C=u.next;if(C&&(C.name==="ul"||C.name==="ul")){C.insert(u,C.firstChild,true);continue}u.wrap(j.filterNode(new a("ul",1)));continue}if(l.isValidChild(u.parent.name,"div")&&l.isValidChild("div",u.name)){u.wrap(j.filterNode(new a("div",1)))}else{if(u.name==="style"||u.name==="script"){u.empty().remove()}else{u.unwrap()}}}}}}j.filterNode=function(q){var p,o,r;if(o in i){r=m[o];if(r){r.push(q)}else{m[o]=[q]}}p=h.length;while(p--){o=h[p].name;if(o in q.attributes.map){r=g[o];if(r){r.push(q)}else{g[o]=[q]}}}return q};j.addNodeFilter=function(o,p){e(b(o),function(q){var r=i[q];if(!r){i[q]=r=[]}r.push(p)})};j.addAttributeFilter=function(o,p){e(b(o),function(q){var r;for(r=0;r<h.length;r++){if(h[r].name===q){h[r].callbacks.push(p);return}}h.push({name:q,callbacks:[p]})})};j.parse=function(z,p){var q,M,E,D,G,F,A,u,I,Q,C;var r,H,P=[],O;var x,o,B,v;var s,y,t;p=p||{};m={};g={};r=f(c("script,style,head,html,body,title,meta,param"),l.getBlockElements());y=l.getNonEmptyElements();s=l.children;C=k.validate;t="forced_root_block"in p?p.forced_root_block:k.forced_root_block;v=l.getWhiteSpaceElements();H=/^[ \t\r\n]+/;x=/[ \t\r\n]+$/;o=/[ \t\r\n]+/g;B=/^[ \t\r\n]+$/;function J(){var T=M.firstChild,S,U;function R(V){if(V){T=V.firstChild;if(T&&T.type==3){T.value=T.value.replace(H,"")}T=V.lastChild;if(T&&T.type==3){T.value=T.value.replace(x,"")}}}if(!l.isValidChild(M.name,t.toLowerCase())){return}while(T){S=T.next;if(T.type==3||(T.type==1&&T.name!=="p"&&!r[T.name]&&!T.attr("data-mce-type"))){if(!U){U=N(t,1);U.attr(k.forced_root_block_attrs);M.insert(U,T);U.append(T)}else{U.append(T)}}else{R(U);U=null}T=S}R(U)}function N(R,S){var T=new a(R,S),U;if(R in i){U=m[R];if(U){U.push(T)}else{m[R]=[T]}}return T}function L(T){var U,R,S;for(U=T.prev;U&&U.type===3;){R=U.value.replace(x,"");if(R.length>0){U.value=R;U=U.prev}else{S=U.prev;U.remove();U=S}}}function K(S){var T,R={};for(T in S){if(T!=="li"&&T!="p"){R[T]=S[T]}}return R}q=new d.html.SaxParser({validate:C,allow_script_urls:k.allow_script_urls,allow_conditional_comments:k.allow_conditional_comments,self_closing_elements:K(l.getSelfClosingElements()),cdata:function(R){E.append(N("#cdata",4)).value=R},text:function(T,R){var S;if(!O){T=T.replace(o," ");if(E.lastChild&&r[E.lastChild.name]){T=T.replace(H,"")}}if(T.length!==0){S=N("#text",3);S.raw=!!R;E.append(S).value=T}},comment:function(R){E.append(N("#comment",8)).value=R},pi:function(R,S){E.append(N(R,7)).value=S;L(E)},doctype:function(S){var R;R=E.append(N("#doctype",10));R.value=S;L(E)},start:function(T,S,Y){var V,R,X,U,W;X=C?l.getElementRule(T):{};if(X){V=N(X.outputName||T,1);V.attributes=S;V.shortEnded=Y;E.append(V);W=s[E.name];if(W&&s[V.name]&&!W[V.name]){P.push(V)}R=h.length;while(R--){U=h[R].name;if(U in S.map){I=g[U];if(I){I.push(V)}else{g[U]=[V]}}}if(r[T]){L(V)}if(!Y){E=V}if(!O&&v[T]){O=true}}},end:function(R){var W,T,V,S,U;T=C?l.getElementRule(R):{};if(T){if(r[R]){if(!O){W=E.firstChild;if(W&&W.type===3){V=W.value.replace(H,"");if(V.length>0){W.value=V;W=W.next}else{S=W.next;W.remove();W=S;while(W&&W.type===3){V=W.value;S=W.next;if(V.length===0||B.test(V)){W.remove();W=S}W=S}}}W=E.lastChild;if(W&&W.type===3){V=W.value.replace(x,"");if(V.length>0){W.value=V;W=W.prev}else{S=W.prev;W.remove();W=S;while(W&&W.type===3){V=W.value;S=W.prev;if(V.length===0||B.test(V)){W.remove();W=S}W=S}}}}}if(O&&v[R]){O=false}if(T.removeEmpty||T.paddEmpty){if(E.isEmpty(y)){if(T.paddEmpty){E.empty().append(new a("#text","3")).value="\u00a0"}else{if(!E.attributes.map.name&&!E.attributes.map.id){U=E.parent;if(r[E.name]){E.empty().remove()}else{E.unwrap()}E=U;return}}}}E=E.parent}}},l);M=E=new a(p.context||k.root_name,11);q.parse(z);if(C&&P.length){if(!p.context){n(P)}else{p.invalid=true}}if(t&&(M.name=="body"||p.isRootContent)){J()}if(!p.invalid){for(Q in m){I=i[Q];D=m[Q];A=D.length;while(A--){if(!D[A].parent){D.splice(A,1)}}for(G=0,F=I.length;G<F;G++){I[G](D,Q,p)}}for(G=0,F=h.length;G<F;G++){I=h[G];if(I.name in g){D=g[I.name];A=D.length;while(A--){if(!D[A].parent){D.splice(A,1)}}for(A=0,u=I.callbacks.length;A<u;A++){I.callbacks[A](D,I.name,p)}}}}return M};if(k.remove_trailing_brs){j.addNodeFilter("br",function(p){var u,t=p.length,q,A=f({},l.getBlockElements());var o=l.getNonEmptyElements(),y,v,s,z;var x,r;A.body=1;for(u=0;u<t;u++){q=p[u];y=q.parent;if(A[q.parent.name]&&q===y.lastChild){s=q.prev;while(s){z=s.name;if(z!=="span"||s.attr("data-mce-type")!=="bookmark"){if(z!=="br"){break}if(z==="br"){q=null;break}}s=s.prev}if(q){q.remove();if(y.isEmpty(o)){x=l.getElementRule(y.name);if(x){if(x.removeEmpty){y.remove()}else{if(x.paddEmpty){y.empty().append(new a("#text",3)).value="\u00a0"}}}}}}else{v=q;while(y&&y.firstChild===v&&y.lastChild===v){v=y;if(A[y.name]){break}y=y.parent}if(v===y){r=new a("#text",3);r.value="\u00a0";q.replace(r)}}}})}if(!k.allow_html_in_named_anchor){j.addAttributeFilter("id,name",function(o){var q=o.length,s,p,r,t;while(q--){t=o[q];if(t.name==="a"&&t.firstChild&&!t.attr("href")){r=t.parent;s=t.lastChild;do{p=s.prev;r.insert(s,t);s=p}while(s)}}})}if(k.validate&&l.getValidClasses()){j.addAttributeFilter("class",function(p){var t=p.length,s,q,y,v,r;var x=l.getValidClasses(),u,o;while(t--){s=p[t];q=s.attr("class").split(" ");r="";for(y=0;y<q.length;y++){v=q[y];o=false;u=x["*"];if(u&&u[v]){o=true}u=x[s.name];if(!o&&u&&u[v]){o=true}if(o){if(r){r+=" "}r+=v}}if(!r.length){r=null}s.attr("class",r)}})}}})(tinymce);tinymce.html.Writer=function(d){var g=[],b,a,i,h,f;var e=tinymce.makeMap,c=tinymce.html.Entities;d=d||{};b=d.indent;a=e(d.indent_before||"");i=e(d.indent_after||"");h=c.getEncodeFunc(d.entity_encoding||"raw",d.entities);f=d.element_format=="html";return{start:function(n,m,q){var o,k,j,p;if(b&&a[n]&&g.length>0){p=g[g.length-1];if(p.length>0&&p!=="\n"){g.push("\n")}}g.push("<",n);if(m){for(o=0,k=m.length;o<k;o++){j=m[o];g.push(" ",j.name,'="',h(j.value,true),'"')}}if(!q||f){g[g.length]=">"}else{g[g.length]=" />"}if(q&&b&&i[n]&&g.length>0){p=g[g.length-1];if(p.length>0&&p!=="\n"){g.push("\n")}}},end:function(j){var k;g.push("</",j,">");if(b&&i[j]&&g.length>0){k=g[g.length-1];if(k.length>0&&k!=="\n"){g.push("\n")}}},text:function(k,j){if(k.length>0){g[g.length]=j?k:h(k)}},cdata:function(j){g.push("<![CDATA[",j,"]]>")},comment:function(j){g.push("<!--",j,"-->")},pi:function(j,k){if(k){g.push("<?",j," ",k,"?>")}else{g.push("<?",j,"?>")}if(b){g.push("\n")}},doctype:function(j){g.push("<!DOCTYPE",j,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate="validate"in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,i;i=c.validate;g={3:function(j){e.text(j.value,j.raw)},8:function(j){e.comment(j.value)},7:function(j){e.pi(j.name,j.value)},10:function(j){e.doctype(j.value)},4:function(j){e.cdata(j.value)},11:function(j){if((j=j.firstChild)){do{f(j)}while((j=j.next))}}};e.reset();function f(k){var t=g[k.type],j,o,s,r,p,u,n,m,q;if(!t){j=k.name;o=k.shortEnded;s=k.attributes;if(i&&s&&s.length>1){u=[];u.map={};q=d.getElementRule(k.name);for(n=0,m=q.attributesOrder.length;n<m;n++){r=q.attributesOrder[n];if(r in s.map){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}for(n=0,m=s.length;n<m;n++){r=s[n].name;if(!(r in u.map)){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}s=u}e.start(k.name,s,o);if(!o){if((k=k.firstChild)){do{f(k)}while((k=k.next))}e.end(j)}}else{t(k)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);tinymce.dom={};(function(b,h){var g=!!document.addEventListener;function c(k,j,l,i){if(k.addEventListener){k.addEventListener(j,l,i||false)}else{if(k.attachEvent){k.attachEvent("on"+j,l)}}}function e(k,j,l,i){if(k.removeEventListener){k.removeEventListener(j,l,i||false)}else{if(k.detachEvent){k.detachEvent("on"+j,l)}}}function a(n,l){var i,k=l||{};function j(){return false}function m(){return true}for(i in n){if(i!=="layerX"&&i!=="layerY"){k[i]=n[i]}}if(!k.target){k.target=k.srcElement||document}k.preventDefault=function(){k.isDefaultPrevented=m;if(n){if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}}};k.stopPropagation=function(){k.isPropagationStopped=m;if(n){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}}};k.stopImmediatePropagation=function(){k.isImmediatePropagationStopped=m;k.stopPropagation()};if(!k.isDefaultPrevented){k.isDefaultPrevented=j;k.isPropagationStopped=j;k.isImmediatePropagationStopped=j}return k}function d(m,n,l){var k=m.document,j={type:"ready"};function i(){if(!l.domLoaded){l.domLoaded=true;n(j)}}if(k.readyState=="complete"){i();return}if(g){c(m,"DOMContentLoaded",i)}else{c(k,"readystatechange",function(){if(k.readyState==="complete"){e(k,"readystatechange",arguments.callee);i()}});if(k.documentElement.doScroll&&m===m.top){(function(){try{k.documentElement.doScroll("left")}catch(o){setTimeout(arguments.callee,0);return}i()})()}}c(m,"load",i)}function f(k){var q=this,p={},i,o,n,m,l;m="onmouseenter"in document.documentElement;n="onfocusin"in document.documentElement;l={mouseenter:"mouseover",mouseleave:"mouseout"};i=1;q.domLoaded=false;q.events=p;function j(t,x){var s,u,r,v;s=p[x][t.type];if(s){for(u=0,r=s.length;u<r;u++){v=s[u];if(v&&v.func.call(v.scope,t)===false){t.preventDefault()}if(t.isImmediatePropagationStopped()){return}}}}q.bind=function(x,A,D,E){var s,t,u,r,B,z,C,v=window;function y(F){j(a(F||v.event),s)}if(!x||x.nodeType===3||x.nodeType===8){return}if(!x[h]){s=i++;x[h]=s;p[s]={}}else{s=x[h];if(!p[s]){p[s]={}}}E=E||x;A=A.split(" ");u=A.length;while(u--){r=A[u];z=y;B=C=false;if(r==="DOMContentLoaded"){r="ready"}if((q.domLoaded||x.readyState=="complete")&&r==="ready"){q.domLoaded=true;D.call(E,a({type:r}));continue}if(!m){B=l[r];if(B){z=function(F){var H,G;H=F.currentTarget;G=F.relatedTarget;if(G&&H.contains){G=H.contains(G)}else{while(G&&G!==H){G=G.parentNode}}if(!G){F=a(F||v.event);F.type=F.type==="mouseout"?"mouseleave":"mouseenter";F.target=H;j(F,s)}}}}if(!n&&(r==="focusin"||r==="focusout")){C=true;B=r==="focusin"?"focus":"blur";z=function(F){F=a(F||v.event);F.type=F.type==="focus"?"focusin":"focusout";j(F,s)}}t=p[s][r];if(!t){p[s][r]=t=[{func:D,scope:E}];t.fakeName=B;t.capture=C;t.nativeHandler=z;if(!g){t.proxyHandler=k(s)}if(r==="ready"){d(x,z,q)}else{c(x,B||r,g?z:t.proxyHandler,C)}}else{t.push({func:D,scope:E})}}x=t=0;return D};q.unbind=function(x,z,A){var s,u,v,B,r,t;if(!x||x.nodeType===3||x.nodeType===8){return q}s=x[h];if(s){t=p[s];if(z){z=z.split(" ");v=z.length;while(v--){r=z[v];u=t[r];if(u){if(A){B=u.length;while(B--){if(u[B].func===A){u.splice(B,1)}}}if(!A||u.length===0){delete t[r];e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture)}}}}else{for(r in t){u=t[r];e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture)}t={}}for(r in t){return q}delete p[s];try{delete x[h]}catch(y){x[h]=null}}return q};q.fire=function(u,s,r){var v,t;if(!u||u.nodeType===3||u.nodeType===8){return q}t=a(null,r);t.type=s;do{v=u[h];if(v){j(t,v)}u=u.parentNode||u.ownerDocument||u.defaultView||u.parentWindow}while(u&&!t.isPropagationStopped());return q};q.clean=function(u){var s,r,t=q.unbind;if(!u||u.nodeType===3||u.nodeType===8){return q}if(u[h]){t(u)}if(!u.getElementsByTagName){u=u.document}if(u&&u.getElementsByTagName){t(u);r=u.getElementsByTagName("*");s=r.length;while(s--){u=r[s];if(u[h]){t(u)}}}return q};q.callNativeHandler=function(s,r){if(p){p[s][r.type].nativeHandler(r)}};q.destory=function(){p={}};q.add=function(v,s,u,t){if(typeof(v)==="string"){v=document.getElementById(v)}if(v&&v instanceof Array){var r=v.length;while(r--){q.add(v[r],s,u,t)}return}if(s==="init"){s="ready"}return q.bind(v,s instanceof Array?s.join(" "):s,u,t)};q.remove=function(v,s,u,t){if(!v){return q}if(typeof(v)==="string"){v=document.getElementById(v)}if(v instanceof Array){var r=v.length;while(r--){q.remove(v[r],s,u,t)}return q}return q.unbind(v,s instanceof Array?s.join(" "):s,u)};q.clear=function(r){if(typeof(r)==="string"){r=document.getElementById(r)}return q.clean(r)};q.cancel=function(r){if(r){q.prevent(r);q.stop(r)}return false};q.prevent=function(r){if(!r.preventDefault){r=a(r)}r.preventDefault();return false};q.stop=function(r){if(!r.stopPropagation){r=a(r)}r.stopPropagation();return false}}b.EventUtils=f;b.Event=new f(function(i){return function(j){tinymce.dom.Event.callNativeHandler(i,j)}});b.Event.bind(window,"ready",function(){});b=0})(tinymce.dom,"data-mce-expando");tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","previousSibling",e))}};(function(e){var g=e.each,d=e.is,f=e.isWebKit,b=e.isIE,h=e.html.Entities,c=/^([a-z0-9],?)+$/i,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(o,l){var k=this,i,j,n;k.doc=o;k.win=window;k.files={};k.cssFlicker=false;k.counter=0;k.stdMode=!e.isIE||o.documentMode>=8;k.boxModel=!e.isIE||o.compatMode=="CSS1Compat"||k.stdMode;k.hasOuterHTML="outerHTML"in o.createElement("a");k.settings=l=e.extend({keep_values:false,hex_colors:1},l);k.schema=l.schema;k.styles=new e.html.Styles({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope},l.schema);if(e.isIE6){try{o.execCommand("BackgroundImageCache",false,true)}catch(m){k.cssFlicker=true}}k.fixDoc(o);k.events=l.ownEvents?new e.dom.EventUtils(l.proxy):e.dom.Event;e.addUnload(k.destroy,k);n=l.schema?l.schema.getBlockElements():{};k.isBlock=function(q){if(!q){return false}var p=q.nodeType;if(p){return!!(p===1&&n[q.nodeName])}return!!n[q]}},fixDoc:function(k){var j=this.settings,i;if(b&&!e.isIE11&&!e.isIE12&&j.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(l){k.createElement(l)});for(i in j.schema.getCustomElements()){k.createElement(i)}}},clone:function(k,i){var j=this,m,l;if(!b||e.isIE11||k.nodeType!==1||i){return k.cloneNode(i)}l=j.doc;if(!i){m=l.createElement(k.nodeName);g(j.getAttribs(k),function(n){j.setAttrib(m,n.nodeName,j.getAttrib(k,n.nodeName))});return m}return m.firstChild},getRoot:function(){var i=this,j=i.settings;return(j&&i.get(j.root_element))||i.doc.body},getViewPort:function(j){var k,i;j=!j?this.win:j;k=j.document;i=this.boxModel?k.documentElement:k.body;return{x:j.pageXOffset||i.scrollLeft,y:j.pageYOffset||i.scrollTop,w:j.innerWidth||i.clientWidth,h:j.innerHeight||i.clientHeight}},getRect:function(l){var k,i=this,j;l=i.get(l);k=i.getPos(l);j=i.getSize(l);return{x:k.x,y:k.y,w:j.w,h:j.h}},getSize:function(l){var j=this,i,k;l=j.get(l);i=j.getStyle(l,"width");k=j.getStyle(l,"height");if(i.indexOf("px")===-1){i=0}if(k.indexOf("px")===-1){k=0}return{w:parseInt(i,10)||l.offsetWidth||l.clientWidth,h:parseInt(k,10)||l.offsetHeight||l.clientHeight}},getParent:function(k,j,i){return this.getParents(k,j,i,false)},getParents:function(s,m,k,q){var j=this,i,l=j.settings,p=[];s=j.get(s);q=q===undefined;if(l.strict_root){k=k||j.getRoot()}if(d(m,"string")){i=m;if(m==="*"){m=function(o){return o.nodeType==1}}else{m=function(o){return j.is(o,i)}}}while(s){if(s==k||!s.nodeType||s.nodeType===9){break}if(!m||m(s)){if(q){p.push(s)}else{return s}}s=s.parentNode}return q?p:null},get:function(i){var j;if(i&&this.doc&&typeof(i)=="string"){j=i;i=this.doc.getElementById(i);if(i&&i.id!==j){return this.doc.getElementsByName(j)[1]}}return i},getNext:function(j,i){return this._findSib(j,i,"nextSibling")},getPrev:function(j,i){return this._findSib(j,i,"previousSibling")},select:function(k,j){var i=this;return e.dom.Sizzle(k,i.get(j)||i.get(i.settings.root_element)||i.doc,[])},is:function(l,j){var k;if(l.length===undefined){if(j==="*"){return l.nodeType==1}if(c.test(j)){j=j.toLowerCase().split(/,/);l=l.nodeName.toLowerCase();for(k=j.length-1;k>=0;k--){if(j[k]==l){return true}}return false}}return e.dom.Sizzle.matches(j,l.nodeType?[l]:l).length>0},add:function(l,o,i,k,m){var j=this;return this.run(l,function(r){var q,n;q=d(o,"string")?j.doc.createElement(o):o;j.setAttribs(q,i);if(k){if(k.nodeType){q.appendChild(k)}else{j.setHTML(q,k)}}return!m?r.appendChild(q):q})},create:function(k,i,j){return this.add(this.doc.createElement(k),k,i,j,1)},createHTML:function(q,i,m){var p="",l=this,j;p+="<"+q;for(j in i){if(i.hasOwnProperty(j)){p+=" "+j+'="'+l.encode(i[j])+'"'}}if(typeof(m)!="undefined"){return p+">"+m+"</"+q+">"}return p+" />"},remove:function(i,j){return this.run(i,function(l){var m,k=l.parentNode;if(!k){return null}if(j){while(m=l.firstChild){if(!e.isIE||m.nodeType!==3||m.nodeValue){k.insertBefore(m,l)}else{l.removeChild(m)}}}return k.removeChild(l)})},setStyle:function(l,i,j){var k=this;return k.run(l,function(o){var n,m;n=o.style;i=i.replace(/-(\D)/g,function(q,p){return p.toUpperCase()});if(k.pixelStyles.test(i)&&(e.is(j,"number")||/^[\-0-9\.]+$/.test(j))){j+="px"}switch(i){case"opacity":if(b&&!e.isIE11&&!e.isIE12){n.filter=j===""?"":"alpha(opacity="+(j*100)+")";if(!l.currentStyle||!l.currentStyle.hasLayout){n.display="inline-block"}}n[i]=n["-moz-opacity"]=n["-khtml-opacity"]=j||"";break;case"float":(b&&!e.isIE11&&!e.isIE12)?n.styleFloat=j:n.cssFloat=j;break;default:n[i]=j||""}if(k.settings.update_styles){k.setAttrib(o,"data-mce-style")}})},getStyle:function(l,i,k){l=this.get(l);if(!l){return}if(this.doc.defaultView&&k){i=i.replace(/[A-Z]/g,function(m){return"-"+m});try{return this.doc.defaultView.getComputedStyle(l,null).getPropertyValue(i)}catch(j){return null}}i=i.replace(/-(\D)/g,function(n,m){return m.toUpperCase()});if(i=="float"){i=b?"styleFloat":"cssFloat"}if(l.currentStyle&&k){return l.currentStyle[i]}return l.style?l.style[i]:undefined},setStyles:function(l,m){var j=this,k=j.settings,i;i=k.update_styles;k.update_styles=0;g(m,function(o,p){j.setStyle(l,p,o)});k.update_styles=i;if(k.update_styles){j.setAttrib(l,k.cssText)}},removeAllAttribs:function(i){return this.run(i,function(l){var k,j=l.attributes;for(k=j.length-1;k>=0;k--){l.removeAttributeNode(j.item(k))}})},setAttrib:function(k,l,i){var j=this;if(!k||!l){return}if(j.settings.strict){l=l.toLowerCase()}return this.run(k,function(p){var o=j.settings;var m=p.getAttribute(l);if(i!==null){switch(l){case"style":if(!d(i,"string")){g(i,function(q,r){j.setStyle(p,r,q)});return}if(o.keep_values){if(i&&!j._isRes(i)){p.setAttribute("data-mce-style",i,2)}else{p.removeAttribute("data-mce-style",2)}}p.style.cssText=i;break;case"class":p.className=i||"";break;case"src":case"href":if(o.keep_values){if(o.url_converter){i=o.url_converter.call(o.url_converter_scope||j,i,l,p)}j.setAttrib(p,"data-mce-"+l,i,2)}break;case"shape":p.setAttribute("data-mce-style",i);break}}if(d(i)&&i!==null&&i.length!==0){p.setAttribute(l,""+i,2)}else{p.removeAttribute(l,2)}if(tinyMCE.activeEditor&&m!=i){var n=tinyMCE.activeEditor;n.onSetAttrib.dispatch(n,p,l,i)}})},setAttribs:function(j,k){var i=this;return this.run(j,function(l){g(k,function(m,o){i.setAttrib(l,o,m)})})},getAttrib:function(m,o,k){var i,j=this,l;m=j.get(m);if(!m||m.nodeType!==1){return k===l?false:k}if(!d(k)){k=""}if(/^(src|href|style|coords|shape)$/.test(o)){i=m.getAttribute("data-mce-"+o);if(i){return i}}if(b&&j.props[o]){i=m[j.props[o]];i=i&&i.nodeValue?i.nodeValue:i}if(!i){i=m.getAttribute(o,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o)){if(m[j.props[o]]===true&&i===""){return o}return i?o:""}if(m.nodeName==="FORM"&&m.getAttributeNode(o)){return m.getAttributeNode(o).nodeValue}if(o==="style"){i=i||m.style.cssText;if(i){i=j.serializeStyle(j.parseStyle(i),m.nodeName);if(j.settings.keep_values&&!j._isRes(i)){m.setAttribute("data-mce-style",i)}}}if(f&&o==="class"&&i){i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(b){switch(o){case"rowspan":case"colspan":if(i===1){i=""}break;case"size":if(i==="+0"||i===20||i===0){i=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(i===0){i=""}break;case"hspace":if(i===-1){i=""}break;case"maxlength":case"tabindex":if(i===32768||i===2147483647||i==="32768"){i=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(i===65535){return o}return k;case"shape":i=i.toLowerCase();break;default:if(o.indexOf("on")===0&&i){i=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+i)}}}return(i!==l&&i!==null&&i!=="")?""+i:k},getPos:function(q,l){var j=this,i=0,p=0,m,o=j.doc,k;q=j.get(q);l=l||o.body;if(q){if(q.getBoundingClientRect){q=q.getBoundingClientRect();m=j.boxModel?o.documentElement:o.body;i=q.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-m.clientTop;p=q.top+(o.documentElement.scrollTop||o.body.scrollTop)-m.clientLeft;return{x:i,y:p}}k=q;while(k&&k!=l&&k.nodeType){i+=k.offsetLeft||0;p+=k.offsetTop||0;k=k.offsetParent}k=q.parentNode;while(k&&k!=l&&k.nodeType){i-=k.scrollLeft||0;p-=k.scrollTop||0;k=k.parentNode}}return{x:i,y:p}},parseStyle:function(i){return this.styles.parse(i)},serializeStyle:function(j,i){return this.styles.serialize(j,i)},addStyle:function(j){var k=this.doc,i;styleElm=k.getElementById("mceDefaultStyles");if(!styleElm){styleElm=k.createElement("style"),styleElm.id="mceDefaultStyles";styleElm.type="text/css";i=k.getElementsByTagName("head")[0];if(i.firstChild){i.insertBefore(styleElm,i.firstChild)}else{i.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=j}else{styleElm.appendChild(k.createTextNode(j))}},loadCSS:function(i){var k=this,l=k.doc,j;if(!i){i=""}j=l.getElementsByTagName("head")[0];g(i.split(","),function(m){var n;if(k.files[m]){return}k.files[m]=true;n=k.create("link",{rel:"stylesheet",href:e._addVer(m)});if(b&&!e.isIE11&&l.documentMode&&l.recalc){n.onload=function(){if(l.recalc){l.recalc()}n.onload=null}}j.appendChild(n)})},addClass:function(i,j){return this.run(i,function(k){var l;if(!j){return 0}if(this.hasClass(k,j)){return k.className}l=this.removeClass(k,j);return k.className=(l!=""?(l+" "):"")+j})},removeClass:function(k,l){var i=this,j;return i.run(k,function(n){var m;if(i.hasClass(n,l)){if(!j){j=new RegExp("(^|\\s+)"+l+"(\\s+|$)","g")}m=n.className.replace(j," ");m=e.trim(m!=" "?m:"");n.className=m;if(!m){n.removeAttribute("class");n.removeAttribute("className")}return m}return n.className})},hasClass:function(j,i){j=this.get(j);if(!j||!i){return false}return(" "+j.className+" ").indexOf(" "+i+" ")!==-1},show:function(i){return this.setStyle(i,"display","block")},hide:function(i){return this.setStyle(i,"display","none")},isHidden:function(i){i=this.get(i);return!i||i.style.display=="none"||this.getStyle(i,"display")=="none"},uniqueId:function(i){return(!i?"mce_":i)+(this.counter++)},setHTML:function(k,j){var i=this;return i.run(k,function(m){if(b){while(m.firstChild){m.removeChild(m.firstChild)}try{m.innerHTML="<br />"+j;m.removeChild(m.firstChild)}catch(l){var n=i.create("div");n.innerHTML="<br />"+j;g(e.grep(n.childNodes),function(p,o){if(o&&m.canHaveHTML){m.appendChild(p)}})}}else{m.innerHTML=j}return j})},getOuterHTML:function(k){var j,i=this;k=i.get(k);if(!k){return null}if(k.nodeType===1&&i.hasOuterHTML){return k.outerHTML}j=(k.ownerDocument||i.doc).createElement("body");j.appendChild(k.cloneNode(true));return j.innerHTML},setOuterHTML:function(l,j,m){var i=this;function k(p,o,r){var s,q;q=r.createElement("body");q.innerHTML=o;s=q.lastChild;while(s){i.insertAfter(s.cloneNode(true),p);s=s.previousSibling}i.remove(p)}return this.run(l,function(o){o=i.get(o);if(o.nodeType==1){m=m||o.ownerDocument||i.doc;if(b){try{if(b&&o.nodeType==1){o.outerHTML=j}else{k(o,j,m)}}catch(n){k(o,j,m)}}else{k(o,j,m)}}})},decode:h.decode,encode:h.encodeAllRaw,insertAfter:function(i,j){j=this.get(j);return this.run(i,function(l){var k,m;k=j.parentNode;m=j.nextSibling;if(m){k.insertBefore(l,m)}else{k.appendChild(l)}return l})},replace:function(m,l,i){var j=this;if(d(l,"array")){m=m.cloneNode(true)}return j.run(l,function(k){if(i){g(e.grep(k.childNodes),function(n){m.appendChild(n)})}return k.parentNode.replaceChild(m,k)})},rename:function(l,i){var k=this,j;if(l.nodeName!=i.toUpperCase()){j=k.create(i);g(k.getAttribs(l),function(m){k.setAttrib(j,m.nodeName,k.getAttrib(l,m.nodeName))});k.replace(j,l,1)}return j||l},findCommonAncestor:function(k,i){var l=k,j;while(l){j=i;while(j&&l!=j){j=j.parentNode}if(l==j){break}l=l.parentNode}if(!l&&k.ownerDocument){return k.ownerDocument.documentElement}return l},toHex:function(i){var k=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(i);function j(l){l=parseInt(l,10).toString(16);return l.length>1?l:"0"+l}if(k){i="#"+j(k[1])+j(k[2])+j(k[3]);return i}return i},getClasses:function(){var n=this,j=[],m,o={},p=n.settings.class_filter,l;if(n.classes){return n.classes}function q(i){g(i.imports,function(s){q(s)});g(i.cssRules||i.rules,function(t){switch(t.type||1){case 1:if(t.selectorText){g(t.selectorText.split(","),function(r){r=r.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(r)||!/\.[\w\-]+$/.test(r)){return}l=r;r=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",r);if(p&&!(r=p(r,l))){return}if(!o[r]){j.push({"class":r});o[r]=1}})}break;case 3:try{q(t.styleSheet)}catch(s){}break}})}try{g(n.doc.styleSheets,q)}catch(k){}if(j.length>0){n.classes=j}return j},run:function(l,k,j){var i=this,m;if(i.doc&&typeof(l)==="string"){l=i.get(l)}if(!l){return false}j=j||this;if(!l.nodeType&&(l.length||l.length===0)){m=[];g(l,function(o,n){if(o){if(typeof(o)=="string"){o=i.doc.getElementById(o)}m.push(k.call(j,o,n))}});return m}return k.call(j,l)},getAttribs:function(j){var i;j=this.get(j);if(!j){return[]}if(b){i=[];if(j.nodeName=="OBJECT"){return j.attributes}if(j.nodeName==="OPTION"&&this.getAttrib(j,"selected")){i.push({specified:1,nodeName:"selected"})}j.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(k){i.push({specified:1,nodeName:k})});return i}return j.attributes},isEmpty:function(m,k){var r=this,o,n,q,j,l,p=0;m=m.firstChild;if(m){j=new e.dom.TreeWalker(m,m.parentNode);k=k||r.schema?r.schema.getNonEmptyElements():null;do{q=m.nodeType;if(q===1){if(m.getAttribute("data-mce-bogus")){continue}l=m.nodeName.toLowerCase();if(k&&k[l]){if(l==="br"){p++;continue}return false}n=r.getAttribs(m);o=m.attributes.length;while(o--){l=m.attributes[o].nodeName;if(l==="name"||l==="data-mce-bookmark"){return false}}}if(q==8){return false}if((q===3&&!a.test(m.nodeValue))){return false}}while(m=j.next())}return p<=1},destroy:function(j){var i=this;i.win=i.doc=i.root=i.events=i.frag=null;if(!j){e.removeUnload(i.destroy)}},createRng:function(){var i=this.doc;return i.createRange?i.createRange():new e.dom.Range(this)},nodeIndex:function(m,n){var i=0,k,l,j;if(m){for(k=m.nodeType,m=m.previousSibling,l=m;m;m=m.previousSibling){j=m.nodeType;if(n&&j==3){if(j==k||!m.nodeValue.length){continue}}i++;k=j}}return i},split:function(m,l,p){var q=this,i=q.createRng(),n,k,o;function j(v){var t,s=v.childNodes,u=v.nodeType;function x(A){var z=A.previousSibling&&A.previousSibling.nodeName=="SPAN";var y=A.nextSibling&&A.nextSibling.nodeName=="SPAN";return z&&y}if(u==1&&v.getAttribute("data-mce-type")=="bookmark"){return}for(t=s.length-1;t>=0;t--){j(s[t])}if(u!=9){if(u==3&&v.nodeValue.length>0){var r=e.trim(v.nodeValue).length;if(!q.isBlock(v.parentNode)||r>0||r===0&&x(v)){return}}else{if(u==1){s=v.childNodes;if(s.length==1&&s[0]&&s[0].nodeType==1&&s[0].getAttribute("data-mce-type")=="bookmark"){v.parentNode.insertBefore(s[0],v)}if(s.length||/^(br|hr|input|img)$/i.test(v.nodeName)){return}}}q.remove(v)}return v}if(m&&l){i.setStart(m.parentNode,q.nodeIndex(m));i.setEnd(l.parentNode,q.nodeIndex(l));n=i.extractContents();i=q.createRng();i.setStart(l.parentNode,q.nodeIndex(l)+1);i.setEnd(m.parentNode,q.nodeIndex(m)+1);k=i.extractContents();o=m.parentNode;o.insertBefore(j(n),m);if(p){o.replaceChild(p,l)}else{o.insertBefore(l,m)}o.insertBefore(j(k),m);q.remove(m);return p||l}},bind:function(l,i,k,j){return this.events.add(l,i,k,j||this)},unbind:function(k,i,j){return this.events.remove(k,i,j)},fire:function(k,j,i){return this.events.fire(k,j,i)},getContentEditable:function(j){var i;if(j.nodeType!=1){return null}i=j.getAttribute("data-mce-contenteditable");if(i&&i!=="inherit"){return i}return j.contentEditable!=="inherit"?j.contentEditable:null},_findSib:function(l,i,j){var k=this,m=i;if(l){if(d(m,"string")){m=function(n){return k.is(n,i)}}for(l=l[j];l;l=l[j]){if(m(l)){return l}}}return null},_isRes:function(i){return/^(top|left|bottom|right|width|height)/i.test(i)||/;\s*(top|left|bottom|right|width|height)/i.test(i)}});e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var g=this,e=c.doc,T=0,F=1,k=2,E=true,R=false,V="startOffset",i="startContainer",P="endContainer",A="endOffset",l=Tools.extend,o=c.nodeIndex;function x(){return e.createDocumentFragment()}function r(X,W){C(E,X,W)}function t(X,W){C(R,X,W)}function h(W){r(W.parentNode,o(W))}function J(W){r(W.parentNode,o(W)+1)}function K(W){t(W.parentNode,o(W))}function u(W){t(W.parentNode,o(W)+1)}function B(W){if(W){g[P]=g[i];g[A]=g[V]}else{g[i]=g[P];g[V]=g[A]}g.collapsed=E}function y(W){h(W);u(W)}function G(W){r(W,0);t(W,W.nodeType===1?W.childNodes.length:W.nodeValue.length)}function v(aa,W){var ad=g[i],Y=g[V],ac=g[P],X=g[A],ab=W.startContainer,af=W.startOffset,Z=W.endContainer,ae=W.endOffset;if(aa===0){return H(ad,Y,ab,af)}if(aa===1){return H(ac,X,ab,af)}if(aa===2){return H(ac,X,Z,ae)}if(aa===3){return H(ad,Y,Z,ae)}}function q(){m(k)}function I(){return m(T)}function d(){return m(F)}function D(aa){var X=this[i],W=this[V],Z,Y;if((X.nodeType===3||X.nodeType===4)&&X.nodeValue){if(!W){X.parentNode.insertBefore(aa,X)}else{if(W>=X.nodeValue.length){c.insertAfter(aa,X)}else{Z=X.splitText(W);X.parentNode.insertBefore(aa,Z)}}}else{if(X.childNodes.length>0){Y=X.childNodes[W]}if(Y){X.insertBefore(aa,Y)}else{if(X.nodeType==3){c.insertAfter(aa,X)}else{X.appendChild(aa)}}}}function N(X){var W=g.extractContents();g.insertNode(X);X.appendChild(W);g.selectNode(X)}function L(){return l(new b(c),{startContainer:g[i],startOffset:g[V],endContainer:g[P],endOffset:g[A],collapsed:g.collapsed,commonAncestorContainer:g.commonAncestorContainer})}function O(W,X){var Y;if(W.nodeType==3){return W}if(X<0){return W}Y=W.firstChild;while(Y&&X>0){--X;Y=Y.nextSibling}if(Y){return Y}return W}function n(){return(g[i]==g[P]&&g[V]==g[A])}function H(Z,ab,X,aa){var ac,Y,W,ad,af,ae;if(Z==X){if(ab==aa){return 0}if(ab<aa){return-1}return 1}ac=X;while(ac&&ac.parentNode!=Z){ac=ac.parentNode}if(ac){Y=0;W=Z.firstChild;while(W!=ac&&Y<ab){Y++;W=W.nextSibling}if(ab<=Y){return-1}return 1}ac=Z;while(ac&&ac.parentNode!=X){ac=ac.parentNode}if(ac){Y=0;W=X.firstChild;while(W!=ac&&Y<aa){Y++;W=W.nextSibling}if(Y<aa){return-1}return 1}ad=c.findCommonAncestor(Z,X);af=Z;while(af&&af.parentNode!=ad){af=af.parentNode}if(!af){af=ad}ae=X;while(ae&&ae.parentNode!=ad){ae=ae.parentNode}if(!ae){ae=ad}if(af==ae){return 0}W=ad.firstChild;while(W){if(W==af){return-1}if(W==ae){return 1}W=W.nextSibling}}function C(X,aa,Z){var W,Y;if(X){g[i]=aa;g[V]=Z}else{g[P]=aa;g[A]=Z}W=g[P];while(W.parentNode){W=W.parentNode}Y=g[i];while(Y.parentNode){Y=Y.parentNode}if(Y==W){if(H(g[i],g[V],g[P],g[A])>0){g.collapse(X)}}else{g.collapse(X)}g.collapsed=n();g.commonAncestorContainer=c.findCommonAncestor(g[i],g[P])}function m(ad){var ac,Z=0,af=0,X,ab,Y,aa,W,ae;if(g[i]==g[P]){return f(ad)}for(ac=g[P],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==g[i]){return s(ac,ad)}++Z}for(ac=g[i],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==g[P]){return U(ac,ad)}++af}ab=af-Z;Y=g[i];while(ab>0){Y=Y.parentNode;ab--}aa=g[P];while(ab<0){aa=aa.parentNode;ab++}for(W=Y.parentNode,ae=aa.parentNode;W!=ae;W=W.parentNode,ae=ae.parentNode){Y=W;aa=ae}return p(Y,aa,ad)}function f(ac){var ae,af,W,Y,Z,ad,aa,X,ab;if(ac!=k){ae=x()}if(g[V]==g[A]){return ae}if(g[i].nodeType==3){af=g[i].nodeValue;W=af.substring(g[V],g[A]);if(ac!=F){Y=g[i];X=g[V];ab=g[A]-g[V];if(X===0&&ab>=Y.nodeValue.length-1){Y.parentNode.removeChild(Y)}else{Y.deleteData(X,ab)}g.collapse(E)}if(ac==k){return}if(W.length>0){ae.appendChild(e.createTextNode(W))}return ae}Y=O(g[i],g[V]);Z=g[A]-g[V];while(Y&&Z>0){ad=Y.nextSibling;aa=z(Y,ac);if(ae){ae.appendChild(aa)}--Z;Y=ad}if(ac!=F){g.collapse(E)}return ae}function s(ad,aa){var ac,ab,X,W,Z,Y;if(aa!=k){ac=x()}ab=j(ad,aa);if(ac){ac.appendChild(ab)}X=o(ad);W=X-g[V];if(W<=0){if(aa!=F){g.setEndBefore(ad);g.collapse(R)}return ac}ab=ad.previousSibling;while(W>0){Z=ab.previousSibling;Y=z(ab,aa);if(ac){ac.insertBefore(Y,ac.firstChild)}--W;ab=Z}if(aa!=F){g.setEndBefore(ad);g.collapse(R)}return ac}function U(ab,aa){var ad,X,ac,W,Z,Y;if(aa!=k){ad=x()}ac=Q(ab,aa);if(ad){ad.appendChild(ac)}X=o(ab);++X;W=g[A]-X;ac=ab.nextSibling;while(ac&&W>0){Z=ac.nextSibling;Y=z(ac,aa);if(ad){ad.appendChild(Y)}--W;ac=Z}if(aa!=F){g.setStartAfter(ab);g.collapse(E)}return ad}function p(aa,W,ad){var X,af,ab,ac,Y,ae,Z;if(ad!=k){af=x()}X=Q(aa,ad);if(af){af.appendChild(X)}ab=o(aa);ac=o(W);++ab;Y=ac-ab;ae=aa.nextSibling;while(Y>0){Z=ae.nextSibling;X=z(ae,ad);if(af){af.appendChild(X)}ae=Z;--Y}X=j(W,ad);if(af){af.appendChild(X)}if(ad!=F){g.setStartAfter(aa);g.collapse(E)}return af}function j(ac,ad){var Y=O(g[P],g[A]-1),ae,ab;var aa,W,X,Z=Y!=g[P];if(Y==ac){return M(Y,Z,R,ad)}ae=Y.parentNode;ab=M(ae,R,R,ad);while(ae){while(Y){aa=Y.previousSibling;W=M(Y,Z,R,ad);if(ad!=k){ab.insertBefore(W,ab.firstChild)}Z=E;Y=aa}if(ae==ac){return ab}Y=ae.previousSibling;ae=ae.parentNode;X=M(ae,R,R,ad);if(ad!=k){X.appendChild(ab)}ab=X}}function Q(ac,ad){var Z=O(g[i],g[V]),aa=Z!=g[i];var ae,ab,Y,W,X;if(Z==ac){return M(Z,aa,E,ad)}ae=Z.parentNode;ab=M(ae,R,E,ad);while(ae){while(Z){Y=Z.nextSibling;W=M(Z,aa,E,ad);if(ad!=k){ab.appendChild(W)}aa=E;Z=Y}if(ae==ac){return ab}Z=ae.nextSibling;ae=ae.parentNode;X=M(ae,R,E,ad);if(ad!=k){X.appendChild(ab)}ab=X}}function M(W,aa,ad,ae){var Z,Y,ab,X,ac;if(aa){return z(W,ae)}if(W.nodeType==3){Z=W.nodeValue;if(ad){X=g[V];Y=Z.substring(X);ab=Z.substring(0,X)}else{X=g[A];Y=Z.substring(0,X);ab=Z.substring(X)}if(ae!=F){W.nodeValue=ab}if(ae==k){return}ac=c.clone(W,R);ac.nodeValue=Y;return ac}if(ae==k){return}return c.clone(W,R)}function z(X,W){if(W!=k){return W==F?c.clone(X,E):X}X.parentNode.removeChild(X)}function S(){return c.create("body",null,d()).outerText}l(g,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:E,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:t,setStartBefore:h,setStartAfter:J,setEndBefore:K,setEndAfter:u,collapse:B,selectNode:y,selectNodeContents:G,compareBoundaryPoints:v,deleteContents:q,extractContents:I,cloneContents:d,insertNode:D,surroundContents:N,cloneRange:L,toStringIE:S});return g}a.Range=b;b.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function a(d){var b=this,h=d.dom,c=true,f=false;function e(i,j){var k,t=0,q,n,m,l,o,r,p=-1,s;k=i.duplicate();k.collapse(j);s=k.parentElement();if(s.ownerDocument!==d.dom.doc){return}while(s.contentEditable==="false"){s=s.parentNode}if(!s.hasChildNodes()){return{node:s,inside:1}}m=s.children;q=m.length-1;while(t<=q){r=Math.floor((t+q)/2);l=m[r];k.moveToElementText(l);p=k.compareEndPoints(j?"StartToStart":"EndToEnd",i);if(p>0){q=r-1}else{if(p<0){t=r+1}else{return{node:l}}}}if(p<0){if(!l){k.moveToElementText(s);k.collapse(true);l=s;n=true}else{k.collapse(false)}o=0;while(k.compareEndPoints(j?"StartToStart":"StartToEnd",i)!==0){if(k.move("character",1)===0||s!=k.parentElement()){break}o++}}else{k.collapse(true);o=0;while(k.compareEndPoints(j?"StartToStart":"StartToEnd",i)!==0){if(k.move("character",-1)===0||s!=k.parentElement()){break}o++}}return{node:l,position:p,offset:o,inside:n}}function g(){var i=d.getRng(),r=h.createRng(),l,k,p,q,m,j;l=i.item?i.item(0):i.parentElement();if(l.ownerDocument!=h.doc){return r}k=d.isCollapsed();if(i.item){r.setStart(l.parentNode,h.nodeIndex(l));r.setEnd(r.startContainer,r.startOffset+1);return r}function o(A){var u=e(i,A),s,y,z=0,x,v,t;s=u.node;y=u.offset;if(u.inside&&!s.hasChildNodes()){r[A?"setStart":"setEnd"](s,0);return}if(y===v){r[A?"setStartBefore":"setEndAfter"](s);return}if(u.position<0){x=u.inside?s.firstChild:s.nextSibling;if(!x){r[A?"setStartAfter":"setEndAfter"](s);return}if(!y){if(x.nodeType==3){r[A?"setStart":"setEnd"](x,0)}else{r[A?"setStartBefore":"setEndBefore"](x)}return}while(x){t=x.nodeValue;z+=t.length;if(z>=y){s=x;z-=y;z=t.length-z;break}x=x.nextSibling}}else{x=s.previousSibling;if(!x){return r[A?"setStartBefore":"setEndBefore"](s)}if(!y){if(s.nodeType==3){r[A?"setStart":"setEnd"](x,s.nodeValue.length)}else{r[A?"setStartAfter":"setEndAfter"](x)}return}while(x){if(x.nodeType==3){z+=x.nodeValue.length;if(z>=y){s=x;z-=y;break}}x=x.previousSibling}}r[A?"setStart":"setEnd"](s,z)}try{o(true);if(!k){o()}}catch(n){if(n.number==-2147024809){m=b.getBookmark(2);p=i.duplicate();p.collapse(true);l=p.parentElement();if(!k){p=i.duplicate();p.collapse(false);q=p.parentElement();q.innerHTML=q.innerHTML}l.innerHTML=l.innerHTML;b.moveToBookmark(m);i=d.getRng();o(true);if(!k){o()}}else{throw n}}return r}this.getBookmark=function(l){var i=d.getRng(),k={};function m(s){var r,n,q,p,o=[];r=s.parentNode;n=h.getRoot().parentNode;while(r!=n&&r.nodeType!==9){q=r.children;p=q.length;while(p--){if(s===q[p]){o.push(p);break}}s=r;r=r.parentNode}return o}function j(o){var n;n=e(i,o);if(n){return{position:n.position,offset:n.offset,indexes:m(n.node),inside:n.inside}}}if(l===2){if(!i.item){k.start=j(true);if(!d.isCollapsed()){k.end=j()}}else{k.start={ctrl:true,indexes:m(i.item(0))}}}return k};this.moveToBookmark=function(k){var j,i=h.doc.body;function m(o){var r,q,n,p;r=h.getRoot();for(q=o.length-1;q>=0;q--){p=r.children;n=o[q];if(n<=p.length-1){r=p[n]}}return r}function l(s){var n=k[s?"start":"end"],q,p,o,r;if(n){q=n.position>0;p=i.createTextRange();p.moveToElementText(m(n.indexes));r=n.offset;if(r!==o){p.collapse(n.inside||q);p.moveStart("character",q?-r:r)}else{p.collapse(s)}j.setEndPoint(s?"StartToStart":"EndToStart",p);if(s){j.collapse(true)}}}if(k.start){if(k.start.ctrl){j=i.createControlRange();j.addElement(m(k.start.indexes));j.select()}else{j=i.createTextRange();l(true);l();j.select()}}};this.addRange=function(i){var n,l,k,p,v,q,t,s=d.dom.doc,m=s.body,r,u;function j(C){var y,B,x,A,z;x=h.create("a");y=C?k:v;B=C?p:q;A=n.duplicate();if(y==s||y==s.documentElement){y=m;B=0}if(y.nodeType==3){y.parentNode.insertBefore(x,y);A.moveToElementText(x);A.moveStart("character",B);h.remove(x);n.setEndPoint(C?"StartToStart":"EndToEnd",A)}else{z=y.childNodes;if(z.length){if(B>=z.length){h.insertAfter(x,z[z.length-1])}else{y.insertBefore(x,z[B])}A.moveToElementText(x)}else{if(y.canHaveHTML){y.innerHTML="<span>&#xFEFF;</span>";x=y.firstChild;A.moveToElementText(x);A.collapse(f)}}n.setEndPoint(C?"StartToStart":"EndToEnd",A);h.remove(x)}}k=i.startContainer;p=i.startOffset;v=i.endContainer;q=i.endOffset;n=m.createTextRange();if(k==v&&k.nodeType==1){if(p==q&&!k.hasChildNodes()){if(k.canHaveHTML){t=k.previousSibling;if(t&&!t.hasChildNodes()&&h.isBlock(t)){t.innerHTML="&#xFEFF;"}else{t=null}k.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>";n.moveToElementText(k.lastChild);n.select();h.doc.selection.clear();k.innerHTML="";if(t){t.innerHTML=""}return}else{p=h.nodeIndex(k);k=k.parentNode}}if(p==q-1){try{u=k.childNodes[p];l=m.createControlRange();l.addElement(u);l.select();r=d.getRng();if(r.item&&u===r.item(0)){return}}catch(o){}}}j(true);j();n.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(){var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache",o=0,r=Object.prototype.toString,h=false,g=true,q=/\\/g,u=/\r\n/g,x=/\W/;[0,0].sort(function(){g=false;return 0});var d=function(C,e,F,G){F=F||[];e=e||document;var I=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!C||typeof C!=="string"){return F}var z,K,N,y,J,M,L,E,B=true,A=d.isXML(e),D=[],H=C;do{n.exec("");z=n.exec(H);if(z){H=z[3];D.push(z[1]);if(z[2]){y=z[3];break}}}while(z);if(D.length>1&&j.exec(C)){if(D.length===2&&k.relative[D[0]]){K=s(D[0]+D[1],e,G)}else{K=k.relative[D[0]]?[e]:d(D.shift(),e);while(D.length){C=D.shift();if(k.relative[C]){C+=D.shift()}K=s(C,K,G)}}}else{if(!G&&D.length>1&&e.nodeType===9&&!A&&k.match.ID.test(D[0])&&!k.match.ID.test(D[D.length-1])){J=d.find(D.shift(),e,A);e=J.expr?d.filter(J.expr,J.set)[0]:J.set[0]}if(e){J=G?{expr:D.pop(),set:l(G)}:d.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&e.parentNode?e.parentNode:e,A);K=J.expr?d.filter(J.expr,J.set):J.set;if(D.length>0){N=l(K)}else{B=false}while(D.length){M=D.pop();L=M;if(!k.relative[M]){M=""}else{L=D.pop()}if(L==null){L=e}k.relative[M](N,L,A)}}else{N=D=[]}}if(!N){N=K}if(!N){d.error(M||C)}if(r.call(N)==="[object Array]"){if(!B){F.push.apply(F,N)}else{if(e&&e.nodeType===1){for(E=0;N[E]!=null;E++){if(N[E]&&(N[E]===true||N[E].nodeType===1&&d.contains(e,N[E]))){F.push(K[E])}}}else{for(E=0;N[E]!=null;E++){if(N[E]&&N[E].nodeType===1){F.push(K[E])}}}}}else{l(N,F)}if(y){d(y,I,F,G);d.uniqueSort(F)}return F};d.uniqueSort=function(y){if(p){h=g;y.sort(p);if(h){for(var e=1;e<y.length;e++){if(y[e]===y[e-1]){y.splice(e--,1)}}}}return y};d.matches=function(e,y){return d(e,null,null,y)};d.matchesSelector=function(e,y){return d(y,null,null,[e]).length>0};d.find=function(E,e,F){var D,z,B,A,C,y;if(!E){return[]}for(z=0,B=k.order.length;z<B;z++){C=k.order[z];if((A=k.leftMatch[C].exec(E))){y=A[1];A.splice(1,1);if(y.substr(y.length-1)!=="\\"){A[1]=(A[1]||"").replace(q,"");D=k.find[C](A,e,F);if(D!=null){E=E.replace(k.match[C],"");break}}}}if(!D){D=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:D,expr:E}};d.filter=function(I,H,L,B){var D,e,G,N,K,y,A,C,J,z=I,M=[],F=H,E=H&&H[0]&&d.isXML(H[0]);while(I&&H.length){for(G in k.filter){if((D=k.leftMatch[G].exec(I))!=null&&D[2]){y=k.filter[G];A=D[1];e=false;D.splice(1,1);if(A.substr(A.length-1)==="\\"){continue}if(F===M){M=[]}if(k.preFilter[G]){D=k.preFilter[G](D,F,L,M,B,E);if(!D){e=N=true}else{if(D===true){continue}}}if(D){for(C=0;(K=F[C])!=null;C++){if(K){N=y(K,D,C,F);J=B^N;if(L&&N!=null){if(J){e=true}else{F[C]=false}}else{if(J){M.push(K);e=true}}}}}if(N!==undefined){if(!L){F=M}I=I.replace(k.match[G],"");if(!e){return[]}break}}}if(I===z){if(e==null){d.error(I)}else{break}}z=I}return F};d.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var b=d.getText=function(B){var z,A,e=B.nodeType,y="";if(e){if(e===1||e===9||e===11){if(typeof B.textContent==="string"){return B.textContent}else{if(typeof B.innerText==="string"){return B.innerText.replace(u,"")}else{for(B=B.firstChild;B;B=B.nextSibling){y+=b(B)}}}}else{if(e===3||e===4){return B.nodeValue}}}else{for(z=0;(A=B[z]);z++){if(A.nodeType!==8){y+=b(A)}}}return y};var k=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(D,y){var A=typeof y==="string",C=A&&!x.test(y),E=A&&!C;if(C){y=y.toLowerCase()}for(var z=0,e=D.length,B;z<e;z++){if((B=D[z])){while((B=B.previousSibling)&&B.nodeType!==1){}D[z]=E||B&&B.nodeName.toLowerCase()===y?B||false:B===y}}if(E){d.filter(y,D,true)}},">":function(D,y){var C,B=typeof y==="string",z=0,e=D.length;if(B&&!x.test(y)){y=y.toLowerCase();for(;z<e;z++){C=D[z];if(C){var A=C.parentNode;D[z]=A.nodeName.toLowerCase()===y?A:false}}}else{for(;z<e;z++){C=D[z];if(C){D[z]=B?C.parentNode:C.parentNode===y}}if(B){d.filter(y,D,true)}}},"":function(A,y,C){var B,z=o++,e=t;if(typeof y==="string"&&!x.test(y)){y=y.toLowerCase();B=y;e=a}e("parentNode",y,z,A,B,C)},"~":function(A,y,C){var B,z=o++,e=t;if(typeof y==="string"&&!x.test(y)){y=y.toLowerCase();B=y;e=a}e("previousSibling",y,z,A,B,C)}},find:{ID:function(y,z,A){if(typeof z.getElementById!=="undefined"&&!A){var e=z.getElementById(y[1]);return e&&e.parentNode?[e]:[]}},NAME:function(z,C){if(typeof C.getElementsByName!=="undefined"){var y=[],B=C.getElementsByName(z[1]);for(var A=0,e=B.length;A<e;A++){if(B[A].getAttribute("name")===z[1]){y.push(B[A])}}return y.length===0?null:y}},TAG:function(e,y){if(typeof y.getElementsByTagName!=="undefined"){return y.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(A,y,z,e,D,E){A=" "+A[1].replace(q,"")+" ";if(E){return A}for(var B=0,C;(C=y[B])!=null;B++){if(C){if(D^(C.className&&(" "+C.className+" ").replace(/[\t\n\r]/g," ").indexOf(A)>=0)){if(!z){e.push(C)}}else{if(z){y[B]=false}}}}return false},ID:function(e){return e[1].replace(q,"")},TAG:function(y,e){return y[1].replace(q,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){d.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var y=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(y[1]+(y[2]||1))-0;e[3]=y[3]-0}else{if(e[2]){d.error(e[0])}}e[0]=o++;return e},ATTR:function(B,y,z,e,C,D){var A=B[1]=B[1].replace(q,"");if(!D&&k.attrMap[A]){B[1]=k.attrMap[A]}B[4]=(B[4]||B[5]||"").replace(q,"");if(B[2]==="~="){B[4]=" "+B[4]+" "}return B},PSEUDO:function(B,y,z,e,C){if(B[1]==="not"){if((n.exec(B[3])||"").length>1||/^\w/.test(B[3])){B[3]=d(B[3],null,null,y)}else{var A=d.filter(B[3],y,z,true^C);if(!z){e.push.apply(e,A)}return false}}else{if(k.match.POS.test(B[0])||k.match.CHILD.test(B[0])){return true}}return B},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(z,y,e){return!!d(e[3],z).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(z){var e=z.getAttribute("type"),y=z.type;return z.nodeName.toLowerCase()==="input"&&"text"===y&&(e===y||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(y){var e=y.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===y.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(y){var e=y.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===y.type},button:function(y){var e=y.nodeName.toLowerCase();return e==="input"&&"button"===y.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(y,e){return e===0},last:function(z,y,e,A){return y===A.length-1},even:function(y,e){return e%2===0},odd:function(y,e){return e%2===1},lt:function(z,y,e){return y<e[3]-0},gt:function(z,y,e){return y>e[3]-0},nth:function(z,y,e){return e[3]-0===y},eq:function(z,y,e){return e[3]-0===y}},filter:{PSEUDO:function(z,E,D,F){var e=E[1],y=k.filters[e];if(y){return y(z,D,E,F)}else{if(e==="contains"){return(z.textContent||z.innerText||b([z])||"").indexOf(E[3])>=0}else{if(e==="not"){var A=E[3];for(var C=0,B=A.length;C<B;C++){if(A[C]===z){return false}}return true}else{d.error(e)}}}},CHILD:function(z,B){var A,H,D,G,e,C,F,E=B[1],y=z;switch(E){case"only":case"first":while((y=y.previousSibling)){if(y.nodeType===1){return false}}if(E==="first"){return true}y=z;case"last":while((y=y.nextSibling)){if(y.nodeType===1){return false}}return true;case"nth":A=B[2];H=B[3];if(A===1&&H===0){return true}D=B[0];G=z.parentNode;if(G&&(G[i]!==D||!z.nodeIndex)){C=0;for(y=G.firstChild;y;y=y.nextSibling){if(y.nodeType===1){y.nodeIndex=++C}}G[i]=D}F=z.nodeIndex-H;if(A===0){return F===0}else{return(F%A===0&&F/A>=0)}}},ID:function(y,e){return y.nodeType===1&&y.getAttribute("id")===e},TAG:function(y,e){return(e==="*"&&y.nodeType===1)||!!y.nodeName&&y.nodeName.toLowerCase()===e},CLASS:function(y,e){return(" "+(y.className||y.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(C,A){var z=A[1],e=d.attr?d.attr(C,z):k.attrHandle[z]?k.attrHandle[z](C):C[z]!=null?C[z]:C.getAttribute(z),D=e+"",B=A[2],y=A[4];return e==null?B==="!=":!B&&d.attr?e!=null:B==="="?D===y:B==="*="?D.indexOf(y)>=0:B==="~="?(" "+D+" ").indexOf(y)>=0:!y?D&&e!==false:B==="!="?D!==y:B==="^="?D.indexOf(y)===0:B==="$="?D.substr(D.length-y.length)===y:B==="|="?D===y||D.substr(0,y.length+1)===y+"-":false},POS:function(B,y,z,C){var e=y[2],A=k.setFilters[e];if(A){return A(B,z,y,C)}}}};var j=k.match.POS,c=function(y,e){return"\\"+(e-0+1)};for(var f in k.match){k.match[f]=new RegExp(k.match[f].source+(/(?![^\[]*\])(?![^\(]*\))/.source));k.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+k.match[f].source.replace(/\\(\d+)/g,c))}k.match.globalPOS=j;var l=function(y,e){y=Array.prototype.slice.call(y,0);if(e){e.push.apply(e,y);return e}return y};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(v){l=function(B,A){var z=0,y=A||[];if(r.call(B)==="[object Array]"){Array.prototype.push.apply(y,B)}else{if(typeof B.length==="number"){for(var e=B.length;z<e;z++){y.push(B[z])}}else{for(;B[z];z++){y.push(B[z])}}}return y}}var p,m;if(document.documentElement.compareDocumentPosition){p=function(y,e){if(y===e){h=true;return 0}if(!y.compareDocumentPosition||!e.compareDocumentPosition){return y.compareDocumentPosition?-1:1}return y.compareDocumentPosition(e)&4?-1:1}}else{p=function(F,E){if(F===E){h=true;return 0}else{if(F.sourceIndex&&E.sourceIndex){return F.sourceIndex-E.sourceIndex}}var C,y,z=[],e=[],B=F.parentNode,D=E.parentNode,G=B;if(B===D){return m(F,E)}else{if(!B){return-1}else{if(!D){return 1}}}while(G){z.unshift(G);G=G.parentNode}G=D;while(G){e.unshift(G);G=G.parentNode}C=z.length;y=e.length;for(var A=0;A<C&&A<y;A++){if(z[A]!==e[A]){return m(z[A],e[A])}}return A===C?m(F,e[A],-1):m(z[A],E,1)};m=function(y,e,z){if(y===e){return z}var A=y.nextSibling;while(A){if(A===e){return-1}A=A.nextSibling}return 1}}(function(){var y=document.createElement("div"),z="script"+(new Date()).getTime(),e=document.documentElement;y.innerHTML="<a name='"+z+"'/>";e.insertBefore(y,e.firstChild);if(document.getElementById(z)){k.find.ID=function(B,C,D){if(typeof C.getElementById!=="undefined"&&!D){var A=C.getElementById(B[1]);return A?A.id===B[1]||typeof A.getAttributeNode!=="undefined"&&A.getAttributeNode("id").nodeValue===B[1]?[A]:undefined:[]}};k.filter.ID=function(C,A){var B=typeof C.getAttributeNode!=="undefined"&&C.getAttributeNode("id");return C.nodeType===1&&B&&B.nodeValue===A}}e.removeChild(y);e=y=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){k.find.TAG=function(y,C){var B=C.getElementsByTagName(y[1]);if(y[1]==="*"){var A=[];for(var z=0;B[z];z++){if(B[z].nodeType===1){A.push(B[z])}}B=A}return B}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){k.attrHandle.href=function(y){return y.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=d,A=document.createElement("div"),z="__sizzle__";A.innerHTML="<p class='TEST'></p>";if(A.querySelectorAll&&A.querySelectorAll(".TEST").length===0){return}d=function(L,C,G,K){C=C||document;if(!K&&!d.isXML(C)){var J=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(L);if(J&&(C.nodeType===1||C.nodeType===9)){if(J[1]){return l(C.getElementsByTagName(L),G)}else{if(J[2]&&k.find.CLASS&&C.getElementsByClassName){return l(C.getElementsByClassName(J[2]),G)}}}if(C.nodeType===9){if(L==="body"&&C.body){return l([C.body],G)}else{if(J&&J[3]){var F=C.getElementById(J[3]);if(F&&F.parentNode){if(F.id===J[3]){return l([F],G)}}else{return l([],G)}}}try{return l(C.querySelectorAll(L),G)}catch(H){}}else{if(C.nodeType===1&&C.nodeName.toLowerCase()!=="object"){var D=C,E=C.getAttribute("id"),B=E||z,N=C.parentNode,M=/^\s*[+~]/.test(L);if(!E){C.setAttribute("id",B)}else{B=B.replace(/'/g,"\\$&")}if(M&&N){C=C.parentNode}try{if(!M||N){return l(C.querySelectorAll("[id='"+B+"'] "+L),G)}}catch(I){}finally{if(!E){D.removeAttribute("id")}}}}}return e(L,C,G,K)};for(var y in e){d[y]=e[y]}A=null})()}(function(){var e=document.documentElement,z=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(z){var B=!z.call(document.createElement("div"),"div"),y=false;try{z.call(document.documentElement,"[test!='']:sizzle")}catch(A){y=true}d.matchesSelector=function(D,F){F=F.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!d.isXML(D)){try{if(y||!k.match.PSEUDO.test(F)&&!/!=/.test(F)){var C=z.call(D,F);if(C||!B||D.document&&D.document.nodeType!==11){return C}}}catch(E){}}return d(F,null,null,[D]).length>0}}})();(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}k.order.splice(1,0,"CLASS");k.find.CLASS=function(y,z,A){if(typeof z.getElementsByClassName!=="undefined"&&!A){return z.getElementsByClassName(y[1])}};e=null})();function a(y,D,C,G,E,F){for(var A=0,z=G.length;A<z;A++){var e=G[A];if(e){var B=false;e=e[y];while(e){if(e[i]===C){B=G[e.sizset];break}if(e.nodeType===1&&!F){e[i]=C;e.sizset=A}if(e.nodeName.toLowerCase()===D){B=e;break}e=e[y]}G[A]=B}}}function t(y,D,C,G,E,F){for(var A=0,z=G.length;A<z;A++){var e=G[A];if(e){var B=false;e=e[y];while(e){if(e[i]===C){B=G[e.sizset];break}if(e.nodeType===1){if(!F){e[i]=C;e.sizset=A}if(typeof D!=="string"){if(e===D){B=true;break}}else{if(d.filter(D,[e]).length>0){B=e;break}}}e=e[y]}G[A]=B}}}if(document.documentElement.contains){d.contains=function(y,e){return y!==e&&(y.contains?y.contains(e):true)}}else{if(document.documentElement.compareDocumentPosition){d.contains=function(y,e){return!!(y.compareDocumentPosition(e)&16)}}else{d.contains=function(){return false}}}d.isXML=function(e){var y=(e?e.ownerDocument||e:0).documentElement;return y?y.nodeName!=="HTML":false};var s=function(z,e,D){var C,E=[],B="",F=e.nodeType?[e]:e;while((C=k.match.PSEUDO.exec(z))){B+=C[0];z=z.replace(k.match.PSEUDO,"")}z=k.relative[z]?z+"*":z;for(var A=0,y=F.length;A<y;A++){d(z,F[A],E,D)}return d.filter(B,E)};window.tinymce.dom.Sizzle=d})();(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(d){function f(g){return g.replace(/[\n\r]+/g,"")}var c=d.is,b=d.isIE,e=d.each,a=d.dom.TreeWalker;d.create("tinymce.dom.Selection",{Selection:function(k,j,i,h){var g=this;g.dom=k;g.win=j;g.serializer=i;g.editor=h;e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(l){g[l]=new d.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new d.dom.TridentSelection(g)}if(d.isIE&&!d.isIE11&&k.boxModel){this._fixIESelection()}d.addUnload(g.destroy,g)},setCursorLocation:function(i,j){var g=this;var h=g.dom.createRng();h.setStart(i,j);h.setEnd(i,j);g.setRng(h);g.collapse(false)},getContent:function(h){var g=this,i=g.getRng(),m=g.dom.create("body"),k=g.getSel(),j,l,o;h=h||{};j=l="";h.get=true;h.format=h.format||"html";h.forced_root_block="";g.onBeforeGetContent.dispatch(g,h);if(h.format=="text"){return g.isCollapsed()?"":(i.text||(k.toString?k.toString():""))}if(i.cloneContents){o=i.cloneContents();if(o){m.appendChild(o)}}else{if(c(i.item)||c(i.htmlText)){m.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText);m.removeChild(m.firstChild)}else{m.innerHTML=i.toString()}}if(/^\s/.test(m.innerHTML)){j=" "}if(/\s+$/.test(m.innerHTML)){l=" "}h.getInner=true;h.content=g.isCollapsed()?"":j+g.serializer.serialize(m,h)+l;g.onGetContent.dispatch(g,h);return h.content},setContent:function(h,j){var o=this,g=o.getRng(),k,l=o.win.document,n,m;j=j||{format:"html"};j.set=true;h=j.content=h;if(!j.no_events){o.onBeforeSetContent.dispatch(o,j)}h=j.content;if(g.insertNode){h+='<span id="__caret">_</span>';if(g.startContainer==l&&g.endContainer==l){l.body.innerHTML=h}else{g.deleteContents();if(l.body.childNodes.length===0){l.body.innerHTML=h}else{if(g.createContextualFragment){g.insertNode(g.createContextualFragment(h))}else{n=l.createDocumentFragment();m=l.createElement("div");n.appendChild(m);m.outerHTML=h;g.insertNode(n)}}}k=o.dom.get("__caret");g=l.createRange();g.setStartBefore(k);g.setEndBefore(k);o.setRng(g);o.dom.remove("__caret");try{o.setRng(g)}catch(i){}}else{if(g.item){l.execCommand("Delete",false,null);g=o.getRng()}if(/^\s+/.test(h)){g.pasteHTML('<span id="__mce_tmp">_</span>'+h);o.dom.remove("__mce_tmp")}else{g.pasteHTML(h)}}if(!j.no_events){o.onSetContent.dispatch(o,j)}},getStart:function(){var i=this,h=i.getRng(),j,g,l,k;if(h.duplicate||h.item){if(h.item){return h.item(0)}l=h.duplicate();l.collapse(1);j=l.parentElement();if(j.ownerDocument!==i.dom.doc){j=i.dom.getRoot()}g=k=h.parentElement();while(k=k.parentNode){if(k==j){j=g;break}}return j}else{j=h.startContainer;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[Math.min(j.childNodes.length-1,h.startOffset)]}if(j&&j.nodeType==3){return j.parentNode}return j}},getEnd:function(){var h=this,g=h.getRng(),j,i;if(g.duplicate||g.item){if(g.item){return g.item(0)}g=g.duplicate();g.collapse(0);j=g.parentElement();if(j.ownerDocument!==h.dom.doc){j=h.dom.getRoot()}if(j&&j.nodeName=="BODY"){return j.lastChild||j}return j}else{j=g.endContainer;i=g.endOffset;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[i>0?i-1:i]}if(j&&j.nodeType==3){return j.parentNode}return j}},getBookmark:function(s,v){var y=this,n=y.dom,h,k,j,o,i,p,q,m="\uFEFF",x;function g(z,A){var t=0;e(n.select(z),function(C,B){if(C==A){t=B}});return t}function u(t){function z(E){var A,D,C,B=E?"start":"end";A=t[B+"Container"];D=t[B+"Offset"];if(A.nodeType==1&&A.nodeName=="TR"){C=A.childNodes;A=C[Math.min(E?D:D-1,C.length-1)];if(A){D=E?0:A.childNodes.length;t["set"+(E?"Start":"End")](A,D)}}}z(true);z();return t}function l(){var z=y.getRng(true),t=n.getRoot(),A={};function B(E,J){var D=E[J?"startContainer":"endContainer"],I=E[J?"startOffset":"endOffset"],C=[],F,H,G=0;if(D.nodeType==3){if(v){for(F=D.previousSibling;F&&F.nodeType==3;F=F.previousSibling){I+=F.nodeValue.length}}C.push(I)}else{H=D.childNodes;if(I>=H.length&&H.length){G=1;I=Math.max(0,H.length-1)}C.push(y.dom.nodeIndex(H[I],v)+G)}for(;D&&D!=t;D=D.parentNode){C.push(y.dom.nodeIndex(D,v))}return C}A.start=B(z,true);if(!y.isCollapsed()){A.end=B(z)}return A}if(s==2){if(y.tridentSel){return y.tridentSel.getBookmark(s)}return l()}if(s){h=y.getRng();if(h.setStart){h={startContainer:h.startContainer,startOffset:h.startOffset,endContainer:h.endContainer,endOffset:h.endOffset}}return{rng:h}}h=y.getRng();j=n.uniqueId();o=tinyMCE.activeEditor.selection.isCollapsed();x="overflow:hidden;line-height:0px";if(h.duplicate||h.item){if(!h.item){k=h.duplicate();try{h.collapse();h.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="'+x+'">'+m+"</span>");if(!o){k.collapse(false);h.moveToElementText(k.parentElement());if(h.compareEndPoints("StartToEnd",k)===0){k.move("character",-1)}k.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="'+x+'">'+m+"</span>")}}catch(r){return null}}else{p=h.item(0);i=p.nodeName;return{name:i,index:g(i,p)}}}else{p=y.getNode();i=p.nodeName;if(i=="IMG"){return{name:i,index:g(i,p)}}k=u(h.cloneRange());if(!o){k.collapse(false);k.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:x},m))}h=u(h);h.collapse(true);h.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:x},m))}y.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(q){var v=this,n=v.dom,l,j,g,i,u,k,x,r,s;function h(C){var t=q[C?"start":"end"],z,A,B,y;if(t){B=t[0];for(A=u,z=t.length-1;z>=1;z--){y=A.childNodes;if(t[z]>y.length-1){return}A=y[t[z]]}if(A.nodeType===3){B=Math.min(t[0],A.nodeValue.length)}if(A.nodeType===1){B=Math.min(t[0],A.childNodes.length)}if(C){g.setStart(A,B)}else{g.setEnd(A,B)}}return true}function m(D){var y=n.get(q.id+"_"+D),C,t,A,B,z=q.keep;if(y){C=y.parentNode;if(D=="start"){if(!z){t=n.nodeIndex(y)}else{C=y.firstChild;t=1}k=x=C;r=s=t}else{if(!z){t=n.nodeIndex(y)}else{C=y.firstChild;t=1}x=C;s=t}if(!z){B=y.previousSibling;A=y.nextSibling;e(d.grep(y.childNodes),function(E){if(E.nodeType==3){E.nodeValue=E.nodeValue.replace(/\uFEFF/g,"")}});while(y=n.get(q.id+"_"+D)){n.remove(y,1)}if(B&&A&&B.nodeType==A.nodeType&&B.nodeType==3&&!d.isOpera){t=B.nodeValue.length;B.appendData(A.nodeValue);n.remove(A);if(D=="start"){k=x=B;r=s=t}else{x=B;s=t}}}}}function o(t){if(n.isBlock(t)&&!t.innerHTML&&!b){t.innerHTML='<br data-mce-bogus="1" />'}return t}if(q){if(q.start){g=n.createRng();u=n.getRoot();if(v.tridentSel){return v.tridentSel.moveToBookmark(q)}if(h(true)&&h()){v.setRng(g)}}else{if(q.id){m("start");m("end");if(k){g=n.createRng();g.setStart(o(k),r);g.setEnd(o(x),s);v.setRng(g)}}else{if(q.name){v.select(n.select(q.name)[q.index])}else{if(q.rng){g=q.rng;if(g.startContainer){i=v.dom.createRng();try{i.setStart(g.startContainer,g.startOffset);i.setEnd(g.endContainer,g.endOffset)}catch(p){}g=i}v.setRng(g)}}}}}},select:function(l,k){var j=this,m=j.dom,h=m.createRng(),g;function i(n,p){var o=new a(n,n);do{if(n.nodeType==3&&d.trim(n.nodeValue).length!==0){if(p){h.setStart(n,0)}else{h.setEnd(n,n.nodeValue.length)}return}if(n.nodeName=="BR"){if(p){h.setStartBefore(n)}else{h.setEndBefore(n)}return}}while(n=(p?o.next():o.prev()))}if(l){g=m.nodeIndex(l);h.setStart(l.parentNode,g);h.setEnd(l.parentNode,g+1);if(k){i(l,1);i(l)}j.setRng(h)}return l},isCollapsed:function(){var g=this,i=g.getRng(),h=g.getSel();if(!i||i.item){return false}if(i.compareEndPoints){return i.compareEndPoints("StartToEnd",i)===0}return!h||i.collapsed},collapse:function(g){var i=this,h=i.getRng(),j;if(h.item){j=h.item(0);h=i.win.document.body.createTextRange();h.moveToElementText(j)}h.collapse(!!g);i.setRng(h)},getSel:function(){var h=this,g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(m){var h=this,j,g,l,k=h.win.document;if(h.fakeRng){return h.fakeRng}if(m&&h.tridentSel){return h.tridentSel.getRangeAt(0)}try{if(j=h.getSel()){g=j.rangeCount>0?j.getRangeAt(0):(j.createRange?j.createRange():k.createRange())}}catch(i){}if(d.isIE&&!d.isIE11&&g&&g.setStart&&k.selection.createRange().item){l=k.selection.createRange().item(0);g=k.createRange();g.setStartBefore(l);g.setEndAfter(l)}if(!g){g=k.createRange?k.createRange():k.body.createTextRange()}if(g.setStart&&g.startContainer.nodeType===9&&g.collapsed){l=h.dom.getRoot();g.setStart(l,0);g.setEnd(l,0)}if(h.selectedRange&&h.explicitRange){if(g.compareBoundaryPoints(g.START_TO_START,h.selectedRange)===0&&g.compareBoundaryPoints(g.END_TO_END,h.selectedRange)===0){g=h.explicitRange}else{h.selectedRange=null;h.explicitRange=null}}return g},setRng:function(k,g){var j,i=this;if(!k){return}if(k.select){try{k.select()}catch(h){}return}if(!i.tridentSel){j=i.getSel();if(j){i.explicitRange=k;try{j.removeAllRanges();j.addRange(k)}catch(h){}if(g===false&&j.extend){j.collapse(k.endContainer,k.endOffset);j.extend(k.startContainer,k.startOffset)}i.selectedRange=j.rangeCount>0?j.getRangeAt(0):null}}else{if(k.cloneRange){try{i.tridentSel.addRange(k);return}catch(h){}}}},setNode:function(h){var g=this;g.setContent(g.dom.getOuterHTML(h));return h},getNode:function(){var i=this,h=i.getRng(),j=i.getSel(),m,l=h.startContainer,g=h.endContainer;function k(q,o){var p=q;while(q&&q.nodeType===3&&q.length===0){q=o?q.nextSibling:q.previousSibling}return q||p}if(!h){return i.dom.getRoot()}if(h.setStart){m=h.commonAncestorContainer;if(!h.collapsed){if(h.startContainer==h.endContainer){if(h.endOffset-h.startOffset<2){if(h.startContainer.hasChildNodes()){m=h.startContainer.childNodes[h.startOffset]}}}if(l.nodeType===3&&g.nodeType===3){if(l.length===h.startOffset){l=k(l.nextSibling,true)}else{l=l.parentNode}if(h.endOffset===0){g=k(g.previousSibling,false)}else{g=g.parentNode}if(l&&l===g){return l}}}if(m&&m.nodeType==3){return m.parentNode}return m}return h.item?h.item(0):h.parentElement()},getSelectedBlocks:function(p,h){var o=this,k=o.dom,m,l,i,j=[];m=k.getParent(p||o.getStart(),k.isBlock);l=k.getParent(h||o.getEnd(),k.isBlock);if(m){j.push(m)}if(m&&l&&m!=l){i=m;var g=new a(m,k.getRoot());while((i=g.next())&&i!=l){if(k.isBlock(i)){j.push(i)}}}if(l&&m!=l){j.push(l)}return j},isForward:function(){var i=this.dom,g=this.getSel(),j,h;if(!g||g.anchorNode==null||g.focusNode==null){return true}j=i.createRng();j.setStart(g.anchorNode,g.anchorOffset);j.collapse(true);h=i.createRng();h.setStart(g.focusNode,g.focusOffset);h.collapse(true);return j.compareBoundaryPoints(j.START_TO_START,h)<=0},normalize:function(){var h=this,g,m,l,j,i;function k(p){var o,r,n,s=h.dom,u=s.getRoot(),q,t,v;function y(z,A){var B=new a(z,s.getParent(z.parentNode,s.isBlock)||u);while(z=B[A?"prev":"next"]()){if(z.nodeName==="BR"){return true}}}function x(B,z){var C,A;z=z||o;C=new a(z,s.getParent(z.parentNode,s.isBlock)||u);while(q=C[B?"prev":"next"]()){if(q.nodeType===3&&q.nodeValue.length>0){o=q;r=B?q.nodeValue.length:0;m=true;return}if(s.isBlock(q)||t[q.nodeName.toLowerCase()]){return}A=q}if(l&&A){o=A;m=true;r=0}}o=g[(p?"start":"end")+"Container"];r=g[(p?"start":"end")+"Offset"];t=s.schema.getNonEmptyElements();if(o.nodeType===9){o=s.getRoot();r=0}if(o===u){if(p){q=o.childNodes[r>0?r-1:0];if(q){v=q.nodeName.toLowerCase();if(t[q.nodeName]||q.nodeName=="TABLE"){return}}}if(o.hasChildNodes()){o=o.childNodes[Math.min(!p&&r>0?r-1:r,o.childNodes.length-1)];r=0;if(o.hasChildNodes()&&!/TABLE/.test(o.nodeName)){q=o;n=new a(o,u);do{if(q.nodeType===3&&q.nodeValue.length>0){r=p?0:q.nodeValue.length;o=q;m=true;break}if(t[q.nodeName.toLowerCase()]){r=s.nodeIndex(q);o=q.parentNode;if(q.nodeName=="IMG"&&!p){r++}m=true;break}}while(q=(p?n.next():n.prev()))}}}if(l){if(o.nodeType===3&&r===0){x(true)}if(o.nodeType===1){q=o.childNodes[r];if(q&&q.nodeName==="BR"&&!y(q)&&!y(q,true)){x(true,o.childNodes[r])}}}if(p&&!l&&o.nodeType===3&&r===o.nodeValue.length){x(false)}if(m){g["set"+(p?"Start":"End")](o,r)}}if(d.isIE){return}g=h.getRng();l=g.collapsed;k(true);if(!l){k()}if(m){if(l){g.collapse(true)}h.setRng(g,h.isForward())}},selectorChanged:function(g,j){var h=this,i;if(!h.selectorChangedData){h.selectorChangedData={};i={};h.editor.onNodeChange.addToTop(function(l,k,o){var p=h.dom,m=p.getParents(o,null,p.getRoot()),n={};e(h.selectorChangedData,function(r,q){e(m,function(s){if(p.is(s,q)){if(!i[q]){e(r,function(t){t(true,{node:s,selector:q,parents:m})});i[q]=r}n[q]=r;return false}})});e(i,function(r,q){if(!n[q]){delete i[q];e(r,function(s){s(false,{node:o,selector:q,parents:m})})}})})}if(!h.selectorChangedData[g]){h.selectorChangedData[g]=[]}h.selectorChangedData[g].push(j);return h},scrollIntoView:function(k){var j,h,g=this,i=g.dom;h=i.getViewPort(g.editor.getWin());j=i.getPos(k).y;if(j<h.y||j+25>h.y+h.h){g.editor.getWin().scrollTo(0,j<h.y?j:j-h.h+25)}},destroy:function(h){var g=this;g.win=null;if(!h){d.removeUnload(g.destroy)}},_fixIESelection:function(){var h=this.dom,n=h.doc,i=n.body,k,o,g;function j(p,s){var q=i.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function m(q){var p;if(q.button){p=j(q.x,q.y);if(p){if(p.compareEndPoints("StartToStart",o)>0){p.setEndPoint("StartToStart",o)}else{p.setEndPoint("EndToEnd",o)}p.select()}}else{l()}}function l(){var p=n.selection.createRange();if(o&&!p.item&&p.compareEndPoints("StartToEnd",p)===0){o.select()}h.unbind(n,"mouseup",l);h.unbind(n,"mousemove",m);o=k=0}n.documentElement.unselectable=true;h.bind(n,["mousedown","contextmenu"],function(p){if(p.target.nodeName==="HTML"){if(k){l()}g=n.documentElement;if(g.scrollHeight>g.clientHeight){return}k=1;o=j(p.x,p.y);if(o){h.bind(n,"mouseup",l);h.bind(n,"mousemove",m);h.win.focus();o.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,g,f){var i=this,c,j,b=a.isIE,h=a.each,d;if(!e.apply_source_formatting){e.indent=false}g=g||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:true;c=new a.util.Dispatcher(i);j=new a.util.Dispatcher(i);d=new a.html.DomParser(e,f);d.addAttributeFilter("data-mce-tabindex",function(k,l){var m=k.length,n;while(m--){n=k[m];n.attr("tabindex",n.attributes.map["data-mce-tabindex"]);n.attr(l,null)}});d.addAttributeFilter("src,href,style",function(l,k){var p=l.length,m,r,o="data-mce-"+k,q=e.url_converter,s=e.url_converter_scope,n;while(p--){m=l[p];r=m.attributes.map[o];if(r!==n){m.attr(k,r.length>0?r:null);m.attr(o,null)}else{r=m.attributes.map[k];if(k==="style"){r=g.serializeStyle(g.parseStyle(r),m.name)}else{if(q){r=q.call(s,r,k,m.name)}}m.attr(k,r.length>0?r:null)}}});d.addAttributeFilter("class",function(k,l){var m=k.length,n,o;while(m--){n=k[m];o=n.attr("class");if(o){o=n.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,"");n.attr("class",o.length>0?o:null)}}});d.addAttributeFilter("data-mce-type",function(k,m,l){var n=k.length,o;while(n--){o=k[n];if(o.attributes.map["data-mce-type"]==="bookmark"&&!l.cleanup){o.remove()}}});d.addNodeFilter("noscript",function(k){var l=k.length,m;while(l--){m=k[l].firstChild;if(m){m.value=a.html.Entities.decode(m.value)}}});d.addNodeFilter("script,style",function(l,m){var n=l.length,o,p;function k(q){return q.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}while(n--){o=l[n];p=o.firstChild?o.firstChild.value:"";if(m==="script"){type=o.attr("type");if(type){o.attr("type",type=="mce-no/type"?null:type.replace(/^mce\-/,""))}if(p.length>0){o.firstChild.value="// <![CDATA[\n"+k(p)+"\n// ]]>"}}else{if(p.length>0){o.firstChild.value="<!--\n"+k(p)+"\n-->"}}}});d.addNodeFilter("#comment",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}}});d.addNodeFilter("xml:namespace,input",function(k,l){var m=k.length,n;while(m--){n=k[m];if(n.type===7){n.remove()}else{if(n.type===1){if(l==="input"&&!("type"in n.attributes.map)){n.attr("type","text")}}}}});if(e.fix_list_elements){d.addNodeFilter("ul,ol",function(l,m){var n=l.length,o,k;while(n--){o=l[n];k=o.parent;if(k.name==="ul"||k.name==="ol"){if(o.prev&&o.prev.name==="li"){o.prev.append(o)}}}})}d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-new",function(k,l){var m=k.length;while(m--){k[m].attr(l,null)}});return{schema:f,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:c,onPostProcess:j,serialize:function(p,n){var m,q,l,k,o;if(b&&g.select("script,style,select,map").length>0){o=p.innerHTML;p=p.cloneNode(false);g.setHTML(p,o)}else{p=p.cloneNode(true)}m=p.ownerDocument.implementation;if(m.createHTMLDocument){q=m.createHTMLDocument("");h(p.nodeName=="BODY"?p.childNodes:[p],function(r){q.body.appendChild(q.importNode(r,true))});if(p.nodeName!="BODY"){p=q.body.firstChild}else{p=q.body}l=g.doc;g.doc=q}n=n||{};n.format=n.format||"html";if(n.selection){n.forced_root_block=""}if(!n.no_events){n.node=p;c.dispatch(i,n)}k=new a.html.Serializer(e,f);n.content=k.serialize(d.parse(a.trim(n.getInner?p.innerHTML:g.getOuterHTML(p)),n));if(!n.cleanup){n.content=n.content.replace(/\uFEFF/g,"")}if(!n.no_events){j.dispatch(i,n)}if(l){g.doc=l}n.node=null;return n.content},addRules:function(k){f.addValidElements(k)},setRules:function(k){f.setValidElements(k)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],e={},d=[],g=0,f;function b(m,v){var x=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}v()}function u(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+m)}}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol&&o.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var t=q.create("script",{type:"text/javascript"});t.text=y;document.getElementsByTagName("head")[0].appendChild(t);q.remove(t);p()},error:u});return}}s=document.createElement("script");s.id=n;s.type="text/javascript";s.src=a._addVer(m);if(!a.isIE||a.isIE11){s.onload=p}s.onerror=u;if(!a.isOpera){s.onreadystatechange=function(){var t=s.readyState;if(t=="complete"||t=="loaded"){p()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==f){j.push(m);l[m]=c}if(q){if(!e[m]){e[m]=[]}e[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(j,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(e[r],function(s){s.func.call(s.scope)});e[r]=f}d.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==i){n(s);return}if(l[s]!=k){l[s]=k;g++;b(s,function(){l[s]=i;g--;n(s);o()})}});if(!g){a.each(d,function(s){s.func.call(s.scope)});d.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);(function(b){var c=b.each,a=b.dom.TreeWalker;function d(e,f){var g=e.childNodes;f--;if(f>g.length-1){f=g.length-1}else{if(f<0){f=0}}return g[f]||e}b.dom.RangeUtils=function(e){this.walk=function(f,u){var k=f.startContainer,n=f.startOffset,v=f.endContainer,o=f.endOffset,l,i,q,j,t,s,g;g=e.select("td.mceSelected,th.mceSelected");if(g.length>0){c(g,function(x){u([x])});return}function h(x){var y;y=x[0];if(y.nodeType===3&&y===k&&n>=y.nodeValue.length){x.splice(0,1)}y=x[x.length-1];if(o===0&&x.length>0&&y===v&&y.nodeType===3){x.splice(x.length-1,1)}return x}function r(z,y,x){var A=[];for(;z&&z!=x;z=z[y]){A.push(z)}return A}function p(y,x){do{if(y.parentNode==x){return y}y=y.parentNode}while(y)}function m(z,y,A){var x=A?"nextSibling":"previousSibling";for(j=z,t=j.parentNode;j&&j!=y;j=t){t=j.parentNode;s=r(j==z?j:j[x],x);if(s.length){if(!A){s.reverse()}u(h(s))}}}if(k.nodeType==1&&k.hasChildNodes()){k=k.childNodes[n]}if(v.nodeType==1&&v.hasChildNodes()){v=d(v,o)}if(k==v){return u(h([k]))}l=e.findCommonAncestor(k,v);for(j=k;j;j=j.parentNode){if(j===v){return m(k,l,true)}if(j===l){break}}for(j=v;j;j=j.parentNode){if(j===k){return m(v,l)}if(j===l){break}}i=p(k,l)||k;q=p(v,l)||v;m(k,i,true);s=r(i==k?i:i.nextSibling,"nextSibling",q==v?q.nextSibling:q);if(s.length){u(h(s))}m(v,q)};this.split=function(g){var j=g.startContainer,f=g.startOffset,k=g.endContainer,i=g.endOffset;function h(l,m){return l.splitText(m)}if(j==k&&j.nodeType==3){if(f>0&&f<j.nodeValue.length){k=h(j,f);j=k.previousSibling;if(i>f){i=i-f;j=k=h(k,i).previousSibling;i=k.nodeValue.length;f=0}else{i=0}}}else{if(j.nodeType==3&&f>0&&f<j.nodeValue.length){j=h(j,f);f=0}if(k.nodeType==3&&i>0&&i<k.nodeValue.length){k=h(k,i).previousSibling;i=k.nodeValue.length}}return{startContainer:j,startOffset:f,endContainer:k,endOffset:i}};this.normalize=function(f){var i,h;function g(l){var k,o,j,q=e.getRoot(),m,p;var s,n;function u(v,x){var y=new a(v,e.getParent(v.parentNode,e.isBlock)||q);while((v=y[x?"prev":"next"]())){if(v.nodeName==="BR"){return true}}}function r(x,v){return x.previousSibling&&x.previousSibling.nodeName==v}function t(z,v){var A,x,y;v=v||k;y=e.getParent(v.parentNode,e.isBlock)||q;if(z&&v.nodeName=="BR"&&n&&e.isEmpty(y)){k=v.parentNode;o=e.nodeIndex(v);i=true;return}A=new a(v,y);while((m=A[z?"prev":"next"]())){if(e.getContentEditableParent(m)==="false"){return}if(m.nodeType===3&&m.nodeValue.length>0){k=m;o=z?m.nodeValue.length:0;i=true;return}if(e.isBlock(m)||p[m.nodeName.toLowerCase()]){return}x=m}if(h&&x){k=x;i=true;o=0}}k=f[(l?"start":"end")+"Container"];o=f[(l?"start":"end")+"Offset"];n=k.nodeType==1&&o===k.childNodes.length;p=e.schema.getNonEmptyElements();s=l;if(k.nodeType==1&&o>k.childNodes.length-1){s=false}if(k.nodeType===9){k=e.getRoot();o=0}if(k===q){if(s){m=k.childNodes[o>0?o-1:0];if(m){if(p[m.nodeName]||m.nodeName=="TABLE"){return}}}if(k.hasChildNodes()){o=Math.min(!s&&o>0?o-1:o,k.childNodes.length-1);k=k.childNodes[o];o=0;if(k.hasChildNodes()&&!/TABLE/.test(k.nodeName)){m=k;j=new a(k,q);do{if(m.nodeType===3&&m.nodeValue.length>0){o=s?0:m.nodeValue.length;k=m;i=true;break}if(p[m.nodeName.toLowerCase()]){o=e.nodeIndex(m);k=m.parentNode;if(m.nodeName=="IMG"&&!s){o++}i=true;break}}while((m=(s?j.next():j.prev())))}}}if(h){if(k.nodeType===3&&o===0){t(true)}if(k.nodeType===1){m=k.childNodes[o];if(!m){m=k.childNodes[o-1]}if(m&&m.nodeName==="BR"&&!r(m,"A")&&!u(m)&&!u(m,true)){t(true,m)}}}if(s&&!h&&k.nodeType===3&&o===k.nodeValue.length){t(false)}if(i){f["set"+(l?"Start":"End")](k,o)}}h=f.collapsed;g(true);if(!h){g()}if(i&&h){f.collapse(true)}return i}};b.dom.RangeUtils.compareRanges=function(f,e){if(f&&e){if(f.item||f.duplicate){if(f.item&&e.item&&f.item(0)===e.item(0)){return true}if(f.isEqual&&e.isEqual&&e.isEqual(f)){return true}}else{return f.startContainer==e.startContainer&&f.startOffset==e.startOffset}}return false};b.dom.RangeUtils.getCaretRangeFromPoint=function(f,j,i){var g,e;if(i.caretPositionFromPoint){e=i.caretPositionFromPoint(f,j);g=i.createRange();g.setStart(e.offsetNode,e.offset);g.collapse(true)}else{if(i.caretRangeFromPoint){g=i.caretRangeFromPoint(f,j)}else{if(i.body.createTextRange){g=i.body.createTextRange();try{g.moveToPoint(f,j);g.collapse(true)}catch(h){g.collapse(j<i.body.clientHeight)}}}}return g};b.dom.RangeUtils.getNode=function(e,f){if(e.nodeType==1&&e.hasChildNodes()){if(f>=e.childNodes.length){f=e.childNodes.length-1}e=e.childNodes[f]}return e}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var q=this,n=e.root,m=e.items,o=e.enableUpDown,i=e.enableLeftRight||!e.enableUpDown,l=e.excludeFromTabOrder,k,h,p,d,g;f=f||b.DOM;k=function(r){g=r.target.id};h=function(r){f.setAttrib(r.target.id,"tabindex","-1")};d=function(r){var s=f.get(g);f.setAttrib(s,"tabindex","0");s.focus()};q.focus=function(){f.get(g).focus()};q.destroy=function(){c(m,function(s){var t=f.get(s.id);f.unbind(t,"focus",k);f.unbind(t,"blur",h)});var r=f.get(n);f.unbind(r,"focus",d);f.unbind(r,"keydown",p);m=f=n=q.focus=k=h=p=d=null;q.destroy=function(){}};q.moveFocus=function(v,s){var r=-1,u=q.controls,t;if(!g){return}c(m,function(y,x){if(y.id===g){r=x;return false}});r+=v;if(r<0){r=m.length-1}else{if(r>=m.length){r=0}}t=m[r];f.setAttrib(g,"tabindex","-1");f.setAttrib(t.id,"tabindex","0");f.get(t.id).focus();if(e.actOnFocus){e.onAction(t.id)}if(s){a.cancel(s)}};p=function(z){var v=37,u=39,y=38,A=40,r=27,t=14,s=13,x=32;switch(z.keyCode){case v:if(i){q.moveFocus(-1)}a.cancel(z);break;case u:if(i){q.moveFocus(1)}a.cancel(z);break;case y:if(o){q.moveFocus(-1)}a.cancel(z);break;case A:if(o){q.moveFocus(1)}a.cancel(z);break;case r:if(e.onCancel){e.onCancel();a.cancel(z)}break;case t:case s:case x:if(e.onAction){e.onAction(g);a.cancel(z)}break}};c(m,function(t,r){var s,u;if(!t.id){t.id=f.uniqueId("_mce_item_")}u=f.get(t.id);if(l){f.bind(u,"blur",h);s="-1"}else{s=(r===0?"0":"-1")}u.setAttribute("tabindex",s);f.bind(u,"focus",k)});if(m[0]){g=m[0].id}f.setAttrib(n,"tabindex","-1");var j=f.get(n);f.bind(j,"focus",d);f.bind(j,"keydown",p)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);if(d){b.setAttrib(d,"aria-"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.offsetWidth,j.max_width):g.offsetWidth;k=j.max_height?Math.min(g.offsetHeight,j.max_height):g.offsetHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,"width",h)}if(j.max_height){c.setStyle(l,"height",k);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden")}}},showMenu:function(p,n,r){var z=this,A=z.settings,o,g=c.getViewPort(),u,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){o=c.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new b("menu_"+z.id,{blocker:1,container:A.container})}else{o=c.get("menu_"+z.id)}if(!e.isOpera){c.setStyles(o,{left:-65535,top:-65535})}c.show(o);z.update();p+=A.offset_x||0;n+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){u=o.clientWidth-i;l=o.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+u)>v){p=r?r-u:Math.max(0,(v-A.vp_offset_x)-u)}if((n+A.vp_offset_y+l)>q){n=Math.max(0,(q-A.vp_offset_y)-l)}}c.setStyles(o,{left:p,top:n});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(o,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return false}});if(z.hasMenus()){z.mouseOverFunc=a.add(o,"mouseover",function(x){var h,t,s;x=x.target;if(x&&(x=c.getParent(x,"tr"))){h=z.items[x.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(x&&c.hasClass(x,m+"ItemSub")){t=c.getRect(x);h.showMenu((t.x+t.w-i),t.y-i,t.x);z.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+"ItemActive")}}})}a.add(o,"keydown",z._keyHandler,z);z.onShowMenu.dispatch(z);if(A.keyboard_focus){z._setupKeyboardNav()}},hideMenu:function(j){var g=this,i=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(c.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(i.settings.parent){c.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id)}k=c.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new b("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,"span",{"class":i.classPrefix+"Line"})}l=c.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_setupKeyboardNav:function(){var i,h,g=this;i=c.get("menu_"+g.id);h=c.select("a[role=option]","menu_"+g.id);h.splice(0,0,i);g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});i.focus()},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});c.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){c.addClass(i,"mceLast")}return}i=l=c.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=c.add(i,q.titleItem?"th":"td");i=p=c.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(q.parent){c.setAttrib(p,"aria-haspopup","true");c.setAttrib(p,"aria-owns","menu_"+h.id)}c.addClass(k,q["class"]);g=c.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){c.add(g,"img",{src:q.icon_src})}i=c.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){if(typeof h.settings.style=="function"){h.settings.style=h.settings.style()}c.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,"mceFirst")}if((i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")){c.addClass(l,"mceFirst")}if(h.collapse){c.addClass(l,m+"ItemSub")}if(i=l.previousSibling){c.removeClass(i,"mceLast")}c.addClass(l,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<span class="mceIcon '+e["class"]+'"><img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" /></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var d=this,e=d.settings,c;if(b.isIE&&d.editor){b.dom.Event.add(d.id,"mousedown",function(f){var g=d.editor.selection.getNode().nodeName;c=g==="IMG"?d.editor.selection.getBookmark():null})}b.dom.Event.add(d.id,"click",function(f){if(!d.isDisabled()){if(b.isIE&&d.editor&&c!==null){d.editor.selection.moveToBookmark(c)}return e.onclick.call(e.scope,f)}});b.dom.Event.add(d.id,"keydown",function(f){if(!d.isDisabled()&&f.keyCode==b.VK.SPACEBAR){b.dom.Event.cancel(f);return e.onclick.call(e.scope,f)}})}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(j,i,g){var h=this;h.parent(j,i,g);h.items=[];h.onChange=new a(h);h.onPostRender=new a(h);h.onAdd=new a(h);h.onRenderMenu=new e.util.Dispatcher(this);h.classPrefix="mceListBox";h.marked={}},select:function(h){var g=this,j,i;g.marked={};if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)=="function"){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){var i=this,j,k,h;i.marked={};if(g!=i.selectedIndex){j=d.get(i.id+"_text");h=d.get(i.id+"_voiceDesc");k=i.items[g];if(k){i.selectedValue=k.value;i.selectedIndex=g;d.setHTML(j,d.encode(k.title));d.setHTML(h,i.settings.title+" - "+k.title);d.removeClass(j,"mceTitle");d.setAttrib(i.id,"aria-valuenow",k.title)}else{d.setHTML(j,d.encode(i.settings.title));d.setHTML(h,d.encode(i.settings.title));d.addClass(j,"mceTitle");i.selectedValue=i.selectedIndex=null;d.setAttrib(i.id,"aria-valuenow",i.settings.title)}j=0}},mark:function(g){this.marked[g]=true},add:function(j,g,i){var h=this;i=i||{};i=e.extend(i,{title:j,value:g});h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var j="",g=this,i=g.settings,k=g.classPrefix;j='<span role="listbox" aria-haspopup="true" aria-labelledby="'+g.id+'_voiceDesc" aria-describedby="'+g.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+g.id+'" cellpadding="0" cellspacing="0" class="'+k+" "+k+"Enabled"+(i["class"]?(" "+i["class"]):"")+'"><tbody><tr>';j+="<td>"+d.createHTML("span",{id:g.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},g.settings.title);j+=d.createHTML("a",{id:g.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(g.settings.title))+"</td>";j+="<td>"+d.createHTML("a",{id:g.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";j+="</tr></tbody></table></span>";return j},showMenu:function(){var h=this,j,i=d.get(this.id),g;if(h.isDisabled()||h.items.length===0){return}if(h.menu&&h.menu.isMenuVisible){return h.hideMenu()}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true}j=d.getPos(i);g=h.menu;g.settings.offset_x=j.x;g.settings.offset_y=j.y;g.settings.keyboard_focus=!e.isOpera;f(h.items,function(k){if(g.items[k.id]){g.items[k.id].setSelected(0)}});f(h.items,function(k){if(g.items[k.id]&&h.marked[k.value]){g.items[k.id].setSelected(1)}if(k.value===h.selectedValue){g.items[k.id].setSelected(1)}});g.showMenu(0,i.clientHeight);b.add(d.doc,"mousedown",h.hideMenu,h);d.addClass(h.id,h.classPrefix+"Selected")},hideMenu:function(h){var g=this;if(g.menu&&g.menu.isMenuVisible){d.removeClass(g.id,g.classPrefix+"Selected");if(h&&h.type=="mousedown"&&(h.target.id==g.id+"_text"||h.target.id==g.id+"_open")){return}if(!h||!d.getParent(h.target,".mceMenu")){d.removeClass(g.id,g.classPrefix+"Selected");b.remove(d.doc,"mousedown",g.hideMenu,g);g.menu.hideMenu()}}},renderMenu:function(){var h=this,g;g=h.settings.control_manager.createDropMenu(h.id+"_menu",{menu_line:1,"class":h.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150});g.onHideMenu.add(function(){h.hideMenu();h.focus()});g.add({title:h.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(h.settings.onselect("")!==false){h.select("")}}});f(h.items,function(i){if(i.value===c){g.add({title:i.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(h.settings.onselect("")!==false){h.select("")}}})}else{i.id=d.uniqueId();i.role="option";i.onclick=function(){if(h.settings.onselect(i.value)!==false){h.select(i.value)}};g.add(i)}});h.onRenderMenu.dispatch(h,g);h.menu=g},postRender:function(){var g=this,h=g.classPrefix;b.add(g.id,"click",g.showMenu,g);b.add(g.id,"keydown",function(i){if(i.keyCode==32){g.showMenu(i);b.cancel(i)}});b.add(g.id,"focus",function(){if(!g._focused){g.keyDownHandler=b.add(g.id,"keydown",function(i){if(i.keyCode==40){g.showMenu();b.cancel(i)}});g.keyPressHandler=b.add(g.id,"keypress",function(j){var i;if(j.keyCode==13){i=g.selectedValue;g.selectedValue=null;b.cancel(j);g.settings.onselect(i)}})}g._focused=1});b.add(g.id,"blur",function(){b.remove(g.id,"keydown",g.keyDownHandler);b.remove(g.id,"keypress",g.keyPressHandler);g._focused=0});if(e.isIE6||!d.boxModel){b.add(g.id,"mouseover",function(){if(!d.hasClass(g.id,h+"Disabled")){d.addClass(g.id,h+"Hover")}});b.add(g.id,"mouseout",function(){if(!d.hasClass(g.id,h+"Disabled")){d.removeClass(g.id,h+"Hover")}})}g.onPostRender.dispatch(g,d.get(g.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(h,g){this.parent(h,g);this.classPrefix="mceNativeListBox"},setDisabled:function(g){d.get(this.id).disabled=g;this.setAriaProperty("disabled",g)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)=="function"){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){d.get(this.id).selectedIndex=g+1;this.selectedValue=this.items[g]?this.items[g].value:null},add:function(k,h,g){var j,i=this;g=g||{};g.value=h;if(i.isRendered()){d.add(d.get(this.id),"option",g,k)}j={title:k,value:h,attribs:g};i.items.push(j);i.onAdd.dispatch(i,j)},getLength:function(){return this.items.length},renderHTML:function(){var i,g=this;i=d.createHTML("option",{value:""},"-- "+g.settings.title+" --");f(g.items,function(h){i+=d.createHTML("option",{value:h.value},h.title)});i=d.createHTML("select",{id:g.id,"class":"mceNativeListBox","aria-labelledby":g.id+"_aria"},i);i+=d.createHTML("span",{id:g.id+"_aria",style:"display: none"},g.settings.title);return i},postRender:function(){var h=this,i,j=true;h.rendered=true;function g(l){var k=h.items[l.target.selectedIndex-1];if(k&&(k=k.value)){h.onChange.dispatch(h,k);if(h.settings.onselect){h.settings.onselect(k)}}}b.add(h.id,"change",g);b.add(h.id,"keydown",function(q){var n,p=37,m=39,l=38,r=40,k=13,o=32;b.remove(h.id,"change",i);j=false;n=b.add(h.id,"blur",function(){if(j){return}j=true;b.add(h.id,"change",g);b.remove(h.id,"blur",n)});if(q.keyCode==k||q.keyCode==o){g(q);return b.cancel(q)}else{if(q.keyCode==r||q.keyCode==l){q.stopImmediatePropagation()}}});h.onPostRender.dispatch(h,d.get(h.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.firstChild.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";i=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},i);return b.createHTML("div",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+"_action","click",f);a.add(e.id,["click","keydown"],function(h){var k=32,m=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type==="click"||h.keyCode===l){e.showMenu();a.cancel(h)}}})}a.add(e.id+"_open","click",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1});a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+"_menu");c.addClass(i,"mceSplitButtonSelected");h=c.getPos(i);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.firstChild.clientHeight,zIndex:200000});i=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.keyboardNav=new d.ui.KeyboardNavigation({root:f.id+"_menu",items:c.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu();f.focus()}});f.keyboardNav.focus();f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.isMenuVisible=0;f.onHideMenu.dispatch();f.keyboardNav.destroy()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=c.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});c.add(h,"span",{"class":"mceMenuLine"});g=c.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=c.add(g,"tbody");k=0;e(b(q.colors,"array")?q.colors:q.colors.split(","),function(m){m=m.replace(/^#/,"");if(!k--){l=c.add(j,"tr");k=q.grid_width-1}g=c.add(l,"td");var i={href:"javascript:;",style:{backgroundColor:"#"+m},title:p.editor.getLang("colors."+m,m),"data-mce-color":"#"+m};if(!d.isIE){i.role="option"}g=c.add(g,"a",i);if(p.editor.forcedHighContrastMode){g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+m;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,"tr");g=c.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}c.addClass(h,"mceColorSplitMenu");a.add(p.id+"_menu","mousedown",function(i){return a.cancel(i)});a.add(p.id+"_menu","click",function(i){var m;i=c.getParent(i.target,"a",j);if(i&&i.nodeName.toLowerCase()=="a"&&(m=i.getAttribute("data-mce-color"))){p.setColor(m)}return false});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){var f=this;f.parent();a.clear(f.id+"_menu");a.clear(f.id+"_more");c.remove(f.id+"_menu");if(f.keyboardNav){f.keyboardNav.destroy()}}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,i=[],e=f.controls,j=b.each,g=f.settings;i.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">');i.push("<span role='application'>");i.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>");j(e,function(h){i.push(h.renderHTML())});i.push("</span>");i.push("</div>");return i.join("")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){if(b.isWebKit){d.get(f.editor.id+"_ifr").focus()}f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e==="object"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+"/"+g)})},load:function(j,f,d,h){var g=this,e=f;function i(){var k=g.dependencies(j);b.each(k,function(m){var l=g.createUrl(f,m);g.load(l.resource,l,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[j]){return}if(typeof f==="object"){e=f.prefix+f.resource+f.suffix}if(e.indexOf("/")!==0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}g.urls[j]=e.substring(0,e.lastIndexOf("/"));if(g.lookup[j]){i()}else{b.ScriptLoader.add(e,i,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(j){var g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,f=j.ThemeManager,b=j.PluginManager,e=j.explode,h=j.util.Dispatcher,a,c=0;j.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(j.documentBaseURL)){j.documentBaseURL+="/"}j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL);j.baseURI=new j.util.URI(j.baseURL);j.onBeforeUnload=new h(j);i.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)});j.onAddEditor=new h(j);j.onRemoveEditor=new h(j);j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(x){var v=this,o,n=j.ScriptLoader,u,l=[],r;function q(t){var s=t.id;if(!s){s=t.name;if(s&&!k.get(s)){s=t.name}else{s=k.uniqueId()}t.setAttribute("id",s)}return s}function m(z,A,t){var y=z[A];if(!y){return}if(j.is(y,"string")){t=y.replace(/\.\w+$/,"");t=t?j.resolve(t):0;y=j.resolve(y)}return y.apply(t||this,Array.prototype.slice.call(arguments,2))}function p(t,s){return s.constructor===RegExp?s.test(t.className):k.hasClass(t,s)}v.settings=x;i.bind(window,"ready",function(){var s,t;m(x,"onpageload");switch(x.mode){case"exact":s=x.elements||"";if(s.length>0){g(e(s),function(y){if(k.get(y)){r=new j.Editor(y,x);l.push(r);r.render(1)}else{g(document.forms,function(z){g(z.elements,function(A){if(A.name===y){y="mce_editor_"+c++;k.setAttrib(A,"id",y);r=new j.Editor(y,x);l.push(r);r.render(1)}})})}})}break;case"textareas":case"specific_textareas":g(k.select("textarea"),function(y){if(x.editor_deselector&&p(y,x.editor_deselector)){return}if(!x.editor_selector||p(y,x.editor_selector)){r=new j.Editor(q(y),x);l.push(r);r.render(1)}});break;default:if(x.types){g(x.types,function(y){g(k.select(y.selector),function(A){var z=new j.Editor(q(A),j.extend({},x,y));l.push(z);z.render(1)})})}else{if(x.selector){g(k.select(x.selector),function(z){var y=new j.Editor(q(z),x);l.push(y);y.render(1)})}}}if(x.oninit){s=t=0;g(l,function(y){t++;if(!y.initialized){y.onInit.add(function(){s++;if(s==t){m(x,"oninit")}})}else{s++}if(s==t){m(x,"oninit")}})}})},get:function(l){if(l===a){return this.editors}if(!this.editors.hasOwnProperty(l)){return a}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,n=l.editors;n[m.id]=m;n.push(m);l._setActive(m);l.onAddEditor.dispatch(l,m);return m},remove:function(n){var m=this,l,o=m.editors;if(!o[n.id]){return null}delete o[n.id];for(l=0;l<o.length;l++){if(o[l]==n){o.splice(l,1);break}}if(m.activeEditor==n){m._setActive(o[0])}n.destroy();m.onRemoveEditor.dispatch(m,n);return n},execCommand:function(r,p,o){var q=this,n=q.get(o),l;function m(){n.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}switch(r){case"mceFocus":n.focus();return true;case"mceAddEditor":case"mceAddControl":if(!q.get(o)){new j.Editor(o,q.settings).render()}return true;case"mceAddFrameControl":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=j;j.DOM.doc=l.document;j.DOM.win=l;n=new j.Editor(o.element_id,o);n.render();if(j.isIE&&!j.isIE11){l.attachEvent("onunload",m)}o.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(n){n.remove()}return true;case"mceToggleEditor":if(!n){q.execCommand("mceAddControl",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!j.is(n,"string")){g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){if(s==="common"){m[p+"."+u]=v}else{m[p+"."+s+"."+u]=v}})})})}else{g(q,function(r,p){m[n+"."+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(k){var l=k.DOM,j=k.dom.Event,f=k.extend,i=k.each,a=k.isGecko,b=k.isIE,e=k.isWebKit,d=k.is,h=k.ThemeManager,c=k.PluginManager,g=k.explode;k.create("tinymce.Editor",{Editor:function(p,o){var m=this,n=true;m.settings=o=f({id:p,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:k.documentBaseURL,add_form_submit_trigger:n,submit_patch:n,add_unload_trigger:n,convert_urls:n,relative_urls:n,remove_script_host:n,table_inline_editing:false,object_resizing:n,accessibility_focus:n,doctype:k.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:n,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:n,directionality:"ltr",forced_root_block:"p",hidden_input:n,padd_empty_editor:n,render_ui:n,indentation:"30px",fix_table_elements:n,inline_styles:n,convert_fonts_to_spans:n,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:n,entity_encoding:"named",url_converter:m.convertURL,url_converter_scope:m,ie7_compat:n},o);m.id=m.editorId=p;m.isNotDirty=false;m.plugins={};m.documentBaseURI=new k.util.URI(o.document_base_url||k.documentBaseURL,{base_uri:tinyMCE.baseURI});m.baseURI=k.baseURI;m.contentCSS=[];m.contentStyles=[];m.setupEvents();m.execCommands={};m.queryStateCommands={};m.queryValueCommands={};m.execCallback("setup",m)},render:function(o){var p=this,q=p.settings,r=p.id,m=k.ScriptLoader;if(!j.domLoaded){j.add(window,"ready",function(){p.render()});return}tinyMCE.settings=q;if(!p.getElement()){return}if(k.isIDevice&&!k.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(p.getElement().nodeName)&&q.hidden_input&&l.getParent(r,"form")){l.insertAfter(l.create("input",{type:"hidden",name:r}),r)}if(!q.content_editable){p.orgVisibility=p.getElement().style.visibility;p.getElement().style.visibility="hidden"}if(k.WindowManager){p.windowManager=new k.WindowManager(p)}if(q.encoding=="xml"){p.onGetContent.add(function(s,t){if(t.save){t.content=l.encode(t.content)}})}if(q.add_form_submit_trigger){p.onSubmit.addToTop(function(){if(p.initialized){p.save();p.isNotDirty=1}})}if(q.add_unload_trigger){p._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(p.initialized&&!p.destroyed&&!p.isHidden()){p.save({format:"raw",no_events:true})}})}k.addUnload(p.destroy,p);if(q.submit_patch){p.onBeforeRenderUI.add(function(){var s=p.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){p.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){k.triggerSave();p.isNotDirty=1;return p.formElement._mceOldSubmit(p.formElement)}}s=null})}function n(){if(q.language&&q.language_load!==false){m.add(k.baseURL+"/langs/"+q.language+".js")}if(q.theme&&typeof q.theme!="function"&&q.theme.charAt(0)!="-"&&!h.urls[q.theme]){h.load(q.theme,"themes/"+q.theme+"/editor_template"+k.suffix+".js")}i(g(q.plugins),function(t){if(t&&!c.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var s=c.dependencies(t);i(s,function(v){var u={prefix:"plugins/",resource:v,suffix:"/editor_plugin"+k.suffix+".js"};v=c.createUrl(u,v);c.load(v.resource,v)})}else{if(t=="safari"){return}c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+k.suffix+".js"})}}});m.loadQueue(function(){if(!p.removed){p.init()}})}n()},init:function(){var q,G=this,H=G.settings,D,y,z,C=G.getElement(),p,m,E,v,B,F,x,r=[];k.add(G);H.aria_label=H.aria_label||l.getAttrib(C,"aria-label",G.getLang("aria.rich_text_area"));if(H.theme){if(typeof H.theme!="function"){H.theme=H.theme.replace(/-/,"");p=h.get(H.theme);G.theme=new p();if(G.theme.init){G.theme.init(G,h.urls[H.theme]||k.documentBaseURL.replace(/\/$/,""))}}else{G.theme=H.theme}}function A(s){var t=c.get(s),o=c.urls[s]||k.documentBaseURL.replace(/\/$/,""),n;if(t&&k.inArray(r,s)===-1){i(c.dependencies(s),function(u){A(u)});n=new t(G,o);G.plugins[s]=n;if(n.init){n.init(G,o);r.push(s)}}}i(g(H.plugins.replace(/\-/g,"")),A);if(H.popup_css!==false){if(H.popup_css){H.popup_css=G.documentBaseURI.toAbsolute(H.popup_css)}else{H.popup_css=G.baseURI.toAbsolute("themes/"+H.theme+"/skins/"+H.skin+"/dialog.css")}}if(H.popup_css_add){H.popup_css+=","+G.documentBaseURI.toAbsolute(H.popup_css_add)}G.controlManager=new k.ControlManager(G);G.onBeforeRenderUI.dispatch(G,G.controlManager);if(H.render_ui&&G.theme){G.orgDisplay=C.style.display;if(typeof H.theme!="function"){D=H.width||C.style.width||C.offsetWidth;y=H.height||C.style.height||C.offsetHeight;z=H.min_height||100;F=/^[0-9\.]+(|px)$/i;if(F.test(""+D)){D=Math.max(parseInt(D,10)+(p.deltaWidth||0),100)}if(F.test(""+y)){y=Math.max(parseInt(y,10)+(p.deltaHeight||0),z)}p=G.theme.renderUI({targetNode:C,width:D,height:y,deltaWidth:H.delta_width,deltaHeight:H.delta_height});l.setStyles(p.sizeContainer||p.editorContainer,{width:D,height:y});y=(p.iframeHeight||y)+(typeof(y)=="number"?(p.deltaHeight||0):"");if(y<z){y=z}}else{p=H.theme(G,C);if(p.editorContainer.nodeType){p.editorContainer=p.editorContainer.id=p.editorContainer.id||G.id+"_parent"}if(p.iframeContainer.nodeType){p.iframeContainer=p.iframeContainer.id=p.iframeContainer.id||G.id+"_iframecontainer"}y=p.iframeHeight||C.offsetHeight;if(b){G.onInit.add(function(n){n.dom.bind(n.getBody(),"beforedeactivate keydown keyup",function(){n.bookmark=n.selection.getBookmark(1)})});G.onNodeChange.add(function(n){if(document.activeElement.id==n.id+"_ifr"){n.bookmark=n.selection.getBookmark(1)}})}}G.editorContainer=p.editorContainer}if(H.content_css){i(g(H.content_css),function(n){G.contentCSS.push(G.documentBaseURI.toAbsolute(n))})}if(H.content_style){G.contentStyles.push(H.content_style)}if(H.content_editable){C=q=p=null;return G.initContentBody()}if(document.domain&&location.hostname!=document.domain){k.relaxedDomain=document.domain}G.iframeHTML=H.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(H.document_base_url!=k.documentBaseURL){G.iframeHTML+='<base href="'+G.documentBaseURI.getURI()+'" />'}if(k.isIE8){if(H.ie7_compat){G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}}G.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(x=0;x<G.contentCSS.length;x++){G.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+G.contentCSS[x]+'" />'}G.contentCSS=[];v=H.body_id||"tinymce";if(v.indexOf("=")!=-1){v=G.getParam("body_id","","hash");v=v[G.id]||v}B=H.body_class||"";if(B.indexOf("=")!=-1){B=G.getParam("body_class","","hash");B=B[G.id]||""}G.iframeHTML+='</head><body id="'+v+'" class="mceContentBody '+B+'" onload="window.parent.tinyMCE.get(\''+G.id+"').onLoad.dispatch();\"><br></body></html>";if(k.relaxedDomain&&(b||(k.isOpera&&parseFloat(opera.version())<11))){E='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+G.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}q=l.add(p.iframeContainer,"iframe",{id:G.id+"_ifr",src:E||'javascript:""',frameBorder:"0",allowTransparency:"true",title:H.aria_label,style:{width:"100%",height:y,display:"block"}});G.contentAreaContainer=p.iframeContainer;if(p.editorContainer){l.get(p.editorContainer).style.display=G.orgDisplay}C.style.visibility=G.orgVisibility;l.get(G.id).style.display="none";l.setAttrib(G.id,"aria-hidden",true);if(!k.relaxedDomain||!E){G.initContentBody()}C=q=p=null},initContentBody:function(){var n=this,p=n.settings,q=l.get(n.id),r=n.getDoc(),o,m,s;if((!b||!k.relaxedDomain)&&!p.content_editable){r.open();r.write(n.iframeHTML);r.close();if(k.relaxedDomain){r.domain=k.relaxedDomain}}if(p.content_editable){l.addClass(q,"mceContentBody");n.contentDocument=r=p.content_document||document;n.contentWindow=p.content_window||window;n.bodyElement=q;p.content_document=p.content_window=null}m=n.getBody();m.disabled=true;if(!p.readonly){m.contentEditable=n.getParam("content_editable_state",true)}m.disabled=false;n.schema=new k.html.Schema(p);n.dom=new k.dom.DOMUtils(r,{keep_values:true,url_converter:n.convertURL,url_converter_scope:n,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:true,root_element:p.content_editable?n.id:null,schema:n.schema});n.parser=new k.html.DomParser(p,n.schema);n.parser.addAttributeFilter("src,href,style",function(t,u){var v=t.length,y,A=n.dom,z,x;while(v--){y=t[v];z=y.attr(u);x="data-mce-"+u;if(!y.attributes.map[x]){if(u==="style"){y.attr(x,A.serializeStyle(A.parseStyle(z),y.name))}else{y.attr(x,n.convertURL(z,u,y.name))}}}});n.parser.addNodeFilter("script",function(t,u){var v=t.length,x;while(v--){x=t[v];x.attr("type","mce-"+(x.attr("type")||"text/javascript"))}});n.parser.addNodeFilter("#cdata",function(t,u){var v=t.length,x;while(v--){x=t[v];x.type=8;x.name="#comment";x.value="[CDATA["+x.value+"]]"}});n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(u,v){var x=u.length,y,t=n.schema.getNonEmptyElements();while(x--){y=u[x];if(y.isEmpty(t)){y.empty().append(new k.html.Node("br",1)).shortEnded=true}}});n.serializer=new k.dom.Serializer(p,n.dom,n.schema);n.selection=new k.dom.Selection(n.dom,n.getWin(),n.serializer,n);n.formatter=new k.Formatter(n);n.undoManager=new k.UndoManager(n);n.forceBlocks=new k.ForceBlocks(n);n.enterKey=new k.EnterKey(n);n.editorCommands=new k.EditorCommands(n);n.onExecCommand.add(function(t,u){if(!/^(FontName|FontSize)$/.test(u)){n.nodeChanged()}});n.serializer.onPreProcess.add(function(t,u){return n.onPreProcess.dispatch(n,u,t)});n.serializer.onPostProcess.add(function(t,u){return n.onPostProcess.dispatch(n,u,t)});n.onPreInit.dispatch(n);if(!p.browser_spellcheck&&!p.gecko_spellcheck){r.body.spellcheck=false}if(!p.readonly){n.bindNativeEvents()}n.controlManager.onPostRender.dispatch(n,n.controlManager);n.onPostRender.dispatch(n);n.quirks=k.util.Quirks(n);if(p.directionality){m.dir=p.directionality}if(p.nowrap){m.style.whiteSpace="nowrap"}if(p.protect){n.onBeforeSetContent.add(function(t,u){i(p.protect,function(v){u.content=u.content.replace(v,function(x){return"<!--mce:protected "+escape(x)+"-->"})})})}n.onSetContent.add(function(){n.addVisual(n.getBody())});if(p.padd_empty_editor){n.onPostProcess.add(function(t,u){u.content=u.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}n.load({initial:true,format:"html"});n.startContent=n.getContent({format:"raw"});n.initialized=true;n.onInit.dispatch(n);n.execCallback("setupcontent_callback",n.id,m,r);n.execCallback("init_instance_callback",n);n.focus(true);n.nodeChanged({initial:true});if(n.contentStyles.length>0){s="";i(n.contentStyles,function(t){s+=t+"\r\n"});n.dom.addStyle(s)}i(n.contentCSS,function(t){n.dom.loadCSS(t)});if(p.auto_focus){setTimeout(function(){var t=k.get(p.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getBody().focus();t.getWin().focus()},100)}q=r=m=null},focus:function(p){var o,u=this,t=u.selection,q=u.settings.content_editable,n,r,s=u.getDoc(),m;if(!p){if(u.bookmark){t.moveToBookmark(u.bookmark);u.bookmark=null}n=t.getRng();if(n.item){r=n.item(0)}u._refreshContentEditable();if(!q){u.getWin().focus()}if(k.isGecko||q){m=u.getBody();if(m.setActive&&!k.isIE11){m.setActive()}else{m.focus()}if(q){t.normalize()}}if(r&&r.ownerDocument==s){n=s.body.createControlRange();n.addElement(r);n.select()}}if(k.activeEditor!=u){if((o=k.activeEditor)!=null){o.onDeactivate.dispatch(o,u)}u.onActivate.dispatch(u,o)}k._setActive(u)},execCallback:function(q){var m=this,p=m.settings[q],o;if(!p){return}if(m.callbackLookup&&(o=m.callbackLookup[q])){p=o.func;o=o.scope}if(d(p,"string")){o=p.replace(/\.\w+$/,"");o=o?k.resolve(o):0;p=k.resolve(p);m.callbackLookup=m.callbackLookup||{};m.callbackLookup[q]={func:p,scope:o}}return p.apply(o||m,Array.prototype.slice.call(arguments,1))},translate:function(m){var o=this.settings.language||"en",n=k.i18n;if(!m){return""}return n[o+"."+m]||m.replace(/\{\#([^\}]+)\}/g,function(q,p){return n[o+"."+p]||"{#"+p+"}"})},getLang:function(o,m){return k.i18n[(this.settings.language||"en")+"."+o]||(d(m)?m:"{#"+o+"}")},getParam:function(t,q,m){var r=k.trim,p=d(this.settings[t])?this.settings[t]:q,s;if(m==="hash"){s={};if(d(p,"string")){i(p.indexOf("=")>0?p.split(/[;,](?![^=;,]*(?:[;,]|$))/):p.split(","),function(n){n=n.split("=");if(n.length>1){s[r(n[0])]=r(n[1])}else{s[r(n[0])]=r(n)}})}else{s=p}return s}return p},nodeChanged:function(q){var m=this,n=m.selection,p;if(m.initialized){q=q||{};p=n.getStart()||m.getBody();p=b&&p.ownerDocument!=m.getDoc()?m.getBody():p;q.parents=[];m.dom.getParent(p,function(o){if(o.nodeName=="BODY"){return true}q.parents.push(o)});m.onNodeChange.dispatch(m,q?q.controlManager||m.controlManager:m.controlManager,p,n.isCollapsed(),q)}},addButton:function(n,o){var m=this;m.buttons=m.buttons||{};m.buttons[n]=o},addCommand:function(m,o,n){this.execCommands[m]={func:o,scope:n||this}},addQueryStateHandler:function(m,o,n){this.queryStateCommands[m]={func:o,scope:n||this}},addQueryValueHandler:function(m,o,n){this.queryValueCommands[m]={func:o,scope:n||this}},addShortcut:function(o,q,m,p){var n=this,r;if(n.settings.custom_shortcuts===false){return false}n.shortcuts=n.shortcuts||{};if(d(m,"string")){r=m;m=function(){n.execCommand(r,false,null)}}if(d(m,"object")){r=m;m=function(){n.execCommand(r[0],r[1],r[2])}}i(g(o),function(s){var t={func:m,scope:p||this,desc:n.translate(q),alt:false,ctrl:false,shift:false};i(g(s,"+"),function(u){switch(u){case"alt":case"ctrl":case"shift":t[u]=true;break;default:t.charCode=u.charCodeAt(0);t.keyCode=u.toUpperCase().charCodeAt(0)}});n.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t});return true},execCommand:function(u,r,x,m){var p=this,q=0,v,n;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(u)&&(!m||!m.skip_focus)){p.focus()}m=f({},m);p.onBeforeExecCommand.dispatch(p,u,r,x,m);if(m.terminate){return false}if(p.execCallback("execcommand_callback",p.id,p.selection.getNode(),u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}if(v=p.execCommands[u]){n=v.func.call(v.scope,r,x);if(n!==true){p.onExecCommand.dispatch(p,u,r,x,m);return n}}i(p.plugins,function(o){if(o.execCommand&&o.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);q=1;return false}});if(q){return true}if(p.theme&&p.theme.execCommand&&p.theme.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}if(p.editorCommands.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}p.getDoc().execCommand(u,r,x);p.onExecCommand.dispatch(p,u,r,x,m)},queryCommandState:function(q){var n=this,r,p;if(n._isHidden()){return}if(r=n.queryStateCommands[q]){p=r.func.call(r.scope);if(p!==true){return p}}r=n.editorCommands.queryCommandState(q);if(r!==-1){return r}try{return this.getDoc().queryCommandState(q)}catch(m){}},queryCommandValue:function(r){var n=this,q,p;if(n._isHidden()){return}if(q=n.queryValueCommands[r]){p=q.func.call(q.scope);if(p!==true){return p}}q=n.editorCommands.queryCommandValue(r);if(d(q)){return q}try{return this.getDoc().queryCommandValue(r)}catch(m){}},show:function(){var m=this;l.show(m.getContainer());l.hide(m.id);m.load()},hide:function(){var m=this,n=m.getDoc();if(b&&n){n.execCommand("SelectAll")}m.save();l.hide(m.getContainer());l.setStyle(m.id,"display",m.orgDisplay)},isHidden:function(){return!l.isHidden(this.id)},setProgressState:function(m,n,p){this.onSetProgressState.dispatch(this,m,n,p);return m},load:function(q){var m=this,p=m.getElement(),n;if(p){q=q||{};q.load=true;n=m.setContent(d(p.value)?p.value:p.innerHTML,q);q.element=p;if(!q.no_events){m.onLoadContent.dispatch(m,q)}q.element=p=null;return n}},save:function(r){var m=this,q=m.getElement(),n,p;if(!q||!m.initialized){return}r=r||{};r.save=true;r.element=q;n=r.content=m.getContent(r);if(!r.no_events){m.onSaveContent.dispatch(m,r)}n=r.content;if(!/TEXTAREA|INPUT/i.test(q.nodeName)){q.innerHTML=n;if(p=l.getParent(m.id,"form")){i(p.elements,function(o){if(o.name==m.id){o.value=n;return false}})}}else{q.value=n}r.element=q=null;return n},setContent:function(q,o){var n=this,m=n.getBody(),p;o=o||{};o.format=o.format||"html";o.set=true;o.content=q;if(!o.no_events){n.onBeforeSetContent.dispatch(n,o)}q=o.content;if(q.length===0||/^\s+$/.test(q)){p=n.settings.forced_root_block;if(p&&n.schema.isValidChild(m.nodeName.toLowerCase(),p.toLowerCase())){if(b){q="<"+p+"></"+p+">"}else{q="<"+p+'><br data-mce-bogus="1"></'+p+">"}}else{if(!b){q='<br data-mce-bogus="1">'}}n.dom.setHTML(m,q);n.onSetContent.dispatch(n,o)}else{if(o.format!=="raw"){q=new k.html.Serializer({},n.schema).serialize(n.parser.parse(q))}o.content=k.trim(q);n.dom.setHTML(m,o.content);if(!o.no_events){n.onSetContent.dispatch(n,o)}}return o.content},getContent:function(o){var n=this,p,m=n.getBody();o=o||{};o.format=o.format||"html";o.get=true;o.getInner=true;if(!o.no_events){n.onBeforeGetContent.dispatch(n,o)}if(o.format=="raw"){p=m.innerHTML}else{if(o.format=="text"){p=m.innerText||m.textContent}else{p=n.serializer.serialize(m,o)}}if(o.format!="text"){o.content=k.trim(p)}else{o.content=p}if(!o.no_events){n.onGetContent.dispatch(n,o)}return o.content},isDirty:function(){var m=this;return k.trim(m.startContent)!==k.trim(m.getContent({format:"raw"}))&&!m.isNotDirty},getContainer:function(){var m=this;if(!m.container){m.container=l.get(m.editorContainer||m.id+"_parent")}return m.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return l.get(this.settings.content_element||this.id)},getWin:function(){var m=this,n;if(!m.contentWindow){n=l.get(m.id+"_ifr");if(n){m.contentWindow=n.contentWindow}}return m.contentWindow},getDoc:function(){var m=this,n;if(!m.contentDocument){n=m.getWin();if(n){m.contentDocument=n.document}}return m.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(o,n,q){var m=this,p=m.settings;if(p.urlconverter_callback){return m.execCallback("urlconverter_callback",o,q,true,n)}if(!p.convert_urls||(q&&q.nodeName=="LINK")||o.indexOf("file:")===0){return o}if(p.relative_urls){return m.documentBaseURI.toRelative(o)}o=m.documentBaseURI.toAbsolute(o,p.remove_script_host);return o},addVisual:function(q){var n=this,o=n.settings,p=n.dom,m;q=q||n.getBody();if(!d(n.hasVisual)){n.hasVisual=o.visual}i(p.select("table,a",q),function(s){var r;switch(s.nodeName){case"TABLE":m=o.visual_table_class||"mceItemTable";r=p.getAttrib(s,"border");if(!r||r=="0"){if(n.hasVisual){p.addClass(s,m)}else{p.removeClass(s,m)}}return;case"A":if(!p.getAttrib(s,"href",false)){r=p.getAttrib(s,"name")||s.id;m="mceItemAnchor";if(r){if(n.hasVisual){p.addClass(s,m)}else{p.removeClass(s,m)}}}return}});n.onVisualAid.dispatch(n,q,n.hasVisual)},remove:function(){var m=this,o=m.getContainer(),n=m.getDoc();if(!m.removed){m.removed=1;if(b&&n){n.execCommand("SelectAll")}m.save();l.setStyle(m.id,"display",m.orgDisplay);if(!m.settings.content_editable){j.unbind(m.getWin());j.unbind(m.getDoc())}j.unbind(m.getBody());j.clear(o);m.execCallback("remove_instance_callback",m);m.onRemove.dispatch(m);m.onExecCommand.listeners=[];k.remove(m);l.remove(o)}},destroy:function(n){var m=this;if(m.destroyed){return}if(a){j.unbind(m.getDoc());j.unbind(m.getWin());j.unbind(m.getBody())}if(!n){k.removeUnload(m.destroy);tinyMCE.onBeforeUnload.remove(m._beforeUnload);if(m.theme&&m.theme.destroy){m.theme.destroy()}m.controlManager.destroy();m.selection.destroy();m.dom.destroy()}if(m.formElement){m.formElement.submit=m.formElement._mceOldSubmit;m.formElement._mceOldSubmit=null}m.contentAreaContainer=m.formElement=m.container=m.settings.content_element=m.bodyElement=m.contentDocument=m.contentWindow=null;if(m.selection){m.selection=m.selection.win=m.selection.dom=m.selection.dom.doc=null}m.destroyed=1},_refreshContentEditable:function(){var n=this,m,o;if(n._isHidden()){m=n.getBody();o=m.parentNode;o.removeChild(m);o.appendChild(m);m.focus()}},_isHidden:function(){var m;if(!a){return 0}m=this.selection.getSel();return(!m||!m.rangeCount||m.rangeCount===0)}})})(tinymce);(function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){c[e]=new a.util.Dispatcher(c)});if(d.cleanup_callback){c.onBeforeSetContent.add(function(e,f){f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)});c.onPreProcess.add(function(e,f){if(f.set){e.execCallback("cleanup_callback","insert_to_editor_dom",f.node,f)}if(f.get){e.execCallback("cleanup_callback","get_from_editor_dom",f.node,f)}});c.onPostProcess.add(function(e,f){if(f.set){f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)}if(f.get){f.content=e.execCallback("cleanup_callback","get_from_editor",f.content,f)}})}if(d.save_callback){c.onGetContent.add(function(e,f){if(f.save){f.content=e.execCallback("save_callback",e.id,f.content,e.getBody())}})}if(d.handle_event_callback){c.onEvent.add(function(f,g,h){if(c.execCallback("handle_event_callback",g,f,h)===false){g.preventDefault();g.stopPropagation()}})}if(d.handle_node_change_callback){c.onNodeChange.add(function(f,e,g){f.execCallback("handle_node_change_callback",f.id,g,-1,-1,true,f.selection.isCollapsed())})}if(d.save_callback){c.onSaveContent.add(function(e,g){var f=e.execCallback("save_callback",e.id,g.content,e.getBody());if(f){g.content=f}})}if(d.onchange_callback){c.onChange.add(function(f,e){f.execCallback("onchange_callback",f,e)})}};a.Editor.prototype.bindNativeEvents=function(){var l=this,f,d=l.settings,e=l.dom,h;h={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function c(i,m){var n=i.type;if(l.removed){return}if(l.onEvent.dispatch(l,i,m)!==false){l[h[i.fakeType||i.type]].dispatch(l,i,m)}}function j(i){l.focus(true)}function k(i,m){if(m.keyCode!=65||!a.VK.metaKeyPressed(m)){l.selection.normalize()}l.nodeChanged()}b(h,function(m,n){var i=d.content_editable?l.getBody():l.getDoc();switch(n){case"contextmenu":e.bind(i,n,c);break;case"paste":e.bind(l.getBody(),n,c);break;case"submit":case"reset":e.bind(l.getElement().form||a.DOM.getParent(l.id,"form"),n,c);break;default:e.bind(i,n,c)}});e.bind(d.content_editable?l.getBody():(a.isGecko?l.getDoc():l.getWin()),"focus",function(i){l.focus(true)});if(d.content_editable&&a.isOpera){e.bind(l.getBody(),"click",j);e.bind(l.getBody(),"keydown",j)}l.onMouseUp.add(k);l.onKeyUp.add(function(i,n){var m=n.keyCode;if((m>=33&&m<=36)||(m>=37&&m<=40)||m==13||m==45||m==46||m==8||(a.isMac&&(m==91||m==93))||n.ctrlKey){k(i,n)}});l.onReset.add(function(){l.setContent(l.startContent,{format:"raw"})});function g(m,i){if(m.altKey||m.ctrlKey||m.metaKey){b(l.shortcuts,function(n){var o=a.isMac?m.metaKey:m.ctrlKey;if(n.ctrl!=o||n.alt!=m.altKey||n.shift!=m.shiftKey){return}if(m.keyCode==n.keyCode||(m.charCode&&m.charCode==n.charCode)){m.preventDefault();if(i){n.func.call(n.scope)}return true}})}}l.onKeyUp.add(function(i,m){g(m)});l.onKeyPress.add(function(i,m){g(m)});l.onKeyDown.add(function(i,m){g(m,true)});if(a.isOpera){l.onClick.add(function(i,m){m.preventDefault()})}}})(tinymce);(function(e){var f=e.each,c,b=true,d=false,g=e.isIE&&!e.isIE11;var a=e.dom.TreeWalker;e.EditorCommands=function(p){var o=p.dom,r=p.selection,l={state:{},exec:{},value:{}},m=p.settings,s=p.formatter,q;function t(B,A,z){var y;B=B.toLowerCase();if(y=l.exec[B]){y(B,A,z);return b}return d}function n(z){var y;z=z.toLowerCase();if(y=l.state[z]){return y(z)}return-1}function j(z){var y;z=z.toLowerCase();if(y=l.value[z]){return y(z)}return d}function x(y,z){z=z||"exec";f(y,function(B,A){f(A.toLowerCase().split(","),function(C){l[z][C]=B})})}e.extend(this,{execCommand:t,queryCommandState:n,queryCommandValue:j,addCommands:x});function h(A,z,y){if(z===c){z=d}if(y===c){y=null}return p.getDoc().execCommand(A,z,y)}function v(y){return s.match(y)}function u(y,z){s.toggle(y,z?{value:z}:c)}function k(y){q=r.getBookmark(y)}function i(){r.moveToBookmark(q)}x({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){p.undoManager.add()},"Cut,Copy,Paste":function(B){var A=p.getDoc(),y;try{h(B)}catch(z){y=b}if(y||!A.queryCommandSupported(B)){if(e.isGecko){p.windowManager.confirm(p.getLang("clipboard_msg"),function(C){if(C){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{p.windowManager.alert(p.getLang("clipboard_no_support"))}}},unlink:function(){if(r.isCollapsed()){var y=r.getNode();if(y.tagName=="A"){p.dom.remove(y,true)}return}s.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(y){var z=y.substring(7);f("left,center,right,full".split(","),function(A){if(z!=A){s.remove("align"+A)}});u("align"+z);t("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(A){var y,z;h(A);y=o.getParent(r.getNode(),"ol,ul");if(y){z=y.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(z.nodeName)){k();o.split(z,y);i()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(y){u(y)},"ForeColor,HiliteColor,FontName":function(A,z,y){u(A,y)},FontSize:function(B,A,z){var y,C;if(z>=1&&z<=7){C=e.explode(m.font_size_style_values);y=e.explode(m.font_size_classes);if(y){z=y[z-1]||z}else{z=C[z-1]||z}}u(B,z)},RemoveFormat:function(y){s.remove(y)},mceBlockQuote:function(y){u("blockquote")},FormatBlock:function(A,z,y){return u(y||"p")},mceCleanup:function(){var y=r.getBookmark();p.setContent(p.getContent({cleanup:b}),{cleanup:b});r.moveToBookmark(y)},mceRemoveNode:function(B,A,z){var y=z||r.getNode();if(y!=p.getBody()){k();p.dom.remove(y,b);i()}},mceSelectNodeDepth:function(B,A,z){var y=0;o.getParent(r.getNode(),function(C){if(C.nodeType==1&&y++==z){r.select(C);return d}},p.getBody())},mceSelectNode:function(A,z,y){r.select(y)},mceInsertContent:function(D,O,P){var C,S,H,T,z,B;var G,F,Q,y,J,E;var M=p.schema.getTextInlineElements();function R(Y){var X,W,Z;X=r.getRng(true);W=X.startContainer;Z=X.startOffset;function V(aa){return W[aa]&&W[aa].nodeType==3}if(W.nodeType==3){if(Z>0){Y=Y.replace(/^&nbsp;/," ")}else{if(!V("previousSibling")){Y=Y.replace(/^ /,"&nbsp;")}}if(Z<W.length){Y=Y.replace(/&nbsp;(<br>|)$/," ")}else{if(!V("nextSibling")){Y=Y.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}}}return Y}function A(){var W,V,X;W=r.getRng(true);V=W.startContainer;X=W.startOffset;if(V.nodeType==3&&W.collapsed){if(V.data[X]==="\u00a0"){V.deleteData(X,1);if(!/[\u00a0| ]$/.test(P)){P+=" "}}else{if(V.data[X-1]==="\u00a0"){V.deleteData(X-1,1);if(!/[\u00a0| ]$/.test(P)){P=" "+P}}}}}function I(V){if(E){for(Q=V.firstChild;Q;Q=Q.walk(true)){if(M[Q.name]){Q.attr("data-mce-new","true")}}}}function U(){if(E){var V=p.getBody(),W=new ElementUtils(o);f(o.select("*[data-mce-new]"),function(Y){Y.removeAttribute("data-mce-new");for(var X=Y.parentNode;X&&X!=V;X=X.parentNode){if(W.compare(X,Y)){o.remove(Y,true)}}})}}if(typeof P!="string"){E=P.merge;P=P.content}if(/^ | $/.test(P)){P=R(P)}C=p.parser;S=new e.html.Serializer({},p.schema);J='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';B={content:P,format:"html"};r.onBeforeSetContent.dispatch(r,B);P=B.content;if(P.indexOf("{$caret}")==-1){P+="{$caret}"}P=P.replace(/\{\$caret\}/,J);F=r.getRng();var N=F.startContainer||(F.parentElement?F.parentElement():null);var K=p.getBody();if(N===K&&r.isCollapsed()){if(o.isBlock(K.firstChild)&&o.isEmpty(K.firstChild)){F=o.createRng();F.setStart(K.firstChild,0);F.setEnd(K.firstChild,0);r.setRng(F)}}if(!r.isCollapsed()){p.getDoc().execCommand("Delete",false,null);A()}H=r.getNode();var L={context:H.nodeName.toLowerCase()};z=C.parse(P,L);I(z);Q=z.lastChild;if(Q.attr("id")=="mce_marker"){G=Q;for(Q=Q.prev;Q;Q=Q.walk(true)){if(Q.type==3||!o.isBlock(Q.name)){if(p.schema.isValidChild(Q.parent.name,"span")){Q.parent.insert(G,Q,Q.name==="br")}break}}}if(!L.invalid){P=S.serialize(z);Q=H.firstChild;y=H.lastChild;if(!Q||(Q===y&&Q.nodeName==="BR")){o.setHTML(H,P)}else{r.setContent(P)}}else{r.setContent(J);H=r.getNode();T=p.getBody();if(H.nodeType==9){H=Q=T}else{Q=H}while(Q!==T){H=Q;Q=Q.parentNode}P=H==T?T.innerHTML:o.getOuterHTML(H);P=S.serialize(C.parse(P.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return S.serialize(z)})));if(H==T){o.setHTML(T,P)}else{o.setOuterHTML(H,P)}}G=o.get("mce_marker");r.scrollIntoView(G);F=o.createRng();Q=G.previousSibling;if(Q&&Q.nodeType==3){F.setStart(Q,Q.nodeValue.length);if(!e.isIE){y=G.nextSibling;if(y&&y.nodeType==3){Q.appendData(y.data);y.parentNode.removeChild(y)}}}else{F.setStartBefore(G);F.setEndBefore(G)}o.remove(G);r.setRng(F);r.onSetContent.dispatch(r,B);p.addVisual()},mceInsertRawHTML:function(A,z,y){r.setContent("tiny_mce_marker");p.setContent(p.getContent().replace(/tiny_mce_marker/g,function(){return y}))},mceToggleFormat:function(A,z,y){u(y)},mceSetContent:function(A,z,y){p.setContent(y)},"Indent,Outdent":function(B){var z,y,A;z=m.indentation;y=/[a-z%]+$/i.exec(z);z=parseInt(z,10);if(!n("InsertUnorderedList")&&!n("InsertOrderedList")){if(!m.forced_root_block&&!o.getParent(r.getNode(),o.isBlock)){s.apply("div")}f(r.getSelectedBlocks(),function(D){if(D.nodeName!="LI"){var C=p.getParam("indent_use_margin",false)?"margin":"padding";C+=o.getStyle(D,"direction",true)=="rtl"?"Right":"Left";if(B=="outdent"){A=Math.max(0,parseInt(D.style[C]||0,10)-z);o.setStyle(D,C,A?A+y:"")}else{A=(parseInt(D.style[C]||0,10)+z)+y;o.setStyle(D,C,A)}}})}else{h(B)}},mceRepaint:function(){var z;if(e.isGecko){try{k(b);if(r.getSel()){r.getSel().selectAllChildren(p.getBody())}r.collapse(b);i()}catch(y){}}},mceToggleFormat:function(A,z,y){s.toggle(y)},InsertHorizontalRule:function(){p.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){p.hasVisual=!p.hasVisual;p.addVisual()},mceReplaceContent:function(A,z,y){p.execCommand("mceInsertContent",false,y.replace(/\{\$selection\}/g,r.getContent({format:"text"})))},mceInsertLink:function(B,A,z){var y;if(typeof z=="string"){z={href:z}}y=o.getParent(r.getNode(),"a");z.href=z.href.replace(" ","%20");if(!y||!z.href){s.remove("link")}if(z.href){s.apply("link",z,y)}},selectAll:function(){var z=o.getRoot(),y=o.createRng();if(r.getRng().setStart){y=o.createRng();y.setStart(z,0);y.setEnd(z,z.childNodes.length);r.setRng(y)}else{y=r.getRng();if(!y.item){y.moveToElementText(z);y.select()}}},"delete":function(){h("Delete");var y=p.getBody();if(o.isEmpty(y)){p.setContent("");if(y.firstChild&&o.isBlock(y.firstChild)){p.selection.setCursorLocation(y.firstChild,0)}else{p.selection.setCursorLocation(y,0)}}},mceNewDocument:function(){p.setContent("")},InsertLineBreak:function(A,K,M){var J=M;var y,H,F;var E=r.getRng(true);new e.dom.RangeUtils(o).normalize(E);var D=E.startOffset;var I=E.startContainer;if(I.nodeType==1&&I.hasChildNodes()){var N=D>I.childNodes.length-1;I=I.childNodes[Math.min(D,I.childNodes.length-1)]||I;if(N&&I.nodeType==3){D=I.nodeValue.length}else{D=0}}var B=o.getParent(I,o.isBlock);var C=B?B.nodeName.toUpperCase():"";var z=B?o.getParent(B.parentNode,o.isBlock):null;var O=z?z.nodeName.toUpperCase():"";var L=J&&J.ctrlKey;if(O=="LI"&&!L){B=z;C=O}function G(){var S=new a(I,B),R;var Q=p.schema.getNonEmptyElements();while((R=S.next())){if(Q[R.nodeName.toLowerCase()]||R.length>0){return true}}}if(I&&I.nodeType==3&&D>=I.nodeValue.length){if(!g&&!G()){y=o.create("br");E.insertNode(y);E.setStartAfter(y);E.setEndAfter(y);H=true}}y=o.create("br");E.insertNode(y);var P=o.doc.documentMode;if(g&&C=="PRE"&&(!P||P<8)){y.parentNode.insertBefore(o.doc.createTextNode("\r"),y)}F=o.create("span",{},"&nbsp;");y.parentNode.insertBefore(F,y);r.scrollIntoView(F);o.remove(F);if(!H){E.setStartAfter(y);E.setEndAfter(y)}else{E.setStartBefore(y);E.setEndBefore(y)}r.setRng(E);p.undoManager.add();return b}});x({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(B){var z="align"+B.substring(7);var y=r.isCollapsed()?[o.getParent(r.getNode(),o.isBlock)]:r.getSelectedBlocks();var A=e.map(y,function(C){return!!s.matchNode(C,z)});return e.inArray(A,b)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(y){return v(y)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var y;if(m.inline_styles){if((y=o.getParent(r.getStart(),o.isBlock))&&parseInt(y.style.paddingLeft,10)>0){return b}if((y=o.getParent(r.getEnd(),o.isBlock))&&parseInt(y.style.paddingLeft,10)>0){return b}}return n("InsertUnorderedList")||n("InsertOrderedList")||(!m.inline_styles&&!!o.getParent(r.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(z){var y=o.getParent(r.getNode(),"ul,ol");return y&&(z==="insertunorderedlist"&&y.tagName==="UL"||z==="insertorderedlist"&&y.tagName==="OL")}},"state");x({"FontSize,FontName":function(A){var z=0,y;if((y=o.getParent(r.getNode(),"span"))){if(A=="fontsize"){z=y.style.fontSize}else{z=y.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return z}},"value");x({Undo:function(){p.undoManager.undo()},Redo:function(){p.undoManager.redo()}})}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(h){var l,i=0,e=[],g,k,j,f;function c(){return b.trim(h.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function d(){l.typing=false;l.add()}onBeforeAdd=new a(l);k=new a(l);j=new a(l);f=new a(l);k.add(function(m,n){if(m.hasUndo()){return h.onChange.dispatch(h,n,m)}});j.add(function(m,n){return h.onUndo.dispatch(h,n,m)});f.add(function(m,n){return h.onRedo.dispatch(h,n,m)});h.onInit.add(function(){l.add()});h.onBeforeExecCommand.add(function(m,p,o,q,n){if(p!="Undo"&&p!="Redo"&&p!="mceRepaint"&&(!n||!n.skip_undo)){l.beforeChange()}});h.onExecCommand.add(function(m,p,o,q,n){if(p!="Undo"&&p!="Redo"&&p!="mceRepaint"&&(!n||!n.skip_undo)){l.add()}});h.onSaveContent.add(d);h.dom.bind(h.dom.getRoot(),"dragend",d);h.dom.bind(h.getBody(),"focusout",function(m){if(!h.removed&&l.typing){d()}});h.onKeyUp.add(function(m,o){var n=o.keyCode;if((n>=33&&n<=36)||(n>=37&&n<=40)||n==45||n==13||o.ctrlKey){d()}});h.onKeyDown.add(function(m,o){var n=o.keyCode;if((n>=33&&n<=36)||(n>=37&&n<=40)||n==45){if(l.typing){d()}return}if((n<16||n>20)&&n!=224&&n!=91&&!l.typing){l.beforeChange();l.typing=true;l.add()}});h.onMouseDown.add(function(m,n){if(l.typing){d()}});h.addShortcut("ctrl+z","undo_desc","Undo");h.addShortcut("ctrl+y","redo_desc","Redo");l={data:e,typing:false,onBeforeAdd:onBeforeAdd,onAdd:k,onUndo:j,onRedo:f,beforeChange:function(){g=h.selection.getBookmark(2,true)},add:function(p){var m,n=h.settings,o;p=p||{};p.content=c();l.onBeforeAdd.dispatch(l,p);o=e[i];if(o&&o.content==p.content){return null}if(e[i]){e[i].beforeBookmark=g}if(n.custom_undo_redo_levels){if(e.length>n.custom_undo_redo_levels){for(m=0;m<e.length-1;m++){e[m]=e[m+1]}e.length--;i=e.length}}p.bookmark=h.selection.getBookmark(2,true);if(i<e.length-1){e.length=i+1}e.push(p);i=e.length-1;l.onAdd.dispatch(l,p);h.isNotDirty=0;return p},undo:function(){var n,m;if(l.typing){l.add();l.typing=false}if(i>0){n=e[--i];h.setContent(n.content,{format:"raw"});h.selection.moveToBookmark(n.beforeBookmark);l.onUndo.dispatch(l,n)}return n},redo:function(){var m;if(i<e.length-1){m=e[++i];h.setContent(m.content,{format:"raw"});h.selection.moveToBookmark(m.bookmark);l.onRedo.dispatch(l,m)}return m},clear:function(){e=[];i=0;l.typing=false},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<e.length-1&&!this.typing}};return l}})(tinymce);tinymce.ForceBlocks=function(c){var b=c.settings,e=c.dom,a=c.selection,d=c.schema.getBlockElements();function f(){var j=a.getStart(),h=c.getBody(),g,k,o,s,q,i,l,m=-16777215,p,r;forcedRootBlock=b.forced_root_block;if(!j||j.nodeType!==1||!forcedRootBlock){return}while(j&&j!=h){if(d[j.nodeName]){return}j=j.parentNode}g=a.getRng();if(g.setStart){k=g.startContainer;o=g.startOffset;s=g.endContainer;q=g.endOffset;try{restoreSelection=c.getDoc().activeElement===h}catch(n){}}else{if(g.item){j=g.item(0);g=c.getDoc().body.createTextRange();g.moveToElementText(j)}restoreSelection=g.parentElement().ownerDocument===c.getDoc();tmpRng=g.duplicate();tmpRng.collapse(true);o=tmpRng.move("character",m)*-1;if(!tmpRng.collapsed){tmpRng=g.duplicate();tmpRng.collapse(false);q=(tmpRng.move("character",m)*-1)-o}}j=h.firstChild;while(j){if(j.nodeType===3||(j.nodeType==1&&!d[j.nodeName]&&!j.getAttribute("data-mce-type"))){if(j.nodeType===3&&j.nodeValue.length==0){l=j;j=j.nextSibling;e.remove(l);continue}if(!i){i=e.create(b.forced_root_block,c.settings.forced_root_block_attrs);j.parentNode.insertBefore(i,j);p=true}l=j;j=j.nextSibling;i.appendChild(l)}else{i=null;j=j.nextSibling}}if(p&&restoreSelection){if(g.setStart){g.setStart(k,o);g.setEnd(s,q);a.setRng(g)}else{try{g=c.getDoc().body.createTextRange();g.moveToElementText(h);g.collapse(true);g.moveStart("character",o);if(q>0){g.moveEnd("character",q)}g.select()}catch(n){}}c.nodeChanged()}}if(b.forced_root_block){c.onKeyUp.add(f);c.onNodeChange.add(f)}};(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(j){var o,k,g,h=this,m=h.editor,n,f;if(!h.controlFactories){h.controlFactories=[];d(m.plugins,function(i){if(i.createControl){h.controlFactories.push(i)}})}n=h.controlFactories;for(k=0,g=n.length;k<g;k++){o=n[k].createControl(j,h);if(o){return h.add(o)}}if(j==="|"||j==="separator"){return h.createSeparator()}if(m.buttons&&(o=m.buttons[j])){return h.createButton(j,o)}return h.add(o)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}n["class"]+=i.settings.directionality=="rtl"?" mceRtl":"";f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(f,n,h){var l=this,j=l.editor,i,k,m;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,scope:n.scope,control_manager:l},n);f=l.prefix+f;function g(o){return o.settings.use_accessible_selects&&!c.isGecko}if(j.settings.use_native_selects||g(j)){k=new c.ui.NativeListBox(f,n)}else{m=h||l._cls.listbox||c.ui.ListBox;k=new m(f,n,j)}l.controls[f]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){j.bookmark=j.selection.getBookmark(1)});a.add(o,"focus",function(){j.selection.moveToBookmark(j.bookmark);j.bookmark=null})})}if(k.hideMenu){j.onMouseDown.add(k.hideMenu,k)}return l.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i,g)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,n,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||c.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=d.DOM.getViewPort(),r;z=z||{};h=h||{};o=b?g.w:screen.width;j=b?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(c){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=d._addVer(r);try{if(c&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(ab){var R={},U=a.each,c=ab.dom,s=ab.selection,v=a.dom.TreeWalker,O=new a.dom.RangeUtils(c),l=ab.schema.isValidChild,I=c.isBlock,n=ab.settings.forced_root_block,u=c.nodeIndex,H="\uFEFF",e=/^(src|href|style)$/,Y=false,D=true,Q,E,z=c.getContentEditable;function J(ac){if(ac.nodeType){ac=ac.nodeName}return!!ab.schema.getTextBlockElements()[ac.toLowerCase()]}function o(ad,ac){return c.getParents(ad,ac,c.getRoot())}function b(ac){return ac.nodeType===1&&ac.id==="_mce_caret"}function j(){m({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(ae,ac,ad){U(ad,function(ag,af){c.setAttrib(ae,af,ag)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});U("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(ac){m(ac,{block:ac,remove:"all"})});m(ab.settings.formats)}function X(){ab.addShortcut("ctrl+b","bold_desc","Bold");ab.addShortcut("ctrl+i","italic_desc","Italic");ab.addShortcut("ctrl+u","underline_desc","Underline");for(var ac=1;ac<=6;ac++){ab.addShortcut("ctrl+"+ac,"",["FormatBlock",false,"h"+ac])}ab.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);ab.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);ab.addShortcut("ctrl+9","",["FormatBlock",false,"address"])}function W(ac){return ac?R[ac]:R}function m(ac,ad){if(ac){if(typeof(ac)!=="string"){U(ac,function(af,ae){m(ae,af)})}else{ad=ad.length?ad:[ad];U(ad,function(ae){if(ae.deep===E){ae.deep=!ae.selector}if(ae.split===E){ae.split=!ae.selector||ae.inline}if(ae.remove===E&&ae.selector&&!ae.inline){ae.remove="none"}if(ae.selector&&ae.inline){ae.mixed=true;ae.block_expand=true}if(typeof(ae.classes)==="string"){ae.classes=ae.classes.split(/\s+/)}});R[ac]=ad}}}var i=function(ad){var ac;ab.dom.getParent(ad,function(ae){ac=ab.dom.getStyle(ae,"text-decoration");return ac&&ac!=="none"});return ac};var M=function(ac){var ad;if(ac.nodeType===1&&ac.parentNode&&ac.parentNode.nodeType===1){ad=i(ac.parentNode);if(ab.dom.getStyle(ac,"color")&&ad){ab.dom.setStyle(ac,"text-decoration",ad)}else{if(ab.dom.getStyle(ac,"text-decoration")===ad){ab.dom.setStyle(ac,"text-decoration",null)}}}};function Z(ae,al,ag){var ah=W(ae),am=ah[0],ak,ad,ai=!ag&&s.isCollapsed();function ac(at,aq){aq=aq||am;if(at){if(aq.onformat){aq.onformat(at,aq,al,ag)}U(aq.styles,function(av,au){c.setStyle(at,au,r(av,al))});if(aq.styles){var ar=c.getAttrib(at,"style");if(ar){at.setAttribute("data-mce-style",ar)}}U(aq.attributes,function(av,au){c.setAttrib(at,au,r(av,al))});U(aq.classes,function(au){au=r(au,al);if(!c.hasClass(at,au)){c.addClass(at,au)}})}}function af(){function at(az,ax){var ay=new v(ax);for(ag=ay.current();ag;ag=ay.prev()){if(ag.childNodes.length>1||ag==az||ag.tagName=="BR"){return ag}}}var ar=ab.selection.getRng();var aw=ar.startContainer;var aq=ar.endContainer;if(aw!=aq&&ar.endOffset===0){var av=at(aw,aq);var au=av.nodeType==3?av.length:av.childNodes.length;ar.setEnd(av,au)}return ar}function aj(aq){var at=-1;var ar;U(aq.childNodes,function(av,au){if(av.nodeName==="UL"||av.nodeName==="OL"){at=au;ar=av;return false}});return{listIndex:at,list:ar}}function an(ar,aq){var au=-1;var at=-1;U(ar.childNodes,function(aw,av){if(aw.nodeName==="SPAN"&&c.getAttrib(aw,"data-mce-type")=="bookmark"){if(aw.id==aq.id+"_start"){au=av}else{if(aw.id==aq.id+"_end"){at=av}}}});return{startIndex:au,endIndex:at}}function ao(ar,au,ax){var aq=[],aw,at,av=true;aw=am.inline||am.block;at=c.create(aw);ac(at);O.walk(ar,function(ay){var az;function aA(aB){var aG,aE,aC,aD,aF;aF=av;aG=aB.nodeName.toLowerCase();aE=aB.parentNode.nodeName.toLowerCase();if(aB.nodeType===1&&z(aB)){aF=av;av=z(aB)==="true";aD=true}if(g(aG,"br")){az=0;if(am.block){c.remove(aB)}return}if(am.wrapper&&A(aB,ae,al)){az=0;return}if(av&&!aD&&am.block&&!am.wrapper&&J(aG)&&l(aE,aw)){aB=c.rename(aB,aw);ac(aB);aq.push(aB);az=0;return}if(am.selector){U(ah,function(aH){if("collapsed"in aH&&aH.collapsed!==ai){return}if(c.is(aB,aH.selector)&&!b(aB)){ac(aB,aH);aC=true}});if(!am.inline||aC){az=0;return}}if(av&&!aD&&l(aw,aG)&&l(aE,aw)&&!(!ax&&aB.nodeType===3&&aB.nodeValue.length===1&&aB.nodeValue.charCodeAt(0)===65279)&&!b(aB)&&(!am.inline||!I(aB))){if(!az){az=c.clone(at,Y);aB.parentNode.insertBefore(az,aB);aq.push(az)}az.appendChild(aB)}else{az=0;U(a.grep(aB.childNodes),aA);if(aD){av=aF}az=0}}U(ay,aA)});if(am.links===true||am.wrap_links===false){U(aq,function(ay){function az(aD){var aC,aB,aA;if(aD.nodeName==="A"){ac(aD,am)}U(a.grep(aD.childNodes),az)}az(ay)})}U(aq,function(aA){var ay;function aB(aD){var aC=0;U(aD.childNodes,function(aE){if(!f(aE)&&!L(aE)){aC++}});return aC}function az(aC){var aE,aD;U(aC.childNodes,function(aF){if(aF.nodeType==1&&!L(aF)&&!b(aF)){aE=aF;return Y}});if(aE&&!L(aE)&&h(aE,am)){aD=c.clone(aE,Y);ac(aD);c.replace(aD,aC,D);c.remove(aE,1)}return aD||aC}ay=aB(aA);if((aq.length>1||!I(aA))&&ay===0){c.remove(aA,1);return}if(am.inline||am.wrapper){if(!am.exact&&ay===1){aA=az(aA)}U(ah,function(aC){U(c.select(aC.inline,aA),function(aD){if(L(aD)){return}aa(aC,al,aD,aC.exact?aD:null)})});if(A(aA.parentNode,ae,al)){c.remove(aA,1);aA=0;return D}if(am.merge_with_parents){c.getParent(aA.parentNode,function(aC){if(A(aC,ae,al)){c.remove(aA,1);aA=0;return D}})}if(aA&&am.merge_siblings!==false){aA=x(F(aA),aA);aA=x(aA,F(aA,D))}}})}if(am){if(ag){if(ag.nodeType){ad=c.createRng();ad.setStartBefore(ag);ad.setEndAfter(ag);ao(q(ad,ah),null,true)}else{ao(ag,null,true)}}else{if(!ai||!am.inline||c.select("td.mceSelected,th.mceSelected").length){var ap=ab.selection.getNode();if(!n&&ah[0].defaultBlock&&!c.getParent(ap,c.isBlock)){Z(ah[0].defaultBlock)}ab.selection.setRng(af());ak=s.getBookmark();ao(q(s.getRng(D),ah),ak);if(am.styles&&(am.styles.color||am.styles.textDecoration)){a.walk(ap,M,"childNodes");M(ap)}s.moveToBookmark(ak);S(s.getRng(D));ab.nodeChanged()}else{V("apply",ae,al)}}}}function C(ae,an,ag,aj){var ah=W(ae),ap=ah[0],al,ad,am=true;function af(av){var au,at,ar,ax,aw;if(av.nodeType===1&&z(av)){ax=am;am=z(av)==="true";aw=true}au=a.grep(av.childNodes);if(am&&!aw){for(at=0,ar=ah.length;at<ar;at++){if(aa(ah[at],an,av,av)){break}}}if(ap.deep){if(au.length){for(at=0,ar=au.length;at<ar;at++){af(au[at])}if(aw){am=ax}}}}function ai(ar){var at;U(o(ar.parentNode).reverse(),function(au){var av;if(!at&&au.id!="_start"&&au.id!="_end"){av=A(au,ae,an,aj);if(av&&av.split!==false){at=au}}});return at}function ac(aw,ar,ax,aA){var aB,az,ay,au,av,at;if(aw){at=aw.parentNode;for(aB=ar.parentNode;aB&&aB!=at;aB=aB.parentNode){az=c.clone(aB,Y);for(av=0;av<ah.length;av++){if(aa(ah[av],an,az,az)){az=0;break}}if(az){if(ay){az.appendChild(ay)}if(!au){au=az}ay=az}}if(aA&&(!ap.mixed||!I(aw))){ar=c.split(aw,ar)}if(ay){ax.parentNode.insertBefore(ay,ax);au.appendChild(ax)}}return ar}function ao(ar){return ac(ai(ar),ar,ar,true)}function ak(au){var at=c.get(au?"_start":"_end"),ar=at[au?"firstChild":"lastChild"];if(L(ar)){ar=ar[au?"firstChild":"lastChild"]}if(ar.nodeType==3&&ar.data.length===0){ar=au?at.previousSibling||at.nextSibling:at.nextSibling||at.previousSibling}c.remove(at,true);return ar}function aq(ar){var at,au;var av=ar.commonAncestorContainer;ar=q(ar,ah,D);if(ap.split){at=N(ar,D);au=N(ar);if(at!=au){if(av&&/^T(HEAD|BODY|FOOT|R)$/.test(av.nodeName)&&/^(TH|TD)$/.test(au.nodeName)&&au.firstChild){au=au.firstChild||au}at=T(at,"span",{id:"_start","data-mce-type":"bookmark"});au=T(au,"span",{id:"_end","data-mce-type":"bookmark"});ao(at);ao(au);at=ak(D);au=ak()}else{at=au=ao(at)}ar.startContainer=at.parentNode?at.parentNode:at;ar.startOffset=u(at);ar.endContainer=au.parentNode?au.parentNode:au;ar.endOffset=u(au)+1}O.walk(ar,function(aw){U(aw,function(ax){af(ax);if(ax.nodeType===1&&ab.dom.getStyle(ax,"text-decoration")==="underline"&&ax.parentNode&&i(ax.parentNode)==="underline"){aa({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,ax)}})})}if(ag){if(ag.nodeType){ad=c.createRng();ad.setStartBefore(ag);ad.setEndAfter(ag);aq(ad)}else{aq(ag)}return}if(!s.isCollapsed()||!ap.inline||c.select("td.mceSelected,th.mceSelected").length){al=s.getBookmark();aq(s.getRng(D));s.moveToBookmark(al);if(ap.inline&&k(ae,an,s.getStart())){S(s.getRng(true))}ab.nodeChanged()}else{V("remove",ae,an,aj)}}function G(ad,af,ae){var ac=W(ad);if(k(ad,af,ae)&&(!("toggle"in ac[0])||ac[0].toggle)){C(ad,af,ae)}else{Z(ad,af,ae)}}function A(ad,ac,ai,ag){var ae=W(ac),aj,ah,af;function ak(ao,aq,ar){var an,ap,al=aq[ar],am;if(aq.onmatch){return aq.onmatch(ao,aq,ar)}if(al){if(al.length===E){for(an in al){if(al.hasOwnProperty(an)){if(ar==="attributes"){ap=c.getAttrib(ao,an)}else{ap=P(ao,an)}if(ag&&!ap&&!aq.exact){return}if((!ag||aq.exact)&&!g(ap,t(r(al[an],ai),an))){return}}}}else{for(am=0;am<al.length;am++){if(ar==="attributes"?c.getAttrib(ao,al[am]):P(ao,al[am])){return aq}}}}return aq}if(ae&&ad){for(ah=0;ah<ae.length;ah++){aj=ae[ah];if(h(ad,aj)&&ak(ad,aj,"attributes")&&ak(ad,aj,"styles")){if((af=aj.classes)){for(ah=0;ah<af.length;ah++){if(!c.hasClass(ad,af[ah])){return}}}return aj}}}}function k(ae,ag,af){var ad;function ac(ai){var ah=c.getRoot();if(ai===ah){return false}ai=c.getParent(ai,function(aj){return aj.parentNode===ah||!!A(aj,ae,ag,true)});return A(ai,ae,ag)}if(af){return ac(af)}af=s.getNode();if(ac(af)){return D}ad=s.getStart();if(ad!=af){if(ac(ad)){return D}}return Y}function y(ag,af){var ad,ae=[],ac={};ad=s.getStart();c.getParent(ad,function(aj){var ai,ah;for(ai=0;ai<ag.length;ai++){ah=ag[ai];if(!ac[ah]&&A(aj,ah,af)){ac[ah]=true;ae.push(ah)}}},c.getRoot());return ae}function B(ag){var ai=W(ag),af,ae,ah,ad,ac;if(ai){af=s.getStart();ae=o(af);for(ad=ai.length-1;ad>=0;ad--){ac=ai[ad].selector;if(!ac||ai[ad].defaultBlock){return D}for(ah=ae.length-1;ah>=0;ah--){if(c.is(ae[ah],ac)){return D}}}}return Y}function K(ac,af,ad){var ae;if(!Q){Q={};ae={};ab.onNodeChange.addToTop(function(ah,ag,aj){var ai=o(aj),ak={};ai=a.grep(ai,function(al){return al.nodeType==1&&!al.getAttribute("data-mce-bogus")});U(Q,function(al,am){U(ai,function(an){if(A(an,am,{},al.similar)){if(!ae[am]){U(al,function(ao){ao(true,{node:an,format:am,parents:ai})});ae[am]=al}ak[am]=al;return false}})});U(ae,function(al,am){if(!ak[am]){delete ae[am];U(al,function(an){an(false,{node:aj,format:am,parents:ai})})}})})}U(ac.split(","),function(ag){if(!Q[ag]){Q[ag]=[];Q[ag].similar=ad}Q[ag].push(af)});return this}a.extend(this,{get:W,register:m,apply:Z,remove:C,toggle:G,match:k,matchAll:y,matchNode:A,canApply:B,formatChanged:K});j();X();function h(ac,ad){if(g(ac,ad.inline)){return D}if(g(ac,ad.block)){return D}if(ad.selector){return ac.nodeType==1&&c.is(ac,ad.selector)}}function g(ad,ac){ad=ad||"";ac=ac||"";ad=""+(ad.nodeName||ad);ac=""+(ac.nodeName||ac);return ad.toLowerCase()==ac.toLowerCase()}function P(ad,ac){return t(c.getStyle(ad,ac),ac)}function t(ad,ac){if(ac=="color"||ac=="backgroundColor"){ad=c.toHex(ad)}if(ac=="fontWeight"&&ad==700){ad="bold"}if(ac=="fontFamily"){ad=ad.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}return""+ad}function r(ac,ad){if(typeof(ac)!="string"){ac=ac(ad)}else{if(ad){ac=ac.replace(/%(\w+)/g,function(af,ae){return ad[ae]||af})}}return ac}function f(ac){return ac&&ac.nodeType===3&&/^([\t \r\n]+|)$/.test(ac.nodeValue)}function T(ae,ad,ac){var af=c.create(ad,ac);ae.parentNode.insertBefore(af,ae);af.appendChild(ae);return af}function q(ac,an,af){var ao,ai,am,ae=ac.startContainer,aj=ac.startOffset,ar=ac.endContainer,al=ac.endOffset;function ap(az){var au,ax,aw,av,at;au=ax=az?ae:ar;av=az?"previousSibling":"nextSibling";at=c.getRoot();function ay(aA){return aA.nodeName=="BR"&&aA.getAttribute("data-mce-bogus")&&!aA.nextSibling}if(au.nodeType==3&&!f(au)){if(az?aj>0:al<au.nodeValue.length){return au}}while(true){if(!an[0].block_expand&&I(ax)){return ax}for(aw=ax[av];aw;aw=aw[av]){if(!L(aw)&&!f(aw)&&!ay(aw)){return ax}}if(ax.parentNode==at){au=ax;break}ax=ax.parentNode}return au}function ah(at,au){if(au===E){au=at.nodeType===3?at.length:at.childNodes.length}while(at&&at.hasChildNodes()){at=at.childNodes[au];if(at){au=at.nodeType===3?at.length:at.childNodes.length}}return{node:at,offset:au}}if(ae.nodeType==1&&ae.hasChildNodes()){ao=ae.childNodes.length-1;ae=ae.childNodes[aj>ao?ao:aj];if(ae&&ae.nodeType==3){aj=0}}if(ar.nodeType==1&&ar.hasChildNodes()){ao=ar.childNodes.length-1;ar=ar.childNodes[al>ao?ao:al-1];if(ar&&ar.nodeType==3){al=ar.nodeValue.length}}function aq(au){var at=au;while(at){if(at.nodeType===1&&z(at)){return z(at)==="false"?at:au}at=at.parentNode}return au}function ak(au,ay,aA){var ax,av,az,at;function aw(aC,aE){var aF,aB,aD=aC.nodeValue;if(typeof(aE)=="undefined"){aE=aA?aD.length:0}if(aA){aF=aD.lastIndexOf(" ",aE);aB=aD.lastIndexOf("\u00a0",aE);aF=aF>aB?aF:aB;if(aF!==-1&&!af){aF++}}else{aF=aD.indexOf(" ",aE);aB=aD.indexOf("\u00a0",aE);aF=aF!==-1&&(aB===-1||aF<aB)?aF:aB}return aF}if(au.nodeType===3){az=aw(au,ay);if(az!==-1){return{container:au,offset:az}}at=au}ax=new v(au,c.getParent(au,I)||ab.getBody());while(av=ax[aA?"prev":"next"]()){if(av.nodeType===3){at=av;az=aw(av);if(az!==-1){return{container:av,offset:az}}}else{if(I(av)){break}}}if(at){if(aA){ay=0}else{ay=at.length}return{container:at,offset:ay}}}function ag(au,at){var av,aw,ay,ax;if(au.nodeType==3&&au.nodeValue.length===0&&au[at]){au=au[at]}av=o(au);for(aw=0;aw<av.length;aw++){for(ay=0;ay<an.length;ay++){ax=an[ay];if("collapsed"in ax&&ax.collapsed!==ac.collapsed){continue}if(c.is(av[aw],ax.selector)){return av[aw]}}}return au}function ad(av,at){var aw,au=c.getRoot();if(!an[0].wrapper){aw=c.getParent(av,an[0].block,au)}if(!aw){aw=c.getParent(av.nodeType==3?av.parentNode:av,function(ax){return ax!=au&&J(ax)})}if(aw&&an[0].wrapper){aw=o(aw,"ul,ol").reverse()[0]||aw}if(!aw){aw=av;while(aw[at]&&!I(aw[at])){aw=aw[at];if(g(aw,"br")){break}}}return aw||av}ae=aq(ae);ar=aq(ar);if(L(ae.parentNode)||L(ae)){ae=L(ae)?ae:ae.parentNode;ae=ae.nextSibling||ae;if(ae.nodeType==3){aj=0}}if(L(ar.parentNode)||L(ar)){ar=L(ar)?ar:ar.parentNode;ar=ar.previousSibling||ar;if(ar.nodeType==3){al=ar.length}}if(an[0].inline){if(ac.collapsed){am=ak(ae,aj,true);if(am){ae=am.container;aj=am.offset}am=ak(ar,al);if(am){ar=am.container;al=am.offset}}ai=ah(ar,al);if(ai.node){while(ai.node&&ai.offset===0&&ai.node.previousSibling){ai=ah(ai.node.previousSibling)}if(ai.node&&ai.offset>0&&ai.node.nodeType===3&&ai.node.nodeValue.charAt(ai.offset-1)===" "){if(ai.offset>1){ar=ai.node;ar.splitText(ai.offset-1)}}}}if(an[0].inline||an[0].block_expand){if(!an[0].inline||(ae.nodeType!=3||aj===0)){ae=ap(true)}if(!an[0].inline||(ar.nodeType!=3||al===ar.nodeValue.length)){ar=ap()}}if(an[0].selector&&an[0].expand!==Y&&!an[0].inline){ae=ag(ae,"previousSibling");ar=ag(ar,"nextSibling")}if(an[0].block||an[0].selector){ae=ad(ae,"previousSibling");ar=ad(ar,"nextSibling");if(an[0].block){if(!I(ae)){ae=ap(true)}if(!I(ar)){ar=ap()}}}if(ae.nodeType==1){aj=u(ae);ae=ae.parentNode}if(ar.nodeType==1){al=u(ar)+1;ar=ar.parentNode}return{startContainer:ae,startOffset:aj,endContainer:ar,endOffset:al}}function d(ac,ad){return ad.links&&ac.tagName=="A"}function aa(ai,ah,af,ac){var ae,ad,ag;if(!h(af,ai)&&!d(af,ai)){return Y}if(ai.remove!="all"){U(ai.styles,function(ak,aj){ak=t(r(ak,ah),aj);if(typeof(aj)==="number"){aj=ak;ac=0}if(ai.remove_similar||(!ac||g(P(ac,aj),ak))){c.setStyle(af,aj,"")}ag=1});if(ag&&c.getAttrib(af,"style")===""){af.removeAttribute("style");af.removeAttribute("data-mce-style")}U(ai.attributes,function(al,aj){var ak;al=r(al,ah);if(typeof(aj)==="number"){aj=al;ac=0}if(!ac||g(c.getAttrib(ac,aj),al)){if(aj=="class"){al=c.getAttrib(af,aj);if(al){ak="";U(al.split(/\s+/),function(am){if(/mce\w+/.test(am)){ak+=(ak?" ":"")+am}});if(ak){c.setAttrib(af,aj,ak);return}}}if(aj=="class"){af.removeAttribute("className")}if(e.test(aj)){af.removeAttribute("data-mce-"+aj)}af.removeAttribute(aj)}});U(ai.classes,function(aj){aj=r(aj,ah);if(!ac||c.hasClass(ac,aj)){c.removeClass(af,aj)}});ad=c.getAttribs(af);for(ae=0;ae<ad.length;ae++){if(ad[ae].nodeName.indexOf("_")!==0){return Y}}}if(ai.remove!="none"){p(af,ai);return D}}function p(ae,af){var ac=ae.parentNode,ad;function ag(ai,ah,aj){ai=F(ai,ah,aj);return!ai||(ai.nodeName=="BR"||I(ai))}if(af.block){if(!n){if(I(ae)&&!I(ac)){if(!ag(ae,Y)&&!ag(ae.firstChild,D,1)){ae.insertBefore(c.create("br"),ae.firstChild)}if(!ag(ae,D)&&!ag(ae.lastChild,Y,1)){ae.appendChild(c.create("br"))}}}else{if(ac==c.getRoot()){if(!af.list_block||!g(ae,af.list_block)){U(a.grep(ae.childNodes),function(ah){if(l(n,ah.nodeName.toLowerCase())){if(!ad){ad=T(ah,n);c.setAttribs(ad,ab.settings.forced_root_block_attrs)}else{ad.appendChild(ah)}}else{ad=0}})}}}}if(af.selector&&af.inline&&!g(af.inline,ae)){return}c.remove(ae,1)}function F(ad,ac,ae){if(ad){ac=ac?"nextSibling":"previousSibling";for(ad=ae?ad:ad[ac];ad;ad=ad[ac]){if(ad.nodeType==1||!f(ad)){return ad}}}}function L(ac){return ac&&ac.nodeType==1&&ac.getAttribute("data-mce-type")=="bookmark"}function x(af,ae){var ad,ac;function ah(ak,aj){if(ak.nodeName!=aj.nodeName){return Y}function ai(am){var an={};U(c.getAttribs(am),function(ao){var ap=ao.nodeName.toLowerCase();if(ap.indexOf("_")!==0&&ap!=="style"){an[ap]=c.getAttrib(am,ap)}});return an}function al(ap,ao){var an,am;for(am in ap){if(ap.hasOwnProperty(am)){an=ao[am];if(an===E){return Y}if(ap[am]!=an){return Y}delete ao[am]}}for(am in ao){if(ao.hasOwnProperty(am)){return Y}}return D}if(!al(ai(ak),ai(aj))){return Y}if(!al(c.parseStyle(c.getAttrib(ak,"style")),c.parseStyle(c.getAttrib(aj,"style")))){return Y}return D}function ag(aj,ai){for(ad=aj;ad;ad=ad[ai]){if(ad.nodeType==3&&ad.nodeValue.length!==0){return aj}if(ad.nodeType==1&&!L(ad)){return ad}}return aj}if(af&&ae){af=ag(af,"previousSibling");ae=ag(ae,"nextSibling");if(ah(af,ae)){for(ad=af.nextSibling;ad&&ad!=ae;){ac=ad;ad=ad.nextSibling;af.appendChild(ac)}c.remove(ae);U(a.grep(ae.childNodes),function(ai){af.appendChild(ai)});return af}}return ae}function N(ad,ag){var ac,af,ae;ac=ad[ag?"startContainer":"endContainer"];af=ad[ag?"startOffset":"endOffset"];if(ac.nodeType==1){ae=ac.childNodes.length-1;if(!ag&&af){af--}ac=ac.childNodes[af>ae?ae:af]}if(ac.nodeType===3&&ag&&af>=ac.nodeValue.length){ac=new v(ac,ab.getBody()).next()||ac}if(ac.nodeType===3&&!ag&&af===0){ac=new v(ac,ab.getBody()).prev()||ac}return ac}function V(an,ac,al,ag){var ap="_mce_caret",ad=ab.settings.caret_debug;function ae(au){var at=c.create("span",{id:ap,"data-mce-bogus":true,style:ad?"color:red":""});if(au){at.appendChild(ab.getDoc().createTextNode(H))}return at}function am(au,at){while(au){if((au.nodeType===3&&au.nodeValue!==H)||au.childNodes.length>1){return false}if(at&&au.nodeType===1){at.push(au)}au=au.firstChild}return true}function ai(at){while(at){if(at.id===ap){return at}at=at.parentNode}}function ah(at){var au;if(at){au=new v(at,at);for(at=au.current();at;at=au.next()){if(at.nodeType===3){return at}}}}function af(av,au){var aw,at;if(!av){av=ai(s.getStart());if(!av){while((av=c.get(ap))){af(av,false)}}}else{at=s.getRng(true);if(am(av)){if(au!==false){at.setStartBefore(av);at.setEndBefore(av)}c.remove(av)}else{aw=ah(av);if(aw.nodeValue.charAt(0)===H){aw.deleteData(0,1);if(at.startContainer==aw&&at.startOffset>0){at.setStart(aw,at.startOffset-1)}if(at.endContainer==aw&&at.endOffset>0){at.setEnd(aw,at.endOffset-1)}}c.remove(av,1)}s.setRng(at)}}function ao(au){var at=au.nodeName.toLowerCase();switch(at){case"html","#document":return false;case"body":return true;default:return ao(au.parentNode)}}function aj(at){return ao(at.startContainer)||ao(at.endContainer)}function ak(){var av,at,az,ay,aw,au,ax;av=s.getRng(true);ay=av.startOffset;au=av.startContainer;ax=au.nodeValue;at=ai(s.getStart());if(at){az=ah(at)}if(ax&&ay>0&&ay<ax.length&&/\w/.test(ax.charAt(ay))&&/\w/.test(ax.charAt(ay-1))){aw=s.getBookmark();av.collapse(true);av=q(av,W(ac));av=O.split(av);Z(ac,al,av);s.moveToBookmark(aw)}else{if(!at||az.nodeValue!==H){at=ae(true);az=at.firstChild;av.insertNode(at);ay=1;Z(ac,al,at)}else{Z(ac,al,at)}s.setCursorLocation(az,ay)}}function aq(){var at=s.getRng(true),au,ax,aA,az,av,aD,aC=[],ay,aB;au=at.startContainer;ax=at.startOffset;av=au;if(au.nodeType==3){if(ax!=au.nodeValue.length){az=true}av=av.parentNode}while(av){if(A(av,ac,al,ag)){aD=av;break}if(av.nextSibling){az=true}aC.push(av);av=av.parentNode}if(!aD){return}if(az){aA=s.getBookmark();at.collapse(true);at=q(at,W(ac),true);at=O.split(at);C(ac,al,at);s.moveToBookmark(aA)}else{aB=ae();av=aB;for(ay=aC.length-1;ay>=0;ay--){av.appendChild(c.clone(aC[ay],false));av=av.firstChild}av.appendChild(c.doc.createTextNode(H));av=av.firstChild;var aw=c.getParent(aD,J);if(aw&&c.isEmpty(aw)){aD.parentNode.replaceChild(aB,aD)}else{c.insertAfter(aB,aD)}s.setCursorLocation(av,1);if(c.isEmpty(aD)){c.remove(aD)}}}function ar(){var at;at=ai(s.getStart());if(at&&!c.isEmpty(at)){a.walk(at,function(au){if(au.nodeType==1&&au.id!==ap&&!c.isEmpty(au)){c.setAttrib(au,"data-mce-bogus",null)}},"childNodes")}}if(!ab._hasCaretEvents){ab.onBeforeGetContent.addToTop(function(){var at=[],au;if(am(ai(s.getStart()),at)){au=at.length;while(au--){c.setAttrib(at[au],"data-mce-bogus","1")}}});a.each("onMouseUp onKeyUp".split(" "),function(at){ab[at].addToTop(function(){af();ar()})});ab.onKeyDown.addToTop(function(at,av){var au=av.keyCode;if((au==8&&s.isCollapsed())||au==37||au==39){af(ai(s.getStart()))}ar()});s.onSetContent.add(ar);ab._hasCaretEvents=true}if(an=="apply"){ak()}else{aq()}}function S(ad){var ac=ad.startContainer,aj=ad.startOffset,af,ai,ah,ae,ag;if(ac.nodeType==3&&aj>=ac.nodeValue.length){aj=u(ac);ac=ac.parentNode;af=true}if(ac.nodeType==1){ae=ac.childNodes;ac=ae[Math.min(aj,ae.length-1)];ai=new v(ac,c.getParent(ac,c.isBlock));if(aj>ae.length-1||af){ai.next()}for(ah=ai.current();ah;ah=ai.next()){if(ah.nodeType==3&&!f(ah)){ag=c.create("a",{"data-mce-bogus":"all"},H);ah.parentNode.insertBefore(ag,ah);ad.setStart(ah,0);s.setRng(ad);c.remove(ag);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;function b(j,i){e.each(i,function(l,k){if(l){g.setStyle(j,k,l)}});g.rename(j,"span")}function f(i,j){g=i.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}}if(c.inline_styles){h=e.explode(c.font_size_legacy_values);d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size,10)-1]})},u:function(j,i){b(i,{textDecoration:"underline"})},strike:function(j,i){b(i,{textDecoration:"line-through"})}};a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});(function(b){var a=b.dom.TreeWalker;b.EnterKey=function(f){var i=f.dom,e=f.selection,d=f.settings,h=f.undoManager,c=f.schema.getNonEmptyElements();function g(B){var v=e.getRng(true),G,j,A,u,p,M,C,o,k,n,t,J,x,D;function E(N){return N&&i.isBlock(N)&&!/^(TD|TH|CAPTION|FORM)$/.test(N.nodeName)&&!/^(fixed|absolute)/i.test(N.style.position)&&i.getContentEditable(N)!=="true"}function F(O){var N;if(b.isIE&&!b.isIE11&&i.isBlock(O)){N=e.getRng();O.appendChild(i.create("span",null,"\u00a0"));e.select(O);O.lastChild.outerHTML="";e.setRng(N)}}function z(P){var O=P,Q=[],N;if(!O){return}while(O=O.firstChild){if(i.isBlock(O)){return}if(O.nodeType==1&&!c[O.nodeName.toLowerCase()]){Q.push(O)}}N=Q.length;while(N--){O=Q[N];if(!O.hasChildNodes()||(O.firstChild==O.lastChild&&O.firstChild.nodeValue==="")){i.remove(O)}else{if(O.nodeName=="A"&&(O.innerText||O.textContent)===" "){i.remove(O)}}}}function m(O){var T,R,N,U,S,Q=O,P;N=i.createRng();if(O.hasChildNodes()){T=new a(O,O);while(R=T.current()){if(R.nodeType==3){N.setStart(R,0);N.setEnd(R,0);break}if(c[R.nodeName.toLowerCase()]){N.setStartBefore(R);N.setEndBefore(R);break}Q=R;R=T.next()}if(!R){N.setStart(Q,0);N.setEnd(Q,0)}}else{if(O.nodeName=="BR"){if(O.nextSibling&&i.isBlock(O.nextSibling)){if(!M||M<9){P=i.create("br");O.parentNode.insertBefore(P,O)}N.setStartBefore(O);N.setEndBefore(O)}else{N.setStartAfter(O);N.setEndAfter(O)}}else{N.setStart(O,0);N.setEnd(O,0)}}e.setRng(N);i.remove(P);S=i.getViewPort(f.getWin());U=i.getPos(O).y;if(U<S.y||U+25>S.y+S.h){f.getWin().scrollTo(0,U<S.y?U:U-S.h+25)}}function r(O){var P=A,R,Q,N;R=O||t=="TABLE"?i.create(O||x):p.cloneNode(false);N=R;if(d.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(P.nodeName)){if(P.id=="_mce_caret"){continue}Q=P.cloneNode(false);i.setAttrib(Q,"id","");if(R.hasChildNodes()){Q.appendChild(R.firstChild);R.appendChild(Q)}else{N=Q;R.appendChild(Q)}}}while(P=P.parentNode)}if(!b.isIE||b.isIE11){N.innerHTML='<br data-mce-bogus="1">'}return R}function q(Q){var P,O,N;if(A.nodeType==3&&(Q?u>0:u<A.nodeValue.length)){return false}if(A.parentNode==p&&D&&!Q){return true}if(Q&&A.nodeType==1&&A==p.firstChild){return true}if(A.nodeName==="TABLE"||(A.previousSibling&&A.previousSibling.nodeName=="TABLE")){return(D&&!Q)||(!D&&Q)}P=new a(A,p);if(A.nodeType==3){if(Q&&u==0){P.prev()}else{if(!Q&&u==A.nodeValue.length){P.next()}}}while(O=P.current()){if(O.nodeType===1){if(!O.getAttribute("data-mce-bogus")){N=O.nodeName.toLowerCase();if(c[N]&&N!=="br"){return false}}}else{if(O.nodeType===3&&!/^[ \t\r\n]*$/.test(O.nodeValue)){return false}}if(Q){P.prev()}else{P.next()}}return true}function l(N,T){var U,S,P,R,Q,O=x||"P";S=i.getParent(N,i.isBlock);if(!S||!E(S)){S=S||j;if(!S.hasChildNodes()){U=i.create(O);S.appendChild(U);v.setStart(U,0);v.setEnd(U,0);return U}R=N;while(R.parentNode!=S){R=R.parentNode}while(R&&!i.isBlock(R)){P=R;R=R.previousSibling}if(P){U=i.create(O);P.parentNode.insertBefore(U,P);R=P;while(R&&!i.isBlock(R)){Q=R.nextSibling;U.appendChild(R);R=Q}v.setStart(N,T);v.setEnd(N,T)}}return N}function H(){function N(P){var O=n[P?"firstChild":"lastChild"];while(O){if(O.nodeType==1){break}O=O[P?"nextSibling":"previousSibling"]}return O===p}o=x?r(x):i.create("BR");if(N(true)&&N()){i.replace(o,n)}else{if(N(true)){n.parentNode.insertBefore(o,n)}else{if(N()){i.insertAfter(o,n);F(o)}else{G=v.cloneRange();G.setStartAfter(p);G.setEndAfter(n);k=G.extractContents();i.insertAfter(k,n);i.insertAfter(o,n)}}}i.remove(p);m(o);h.add()}function y(){var O=new a(A,p),N;while(N=O.next()){if(c[N.nodeName.toLowerCase()]||N.length>0){return true}}}function L(){var P,O,N;if(A&&A.nodeType==3&&u>=A.nodeValue.length){if((!b.isIE||b.isIE11)&&!y()){P=i.create("br");v.insertNode(P);v.setStartAfter(P);v.setEndAfter(P);O=true}}P=i.create("br");v.insertNode(P);if((b.isIE&&!b.isIE11)&&t=="PRE"&&(!M||M<8)){P.parentNode.insertBefore(i.doc.createTextNode("\r"),P)}N=i.create("span",{},"&nbsp;");P.parentNode.insertBefore(N,P);e.scrollIntoView(N);i.remove(N);if(!O){v.setStartAfter(P);v.setEndAfter(P)}else{v.setStartBefore(P);v.setEndBefore(P)}e.setRng(v);h.add()}function s(N){do{if(N.nodeType===3){N.nodeValue=N.nodeValue.replace(/^[\r\n]+/,"")}N=N.firstChild}while(N)}function K(P){var N=i.getRoot(),O,Q;O=P;while(O!==N&&i.getContentEditable(O)!=="false"){if(i.getContentEditable(O)==="true"){Q=O}O=O.parentNode}return O!==N?Q:N}function I(O){var N;if(!b.isIE||b.isIE11){O.normalize();N=O.lastChild;if(!N||(/^(left|right)$/gi.test(i.getStyle(N,"float",true)))){i.add(O,"br")}}}if(!v.collapsed){f.execCommand("Delete");return}if(B.isDefaultPrevented()){return}A=v.startContainer;u=v.startOffset;x=(d.force_p_newlines?"p":"")||d.forced_root_block;x=x?x.toUpperCase():"";M=i.doc.documentMode;C=B.shiftKey;if(A.nodeType==1&&A.hasChildNodes()){D=u>A.childNodes.length-1;A=A.childNodes[Math.min(u,A.childNodes.length-1)]||A;if(D&&A.nodeType==3){u=A.nodeValue.length}else{u=0}}j=K(A);if(!j){return}h.beforeChange();if(!i.isBlock(j)&&j!=i.getRoot()){if(!x||C){L()}return}if((x&&!C)||(!x&&C)){A=l(A,u)}p=i.getParent(A,i.isBlock);n=p?i.getParent(p.parentNode,i.isBlock):null;t=p?p.nodeName.toUpperCase():"";J=n?n.nodeName.toUpperCase():"";if(J=="LI"&&!B.ctrlKey){p=n;t=J}if(t=="LI"){if(!x&&C){L();return}if(i.isEmpty(p)){if(/^(UL|OL|LI)$/.test(n.parentNode.nodeName)){return false}H();return}}if(t=="PRE"&&d.br_in_pre!==false){if(!C){L();return}}else{if((!x&&!C&&t!="LI")||(x&&C)){L();return}}x=x||"P";if(q()){if(/^(H[1-6]|PRE)$/.test(t)&&J!="HGROUP"){o=r(x)}else{o=r()}if(d.end_container_on_empty_block&&E(n)&&i.isEmpty(p)){o=i.split(n,p)}else{i.insertAfter(o,p)}m(o)}else{if(q(true)){o=p.parentNode.insertBefore(r(),p);F(o)}else{G=v.cloneRange();G.setEndAfter(p);k=G.extractContents();s(k);o=k.firstChild;i.insertAfter(k,p);z(o);I(p);m(o)}}i.setAttrib(o,"id","");h.add()}f.onKeyDown.add(function(k,j){if(j.keyCode==13){if(g(j)!==false){j.preventDefault()}}})}})(tinymce);(function(){var DOM=tinymce.DOM;tinymce.create('tinymce.themes.NoSkin',{init:function(ed,url){var t=this,s=ed.settings;t.editor=ed;function grabContent(){var n,or,r,se=ed.selection;n=ed.dom.add(ed.getBody(),'div',{id:'_mcePaste',style:'position:absolute;left:-1000px;top:-1000px'},'<br mce_bogus="1" />').firstChild;or=ed.selection.getRng();r=ed.getDoc().createRange();r.setStart(n,0);r.setEnd(n,0);se.setRng(r);window.setTimeout(function(){var n=ed.dom.get('_mcePaste');h=n.innerHTML;ed.dom.remove(n);se.setRng(or);h=h.replace(/<\/?\w+[^>]*>/gi,'');el=ed.dom.create('div',0,h);tinymce.each(ed.dom.select('span',el).reverse(),function(n){if(ed.dom.getAttribs(n).length<=1&&n.className==='')
return ed.dom.remove(n,1);});ed.execCommand('mceInsertContent',false,ed.serializer.serialize(el,{getInner:1}));},0);};ed.onInit.add(function(){ed.onBeforeExecCommand.add(function(ed,cmd,ui,val,o){o.terminate=true;return false;});ed.dom.loadCSS(url+"/skins/default/content.css");});ed.onKeyDown.add(function(ed,e){if((e.ctrlKey&&e.keyCode==86)||(e.shiftKey&&e.keyCode==45))
grabContent();});ed.onKeyDown.add(function(ed,e){if((e.ctrlKey&&e.keyCode==66)||(e.ctrlKey&&e.keyCode==73)||(e.ctrlKey&&e.keyCode==85))
return tinymce.dom.Event.cancel(e);});DOM.loadCSS((s.editor_css?ed.baseURI.toAbsolute(s.editor_css):'')||url+"/skins/default/ui.css");},renderUI:function(o){var t=this,n=o.targetNode,ic,tb,ed=t.editor,cf=ed.controlManager,sc;n=DOM.insertAfter(DOM.create('span',{id:ed.id+'_container','class':'mceEditor defaultNoSkin'}),n);n=sc=DOM.add(n,'table',{cellPadding:0,cellSpacing:0,'class':'mceLayout'});n=tb=DOM.add(n,'tbody');n=DOM.add(tb,'tr');n=ic=DOM.add(DOM.add(n,'td'),'div',{'class':'mceIframeContainer'});return{iframeContainer:ic,editorContainer:ed.id+'_container',sizeContainer:sc,deltaHeight:-20};},getInfo:function(){return{longname:'Simple theme',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.ThemeManager.add('none',tinymce.themes.NoSkin);})();(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,Cookie=tinymce.util.Cookie,lastExtID,explode=tinymce.explode;tinymce.ThemeManager.requireLangPack('advanced');tinymce.create('tinymce.themes.AdvancedTheme',{controls:{bold:['bold_desc','Bold'],italic:['italic_desc','Italic'],underline:['underline_desc','Underline'],strikethrough:['striketrough_desc','Strikethrough'],justifyleft:['justifyleft_desc','JustifyLeft'],justifycenter:['justifycenter_desc','JustifyCenter'],justifyright:['justifyright_desc','JustifyRight'],justifyfull:['justifyfull_desc','JustifyFull'],outdent:['outdent_desc','Outdent'],indent:['indent_desc','Indent'],undo:['undo_desc','Undo'],redo:['redo_desc','Redo'],unlink:['unlink_desc','unlink'],cleanup:['cleanup_desc','mceCleanup'],help:['help_desc','mceHelp'],code:['code_desc','mceCodeEditor'],hr:['hr_desc','InsertHorizontalRule'],removeformat:['removeformat_desc','RemoveFormat'],sub:['sub_desc','subscript'],sup:['sup_desc','superscript'],forecolor:['forecolor_desc','ForeColor'],forecolorpicker:['forecolor_desc','mceForeColor'],backcolor:['backcolor_desc','HiliteColor'],backcolorpicker:['backcolor_desc','mceBackColor'],visualaid:['visualaid_desc','mceToggleVisualAid'],newdocument:['newdocument_desc','mceNewDocument'],blockquote:['blockquote_desc','mceBlockQuote']},stateControls:['bold','italic','underline','strikethrough','justifyleft','justifycenter','justifyright','justifyfull','sub','sup','blockquote'],init:function(ed,url){var t=this,s,v,o;t.editor=ed;t.url=url;t.onResolveName=new tinymce.util.Dispatcher(this);t.onResize=new tinymce.util.Dispatcher(this);s=ed.settings;ed.forcedHighContrastMode=ed.settings.detect_highcontrast&&t._isHighContrast();ed.settings.skin=ed.forcedHighContrastMode?'highcontrast':ed.settings.skin;if(!s.theme_advanced_buttons1){s=extend({theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap"},s);}
t.settings=s=extend({theme_advanced_path:true,theme_advanced_toolbar_location:'top',theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:ed.settings.readonly},s);if((v=s.theme_advanced_path_location)&&v!='none')
s.theme_advanced_statusbar_location=s.theme_advanced_path_location;if(s.theme_advanced_statusbar_location=='none')
s.theme_advanced_statusbar_location=0;if(!ed.settings.compress.css&&ed.settings.content_css!==false)
ed.contentCSS.push(ed.baseURI.toAbsolute(url+"/skins/"+ed.settings.skin+"/content.css"));ed.onInit.add(function(){if(!ed.settings.readonly){ed.onNodeChange.add(t._nodeChanged,t);ed.onKeyUp.add(t._updateUndoStatus,t);ed.onMouseUp.add(t._updateUndoStatus,t);ed.dom.bind(ed.dom.getRoot(),'dragend',function(){t._updateUndoStatus(ed);});}});ed.onSetProgressState.add(function(ed,b,ti){var co,id=ed.id,tb;if(b){t.progressTimer=setTimeout(function(){co=ed.getContainer();co=co.insertBefore(DOM.create('DIV',{style:'position:relative'}),co.firstChild);tb=DOM.get(ed.id+'_tbl');DOM.add(co,'div',{id:id+'_blocker','class':'mceBlocker',style:{width:tb.clientWidth+2,height:tb.clientHeight+2}});DOM.add(co,'div',{id:id+'_progress','class':'mceProgress',style:{left:tb.clientWidth/2,top:tb.clientHeight/2}});},ti||0);}else{DOM.remove(id+'_blocker');DOM.remove(id+'_progress');clearTimeout(t.progressTimer);}});if(!ed.settings.compress.css){DOM.loadCSS(s.editor_css?ed.documentBaseURI.toAbsolute(s.editor_css):url+"/skins/"+ed.settings.skin+"/ui.css");if(s.skin_variant)
DOM.loadCSS(url+"/skins/"+ed.settings.skin+"/ui_"+s.skin_variant+".css");}},_isHighContrast:function(){var actualColor,div=DOM.add(DOM.getRoot(),'div',{'style':'background-color: rgb(171,239,86);'});actualColor=(DOM.getStyle(div,'background-color',true)+'').toLowerCase().replace(/ /g,'');DOM.remove(div);return actualColor!='rgb(171,239,86)'&&actualColor!='#abef56';},createControl:function(n,cf){var cd,c;if(c=cf.createControl(n))
return c;if((cd=this.controls[n]))
return cf.createButton(n,{title:"advanced."+cd[0],cmd:cd[1],ui:cd[2],value:cd[3]});},execCommand:function(cmd,ui,val){var f=this['_'+cmd];if(f){f.call(this,ui,val);return true;}
return false;},renderUI:function(o){var n,ic,tb,t=this,ed=t.editor,s=t.settings,sc,p,nl;if(ed.settings){ed.settings.aria_label=s.aria_label+ed.getLang('advanced.help_shortcut');}
n=p=DOM.create('div',{role:'application','aria-labelledby':ed.id+'_voice',id:ed.id+'_parent','class':'mceEditor '+ed.settings.skin+'Skin'+(s.skin_variant?' '+ed.settings.skin+'Skin'+t._ufirst(s.skin_variant):'')+(ed.settings.directionality=="rtl"?' mceRtl':'')});DOM.add(n,'span',{'class':'mceVoiceLabel','style':'display:none;',id:ed.id+'_voice'},s.aria_label);if(!DOM.boxModel)
n=DOM.add(n,'div',{'class':'mceOldBoxModel'});n=sc=DOM.add(n,'table',{role:"presentation",id:ed.id+'_tbl','class':'mceLayout',cellSpacing:0,cellPadding:0});n=tb=DOM.add(n,'tbody');switch((s.theme_advanced_layout_manager||'').toLowerCase()){case"rowlayout":ic=t._rowLayout(s,tb,o);break;case"customlayout":ic=ed.execCallback("theme_advanced_custom_layout",s,tb,o,p);break;default:ic=t._simpleLayout(s,tb,o,p);}
n=o.targetNode;nl=sc.rows;DOM.addClass(nl[0],'mceFirst');DOM.addClass(nl[nl.length-1],'mceLast');each(DOM.select('tr',tb),function(n){DOM.addClass(n.firstChild,'mceFirst');DOM.addClass(n.childNodes[n.childNodes.length-1],'mceLast');});if(DOM.get(s.theme_advanced_toolbar_container))
DOM.get(s.theme_advanced_toolbar_container).appendChild(p);else
DOM.insertAfter(p,n);Event.add(ed.id+'_path_row','click',function(e){e=e.target;if(e.nodeName=='A'){t._sel(e.className.replace(/^.*mcePath_([0-9]+).*$/,'$1'));return false;}});if(!ed.getParam('accessibility_focus'))
Event.add(DOM.add(p,'a',{href:'#'},'<!-- IE -->'),'focus',function(){tinyMCE.get(ed.id).focus();});if(s.theme_advanced_toolbar_location=='external')
o.deltaHeight=0;t.deltaHeight=o.deltaHeight;o.targetNode=null;ed.onKeyDown.add(function(ed,evt){var DOM_VK_F10=121,DOM_VK_F11=122;if(evt.altKey){if(evt.keyCode===DOM_VK_F10){if(tinymce.isWebKit){window.focus();}
t.toolbarGroup.focus();return Event.cancel(evt);}else if(evt.keyCode===DOM_VK_F11){DOM.get(ed.id+'_path_row').focus();return Event.cancel(evt);}}});return{iframeContainer:ic,editorContainer:ed.id+'_parent',sizeContainer:sc,deltaHeight:o.deltaHeight};},getInfo:function(){return{longname:'Advanced theme',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',version:tinymce.majorVersion+"."+tinymce.minorVersion};},resizeBy:function(dw,dh){var e=DOM.get(this.editor.id+'_ifr');this.resizeTo(e.clientWidth+dw,e.clientHeight+dh);},resizeTo:function(w,h,store){var ed=this.editor,s=this.settings,e=DOM.get(ed.id+'_tbl'),ifr=DOM.get(ed.id+'_ifr');w=Math.max(s.theme_advanced_resizing_min_width||100,w);h=Math.max(s.theme_advanced_resizing_min_height||100,h);w=Math.min(s.theme_advanced_resizing_max_width||0xFFFF,w);h=Math.min(s.theme_advanced_resizing_max_height||0xFFFF,h);DOM.setStyle(e,'height','');DOM.setStyle(ifr,'height',h);if(s.theme_advanced_resize_horizontal){DOM.setStyle(e,'width','');DOM.setStyle(ifr,'width',w);if(w<e.clientWidth){w=e.clientWidth;DOM.setStyle(ifr,'width',e.clientWidth);}}
if(store&&s.theme_advanced_resizing_use_cookie){Cookie.setHash("TinyMCE_"+ed.id+"_size",{cw:w,ch:h});}
this.onResize.dispatch();},destroy:function(){var id=this.editor.id;Event.clear(id+'_resize');Event.clear(id+'_path_row');Event.clear(id+'_external_close');},_simpleLayout:function(s,tb,o,p){var t=this,ed=t.editor,lo=s.theme_advanced_toolbar_location,sl=s.theme_advanced_statusbar_location,n,ic,etb,c;if(s.readonly){n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});return ic;}
if(lo=='top')
t._addToolbars(tb,o);if(lo=='external'){n=c=DOM.create('div',{style:'position:relative'});n=DOM.add(n,'div',{id:ed.id+'_external','class':'mceExternalToolbar'});DOM.add(n,'a',{id:ed.id+'_external_close',href:'javascript:;','class':'mceExternalClose'});n=DOM.add(n,'table',{id:ed.id+'_tblext',cellSpacing:0,cellPadding:0});etb=DOM.add(n,'tbody');if(p.firstChild.className=='mceOldBoxModel')
p.firstChild.appendChild(c);else
p.insertBefore(c,p.firstChild);t._addToolbars(etb,o);ed.onMouseUp.add(function(){var e=DOM.get(ed.id+'_external');DOM.show(e);DOM.hide(lastExtID);var f=Event.add(ed.id+'_external_close','click',function(){DOM.hide(ed.id+'_external');Event.remove(ed.id+'_external_close','click',f);return false;});DOM.show(e);DOM.setStyle(e,'top',0-DOM.getRect(ed.id+'_tblext').h-1);DOM.hide(e);DOM.show(e);e.style.filter='';lastExtID=ed.id+'_external';e=null;});}
if(sl=='top')
t._addStatusBar(tb,o);if(!s.theme_advanced_toolbar_container){n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});}
if(lo=='bottom')
t._addToolbars(tb,o);if(sl=='bottom')
t._addStatusBar(tb,o);return ic;},_rowLayout:function(s,tb,o){var t=this,ed=t.editor,dc,da,cf=ed.controlManager,n,ic,to,a;dc=s.theme_advanced_containers_default_class||'';da=s.theme_advanced_containers_default_align||'center';each(explode(s.theme_advanced_containers||''),function(c,i){var v=s['theme_advanced_container_'+c]||'';switch(c.toLowerCase()){case'mceeditor':n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});break;case'mceelementpath':t._addStatusBar(tb,o);break;default:a=(s['theme_advanced_container_'+c+'_align']||da).toLowerCase();a='mce'+t._ufirst(a);n=DOM.add(DOM.add(tb,'tr'),'td',{'class':'mceToolbar '+(s['theme_advanced_container_'+c+'_class']||dc)+' '+a||da});to=cf.createToolbar("toolbar"+i);t._addControls(v,to);DOM.setHTML(n,to.renderHTML());o.deltaHeight-=s.theme_advanced_row_height;}});return ic;},_addControls:function(v,tb){var t=this,s=t.settings,ed=t.editor,di,cf=t.editor.controlManager;if(s.theme_advanced_disable&&!t._disabled){di={};each(explode(s.theme_advanced_disable),function(v){di[v]=1;});t._disabled=di;}else
di=t._disabled;each(explode(v),function(n){var c;if(di&&di[n])
return;c=t.createControl(n,cf);if(c)
tb.add(c);});},_addToolbars:function(c,o){var t=this,i,tb,ed=t.editor,s=t.settings,v,cf=ed.controlManager,di,n,h=[],a,toolbarGroup,toolbarsExist=false;toolbarGroup=cf.createToolbarGroup('toolbargroup',{'name':ed.getLang('advanced.toolbar'),'tab_focus_toolbar':ed.getParam('theme_advanced_tab_focus_toolbar')});t.toolbarGroup=toolbarGroup;a=s.theme_advanced_toolbar_align.toLowerCase();a='mce'+t._ufirst(a);n=DOM.add(DOM.add(c,'tr',{role:'toolbar'}),'td',{'class':'mceToolbar '+a,"role":"toolbar"});for(i=1;(v=s['theme_advanced_buttons'+i]);i++){toolbarsExist=true;tb=cf.createToolbar("toolbar"+i,{'class':'mceToolbarRow'+i});if(s['theme_advanced_buttons'+i+'_add'])
v+=','+s['theme_advanced_buttons'+i+'_add'];if(s['theme_advanced_buttons'+i+'_add_before'])
v=s['theme_advanced_buttons'+i+'_add_before']+','+v;t._addControls(v,tb);toolbarGroup.add(tb);o.deltaHeight-=s.theme_advanced_row_height;}
if(!toolbarsExist){o.deltaHeight-=s.theme_advanced_row_height;}
var html=toolbarGroup.renderHTML();html=html.replace(/href="javascript:;"/gi,'href="#"');h.push(html);h.push(DOM.createHTML('a',{href:'#',accesskey:'z',title:ed.getLang("advanced.toolbar_focus"),onfocus:'tinyMCE.getInstanceById(\''+ed.id+'\').focus();'},'<!-- IE -->'));DOM.setHTML(n,h.join(''));},_addStatusBar:function(tb,o){var n,t=this,ed=t.editor,s=t.settings,r,mf,me,td;n=DOM.add(tb,'tr');n=td=DOM.add(n,'td',{'class':'mceStatusbar'});n=DOM.add(n,'div',{id:ed.id+'_path_row','role':'group','aria-labelledby':ed.id+'_path_voice','class':'mcePathRow'});if(s.theme_advanced_path){DOM.add(n,'span',{id:ed.id+'_path_voice','class':'mcePathLabel'},ed.translate('advanced.path')+': ');}else{DOM.add(n,'span',{},'&#160;');}
if(s.theme_advanced_resizing){DOM.add(td,'a',{id:ed.id+'_resize',href:'javascript:;',onclick:"return false;",'class':'mceResize',tabIndex:"-1"});if(s.theme_advanced_resizing_use_cookie){ed.onPostRender.add(function(){var o=Cookie.getHash("TinyMCE_"+ed.id+"_size"),c=DOM.get(ed.id+'_tbl');if(!o)
return;t.resizeTo(o.cw,o.ch);});}
ed.onPostRender.add(function(){Event.add(ed.id+'_resize','click',function(e){e.preventDefault();});Event.add(ed.id+'_resize','mousedown',function(e){var mouseMoveHandler1,mouseMoveHandler2,mouseUpHandler1,mouseUpHandler2,startX,startY,startWidth,startHeight,width,height,ifrElm;function resizeOnMove(e){e.preventDefault();width=startWidth+(e.screenX-startX);height=startHeight+(e.screenY-startY);t.resizeTo(width,height);}
function endResize(e){Event.remove(DOM.doc,'mousemove',mouseMoveHandler1);Event.remove(ed.getDoc(),'mousemove',mouseMoveHandler2);Event.remove(DOM.doc,'mouseup',mouseUpHandler1);Event.remove(ed.getDoc(),'mouseup',mouseUpHandler2);width=startWidth+(e.screenX-startX);height=startHeight+(e.screenY-startY);t.resizeTo(width,height,true);ed.nodeChanged();}
e.preventDefault();startX=e.screenX;startY=e.screenY;ifrElm=DOM.get(t.editor.id+'_ifr');startWidth=width=ifrElm.clientWidth;startHeight=height=ifrElm.clientHeight;mouseMoveHandler1=Event.add(DOM.doc,'mousemove',resizeOnMove);mouseMoveHandler2=Event.add(ed.getDoc(),'mousemove',resizeOnMove);mouseUpHandler1=Event.add(DOM.doc,'mouseup',endResize);mouseUpHandler2=Event.add(ed.getDoc(),'mouseup',endResize);});});}
o.deltaHeight-=21;n=tb=null;},_updateUndoStatus:function(ed){var cm=ed.controlManager,um=ed.undoManager;cm.setDisabled('undo',!um.hasUndo()&&!um.typing);cm.setDisabled('redo',!um.hasRedo());},_nodeChanged:function(ed,cm,n,co,ob){var t=this,p,de=0,v,c,s=t.settings,cl,fz,fn,fc,bc,formatNames,matches;tinymce.each(t.stateControls,function(c){cm.setActive(c,ed.queryCommandState(t.controls[c][1]));});function getParent(name){var i,parents=ob.parents,func=name;if(typeof(name)=='string'){func=function(node){return node.nodeName==name;};}
for(i=0;i<parents.length;i++){if(func(parents[i]))
return parents[i];}}
cm.setActive('visualaid',ed.hasVisual);t._updateUndoStatus(ed);cm.setDisabled('outdent',!ed.queryCommandState('Outdent'));var link=getParent('A');var img=getParent('IMG');function isLink(n){return!!n&&n.href&&(!n.name||!n.id);}
if(c=cm.get('unlink')){c.setDisabled(!isLink(link));c.setActive(isLink(link));}
if(s.theme_advanced_path&&s.theme_advanced_statusbar_location){p=DOM.get(ed.id+'_path')||DOM.add(ed.id+'_path_row','span',{id:ed.id+'_path','class':'mcePathPath'});if(t.statusKeyboardNavigation){t.statusKeyboardNavigation.destroy();t.statusKeyboardNavigation=null;}
DOM.setHTML(p,'');getParent(function(n){var na=n.nodeName.toLowerCase(),u,pi,ti='';if(n.nodeType!=1||na==='br'||n.getAttribute('data-mce-bogus')||DOM.hasClass(n,'mceItemHidden')||DOM.hasClass(n,'mceItemRemoved'))
return;if(tinymce.isIE&&n.scopeName&&n.scopeName!=='HTML')
na=n.scopeName+':'+na;na=na.replace(/mce\:/g,'');switch(na){case'b':na='strong';break;case'img':if(v=DOM.getAttrib(n,'src'))
ti+='src: '+v+' ';break;case'a':if(v=DOM.getAttrib(n,'href'))
ti+='href: '+v+' ';break;case'font':if(v=DOM.getAttrib(n,'face'))
ti+='font: '+v+' ';if(v=DOM.getAttrib(n,'size'))
ti+='size: '+v+' ';if(v=DOM.getAttrib(n,'color'))
ti+='color: '+v+' ';break;case'span':if(v=DOM.getAttrib(n,'style'))
ti+='style: '+v+' ';break;}
if(v=DOM.getAttrib(n,'id'))
ti+='id: '+v+' ';if(v=n.className){v=v.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,'');if(v){ti+='class: '+v+' ';if(ed.dom.isBlock(n)||na=='img'||na=='span')
na+='.'+v;}}
na=na.replace(/(html:)/g,'');na={name:na,node:n,title:ti};t.onResolveName.dispatch(t,na);ti=na.title;na=na.name;pi=DOM.create('a',{'href':"javascript:;",role:'button',onmousedown:"return false;",title:ti,'class':'mcePath_'+(de++)},na);if(p.hasChildNodes()){p.insertBefore(DOM.create('span',{'aria-hidden':'true'},'\u00a0\u00bb '),p.firstChild);p.insertBefore(pi,p.firstChild);}else
p.appendChild(pi);},ed.getBody());if(DOM.select('a',p).length>0){t.statusKeyboardNavigation=new tinymce.ui.KeyboardNavigation({root:ed.id+"_path_row",items:DOM.select('a',p),excludeFromTabOrder:true,onCancel:function(){ed.focus();}},DOM);}}},_sel:function(v){this.editor.execCommand('mceSelectNodeDepth',false,v);},_mceHelp:function(){var ed=this.editor;ed.windowManager.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=help&tmpl=component&lang='+ed.getParam('language')+'&section=editor&category=editor&article=about',width:780,height:560,inline:true,popup_css:false},{theme_url:this.url});},_mceNewDocument:function(){var ed=this.editor;ed.windowManager.confirm('advanced.newdocument',function(s){if(s)
ed.execCommand('mceSetContent',false,'');});},_ufirst:function(s){return s.substring(0,1).toUpperCase()+s.substring(1);}});tinymce.ThemeManager.add('advanced',tinymce.themes.AdvancedTheme);}(tinymce));(function(){tinymce.create('tinymce.plugins.AutolinkPlugin',{init:function(ed,url){var t=this;if(!ed.getParam('autolink_url',true)&&!ed.getParam('autolink_email',true)){return;}
ed.onKeyDown.addToTop(function(ed,e){if(e.keyCode==13)
return t.handleEnter(ed);});if(tinyMCE.isIE)
return;ed.onKeyPress.add(function(ed,e){if(e.which==41)
return t.handleEclipse(ed);});ed.onKeyUp.add(function(ed,e){if(e.keyCode==32)
return t.handleSpacebar(ed);});},handleEclipse:function(ed){this.parseCurrentLine(ed,-1,'(',true);},handleSpacebar:function(ed){this.parseCurrentLine(ed,0,'',true);},handleEnter:function(ed){this.parseCurrentLine(ed,-1,'',false);},parseCurrentLine:function(ed,end_offset,delimiter,goback){var r,end,start,endContainer,bookmark,text,matches,prev,len;r=ed.selection.getRng(true).cloneRange();if(r.startOffset<5){prev=r.endContainer.previousSibling;if(prev==null){if(r.endContainer.firstChild==null||r.endContainer.firstChild.nextSibling==null)
return;prev=r.endContainer.firstChild.nextSibling;}
len=prev.length;r.setStart(prev,len);r.setEnd(prev,len);if(r.endOffset<5)
return;end=r.endOffset;endContainer=prev;}else{endContainer=r.endContainer;if(endContainer.nodeType!=3&&endContainer.firstChild){while(endContainer.nodeType!=3&&endContainer.firstChild)
endContainer=endContainer.firstChild;if(endContainer.nodeType==3){r.setStart(endContainer,0);r.setEnd(endContainer,endContainer.nodeValue.length);}}
if(r.endOffset==1)
end=2;else
end=r.endOffset-1-end_offset;}
start=end;do
{r.setStart(endContainer,end>=2?end-2:0);r.setEnd(endContainer,end>=1?end-1:0);end-=1;}while(r.toString()!=' '&&r.toString()!=''&&r.toString().charCodeAt(0)!=160&&(end-2)>=0&&r.toString()!=delimiter);if(r.toString()==delimiter||r.toString().charCodeAt(0)==160){r.setStart(endContainer,end);r.setEnd(endContainer,start);end+=1;}else if(r.startOffset==0){r.setStart(endContainer,0);r.setEnd(endContainer,start);}
else{r.setStart(endContainer,end);r.setEnd(endContainer,start);}
var text=r.toString();if(text.charAt(text.length-1)=='.'){r.setEnd(endContainer,start-1);}
text=r.toString();matches=text.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+-]+@)(.+)$/i);if(matches){if(matches[1]=='www.'){matches[1]='http://www.';if(!ed.getParam('autolink_url',true)){return;}}else if(/@$/.test(matches[1])&&!/^mailto:/.test(matches[1])){matches[1]='mailto:'+matches[1];if(!ed.getParam('autolink_email',true)){return;}}else{if(!ed.getParam('autolink_url',true)){return;}}
bookmark=ed.selection.getBookmark();ed.selection.setRng(r);tinyMCE.execCommand('createlink',false,matches[1]+matches[2]);ed.selection.moveToBookmark(bookmark);ed.nodeChanged();if(tinyMCE.isWebKit){ed.selection.collapse(false);var max=Math.min(endContainer.length,start+1);r.setStart(endContainer,max);r.setEnd(endContainer,max);ed.selection.setRng(r);}}},getInfo:function(){return{longname:'Autolink',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('autolink',tinymce.plugins.AutolinkPlugin);})();(function(){var each=tinymce.each,extend=tinymce.extend,Node=tinymce.html.Node;function split(str,delim){return str.split(delim||',');}
var fontIconRe=/<([a-z0-9]+)([^>]+)class="([^"]*)(glyph|uk-)?(fa|icon)-([\w-]+)([^"]*)"([^>]*)>(&nbsp;|\u00a0)?<\/\1>/gi;var emptyRx=/<(ol|ul|sub|sup|blockquote|span|font|a|table|tbody|tr|strong|em|b|i)\b([^>]+)><\/\1>/gi;var paddedRx=/<(p|h1|h2|h3|h4|h5|h6|pre|div|address|caption)\b([^>]+)>(&nbsp;|\u00a0)<\/\1>/gi;tinymce.create('tinymce.plugins.CleanupPlugin',{init:function(ed,url){var self=this;this.editor=ed;if(ed.settings.verify_html===false){ed.settings.validate=false;}
ed.onPreInit.add(function(){if(ed.settings.validate){var elements=ed.schema.elements;if(!ed.getParam('pad_empty_tags',true)){each(elements,function(v,k){if(v.paddEmpty){v.paddEmpty=false;}});}
if(!ed.getParam('table_pad_empty_cells',true)){elements['th'].paddEmpty=false;elements['td'].paddEmpty=false;}}
if(ed.settings.validate){var invalidAttribValue=ed.getParam('invalid_attribute_values','');if(invalidAttribValue){function replaceAttributeValue(nodes,name,re){var i=nodes.length,node;while(i--){node=nodes[i];if(new RegExp(re).test(node.attr(name))){node.attr(name,"");if(name==='src'||name==='href'){node.attr('data-mce-'+name,"");}}}}
each(tinymce.explode(invalidAttribValue),function(item){var re,matches=/([a-z\*]+)\[([a-z]+)([\^\$]?=)["']([^"']+)["']\]/i.exec(item);if(matches&&matches.length==5){var tag=matches[1],attrib=matches[2],expr=matches[3],value=matches[4];switch(expr){default:case'=':re='('+value+')';break;case'!=':re='(^'+value+')';break;case'^=':re='^('+value+')';break;case'$=':re='('+value+')$';break;}
if(tag=='*'){ed.parser.addAttributeFilter(attrib,function(nodes,name){replaceAttributeValue(nodes,name,re);});}else{ed.parser.addNodeFilter(tag,function(nodes,name){replaceAttributeValue(nodes,attrib,re);});}}});}}else{ed.serializer.addNodeFilter(ed.settings.invalid_elements,function(nodes,name){var i=nodes.length,node;if(ed.schema.isValidChild('body',name)){while(i--){node=nodes[i];node.remove();}}});ed.parser.addNodeFilter(ed.settings.invalid_elements,function(nodes,name){var i=nodes.length,node;if(ed.schema.isValidChild('body',name)){while(i--){node=nodes[i];if(name==='span'&&node.attr('data-mce-type')){continue;}
node.unwrap();}}});}
ed.parser.addNodeFilter('a,i,span',function(nodes,name){var i=nodes.length,node,cls;while(i--){node=nodes[i],cls=node.attr('class');if(cls&&!node.firstChild){node.attr('data-mce-bootstrap','1');node.append(new Node('#text','3')).value='\u00a0';}}});ed.serializer.addAttributeFilter('data-mce-bootstrap',function(nodes,name){var i=nodes.length,node,fc;while(i--){node=nodes[i],fc=node.firstChild;node.attr('data-mce-bootstrap',null);if(fc&&(fc.value==='\u00a0'||fc.value==='&nbsp;')){fc.remove();}}});ed.parser.addAttributeFilter('onclick,ondblclick',function(nodes,name){var i=nodes.length,node;while(i--){node=nodes[i];node.attr('data-mce-'+name,node.attr(name));node.attr(name,null);}});ed.serializer.addAttributeFilter('data-mce-onclick,data-mce-ondblclick',function(nodes,name){var i=nodes.length,node,k;while(i--){node=nodes[i],k=name.replace('data-mce-','');node.attr(k,node.attr(name));node.attr(name,null);}});ed.serializer.addNodeFilter('br',function(nodes,name){var i=nodes.length,node,k;if(i){while(i--){node=nodes[i];if(node.parent&&node.parent.name==="body"&&!node.prev){node.remove();}}}});ed.parser.addNodeFilter('br',function(nodes,name){var i=nodes.length,node,k;if(i){while(i--){node=nodes[i];if(node.parent&&node.parent.name==="body"&&!node.prev){node.remove();}}}});});if(ed.settings.validate===false&&ed.settings.verify_html===false){ed.addCommand('mceCleanup',function(){var s=ed.settings,se=ed.selection,bm;bm=se.getBookmark();var content=ed.getContent({cleanup:true});var schema=new tinymce.html.Schema({validate:true,verify_html:true,valid_styles:s.valid_styles,valid_children:s.valid_children,custom_elements:s.custom_elements,extended_valid_elements:s.extended_valid_elements});content=new tinymce.html.Serializer({validate:true},schema).serialize(new tinymce.html.DomParser({validate:true},schema).parse(content));ed.setContent(content,{cleanup:true});se.moveToBookmark(bm);});}
ed.onBeforeSetContent.add(function(ed,o){o.content=o.content.replace(/^<br>/,'');o.content=self.convertFromGeshi(o.content);if(ed.settings.validate){if(ed.getParam('invalid_attributes')){var s=ed.getParam('invalid_attributes','');o.content=o.content.replace(new RegExp('<([^>]+)('+s.replace(/,/g,'|')+')="([^"]+)"([^>]*)>','gi'),'<$1$4>');}}
o.content=o.content.replace(fontIconRe,'<$1$2class="$3$4$5-$6$7"$8>&nbsp;</$1>');o.content=o.content.replace(/<(a|i|span)([^>]+)><\/\1>/gi,'<$1$2>&nbsp;</$1>');});ed.onPostProcess.add(function(ed,o){if(o.set){o.content=self.convertFromGeshi(o.content);}
if(o.get){o.content=self.convertToGeshi(o.content);o.content=o.content.replace(/<a([^>]*)class="jce(box|popup|lightbox|tooltip|_tooltip)"([^>]*)><\/a>/gi,'');o.content=o.content.replace(/<span class="jce(box|popup|lightbox|tooltip|_tooltip)">(.*?)<\/span>/gi,'$2');o.content=o.content.replace(/_mce_(src|href|style|coords|shape)="([^"]+)"\s*?/gi,'');if(ed.settings.validate===false){o.content=o.content.replace(/<body([^>]*)>([\s\S]*)<\/body>/,'$2');if(!ed.getParam('remove_tag_padding')){o.content=o.content.replace(/<(p|h1|h2|h3|h4|h5|h6|th|td|pre|div|address|caption)\b([^>]*)><\/\1>/gi,'<$1$2>&nbsp;</$1>');}}
if(!ed.getParam('table_pad_empty_cells',true)){o.content=o.content.replace(/<(th|td)([^>]*)>(&nbsp;|\u00a0)<\/\1>/gi,'<$1$2></$1>');}
o.content=o.content.replace(fontIconRe,'<$1$2class="$3$4$5-$6$7"$8></$1>');o.content=o.content.replace(/<(a|i|span)([^>]+)>(&nbsp;|\u00a0)<\/\1>/gi,'<$1$2></$1>');if(ed.getParam('remove_div_padding')){o.content=o.content.replace(/<div([^>]*)>(&nbsp;|\u00a0)<\/div>/g,'<div$1></div>');}
if(ed.getParam('pad_empty_tags',true)===false){o.content=o.content.replace(paddedRx,'<$1$2></$1>');}}});ed.onSaveContent.add(function(ed,o){if(ed.getParam('cleanup_pluginmode')){var entities={'&#39;':"'",'&amp;':'&','&quot;':'"','&apos;':"'"};o.content=o.content.replace(/&(#39|apos|amp|quot);/gi,function(a){return entities[a];});}});ed.addButton('cleanup',{title:'advanced.cleanup_desc',cmd:'mceCleanup'});},convertFromGeshi:function(h){h=h.replace(/<pre xml:lang="([^"]+)"([^>]*)>(.*?)<\/pre>/g,function(a,b,c,d){var attr='';if(c&&/\w/.test(c)){attr=c.split(' ').join(' data-geshi-');}
return'<pre data-geshi-lang="'+b+'"'+attr+'>'+d+'</pre>';});return h;},convertToGeshi:function(h){h=h.replace(/<pre([^>]+)data-geshi-lang="([^"]+)"([^>]*)>(.*?)<\/pre>/g,function(a,b,c,d,e){var s=b+d;s=s.replace(/data-geshi-/gi,'').replace(/\s+/g,' ').replace(/\s$/,'');return'<pre xml:lang="'+c+'"'+s+'>'+e+'</pre>';});return h;},getInfo:function(){return{longname:'Cleanup',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('cleanup',tinymce.plugins.CleanupPlugin);})();(function(){var each=tinymce.each,JSON=tinymce.util.JSON,Node=tinymce.html.Node,Entities=tinymce.html.Entities;var VK=tinymce.VK,BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE;tinymce.create('tinymce.plugins.CodePlugin',{init:function(ed,url){var self=this;this.editor=ed;this.url=url;function isCode(n){return ed.dom.is(n,'.mceItemScript, .mceItemStyle, .mceItemPhp, .mcePhp');}
ed.onNodeChange.add(function(ed,cm,n,co){ed.dom.removeClass(ed.dom.select('.mceItemSelected'),'mceItemSelected');if(isCode(n)){ed.dom.addClass(n,'mceItemSelected');}});ed.onKeyDown.add(function(ed,e){if(e.keyCode===BACKSPACE||e.keyCode===DELETE){self._removeCode(e);}});ed.onPreInit.add(function(){if(ed.getParam('code_style')){ed.schema.addValidElements('style[scoped|*]');ed.schema.addValidChildren('+body[style]');}
ed.parser.addNodeFilter('script,style',function(nodes){for(var i=0,len=nodes.length;i<len;i++){self._serializeSpan(nodes[i]);}});ed.parser.addNodeFilter('noscript',function(nodes){for(var i=0,len=nodes.length;i<len;i++){self._serializeNoScript(nodes[i]);}});ed.serializer.addNodeFilter('script,div,span',function(nodes,name,args){for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];if(node.name=='span'&&/mceItemScript/.test(node.attr('class'))){self._buildScript(node);}
if(node.name=='span'&&/mceItemStyle/.test(node.attr('class'))){self._buildStyle(node);}
if(node.name=='div'&&node.attr('data-mce-type')=='noscript'){self._buildNoScript(node);}}});});ed.onInit.add(function(){if(ed.theme&&ed.theme.onResolveName){ed.theme.onResolveName.add(function(theme,o){var cls=o.node.className;if(o.name==='span'&&/mceItemScript/.test(cls)){o.name='script';}
if(o.name==='span'&&/mceItemStyle/.test(cls)){o.name='style';}
if(o.name==='span'&&/mcePhp/.test(cls)){o.name='php';}});}
if(ed.settings.content_css!==false)
ed.dom.loadCSS(url+"/css/content.css");});ed.onBeforeSetContent.add(function(ed,o){if(/<(\?|script|style)/.test(o.content)){if(!ed.getParam('code_script')){o.content=o.content.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,'');}
if(!ed.getParam('code_style')){o.content=o.content.replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,'');}
if(!ed.getParam('code_php')){o.content=o.content.replace(/<\?(php)?([\s\S]*?)\?>/gi,'');}
o.content=o.content.replace(/\="([^"]+?)"/g,function(a,b){b=b.replace(/<\?(php)?(.+?)\?>/gi,function(x,y,z){return'{php:start}'+ed.dom.encode(z)+'{php:end}';});return'="'+b+'"';});if(/<textarea/.test(o.content)){o.content=o.content.replace(/<textarea([^>]*)>([\s\S]*?)<\/textarea>/gi,function(a,b,c){c=c.replace(/<\?(php)?(.+?)\?>/gi,function(x,y,z){return'{php:start}'+ed.dom.encode(z)+'{php:end}';});return'<textarea'+b+'>'+c+'</textarea>';});}
o.content=o.content.replace(/<([^>]+)<\?(php)?(.+?)\?>([^>]*?)>/gi,function(a,b,c,d,e){if(b.charAt(b.length)!==' '){b+=' ';}
return'<'+b+'data-mce-php="'+d+'" '+e+'>';});o.content=o.content.replace(/<\?(php)?([\s\S]+?)\?>/gi,'<span class="mcePhp" data-mce-type="php"><!--$2-->\u00a0</span>');o.content=o.content.replace(/<script([^>]+)><\/script>/gi,'<script$1>\u00a0</script>');o.content=o.content.replace(/<(script|style)([^>]*)>/gi,function(a,b,c){if(c.indexOf('data-mce-type')===-1){if(c.indexOf('type')===-1){var type=(b==="script")?"javascript":"css";c+=' data-mce-type="text/'+type+'"';}else{c=c.replace(/type="([^"]+)"/i,'data-mce-type="$1"');}}
return'<'+b+c+'>';});}});ed.onPostProcess.add(function(ed,o){if(o.get){if(/(mcePhp|data-mce-php|\{php:start\})/.test(o.content)){o.content=o.content.replace(/\{php:start\}([^\{]+)\{php:end\}/g,function(a,b){return'<?php'+ed.dom.decode(b)+'?>';});o.content=o.content.replace(/<textarea([^>]*)>([\s\S]*?)<\/textarea>/gi,function(a,b,c){if(/&lt;\?php/.test(c)){c=ed.dom.decode(c);}
return'<textarea'+b+'>'+c+'</textarea>';});o.content=o.content.replace(/data-mce-php="([^"]+?)"/g,function(a,b){return'<?php'+ed.dom.decode(b)+'?>';});o.content=o.content.replace(/<span([^>]+)class="mcePhp"([^>]+)><!--([\s\S]*?)-->(&nbsp;|\u00a0)<\/span>/g,function(a,b,c,d){return'<?php'+ed.dom.decode(d)+'?>';});}
o.content=o.content.replace(/<(script|style)([^>]*)>/gi,function(a,b,c){c=c.replace(/\s?data-mce-type="[^"]+"/gi,"");return'<'+b+c+'>';});}});},_removeCode:function(e){var ed=this.editor,s=ed.selection,n=s.getNode();if(ed.dom.is(n,'.mceItemScript, .mceItemStyle, .mceItemPhp, .mcePhp')){ed.undoManager.add();ed.dom.remove(n);if(e){e.preventDefault();}}},_convertCurlyCode:function(content){content=content.replace(/\{([^\}]+)\}([\s\S]+?)\{\/\1\}/,'<span class="mceItemCurlyCode" data-mce-type="code-item">{$1}$2{/$1}</span>');content=content.replace(/\{([^\}]+)\}/,'<span class="mceItemCurlyCode" data-mce-type="code-item">{$1}</span>');},_buildScript:function(n){var self=this,ed=this.editor,v,node,text,p;if(!n.parent)
return;if(n.firstChild){v=n.firstChild.value;}
p=JSON.parse(n.attr('data-mce-json'))||{};if(!p.type){p.type=n.attr('data-mce-type')||'text/javascript';}
node=new Node('script',1);if(v){v=tinymce.trim(v);if(v){text=new Node('#text',3);text.raw=true;if(ed.getParam('code_cdata',true)&&p.type==="text/javascript"){v='// <![CDATA[\n'+self._clean(tinymce.trim(v))+'\n// ]]>';}
text.value=v;node.append(text);}}
each(p,function(v,k){if(k==="type"){v=v.replace(/mce-/,'');}
node.attr(k,v);});node.attr('data-mce-type',p.type);n.replace(node);return true;},_buildStyle:function(n){var self=this,ed=this.editor,v,node,text,p;if(!n.parent)
return;if(n.firstChild){v=n.firstChild.value;}
p=JSON.parse(n.attr('data-mce-json'))||{};if(!p.type){p.type='text/css';}
node=new Node('style',1);if(v){v=tinymce.trim(v);if(v){text=new Node('#text',3);text.raw=true;if(ed.getParam('code_cdata',true)){v='<!--\n'+self._clean(tinymce.trim(v))+'\n-->';}
text.value=v;node.append(text);}}
if(n.parent.name==='head'){p.scoped=null;}else{p.scoped="scoped";}
each(p,function(v,k){if(k==="type"){v=v.replace(/mce-/,'');}
node.attr(k,v);});node.attr('data-mce-type',p.type);n.replace(node);return true;},_buildNoScript:function(n){var self=this,ed=this.editor,p,node;if(!n.parent)
return;p=JSON.parse(n.attr('data-mce-json'))||{};node=new Node('noscript',1);each(p,function(v,k){node.attr(k,v);});n.wrap(node);n.unwrap();return true;},_serializeSpan:function(n){var self=this,ed=this.editor,dom=ed.dom,v,k,p={};if(!n.parent)
return;each(n.attributes,function(at){if(at.name.indexOf('data-mce-')!==-1)
return;p[at.name]=at.value;});var span=new Node('span',1);span.attr('class','mceItem'+this._ucfirst(n.name));span.attr('data-mce-json',JSON.serialize(p));span.attr('data-mce-type',n.attr('data-mce-type')||p.type);v=n.firstChild?n.firstChild.value:'';if(v.length){var text=new Node('#comment',8);text.value=this._clean(v);span.append(text);}
span.append(new tinymce.html.Node('#text',3)).value='\u00a0';n.replace(span);},_serializeNoScript:function(n){var self=this,ed=this.editor,dom=ed.dom,v,k,p={};if(!n.parent)
return;each(n.attributes,function(at){if(at.name=='type')
return;p[at.name]=at.value;});var div=new Node('div',1);div.attr('data-mce-json',JSON.serialize(p));div.attr('data-mce-type',n.name);n.wrap(div);n.unwrap();},_ucfirst:function(s){return s.charAt(0).toUpperCase()+s.substring(1);},_clean:function(s){s=s.replace(/(\/\/\s+<!\[CDATA\[)/gi,'\n');s=s.replace(/(<!--\[CDATA\[|\]\]-->)/gi,'\n');s=s.replace(/^[\r\n]*|[\r\n]*$/g,'');s=s.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/gi,'');s=s.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,'');return s;},getInfo:function(){return{longname:'Code',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('code',tinymce.plugins.CodePlugin);})();(function(){tinymce.create('tinymce.plugins.ColorPicker',{init:function(ed,url){this.editor=ed;ed.addCommand('mceColorPicker',function(ui,v){ed.windowManager.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=colorpicker',width:375+parseInt(ed.getLang('advanced.colorpicker_delta_width',0)),height:310+parseInt(ed.getLang('advanced.colorpicker_delta_height',0)),close_previous:false,inline:true,popup_css:false},{input_color:v.color,func:v.func});});}});tinymce.PluginManager.add('colorpicker',tinymce.plugins.ColorPicker);})();(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,is=tinymce.is,each=tinymce.each,VK=tinymce.VK;tinyMCE.onAddEditor.add(function(mgr,ed){if(tinymce.isMac&&tinymce.isGecko&&!tinymce.isIE11){ed.onKeyDown.add(function(ed,e){if(VK.metaKeyPressed(e)&&!e.shiftKey&&(e.keyCode==37||e.keyCode==39)){ed.selection.getSel().modify('move',e.keyCode==37?'backward':'forward','word');e.preventDefault();}});}});tinymce.util.PreviewCss=function(ed,fmt){var name,previewElm,dom=ed.dom,previewCss='',parentFontSize,previewStylesName;var previewStyles=ed.settings.preview_styles;if(previewStyles===false)
return'';if(!previewStyles)
previewStyles='font-family font-size font-weight text-decoration text-transform color background-color';function removeVars(val){return val.replace(/%(\w+)/g,'');}
name=fmt.block||fmt.inline||'span';previewElm=dom.create(name);each(fmt.styles,function(value,name){value=removeVars(value);if(value)
dom.setStyle(previewElm,name,value);});each(fmt.attributes,function(value,name){value=removeVars(value);if(value)
dom.setAttrib(previewElm,name,value);});each(fmt.classes,function(value){value=removeVars(value);if(!dom.hasClass(previewElm,value))
dom.addClass(previewElm,value);});dom.setStyles(previewElm,{position:'absolute',left:-0xFFFF});ed.getBody().appendChild(previewElm);parentFontSize=dom.getStyle(ed.getBody(),'fontSize',true);parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0;each(previewStyles.split(' '),function(name){var value=dom.getStyle(previewElm,name,true);if(name=='background-color'&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)){value=dom.getStyle(ed.getBody(),name,true);if(dom.toHex(value).toLowerCase()=='#ffffff'){return;}}
if(name=='font-size'){if(/em|%$/.test(value)){if(parentFontSize===0){return;}
value=parseFloat(value,10)/(/%$/.test(value)?100:1);value=(value*parentFontSize)+'px';}}
previewCss+=name+':'+value+';';});dom.remove(previewElm);return previewCss;};tinymce.create('tinymce.ui.ButtonDialog:tinymce.ui.Button',{ButtonDialog:function(id,s,ed){this.parent(id,s,ed);this.settings=s=tinymce.extend({content:'',buttons:[]},this.settings);this.editor=ed;this.onRenderDialog=new tinymce.util.Dispatcher(this);this.onShowDialog=new tinymce.util.Dispatcher(this);this.onHideDialog=new tinymce.util.Dispatcher(this);s.dialog_container=s.dialog_container||DOM.doc.body;},showDialog:function(){var t=this,ed=this.editor,s=this.settings,p1,p2,e=DOM.get(t.id),m;if(t.isDisabled())
return;this.storeSelection();if(!t.isDialogRendered){t.renderDialog();}
if(t.isDialogVisible)
return t.hideDialog();DOM.show(t.id+'_dialog');if(s.url){var iframe=DOM.get(t.id+'_iframe');iframe.src=s.url;}
p2=DOM.getPos(e);DOM.setStyles(t.id+'_dialog',{left:p2.x,top:p2.y+e.clientHeight+5,zIndex:200000});e=0;if(this.isActive()){DOM.addClass(t.id+'_dialog',this.classPrefix+'DialogActive');}else{DOM.removeClass(t.id+'_dialog',this.classPrefix+'DialogActive');}
Event.add(ed.getDoc(),'mousedown',t.hideDialog,t);Event.add(DOM.doc,'mousedown',function(e){var n=e.target;while(n){if(n==DOM.getRoot()||!n.nodeType||n.nodeType===9){break;}
if(n==DOM.get(t.id+'_dialog')){return;}
n=n.parentNode;}
t.hideDialog();});t.onShowDialog.dispatch(t);if(t._focused){t._keyHandler=Event.add(t.id+'_dialog','keydown',function(e){if(e.keyCode==27)
t.hideDialog();});}
t.isDialogVisible=1;},storeSelection:function(){if(tinymce.isIE){this.editor.focus();this.bookmark=this.editor.selection.getBookmark(1);}},restoreSelection:function(){if(this.bookmark){this.editor.selection.moveToBookmark(this.bookmark);this.editor.focus();}
this.bookmark=0;},renderDialog:function(){var t=this,m,s=this.settings,w,v,ed=this.editor;s['class']+=' '+ed.getParam('skin')+'Skin';if(v=ed.getParam('skin_variant')){s['class']+=' '+ed.getParam('skin')+'Skin'+v.substring(0,1).toUpperCase()+v.substring(1);}
s['class']+=ed.settings.directionality=="rtl"?' mceRtl':'';w=DOM.add(s.dialog_container,'div',{role:'presentation',id:t.id+'_dialog','class':s['class'],style:'position:absolute;left:0;top:-1000px;'});w=DOM.add(w,'div',{'class':this.classPrefix+'Dialog'});m=DOM.add(w,'div',{'class':this.classPrefix+'DialogContent'});if(s.width){DOM.setStyle(w,'width',s.width);}
if(tinymce.is(s.content,'string')){DOM.setHTML(m,s.content);}else{DOM.add(m,s.content);}
if(s.url){DOM.add(m,'iframe',{'id':t.id+'_iframe','src':s.url,style:{'border':0,'width':'100%','height':'100%'},onload:function(){t.isDialogRendered=true;t.onRenderDialog.dispatch(t);}});}
m=DOM.add(w,'div',{'class':this.classPrefix+'DialogButtons'});each(s.buttons,function(o){var btn=DOM.add(m,'a',{'class':'mceDialogButton','id':t.id+'_button_'+o.id},o.title||'');if(o.click){Event.add(btn,'click',function(e){t.restoreSelection();var s=o.click.call(o.scope||t,e);if(s){t.hideDialog();}});};});if(!s.url){t.isDialogRendered=true;t.onRenderDialog.dispatch(t);}
return w;},setButtonDisabled:function(button,state){var id=this.id+'_button_'+button;if(state){DOM.addClass(id,'disabled');}else{DOM.removeClass(id,'disabled');}},setButtonLabel:function(button,label){DOM.setHTML(this.id+'_button_'+button,label);},hideDialog:function(e){var t=this;if(e&&e.type=="mousedown"&&DOM.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+'_open';}))
return;if(!e||!DOM.getParent(e.target,'.mceDialog')){t.setState('Selected',0);Event.remove(DOM.doc,'mousedown',t.hideDialog,t);DOM.hide(t.id+'_dialog');}
t.isDialogVisible=0;t.onHideDialog.dispatch(t);},postRender:function(){var t=this,s=t.settings,bm,ed=this.editor;Event.add(t.id,'click',function(){if(!t.isDisabled()){if(s.onclick)
s.onclick(t.value);t.showDialog();}});},destroy:function(){this.parent();Event.clear(this.id+'_dialog');DOM.remove(this.id+'_dialog');}});})(tinymce);(function(){var VK=tinymce.VK,each=tinymce.each,map=tinymce.map;var blocks=[];tinymce.create('tinymce.plugins.FormatPlugin',{init:function(ed,url){var self=this;this.editor=ed;function isBlock(n,s){return ed.dom.isBlock(n);}
ed.onPreInit.add(function(ed){each(ed.schema.getBlockElements(),function(v,k){blocks.push(k.toLowerCase());});each('aside figure dl'.split(/\s/),function(name){ed.formatter.register(name,{block:name,remove:'all',wrapper:true});});ed.formatter.register('div_container',{block:'div',remove:'all',wrapper:true});ed.formatter.register('span',{inline:'span',remove:'all'});ed.formatter.register('section',{block:'section',remove:'all',wrapper:true,merge_siblings:false});ed.formatter.register('article',{block:'article',remove:'all',wrapper:true,merge_siblings:false});ed.formatter.register('code',{inline:'code',remove:'all'});ed.formatter.register('samp',{inline:'samp',remove:'all'});});ed.settings.removeformat=[{selector:'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q',remove:'all',split:true,expand:false,block_expand:true,deep:true}];ed.onKeyDown.add(function(ed,e){if((e.keyCode===VK.ENTER||e.keyCode===VK.UP)&&e.altKey){self._clearBlocks(ed,e);}});ed.onKeyUp.addToTop(function(ed,e){if(e.keyCode===VK.ENTER){var n=ed.selection.getNode();if(n.nodeName==='DIV'&&ed.settings.force_p_newlines){if(ed.settings.keep_styles===false){ed.dom.removeAllAttribs(n);}
ed.formatter.apply('p');}}});ed.onBeforeExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode(),p;switch(cmd){case'FormatBlock':if(!v){o.terminate=true;if(n===ed.getBody()){return;}
ed.undoManager.add();p=ed.dom.getParent(n,blocks.join(','))||'';if(p){ed.formatter.toggle(p.nodeName.toLowerCase());}
var cm=ed.controlManager.get('formatselect');if(cm){cm.select(p);}}
break;case'RemoveFormat':if(!v){if(ed.dom.iBlock(n)){ed.undoManager.add();p=ed.dom.getParent(n,blocks.join(','));if(p){ed.formatter.toggle(p.nodeName.toLowerCase());}
var cm=ed.controlManager.get('formatselect');if(cm){cm.select(p);}}else{var cm=ed.controlManager.get('styleselect');if(cm&&cm.selectedValue){ed.formatter.remove(cm.selectedValue);}}}
break;}});ed.onExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode();switch(cmd){case'FormatBlock':if(v==='dt'||v==='dd'){if(n&&n.nodeName!=='DL'){ed.formatter.apply('dl');}}
break;}});ed.onPreInit.add(function(){function wrapList(node){var sibling=node.prev;if(node.parent&&node.parent.name==='dl'){return;}
if(sibling&&(sibling.name==='dl'||sibling.name==='dl')){sibling.append(node);return;}
sibling=node.next;if(sibling&&(sibling.name==='dl'||sibling.name==='dl')){sibling.insert(node,sibling.firstChild,true);return;}
node.wrap(ed.parser.filterNode(new tinymce.html.Node('dl',1)));}
ed.parser.addNodeFilter('dt,dd',function(nodes){for(var i=0,len=nodes.length;i<len;i++){wrapList(nodes[i]);}});ed.serializer.addNodeFilter('dt,dd',function(nodes){for(var i=0,len=nodes.length;i<len;i++){wrapList(nodes[i]);}});});},_clearBlocks:function(ed,e){var p,n=ed.selection.getNode();p=ed.dom.getParents(n,blocks.join(','));if(p&&p.length>1){var tag=ed.getParam('forced_root_block','p');if(!tag){tag=ed.getParam('force_p_newlines')?'p':'br';}
e.preventDefault();var block=p[p.length-1];if(block===ed.getBody()){return;}
var el=ed.dom.create(tag,{},'\u00a0');if(e.keyCode===VK.ENTER){ed.dom.insertAfter(el,block);}else{block.parentNode.insertBefore(el,block);}
ed.selection.select(el);ed.selection.collapse(1);}},getInfo:function(){return{longname:'Format',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('format',tinymce.plugins.FormatPlugin);})();(function(){var each=tinymce.each,extend=tinymce.extend,JSON=tinymce.util.JSON;var isWin=navigator.platform.indexOf('Win')!==-1,isSafari=tinymce.isWebKit&&navigator.vendor.indexOf('Apple')!==-1;var Node=tinymce.html.Node;var mimes={};function toArray(list){return Array.prototype.slice.call(list||[],0);}
(function(mime_data){var items=mime_data.split(/,/),i,y,ext;for(i=0;i<items.length;i+=2){ext=items[i+1].split(/ /);for(y=0;y<ext.length;y++){mimes[ext[y]]=items[i];}}})("application/msword,doc dot,"+"application/pdf,pdf,"+"application/pgp-signature,pgp,"+"application/postscript,ps ai eps,"+"application/rtf,rtf,"+"application/vnd.ms-excel,xls xlb,"+"application/vnd.ms-powerpoint,ppt pps pot,"+"application/zip,zip,"+"application/x-shockwave-flash,swf swfl,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,"+"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,"+"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,"+"application/vnd.openxmlformats-officedocument.presentationml.template,potx,"+"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,"+"application/x-javascript,js,"+"application/json,json,"+"audio/mpeg,mpga mpega mp2 mp3,"+"audio/x-wav,wav,"+"audio/mp4,m4a,"+"image/bmp,bmp,"+"image/gif,gif,"+"image/jpeg,jpeg jpg jpe,"+"image/photoshop,psd,"+"image/png,png,"+"image/svg+xml,svg svgz,"+"image/tiff,tiff tif,"+"text/plain,asc txt text diff log,"+"text/html,htm html xhtml,"+"text/css,css,"+"text/csv,csv,"+"text/rtf,rtf,"+"video/mpeg,mpeg mpg mpe,"+"video/quicktime,qt mov,"+"video/mp4,mp4,"+"video/x-m4v,m4v,"+"video/x-flv,flv,"+"video/x-ms-wmv,wmv,"+"video/avi,avi,"+"video/webm,webm,"+"video/vnd.rn-realvideo,rv,"+"application/vnd.oasis.opendocument.formula-template,otf,"+"application/octet-stream,exe");var state={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400}
tinymce.create('tinymce.plugins.Upload',{files:[],plugins:[],init:function(ed,url){function cancel(){ed.dom.bind(ed.getBody(),'dragover',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});}
var self=this;self.editor=ed;self.plugin_url=url;ed.onPreInit.add(function(){each(ed.plugins,function(o,k){if(ed.getParam(k+'_upload')&&tinymce.is(o.getUploadURL,'function')&&tinymce.is(o.insertUploadedFile,'function')){self.plugins.push(o);}});if(!ed.settings.compress.css){ed.dom.loadCSS(url+"/css/content.css");}
ed.parser.addNodeFilter('img',function(nodes){var i=nodes.length,node,cls,data;while(i--){node=nodes[i],cls=node.attr('class'),data=node.attr('data-mce-upload-marker');if((cls&&cls.indexOf('upload-placeholder')!=-1)||data){if(self.plugins.length==0){node.remove();}else{self._createUploadMarker(node);}}}});ed.serializer.addNodeFilter('img',function(nodes){var i=nodes.length,node,cls;while(i--){node=nodes[i],cls=node.attr('class');if(cls&&/mceItemUploadMarker/.test(cls)){cls=cls.replace(/(?:^|\s)mceItem(Upload|UploadMarker)(?!\S)/g,'');cls+=' upload-placeholder';node.attr({'data-mce-src':'media/jce/img/placeholder.png','class':tinymce.trim(cls)});}}});});ed.onInit.add(function(){if(!window.FormData){cancel();return;}
if(self.plugins.length==0){cancel();return;}
function bindUploadEvents(ed){each(ed.dom.select('img.mceItemUploadMarker',ed.getBody()),function(n){if(self.plugins.length==0){ed.dom.remove(n);}else{self._bindUploadMarkerEvents(ed,n);}});}
ed.selection.onSetContent.add(function(){bindUploadEvents(ed);});ed.onSetContent.add(function(){bindUploadEvents(ed);});if(ed.onFullScreen){ed.onFullScreen.add(function(editor){bindUploadEvents(editor);});}
if(isSafari&&isWin){ed.dom.bind(ed.getBody(),'dragenter',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){var dropInputElm;dropInputElm=ed.dom.get(ed.getBody().id+"_dragdropupload");if(!dropInputElm){dropInputElm=ed.dom.add(ed.getBody(),"input",{'type':'file','id':ed.getBody().id+"_dragdropupload",'multiple':'multiple','style':{position:'absolute',display:'block',top:0,left:0,width:'100%',height:'100%',opacity:'0'}});}
ed.dom.bind(dropInputElm,'change',function(e){each(dropInputElm.files,function(file){if(tinymce.inArray(self.files,file)==-1){self.addFile(file);}});ed.dom.unbind(dropInputElm,'change');ed.dom.remove(dropInputElm);each(self.files,function(file){self.upload(file);});});}});ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});return;}
if(window.Opera){return;}
function cancelEvent(e){e.preventDefault();e.stopPropagation();}
if(tinymce.isIE||tinymce.isIE11){ed.dom.bind(ed.getBody(),'dragover',cancelEvent);}
ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){each(dataTransfer.files,function(file){self.addFile(file);});cancelEvent(e);}
if(self.files.length){each(self.files,function(file){self.upload(file);});}
if(tinymce.isGecko&&e.target.nodeName=='IMG'){cancelEvent(e);}});});self.FilesAdded=new tinymce.util.Dispatcher(this);self.UploadProgress=new tinymce.util.Dispatcher(this);self.FileUploaded=new tinymce.util.Dispatcher(this);self.UploadError=new tinymce.util.Dispatcher(this);this.settings={multipart:true,multi_selection:true,file_data_name:'file',filters:[]};self.FileUploaded.add(function(file,o){var n=file.marker,s,w,h;function showError(error){ed.windowManager.alert(error||ed.getLang('upload.response_error','Invalid Upload Response'));ed.dom.remove(n);return false;}
if(n){if(o&&o.response){var r=JSON.parse(o.response);if(!r){return showError();}
if(r.error){var txt=r.text||r.error;ed.windowManager.alert(txt);ed.dom.remove(n);return false;}
if(file.status==state.DONE){r.type=file.type;if(file.uploader){o=file.uploader;if(s=o.insertUploadedFile(r)){var styles=ed.dom.getAttrib(n,'data-mce-style');if(styles){styles=ed.dom.styles.parse(styles);ed.dom.setStyles(s,styles);}
if(ed.dom.hasClass(n,'mceItemUploadMarker')){ed.dom.setAttribs(s,{'width':n.width||s.width,'height':n.height||s.height});}
if(ed.dom.replace(s,n)){ed.nodeChanged();return true;}}}
self.files.splice(tinymce.inArray(self.files,file),1);}}else{return showError();}
ed.dom.remove(n);}});self.UploadError.add(function(o){ed.windowManager.alert(o.code+' : '+o.message);if(o.file&&o.file.marker){ed.dom.remove(o.file.marker);}});},_bindUploadMarkerEvents:function(ed,marker){var self=this,dom=tinymce.DOM;function removeUpload(){dom.setStyles('wf_upload_button',{'top':'','left':'','display':'none','zIndex':''});}
ed.onNodeChange.add(removeUpload);ed.dom.bind(ed.getWin(),'scroll',removeUpload);var input=dom.get('wf_upload_input');if(!input){var btn=dom.add(dom.doc.body,'div',{'id':'wf_upload_button','title':ed.getLang('upload.button_description','Click to upload a file')},'<label for="wf_upload_input">'+ed.getLang('upload.label','Upload')+'</label>');input=dom.add(btn,'input',{'type':'file','id':'wf_upload_input'});}
ed.dom.bind(marker,'mouseover',function(e){if(ed.dom.getAttrib(marker,'data-mce-selected')){return;}
var vp=ed.dom.getViewPort(ed.getWin());var p1=dom.getRect(ed.getContentAreaContainer());var p2=ed.dom.getRect(marker);var st=ed.getBody().scrollTop;if(st>p2.y+p2.h/2-25){return;}
if(st<(p2.y+p2.h/2+25)-p1.h){return;}
var x=Math.max(p2.x-vp.x,0)+p1.x;var y=Math.max(p2.y-vp.y,0)+p1.y-Math.max(st-p2.y,0);var zIndex=ed.id=='mce_fullscreen'?dom.get('mce_fullscreen_container').style.zIndex:0;dom.setStyles('wf_upload_button',{'top':y+p2.h/2-27,'left':x+p2.w/2-54,'display':'block','zIndex':zIndex+1});input.onchange=function(){if(input.files){var file=input.files[0];if(file){file.marker=marker;if(self.addFile(file)){ed.dom.addClass(marker,'loading');self.upload(file);removeUpload();}}}};});ed.dom.bind(marker,'mouseout',function(e){if(!e.relatedTarget&&e.clientY>0){return;}
removeUpload();});},_createUploadMarker:function(n){var self=this,ed=this.editor,src=n.attr('src')||'',style={},styles,cls=[];if(!n.attr('alt')&&!/data:image/.test(src)){var alt=src.substring(src.length,src.lastIndexOf('/')+1);n.attr('alt',alt);}
if(n.attr('style')){style=ed.dom.styles.parse(n.attr('style'));}
if(n.attr('hspace')){style['margin-left']=style['margin-right']=n.attr('hspace');}
if(n.attr('vspace')){style['margin-top']=style['margin-bottom']=n.attr('vspace');}
if(n.attr('align')){style.float=n.attr('align');}
if(n.attr('class')){cls=n.attr('class').replace(/\s*upload-placeholder\s*/,'').split(' ');}
cls.push('mceItemUpload');cls.push('mceItemUploadMarker');n.attr({'src':this.plugin_url+'/img/trans.gif','class':tinymce.trim(cls.join(' '))});var tmp=ed.dom.create('span',{'style':style});if(styles=ed.dom.getAttrib(tmp,'style')){n.attr({'style':styles,'data-mce-style':styles});}},buildUrl:function(url,items){var query='';each(items,function(value,name){query+=(query?'&':'')+encodeURIComponent(name)+'='+encodeURIComponent(value);});if(query){url+=(url.indexOf('?')>0?'&':'?')+query;}
return url;},addFile:function(file){var ed=this.editor,self=this,fileNames={},url;if(/\.(php|php(3|4|5)|phtml|pl|py|jsp|asp|htm|html|shtml|sh|cgi)\./i.test(file.name)){ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
each(self.plugins,function(o,k){if(!file.upload_url){if(url=o.getUploadURL(file)){file.upload_url=url;file.uploader=o;}}});if(file.upload_url){if(tinymce.is(file.uploader.getUploadConfig,'function')){var config=file.uploader.getUploadConfig();var type=file.type.replace(/[a-z0-9]+\/([a-z0-9]{2,4})/i,'$1');type=type.toLowerCase();if(tinymce.inArray(config.filetypes,type)==-1){ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
if(file.size){var max=parseInt(config.max_size)||1024;if(file.size>max*1024){ed.windowManager.alert(ed.getLang('upload.file_size_error','File size exceeds maximum allowed size'));return false;}}}
self.FilesAdded.dispatch(file);if(!file.marker){var w=300,h=300;ed.execCommand('mceInsertContent',false,'<img id="__mce_tmp" class="mceItemUpload" />',{skip_undo:1});if(/image\/(gif|png|jpeg|jpg)/.test(file.type)){w=h=Math.round(Math.sqrt(file.size));w=Math.max(100,w);h=Math.max(100,h);}
var n=ed.dom.get('__mce_tmp');ed.dom.setAttrib(n,'id','');n.style.width=w+"px";n.style.height=h+"px";file.marker=n;}
ed.undoManager.add();self.files.push(file);return true;}else{ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
return false;},upload:function(file){var self=this,ed=this.editor;var args={'action':'upload','format':'raw','method':'dragdrop','component_id':ed.settings.component_id};args[ed.settings.token]='1';var url=file.upload_url;function sendFile(bin){var xhr=new XMLHttpRequest,formData=new FormData();if(xhr.upload){xhr.upload.onprogress=function(e){if(e.lengthComputable){file.loaded=Math.min(file.size,e.loaded);self.UploadProgress.dispatch(file);}};}
xhr.onreadystatechange=function(){var httpStatus;if(xhr.readyState==4&&self.state!==state.STOPPED){try{httpStatus=xhr.status;}catch(ex){httpStatus=0;}
if(httpStatus>=400){self.UploadError.dispatch({code:state.HTTP_ERROR,message:ed.getLang('upload.http_error','HTTP Error'),file:file,status:httpStatus});}else{file.loaded=file.size;self.UploadProgress.dispatch(file);bin=formData=null;file.status=state.DONE;self.FileUploaded.dispatch(file,{response:xhr.responseText,status:httpStatus});}}};var name=file.target_name||file.name;name=name.replace(/[\+\\\/\?\#%&<>"\'=\[\]\{\},;@\^\(\)$]/g,'');extend(args,{'name':name});xhr.open("post",url,true);each(self.settings.headers,function(value,name){xhr.setRequestHeader(name,value);});each(extend(args,self.settings.multipart_params),function(value,name){formData.append(name,value);});formData.append(self.settings.file_data_name,bin);xhr.send(formData);return;}
if(file.status==state.DONE||file.status==state.FAILED||self.state==state.STOPPED){return;}
extend(args,{name:file.target_name||file.name});sendFile(file);},getInfo:function(){return{longname:'Drag & Drop and Placeholder Upload',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('upload',tinymce.plugins.Upload);})();
(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,Cookie=tinymce.util.Cookie,lastExtID,explode=tinymce.explode;tinymce.ThemeManager.requireLangPack('advanced');tinymce.create('tinymce.themes.AdvancedTheme',{controls:{bold:['bold_desc','Bold'],italic:['italic_desc','Italic'],underline:['underline_desc','Underline'],strikethrough:['striketrough_desc','Strikethrough'],justifyleft:['justifyleft_desc','JustifyLeft'],justifycenter:['justifycenter_desc','JustifyCenter'],justifyright:['justifyright_desc','JustifyRight'],justifyfull:['justifyfull_desc','JustifyFull'],outdent:['outdent_desc','Outdent'],indent:['indent_desc','Indent'],undo:['undo_desc','Undo'],redo:['redo_desc','Redo'],unlink:['unlink_desc','unlink'],cleanup:['cleanup_desc','mceCleanup'],help:['help_desc','mceHelp'],code:['code_desc','mceCodeEditor'],hr:['hr_desc','InsertHorizontalRule'],removeformat:['removeformat_desc','RemoveFormat'],sub:['sub_desc','subscript'],sup:['sup_desc','superscript'],forecolor:['forecolor_desc','ForeColor'],forecolorpicker:['forecolor_desc','mceForeColor'],backcolor:['backcolor_desc','HiliteColor'],backcolorpicker:['backcolor_desc','mceBackColor'],visualaid:['visualaid_desc','mceToggleVisualAid'],newdocument:['newdocument_desc','mceNewDocument'],blockquote:['blockquote_desc','mceBlockQuote']},stateControls:['bold','italic','underline','strikethrough','justifyleft','justifycenter','justifyright','justifyfull','sub','sup','blockquote'],init:function(ed,url){var t=this,s,v,o;t.editor=ed;t.url=url;t.onResolveName=new tinymce.util.Dispatcher(this);t.onResize=new tinymce.util.Dispatcher(this);s=ed.settings;ed.forcedHighContrastMode=ed.settings.detect_highcontrast&&t._isHighContrast();ed.settings.skin=ed.forcedHighContrastMode?'highcontrast':ed.settings.skin;if(!s.theme_advanced_buttons1){s=extend({theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap"},s);}
t.settings=s=extend({theme_advanced_path:true,theme_advanced_toolbar_location:'top',theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:ed.settings.readonly},s);if((v=s.theme_advanced_path_location)&&v!='none')
s.theme_advanced_statusbar_location=s.theme_advanced_path_location;if(s.theme_advanced_statusbar_location=='none')
s.theme_advanced_statusbar_location=0;if(!ed.settings.compress.css&&ed.settings.content_css!==false)
ed.contentCSS.push(ed.baseURI.toAbsolute(url+"/skins/"+ed.settings.skin+"/content.css"));ed.onInit.add(function(){if(!ed.settings.readonly){ed.onNodeChange.add(t._nodeChanged,t);ed.onKeyUp.add(t._updateUndoStatus,t);ed.onMouseUp.add(t._updateUndoStatus,t);ed.dom.bind(ed.dom.getRoot(),'dragend',function(){t._updateUndoStatus(ed);});}});ed.onSetProgressState.add(function(ed,b,ti){var co,id=ed.id,tb;if(b){t.progressTimer=setTimeout(function(){co=ed.getContainer();co=co.insertBefore(DOM.create('DIV',{style:'position:relative'}),co.firstChild);tb=DOM.get(ed.id+'_tbl');DOM.add(co,'div',{id:id+'_blocker','class':'mceBlocker',style:{width:tb.clientWidth+2,height:tb.clientHeight+2}});DOM.add(co,'div',{id:id+'_progress','class':'mceProgress',style:{left:tb.clientWidth/2,top:tb.clientHeight/2}});},ti||0);}else{DOM.remove(id+'_blocker');DOM.remove(id+'_progress');clearTimeout(t.progressTimer);}});if(!ed.settings.compress.css){DOM.loadCSS(s.editor_css?ed.documentBaseURI.toAbsolute(s.editor_css):url+"/skins/"+ed.settings.skin+"/ui.css");if(s.skin_variant)
DOM.loadCSS(url+"/skins/"+ed.settings.skin+"/ui_"+s.skin_variant+".css");}},_isHighContrast:function(){var actualColor,div=DOM.add(DOM.getRoot(),'div',{'style':'background-color: rgb(171,239,86);'});actualColor=(DOM.getStyle(div,'background-color',true)+'').toLowerCase().replace(/ /g,'');DOM.remove(div);return actualColor!='rgb(171,239,86)'&&actualColor!='#abef56';},createControl:function(n,cf){var cd,c;if(c=cf.createControl(n))
return c;if((cd=this.controls[n]))
return cf.createButton(n,{title:"advanced."+cd[0],cmd:cd[1],ui:cd[2],value:cd[3]});},execCommand:function(cmd,ui,val){var f=this['_'+cmd];if(f){f.call(this,ui,val);return true;}
return false;},renderUI:function(o){var n,ic,tb,t=this,ed=t.editor,s=t.settings,sc,p,nl;if(ed.settings){ed.settings.aria_label=s.aria_label+ed.getLang('advanced.help_shortcut');}
n=p=DOM.create('div',{role:'application','aria-labelledby':ed.id+'_voice',id:ed.id+'_parent','class':'mceEditor '+ed.settings.skin+'Skin'+(s.skin_variant?' '+ed.settings.skin+'Skin'+t._ufirst(s.skin_variant):'')+(ed.settings.directionality=="rtl"?' mceRtl':'')});DOM.add(n,'span',{'class':'mceVoiceLabel','style':'display:none;',id:ed.id+'_voice'},s.aria_label);if(!DOM.boxModel)
n=DOM.add(n,'div',{'class':'mceOldBoxModel'});n=sc=DOM.add(n,'table',{role:"presentation",id:ed.id+'_tbl','class':'mceLayout',cellSpacing:0,cellPadding:0});n=tb=DOM.add(n,'tbody');switch((s.theme_advanced_layout_manager||'').toLowerCase()){case"rowlayout":ic=t._rowLayout(s,tb,o);break;case"customlayout":ic=ed.execCallback("theme_advanced_custom_layout",s,tb,o,p);break;default:ic=t._simpleLayout(s,tb,o,p);}
n=o.targetNode;nl=sc.rows;DOM.addClass(nl[0],'mceFirst');DOM.addClass(nl[nl.length-1],'mceLast');each(DOM.select('tr',tb),function(n){DOM.addClass(n.firstChild,'mceFirst');DOM.addClass(n.childNodes[n.childNodes.length-1],'mceLast');});if(DOM.get(s.theme_advanced_toolbar_container))
DOM.get(s.theme_advanced_toolbar_container).appendChild(p);else
DOM.insertAfter(p,n);Event.add(ed.id+'_path_row','click',function(e){e=e.target;if(e.nodeName=='A'){t._sel(e.className.replace(/^.*mcePath_([0-9]+).*$/,'$1'));return false;}});if(!ed.getParam('accessibility_focus'))
Event.add(DOM.add(p,'a',{href:'#'},'<!-- IE -->'),'focus',function(){tinyMCE.get(ed.id).focus();});if(s.theme_advanced_toolbar_location=='external')
o.deltaHeight=0;t.deltaHeight=o.deltaHeight;o.targetNode=null;ed.onKeyDown.add(function(ed,evt){var DOM_VK_F10=121,DOM_VK_F11=122;if(evt.altKey){if(evt.keyCode===DOM_VK_F10){if(tinymce.isWebKit){window.focus();}
t.toolbarGroup.focus();return Event.cancel(evt);}else if(evt.keyCode===DOM_VK_F11){DOM.get(ed.id+'_path_row').focus();return Event.cancel(evt);}}});return{iframeContainer:ic,editorContainer:ed.id+'_parent',sizeContainer:sc,deltaHeight:o.deltaHeight};},getInfo:function(){return{longname:'Advanced theme',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',version:tinymce.majorVersion+"."+tinymce.minorVersion};},resizeBy:function(dw,dh){var e=DOM.get(this.editor.id+'_ifr');this.resizeTo(e.clientWidth+dw,e.clientHeight+dh);},resizeTo:function(w,h,store){var ed=this.editor,s=this.settings,e=DOM.get(ed.id+'_tbl'),ifr=DOM.get(ed.id+'_ifr');w=Math.max(s.theme_advanced_resizing_min_width||100,w);h=Math.max(s.theme_advanced_resizing_min_height||100,h);w=Math.min(s.theme_advanced_resizing_max_width||0xFFFF,w);h=Math.min(s.theme_advanced_resizing_max_height||0xFFFF,h);DOM.setStyle(e,'height','');DOM.setStyle(ifr,'height',h);if(s.theme_advanced_resize_horizontal){DOM.setStyle(e,'width','');DOM.setStyle(ifr,'width',w);if(w<e.clientWidth){w=e.clientWidth;DOM.setStyle(ifr,'width',e.clientWidth);}}
if(store&&s.theme_advanced_resizing_use_cookie){Cookie.setHash("TinyMCE_"+ed.id+"_size",{cw:w,ch:h});}
this.onResize.dispatch();},destroy:function(){var id=this.editor.id;Event.clear(id+'_resize');Event.clear(id+'_path_row');Event.clear(id+'_external_close');},_simpleLayout:function(s,tb,o,p){var t=this,ed=t.editor,lo=s.theme_advanced_toolbar_location,sl=s.theme_advanced_statusbar_location,n,ic,etb,c;if(s.readonly){n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});return ic;}
if(lo=='top')
t._addToolbars(tb,o);if(lo=='external'){n=c=DOM.create('div',{style:'position:relative'});n=DOM.add(n,'div',{id:ed.id+'_external','class':'mceExternalToolbar'});DOM.add(n,'a',{id:ed.id+'_external_close',href:'javascript:;','class':'mceExternalClose'});n=DOM.add(n,'table',{id:ed.id+'_tblext',cellSpacing:0,cellPadding:0});etb=DOM.add(n,'tbody');if(p.firstChild.className=='mceOldBoxModel')
p.firstChild.appendChild(c);else
p.insertBefore(c,p.firstChild);t._addToolbars(etb,o);ed.onMouseUp.add(function(){var e=DOM.get(ed.id+'_external');DOM.show(e);DOM.hide(lastExtID);var f=Event.add(ed.id+'_external_close','click',function(){DOM.hide(ed.id+'_external');Event.remove(ed.id+'_external_close','click',f);return false;});DOM.show(e);DOM.setStyle(e,'top',0-DOM.getRect(ed.id+'_tblext').h-1);DOM.hide(e);DOM.show(e);e.style.filter='';lastExtID=ed.id+'_external';e=null;});}
if(sl=='top')
t._addStatusBar(tb,o);if(!s.theme_advanced_toolbar_container){n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});}
if(lo=='bottom')
t._addToolbars(tb,o);if(sl=='bottom')
t._addStatusBar(tb,o);return ic;},_rowLayout:function(s,tb,o){var t=this,ed=t.editor,dc,da,cf=ed.controlManager,n,ic,to,a;dc=s.theme_advanced_containers_default_class||'';da=s.theme_advanced_containers_default_align||'center';each(explode(s.theme_advanced_containers||''),function(c,i){var v=s['theme_advanced_container_'+c]||'';switch(c.toLowerCase()){case'mceeditor':n=DOM.add(tb,'tr');n=ic=DOM.add(n,'td',{'class':'mceIframeContainer'});break;case'mceelementpath':t._addStatusBar(tb,o);break;default:a=(s['theme_advanced_container_'+c+'_align']||da).toLowerCase();a='mce'+t._ufirst(a);n=DOM.add(DOM.add(tb,'tr'),'td',{'class':'mceToolbar '+(s['theme_advanced_container_'+c+'_class']||dc)+' '+a||da});to=cf.createToolbar("toolbar"+i);t._addControls(v,to);DOM.setHTML(n,to.renderHTML());o.deltaHeight-=s.theme_advanced_row_height;}});return ic;},_addControls:function(v,tb){var t=this,s=t.settings,ed=t.editor,di,cf=t.editor.controlManager;if(s.theme_advanced_disable&&!t._disabled){di={};each(explode(s.theme_advanced_disable),function(v){di[v]=1;});t._disabled=di;}else
di=t._disabled;each(explode(v),function(n){var c;if(di&&di[n])
return;c=t.createControl(n,cf);if(c)
tb.add(c);});},_addToolbars:function(c,o){var t=this,i,tb,ed=t.editor,s=t.settings,v,cf=ed.controlManager,di,n,h=[],a,toolbarGroup,toolbarsExist=false;toolbarGroup=cf.createToolbarGroup('toolbargroup',{'name':ed.getLang('advanced.toolbar'),'tab_focus_toolbar':ed.getParam('theme_advanced_tab_focus_toolbar')});t.toolbarGroup=toolbarGroup;a=s.theme_advanced_toolbar_align.toLowerCase();a='mce'+t._ufirst(a);n=DOM.add(DOM.add(c,'tr',{role:'toolbar'}),'td',{'class':'mceToolbar '+a,"role":"toolbar"});for(i=1;(v=s['theme_advanced_buttons'+i]);i++){toolbarsExist=true;tb=cf.createToolbar("toolbar"+i,{'class':'mceToolbarRow'+i});if(s['theme_advanced_buttons'+i+'_add'])
v+=','+s['theme_advanced_buttons'+i+'_add'];if(s['theme_advanced_buttons'+i+'_add_before'])
v=s['theme_advanced_buttons'+i+'_add_before']+','+v;t._addControls(v,tb);toolbarGroup.add(tb);o.deltaHeight-=s.theme_advanced_row_height;}
if(!toolbarsExist){o.deltaHeight-=s.theme_advanced_row_height;}
var html=toolbarGroup.renderHTML();html=html.replace(/href="javascript:;"/gi,'href="#"');h.push(html);h.push(DOM.createHTML('a',{href:'#',accesskey:'z',title:ed.getLang("advanced.toolbar_focus"),onfocus:'tinyMCE.getInstanceById(\''+ed.id+'\').focus();'},'<!-- IE -->'));DOM.setHTML(n,h.join(''));},_addStatusBar:function(tb,o){var n,t=this,ed=t.editor,s=t.settings,r,mf,me,td;n=DOM.add(tb,'tr');n=td=DOM.add(n,'td',{'class':'mceStatusbar'});n=DOM.add(n,'div',{id:ed.id+'_path_row','role':'group','aria-labelledby':ed.id+'_path_voice','class':'mcePathRow'});if(s.theme_advanced_path){DOM.add(n,'span',{id:ed.id+'_path_voice','class':'mcePathLabel'},ed.translate('advanced.path')+': ');}else{DOM.add(n,'span',{},'&#160;');}
if(s.theme_advanced_resizing){DOM.add(td,'a',{id:ed.id+'_resize',href:'javascript:;',onclick:"return false;",'class':'mceResize',tabIndex:"-1"});if(s.theme_advanced_resizing_use_cookie){ed.onPostRender.add(function(){var o=Cookie.getHash("TinyMCE_"+ed.id+"_size"),c=DOM.get(ed.id+'_tbl');if(!o)
return;t.resizeTo(o.cw,o.ch);});}
ed.onPostRender.add(function(){Event.add(ed.id+'_resize','click',function(e){e.preventDefault();});Event.add(ed.id+'_resize','mousedown',function(e){var mouseMoveHandler1,mouseMoveHandler2,mouseUpHandler1,mouseUpHandler2,startX,startY,startWidth,startHeight,width,height,ifrElm;function resizeOnMove(e){e.preventDefault();width=startWidth+(e.screenX-startX);height=startHeight+(e.screenY-startY);t.resizeTo(width,height);}
function endResize(e){Event.remove(DOM.doc,'mousemove',mouseMoveHandler1);Event.remove(ed.getDoc(),'mousemove',mouseMoveHandler2);Event.remove(DOM.doc,'mouseup',mouseUpHandler1);Event.remove(ed.getDoc(),'mouseup',mouseUpHandler2);width=startWidth+(e.screenX-startX);height=startHeight+(e.screenY-startY);t.resizeTo(width,height,true);ed.nodeChanged();}
e.preventDefault();startX=e.screenX;startY=e.screenY;ifrElm=DOM.get(t.editor.id+'_ifr');startWidth=width=ifrElm.clientWidth;startHeight=height=ifrElm.clientHeight;mouseMoveHandler1=Event.add(DOM.doc,'mousemove',resizeOnMove);mouseMoveHandler2=Event.add(ed.getDoc(),'mousemove',resizeOnMove);mouseUpHandler1=Event.add(DOM.doc,'mouseup',endResize);mouseUpHandler2=Event.add(ed.getDoc(),'mouseup',endResize);});});}
o.deltaHeight-=21;n=tb=null;},_updateUndoStatus:function(ed){var cm=ed.controlManager,um=ed.undoManager;cm.setDisabled('undo',!um.hasUndo()&&!um.typing);cm.setDisabled('redo',!um.hasRedo());},_nodeChanged:function(ed,cm,n,co,ob){var t=this,p,de=0,v,c,s=t.settings,cl,fz,fn,fc,bc,formatNames,matches;tinymce.each(t.stateControls,function(c){cm.setActive(c,ed.queryCommandState(t.controls[c][1]));});function getParent(name){var i,parents=ob.parents,func=name;if(typeof(name)=='string'){func=function(node){return node.nodeName==name;};}
for(i=0;i<parents.length;i++){if(func(parents[i]))
return parents[i];}}
cm.setActive('visualaid',ed.hasVisual);t._updateUndoStatus(ed);cm.setDisabled('outdent',!ed.queryCommandState('Outdent'));var link=getParent('A');var img=getParent('IMG');function isLink(n){return!!n&&n.href&&(!n.name||!n.id);}
if(c=cm.get('unlink')){c.setDisabled(!isLink(link));c.setActive(isLink(link));}
if(s.theme_advanced_path&&s.theme_advanced_statusbar_location){p=DOM.get(ed.id+'_path')||DOM.add(ed.id+'_path_row','span',{id:ed.id+'_path','class':'mcePathPath'});if(t.statusKeyboardNavigation){t.statusKeyboardNavigation.destroy();t.statusKeyboardNavigation=null;}
DOM.setHTML(p,'');getParent(function(n){var na=n.nodeName.toLowerCase(),u,pi,ti='';if(n.nodeType!=1||na==='br'||n.getAttribute('data-mce-bogus')||DOM.hasClass(n,'mceItemHidden')||DOM.hasClass(n,'mceItemRemoved'))
return;if(tinymce.isIE&&n.scopeName&&n.scopeName!=='HTML')
na=n.scopeName+':'+na;na=na.replace(/mce\:/g,'');switch(na){case'b':na='strong';break;case'img':if(v=DOM.getAttrib(n,'src'))
ti+='src: '+v+' ';break;case'a':if(v=DOM.getAttrib(n,'href'))
ti+='href: '+v+' ';break;case'font':if(v=DOM.getAttrib(n,'face'))
ti+='font: '+v+' ';if(v=DOM.getAttrib(n,'size'))
ti+='size: '+v+' ';if(v=DOM.getAttrib(n,'color'))
ti+='color: '+v+' ';break;case'span':if(v=DOM.getAttrib(n,'style'))
ti+='style: '+v+' ';break;}
if(v=DOM.getAttrib(n,'id'))
ti+='id: '+v+' ';if(v=n.className){v=v.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,'');if(v){ti+='class: '+v+' ';if(ed.dom.isBlock(n)||na=='img'||na=='span')
na+='.'+v;}}
na=na.replace(/(html:)/g,'');na={name:na,node:n,title:ti};t.onResolveName.dispatch(t,na);ti=na.title;na=na.name;pi=DOM.create('a',{'href':"javascript:;",role:'button',onmousedown:"return false;",title:ti,'class':'mcePath_'+(de++)},na);if(p.hasChildNodes()){p.insertBefore(DOM.create('span',{'aria-hidden':'true'},'\u00a0\u00bb '),p.firstChild);p.insertBefore(pi,p.firstChild);}else
p.appendChild(pi);},ed.getBody());if(DOM.select('a',p).length>0){t.statusKeyboardNavigation=new tinymce.ui.KeyboardNavigation({root:ed.id+"_path_row",items:DOM.select('a',p),excludeFromTabOrder:true,onCancel:function(){ed.focus();}},DOM);}}},_sel:function(v){this.editor.execCommand('mceSelectNodeDepth',false,v);},_mceHelp:function(){var ed=this.editor;ed.windowManager.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=help&tmpl=component&lang='+ed.getParam('language')+'&section=editor&category=editor&article=about',width:780,height:560,inline:true,popup_css:false},{theme_url:this.url});},_mceNewDocument:function(){var ed=this.editor;ed.windowManager.confirm('advanced.newdocument',function(s){if(s)
ed.execCommand('mceSetContent',false,'');});},_ufirst:function(s){return s.substring(0,1).toUpperCase()+s.substring(1);}});tinymce.ThemeManager.add('advanced',tinymce.themes.AdvancedTheme);}(tinymce));
(function(){tinymce.create('tinymce.plugins.AutolinkPlugin',{init:function(ed,url){var t=this;if(!ed.getParam('autolink_url',true)&&!ed.getParam('autolink_email',true)){return;}
ed.onKeyDown.addToTop(function(ed,e){if(e.keyCode==13)
return t.handleEnter(ed);});if(tinyMCE.isIE)
return;ed.onKeyPress.add(function(ed,e){if(e.which==41)
return t.handleEclipse(ed);});ed.onKeyUp.add(function(ed,e){if(e.keyCode==32)
return t.handleSpacebar(ed);});},handleEclipse:function(ed){this.parseCurrentLine(ed,-1,'(',true);},handleSpacebar:function(ed){this.parseCurrentLine(ed,0,'',true);},handleEnter:function(ed){this.parseCurrentLine(ed,-1,'',false);},parseCurrentLine:function(ed,end_offset,delimiter,goback){var r,end,start,endContainer,bookmark,text,matches,prev,len;r=ed.selection.getRng(true).cloneRange();if(r.startOffset<5){prev=r.endContainer.previousSibling;if(prev==null){if(r.endContainer.firstChild==null||r.endContainer.firstChild.nextSibling==null)
return;prev=r.endContainer.firstChild.nextSibling;}
len=prev.length;r.setStart(prev,len);r.setEnd(prev,len);if(r.endOffset<5)
return;end=r.endOffset;endContainer=prev;}else{endContainer=r.endContainer;if(endContainer.nodeType!=3&&endContainer.firstChild){while(endContainer.nodeType!=3&&endContainer.firstChild)
endContainer=endContainer.firstChild;if(endContainer.nodeType==3){r.setStart(endContainer,0);r.setEnd(endContainer,endContainer.nodeValue.length);}}
if(r.endOffset==1)
end=2;else
end=r.endOffset-1-end_offset;}
start=end;do
{r.setStart(endContainer,end>=2?end-2:0);r.setEnd(endContainer,end>=1?end-1:0);end-=1;}while(r.toString()!=' '&&r.toString()!=''&&r.toString().charCodeAt(0)!=160&&(end-2)>=0&&r.toString()!=delimiter);if(r.toString()==delimiter||r.toString().charCodeAt(0)==160){r.setStart(endContainer,end);r.setEnd(endContainer,start);end+=1;}else if(r.startOffset==0){r.setStart(endContainer,0);r.setEnd(endContainer,start);}
else{r.setStart(endContainer,end);r.setEnd(endContainer,start);}
var text=r.toString();if(text.charAt(text.length-1)=='.'){r.setEnd(endContainer,start-1);}
text=r.toString();matches=text.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+-]+@)(.+)$/i);if(matches){if(matches[1]=='www.'){matches[1]='http://www.';if(!ed.getParam('autolink_url',true)){return;}}else if(/@$/.test(matches[1])&&!/^mailto:/.test(matches[1])){matches[1]='mailto:'+matches[1];if(!ed.getParam('autolink_email',true)){return;}}else{if(!ed.getParam('autolink_url',true)){return;}}
bookmark=ed.selection.getBookmark();ed.selection.setRng(r);tinyMCE.execCommand('createlink',false,matches[1]+matches[2]);ed.selection.moveToBookmark(bookmark);ed.nodeChanged();if(tinyMCE.isWebKit){ed.selection.collapse(false);var max=Math.min(endContainer.length,start+1);r.setStart(endContainer,max);r.setEnd(endContainer,max);ed.selection.setRng(r);}}},getInfo:function(){return{longname:'Autolink',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('autolink',tinymce.plugins.AutolinkPlugin);})();
(function(){var each=tinymce.each,extend=tinymce.extend,Node=tinymce.html.Node;function split(str,delim){return str.split(delim||',');}
var fontIconRe=/<([a-z0-9]+)([^>]+)class="([^"]*)(glyph|uk-)?(fa|icon)-([\w-]+)([^"]*)"([^>]*)>(&nbsp;|\u00a0)?<\/\1>/gi;var emptyRx=/<(ol|ul|sub|sup|blockquote|span|font|a|table|tbody|tr|strong|em|b|i)\b([^>]+)><\/\1>/gi;var paddedRx=/<(p|h1|h2|h3|h4|h5|h6|pre|div|address|caption)\b([^>]+)>(&nbsp;|\u00a0)<\/\1>/gi;tinymce.create('tinymce.plugins.CleanupPlugin',{init:function(ed,url){var self=this;this.editor=ed;if(ed.settings.verify_html===false){ed.settings.validate=false;}
ed.onPreInit.add(function(){ed.schema.addValidElements('a[href|target|ping|rel|media|type|id|name|accesskey|class|dir|draggable|download|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup]');ed.schema.addValidElements('picture[id|accesskey|class|dir|lang|style|tabindex|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup]');ed.schema.addValidElements('source[src|srcset|media|type|sizes|id|accesskey|class|dir|lang|style|tabindex|title]');ed.schema.addValidChildren('picture[source|img]');if(ed.settings.validate){var elements=ed.schema.elements;each(split('span,a,i'),function(name){if(elements[name]){elements[name].removeEmpty=false;}});}
if(ed.settings.validate){var invalidAttribValue=ed.getParam('invalid_attribute_values','');if(invalidAttribValue){function replaceAttributeValue(nodes,name,re){var i=nodes.length,node;while(i--){node=nodes[i];if(new RegExp(re).test(node.attr(name))){node.attr(name,"");if(name==='src'||name==='href'){node.attr('data-mce-'+name,"");}}}}
each(tinymce.explode(invalidAttribValue),function(item){var re,matches=/([a-z\*]+)\[([a-z]+)([\^\$]?=)["']([^"']+)["']\]/i.exec(item);if(matches&&matches.length==5){var tag=matches[1],attrib=matches[2],expr=matches[3],value=matches[4];switch(expr){default:case'=':re='('+value+')';break;case'!=':re='(^'+value+')';break;case'^=':re='^('+value+')';break;case'$=':re='('+value+')$';break;}
if(tag=='*'){ed.parser.addAttributeFilter(attrib,function(nodes,name){replaceAttributeValue(nodes,name,re);});}else{ed.parser.addNodeFilter(tag,function(nodes,name){replaceAttributeValue(nodes,attrib,re);});}}});}}else{ed.serializer.addNodeFilter(ed.settings.invalid_elements,function(nodes,name){var i=nodes.length,node;if(ed.schema.isValidChild('body',name)){while(i--){node=nodes[i];node.remove();}}});ed.parser.addNodeFilter(ed.settings.invalid_elements,function(nodes,name){var i=nodes.length,node;if(ed.schema.isValidChild('body',name)){while(i--){node=nodes[i];if(name==='span'&&node.attr('data-mce-type')){continue;}
node.unwrap();}}});}
ed.parser.addNodeFilter('a,i,span',function(nodes,name){var i=nodes.length,node,cls;while(i--){node=nodes[i],cls=node.attr('class');if(cls){node.attr('data-mce-bootstrap','1');if(!node.firstChild){node.append(new Node('#text','3')).value='\u00a0';}}}});ed.serializer.addAttributeFilter('data-mce-bootstrap',function(nodes,name){var i=nodes.length,node,fc;while(i--){node=nodes[i],fc=node.firstChild;node.attr('data-mce-bootstrap',null);if(fc&&(fc.value==='\u00a0'||fc.value==='&nbsp;')){fc.remove();}}});ed.parser.addAttributeFilter('onclick,ondblclick',function(nodes,name){var i=nodes.length,node;while(i--){node=nodes[i];node.attr('data-mce-'+name,node.attr(name));node.attr(name,null);}});ed.serializer.addAttributeFilter('data-mce-onclick,data-mce-ondblclick',function(nodes,name){var i=nodes.length,node,k;while(i--){node=nodes[i],k=name.replace('data-mce-','');node.attr(k,node.attr(name));node.attr(name,null);}});ed.serializer.addNodeFilter('br',function(nodes,name){var i=nodes.length,node,k;if(i){while(i--){node=nodes[i];if(node.parent&&node.parent.name==="body"&&!node.prev){node.remove();}}}});ed.parser.addNodeFilter('br',function(nodes,name){var i=nodes.length,node,k;if(i){while(i--){node=nodes[i];if(node.parent&&node.parent.name==="body"&&!node.prev){node.remove();}}}});});if(ed.settings.validate===false&&ed.settings.verify_html===false){ed.addCommand('mceCleanup',function(){var s=ed.settings,se=ed.selection,bm;bm=se.getBookmark();var content=ed.getContent({cleanup:true});var schema=new tinymce.html.Schema({validate:true,verify_html:true,valid_styles:s.valid_styles,valid_children:s.valid_children,custom_elements:s.custom_elements,extended_valid_elements:s.extended_valid_elements});content=new tinymce.html.Serializer({validate:true},schema).serialize(new tinymce.html.DomParser({validate:true},schema).parse(content));ed.setContent(content,{cleanup:true});se.moveToBookmark(bm);});}
ed.onBeforeSetContent.add(function(ed,o){o.content=o.content.replace(/^<br>/,'');o.content=self.convertFromGeshi(o.content);if(ed.settings.validate){if(ed.getParam('invalid_attributes')){var s=ed.getParam('invalid_attributes','');o.content=o.content.replace(new RegExp('<([^>]+)('+s.replace(/,/g,'|')+')="([^"]+)"([^>]*)>','gi'),'<$1$4>');}}
o.content=o.content.replace(fontIconRe,'<$1$2class="$3$4$5-$6$7"$8>&nbsp;</$1>');o.content=o.content.replace(/<(a|i|span)([^>]+)><\/\1>/gi,'<$1$2>&nbsp;</$1>');});ed.onPostProcess.add(function(ed,o){if(o.set){o.content=self.convertFromGeshi(o.content);}
if(o.get){o.content=self.convertToGeshi(o.content);o.content=o.content.replace(/<a([^>]*)class="jce(box|popup|lightbox|tooltip|_tooltip)"([^>]*)><\/a>/gi,'');o.content=o.content.replace(/<span class="jce(box|popup|lightbox|tooltip|_tooltip)">(.*?)<\/span>/gi,'$2');o.content=o.content.replace(/_mce_(src|href|style|coords|shape)="([^"]+)"\s*?/gi,'');if(ed.settings.validate===false){o.content=o.content.replace(/<body([^>]*)>([\s\S]*)<\/body>/,'$2');if(!ed.getParam('remove_tag_padding')){o.content=o.content.replace(/<(p|h1|h2|h3|h4|h5|h6|th|td|pre|div|address|caption)([^>]*)><\/\1>/gi,'<$1$2>&nbsp;</$1>');}}
if(!ed.getParam('table_pad_empty_cells',true)){o.content=o.content.replace(/<(th|td)([^>]*)>(&nbsp;|\u00a0)<\/\1>/gi,'<$1$2></$1>');}
o.content=o.content.replace(fontIconRe,'<$1$2class="$3$4$5-$6$7"$8></$1>');o.content=o.content.replace(/<(a|i|span)([^>]+)>(&nbsp;|\u00a0)<\/\1>/gi,'<$1$2></$1>');if(ed.getParam('remove_div_padding')){o.content=o.content.replace(/<div([^>]*)>(&nbsp;|\u00a0)<\/div>/g,'<div$1></div>');}
if(ed.getParam('pad_empty_tags',true)===false){o.content=o.content.replace(paddedRx,'<$1$2></$1>');}}});ed.onSaveContent.add(function(ed,o){if(ed.getParam('cleanup_pluginmode')){var entities={'&#39;':"'",'&amp;':'&','&quot;':'"','&apos;':"'"};o.content=o.content.replace(/&(#39|apos|amp|quot);/gi,function(a){return entities[a];});}});ed.addButton('cleanup',{title:'advanced.cleanup_desc',cmd:'mceCleanup'});},convertFromGeshi:function(h){h=h.replace(/<pre xml:lang="([^"]+)"([^>]*)>(.*?)<\/pre>/g,function(a,b,c,d){var attr='';if(c&&/\w/.test(c)){attr=c.split(' ').join(' data-geshi-');}
return'<pre data-geshi-lang="'+b+'"'+attr+'>'+d+'</pre>';});return h;},convertToGeshi:function(h){h=h.replace(/<pre([^>]+)data-geshi-lang="([^"]+)"([^>]*)>(.*?)<\/pre>/g,function(a,b,c,d,e){var s=b+d;s=s.replace(/data-geshi-/gi,'').replace(/\s+/g,' ').replace(/\s$/,'');return'<pre xml:lang="'+c+'"'+s+'>'+e+'</pre>';});return h;},getInfo:function(){return{longname:'Cleanup',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.4.6'};}});tinymce.PluginManager.add('cleanup',tinymce.plugins.CleanupPlugin);})();
(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,is=tinymce.is,each=tinymce.each,VK=tinymce.VK;tinyMCE.onAddEditor.add(function(mgr,ed){if(tinymce.isMac&&tinymce.isGecko&&!tinymce.isIE11){ed.onKeyDown.add(function(ed,e){if(VK.metaKeyPressed(e)&&!e.shiftKey&&(e.keyCode==37||e.keyCode==39)){ed.selection.getSel().modify('move',e.keyCode==37?'backward':'forward','word');e.preventDefault();}});}});tinymce.util.PreviewCss=function(ed,fmt){var name,previewElm,dom=ed.dom,previewCss='',parentFontSize,previewStylesName;var previewStyles=ed.settings.preview_styles;if(previewStyles===false)
return'';if(!previewStyles)
previewStyles='font-family font-size font-weight text-decoration text-transform color background-color';function removeVars(val){return val.replace(/%(\w+)/g,'');}
name=fmt.block||fmt.inline||'span';previewElm=dom.create(name);each(fmt.styles,function(value,name){value=removeVars(value);if(value)
dom.setStyle(previewElm,name,value);});each(fmt.attributes,function(value,name){value=removeVars(value);if(value)
dom.setAttrib(previewElm,name,value);});each(fmt.classes,function(value){value=removeVars(value);if(!dom.hasClass(previewElm,value))
dom.addClass(previewElm,value);});dom.setStyles(previewElm,{position:'absolute',left:-0xFFFF});ed.getBody().appendChild(previewElm);parentFontSize=dom.getStyle(ed.getBody(),'fontSize',true);parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0;each(previewStyles.split(' '),function(name){var value=dom.getStyle(previewElm,name,true);if(name=='background-color'&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)){value=dom.getStyle(ed.getBody(),name,true);if(dom.toHex(value).toLowerCase()=='#ffffff'){return;}}
if(name=='font-size'){if(/em|%$/.test(value)){if(parentFontSize===0){return;}
value=parseFloat(value,10)/(/%$/.test(value)?100:1);value=(value*parentFontSize)+'px';}}
previewCss+=name+':'+value+';';});dom.remove(previewElm);return previewCss;};tinymce.create('tinymce.ui.ButtonDialog:tinymce.ui.Button',{ButtonDialog:function(id,s,ed){this.parent(id,s,ed);this.settings=s=tinymce.extend({content:'',buttons:[]},this.settings);this.editor=ed;this.onRenderDialog=new tinymce.util.Dispatcher(this);this.onShowDialog=new tinymce.util.Dispatcher(this);this.onHideDialog=new tinymce.util.Dispatcher(this);s.dialog_container=s.dialog_container||DOM.doc.body;},showDialog:function(){var t=this,ed=this.editor,s=this.settings,p1,p2,e=DOM.get(t.id),m;if(t.isDisabled())
return;this.storeSelection();if(!t.isDialogRendered){t.renderDialog();}
if(t.isDialogVisible)
return t.hideDialog();DOM.show(t.id+'_dialog');if(s.url){var iframe=DOM.get(t.id+'_iframe');iframe.src=s.url;}
p2=DOM.getPos(e);DOM.setStyles(t.id+'_dialog',{left:p2.x,top:p2.y+e.clientHeight+5,zIndex:200000});e=0;if(this.isActive()){DOM.addClass(t.id+'_dialog',this.classPrefix+'DialogActive');}else{DOM.removeClass(t.id+'_dialog',this.classPrefix+'DialogActive');}
Event.add(ed.getDoc(),'mousedown',t.hideDialog,t);Event.add(DOM.doc,'mousedown',function(e){var n=e.target;while(n){if(n==DOM.getRoot()||!n.nodeType||n.nodeType===9){break;}
if(n==DOM.get(t.id+'_dialog')){return;}
n=n.parentNode;}
t.hideDialog();});t.onShowDialog.dispatch(t);if(t._focused){t._keyHandler=Event.add(t.id+'_dialog','keydown',function(e){if(e.keyCode==27)
t.hideDialog();});}
t.isDialogVisible=1;},storeSelection:function(){if(tinymce.isIE){this.editor.focus();this.bookmark=this.editor.selection.getBookmark(1);}},restoreSelection:function(){if(this.bookmark){this.editor.selection.moveToBookmark(this.bookmark);this.editor.focus();}
this.bookmark=0;},renderDialog:function(){var t=this,m,s=this.settings,w,v,ed=this.editor;s['class']+=' '+ed.getParam('skin')+'Skin';if(v=ed.getParam('skin_variant')){s['class']+=' '+ed.getParam('skin')+'Skin'+v.substring(0,1).toUpperCase()+v.substring(1);}
s['class']+=ed.settings.directionality=="rtl"?' mceRtl':'';w=DOM.add(s.dialog_container,'div',{role:'presentation',id:t.id+'_dialog','class':s['class'],style:'position:absolute;left:0;top:-1000px;'});w=DOM.add(w,'div',{'class':this.classPrefix+'Dialog'});m=DOM.add(w,'div',{'class':this.classPrefix+'DialogContent'});if(s.width){DOM.setStyle(w,'width',s.width);}
if(tinymce.is(s.content,'string')){DOM.setHTML(m,s.content);}else{DOM.add(m,s.content);}
if(s.url){DOM.add(m,'iframe',{'id':t.id+'_iframe','src':s.url,style:{'border':0,'width':'100%','height':'100%'},onload:function(){t.isDialogRendered=true;t.onRenderDialog.dispatch(t);}});}
m=DOM.add(w,'div',{'class':this.classPrefix+'DialogButtons'});each(s.buttons,function(o){var btn=DOM.add(m,'a',{'class':'mceDialogButton','id':t.id+'_button_'+o.id},o.title||'');if(o.click){Event.add(btn,'click',function(e){t.restoreSelection();var s=o.click.call(o.scope||t,e);if(s){t.hideDialog();}});};});if(!s.url){t.isDialogRendered=true;t.onRenderDialog.dispatch(t);}
return w;},setButtonDisabled:function(button,state){var id=this.id+'_button_'+button;if(state){DOM.addClass(id,'disabled');}else{DOM.removeClass(id,'disabled');}},setButtonLabel:function(button,label){DOM.setHTML(this.id+'_button_'+button,label);},hideDialog:function(e){var t=this;if(e&&e.type=="mousedown"&&DOM.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+'_open';}))
return;if(!e||!DOM.getParent(e.target,'.mceDialog')){t.setState('Selected',0);Event.remove(DOM.doc,'mousedown',t.hideDialog,t);DOM.hide(t.id+'_dialog');}
t.isDialogVisible=0;t.onHideDialog.dispatch(t);},postRender:function(){var t=this,s=t.settings,bm,ed=this.editor;Event.add(t.id,'click',function(){if(!t.isDisabled()){if(s.onclick)
s.onclick(t.value);t.showDialog();}});},destroy:function(){this.parent();Event.clear(this.id+'_dialog');DOM.remove(this.id+'_dialog');}});})(tinymce);
(function(){var each=tinymce.each,JSON=tinymce.util.JSON,Node=tinymce.html.Node,Entities=tinymce.html.Entities;var VK=tinymce.VK,BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE;tinymce.create('tinymce.plugins.CodePlugin',{init:function(ed,url){var self=this;this.editor=ed;this.url=url;function isCode(n){return ed.dom.is(n,'.mceItemScript, .mceItemStyle, .mceItemPhp, .mcePhp');}
ed.onNodeChange.add(function(ed,cm,n,co){ed.dom.removeClass(ed.dom.select('.mceItemSelected'),'mceItemSelected');if(isCode(n)){ed.dom.addClass(n,'mceItemSelected');}});ed.onKeyDown.add(function(ed,e){if(e.keyCode===BACKSPACE||e.keyCode===DELETE){self._removeCode(e);}});ed.onPreInit.add(function(){if(ed.getParam('code_style')){ed.schema.addValidElements('style[scoped|*]');ed.schema.addValidChildren('+body[style]');}
ed.parser.addNodeFilter('script,style',function(nodes){for(var i=0,len=nodes.length;i<len;i++){self._serializeSpan(nodes[i]);}});ed.parser.addNodeFilter('noscript',function(nodes){for(var i=0,len=nodes.length;i<len;i++){self._serializeNoScript(nodes[i]);}});ed.serializer.addNodeFilter('script,div,span',function(nodes,name,args){for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];if(node.name=='span'&&/mceItemScript/.test(node.attr('class'))){self._buildScript(node);}
if(node.name=='span'&&/mceItemStyle/.test(node.attr('class'))){self._buildStyle(node);}
if(node.name=='div'&&node.attr('data-mce-type')=='noscript'){self._buildNoScript(node);}}});});ed.onInit.add(function(){if(ed.theme&&ed.theme.onResolveName){ed.theme.onResolveName.add(function(theme,o){var cls=o.node.className;if(o.name==='span'&&/mceItemScript/.test(cls)){o.name='script';}
if(o.name==='span'&&/mceItemStyle/.test(cls)){o.name='style';}
if(o.name==='span'&&/mcePhp/.test(cls)){o.name='php';}});}
if(ed.settings.content_css!==false)
ed.dom.loadCSS(url+"/css/content.css");});ed.onBeforeSetContent.add(function(ed,o){if(/<(\?|script|style)/.test(o.content)){if(!ed.getParam('code_script')){o.content=o.content.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,'');}
if(!ed.getParam('code_style')){o.content=o.content.replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,'');}
if(!ed.getParam('code_php')){o.content=o.content.replace(/<\?(php)?([\s\S]*?)\?>/gi,'');}
o.content=o.content.replace(/\="([^"]+?)"/g,function(a,b){b=b.replace(/<\?(php)?(.+?)\?>/gi,function(x,y,z){return'{php:start}'+ed.dom.encode(z)+'{php:end}';});return'="'+b+'"';});if(/<textarea/.test(o.content)){o.content=o.content.replace(/<textarea([^>]*)>([\s\S]*?)<\/textarea>/gi,function(a,b,c){c=c.replace(/<\?(php)?(.+?)\?>/gi,function(x,y,z){return'{php:start}'+ed.dom.encode(z)+'{php:end}';});return'<textarea'+b+'>'+c+'</textarea>';});}
o.content=o.content.replace(/<([^>]+)<\?(php)?(.+?)\?>([^>]*?)>/gi,function(a,b,c,d,e){if(b.charAt(b.length)!==' '){b+=' ';}
return'<'+b+'data-mce-php="'+d+'" '+e+'>';});o.content=o.content.replace(/<\?(php)?([\s\S]+?)\?>/gi,'<span class="mcePhp" data-mce-type="php"><!--$2-->\u00a0</span>');o.content=o.content.replace(/<script([^>]+)><\/script>/gi,'<script$1>\u00a0</script>');o.content=o.content.replace(/<(script|style)([^>]*)>/gi,function(a,b,c){if(c.indexOf('data-mce-type')===-1){if(c.indexOf('type')===-1){var type=(b==="script")?"javascript":"css";c+=' data-mce-type="text/'+type+'"';}else{c=c.replace(/type="([^"]+)"/i,'data-mce-type="$1"');}}
return'<'+b+c+'>';});}});ed.onPostProcess.add(function(ed,o){if(o.get){if(/(mcePhp|data-mce-php|\{php:start\})/.test(o.content)){o.content=o.content.replace(/\{php:start\}([^\{]+)\{php:end\}/g,function(a,b){return'<?php'+ed.dom.decode(b)+'?>';});o.content=o.content.replace(/<textarea([^>]*)>([\s\S]*?)<\/textarea>/gi,function(a,b,c){if(/&lt;\?php/.test(c)){c=ed.dom.decode(c);}
return'<textarea'+b+'>'+c+'</textarea>';});o.content=o.content.replace(/data-mce-php="([^"]+?)"/g,function(a,b){return'<?php'+ed.dom.decode(b)+'?>';});o.content=o.content.replace(/<span([^>]+)class="mcePhp"([^>]+)><!--([\s\S]*?)-->(&nbsp;|\u00a0)<\/span>/g,function(a,b,c,d){return'<?php'+ed.dom.decode(d)+'?>';});}
o.content=o.content.replace(/<(script|style)([^>]*)>/gi,function(a,b,c){c=c.replace(/\s?data-mce-type="[^"]+"/gi,"");return'<'+b+c+'>';});}});},_removeCode:function(e){var ed=this.editor,s=ed.selection,n=s.getNode();if(ed.dom.is(n,'.mceItemScript, .mceItemStyle, .mceItemPhp, .mcePhp')){ed.undoManager.add();ed.dom.remove(n);if(e){e.preventDefault();}}},_convertCurlyCode:function(content){content=content.replace(/\{([^\}]+)\}([\s\S]+?)\{\/\1\}/,'<span class="mceItemCurlyCode" data-mce-type="code-item">{$1}$2{/$1}</span>');content=content.replace(/\{([^\}]+)\}/,'<span class="mceItemCurlyCode" data-mce-type="code-item">{$1}</span>');},_buildScript:function(n){var self=this,ed=this.editor,v,node,text,p;if(!n.parent)
return;if(n.firstChild){v=n.firstChild.value;}
p=JSON.parse(n.attr('data-mce-json'))||{};if(!p.type){p.type=n.attr('data-mce-type')||'text/javascript';}
node=new Node('script',1);if(v){v=tinymce.trim(v);if(v){text=new Node('#text',3);text.raw=true;if(ed.getParam('code_cdata',true)&&p.type==="text/javascript"){v='// <![CDATA[\n'+self._clean(tinymce.trim(v))+'\n// ]]>';}
text.value=v;node.append(text);}}
each(p,function(v,k){if(k==="type"){v=v.replace(/mce-/,'');}
node.attr(k,v);});node.attr('data-mce-type',p.type);n.replace(node);return true;},_buildStyle:function(n){var self=this,ed=this.editor,v,node,text,p;if(!n.parent)
return;if(n.firstChild){v=n.firstChild.value;}
p=JSON.parse(n.attr('data-mce-json'))||{};if(!p.type){p.type='text/css';}
node=new Node('style',1);if(v){v=tinymce.trim(v);if(v){text=new Node('#text',3);text.raw=true;if(ed.getParam('code_cdata',true)){v='<!--\n'+self._clean(tinymce.trim(v))+'\n-->';}
text.value=v;node.append(text);}}
if(n.parent.name==='head'){p.scoped=null;}else{p.scoped="scoped";}
each(p,function(v,k){if(k==="type"){v=v.replace(/mce-/,'');}
node.attr(k,v);});node.attr('data-mce-type',p.type);n.replace(node);return true;},_buildNoScript:function(n){var self=this,ed=this.editor,p,node;if(!n.parent)
return;p=JSON.parse(n.attr('data-mce-json'))||{};node=new Node('noscript',1);each(p,function(v,k){node.attr(k,v);});n.wrap(node);n.unwrap();return true;},_serializeSpan:function(n){var self=this,ed=this.editor,dom=ed.dom,v,k,p={};if(!n.parent)
return;each(n.attributes,function(at){if(at.name.indexOf('data-mce-')!==-1)
return;p[at.name]=at.value;});var span=new Node('span',1);span.attr('class','mceItem'+this._ucfirst(n.name));span.attr('data-mce-json',JSON.serialize(p));span.attr('data-mce-type',n.attr('data-mce-type')||p.type);v=n.firstChild?n.firstChild.value:'';if(v.length){var text=new Node('#comment',8);text.value=this._clean(v);span.append(text);}
span.append(new tinymce.html.Node('#text',3)).value='\u00a0';n.replace(span);},_serializeNoScript:function(n){var self=this,ed=this.editor,dom=ed.dom,v,k,p={};if(!n.parent)
return;each(n.attributes,function(at){if(at.name=='type')
return;p[at.name]=at.value;});var div=new Node('div',1);div.attr('data-mce-json',JSON.serialize(p));div.attr('data-mce-type',n.name);n.wrap(div);n.unwrap();},_ucfirst:function(s){return s.charAt(0).toUpperCase()+s.substring(1);},_clean:function(s){s=s.replace(/(\/\/\s+<!\[CDATA\[)/gi,'\n');s=s.replace(/(<!--\[CDATA\[|\]\]-->)/gi,'\n');s=s.replace(/^[\r\n]*|[\r\n]*$/g,'');s=s.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/gi,'');s=s.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,'');return s;},getInfo:function(){return{longname:'Code',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.4.6'};}});tinymce.PluginManager.add('code',tinymce.plugins.CodePlugin);})();
(function(){tinymce.create('tinymce.plugins.ColorPicker',{init:function(ed,url){this.editor=ed;ed.addCommand('mceColorPicker',function(ui,v){ed.windowManager.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=colorpicker',width:375+parseInt(ed.getLang('advanced.colorpicker_delta_width',0)),height:310+parseInt(ed.getLang('advanced.colorpicker_delta_height',0)),close_previous:false,inline:true,popup_css:false},{input_color:v.color,func:v.func});});}});tinymce.PluginManager.add('colorpicker',tinymce.plugins.ColorPicker);})();
(function(){var each=tinymce.each,extend=tinymce.extend,JSON=tinymce.util.JSON;var isWin=navigator.platform.indexOf('Win')!==-1,isSafari=tinymce.isWebKit&&navigator.vendor.indexOf('Apple')!==-1;var Node=tinymce.html.Node;var mimes={};function toArray(list){return Array.prototype.slice.call(list||[],0);}
(function(mime_data){var items=mime_data.split(/,/),i,y,ext;for(i=0;i<items.length;i+=2){ext=items[i+1].split(/ /);for(y=0;y<ext.length;y++){mimes[ext[y]]=items[i];}}})("application/msword,doc dot,"+"application/pdf,pdf,"+"application/pgp-signature,pgp,"+"application/postscript,ps ai eps,"+"application/rtf,rtf,"+"application/vnd.ms-excel,xls xlb,"+"application/vnd.ms-powerpoint,ppt pps pot,"+"application/zip,zip,"+"application/x-shockwave-flash,swf swfl,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,"+"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,"+"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,"+"application/vnd.openxmlformats-officedocument.presentationml.template,potx,"+"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,"+"application/x-javascript,js,"+"application/json,json,"+"audio/mpeg,mpga mpega mp2 mp3,"+"audio/x-wav,wav,"+"audio/mp4,m4a,"+"image/bmp,bmp,"+"image/gif,gif,"+"image/jpeg,jpeg jpg jpe,"+"image/photoshop,psd,"+"image/png,png,"+"image/svg+xml,svg svgz,"+"image/tiff,tiff tif,"+"text/plain,asc txt text diff log,"+"text/html,htm html xhtml,"+"text/css,css,"+"text/csv,csv,"+"text/rtf,rtf,"+"video/mpeg,mpeg mpg mpe,"+"video/quicktime,qt mov,"+"video/mp4,mp4,"+"video/x-m4v,m4v,"+"video/x-flv,flv,"+"video/x-ms-wmv,wmv,"+"video/avi,avi,"+"video/webm,webm,"+"video/vnd.rn-realvideo,rv,"+"application/vnd.oasis.opendocument.formula-template,otf,"+"application/octet-stream,exe");var state={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400}
tinymce.create('tinymce.plugins.Upload',{files:[],plugins:[],init:function(ed,url){function cancel(){ed.dom.bind(ed.getBody(),'dragover',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});}
var self=this;self.editor=ed;self.plugin_url=url;ed.onPreInit.add(function(){each(ed.plugins,function(o,k){if(ed.getParam(k+'_upload')&&tinymce.is(o.getUploadURL,'function')&&tinymce.is(o.insertUploadedFile,'function')){self.plugins.push(o);}});if(!ed.settings.compress.css){ed.dom.loadCSS(url+"/css/content.css");}
ed.parser.addNodeFilter('img',function(nodes){var i=nodes.length,node,cls,data;while(i--){node=nodes[i],cls=node.attr('class'),data=node.attr('data-mce-upload-marker');if((cls&&cls.indexOf('upload-placeholder')!=-1)||data){if(self.plugins.length==0){node.remove();}else{self._createUploadMarker(node);}}}});ed.serializer.addNodeFilter('img',function(nodes){var i=nodes.length,node,cls;while(i--){node=nodes[i],cls=node.attr('class');if(cls&&/mceItemUploadMarker/.test(cls)){cls=cls.replace(/(?:^|\s)mceItem(Upload|UploadMarker)(?!\S)/g,'');cls+=' upload-placeholder';node.attr({'data-mce-src':'media/jce/img/placeholder.png','class':tinymce.trim(cls)});}}});});ed.onInit.add(function(){if(!window.FormData){cancel();return;}
if(self.plugins.length==0){cancel();return;}
function bindUploadEvents(ed){each(ed.dom.select('img.mceItemUploadMarker',ed.getBody()),function(n){if(self.plugins.length==0){ed.dom.remove(n);}else{self._bindUploadMarkerEvents(ed,n);}});}
ed.selection.onSetContent.add(function(){bindUploadEvents(ed);});ed.onSetContent.add(function(){bindUploadEvents(ed);});if(ed.onFullScreen){ed.onFullScreen.add(function(editor){bindUploadEvents(editor);});}
if(isSafari&&isWin){ed.dom.bind(ed.getBody(),'dragenter',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){var dropInputElm;dropInputElm=ed.dom.get(ed.getBody().id+"_dragdropupload");if(!dropInputElm){dropInputElm=ed.dom.add(ed.getBody(),"input",{'type':'file','id':ed.getBody().id+"_dragdropupload",'multiple':'multiple','style':{position:'absolute',display:'block',top:0,left:0,width:'100%',height:'100%',opacity:'0'}});}
ed.dom.bind(dropInputElm,'change',function(e){each(dropInputElm.files,function(file){if(tinymce.inArray(self.files,file)==-1){self.addFile(file);}});ed.dom.unbind(dropInputElm,'change');ed.dom.remove(dropInputElm);each(self.files,function(file){self.upload(file);});});}});ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();}});return;}
if(window.Opera){return;}
function cancelEvent(e){e.preventDefault();e.stopPropagation();}
if(tinymce.isIE||tinymce.isIE11){ed.dom.bind(ed.getBody(),'dragover',cancelEvent);}
ed.dom.bind(ed.getBody(),'drop',function(e){var dataTransfer=e.dataTransfer;if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){each(dataTransfer.files,function(file){self.addFile(file);});cancelEvent(e);}
if(self.files.length){each(self.files,function(file){self.upload(file);});}
if(tinymce.isGecko&&e.target.nodeName=='IMG'){cancelEvent(e);}});});self.FilesAdded=new tinymce.util.Dispatcher(this);self.UploadProgress=new tinymce.util.Dispatcher(this);self.FileUploaded=new tinymce.util.Dispatcher(this);self.UploadError=new tinymce.util.Dispatcher(this);this.settings={multipart:true,multi_selection:true,file_data_name:'file',filters:[]};self.FileUploaded.add(function(file,o){var n=file.marker,s,w,h;function showError(error){ed.windowManager.alert(error||ed.getLang('upload.response_error','Invalid Upload Response'));ed.dom.remove(n);return false;}
if(n){if(o&&o.response){var r=JSON.parse(o.response);if(!r){return showError();}
if(r.error){var txt=r.text||r.error;ed.windowManager.alert(txt);ed.dom.remove(n);return false;}
if(file.status==state.DONE){r.type=file.type;if(file.uploader){o=file.uploader;if(s=o.insertUploadedFile(r)){var styles=ed.dom.getAttrib(n,'data-mce-style');if(styles){styles=ed.dom.styles.parse(styles);ed.dom.setStyles(s,styles);}
if(ed.dom.hasClass(n,'mceItemUploadMarker')){ed.dom.setAttribs(s,{'width':n.width||s.width,'height':n.height||s.height});}
if(ed.dom.replace(s,n)){ed.nodeChanged();return true;}}}
self.files.splice(tinymce.inArray(self.files,file),1);}}else{return showError();}
ed.dom.remove(n);}});self.UploadError.add(function(o){ed.windowManager.alert(o.code+' : '+o.message);if(o.file&&o.file.marker){ed.dom.remove(o.file.marker);}});},_bindUploadMarkerEvents:function(ed,marker){var self=this,dom=tinymce.DOM;function removeUpload(){dom.setStyles('wf_upload_button',{'top':'','left':'','display':'none','zIndex':''});}
ed.onNodeChange.add(removeUpload);ed.dom.bind(ed.getWin(),'scroll',removeUpload);var input=dom.get('wf_upload_input');if(!input){var btn=dom.add(dom.doc.body,'div',{'id':'wf_upload_button','title':ed.getLang('upload.button_description','Click to upload a file')},'<label for="wf_upload_input">'+ed.getLang('upload.label','Upload')+'</label>');input=dom.add(btn,'input',{'type':'file','id':'wf_upload_input'});}
ed.dom.bind(marker,'mouseover',function(e){if(ed.dom.getAttrib(marker,'data-mce-selected')){return;}
var vp=ed.dom.getViewPort(ed.getWin());var p1=dom.getRect(ed.getContentAreaContainer());var p2=ed.dom.getRect(marker);var st=ed.getBody().scrollTop;if(st>p2.y+p2.h/2-25){return;}
if(st<(p2.y+p2.h/2+25)-p1.h){return;}
var x=Math.max(p2.x-vp.x,0)+p1.x;var y=Math.max(p2.y-vp.y,0)+p1.y-Math.max(st-p2.y,0);var zIndex=ed.id=='mce_fullscreen'?dom.get('mce_fullscreen_container').style.zIndex:0;dom.setStyles('wf_upload_button',{'top':y+p2.h/2-27,'left':x+p2.w/2-54,'display':'block','zIndex':zIndex+1});input.onchange=function(){if(input.files){var file=input.files[0];if(file){file.marker=marker;if(self.addFile(file)){ed.dom.addClass(marker,'loading');self.upload(file);removeUpload();}}}};});ed.dom.bind(marker,'mouseout',function(e){if(!e.relatedTarget&&e.clientY>0){return;}
removeUpload();});},_createUploadMarker:function(n){var self=this,ed=this.editor,src=n.attr('src')||'',style={},styles,cls=[];if(!n.attr('alt')&&!/data:image/.test(src)){var alt=src.substring(src.length,src.lastIndexOf('/')+1);n.attr('alt',alt);}
if(n.attr('style')){style=ed.dom.styles.parse(n.attr('style'));}
if(n.attr('hspace')){style['margin-left']=style['margin-right']=n.attr('hspace');}
if(n.attr('vspace')){style['margin-top']=style['margin-bottom']=n.attr('vspace');}
if(n.attr('align')){style.float=n.attr('align');}
if(n.attr('class')){cls=n.attr('class').replace(/\s*upload-placeholder\s*/,'').split(' ');}
cls.push('mceItemUpload');cls.push('mceItemUploadMarker');n.attr({'src':this.plugin_url+'/img/trans.gif','class':tinymce.trim(cls.join(' '))});var tmp=ed.dom.create('span',{'style':style});if(styles=ed.dom.getAttrib(tmp,'style')){n.attr({'style':styles,'data-mce-style':styles});}},buildUrl:function(url,items){var query='';each(items,function(value,name){query+=(query?'&':'')+encodeURIComponent(name)+'='+encodeURIComponent(value);});if(query){url+=(url.indexOf('?')>0?'&':'?')+query;}
return url;},addFile:function(file){var ed=this.editor,self=this,fileNames={},url;if(/\.(php|php(3|4|5)|phtml|pl|py|jsp|asp|htm|html|shtml|sh|cgi)\./i.test(file.name)){ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
each(self.plugins,function(o,k){if(!file.upload_url){if(url=o.getUploadURL(file)){file.upload_url=url;file.uploader=o;}}});if(file.upload_url){if(tinymce.is(file.uploader.getUploadConfig,'function')){var config=file.uploader.getUploadConfig();var type=file.type.replace(/[a-z0-9]+\/([a-z0-9]{2,4})/i,'$1');type=type.toLowerCase();if(tinymce.inArray(config.filetypes,type)==-1){ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
if(file.size){var max=parseInt(config.max_size)||1024;if(file.size>max*1024){ed.windowManager.alert(ed.getLang('upload.file_size_error','File size exceeds maximum allowed size'));return false;}}}
self.FilesAdded.dispatch(file);if(!file.marker){var w=300,h=300;ed.execCommand('mceInsertContent',false,'<img id="__mce_tmp" class="mceItemUpload" />',{skip_undo:1});if(/image\/(gif|png|jpeg|jpg)/.test(file.type)){w=h=Math.round(Math.sqrt(file.size));w=Math.max(100,w);h=Math.max(100,h);}
var n=ed.dom.get('__mce_tmp');ed.dom.setAttrib(n,'id','');n.style.width=w+"px";n.style.height=h+"px";file.marker=n;}
ed.undoManager.add();self.files.push(file);return true;}else{ed.windowManager.alert(ed.getLang('upload.file_extension_error','File type not supported'));return false;}
return false;},upload:function(file){var self=this,ed=this.editor;var args={'action':'upload','format':'raw','method':'dragdrop','component_id':ed.settings.component_id};args[ed.settings.token]='1';var url=file.upload_url;function sendFile(bin){var xhr=new XMLHttpRequest,formData=new FormData();if(xhr.upload){xhr.upload.onprogress=function(e){if(e.lengthComputable){file.loaded=Math.min(file.size,e.loaded);self.UploadProgress.dispatch(file);}};}
xhr.onreadystatechange=function(){var httpStatus;if(xhr.readyState==4&&self.state!==state.STOPPED){try{httpStatus=xhr.status;}catch(ex){httpStatus=0;}
if(httpStatus>=400){self.UploadError.dispatch({code:state.HTTP_ERROR,message:ed.getLang('upload.http_error','HTTP Error'),file:file,status:httpStatus});}else{file.loaded=file.size;self.UploadProgress.dispatch(file);bin=formData=null;file.status=state.DONE;self.FileUploaded.dispatch(file,{response:xhr.responseText,status:httpStatus});}}};var name=file.target_name||file.name;name=name.replace(/[\+\\\/\?\#%&<>"\'=\[\]\{\},;@\^\(\)$]/g,'');extend(args,{'name':name});xhr.open("post",url,true);each(self.settings.headers,function(value,name){xhr.setRequestHeader(name,value);});each(extend(args,self.settings.multipart_params),function(value,name){formData.append(name,value);});formData.append(self.settings.file_data_name,bin);xhr.send(formData);return;}
if(file.status==state.DONE||file.status==state.FAILED||self.state==state.STOPPED){return;}
extend(args,{name:file.target_name||file.name});sendFile(file);},getInfo:function(){return{longname:'Drag & Drop and Placeholder Upload',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.4.6'};}});tinymce.PluginManager.add('upload',tinymce.plugins.Upload);})();
(function(){var VK=tinymce.VK;var blocks='section,nav,article,aside,h1,h2,h3,h4,h5,h6,header,footer,address,main,p,pre,blockquote,figure,figcaption,div,dl,dt,dd';tinymce.create('tinymce.plugins.FormatPlugin',{init:function(ed,url){var self=this;this.editor=ed;function isBlock(n,s){s=s||blocks;return new RegExp('^('+s.replace(/,/g,'|')+')$','i').test(n.nodeName);}
ed.onPreInit.add(function(ed){tinymce.each('aside figure dl'.split(/\s/),function(name){ed.formatter.register(name,{block:name,remove:'all',wrapper:true});});ed.formatter.register('div_container',{block:'div',remove:'all',wrapper:true});ed.formatter.register('span',{inline:'span',remove:'all'});ed.formatter.register('section',{block:'section',remove:'all',wrapper:true,merge_siblings:false});ed.formatter.register('article',{block:'article',remove:'all',wrapper:true,merge_siblings:false});ed.formatter.register('code',{inline:'code',remove:'all'});ed.formatter.register('samp',{inline:'samp',remove:'all'});});ed.settings.removeformat=[{selector:'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q',remove:'all',split:true,expand:false,block_expand:true,deep:true}];ed.onKeyDown.add(function(ed,e){if((e.keyCode===VK.ENTER||e.keyCode===VK.UP)&&e.altKey){self._clearBlocks(ed,e);}});ed.onKeyUp.addToTop(function(ed,e){if(e.keyCode===VK.ENTER){var n=ed.selection.getNode();if(n.nodeName==='DIV'&&ed.settings.force_p_newlines){if(ed.settings.keep_styles===false){ed.dom.removeAllAttribs(n);}
ed.formatter.apply('p');}}});ed.onBeforeExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode(),p;switch(cmd){case'FormatBlock':if(!v){o.terminate=true;if(n===ed.getBody()){return;}
ed.undoManager.add();p=ed.dom.getParent(n,blocks)||'';if(p){ed.formatter.toggle(p.nodeName.toLowerCase());}
var cm=ed.controlManager.get('formatselect');if(cm){cm.select(p);}}
break;case'RemoveFormat':var s='p,div,address,pre,h1,h2,h3,h4,h5,h6,code,samp,span,section,article,aside,figure,dl,dt,dd';if(!v){if(isBlock(n,s)){ed.undoManager.add();p=ed.dom.getParent(n,blocks);if(p){ed.formatter.toggle(p.nodeName.toLowerCase());}
var cm=ed.controlManager.get('formatselect');if(cm){cm.select(p);}}else{var cm=ed.controlManager.get('styleselect');if(cm&&cm.selectedValue){ed.formatter.remove(cm.selectedValue);}}}
break;}});ed.onExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode();switch(cmd){case'FormatBlock':if(v==='dt'||v==='dd'){if(n&&n.nodeName!=='DL'){ed.formatter.apply('dl');}}
break;}});ed.onPreInit.add(function(){function wrapList(node){var sibling=node.prev;if(node.parent&&node.parent.name==='dl'){return;}
if(sibling&&(sibling.name==='dl'||sibling.name==='dl')){sibling.append(node);return;}
sibling=node.next;if(sibling&&(sibling.name==='dl'||sibling.name==='dl')){sibling.insert(node,sibling.firstChild,true);return;}
node.wrap(ed.parser.filterNode(new tinymce.html.Node('dl',1)));}
ed.parser.addNodeFilter('dt,dd',function(nodes){for(var i=0,len=nodes.length;i<len;i++){wrapList(nodes[i]);}});ed.serializer.addNodeFilter('dt,dd',function(nodes){for(var i=0,len=nodes.length;i<len;i++){wrapList(nodes[i]);}});});},_clearBlocks:function(ed,e){var p,n=ed.selection.getNode();p=ed.dom.getParents(n,blocks);if(p&&p.length>1){var h='&nbsp;',tag=ed.getParam('forced_root_block');if(!tag&&ed.getParam('force_p_newlines')){tag='p';}else{tag='br';}
e.preventDefault();var block=p[p.length-1];if(block===ed.getBody()){return;}
var el=ed.dom.create(tag);if(tag==='br'){h='<br data-mce-bogus="1" />';}
ed.dom.setHTML(el,h);if(e.keyCode===VK.ENTER){ed.dom.insertAfter(el,block);}else{block.parentNode.insertBefore(el,block);}
ed.selection.select(el);ed.selection.collapse(1);}},getInfo:function(){return{longname:'Format',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.4.6'};}});tinymce.PluginManager.add('format',tinymce.plugins.FormatPlugin);})();
(function(){tinymce.create('tinymce.plugins.CharacterMap',{init:function(ed,url){this.editor=ed;ed.addCommand('mceCharacterMap',function(v){ed.windowManager.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=charmap',width:550+parseInt(ed.getLang('advanced.charmap_delta_width',0)),height:250+parseInt(ed.getLang('advanced.charmap_delta_height',0)),close_previous:false,inline:true,popup_css:false});});ed.addButton('charmap',{title:'advanced.charmap_desc',cmd:'mceCharacterMap'});}});tinymce.PluginManager.add('charmap',tinymce.plugins.CharacterMap);})();
(function(){var Event=tinymce.dom.Event,each=tinymce.each,DOM=tinymce.DOM;tinymce.create('tinymce.plugins.ContextMenu',{init:function(ed){var t=this,showMenu,contextmenuNeverUseNative,realCtrlKey,hideMenu;t.editor=ed;contextmenuNeverUseNative=ed.settings.contextmenu_never_use_native;t.onContextMenu=new tinymce.util.Dispatcher(this);hideMenu=function(e){hide(ed,e);};showMenu=ed.onContextMenu.add(function(ed,e){if((realCtrlKey!==0?realCtrlKey:e.ctrlKey)&&!contextmenuNeverUseNative)
return;Event.cancel(e);if(e.target.nodeName=='IMG'){ed.selection.select(e.target);}
if(e.target.nodeName=='TD'||e.target.nodeName=='TH'){if(tinymce.isWebKit){var n=e.target,rng=ed.selection.getRng();var end=n.lastChild;while(end.lastChild){end=end.lastChild;}
if(end&&end.nodeValue){rng.setEnd(end,end.nodeValue.length);ed.selection.setRng(rng);}}}
t._getMenu(ed).showMenu(e.clientX||e.pageX,e.clientY||e.pageY);Event.add(ed.getDoc(),'click',hideMenu);ed.nodeChanged();});ed.onRemove.add(function(){if(t._menu)
t._menu.removeAll();});function hide(ed,e){realCtrlKey=0;if(e&&e.button==2){realCtrlKey=e.ctrlKey;return;}
if(t._menu){t._menu.removeAll();t._menu.destroy();Event.remove(ed.getDoc(),'click',hideMenu);t._menu=null;}};ed.onMouseDown.add(hide);ed.onKeyDown.add(hide);ed.onKeyDown.add(function(ed,e){if(e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode===121){Event.cancel(e);showMenu(ed,e);}});},getInfo:function(){return{longname:'Contextmenu',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu',version:tinymce.majorVersion+"."+tinymce.minorVersion};},_getMenu:function(ed){var t=this,m=t._menu,se=ed.selection,col=se.isCollapsed(),el=se.getNode()||ed.getBody(),am,p;if(m){m.removeAll();m.destroy();}
p=DOM.getPos(ed.getContentAreaContainer());m=ed.controlManager.createDropMenu('contextmenu',{offset_x:p.x+ed.getParam('contextmenu_offset_x',0),offset_y:p.y+ed.getParam('contextmenu_offset_y',0),constrain:1,keyboard_focus:true});t._menu=m;m.addSeparator();am=m.addMenu({title:'contextmenu.align'});am.add({title:'contextmenu.left',icon:'justifyleft',cmd:'JustifyLeft'});am.add({title:'contextmenu.center',icon:'justifycenter',cmd:'JustifyCenter'});am.add({title:'contextmenu.right',icon:'justifyright',cmd:'JustifyRight'});am.add({title:'contextmenu.full',icon:'justifyfull',cmd:'JustifyFull'});t.onContextMenu.dispatch(t,m,el,col);return m;}});tinymce.PluginManager.add('contextmenu',tinymce.plugins.ContextMenu);})();
(function(){tinymce.create('tinymce.plugins.Browser',{init:function(ed,url){this.ed=ed;},browse:function(name,url,type,win){var ed=this.ed;ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=browser&type='+type,width:780+ed.getLang('browser.delta_width',0),height:480+ed.getLang('browser.delta_height',0),resizable:"yes",inline:"yes",close_previous:"no",popup_css:false},{window:win,input:name,url:url,type:type});return false;},getInfo:function(){return{longname:'Browser',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net/index.php?option=com_content&amp;view=article&amp;task=findkey&amp;tmpl=component&amp;lang=en&amp;keyref=browser.about',version:'2.5.4'};}});tinymce.PluginManager.add('browser',tinymce.plugins.Browser);})();
(function(){var DOM=tinymce.DOM,Element=tinymce.dom.Element,Event=tinymce.dom.Event,each=tinymce.each,is=tinymce.is;tinymce.create('tinymce.plugins.InlinePopups',{init:function(ed,url){ed.onBeforeRenderUI.add(function(){ed.windowManager=new tinymce.InlineWindowManager(ed);if(!ed.settings.compress.css){DOM.loadCSS(url+'/css/dialog.css');}});},getInfo:function(){return{longname:'InlinePopups',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.create('tinymce.InlineWindowManager:tinymce.WindowManager',{InlineWindowManager:function(ed){var t=this;t.parent(ed);t.zIndex=300000;t.count=0;t.windows={};},open:function(f,p){var t=this,id,opt='',ed=t.editor,dw=0,dh=0,vp,po,mdf,clf,we,w,u,parentWindow;f=f||{};p=p||{};if(!f.inline)
return t.parent(f,p);parentWindow=t._frontWindow();if(parentWindow&&DOM.get(parentWindow.id+'_ifr')){parentWindow.focussedElement=DOM.get(parentWindow.id+'_ifr').contentWindow.document.activeElement;}
if(!f.type)
t.bookmark=ed.selection.getBookmark(1);id=DOM.uniqueId("mce_inlinepopups_");vp=DOM.getViewPort();f.width=parseInt(f.width||320);f.height=parseInt(f.height||240)+(tinymce.isIE?8:0);f.min_width=parseInt(f.min_width||150);f.min_height=parseInt(f.min_height||100);f.max_width=parseInt(f.max_width||2000);f.max_height=parseInt(f.max_height||2000);f.left=f.left||Math.round(Math.max(vp.x,vp.x+(vp.w/2.0)-(f.width/2.0)));f.top=f.top||Math.round(Math.max(vp.y,vp.y+(vp.h/2.0)-(f.height/2.0)));f.movable=f.resizable=true;p.mce_width=f.width;p.mce_height=f.height;p.mce_inline=true;p.mce_window_id=id;p.mce_auto_focus=f.auto_focus;t.features=f;t.params=p;t.onOpen.dispatch(t,f,p);if(f.type){if(f.type)
opt+=' ui-dialog-'+f.type.substring(0,1)+f.type.substring(1);f.resizable=false;}
if(typeof f.modal=='undefined'){f.modal=true;}
var title=f.title||'';var wrapper=DOM.get('ui-jce-wrapper');if(!wrapper){this.count=0;wrapper=DOM.add(DOM.doc.body,'div',{'id':'ui-jce-wrapper','class':'ui-jce'});}
t._addAll(wrapper,['div',{id:id,role:'dialog','aria-labelledby':f.type?id+'_content':id+'_title',tabindex:-1,'class':'ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable'+opt},['div',{'class':'ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix'},['span',{id:id+'_title','class':'ui-dialog-title'},f.title||''],['a',{href:'#','class':'ui-dialog-titlebar-close ui-corner-all',role:'button'},['span',{'class':'ui-icon ui-icon-closethick'},'close']]],['div',{id:id+'_content','class':'ui-dialog-content ui-widget-content',style:'overflow:hidden;'}],['div',{'class':'ui-resizable-handle ui-resizable-n'}],['div',{'class':'ui-resizable-handle ui-resizable-s'}],['div',{'class':'ui-resizable-handle ui-resizable-w'}],['div',{'class':'ui-resizable-handle ui-resizable-e'}],['div',{'class':'ui-resizable-handle ui-resizable-nw'}],['div',{'class':'ui-resizable-handle ui-resizable-ne'}],['div',{'class':'ui-resizable-handle ui-resizable-sw'}],['div',{'class':'ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'}]]);DOM.setStyles(id,{top:-10000,left:-10000});DOM.addClass(id,'loading');if(!f.type){dh+=DOM.get(id).clientHeight;f.min_height=f.height+dh;}
DOM.setStyles(id,{top:f.top,left:f.left,width:f.width+dw,height:f.height+dh});u=f.url||f.file;if(u){if(tinymce.relaxedDomain)
u+=(u.indexOf('?')==-1?'?':'&')+'mce_rdomain='+tinymce.relaxedDomain;u=tinymce._addVer(u);}
if(!f.type){var iframe=DOM.add(id+'_content','iframe',{id:id+'_ifr',src:'javascript:""',frameBorder:0,style:'border:0;width:10px;height:10px'});DOM.setStyles(iframe,{width:f.width,height:f.height});DOM.setAttrib(iframe,'src',u);Event.add(iframe,'load',function(){DOM.removeClass(id,'loading');});}else{var pane=DOM.add(id,'div',{'class':'ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'});var set=DOM.add(pane,'div',{'class':'ui-dialog-buttonset'});DOM.add(set,'button',{type:'button',id:id+'_ok','class':'ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-button-ok','role':'button','aria-disabled':false,'aria-labelledby':id+'_ok_text'},'<span class="ui-button-text" id="'+id+'_ok_text">'+ed.getLang('ok','OK')+'</span>');if(f.type=='confirm'){DOM.add(set,'button',{type:'button',id:id+'_cancel','class':'ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-button-cancel','role':'button','aria-disabled':false,'aria-labelledby':id+'_ok_text'},'<span class="ui-button-text" id="'+id+'_cancel_text">'+ed.getLang('cancel','Cancel')+'</span>');}
DOM.setHTML(id+'_content','<span class="ui-icon ui-icon-'+f.type+'"></span>'+f.content.replace('\n','<br />'));Event.add(id,'keyup',function(evt){var VK_ESCAPE=27;if(evt.keyCode===VK_ESCAPE){f.button_func(false);return Event.cancel(evt);}});Event.add(id,'keydown',function(evt){var cancelButton,VK_TAB=9;if(evt.keyCode===VK_TAB){cancelButton=DOM.get(id+'_cancel');if(cancelButton&&cancelButton!==evt.target){cancelButton.focus();}else{DOM.get(id+'_ok').focus();}
return Event.cancel(evt);}});}
mdf=Event.add(id,'mousedown',function(e){var n=e.target,ac;t.focus(id);if(DOM.hasClass(n,'ui-dialog-title')){n=n.parentNode;}
if(DOM.hasClass(n,'ui-dialog-titlebar')){ac='move';return t._startDrag(id,e,ac);}
if(DOM.hasClass(n,'ui-resizable-handle')){ac=/ui-resizable-(ne|nw|se|sw|n|s|e|w)/.exec(n.className);if(ac)
return t._startDrag(id,e,ac[1]);}});Event.add([id+'_left',id+'_right'],'focus',function(evt){var iframe=DOM.get(id+'_ifr');if(iframe){var body=iframe.contentWindow.document.body;var focusable=DOM.select(':input:enabled,*[tabindex=0]',body);focusable[0].focus();}else{DOM.get(id+'_ok').focus();}});clf=Event.add(id,'click',function(e){var n=e.target;t.focus(id);if(DOM.is(n,'.ui-button-cancel, .ui-button-cancel span, .ui-button-ok, .ui-button-ok span')){f.button_func(DOM.is(n,'.ui-button-ok, .ui-button-ok span'));}else if(DOM.is(n,'.ui-dialog-titlebar-close, .ui-dialog-titlebar-close span')){t.close(null,id);}
return Event.cancel(e);});Event.add(DOM.select('.ui-dialog-titlebar-close',id),'mouseover',function(e){var n=e.target;if(n.nodeName!='A'){n=n.parentNode;}
DOM.addClass(n,'ui-state-hover');});Event.add(DOM.select('.ui-dialog-titlebar-close',id),'mouseout',function(e){var n=e.target;if(n.nodeName!='A'){n=n.parentNode;}
DOM.removeClass(n,'ui-state-hover');});Event.add(DOM.select('.ui-dialog-titlebar-close',id),'focus',function(e){var n=e.target;if(n.nodeName!='A'){n=n.parentNode;}
DOM.addClass(n,'ui-state-focus');});Event.add(DOM.select('.ui-dialog-titlebar-close',id),'blur',function(e){var n=e.target;if(n.nodeName!='A'){n=n.parentNode;}
DOM.removeClass(n,'ui-state-focus');});w=t.windows[id]={id:id,mousedown_func:mdf,click_func:clf,element:new Element(id,{blocker:1,container:ed.getContainer()}),iframeElement:new Element(id+'_ifr'),features:f,deltaWidth:dw,deltaHeight:dh};w.iframeElement.on('focus',function(){t.focus(id);});var overlay=DOM.get('ui-widget-overlay');if(!overlay&&f.modal){overlay=DOM.add(wrapper,'div',{id:'ui-widget-overlay','class':'ui-widget-overlay',style:{position:'fixed',left:0,top:0,width:'100%',height:'100%',zIndex:t.zIndex-1}});DOM.show(overlay);DOM.setAttrib(DOM.doc.body,'aria-hidden','true');}
DOM.setAttrib(id,'aria-hidden','false');if(tinymce.isIE6||(tinymce.isIE&&!DOM.boxModel)&&overlay){DOM.setStyles(overlay,{position:'absolute',left:vp.x,top:vp.y,width:vp.w-2,height:vp.h-2});}
t.focus(id);this.count++;return w;},focus:function(id){var t=this,w;if(w=t.windows[id]){w.zIndex=this.zIndex++;w.element.setStyle('zIndex',w.zIndex);w.element.update();DOM.removeClass(t.lastId,'ui-dialog-focus');DOM.addClass(id,'ui-dialog-focus');t.lastId=id;if(w.focussedElement){w.focussedElement.focus();}else if(DOM.get(id+'_ok')){DOM.get(w.id+'_ok').focus();}else if(DOM.get(w.id+'_ifr')){DOM.get(w.id+'_ifr').focus();}}},_addAll:function(te,ne){var i,n,t=this,dom=tinymce.DOM;if(is(ne,'string'))
te.appendChild(dom.doc.createTextNode(ne));else if(ne.length){te=te.appendChild(dom.create(ne[0],ne[1]));for(i=2;i<ne.length;i++)
t._addAll(te,ne[i]);}},_startDrag:function(id,se,ac){var t=this,mu,mm,d=DOM.doc,eb,w=t.windows[id],we=w.element,sp=we.getXY(),p,sz,ph,cp,vp,sx,sy,sex,sey,dx,dy,dw,dh;cp={x:0,y:0};vp=DOM.getViewPort();vp.w-=2;vp.h-=2;sex=se.screenX;sey=se.screenY;dx=dy=dw=dh=0;mu=Event.add(d,'mouseup',function(e){Event.remove(d,'mouseup',mu);Event.remove(d,'mousemove',mm);DOM.removeClass(id,'ui-dialog-dragging');if(eb)
eb.remove();we.moveBy(dx,dy);we.resizeBy(dw,dh);sz=we.getSize();DOM.setStyles(id+'_ifr',{width:sz.w-w.deltaWidth,height:sz.h-w.deltaHeight});return Event.cancel(e);});if(ac!='move')
startMove();function startMove(){if(eb)
return;DOM.addClass(id,'ui-dialog-dragging');var blocker=DOM.add(DOM.get('ui-jce-wrapper'),'div',{id:'ui-dialog-blocker','class':'ui-widget ui-dialog-blocker',style:{zIndex:t.zIndex+1}});if(tinymce.isIE6||(tinymce.isIE&&!DOM.boxModel))
DOM.setStyles(blocker,{position:'absolute',left:vp.x,top:vp.y,width:vp.w-2,height:vp.h-2});eb=new Element(blocker);eb.update();sz={w:DOM.get(id).clientWidth,h:DOM.get(id).clientHeight};sx=cp.x+sp.x-vp.x;sy=cp.y+sp.y-vp.y;DOM.add(eb.get(),'div',{id:'ui-dialog-placeholder','class':'ui-widget-content ui-widget-overlay',style:{left:sx,top:sy,width:sz.w,height:sz.h}});ph=new Element('ui-dialog-placeholder');};mm=Event.add(d,'mousemove',function(e){var x,y,v;startMove();x=e.screenX-sex;y=e.screenY-sey;switch(ac){case'w':dx=x;dw=0-x;break;case'e':dw=x;break;case'n':case'nw':case'ne':if(ac=="nw"){dx=x;dw=0-x;}else if(ac=="ne")
dw=x;dy=y;dh=0-y;break;case's':case'sw':case'se':if(ac=="sw"){dx=x;dw=0-x;}else if(ac=="se")
dw=x;dh=y;break;case'move':dx=x;dy=y;break;}
if(dw<(v=w.features.min_width-sz.w)){if(dx!==0)
dx+=dw-v;dw=v;}
if(dh<(v=w.features.min_height-sz.h)){if(dy!==0)
dy+=dh-v;dh=v;}
dw=Math.min(dw,w.features.max_width-sz.w);dh=Math.min(dh,w.features.max_height-sz.h);dx=Math.max(dx,vp.x-(sx+vp.x));dy=Math.max(dy,vp.y-(sy+vp.y));dx=Math.min(dx,(vp.w+vp.x)-(sx+sz.w+vp.x));dy=Math.min(dy,(vp.h+vp.y)-(sy+sz.h+vp.y));if(dx+dy!==0){if(sx+dx<0)
dx=0;if(sy+dy<0)
dy=0;ph.moveTo(sx+dx,sy+dy);}
if(dw+dh!==0)
ph.resizeTo(sz.w+dw,sz.h+dh);return Event.cancel(e);});return Event.cancel(se);},resizeBy:function(dw,dh,id){var w=this.windows[id];if(w){w.element.resizeBy(dw,dh);w.iframeElement.resizeBy(dw,dh);}},close:function(win,id){var t=this,w,d=DOM.doc,ix=0,fw,id;id=t._findId(id||win);if(!t.windows[id]){t.parent(win);return;}
if(w=t.windows[id]){t.onClose.dispatch(t);Event.remove(d,'mousedown',w.mousedownFunc);Event.remove(d,'click',w.clickFunc);Event.clear(id);Event.clear(id+'_ifr');DOM.setAttrib(id+'_ifr','src','javascript:""');w.element.remove();delete t.windows[id];fw=t._frontWindow();if(fw)
t.focus(fw.id);this.count--;if(fw)
t.focus(fw.id);}
if(this.count==0){DOM.remove('ui-jce-wrapper');DOM.setAttrib(DOM.doc.body,'aria-hidden','false');}},alert:function(txt,cb,s){var t=this,w;w=t.open({title:t,type:'alert',button_func:function(s){if(cb)
cb.call(t,s);t.close(null,w.id);},content:DOM.encode(t.editor.getLang(txt,txt)),inline:1,width:400,height:150});},confirm:function(txt,cb,s){var t=this,w;w=t.open({title:t,type:'confirm',button_func:function(s){if(cb)
cb.call(t,s);t.close(null,w.id);},content:DOM.encode(t.editor.getLang(txt,txt)),inline:1,width:400,height:150});},setTitle:function(w,ti){var e;w=this._findId(w);if(e=DOM.get(w+'_title'))
e.innerHTML=DOM.encode(ti);},_frontWindow:function(){var fw,ix=0;each(this.windows,function(w){if(w.zIndex>ix){fw=w;ix=w.zIndex;}});return fw;},_findId:function(w){var t=this;if(typeof(w)=='string')
return w;each(t.windows,function(wo){var ifr=DOM.get(wo.id+'_ifr');if(ifr&&w==ifr.contentWindow){w=wo.id;return false;}});return w;}});tinymce.PluginManager.add('inlinepopups',tinymce.plugins.InlinePopups);})();
(function(){var each=tinymce.each,extend=tinymce.extend,JSON=tinymce.util.JSON;var Node=tinymce.html.Node;var Styles=new tinymce.html.Styles();function toArray(obj){var undef,out,i;if(obj&&!obj.splice){out=[];for(i=0;true;i++){if(obj[i])
out[i]=obj[i];else
break;}
return out;}
return obj;}
function ucfirst(s){return s.charAt(0).toUpperCase()+s.substring(1);}
var mediaTypes={"Flash":{classid:"CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",type:"application/x-shockwave-flash",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,1,53,64"},"ShockWave":{classid:"CLSID:166B1BCA-3F9C-11CF-8075-444553540000",type:"application/x-director",codebase:"http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=10,2,0,023"},"WindowsMedia":{classid:"CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6",type:"application/x-mplayer2",codebase:"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=10,00,00,3646"},"QuickTime":{classid:"CLSID:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",type:"video/quicktime",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,3,0,0"},"DivX":{classid:"CLSID:67DABFBF-D0AB-41FA-9C46-CC0F21721616",type:"video/divx",codebase:"http://go.divx.com/plugin/DivXBrowserPlugin.cab"},"RealMedia":{classid:"CLSID:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA",type:"audio/x-pn-realaudio-plugin"},"Java":{classid:"CLSID:8AD9C840-044E-11D1-B3E9-00805F499D93",type:"application/x-java-applet",codebase:"http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"},"Silverlight":{classid:"CLSID:DFEAF541-F3E1-4C24-ACAC-99C30715084A",type:"application/x-silverlight-2"},"Video":{type:'video/mp4'},"Audio":{type:'audio/mp3'},"Iframe":{}};tinymce.create('tinymce.plugins.MediaPlugin',{init:function(ed,url){var self=this,lookup={};var cbase={"Flash":{codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+ed.getParam('media_version_flash','10,1,53,64')},"ShockWave":{codebase:"http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version="+ed.getParam('media_version_shockwave','10,2,0,023')},"WindowsMedia":{codebase:"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version="+ed.getParam('media_version_windowsmedia','10,00,00,3646')},"QuickTime":{codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version="+ed.getParam('media_version_quicktime','7,3,0,0')},"Java":{codebase:"http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version="+ed.getParam('media_version_java','1,5,0,0')}};each(cbase,function(v,k){extend(mediaTypes[k],v);});this.mimes={};(function(data){var items=data.split(/,/),i,y,ext;for(i=0;i<items.length;i+=2){ext=items[i+1].split(/ /);for(y=0;y<ext.length;y++){self.mimes[ext[y]]=items[i];}}})("application/x-director,dcr"+"video/divx,divx"+"application/pdf,pdf,"+"application/x-shockwave-flash,swf swfl,"+"audio/mpeg,mpga mpega mp2 mp3,"+"audio/ogg,ogg spx oga,"+"audio/x-wav,wav,"+"video/mpeg,mpeg mpg mpe,"+"video/mp4,mp4 m4v,"+"video/ogg,ogg ogv,"+"video/webm,webm,"+"video/quicktime,qt mov,"+"video/x-flv,flv,"+"video/vnd.rn-realvideo,rv"+"video/3gpp,3gp"+"video/x-matroska,mkv");self.editor=ed;self.url=url;var scriptRegExp='';each(mediaTypes,function(v,k){v.name=k;if(v.classid){lookup[v.classid]=v;}
if(v.type){lookup[v.type]=v;}
lookup['mceItem'+k]=v;lookup[k.toLowerCase()]=v;});self.lookup=lookup;function isMedia(n){return n&&n.nodeName=='IMG'&&/mceItem(Flash|ShockWave|WindowsMedia|QuickTime|RealMedia|DivX|Silverlight|Audio|Video|Generic|Iframe)/.test(n.className);}
ed.onPreInit.add(function(){var invalid=ed.settings.invalid_elements;if(ed.settings.schema==="html4"){ed.schema.addValidElements('iframe[longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height|allowfullscreen|seamless|*]');ed.schema.addValidElements('video[src|autobuffer|autoplay|loop|controls|width|height|poster|*],audio[src|autobuffer|autoplay|loop|controls|*],source[src|type|media|*],embed[src|type|width|height|*]');}
ed.schema.addCustomElements('comment');invalid=tinymce.explode(invalid,',');ed.parser.addNodeFilter('object,embed,video,audio,script,iframe',function(nodes){var i=nodes.length,node;while(i--){node=nodes[i];if(tinymce.inArray(invalid,node.name)==-1){self.toImage(node);}else{node.remove();}}});ed.serializer.addNodeFilter('img',function(nodes,name,args){var i=nodes.length,node;while(i--){node=nodes[i];if(/mceItem(Flash|ShockWave|WindowsMedia|QuickTime|RealMedia|DivX|Silverlight|Audio|Video|Generic|Embed|Iframe)/.test(node.attr('class')||'')){self.restoreElement(node,args);}}});});ed.onInit.add(function(){if(ed.theme&&ed.theme.onResolveName){ed.theme.onResolveName.add(function(theme,o){if(o.name==='img'&&/mceItem(Object|Embed|Audio|Video|Generic)/.test(o.node.className)){o.name='media';}
if(o.name==='img'&&/mceItemIframe/.test(o.node.className)){o.name='iframe';}});}
if(!ed.settings.compress.css)
ed.dom.loadCSS(url+"/css/content.css");});ed.onBeforeSetContent.add(function(ed,o){var h=o.content;h=h.replace(/<(audio|embed|object|video|iframe)([^>]*?)>([\w\W]+?)<\/\1>/gi,function(a,b,c,d){d=d.replace(/<!--\[if([^\]]*)\]>(<!)?-->/gi,'<![if$1]>');d=d.replace(/<!\[if([^\]]+)\]>/gi,function(a,b){return'<comment data-comment-condition="[if'+b+']">';});d=d.replace(/<!(--<!)?\[endif\](--)?>/gi,'</comment>');return'<'+b+c+'>'+d+'</'+b+'>';});o.content=h;});},getInfo:function(){return{longname:'Media',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};},convertUrl:function(url,force_absolute){var self=this,ed=self.editor,settings=ed.settings,converter=settings.url_converter,scope=settings.url_converter_scope||self;if(!url)
return url;var parts,query='',n=url.indexOf('?');if(n===-1){url=url.replace(/&amp;/g,'&');n=url.indexOf('&');}
if(n>0){query=url.substring(n+1,url.length),url=url.substr(0,n);}
if(force_absolute){url=ed.documentBaseURI.toAbsolute(url);}else{url=converter.call(scope,url,'src','object');}
return url+(query?'?'+query:'');},createTemplate:function(n,o){var self=this,ed=this.editor,dom=ed.dom,nn,hc,cn,html,v;hc=n.firstChild;nn=n.name;o=o||{};function is_child(n){return/^(audio|embed|object|video|iframe)$/.test(n.parent.name);}
if(/^(audio|embed|object|param|source|video|iframe)$/.test(nn)){var at=this.serializeAttributes(n);switch(nn){case'audio':case'embed':case'object':case'video':case'iframe':case'param':if(hc||is_child(n)){if(typeof o[nn]=='undefined'){o[nn]={};}
extend(o[nn],at);o=o[nn];}else{extend(o,at);}
break;case'source':if(typeof o[nn]=='undefined'){o[nn]=[];}
o[nn].push(at);break;}
if(hc){cn=n.firstChild;while(cn){self.createTemplate(cn,o);cn=cn.next;}}}else{if(nn=='comment'){if(v=n.attr('data-comment-condition')){if(typeof o[nn]=='undefined'){o[nn]={};}
extend(o[nn],{'data-comment-condition':v});if(hc){cn=n.firstChild;o=o[nn];while(cn){self.createTemplate(cn,o);cn=cn.next;}}}else{v=new tinymce.html.Serializer({inner:true,validate:false}).serialize(n);if(typeof o[nn]=='undefined'){o[nn]=[tinymce.trim(v)];}else{o[nn].push(tinymce.trim(v));}}}else{if(nn=='#text'){html=n.value;}else{html=new tinymce.html.Serializer().serialize(n);}}}
html=tinymce.trim(html);if(html){if(typeof o.html=='undefined'){o.html=[];}
o.html.push(html);}
return o;},toImage:function(n){var self=this,ed=this.editor,type,name,o={},data={},classid='',styles,matches;if(!n.parent||/^(object|audio|video|embed|iframe)$/.test(n.parent.name))
return;var img=new Node('img',1);if(n.name==='script'){if(n.firstChild)
matches=/(JCEMediaObject|write(Flash|ShockWave|QuickTime|RealMedia|WindowsMedia|DivX))/i.exec(n.firstChild.value);if(!matches)
return;type=matches[1].toLowerCase();data=JSON.parse(matches[2]);w=data.width;h=data.height;name='object';}else{name=n.name;var style=Styles.parse(n.attr('style'));var w=n.attr('width')||style.width||'';var h=n.attr('height')||style.height||'';var type=n.attr('type');data=this.createTemplate(n);if(name=='embed'&&type=='application/x-shockwave-flash'){name='object';data.param={};each(['bgcolor','flashvars','wmode','allowfullscreen','allowscriptaccess','quality'],function(k){var v=n.attr(k);if(v){if(k=='flashvars'){try{v=encodeURIComponent(v);}catch(e){}}
data.param[k]=v;}
delete data[k];});}
each(['audio','embed','object','video','iframe'],function(el){each(n.getAll(el),function(node){node.remove();});});if(n.attr('classid')){classid=n.attr('classid').toUpperCase();}
if(name=='object'){if(!data.data){var param=data.param;if(param){data.data=param.src||param.url||param.movie||param.source;}}}else{if(!data.src&&data.source){if(data.source.length>1){data.src=data.source[0].src;}}}
var lookup=this.lookup[classid]||this.lookup[type]||this.lookup[name]||{name:'generic'};type=lookup.name||type;var style=Styles.parse(n.attr('style'));each(['bgcolor','align','border','vspace','hspace'],function(na){var v=n.attr(na);if(v){switch(na){case'bgcolor':style['background-color']=v;break;case'align':if(/^(left|right)$/.test(v)){style['float']=v;}else{style['vertical-align']=v;}
break;case'vspace':style['margin-top']=v;style['margin-bottom']=v;break;case'hspace':style['margin-left']=v;style['margin-right']=v;break;default:style[na]=v;break;}}});each(['id','lang','dir','tabindex','xml:lang','style','title'],function(at){img.attr(at,n.attr(at));});if(styles=ed.dom.serializeStyle(style)){img.attr('style',styles);}}
o[name]=data;n.replace(img);var classes=[];if(n.attr('class')){classes=n.attr('class').split(' ');}
name=name.toLowerCase();classes.push('mceItem'+ucfirst(name));if(type&&name!==type.toLowerCase()){classes.push('mceItem'+ucfirst(type));}
if(name=='audio'){var agent=navigator.userAgent.match(/(Opera|Chrome|Safari|Gecko)/);if(agent){classes.push('mceItemAgent'+ucfirst(agent[0]));}}
img.attr({src:this.url+'/img/trans.gif',width:w,height:h,'class':classes.join(' '),'data-mce-json':JSON.serialize(o)});},serializeAttributes:function(n){var ed=this.editor,self=this,dom=this.editor.dom,attribs={},ti='',k,v;if(n!='iframe'||n!='param'){var type=n.attr('type'),src=n.attr('src')||n.attr('data');if(!type&&src){var ext;if(/\.([a-z0-9]{2,4})/.test(src)){ext=/\.([a-z0-9]{2,4})/.exec(src);ext=ext[1]||'';}
if(ext){attribs.type=this.mimes[ext];}}}
if(n.name=='param'){k=n.attr('name');v=n.attr('value');if(k&&v!=''){if(k=='flashvars'){try{v=encodeURIComponent(v);}catch(e){}}}
attribs[k]=v;}else{for(k in n.attributes.map){v=n.attributes.map[k];switch(k){case'poster':case'src':case'data':attribs[k]=self.convertUrl(v);break;case'autoplay':case'controls':case'loop':case'seamless':case'allowfullscreen':attribs[k]=k;break;case'frameborder':if(parseInt(v)==0&&ed.settings.schema==='html5'){attribs['seamless']='seamless';}else{attribs[k]=v;}
break;case'type':attribs[k]=v.replace(/"/g,"'");break;default:attribs[k]=v;break;}}}
if(n.name=='embed'&&n.parent.name=='object'){var params=n.parent.getAll('param');if(params){each(params,function(p){k=p.attr('name');v=p.attr('value');if(k&&v!=''){if(k=='flashvars'){try{v=encodeURIComponent(v);}catch(e){}}}
attribs[k]=v;});}}
return attribs;},createNodes:function(data,el){var self=this,ed=this.editor,s,dom=ed.dom;function createNode(o,el){each(o,function(v,k){var nn=el.name,n;if(tinymce.is(v,'object')){if(/(param|source)/.test(nn)&&/(audio|embed|object|video)/.test(k)){el=el.parent;}
if(k=='comment'){var node=new Node('#comment',8);node.value=v['data-comment-condition']+'>';delete v['data-comment-condition'];el.append(node);createNode(v,el);node=new Node('#comment',8);node.value='<![endif]';el.append(node);}else{if(v instanceof Array){each(v,function(s){if(tinymce.is(s,'string')){self.setAttribs(el,data,k,s);}else{node=new Node(k,1);if(k=='source'){node.shortEnded=true;}
createNode(s,node);el.append(node);}});}else{if(k=='param'){for(n in v){var param=new Node(k,1);param.shortEnded=true;self.setAttribs(param,data,n,v[n]);el.append(param);}}else{node=new Node(k,1);el.append(node);createNode(v,node);}}}}else{if(nn=='#comment'){var comment=new Node('#comment',8);comment.value=dom.decode(v);el.append(comment);}else{self.setAttribs(el,data,k,v);}}});}
createNode(data,el);return el;},setAttribs:function(n,data,k,v){var ed=this.editor,dom=ed.dom,nn=n.name;if(v==null||typeof v=='undefined'){return;}
if(nn=='param'){switch(k){case'flashvars':try{v=decodeURIComponent(v);}catch(e){}
break;case'src':case'movie':case'source':case'url':v=this.convertUrl(v);break;}
n.attr('name',k);n.attr('value',v.toString());}else{switch(k){case'width':case'height':v=data[k]||v;n.attr(k,v.toString());break;case'class':var cls=tinymce.explode(' ',n.attr('class'));if(tinymce.inArray(cls,v)==-1){cls.push(tinymce.trim(v));}
n.attr('class',tinymce.trim(cls.join(' ',v)));break;case'type':n.attr(k,v.replace(/(&(quot|apos);|")/g,"'"));break;case'flashvars':try{v=decodeURIComponent(v);}catch(e){}
n.attr(k,v);break;case'src':case'data':case'source':n.attr(k,this.convertUrl(v));break;case'html':var html=new Node('#text',3);html.raw=true;html.value=(n.value?n.value:'')+dom.decode(v);n.append(html);break;default:if(!k||typeof v=='undefined'){return;}
n.attr(k,v.toString());break;}}},getMimeType:function(s){var props,type,ext,cl=s.match(/mceItem(Flash|ShockWave|WindowsMedia|QuickTime|RealMedia|DivX|PDF|Silverlight|Iframe)/);if(cl){props=mediaTypes[cl[1]];if(props){type=props.type;}}
if(!props||type){if(/\.([a-z0-9]{2,4})/.test(s)){ext=s.substring(s.length,s.lastIndexOf('.')+1).toLowerCase();type=this.mimes[ext];}}
return type;},restoreElement:function(n,args){var self=this,ed=this.editor,dom=ed.dom,cl,props,v;var data=JSON.parse(n.attr('data-mce-json'));var name=this.getNodeName(n.attr('class'));var parent=new Node(name,1);var root=data[name];var src=root.src||root.data||'';var params=root.param||'';each(['width','height'],function(k){v=n.attr(k);if(v&&name!='audio'){if(!root[k]||root[k]!=v){root[k]=v;}}
each(['object','embed','video'],function(s){if(root[s]&&!root[s][k]){root[s][k]=v;}});});each(['id','lang','dir','tabindex','xml:lang','style','title','class'],function(at){v=n.attr(at);if(at=='class'){v=tinymce.trim(v.replace(/\s?mceItem([\w]+)/g,''));}
if(v&&/[\w\d]+/.test(v)){root[at]=v;}});var strict=ed.getParam('media_strict',true)&&/mceItem(Flash|ShockWave)/.test(n.attr('class'));if(name=='object'){if(!root.type){root.type=this.getMimeType(n.attr('class'))||this.getMimeType(src);}
params=params||{};delete root.src;if(strict){root.data=src;if(/mceItemFlash/.test(n.attr('class'))){extend(params,{'movie':src});}
delete params.src;delete root.embed;delete root.classid;delete root.codebase;}else{var lookup=this.lookup[root.type]||this.lookup[name]||{name:'generic'};if(lookup.name!=="generic"){if(!root.embed){root.embed={width:root.width,height:root.height,src:src,type:root.type||this.getMimeType(n.attr('class'))||this.getMimeType(src)};}
delete root.data;}
if(!root.classid){root.classid=lookup.classid;}
if(!root.codebase){root.codebase=lookup.codebase;}
if(root.embed){for(k in params){if(/^(movie|source|url)$/.test(k)){root.embed.src=params[k];}else{root.embed[k]=params[k];}}}
if(lookup.name!=="generic"){var k='src';if(/mceItemWindowsMedia/.test(n.attr('class'))){k='url';}
if(/mceItemSilverLight/.test(n.attr('class'))){k='source';}
params[k]=src;}
var props=this.lookup[name];extend(root,props);if(root.classid&&root.codebase){delete root.type;}}}else{if(root.src&&root.source){if(tinymce.is(root.source,'array')&&root.source.length){if(root.source.length==1){if(root.source[0].src==root.src){delete root.source;}
if(!root.type){root.type=this.getMimeType(root.src);}}else{delete root.src;}}}}
if(params){root.param=params;}
n.replace(this.createNodes(root,parent));},getNodeName:function(s){s=/mceItem(Audio|Embed|Object|Video|Iframe)/.exec(s);if(s){return s[1].toLowerCase();}}});tinymce.PluginManager.add('media',tinymce.plugins.MediaPlugin);})();
(function(){var each=tinymce.each,VK=tinymce.VK,Event=tinymce.dom.Event;var styleProps=new Array('background','background-attachment','background-color','background-image','background-position','background-repeat','border','border-bottom','border-bottom-color','border-bottom-style','border-bottom-width','border-color','border-left','border-left-color','border-left-style','border-left-width','border-right','border-right-color','border-right-style','border-right-width','border-style','border-top','border-top-color','border-top-style','border-top-width','border-width','outline','outline-color','outline-style','outline-width','height','max-height','max-width','min-height','min-width','width','font','font-family','font-size','font-style','font-variant','font-weight','content','counter-increment','counter-reset','quotes','list-style','list-style-image','list-style-position','list-style-type','margin','margin-bottom','margin-left','margin-right','margin-top','padding','padding-bottom','padding-left','padding-right','padding-top','bottom','clear','clip','cursor','display','float','left','overflow','position','right','top','visibility','z-index','orphans','page-break-after','page-break-before','page-break-inside','widows','border-collapse','border-spacing','caption-side','empty-cells','table-layout','color','direction','letter-spacing','line-height','text-align','text-decoration','text-indent','text-shadow','text-transform','unicode-bidi','vertical-align','white-space','word-spacing');tinymce.create('tinymce.plugins.ClipboardPlugin',{init:function(ed,url){var self=this,cb;self.editor=ed;self.url=url;this.canPaste=false;self.onPreProcess=new tinymce.util.Dispatcher(this);self.onPostProcess=new tinymce.util.Dispatcher(this);self.onAfterPaste=new tinymce.util.Dispatcher(this);self.onPreProcess.add(self._preProcess);self.onPostProcess.add(self._postProcess);self.onPreProcess.add(function(pl,o){ed.execCallback('paste_preprocess',pl,o);});self.onPostProcess.add(function(pl,o){ed.execCallback('paste_postprocess',pl,o);});ed.onKeyDown.addToTop(function(ed,e){if((VK.metaKeyPressed&&e.keyCode==86)||(e.shiftKey&&e.keyCode==45)){return false;}
if(!ed.getParam('clipboard_allow_cut',1)&&(VK.metaKeyPressed&&e.keyCode==88)){e.preventDefault();return false;}
if(!ed.getParam('clipboard_allow_copy',1)&&(VK.metaKeyPressed&&e.keyCode==67)){e.preventDefault();return false;}});self.pasteText=ed.getParam('clipboard_paste_text',1);self.pasteHtml=ed.getParam('clipboard_paste_html',1);function process(o){var dom=ed.dom,rng;ed.setProgressState(1);switch(self.command){case'mcePaste':if(!self.pasteHtml){self.command='mcePasteText';}
break;case'mcePasteText':if(!self.pasteText){self.command='mcePaste';}
break;case'mcePasteWord':if(!self.pasteWord||!self.pasteHtml){self.command='mcePasteText';}
break;default:self.command='mcePaste';if(!self.pasteHtml&&self.pasteText){self.command='mcePasteText';}
break;}
self.plainText=self.command=='mcePasteText';if(ed.getParam('clipboard_paste_force_cleanup')){o.wordContent=true;}
self.onPreProcess.dispatch(self,o);o.node=dom.create('div',0,o.content);if(tinymce.isGecko){rng=ed.selection.getRng(true);if(rng.startContainer==rng.endContainer&&rng.startContainer.nodeType==3){if(o.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(o.node.firstChild.nodeName)&&o.content.indexOf('__MCE_ITEM__')===-1)
dom.remove(o.node.firstChild,true);}}
self.onPostProcess.dispatch(self,o);o.content=ed.serializer.serialize(o.node,{getInner:1,forced_root_block:''});if(self.plainText){self._insertPlainText(o.content);}else{self._insert(o.content);}
self.onAfterPaste.dispatch(self);ed.setProgressState(0);self.command='mcePaste';}
ed.addCommand('mceInsertClipboardContent',function(u,o){process(o);});ed.onInit.add(function(){if(ed.plugins.contextmenu){ed.plugins.contextmenu.onContextMenu.add(function(th,m,e){var c=ed.selection.isCollapsed();if(ed.getParam('clipboard_cut',1)){m.add({title:'advanced.cut_desc',icon:'cut',cmd:'Cut'}).setDisabled(c);}
if(ed.getParam('clipboard_copy',1)){m.add({title:'advanced.copy_desc',icon:'copy',cmd:'Copy'}).setDisabled(c);}
if(self.pasteHtml){m.add({title:'clipboard.paste_desc',icon:'paste',cmd:'mcePaste'});}
if(self.pasteText){m.add({title:'clipboard.paste_text_desc',icon:'pastetext',cmd:'mcePasteText'});}});}});function grabContent(e){var n,or,rng,oldRng,sel=ed.selection,dom=ed.dom,doc=ed.getDoc(),body=ed.getBody(),posY,textContent;if(e.clipboardData||doc.dataTransfer){textContent=(e.clipboardData||doc.dataTransfer).getData('Text');if(ed.pasteAsPlainText){e.preventDefault();process({content:textContent.replace(/\r?\n/g,'<br />')});return;}}
if(dom.get('_mcePaste')){return;}
n=dom.add(body,'div',{id:'_mcePaste','class':'mcePaste','data-mce-bogus':'1'},'\uFEFF\uFEFF');if(body!=ed.getDoc().body)
posY=dom.getPos(ed.selection.getStart(),body).y;else
posY=body.scrollTop+dom.getViewPort(ed.getWin()).y;dom.setStyles(n,{position:'absolute',left:tinymce.isGecko?-40:0,top:posY-25,width:1,height:1,overflow:'hidden'});if(tinymce.isIE){oldRng=sel.getRng();rng=dom.doc.body.createTextRange();rng.moveToElementText(n);rng.execCommand('Paste');dom.remove(n);if(n.innerHTML==='\uFEFF\uFEFF'){e.preventDefault();return;}
sel.setRng(oldRng);sel.setContent('');self.canPaste=true;setTimeout(function(){process({content:n.innerHTML});},0);tinymce.dom.Event.cancel(e);}else{function block(e){e.preventDefault();}
self.canPaste=true;dom.bind(doc,'mousedown',block);dom.bind(doc,'keydown',block);or=ed.selection.getRng();n=n.firstChild;rng=doc.createRange();rng.setStart(n,0);rng.setEnd(n,2);sel.setRng(rng);window.setTimeout(function(){var h='',nl;if(!dom.select('div.mcePaste > div.mcePaste').length){nl=dom.select('div.mcePaste');each(nl,function(n){var child=n.firstChild;if(child&&child.nodeName=='DIV'&&child.style.marginTop&&child.style.backgroundColor){dom.remove(child,1);}
each(dom.select('span.Apple-style-span',n),function(n){dom.remove(n,1);});each(dom.select('br[data-mce-bogus]',n),function(n){dom.remove(n);});if(n.parentNode.className!='mcePaste')
h+=n.innerHTML;});}else{h='<p>'+dom.encode(textContent).replace(/\r?\n\r?\n/g,'</p><p>').replace(/\r?\n/g,'<br />')+'</p>';}
each(dom.select('div.mcePaste'),function(n){dom.remove(n);});if(or)
sel.setRng(or);process({content:h});dom.unbind(ed.getDoc(),'mousedown',block);dom.unbind(ed.getDoc(),'keydown',block);},0);}}
if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){ed.onKeyDown.addToTop(function(ed,e){if(((tinymce.isMac?e.metaKey:e.ctrlKey)&&e.keyCode==86)||(e.shiftKey&&e.keyCode==45))
grabContent(e);});}else{ed.onPaste.addToTop(function(ed,e){return grabContent(e);});}
if(ed.getParam('clipboard_paste_block_drop')){ed.onInit.add(function(){ed.dom.bind(ed.getBody(),['dragend','dragover','draggesture','dragdrop','drop','drag'],function(e){e.preventDefault();e.stopPropagation();return false;});});}
each(['Cut','Copy'],function(command){ed.addCommand(command,function(){var doc=ed.getDoc(),failed;try{doc.execCommand(command,false,null);}catch(ex){failed=true;}
var msg=ed.getLang('clipboard_msg','');msg=msg.replace(/\%s/g,tinymce.isMac?'CMD':'CTRL');if(failed||!doc.queryCommandSupported(command)){if(tinymce.isGecko){ed.windowManager.confirm(msg,function(state){if(state)
open('http://www.mozilla.org/editor/midasdemo/securityprefs.html','_blank');});}else
ed.windowManager.alert(ed.getLang('clipboard_no_support'));}});});each(['mcePasteText','mcePaste'],function(cmd){ed.addCommand(cmd,function(){var doc=ed.getDoc();self.command=cmd;if(ed.getParam('clipboard_paste_use_dialog')||(tinymce.isIE&&!doc.queryCommandSupported('Paste'))){return self._openWin(cmd);}else{try{doc.execCommand('Paste',false,null);}catch(e){self.canPaste=false;}
if(self.canPaste===false){return self._openWin(cmd);}}});});if(self.pasteHtml){ed.addButton('paste',{title:'clipboard.paste_desc',cmd:'mcePaste',ui:true});}
if(self.pasteText){ed.addButton('pastetext',{title:'clipboard.paste_text_desc',cmd:'mcePasteText',ui:true});}
if(ed.getParam('clipboard_cut',1)){ed.addButton('cut',{title:'advanced.cut_desc',cmd:'Cut',icon:'cut'});}
if(ed.getParam('clipboard_copy',1)){ed.addButton('copy',{title:'advanced.copy_desc',cmd:'Copy',icon:'copy'});}},getInfo:function(){return{longname:'Paste text/word',author:'Moxiecode Systems AB / Ryan demmer',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste',version:'2.5.4'};},_openWin:function(cmd){var ed=this.editor;ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=clipboard&cmd='+cmd,width:parseInt(ed.getParam("clipboard_paste_dialog_width","450")),height:parseInt(ed.getParam("clipboard_paste_dialog_height","400")),inline:1,popup_css:false},{cmd:cmd});},_preProcess:function(pl,o){var ed=pl.editor,h=o.content,rb;if(ed.settings.paste_enable_default_filters==false){return;}
if(tinymce.isIE&&document.documentMode>=9&&/<(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)/.test(o.content)){h=h.replace(/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,'$1');h=h.replace(/<br><br>/g,'<BR><BR>');h=h.replace(/<br>/g,' ');h=h.replace(/<BR><BR>/g,'<br>');}
h=h.replace(/^\s*(&nbsp;)+/g,'');h=h.replace(/(&nbsp;|<br[^>]*>)+\s*$/g,'');if(this.plainText){return h;}
var ooRe=/(Version:[\d\.]+)\s*?((Start|End)(HTML|Fragment):[\d]+\s*?){4}/;if(/(content=\"OpenOffice.org[^\"]+\")/i.test(h)||ooRe.test(h)){o.wordContent=true;h=h.replace(ooRe,'','g');h=h.replace(/[\s\S]+?<meta[^>]*>/,'');h=h.replace(/<!--[\s\S]+?-->/gi,'');h=h.replace(/<style[^>]*>[\s\S]+?<\/style>/gi,'');}
if(/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(h)){o.wordContent=true;}
if(o.wordContent){h=this._processWordContent(h);}
if(ed.getParam('clipboard_paste_remove_attributes')){var attribs=ed.getParam('clipboard_paste_remove_attributes').split(',');h=h.replace(new RegExp(' ('+attribs.join('|')+')="([^"]+)"','gi'),'');}
if(rb=ed.getParam('forced_root_block')){var blocks='';if(h.indexOf('<br><br>')!=-1){tinymce.each(h.split('<br><br>'),function(block){blocks+='<'+rb+'>'+block+'</'+rb+'>';});h=blocks;}}
var stripClasses=ed.getParam('clipboard_paste_strip_class_attributes');if(stripClasses=='none'||stripClasses=='mso'){stripClasses=false;}
if(stripClasses||o.wordContent){function removeClasses(match,g1){if(stripClasses){return'';}
if(o.wordContent){var cls=tinymce.grep(tinymce.explode(g1.replace(/^(["'])(.*)\1$/,"$2")," "),function(v){return(/^(?!mso)/i.test(v));});}
return cls.length?' class="'+cls.join(" ")+'"':'';}
h=h.replace(/ class="([^"]+)"/gi,removeClasses);h=h.replace(/ class=([\-\w]+)/gi,removeClasses);}
h=h.replace(/&nbsp;/g,'\u00a0');if(ed.getParam('clipboard_paste_remove_spans')){if(ed.settings.inline_styles){h=h.replace(/<\/?(u|strike)[^>]*>/gi,'');if(ed.settings.convert_fonts_to_spans){h=h.replace(/<\/?(font)[^>]*>/gi,'');}}
h=h.replace(/<\/?(span)[^>]*>/gi,'');}
if(!ed.getParam('forced_root_block')){if(ed.getParam('clipboard_paste_remove_empty_paragraphs',true)){h=h.replace(/<p([^>]*)>(\s|&nbsp;|\u00a0)*<\/p>/gi,'');}
h=h.replace(/<\/(p|div)>/gi,'<br /><br />').replace(/<(p|div)([^>]*)>/g,'').replace(/(<br \/>){2}$/g,'');}
h=h.replace(/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,'');if(ed.getParam('clipboard_paste_convert_urls',true)){h=this._convertURLs(h);}
if(ed.settings.verify_html===false){h=h.replace(/<b\b([^>]*)>/gi,'<strong$1>');h=h.replace(/<\/b>/gi,'</strong>');}
o.content=h;},_cleanWordContent:function(h){h=h.replace(/<meta([^>]+)>/,'');h=h.replace(/<!--[\s\S]+?-->/gi,'');h=h.replace(/<style([^>]*)>([\w\W]*?)<\/style>/gi,'');h=h.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|meta|link|\w:\w+)(?=[\s\/>]))[^>]*>/gi,'');return h;},_processFootNotes:function(h){var ed=this.editor;var footnotes=ed.getParam('clipboard_paste_process_footnotes','convert');if(footnotes==='remove'){h=h.replace(/<div[^>]+(mso-element:(end|foot)note|sdfootnote)[^>]+>[\s\S]+?<\/div>/gi,'');h=h.replace(/<div id="(edn|ftn)">[\s\S]+?<\/div>/gi,'');}else{h=h.replace(/<div[^>]+mso-element:\s*((end|foot)note|sdfootnote)[^>]+>/gi,'');h=h.replace(/<div id="(edn|ftn)">/gi,'');}
h=h.replace('<div><!--\[if !supportFootnotes\]--><br clear="all">','');if(footnotes==='convert'){h=h.replace(/<a\b([^>]+)style="(mso-(end|foot)note-id|sdfootnoteanc)[^"]+"([^>]+)>/gi,'<a$1data-mce-footnote="1"$4>');}else if(footnotes==='unlink'){h=h.replace(/<a\b[^>]+(mso-(end|foot)note-id|sdfootnoteanc)[^>]+>([\s\S]+?)<\/a>/gi,'$3');}else if(footnotes==='remove'){h=h.replace(/<a\b[^>]+(mso-(end|foot)note-id|sdfootnoteanc)[^>]+>([\s\S]+?)<\/a>/gi,'');}
h=h.replace(/<a\b([^>]+)href="([^"]+)"([^>]+)>([\s\S]*?)\[if !supportFootnotes\]([\s\S]*?)<\/a>/gi,function(a,b,c,d,e,f){var s=e+f;s=s.replace('<!--[endif]-->','').replace(/<\/?span([^>]*)>/g,'');if(footnotes==='convert'){return'<a data-mce-footnote="1"'+b+'href="'+c+'"'+d+'>'+s+'</a>';}
if(footnotes==='unlink'){return s;}
return"";});return h;},_processWordContent:function(h){var ed=this.editor,stripClass,len;if(ed.getParam('clipboard_paste_convert_lists',true)){h=h.replace(/<!--\[if !supportLists\]-->/gi,'__MCE_LIST_ITEM__');h=h.replace(/(<span[^>]+:\s*symbol[^>]+>)/gi,'$1__MCE_LIST_ITEM__');h=h.replace(/(<span[^>]+mso-list:[^>]+>)/gi,'$1__MCE_LIST_ITEM__');h=h.replace(/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,'$1__MCE_LIST_ITEM__');}
h=this._processFootNotes(h);h=this._cleanWordContent(h);h=h.replace(/<(\/?)s>/gi,"<$1strike>");h=h.replace(/&nbsp;/gi,"\u00a0");h=h.replace(/<table([^>]+)>/,function($1,$2){if(ed.settings.schema==="html5"){$2=$2.replace(/(border|cell(padding|spacing))="([^"]+)"/gi,'');}
return'<table'+$2+'>';});do{len=h.length;h=h.replace(/(<[a-z][^>]*\s)(?:id|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");}while(len!=h.length);if(!ed.getParam('clipboard_paste_remove_styles')){h=h.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(str,spaces){return(spaces.length>0)?spaces.replace(/./," ").slice(Math.floor(spaces.length/2)).split("").join("\u00a0"):"";});h=h.replace(/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(str,tag,style){var n=[],i=0,s=tinymce.explode(tinymce.trim(style).replace(/&quot;/gi,"'"),";");each(s,function(v){var name,value,parts=tinymce.explode(v,":");function ensureUnits(v){return v+((v!=="0")&&(/\d$/.test(v)))?"px":"";}
if(parts.length==2){name=parts[0].toLowerCase();value=parts[1].toLowerCase();switch(name){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":n[i++]=name.replace(/^mso-|-alt$/g,"")+":"+ensureUnits(value);return;case"horiz-align":n[i++]="text-align:"+value;return;case"vert-align":n[i++]="vertical-align:"+value;return;case"font-color":case"mso-foreground":n[i++]="color:"+value;return;case"mso-background":case"mso-highlight":n[i++]="background:"+value;return;case"mso-default-height":n[i++]="min-height:"+ensureUnits(value);return;case"mso-default-width":n[i++]="min-width:"+ensureUnits(value);return;case"mso-padding-between-alt":n[i++]="border-collapse:separate;border-spacing:"+ensureUnits(value);return;case"text-line-through":if((value=="single")||(value=="double")){n[i++]="text-decoration:line-through";}
return;case"mso-zero-height":if(value=="yes"){n[i++]="display:none";}
return;case'mso-special-character':if(value=="footnote"){n[i++]='vertical-align:super';}
break;}
if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(name)){return;}
n[i++]=name+":"+parts[1];}});if(i>0){return tag+' style="'+n.join(';')+'"';}else{return tag;}});}
if(ed.getParam('forced_root_block')){h=h.replace(/<br><br>/gi,'');}
return h;},_insertPlainText:function(h){var ed=this.editor,dom=ed.dom,rb,entities=null;if((typeof(h)==="string")&&(h.length>0)){h=this._cleanWordContent(h);if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(h)){h=h.replace(/[\n\r]+/g,'');}else{h=h.replace(/\r+/g,'');}
h=h.replace(/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n");h=h.replace(/<br[^>]*>|<\/tr>/gi,"\n");h=h.replace(/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t");h=h.replace(/<[a-z!\/?][^>]*>/gi,'');h=h.replace(/&nbsp;/gi," ");h=dom.decode(tinymce.html.Entities.encodeRaw(h));h=h.replace(/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1");h=h.replace(/\n{3,}/g,"\n\n");h=h.replace(/^\s+|\s+$/g,'');h=h.replace(/\u2026/g,"...");h=h.replace(/[\x93\x94]/g,'"');h=h.replace(/[\x60\x91\x92]/g,"'");if(rb=ed.getParam("forced_root_block")){h=h.replace(/^\s+|\s+$/g,'');h=h.replace(/\n\n/g,'</'+rb+'><'+rb+'>');}
h=h.replace(/\n+?/g,'<br />');if(ed.getParam('clipboard_paste_remove_empty_paragraphs',true)){h=h.replace(/<p>(\s|&nbsp;|\u00a0)?<\/p>/gi,'');}}
this._insert(h);},_convertToInline:function(node){var ed=this.editor,dom=ed.dom;var fontSizes=tinymce.explode(ed.settings.font_size_style_values);function replaceWithSpan(n,styles){tinymce.each(styles,function(value,name){if(value)
dom.setStyle(n,name,value);});dom.rename(n,'span');}
filters={font:function(n){replaceWithSpan(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:fontSizes[parseInt(n.size)-1]});},u:function(n){replaceWithSpan(n,{textDecoration:'underline'});},strike:function(n){replaceWithSpan(n,{textDecoration:'line-through'});}};if(ed.settings.convert_fonts_to_spans){tinymce.each(dom.select('font,u,strike',node),function(n){filters[n.nodeName.toLowerCase()](n);});}},_processStyles:function(node){var ed=this.editor,dom=ed.dom;var s=ed.getParam('clipboard_paste_retain_style_properties');if(s&&tinymce.is(s,'string')){styleProps=tinymce.explode(s);}
each(dom.select('*[style]',node),function(n){var ns={},x=0;var styles=dom.parseStyle(n.style.cssText);each(styles,function(v,k){if(tinymce.inArray(styleProps,k)!=-1){ns[k]=v;x++;}});dom.setAttrib(n,'style','');if(x>0){dom.setStyles(n,ns);}else{if(n.nodeName=='SPAN'&&!n.className){dom.remove(n,true);}}
if(tinymce.isWebKit){n.removeAttribute('data-mce-style');}});each(dom.select('*[align]',node),function(el){var v=dom.getAttrib(el,'align');if(v==="left"||v==="right"||v==="center"){if(/(IFRAME|IMG|OBJECT|VIDEO|AUDIO|EMBED)/i.test(el.nodeName)){if(v==="center"){dom.setStyles(el,{'margin':'auto','display':'block'});}else{dom.setStyle(el,'float',v);}}else{dom.setStyle(el,'text-align',v);}}
el.removeAttribute('align');});},_convertURLs:function(h){var ex='([-!#$%&\'\*\+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&\'\*\+\\/0-9=?A-Z^_`a-z{|}~]+\.[-!#$%&\'*+\\./0-9=?A-Z^_`a-z{|}~]+)';var ux='((news|telnet|nttp|file|http|ftp|https)://[-!#$%&\'\*\+\\/0-9=?A-Z^_`a-z{|}~;]+\.[-!#$%&\'\*\+\\./0-9=?A-Z^_`a-z{|}~;]+)';h=h.replace(new RegExp('(=["\']|>)?'+ux,'g'),function(a,b,c){if(!b){return'<a href="'+c+'">'+c+'</a>';}
return a;});h=h.replace(new RegExp('(=["\']mailto:|>)?'+ex,'g'),function(a,b,c){if(!b){return'<a href="mailto:'+c+'">'+c+'</a>';}
return a;});return h;},_convertFootNotes:function(node){var ed=this.editor,dom=ed.dom;each(dom.select('a[data-mce-footnote]',node),function(n,i){var anchor,id,href=n.getAttribute('href');dom.remove(ed.dom.select('span',n),1);n.removeAttribute('data-mce-footnote');n.removeAttribute('title');dom.setStyle(n,'vertical-align','super');if(href.indexOf('#')!==-1){id=href.substring(href.indexOf('#')+1);}
if(id){if(!n.id){dom.setAttrib(n,'id','ftnref'+id.replace(/\D/g,''));}
anchor=dom.select('a[name="'+id+'"]',node);if(anchor.length){anchor=anchor[0];id=id.replace(/[^a-z]+(\w+)/gi,'$1');var attribs={'class':'mceItemAnchor','name':null,'id':null,'href':'#'+n.id};var k=ed.settings.schema=='html5'?'id':'name';attribs[k]=id;dom.setAttribs(anchor,attribs);dom.setAttribs(n,{'href':'#'+id});}}});},_postProcess:function(pl,o){var self=this,ed=this.editor,dom=ed.dom,h;if(ed.settings.paste_enable_default_filters==false){return;}
if(this.plainText){return;}
each(dom.select('span.Apple-style-span',o.node),function(n){dom.remove(n,1);});if(!ed.getParam('clipboard_paste_remove_spans')){if(ed.settings.inline_styles){this._convertToInline(o.node);}}
if(o.wordContent){dom.remove(dom.select('a[name="_GoBack"]',o.node),1);each(dom.select('a',o.node),function(n){var href=n.getAttribute('href');if(!href||href.indexOf('#_Toc')===0){dom.remove(n,1);}});if(ed.getParam('clipboard_paste_convert_lists',true)){this._convertLists(o.node);}
if(ed.getParam('clipboard_paste_process_footnotes','convert')==='convert'){this._convertFootNotes(o.node);}
each(dom.select('*[lang]',o.node),function(el){el.removeAttribute('lang');});each(dom.select('td',o.node),function(el){var p=dom.select('p',el);if(p.length===1){dom.remove(p[0],true);}});}
if(ed.getParam('clipboard_paste_remove_styles')){each(dom.select('*[style]',o.node),function(el){el.removeAttribute('style');el.removeAttribute('data-mce-style');});}else{this._processStyles(o.node);}
each(dom.select('*[style]',o.node),function(el){var m=el.style.marginLeft,v='';if(m&&m.indexOf('px')===-1){v=parseInt(m,10);if(m.indexOf('pt')!==-1&&v>0){v=Math.round(v/35.4)*30;}
dom.setStyle(el,'margin-left',v);}});var imgRe=/(file:|data:image)\//i,uploader=ed.plugins.upload;var canUpload=uploader&&uploader.plugins.length;each(dom.select('img',o.node),function(el){var s=dom.getAttrib(el,'src');if(!s||imgRe.test(s)){if(ed.getParam('clipboard_paste_upload_images')&&canUpload){ed.dom.setAttrib(el,'data-mce-upload-marker','1');}else{dom.remove(el);}}else{dom.setAttrib(el,'src',ed.convertURL(s));}});each(dom.select('a',o.node),function(el){var s=dom.getAttrib(el,'href');if(s){if(s.charAt(0)!='#'){dom.getAttrib(el,'href',ed.convertURL(s));}}else{if(!el.name||!el.id){dom.remove(el);}}});if(ed.getParam('clipboard_paste_remove_tags')){dom.remove(dom.select(ed.getParam('clipboard_paste_remove_tags'),o.node),1);}
if(ed.getParam('clipboard_paste_keep_tags')){var tags=ed.getParam('clipboard_paste_keep_tags');dom.remove(dom.select('*:not('+tags+')',o.node),1);}
var emptyRe=/^(\s|&nbsp;|\u00a0)?$/;if(ed.getParam('clipboard_paste_remove_spans')){dom.remove(dom.select('span',o.node),1);}else{ed.dom.remove(dom.select('span:empty',o.node));each(dom.select('span',o.node),function(n){var h=n.innerHTML;if(emptyRe.test(h)){dom.remove(n);}
if(dom.getAttribs(n).length===0){dom.remove(n,1);}});}
if(ed.getParam('clipboard_paste_remove_empty_paragraphs',true)){dom.remove(dom.select('p:empty',o.node));each(dom.select('p',o.node),function(n){var h=n.innerHTML;if(emptyRe.test(h)){dom.remove(n);}});}},_convertLists:function(node){var ed=this.editor,dom=ed.dom,listElm,li,lastMargin=-1,margin,levels=[],lastType;var ULRX=/^(__MCE_LIST_ITEM__)*\s*[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/;var OLRX=/^(__MCE_LIST_ITEM__)*\s*\(?(\w+)(\.|\))\s*\u00a0*/;each(dom.select('p, h1, h2, h3, h4, h5, h6',node),function(p,i){var sib,val='',type,html,idx,parents,s,chars,st,start,cls=p.className;html=p.innerHTML;if(html.indexOf('__MCE_LIST_ITEM__')===-1){listElm=lastMargin=0;return;}
val=html.replace(/<\/?\w+[^>]*>/gi,'').replace(/&nbsp;/g,'\u00a0');if(ULRX.test(val)){type='ul';}
if(s=val.match(OLRX)){type='ol';chars=s[2];if(chars&&chars!='__MCE_LIST_ITEM__'){if(/[a-z+?]/.test(chars)){st='lower-alpha';}
if(/[A-Z+?]/.test(chars)){st='upper-alpha';}
if(/[ivx+]/.test(chars)){st='lower-roman';}
if(/[IVX+]/.test(chars)){st='upper-roman';}
if(i===0&&!st&&parseInt(chars)>1){start=parseInt(chars);}}}
if(type){margin=parseFloat(p.style.marginLeft||0);if(margin>lastMargin){levels.push(margin);}
if(!listElm||type!=lastType){listElm=dom.create(type);dom.insertAfter(listElm,p);}else{if(margin>lastMargin){listElm=dom.add(li,type);}else if(margin<lastMargin){idx=tinymce.inArray(levels,margin);if(idx<0){idx=0;}
parents=dom.getParents(listElm.parentNode,type);listElm=parents[parents.length-1-idx]||listElm;}}
each(dom.select('span',p),function(span){var h=span.innerHTML.replace(/<\/?\w+[^>]*>/gi,'').replace(/&nbsp;/g,'\u00a0');if(ULRX.test(h)||OLRX.test(h)){dom.remove(span,h.indexOf('__MCE_LIST_ITEM__')!==-1);}
if(/^(\s|\u00a0|&nbsp;)+$/.test(h)){dom.remove(span);}
if(dom.getAttribs(span).length===0){dom.remove(span,1);}});html=p.innerHTML;if(type=='ul'){html=html.replace(ULRX,'');}else{html=html.replace(OLRX,'');}
var args={'start':start};html=tinymce.trim(html);html=html.replace(/^(&nbsp;)+|(&nbsp;)+$/gi,'');li=dom.add(listElm,'li',args,html);if(st&&typeof st!='undefined'){dom.setStyle(li,'list-style-type',st);}
dom.remove(p);lastMargin=margin;lastType=type;}else{listElm=lastMargin=0;}});var h=node.innerHTML;if(h.indexOf('__MCE_LIST_ITEM__')!==-1){node.innerHTML=h.replace(/__MCE_LIST_ITEM__/g,'');}},_insert:function(h,skip_undo){var ed=this.editor;if(ed.getParam('clipboard_paste_remove_empty_paragraphs',true)){h=h.replace(/<p([^>]+)>(&nbsp;|\u00a0)?<\/p>/g,'');}
if(ed.getParam('clipboard_paste_filter')){var re,rules=ed.getParam('clipboard_paste_filter').split(';');each(rules,function(s){if(/^\/.*\/(g|i|m)*$/.test(s)){re=(new Function('return '+s))();}else{re=new RegExp(s);}
h=h.replace(re,"");});}
var verify=ed.settings.verify_html;ed.settings.verify_html=ed.settings.validate=true;ed.execCommand('mceInsertContent',false,h,{skip_undo:skip_undo});ed.settings.verify_html=ed.settings.validate=verify;}});tinymce.PluginManager.add('clipboard',tinymce.plugins.ClipboardPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,each=tinymce.each;tinymce.create('tinymce.plugins.SearchReplacePlugin',{init:function(ed,url){function open(m){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=searchreplace',width:420+parseInt(ed.getLang('searchreplace.delta_width',0)),height:190+parseInt(ed.getLang('searchreplace.delta_height',0)),inline:1,auto_focus:0,popup_css:false},{mode:m,search_string:ed.selection.getContent({format:'text'}),plugin_url:url});};var self=this;this.bookmark=null;this.editor=ed;ed.addCommand('mceSearch',function(ui,s){if(ed.getParam('searchreplace_use_dialog',1)){return open('find');}
var se=ed.selection,r,b,w=ed.getWin(),ca=s.casesensitive,v=s.value||'',b=s.backwards,fl=0,fo=0,rs=s.replace,result;if(!v)
return;if(tinymce.isIE){r=ed.getDoc().selection.createRange();}
if(ca)
fl=fl|4;function replace(){ed.selection.setContent(rs);};var complete=s.onComplete||function(){};var find=s.onFind||function(){};switch(s.mode){case'all':ed.execCommand('SelectAll');ed.selection.collapse(true);if(tinymce.isIE){ed.focus();r=ed.getDoc().selection.createRange();while(r.findText(s,b?-1:1,fl)){r.scrollIntoView();r.select();replace();fo=1;if(b){r.moveEnd("character",-(rs.length));}}}else{while(w.find(s,ca,b,false,false,false,false)){replace();fo=1;}}
complete.call(s.scope||this,!!fo);case'current':if(!ed.selection.isCollapsed()){replace();}
break;}
se.collapse(b);r=se.getRng();if(tinymce.isIE){ed.focus();r=ed.getDoc().selection.createRange();if(r.findText(v,b?-1:1,fl)){r.scrollIntoView();r.select();result=true;find.call(s.scope||this);}else{result=false;}}else{result=w.find(v,ca,b,true,false,false,false);if(result){find.call(s.scope||this);}}
complete.call(s.scope||this,result);});if(ed.getParam('searchreplace_use_dialog',1)){ed.addCommand('mceReplace',function(){open('replace');});ed.addButton('search',{title:'searchreplace.search_desc',cmd:'mceSearch'});ed.addButton('replace',{title:'searchreplace.replace_desc',cmd:'mceReplace'});}
ed.addShortcut('ctrl+f','searchreplace.search_desc',function(){if(ed.getParam('searchreplace_use_dialog',1)){return ed.execCommand('mceSearch');}
var cm=ed.controlManager,c=cm.get(cm.prefix+'searchreplace_search');if(c&&!c.isDisabled()){c.showDialog();}});},createControl:function(n,cm){var self=this,ed=this.editor;switch(n){case'replace':if(ed.getParam('searchreplace_use_dialog',1)){return;}
var content=DOM.create('div');var fieldset=DOM.add(content,'fieldset',{},'<legend>'+ed.getLang('searchreplace.replace_desc','Replace')+'</legend>');var n=DOM.add(fieldset,'div');DOM.add(n,'label',{'for':ed.id+'_searchreplace_find'},ed.getLang('searchreplace.find','Find What'));var find=DOM.add(n,'input',{type:'text',id:ed.id+'_searchreplace_find',style:{'width':210}});n=DOM.add(fieldset,'div');DOM.add(n,'label',{'for':ed.id+'_searchreplace_replace'},ed.getLang('searchreplace.replace','Replace with'));var replace=DOM.add(n,'input',{type:'text',id:ed.id+'_searchreplace_replace',style:{'width':210}});n=DOM.add(fieldset,'div');var casesensitive=DOM.add(n,'input',{type:'checkbox',id:ed.id+'_searchreplace_casesensitive'});DOM.add(n,'label',{'for':ed.id+'_searchreplace_casesensitive'},ed.getLang('searchreplace.casesensitive','Match Case'));var c=new tinymce.ui.ButtonDialog(cm.prefix+'searchreplace_search',{title:ed.getLang('searchreplace.replace_desc','Search / Replace'),'class':'mce_search','dialog_class':ed.getParam('skin')+'Skin','content':content,'width':320,buttons:[{title:ed.getLang('searchreplace.find_next','Next'),id:'searchreplace_find_next',click:function(e){if(!find.value){return false;}
DOM.removeClass(find,'search_error');var r=ed.execCommand('mceSearch',false,{value:find.value,casesensitive:casesensitive.checked,onComplete:function(r){if(!r){DOM.addClass(find,'search_error');}},onFind:function(){c.storeSelection();}});return false;},scope:self},{title:ed.getLang('searchreplace.find_previous','Previous'),id:'searchreplace_find_previous',click:function(e){if(!find.value){return false;}
DOM.removeClass(find,'search_error');var r=ed.execCommand('mceSearch',false,{value:find.value,casesensitive:casesensitive.checked,backwards:true,onComplete:function(r){if(!r){DOM.addClass(find,'search_error');}}});return false;},scope:self},{title:ed.getLang('searchreplace.replace','Replace'),id:'searchreplace_replace',click:function(e){if(!find.value||!replace.value){return false;}
var r=ed.execCommand('mceSearch',false,{value:find.value,casesensitive:casesensitive.checked,replace:replace.value,mode:'current'});return false;},scope:self},{title:ed.getLang('searchreplace.replace_all','Replace All'),id:'searchreplace_replace_all',click:function(e){if(!find.value||!replace.value){return false;}
var r=ed.execCommand('mceSearch',false,{value:find.value,casesensitive:casesensitive.checked,replace:replace.value,mode:'all'});return false;},scope:self}]},ed);c.onShowDialog.add(function(){find.focus();});c.onHideDialog.add(function(){DOM.removeClass(find,'search_error');find.value=replace.value='';c.restoreSelection();});ed.onRemove.add(function(){c.destroy();});return cm.add(c);break;}
return null;},getInfo:function(){return{longname:'Search/Replace',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/searchreplace',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('searchreplace',tinymce.plugins.SearchReplacePlugin);})();
(function(){tinymce.create("tinymce.plugins.Directionality",{init:function(b,c){var d=this;d.editor=b;function a(e){var h=b.dom,g,f=b.selection.getSelectedBlocks();if(f.length){g=h.getAttrib(f[0],"dir");tinymce.each(f,function(i){if(!h.getParent(i.parentNode,"*[dir='"+e+"']",h.getRoot())){if(g!=e){h.setAttrib(i,"dir",e)}else{h.setAttrib(i,"dir",null)}}});b.nodeChanged()}}b.addCommand("mceDirectionLTR",function(){a("ltr")});b.addCommand("mceDirectionRTL",function(){a("rtl")});b.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"});b.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"});b.onNodeChange.add(d._nodeChange,d)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(b,a,e){var d=b.dom,c;e=d.getParent(e,d.isBlock);if(!e){a.setDisabled("ltr",1);a.setDisabled("rtl",1);return}c=d.getAttrib(e,"dir");a.setActive("ltr",c=="ltr");a.setDisabled("ltr",0);a.setActive("rtl",c=="rtl");a.setDisabled("rtl",0)}});tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)})();
(function(){var DOM=tinymce.DOM;var transferState=function(oldEditor,newEditor,bookmark){var transferColorButtonState=function(swapme){var c=oldEditor.controlManager.get(swapme);var newC=newEditor.controlManager.get(swapme);if(c&&newC){newC.displayColor(c.value);}};transferColorButtonState('forecolor');transferColorButtonState('backcolor');newEditor.setContent(oldEditor.getContent({format:'raw'}),{format:'raw'});newEditor.selection.moveToBookmark(bookmark);if(oldEditor.plugins.spellchecker&&newEditor.plugins.spellchecker){newEditor.plugins.spellchecker.setLanguage(oldEditor.plugins.spellchecker.selectedLang);}};tinymce.create('tinymce.plugins.FullScreenPlugin',{init:function(ed,url){var t=this,s={},de=DOM.doc.documentElement,vp,fullscreen_overflow,fullscreen_html_overflow,fullscreen_scrollx,fullscreen_scrolly,posCss,bookmark;ed.onFullScreen=new tinymce.util.Dispatcher();ed.addCommand('mceFullScreen',function(){var win,oed;if(ed.getParam('fullscreen_is_enabled')){if(ed.getParam('fullscreen_new_window'))
closeFullscreen();else{DOM.win.setTimeout(function(){var fullscreenEditor=ed;var originalEditor=tinyMCE.get(fullscreenEditor.getParam('fullscreen_editor_id'));originalEditor.plugins.fullscreen.saveState(fullscreenEditor);originalEditor.onFullScreen.dispatch(originalEditor,false);tinyMCE.remove(fullscreenEditor);},10);}
return;}
if(ed.getParam('fullscreen_new_window')){t.fullscreenSettings={bookmark:ed.selection.getBookmark()};win=DOM.win.open(url+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{win.resizeTo(screen.availWidth,screen.availHeight);}catch(e){}}else{fullscreen_overflow=DOM.getStyle(DOM.doc.body,'overflow',1)||'auto';fullscreen_html_overflow=DOM.getStyle(de,'overflow',1);vp=DOM.getViewPort();fullscreen_scrollx=vp.x;fullscreen_scrolly=vp.y;if(tinymce.isOpera&&fullscreen_overflow=='visible')
fullscreen_overflow='auto';if(tinymce.isIE&&fullscreen_overflow=='scroll')
fullscreen_overflow='auto';if(tinymce.isIE&&(fullscreen_html_overflow=='visible'||fullscreen_html_overflow=='scroll'))
fullscreen_html_overflow='auto';if(fullscreen_overflow=='0px')
fullscreen_overflow='';DOM.setStyle(DOM.doc.body,'overflow','hidden');de.style.overflow='hidden';vp=DOM.getViewPort();DOM.win.scrollTo(0,0);if(vp.h<680){DOM.setStyle(DOM.doc.body,'overflow','auto');de.style.overflow='auto';}
if(tinymce.isIE)
vp.h-=1;if(tinymce.isIE6||document.compatMode=='BackCompat')
posCss='absolute;top:'+vp.y;else
posCss='fixed;top:0';n=DOM.add(DOM.doc.body,'div',{id:'mce_fullscreen_container',style:'position:'+posCss+';left:0;width:'+vp.w+'px;height:'+vp.h+'px;z-index:200000;'});DOM.add(n,'div',{id:'mce_fullscreen'});tinymce.each(ed.settings,function(v,n){s[n]=v;});s.id='mce_fullscreen';s.width=n.clientWidth;s.height=n.clientHeight-15;s.fullscreen_is_enabled=true;s.fullscreen_editor_id=ed.id;s.theme_advanced_resizing=false;s.save_onsavecallback=function(){ed.setContent(tinyMCE.get(s.id).getContent());ed.execCommand('mceSave');};tinymce.each(ed.getParam('fullscreen_settings'),function(v,k){s[k]=v;});var bookmark;try{bookmark=ed.selection.getBookmark();}catch(e){}
t.fullscreenSettings={bookmark:bookmark,fullscreen_overflow:fullscreen_overflow,fullscreen_html_overflow:fullscreen_html_overflow,fullscreen_scrollx:fullscreen_scrollx,fullscreen_scrolly:fullscreen_scrolly};if(s.theme_advanced_toolbar_location==='external')
s.theme_advanced_toolbar_location='top';tinyMCE.oldSettings=tinyMCE.settings;t.fullscreenEditor=new tinymce.Editor('mce_fullscreen',s);t.fullscreenEditor.onInit.add(function(){t.loadState(t.fullscreenEditor);});t.fullscreenEditor.render();t.fullscreenElement=new tinymce.dom.Element('mce_fullscreen_container');t.fullscreenElement.update();t.resizeFunc=tinymce.dom.Event.add(DOM.win,'resize',function(){var vp=tinymce.DOM.getViewPort(),fed=t.fullscreenEditor,outerSize,innerSize;outerSize=fed.dom.getSize(fed.getContainer().getElementsByTagName('table')[0]);innerSize=fed.dom.getSize(fed.getContainer().getElementsByTagName('iframe')[0]);fed.theme.resizeTo(vp.w-outerSize.w+innerSize.w,vp.h-outerSize.h+innerSize.h);});ed.onFullScreen.dispatch(t.fullscreenEditor,true);}});ed.addButton('fullscreen',{title:'fullscreen.desc',cmd:'mceFullScreen'});ed.onNodeChange.add(function(ed,cm){cm.setActive('fullscreen',ed.getParam('fullscreen_is_enabled'));});t.loadState=function(fullscreenEditor){if(!(fullscreenEditor&&t.fullscreenSettings)){throw"No fullscreen editor to load to";}
transferState(ed,fullscreenEditor,t.fullscreenSettings.bookmark);fullscreenEditor.focus();};t.saveState=function(fullscreenEditor){if(!(fullscreenEditor&&t.fullscreenSettings)){throw"No fullscreen editor to restore from";}
var settings=t.fullscreenSettings;var bookmark;try{bookmark=fullscreenEditor.selection.getBookmark();}catch(e){}
transferState(fullscreenEditor,ed,bookmark);if(!ed.getParam('fullscreen_new_window')){tinymce.dom.Event.remove(DOM.win,'resize',t.resizeFunc);delete t.resizeFunc;DOM.remove('mce_fullscreen_container');DOM.doc.documentElement.style.overflow=settings.fullscreen_html_overflow;DOM.setStyle(DOM.doc.body,'overflow',settings.fullscreen_overflow);DOM.win.scrollTo(settings.fullscreen_scrollx,settings.fullscreen_scrolly);}
tinyMCE.settings=tinyMCE.oldSettings;delete tinyMCE.oldSettings;delete t.fullscreenEditor;delete t.fullscreenElement;delete t.fullscreenSettings;DOM.win.setTimeout(function(){ed.selection.moveToBookmark(bookmark);ed.focus();},10);};},getInfo:function(){return{longname:'Fullscreen',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('fullscreen',tinymce.plugins.FullScreenPlugin);})();
(function(){var each=tinymce.each;tinymce.create('tinymce.plugins.Preview',{init:function(ed,url){var self=this,DOM=tinymce.DOM;this.editor=ed,this.url=url;this.active=[];ed.addCommand('mcePreview',function(){self._togglePreview();});ed.onBeforeExecCommand.add(function(ed,cmd,ui,v,o){if(cmd=='mcePrint'){if(self.getState()){o.terminate=true;var preview=DOM.get(ed.id+'_preview_iframe');if(preview){preview.contentWindow.print();}}}});ed.onInit.add(function(){var s=ed.getParam('preview_state',false);if(typeof s!='undefined'){self.setState(!s);self._togglePreview();}
if(ed.onFullScreen){ed.onFullScreen.add(function(editor,state){if(!state){self.setState(!editor.settings.preview_state);self._togglePreview();}});}});ed.onSetContent.add(function(ed,o){if(self.getState()){self._disable();}});ed.onExecCommand.add(function(ed,cmd){switch(cmd){case'mcePreview':window.setTimeout(function(){self._disable();},0);break;case'mceFullScreen':break;}});ed.onNodeChange.add(function(ed,cm,n){var s=self.getState();if(s){self._disable();}});ed.addButton('preview',{title:'preview.desc',cmd:'mcePreview'});ed.theme.onResize.add(function(){if(self.getState()){self.resize();}});},getState:function(){return this.editor.getParam('preview_state',false);},setState:function(s){this.editor.settings.preview_state=s;},getTop:function(){var ed=this.editor,container=ed.getContentAreaContainer();return container.offsetTop+Math.round((container.offsetHeight-container.clientHeight)/2);},resize:function(w,h){var self=this,ed=this.editor,DOM=tinymce.DOM,ifr=DOM.get(ed.id+'_ifr');w=parseFloat(w)||parseFloat(DOM.getStyle(ifr,'width'));h=parseFloat(h)||parseFloat(DOM.getStyle(ifr,'height'));DOM.setStyles(DOM.get(ed.id+'_preview_iframe'),{'width':w,'height':h});},_disable:function(){var self=this;window.setTimeout(function(){self._toggleDisabled();},0);},_toggleDisabled:function(){var self=this,ed=this.editor,DOM=tinymce.DOM,cm=ed.controlManager;var state=this.getState();var active=DOM.select('.mceButtonActive',DOM.get(ed.id+'_toolbargroup'));each(active,function(n){cm.setActive(n.id,!state);});each(DOM.select('.mceButton, .mceListBox, .mceSplitButton',DOM.get(ed.id+'_toolbargroup')),function(n){var id=n.id;if(n.className.indexOf('mceSplitButton')!==-1){id=n.parentNode.id;}
if(id){cm.setDisabled(id,state);}});cm.setActive('preview',state);cm.setActive('fullscreen',(ed.id=='mce_fullscreen'));cm.setDisabled('preview',false);cm.setDisabled('print',false);cm.setDisabled('fullscreen',false);},_togglePreview:function(state){var self=this,ed=this.editor,DOM=tinymce.DOM;var state=this.getState();var iframe=DOM.get(ed.id+'_ifr');var preview=DOM.get(ed.id+'_preview_iframe');var container=DOM.get(ed.id+'_preview_container');var toolbar=DOM.get(ed.id+'_toolbargroup');var w=parseFloat(iframe.clientWidth);var h=parseFloat(iframe.clientHeight);var editorpath=DOM.get(ed.id+'_path_row');var wordcount=DOM.get(ed.id+'-word-count');if(tinymce.isIE){DOM.setStyle(iframe.parentNode,'position','relative');}
if(!state){ed.setProgressState(true);if(!container){container=DOM.create('div',{id:ed.id+'_preview_container',role:'application',style:{position:'absolute',top:tinymce.isIE?0:this.getTop()}});var parent=iframe.parentNode;parent.insertBefore(container,iframe);}
if(!preview){preview=DOM.add(container,'iframe',{frameborder:0,src:'javascript:""',id:ed.id+'_preview_iframe'});var html='<html><head xmlns="http://www.w3.org/1999/xhtml">';html+='<base href="'+tinymce.settings['document_base_url']+'" />';html+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var css=tinymce.explode(ed.getParam('content_css'));html+='<link href="'+self.url+'/css/preview.css" rel="stylesheet" type="text/css" />';tinymce.each(css,function(url){html+='<link href="'+url+'" rel="stylesheet" type="text/css" />';});html+='</head><body style="margin:5px;">';html+='</body></html>';var doc=preview.contentWindow.document;doc.open();doc.write(html);doc.close();}
DOM.setStyles(preview,{width:w,height:h});if(editorpath){DOM.hide(editorpath);}
if(wordcount){DOM.hide(wordcount.parentNode);}
self._loadData(preview);DOM.setStyle(iframe,'hidden');DOM.setAttrib(iframe,'aria-hidden',true);DOM.show(container);container.removeAttribute('aria-hidden');}else{if(preview){if(editorpath){DOM.show(editorpath);}
if(wordcount){DOM.show(wordcount.parentNode);}
var doc=preview.contentWindow.document;doc.body.innerHTML='';DOM.removeClass(iframe,'hidden');iframe.removeAttribute('aria-hidden');DOM.hide(container);DOM.setAttrib(container,'aria-hidden',true);}}
this.setState(!state);},_loadData:function(n){var self=this,ed=this.editor,s=tinymce.settings,doc=n.contentWindow.document;var query='',args={'format':'raw'};args[ed.settings.token]=1;tinymce.extend(args,{'data':ed.getContent()});for(k in args){query+='&'+k+'='+encodeURIComponent(args[k]);}
tinymce.util.XHR.send({url:s['site_url']+'index.php?option=com_jce&view=editor&layout=plugin&plugin=preview&component_id='+s['component_id'],data:'json='+tinymce.util.JSON.serialize({'fn':'showPreview'})+'&'+query,content_type:'application/x-www-form-urlencoded',success:function(x){if(/^[\],:{}\s]*$/.test(x.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){o=tinymce.util.JSON.parse(x);}else{o={error:'Invalid JSON: '+x};}
if(o.error){var msg=o.error;if(o.text){msg=o.text.join('');}
ed.windowManager.alert(msg);ed.setProgressState(false);return false;}
r=o.result;doc.body.innerHTML=r;ed.setProgressState(false);},error:function(e,x){doc.body.innerHTML=ed.getContent();ed.setProgressState(false);}});},getInfo:function(){return{longname:'Preview',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/preview',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('preview',tinymce.plugins.Preview);})();
(function(){var each=tinymce.each;tinymce.create('tinymce.plugins.Source',{init:function(ed,url){var self=this;this.editor=ed;this.url=url;ed.addCommand('mceSource',function(){self.toggleSource();});this.invisibles=false;if(ed.onContextMenu){var cMenu=ed.onContextMenu.addToTop(function(ed,e){if(ed.plugins.source.state){return false;}});}
ed.onInit.add(function(){var s=ed.getParam('source_state',false);if(typeof s!='undefined'){ed.settings.source_state=!s;self.toggleSource();}
if(ed.onFullScreen){ed.onFullScreen.add(function(editor,state){if(!state){ed.settings.source_state=!editor.settings.source_state;each(['source_highlight','source_numbers','source_wrap'],function(s){ed.settings[s]=editor.settings[s];});self.toggleSource();}});}});ed.onBeforeExecCommand.add(function(ed,cmd,ui,val,o){var cm=ed.controlManager,se=self.getEditor();if(self.state&&se){switch(cmd){case'Undo':o.terminate=true;se.undo();cm.setDisabled('redo',false);return true;break;case'Redo':o.terminate=true;se.redo();cm.setDisabled('redo',true);return true;break;case'mcePrint':o.terminate=true;return self.printSource();break;case'mceFullScreen':if(self.getState()){ed.setContent(self.getContent());}
break;}}});ed.onLoadContent.add(function(ed,o){if(self.getState()){self._disable();self.setContent();}});ed.onSetContent.add(function(ed,o){if(self.getState()){self.setContent();self._disable();}});ed.onSaveContent.add(function(ed,o){if(self.getState()){o.content=self.getContent();}});ed.onExecCommand.add(function(ed,cmd,ui,v,o){switch(cmd){case'mceCodeEditor':case'mceSource':self._disable();break;case'mceFullScreen':break;case'mceInsertContent':if(self.getState()){o.terminate=true;self._disable();self.insertContent(v);}
break;}});ed.addButton('source',{title:'source.desc',cmd:'mceSource'});ed.onNodeChange.add(function(ed,cm,n){var s=self.getState();if(s){self._disable();}});ed.theme.onResize.add(function(){self.resize();});},_disable:function(){var self=this;window.setTimeout(function(){self.toggleDisabled();},0);},getWin:function(){var ed=this.editor,f=tinymce.DOM.get('wf_'+ed.id+'_source_iframe');if(f){return f.contentWindow;}
return false;},getDoc:function(){var w=this.getWin();if(w){return w.document;}
return false;},getContainer:function(){var se=this.getEditor();if(se){return se.getContainer();}
return null;},getEditor:function(){var win=this.getWin();if(win){return win.SourceEditor||null;}
return null;},getState:function(){return this.editor.getParam('source_state',false);;},setState:function(s){this.state=s;},getTop:function(){var ed=this.editor,container=ed.getContentAreaContainer();return container.offsetTop+1;},printSource:function(){},reInit:function(){this.toggleDisabled(),se=this.getEditor();if(this.getState()&&se){se.focus();}},setContent:function(v){var ed=this.editor,se=this.getEditor();if(typeof v=='undefined'){v=ed.getContent();}
if(se){se.setContent(v,ed.getParam('source_format',true));}},insertContent:function(v){var DOM=tinymce.DOM,se=this.getEditor();if(se){se.insertContent(DOM.decode(v));}},getContent:function(){var se=this.getEditor();if(se){return se.getContent();}},resize:function(w,h,init){if(!this.state)
return;var ed=this.editor,DOM=tinymce.DOM,ifr=DOM.get(ed.id+'_ifr'),se=this.getEditor();w=parseFloat(w)||ifr.clientWidth;h=parseFloat(h)||ifr.clientHeight;if(se){DOM.setStyles('wf_'+ed.id+'_source_iframe',{'width':w,'height':h});DOM.setStyles(this.getContainer(),{'width':w,'height':h});se.resize(w,h,init);}},toggleDisabled:function(){var ed=this.editor,DOM=tinymce.DOM,cm=ed.controlManager;var state=this.getState();var active=DOM.select('.mceButtonActive',DOM.get(ed.id+'_toolbargroup'));each(active,function(n){cm.setActive(n.id,!state);});each(DOM.select('.mceButton, .mceListBox, .mceSplitButton',DOM.get(ed.id+'_toolbargroup')),function(n){var id=n.id;if(n.className.indexOf('mceSplitButton')!==-1){id=n.parentNode.id;}
if(id){cm.setDisabled(id,state);}});cm.setActive('source',state);cm.setActive('fullscreen',(ed.id=='mce_fullscreen'));cm.setDisabled('source',false);cm.setDisabled('fullscreen',false);},toggleSource:function(){var self=this,ed=this.editor,DOM=tinymce.DOM,cm=ed.controlManager;var se=this.getEditor();var state=this.getState();var iframe=DOM.get(ed.id+'_ifr');this.setState(!state);if(tinymce.isIE){DOM.setStyle(iframe.parentNode,'position','relative');}
var editorpath=DOM.get(ed.id+'_path_row');var wordcount=DOM.get(ed.id+'-word-count');if(!state){if(editorpath){DOM.hide(editorpath);}
if(wordcount){DOM.hide(wordcount.parentNode);}
DOM.setStyle(iframe,'visiblity','hidden');DOM.setAttrib(iframe,'aria-hidden',true);window.setTimeout(function(){self.setHighlight(ed.getParam('source_highlight',true));if(se){se.focus();}},10);}else{if(se){ed.setContent(self.getContent());DOM.hide('wf_'+ed.id+'_source_container');DOM.setAttrib('wf_'+ed.id+'_source_container','aria-hidden',true);}
DOM.setStyle(iframe,'visiblity','visible');iframe.removeAttribute('aria-hidden');if(editorpath){DOM.show(editorpath);}
if(wordcount){DOM.show(wordcount.parentNode);}
ed.setProgressState(false);}
ed.settings.source_state=!state;},loadEditor:function(){var self=this,ed=this.editor,k,cm=ed.controlManager,DOM=tinymce.DOM,iframe=DOM.get(ed.id+'_ifr');var w=iframe.clientWidth,h=iframe.clientHeight;var container=DOM.create('div',{role:'textbox',style:{position:'absolute',top:tinymce.isIE?0:this.getTop()},id:'wf_'+ed.id+'_source_container','class':'WFSourceEditor'});DOM.insertAfter(container,iframe);var query=ed.getParam('site_url')+'index.php?option=com_jce';var args={'view':'editor','layout':'plugin','plugin':'source','component_id':ed.getParam('component_id')};args[ed.settings.token]=1;for(k in args){query+='&'+k+'='+encodeURIComponent(args[k]);}
var iframe=DOM.create('iframe',{'frameborder':0,'scrolling':'no','id':'wf_'+ed.id+'_source_iframe','src':query,'style':{'width':w,'height':h}});tinymce.dom.Event.add(iframe,'load',function(){var editor=self.getEditor();var content=ed.getContent(),highlight=ed.getParam('source_highlight',true),wrap=ed.getParam('source_wrap',true),numbers=ed.getParam('source_numbers',true);editor.init({'wrap':wrap,'linenumbers':numbers,'highlight':highlight,'width':w,'height':h,'theme':ed.getParam('source_theme','textmate'),'format':ed.getParam('source_format',true),'tag_closing':ed.getParam('source_tag_closing',true),'selection_match':ed.getParam('source_selection_match',true),'font_size':ed.getParam('source_font_size',''),'load':function(){ed.setProgressState(false);if(tinymce.isIE&&!document.querySelector){ed.hide();ed.show();}},change:function(){ed.controlManager.setDisabled('undo',false);}},content);self.resize();});DOM.add(container,iframe);},setHighlight:function(s){var ed=this.editor,DOM=tinymce.DOM,se=this.getEditor();if(se){se.highlight(s);this.setContent();se.format();DOM.show('wf_'+ed.id+'_source_container');DOM.setAttrib('wf_'+ed.id+'_source_container','aria-hidden',false);DOM.setStyle('wf_'+ed.id+'_source_container','top',tinymce.isIE?0:this.getTop());this.resize();this.setNumbers(ed.getParam('source_numbers',true));this.setWrap(ed.getParam('source_wrap',true));ed.focus();ed.setProgressState(false);}else{ed.setProgressState(true);this.loadEditor();}
ed.settings.source_highlight=!!s;},setWrap:function(s){var ed=this.editor,se=this.getEditor();ed.settings.source_wrap=!!s;if(se){se.wrap(s);}},setNumbers:function(s){var ed=this.editor,se=this.getEditor();ed.settings.source_numbers=!!s;if(se){return se.linenumbers(!!s);}},getInfo:function(){return{longname:'Source',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('source',tinymce.plugins.Source);})();
(function(tinymce){var each=tinymce.each;function isAtStart(rng,par){var doc=par.ownerDocument,rng2=doc.createRange(),elm;rng2.setStartBefore(par);rng2.setEnd(rng.endContainer,rng.endOffset);elm=doc.createElement('body');elm.appendChild(rng2.cloneContents());return elm.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,'-').replace(/<[^>]+>/g,'').length==0;}
function getSpanVal(td,name){return parseInt(td.getAttribute(name)||1);}
function TableGrid(table,dom,selection,settings){var grid,startPos,endPos,selectedCell;buildGrid();selectedCell=dom.getParent(selection.getStart(),'th,td');if(selectedCell){startPos=getPos(selectedCell);endPos=findEndPos();selectedCell=getCell(startPos.x,startPos.y);}
function cloneNode(node,children){node=node.cloneNode(children);node.removeAttribute('id');return node;}
function buildGrid(){var startY=0;grid=[];each(['thead','tbody','tfoot'],function(part){var rows=dom.select('> '+part+' tr',table);each(rows,function(tr,y){y+=startY;each(dom.select('> td, > th',tr),function(td,x){var x2,y2,rowspan,colspan;if(grid[y]){while(grid[y][x])
x++;}
rowspan=getSpanVal(td,'rowspan');colspan=getSpanVal(td,'colspan');for(y2=y;y2<y+rowspan;y2++){if(!grid[y2])
grid[y2]=[];for(x2=x;x2<x+colspan;x2++){grid[y2][x2]={part:part,real:y2==y&&x2==x,elm:td,rowspan:rowspan,colspan:colspan};}}});});startY+=rows.length;});}
function getCell(x,y){var row;row=grid[y];if(row)
return row[x];}
function setSpanVal(td,name,val){if(td){val=parseInt(val);if(val===1)
td.removeAttribute(name,1);else
td.setAttribute(name,val,1);}}
function isCellSelected(cell){return cell&&(dom.hasClass(cell.elm,'mceSelected')||cell==selectedCell);}
function getSelectedRows(){var rows=[];each(table.rows,function(row){each(row.cells,function(cell){if(dom.hasClass(cell,'mceSelected')||cell==selectedCell.elm){rows.push(row);return false;}});});return rows;}
function deleteTable(){var rng=dom.createRng();rng.setStartAfter(table);rng.setEndAfter(table);selection.setRng(rng);dom.remove(table);}
function cloneCell(cell){var formatNode,cloneFormats={};if(settings.table_clone_elements){cloneFormats=tinymce.makeMap((settings.table_clone_elements||'strong em b i span font h1 h2 h3 h4 h5 h6 p div').toUpperCase(),/[ ,]/);}
tinymce.walk(cell,function(node){var curNode;if(node.nodeType==3){each(dom.getParents(node.parentNode,null,cell).reverse(),function(node){if(!cloneFormats[node.nodeName]){return;}
node=cloneNode(node,false);if(!formatNode)
formatNode=curNode=node;else if(curNode)
curNode.appendChild(node);curNode=node;});if(curNode){curNode.innerHTML=tinymce.isIE&&!tinymce.isIE11?'&nbsp;':'<br data-mce-bogus="1" />';}
return false;}},'childNodes');cell=cloneNode(cell,false);setSpanVal(cell,'rowSpan',1);setSpanVal(cell,'colSpan',1);if(formatNode){cell.appendChild(formatNode);}else{if(!tinymce.isIE||tinymce.isIE11)
cell.innerHTML='<br data-mce-bogus="1" />';}
return cell;}
function cleanup(){var rng=dom.createRng();each(dom.select('tr',table),function(tr){if(tr.cells.length==0)
dom.remove(tr);});if(dom.select('tr',table).length==0){rng.setStartAfter(table);rng.setEndAfter(table);selection.setRng(rng);dom.remove(table);return;}
each(dom.select('thead,tbody,tfoot',table),function(part){if(part.rows.length==0)
dom.remove(part);});buildGrid();row=grid[Math.min(grid.length-1,startPos.y)];if(row){selection.select(row[Math.min(row.length-1,startPos.x)].elm,true);selection.collapse(true);}}
function fillLeftDown(x,y,rows,cols){var tr,x2,r,c,cell;tr=grid[y][x].elm.parentNode;for(r=1;r<=rows;r++){tr=dom.getNext(tr,'tr');if(tr){for(x2=x;x2>=0;x2--){cell=grid[y+r][x2].elm;if(cell.parentNode==tr){for(c=1;c<=cols;c++)
dom.insertAfter(cloneCell(cell),cell);break;}}
if(x2==-1){for(c=1;c<=cols;c++)
tr.insertBefore(cloneCell(tr.cells[0]),tr.cells[0]);}}}}
function split(){each(grid,function(row,y){each(row,function(cell,x){var colSpan,rowSpan,newCell,i;if(isCellSelected(cell)){cell=cell.elm;colSpan=getSpanVal(cell,'colspan');rowSpan=getSpanVal(cell,'rowspan');if(colSpan>1||rowSpan>1){setSpanVal(cell,'rowSpan',1);setSpanVal(cell,'colSpan',1);for(i=0;i<colSpan-1;i++)
dom.insertAfter(cloneCell(cell),cell);fillLeftDown(x,y,rowSpan-1,colSpan);}}});});}
function merge(cell,cols,rows){var startX,startY,endX,endY,x,y,startCell,endCell,cell,children,count;if(cell){pos=getPos(cell);startX=pos.x;startY=pos.y;endX=startX+(cols-1);endY=startY+(rows-1);}else{startPos=endPos=null;each(grid,function(row,y){each(row,function(cell,x){if(isCellSelected(cell)){if(!startPos){startPos={x:x,y:y};}
endPos={x:x,y:y};}});});startX=startPos.x;startY=startPos.y;endX=endPos.x;endY=endPos.y;}
startCell=getCell(startX,startY);endCell=getCell(endX,endY);if(startCell&&endCell&&startCell.part==endCell.part){split();buildGrid();startCell=getCell(startX,startY).elm;setSpanVal(startCell,'colSpan',(endX-startX)+1);setSpanVal(startCell,'rowSpan',(endY-startY)+1);for(y=startY;y<=endY;y++){for(x=startX;x<=endX;x++){if(!grid[y]||!grid[y][x])
continue;cell=grid[y][x].elm;if(cell!=startCell){children=tinymce.grep(cell.childNodes);each(children,function(node){startCell.appendChild(node);});if(children.length){children=tinymce.grep(startCell.childNodes);count=0;each(children,function(node){if(node.nodeName=='BR'&&dom.getAttrib(node,'data-mce-bogus')&&count++<children.length-1)
startCell.removeChild(node);});}
dom.remove(cell);}}}
cleanup();}}
function insertRow(before){var posY,cell,lastCell,x,rowElm,newRow,newCell,otherCell,rowSpan;each(grid,function(row,y){each(row,function(cell,x){if(isCellSelected(cell)){cell=cell.elm;rowElm=cell.parentNode;newRow=cloneNode(rowElm,false);posY=y;if(before)
return false;}});if(before)
return!posY;});for(x=0;x<grid[0].length;x++){if(!grid[posY][x])
continue;cell=grid[posY][x].elm;if(cell!=lastCell){if(!before){rowSpan=getSpanVal(cell,'rowspan');if(rowSpan>1){setSpanVal(cell,'rowSpan',rowSpan+1);continue;}}else{if(posY>0&&grid[posY-1][x]){otherCell=grid[posY-1][x].elm;rowSpan=getSpanVal(otherCell,'rowSpan');if(rowSpan>1){setSpanVal(otherCell,'rowSpan',rowSpan+1);continue;}}}
newCell=cloneCell(cell);setSpanVal(newCell,'colSpan',cell.colSpan);newRow.appendChild(newCell);lastCell=cell;}}
if(newRow.hasChildNodes()){if(!before)
dom.insertAfter(newRow,rowElm);else
rowElm.parentNode.insertBefore(newRow,rowElm);}}
function insertCol(before){var posX,lastCell;each(grid,function(row,y){each(row,function(cell,x){if(isCellSelected(cell)){posX=x;if(before)
return false;}});if(before)
return!posX;});each(grid,function(row,y){var cell,rowSpan,colSpan;if(!row[posX])
return;cell=row[posX].elm;if(cell!=lastCell){colSpan=getSpanVal(cell,'colspan');rowSpan=getSpanVal(cell,'rowspan');if(colSpan==1){if(!before){dom.insertAfter(cloneCell(cell),cell);fillLeftDown(posX,y,rowSpan-1,colSpan);}else{cell.parentNode.insertBefore(cloneCell(cell),cell);fillLeftDown(posX,y,rowSpan-1,colSpan);}}else
setSpanVal(cell,'colSpan',cell.colSpan+1);lastCell=cell;}});}
function deleteCols(){var cols=[];each(grid,function(row,y){each(row,function(cell,x){if(isCellSelected(cell)&&tinymce.inArray(cols,x)===-1){each(grid,function(row){var cell=row[x].elm,colSpan;colSpan=getSpanVal(cell,'colSpan');if(colSpan>1)
setSpanVal(cell,'colSpan',colSpan-1);else
dom.remove(cell);});cols.push(x);}});});cleanup();}
function deleteRows(){var rows;function deleteRow(tr){var nextTr,pos,lastCell;nextTr=dom.getNext(tr,'tr');each(tr.cells,function(cell){var rowSpan=getSpanVal(cell,'rowSpan');if(rowSpan>1){setSpanVal(cell,'rowSpan',rowSpan-1);pos=getPos(cell);fillLeftDown(pos.x,pos.y,1,1);}});pos=getPos(tr.cells[0]);each(grid[pos.y],function(cell){var rowSpan;cell=cell.elm;if(cell!=lastCell){rowSpan=getSpanVal(cell,'rowSpan');if(rowSpan<=1)
dom.remove(cell);else
setSpanVal(cell,'rowSpan',rowSpan-1);lastCell=cell;}});}
rows=getSelectedRows();each(rows.reverse(),function(tr){deleteRow(tr);});cleanup();}
function cutRows(){var rows=getSelectedRows();dom.remove(rows);cleanup();return rows;}
function copyRows(){var rows=getSelectedRows();each(rows,function(row,i){rows[i]=cloneNode(row,true);});return rows;}
function pasteRows(rows,before){if(!rows)
return;var selectedRows=getSelectedRows(),targetRow=selectedRows[before?0:selectedRows.length-1],targetCellCount=targetRow.cells.length;each(grid,function(row){var match;targetCellCount=0;each(row,function(cell,x){if(cell.real)
targetCellCount+=cell.colspan;if(cell.elm.parentNode==targetRow)
match=1;});if(match)
return false;});if(!before)
rows.reverse();each(rows,function(row){var cellCount=row.cells.length,cell;for(i=0;i<cellCount;i++){cell=row.cells[i];setSpanVal(cell,'colSpan',1);setSpanVal(cell,'rowSpan',1);}
for(i=cellCount;i<targetCellCount;i++)
row.appendChild(cloneCell(row.cells[cellCount-1]));for(i=targetCellCount;i<cellCount;i++)
dom.remove(row.cells[i]);if(before)
targetRow.parentNode.insertBefore(row,targetRow);else
dom.insertAfter(row,targetRow);});dom.removeClass(dom.select('td.mceSelected,th.mceSelected'),'mceSelected');}
function getPos(target){var pos;each(grid,function(row,y){each(row,function(cell,x){if(cell.elm==target){pos={x:x,y:y};return false;}});return!pos;});return pos;}
function setStartCell(cell){startPos=getPos(cell);}
function findEndPos(){var pos,maxX,maxY;maxX=maxY=0;each(grid,function(row,y){each(row,function(cell,x){var colSpan,rowSpan;if(isCellSelected(cell)){cell=grid[y][x];if(x>maxX)
maxX=x;if(y>maxY)
maxY=y;if(cell.real){colSpan=cell.colspan-1;rowSpan=cell.rowspan-1;if(colSpan){if(x+colSpan>maxX)
maxX=x+colSpan;}
if(rowSpan){if(y+rowSpan>maxY)
maxY=y+rowSpan;}}}});});return{x:maxX,y:maxY};}
function setEndCell(cell){var startX,startY,endX,endY,maxX,maxY,colSpan,rowSpan;endPos=getPos(cell);if(startPos&&endPos){startX=Math.min(startPos.x,endPos.x);startY=Math.min(startPos.y,endPos.y);endX=Math.max(startPos.x,endPos.x);endY=Math.max(startPos.y,endPos.y);maxX=endX;maxY=endY;for(y=startY;y<=maxY;y++){cell=grid[y][startX];if(!cell.real){if(startX-(cell.colspan-1)<startX)
startX-=cell.colspan-1;}}
for(x=startX;x<=maxX;x++){cell=grid[startY][x];if(!cell.real){if(startY-(cell.rowspan-1)<startY)
startY-=cell.rowspan-1;}}
for(y=startY;y<=endY;y++){for(x=startX;x<=endX;x++){cell=grid[y][x];if(cell.real){colSpan=cell.colspan-1;rowSpan=cell.rowspan-1;if(colSpan){if(x+colSpan>maxX)
maxX=x+colSpan;}
if(rowSpan){if(y+rowSpan>maxY)
maxY=y+rowSpan;}}}}
dom.removeClass(dom.select('td.mceSelected,th.mceSelected'),'mceSelected');for(y=startY;y<=maxY;y++){for(x=startX;x<=maxX;x++){if(grid[y][x])
dom.addClass(grid[y][x].elm,'mceSelected');}}}}
tinymce.extend(this,{deleteTable:deleteTable,split:split,merge:merge,insertRow:insertRow,insertCol:insertCol,deleteCols:deleteCols,deleteRows:deleteRows,cutRows:cutRows,copyRows:copyRows,pasteRows:pasteRows,getPos:getPos,setStartCell:setStartCell,setEndCell:setEndCell});}
tinymce.create('tinymce.plugins.TablePlugin',{init:function(ed,url){var winMan,clipboardRows,hasCellSelection=true;this.editor=ed;function createTableGrid(node){var selection=ed.selection,tblElm=ed.dom.getParent(node||selection.getNode(),'table');if(tblElm)
return new TableGrid(tblElm,ed.dom,selection,ed.settings);}
function cleanup(){ed.getBody().style.webkitUserSelect='';if(hasCellSelection){ed.dom.removeClass(ed.dom.select('td.mceSelected,th.mceSelected'),'mceSelected');hasCellSelection=false;}}
each([['table','table.desc','mceInsertTable',true],['delete_table','table.del','mceTableDelete'],['delete_col','table.delete_col_desc','mceTableDeleteCol'],['delete_row','table.delete_row_desc','mceTableDeleteRow'],['col_after','table.col_after_desc','mceTableInsertColAfter'],['col_before','table.col_before_desc','mceTableInsertColBefore'],['row_after','table.row_after_desc','mceTableInsertRowAfter'],['row_before','table.row_before_desc','mceTableInsertRowBefore'],['row_props','table.row_desc','mceTableRowProps',true],['cell_props','table.cell_desc','mceTableCellProps',true],['split_cells','table.split_cells_desc','mceTableSplitCells',true],['merge_cells','table.merge_cells_desc','mceTableMergeCells',true]],function(c){ed.addButton(c[0],{title:c[1],cmd:c[2],ui:c[3]});});if(!tinymce.isIE){ed.onClick.add(function(ed,e){e=e.target;if(e.nodeName==='TABLE'){ed.selection.select(e);ed.nodeChanged();}});}
ed.onPreProcess.add(function(ed,args){var nodes,i,node,dom=ed.dom,value;nodes=dom.select('table',args.node);i=nodes.length;while(i--){node=nodes[i];dom.setAttrib(node,'data-mce-style','');if((value=dom.getAttrib(node,'width'))){dom.setStyle(node,'width',value);dom.setAttrib(node,'width','');}
if((value=dom.getAttrib(node,'height'))){dom.setStyle(node,'height',value);dom.setAttrib(node,'height','');}}});ed.onNodeChange.add(function(ed,cm,n){var p;n=ed.selection.getStart();p=ed.dom.getParent(n,'td,th,caption');cm.setActive('table',n.nodeName==='TABLE'||!!p);if(p&&p.nodeName==='CAPTION')
p=0;cm.setDisabled('delete_table',!p);cm.setDisabled('delete_col',!p);cm.setDisabled('delete_table',!p);cm.setDisabled('delete_row',!p);cm.setDisabled('col_after',!p);cm.setDisabled('col_before',!p);cm.setDisabled('row_after',!p);cm.setDisabled('row_before',!p);cm.setDisabled('row_props',!p);cm.setDisabled('cell_props',!p);cm.setDisabled('split_cells',!p);cm.setDisabled('merge_cells',!p);});ed.onInit.add(function(ed){var startTable,startCell,dom=ed.dom,tableGrid;winMan=ed.windowManager;ed.onMouseDown.add(function(ed,e){if(e.button!=2){cleanup();startCell=dom.getParent(e.target,'td,th');startTable=dom.getParent(startCell,'table');}});dom.bind(ed.getDoc(),'mouseover',function(e){var sel,table,target=e.target;if(startCell&&(tableGrid||target!=startCell)&&(target.nodeName=='TD'||target.nodeName=='TH')){table=dom.getParent(target,'table');if(table==startTable){if(!tableGrid){tableGrid=createTableGrid(table);tableGrid.setStartCell(startCell);ed.getBody().style.webkitUserSelect='none';}
tableGrid.setEndCell(target);hasCellSelection=true;}
sel=ed.selection.getSel();try{if(sel.removeAllRanges)
sel.removeAllRanges();else
sel.empty();}catch(ex){}
e.preventDefault();}});ed.onMouseUp.add(function(ed,e){var rng,sel=ed.selection,selectedCells,nativeSel=sel.getSel(),walker,node,lastNode,endNode;if(startCell){if(tableGrid)
ed.getBody().style.webkitUserSelect='';function setPoint(node,start){var walker=new tinymce.dom.TreeWalker(node,node);do{if(node.nodeType==3&&tinymce.trim(node.nodeValue).length!=0){if(start)
rng.setStart(node,0);else
rng.setEnd(node,node.nodeValue.length);return;}
if(node.nodeName=='BR'){if(start)
rng.setStartBefore(node);else
rng.setEndBefore(node);return;}}while(node=(start?walker.next():walker.prev()));}
selectedCells=dom.select('td.mceSelected,th.mceSelected');if(selectedCells.length>0){rng=dom.createRng();node=selectedCells[0];endNode=selectedCells[selectedCells.length-1];rng.setStartBefore(node);rng.setEndAfter(node);setPoint(node,1);walker=new tinymce.dom.TreeWalker(node,dom.getParent(selectedCells[0],'table'));do{if(node.nodeName=='TD'||node.nodeName=='TH'){if(!dom.hasClass(node,'mceSelected'))
break;lastNode=node;}}while(node=walker.next());setPoint(lastNode);sel.setRng(rng);}
ed.nodeChanged();startCell=tableGrid=startTable=null;}});ed.onKeyUp.add(function(ed,e){cleanup();});ed.onKeyDown.add(function(ed,e){fixTableCellSelection(ed);});ed.onMouseDown.add(function(ed,e){if(e.button!=2){fixTableCellSelection(ed);}});function tableCellSelected(ed,rng,n,currentCell){var TEXT_NODE=3,table=ed.dom.getParent(rng.startContainer,'TABLE'),tableParent,allOfCellSelected,tableCellSelection;if(table)
tableParent=table.parentNode;allOfCellSelected=rng.startContainer.nodeType==TEXT_NODE&&rng.startOffset==0&&rng.endOffset==0&&currentCell&&(n.nodeName=="TR"||n==tableParent);tableCellSelection=(n.nodeName=="TD"||n.nodeName=="TH")&&!currentCell;return allOfCellSelected||tableCellSelection;}
function fixTableCellSelection(ed){if(!tinymce.isWebKit)
return;var rng=ed.selection.getRng();var n=ed.selection.getNode();var currentCell=ed.dom.getParent(rng.startContainer,'TD,TH');if(!tableCellSelected(ed,rng,n,currentCell))
return;if(!currentCell){currentCell=n;}
var end=currentCell.lastChild;while(end.lastChild)
end=end.lastChild;rng.setEnd(end,end.nodeValue.length);ed.selection.setRng(rng);}
ed.plugins.table.fixTableCellSelection=fixTableCellSelection;if(ed&&ed.plugins.contextmenu){ed.plugins.contextmenu.onContextMenu.add(function(th,m,e){var sm,se=ed.selection,el=se.getNode()||ed.getBody();if(ed.dom.getParent(e,'td')||ed.dom.getParent(e,'th')||ed.dom.select('td.mceSelected,th.mceSelected').length){m.removeAll();m.add({title:'table.desc',icon:'table',cmd:'mceInsertTable',value:{action:'insert'}});m.add({title:'table.props_desc',icon:'table_props',cmd:'mceInsertTable'});m.add({title:'table.del',icon:'delete_table',cmd:'mceTableDelete'});m.addSeparator();sm=m.addMenu({title:'table.cell'});sm.add({title:'table.cell_desc',icon:'cell_props',cmd:'mceTableCellProps'});sm.add({title:'table.split_cells_desc',icon:'split_cells',cmd:'mceTableSplitCells'});sm.add({title:'table.merge_cells_desc',icon:'merge_cells',cmd:'mceTableMergeCells'});sm=m.addMenu({title:'table.row'});sm.add({title:'table.row_desc',icon:'row_props',cmd:'mceTableRowProps'});sm.add({title:'table.row_before_desc',icon:'row_before',cmd:'mceTableInsertRowBefore'});sm.add({title:'table.row_after_desc',icon:'row_after',cmd:'mceTableInsertRowAfter'});sm.add({title:'table.delete_row_desc',icon:'delete_row',cmd:'mceTableDeleteRow'});sm.addSeparator();sm.add({title:'table.cut_row_desc',icon:'cut',cmd:'mceTableCutRow'});sm.add({title:'table.copy_row_desc',icon:'copy',cmd:'mceTableCopyRow'});sm.add({title:'table.paste_row_before_desc',icon:'paste',cmd:'mceTablePasteRowBefore'}).setDisabled(!clipboardRows);sm.add({title:'table.paste_row_after_desc',icon:'paste',cmd:'mceTablePasteRowAfter'}).setDisabled(!clipboardRows);sm=m.addMenu({title:'table.col'});sm.add({title:'table.col_before_desc',icon:'col_before',cmd:'mceTableInsertColBefore'});sm.add({title:'table.col_after_desc',icon:'col_after',cmd:'mceTableInsertColAfter'});sm.add({title:'table.delete_col_desc',icon:'delete_col',cmd:'mceTableDeleteCol'});}else
m.add({title:'table.desc',icon:'table',cmd:'mceInsertTable'});});}
if(tinymce.isWebKit){function moveSelection(ed,e){var VK=tinymce.VK;var key=e.keyCode;function handle(upBool,sourceNode,event){var siblingDirection=upBool?'previousSibling':'nextSibling';var currentRow=ed.dom.getParent(sourceNode,'tr');var siblingRow=currentRow[siblingDirection];if(siblingRow){moveCursorToRow(ed,sourceNode,siblingRow,upBool);tinymce.dom.Event.cancel(event);return true;}else{var tableNode=ed.dom.getParent(currentRow,'table');var middleNode=currentRow.parentNode;var parentNodeName=middleNode.nodeName.toLowerCase();if(parentNodeName==='tbody'||parentNodeName===(upBool?'tfoot':'thead')){var targetParent=getTargetParent(upBool,tableNode,middleNode,'tbody');if(targetParent!==null){return moveToRowInTarget(upBool,targetParent,sourceNode,event);}}
return escapeTable(upBool,currentRow,siblingDirection,tableNode,event);}}
function getTargetParent(upBool,topNode,secondNode,nodeName){var tbodies=ed.dom.select('>'+nodeName,topNode);var position=tbodies.indexOf(secondNode);if(upBool&&position===0||!upBool&&position===tbodies.length-1){return getFirstHeadOrFoot(upBool,topNode);}else if(position===-1){var topOrBottom=secondNode.tagName.toLowerCase()==='thead'?0:tbodies.length-1;return tbodies[topOrBottom];}else{return tbodies[position+(upBool?-1:1)];}}
function getFirstHeadOrFoot(upBool,parent){var tagName=upBool?'thead':'tfoot';var headOrFoot=ed.dom.select('>'+tagName,parent);return headOrFoot.length!==0?headOrFoot[0]:null;}
function moveToRowInTarget(upBool,targetParent,sourceNode,event){var targetRow=getChildForDirection(targetParent,upBool);targetRow&&moveCursorToRow(ed,sourceNode,targetRow,upBool);tinymce.dom.Event.cancel(event);return true;}
function escapeTable(upBool,currentRow,siblingDirection,table,event){var tableSibling=table[siblingDirection];if(tableSibling){moveCursorToStartOfElement(tableSibling);return true;}else{var parentCell=ed.dom.getParent(table,'td,th');if(parentCell){return handle(upBool,parentCell,event);}else{var backUpSibling=getChildForDirection(currentRow,!upBool);moveCursorToStartOfElement(backUpSibling);return tinymce.dom.Event.cancel(event);}}}
function getChildForDirection(parent,up){var child=parent&&parent[up?'lastChild':'firstChild'];return child&&child.nodeName==='BR'?ed.dom.getParent(child,'td,th'):child;}
function moveCursorToStartOfElement(n){ed.selection.setCursorLocation(n,0);}
function isVerticalMovement(){return key==VK.UP||key==VK.DOWN;}
function isInTable(ed){var node=ed.selection.getNode();var currentRow=ed.dom.getParent(node,'tr');return currentRow!==null;}
function columnIndex(column){var colIndex=0;var c=column;while(c.previousSibling){c=c.previousSibling;colIndex=colIndex+getSpanVal(c,"colspan");}
return colIndex;}
function findColumn(rowElement,columnIndex){var c=0;var r=0;each(rowElement.children,function(cell,i){c=c+getSpanVal(cell,"colspan");r=i;if(c>columnIndex)
return false;});return r;}
function moveCursorToRow(ed,node,row,upBool){var srcColumnIndex=columnIndex(ed.dom.getParent(node,'td,th'));var tgtColumnIndex=findColumn(row,srcColumnIndex);var tgtNode=row.childNodes[tgtColumnIndex];var rowCellTarget=getChildForDirection(tgtNode,upBool);moveCursorToStartOfElement(rowCellTarget||tgtNode);}
function shouldFixCaret(preBrowserNode){var newNode=ed.selection.getNode();var newParent=ed.dom.getParent(newNode,'td,th');var oldParent=ed.dom.getParent(preBrowserNode,'td,th');return newParent&&newParent!==oldParent&&checkSameParentTable(newParent,oldParent)}
function checkSameParentTable(nodeOne,NodeTwo){return ed.dom.getParent(nodeOne,'TABLE')===ed.dom.getParent(NodeTwo,'TABLE');}
if(isVerticalMovement()&&isInTable(ed)){var preBrowserNode=ed.selection.getNode();setTimeout(function(){if(shouldFixCaret(preBrowserNode)){handle(!e.shiftKey&&key===VK.UP,preBrowserNode,e);}},0);}}
ed.onKeyDown.add(moveSelection);}
function fixTableCaretPos(){var last;for(last=ed.getBody().lastChild;last&&last.nodeType==3&&!last.nodeValue.length;last=last.previousSibling);if(last&&last.nodeName=='TABLE'){if(ed.settings.forced_root_block)
ed.dom.add(ed.getBody(),ed.settings.forced_root_block,null,tinymce.isIE&&!tinymce.isIE11?'&nbsp;':'<br data-mce-bogus="1" />');else
ed.dom.add(ed.getBody(),'br',{'data-mce-bogus':'1'});}}
if(tinymce.isGecko){ed.onKeyDown.add(function(ed,e){var rng,table,dom=ed.dom;if(e.keyCode==37||e.keyCode==38){rng=ed.selection.getRng();table=dom.getParent(rng.startContainer,'table');if(table&&ed.getBody().firstChild==table){if(isAtStart(rng,table)){rng=dom.createRng();rng.setStartBefore(table);rng.setEndBefore(table);ed.selection.setRng(rng);e.preventDefault();}}}});}
ed.onKeyUp.add(fixTableCaretPos);ed.onSetContent.add(fixTableCaretPos);ed.onVisualAid.add(fixTableCaretPos);ed.onPreProcess.add(function(ed,o){var last=o.node.lastChild;if(last&&(last.nodeName=="BR"||(last.childNodes.length==1&&(last.firstChild.nodeName=='BR'||last.firstChild.nodeValue=='\u00a0')))&&last.previousSibling&&last.previousSibling.nodeName=="TABLE"){ed.dom.remove(last);}});fixTableCaretPos();ed.startContent=ed.getContent({format:'raw'});});each({mceTableSplitCells:function(grid){grid.split();},mceTableMergeCells:function(grid){var rowSpan,colSpan,cell;cell=ed.dom.getParent(ed.selection.getNode(),'th,td');if(cell){rowSpan=cell.rowSpan;colSpan=cell.colSpan;}
if(!ed.dom.select('td.mceSelected,th.mceSelected').length){winMan.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=table&context=merge',width:240+parseInt(ed.getLang('table.merge_cells_delta_width',0)),height:170+parseInt(ed.getLang('table.merge_cells_delta_height',0)),inline:1},{rows:rowSpan,cols:colSpan,onaction:function(data){grid.merge(cell,data.cols,data.rows);},plugin_url:url,context:"merge"});}else{grid.merge();}},mceTableInsertRowBefore:function(grid){grid.insertRow(true);},mceTableInsertRowAfter:function(grid){grid.insertRow();},mceTableInsertColBefore:function(grid){grid.insertCol(true);},mceTableInsertColAfter:function(grid){grid.insertCol();},mceTableDeleteCol:function(grid){grid.deleteCols();},mceTableDeleteRow:function(grid){grid.deleteRows();},mceTableCutRow:function(grid){clipboardRows=grid.cutRows();},mceTableCopyRow:function(grid){clipboardRows=grid.copyRows();},mceTablePasteRowBefore:function(grid){grid.pasteRows(clipboardRows,true);},mceTablePasteRowAfter:function(grid){grid.pasteRows(clipboardRows);},mceTableDelete:function(grid){grid.deleteTable();}},function(func,name){ed.addCommand(name,function(){var grid=createTableGrid();if(grid){func(grid);ed.execCommand('mceRepaint');cleanup();}});});each({mceInsertTable:function(val){winMan.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=table',width:420+parseInt(ed.getLang('table.table_delta_width',0)),height:440+parseInt(ed.getLang('table.table_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,action:val?val.action:0,context:"table"});},mceTableRowProps:function(){winMan.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=table&context=row',width:440+parseInt(ed.getLang('table.rowprops_delta_width',0)),height:440+parseInt(ed.getLang('table.rowprops_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,context:"row"});},mceTableCellProps:function(){winMan.open({url:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=table&context=cell',width:420+parseInt(ed.getLang('table.cellprops_delta_width',0)),height:440+parseInt(ed.getLang('table.cellprops_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,context:"cell"});}},function(func,name){ed.addCommand(name,function(ui,val){func(val);});});},createControl:function(n,cm){var t=this,ed=t.editor;switch(n){case'table_insert':var border=ed.getParam('table_default_border','');if(ed.settings.schema=='html5'&&ed.settings.validate){if(border){border=1;}}
var c=new tinymce.ui.TableSplitButton(cm.prefix+'table_insert',{title:ed.getLang('table.desc','Inserts a new table'),'class':'mce_table_insert','menu_class':ed.getParam('skin')+'Skin',onclick:function(e){ed.execCommand('mceInsertTable');},onselect:function(html){ed.execCommand('mceInsertContent',false,html);},scope:ed,width:ed.getParam('table_default_width'),height:ed.getParam('table_default_height'),border:border,classes:ed.getParam('table_classes','')},ed);ed.onMouseDown.add(c.hideMenu,c);ed.onRemove.add(function(){c.destroy();});return cm.add(c);break;}
return null;}});tinymce.PluginManager.add('table',tinymce.plugins.TablePlugin);})(tinymce);(function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,is=tinymce.is,each=tinymce.each;tinymce.create('tinymce.ui.TableSplitButton:tinymce.ui.SplitButton',{TableSplitButton:function(id,s,ed){var t=this;this.editor=ed;t.parent(id,s,ed);t.settings=s=tinymce.extend({cols:4,rows:4,width:'',height:'',border:0},t.settings);t.onShowMenu=new tinymce.util.Dispatcher(t);t.onHideMenu=new tinymce.util.Dispatcher(t);},showMenu:function(){var t=this,r,p,e,p2,ed=this.editor;if(t.isDisabled())
return;if(tinymce.isIE){ed.focus();this.bookmark=ed.selection.getBookmark(1);}
if(!t.isMenuRendered){t.renderMenu();t.isMenuRendered=true;}
if(t.isMenuVisible)
return t.hideMenu();e=DOM.get(t.id);DOM.show(t.id+'_menu');DOM.addClass(e,'mceSplitButtonSelected');p2=DOM.getPos(e);DOM.setStyles(t.id+'_menu',{left:p2.x,top:p2.y+e.clientHeight,zIndex:200000});e=0;Event.add(DOM.doc,'mousedown',t.hideMenu,t);t.onShowMenu.dispatch(t);if(t._focused){t._keyHandler=Event.add(t.id+'_menu','keydown',function(e){if(e.keyCode==27)
t.hideMenu();});}
t.isMenuVisible=1;t.setActive(1);},hideMenu:function(e){var t=this;if(t.isMenuVisible){if(e&&e.type=="mousedown"&&DOM.getParent(e.target,function(e){return e.id===t.id+'_open';}))
return;if(!e||!DOM.getParent(e.target,'.mceSplitButtonMenu')){Event.remove(t.id,'mouseover');DOM.removeClass(DOM.select('table td.selected',t.id+'_menu'),'selected');DOM.setHTML(DOM.select('table td.mceTableGridCount',t.id+'_menu'),'&nbsp;');DOM.removeClass(t.id,'mceSplitButtonSelected');Event.remove(DOM.doc,'mousedown',t.hideMenu,t);Event.remove(t.id+'_menu','keydown',t._keyHandler);DOM.hide(t.id+'_menu');}
t.isMenuVisible=0;t.setActive(0);}},renderMenu:function(){var t=this,ed=this.editor,m,i=0,s=t.settings,n,tb,tr,w,context,bm;w=DOM.add(s.menu_container,'div',{role:'listbox',id:t.id+'_menu','class':s['menu_class']+' '+s['class'],style:'position:absolute;left:0;top:-1000px;'});m=DOM.add(w,'div',{'class':s['class']+' mceSplitButtonMenu'});DOM.add(m,'span',{'class':'mceMenuLine'});n=DOM.add(m,'table',{role:'presentation','class':'mceTableSplitMenu','border':1});tb=DOM.add(n,'tbody');for(i=0;i<s.rows;i++){tr=DOM.add(tb,'tr');for(x=0;x<s.cols;x++){td=DOM.create('td',{},'&nbsp;');DOM.add(tr,td);}}
var rows=tb.childNodes;Event.add(n,'mouseover',function(e){var el=e.target;if(el.nodeName=='TD'){var row=el.parentNode,i,z;var x=tinymce.inArray(row.childNodes,el),y=tinymce.inArray(rows,row);if(x<0||y<0){return;}
for(i=0;i<rows.length;i++){cells=rows[i].childNodes;for(z=0;z<cells.length;z++){if(z>x||i>y){DOM.removeClass(cells[z],'selected');}else{DOM.addClass(cells[z],'selected');}}}
DOM.setHTML(DOM.select('td.mceTableGridCount',n),(y+1)+' x '+(x+1));}});tf=DOM.add(n,'tfoot');DOM.add(DOM.add(tf,'tr'),'td',{colspan:s.rows,'class':'mceTableGridCount'},'&nbsp;');DOM.addClass(m,'mceTableSplitMenu');new tinymce.ui.KeyboardNavigation({root:t.id+'_menu',items:DOM.select('a',t.id+'_menu'),onCancel:function(){t.hideMenu();t.focus();}});Event.add(t.id+'_menu','mousedown',function(e){return Event.cancel(e);});Event.add(t.id+'_menu','click',function(e){var c,el=e.target;if(el.nodeName.toLowerCase()=='td'){var table=DOM.getParent(el,'table');var styles=[];var width=t.settings.width;if(/^[0-9\.]+$/.test(width)){width+='px';}
if(width){styles.push('width:'+width);}
var height=t.settings.height;if(/^[0-9\.]+$/.test(height)){height+='px';}
if(height){styles.push('height:'+height);}
var html='<table';if(t.settings.border!=''){html+=' border="'+t.settings.border+'"';}
if(t.settings.classes){html+=' class="'+t.settings.classes+'"';}
if(styles.length){html+=' style="'+styles.join(';')+';"';}
html+='>';var rows=tinymce.grep(DOM.select('tr',table),function(row){return DOM.select('td.selected',row).length;});for(var y=0;y<rows.length;y++){html+="<tr>";var cols=DOM.select('td.selected',rows[y]).length;for(var x=0;x<cols;x++){if(!tinymce.isIE)
html+='<td><br data-mce-bogus="1"/></td>';else
html+='<td></td>';}
html+="</tr>";}
html+="</table>";if(t.bookmark){ed.selection.moveToBookmark(t.bookmark);ed.focus();t.bookmark=0;}
t.createGrid(html);}
return Event.cancel(e);});return w;},createGrid:function(html){this.hideMenu();this.settings.onselect(html);},postRender:function(){var t=this,id=t.id;t.parent();},destroy:function(){this.parent();Event.clear(this.id+'_menu');Event.clear(this.id+'_more');DOM.remove(this.id+'_menu');}});})(tinymce);
(function(){var each=tinymce.each;tinymce.create('tinymce.plugins.TextCase',{init:function(ed,url){var t=this;this.url=url;this.editor=ed;ed.addCommand('mceUpperCase',function(){t._upperCase();});ed.addCommand('mceLowerCase',function(){t._lowerCase();});ed.addCommand('mceCamelCase',function(){t._camelCase();});ed.addCommand('mceSentenceCase',function(){t._sentenceCase();});ed.onNodeChange.add(function(ed,cm,n,co){cm.setDisabled('textcase',co);});},createControl:function(n,cm){var t=this,ed=t.editor,doc=ed.getDoc();switch(n){case'textcase':var c=cm.createSplitButton('textcase',{title:'textcase.uppercase',icon:'uppercase',onclick:function(){ed.execCommand('mceUpperCase');}});c.onRenderMenu.add(function(c,m){m.add({title:'textcase.uppercase',icon:'uppercase',onclick:function(){ed.execCommand('mceUpperCase');}});m.add({title:'textcase.lowercase',icon:'lowercase',onclick:function(){ed.execCommand('mceLowerCase');}});m.add({title:'textcase.sentencecase',icon:'sentencecase',onclick:function(){ed.execCommand('mceSentenceCase');}});m.add({title:'textcase.camelcase',icon:'camelcase',onclick:function(){ed.execCommand('mceCamelCase');}});});return c;break;}
return null;},_sentenceCase:function(){var t=this,ed=this.editor,s=ed.selection,n=s.getNode();var text=s.getContent();text=text.toLowerCase().replace(/([a-z])/,function(a,b){return b.toUpperCase();}).replace(/(\.\s?)([a-z])/gi,function(a,b,c){return b+c.toUpperCase();});s.setContent(text);},_camelCase:function(){var t=this,ed=this.editor,s=ed.selection,n=s.getNode();var text=s.getContent();text=text.replace(/(\s)([a-z])/gi,function(a,b,c){return b+c.toUpperCase();});s.setContent(text);},_lowerCase:function(){var ed=this.editor,s=ed.selection,n=s.getNode();var text=s.getContent();s.setContent(text.toLowerCase());},_upperCase:function(){var ed=this.editor,s=ed.selection,n=s.getNode();var text=s.getContent();s.setContent(text.toUpperCase());},getInfo:function(){return{longname:'Painter',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('textcase',tinymce.plugins.TextCase);})();
(function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()});a.addButton("print",{title:"print.desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("print",tinymce.plugins.Print)})();
(function(){tinymce.create('tinymce.plugins.StylePlugin',{init:function(ed,url){ed.addCommand('mceStyleProps',function(){var applyStyleToBlocks=false;var blocks=ed.selection.getSelectedBlocks();var styles=[];if(blocks.length===1){styles.push(ed.selection.getNode().style.cssText);}
else{tinymce.each(blocks,function(block){styles.push(ed.dom.getAttrib(block,'style'));});applyStyleToBlocks=true;}
ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=style',width:620+parseInt(ed.getLang('style.delta_width',0)),height:360+parseInt(ed.getLang('style.delta_height',0)),inline:1,popup_css:false},{applyStyleToBlocks:applyStyleToBlocks,plugin_url:url,styles:styles});});ed.addCommand('mceSetElementStyle',function(ui,v){if(e=ed.selection.getNode()){ed.dom.setAttrib(e,'style',v);ed.execCommand('mceRepaint');}});ed.onNodeChange.add(function(ed,cm,n){cm.setDisabled('style',(n.nodeName==='BODY'||(n.nodeName==='BR'&&n.getAttribute('data-mce-bogus'))));});ed.addButton('style',{title:'style.desc',cmd:'mceStyleProps'});},getInfo:function(){return{longname:'Style',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('style',tinymce.plugins.StylePlugin);})();
(function(){tinymce.create('tinymce.plugins.Nonbreaking',{init:function(ed,url){var t=this;t.editor=ed;ed.addCommand('mceNonBreaking',function(){ed.execCommand('mceInsertContent',false,(ed.plugins.visualchars&&ed.plugins.visualchars.state)?'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">&nbsp;</span>':'&nbsp;');});ed.addButton('nonbreaking',{title:'nonbreaking.desc',cmd:'mceNonBreaking'});if(ed.getParam('nonbreaking_force_tab')){ed.onKeyDown.add(function(ed,e){if(e.keyCode==9){e.preventDefault();ed.execCommand('mceNonBreaking');ed.execCommand('mceNonBreaking');ed.execCommand('mceNonBreaking');}});}
ed.addShortcut('ctrl+shift+s','nonbreaking.desc','mceNonBreaking');},getInfo:function(){return{longname:'Nonbreaking space',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/nonbreaking',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('nonbreaking',tinymce.plugins.Nonbreaking);})();
(function(){tinymce.create('tinymce.plugins.VisualChars',{init:function(ed,url){var t=this;t.editor=ed;var state=tinymce.util.Cookie.get('wf_visualchars_state');state=tinymce.is(state,'string')?parseFloat(state):ed.getParam('visualchars_default_state',0);ed.onInit.add(function(){ed.controlManager.setActive('visualchars',state);t._toggleVisualChars(state);});ed.addButton('visualchars',{title:'visualchars.desc',cmd:'mceVisualChars'});ed.onExecCommand.add(function(ed,cmd,ui,v,o){if(cmd==="mceNonBreaking"){t._toggleVisualChars(state);}});ed.addCommand('mceVisualChars',function(){state=!state;ed.controlManager.setActive('visualchars',state);t._toggleVisualChars(state);if(ed.getParam('use_cookies',1)){tinymce.util.Cookie.set('wf_visualchars_state',state?1:0);}},t);ed.onKeyUp.add(function(ed,e){if(state){if(e.keyCode==13){t._toggleVisualChars(state);}}});ed.onPreProcess.add(function(ed,o){if(o.get){t._toggleVisualChars(false,o.node);}});ed.onSetContent.add(function(ed,o){t._toggleVisualChars(state);});},getInfo:function(){return{longname:'Visual characters',author:'Moxiecode Systems AB / Ryan Demmer',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars',version:tinymce.majorVersion+"."+tinymce.minorVersion};},_toggleVisualChars:function(state,o){var t=this,ed=t.editor,nl,i,h,d=ed.getDoc(),b=o||ed.getBody(),nv,s=ed.selection,bo,div,node;if(state){nl=[];tinymce.walk(b,function(n){if(n.nodeType==3&&n.nodeValue&&/(\u00a0|&nbsp;)/.test(n.nodeValue))
nl.push(n);},'childNodes');for(i=0;i<nl.length;i++){nv=nl[i].nodeValue;nv=nv.replace(/(\u00a0|&nbsp;)/g,'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">$1</span>');div=ed.dom.create('div',null,nv);while(node=div.lastChild)
ed.dom.insertAfter(node,nl[i]);ed.dom.remove(nl[i]);}}else{nl=ed.dom.select('span.mceItemNbsp',b);for(i=nl.length-1;i>=0;i--){ed.dom.remove(nl[i],1);}}}});tinymce.PluginManager.add('visualchars',tinymce.plugins.VisualChars);})();
(function(){var cookie=tinymce.util.Cookie;tinymce.create('tinymce.plugins.VisualBlocks',{init:function(ed,url){var cssId;if(!window.NodeList){return;}
var state=cookie.get('wf_visualblocks_state');if(state&&tinymce.is(state,'string')){if(state=='null'){state=0;}
state=parseFloat(state);}
state=ed.getParam('visualblocks_default_state',state);ed.addCommand('mceVisualBlocks',function(){var dom=ed.dom,linkElm;if(!cssId){cssId=dom.uniqueId();linkElm=dom.create('link',{id:cssId,rel:'stylesheet',href:url+'/css/visualblocks.css'});ed.getDoc().getElementsByTagName('head')[0].appendChild(linkElm);}else{linkElm=dom.get(cssId);linkElm.disabled=!linkElm.disabled;}
ed.controlManager.setActive('visualblocks',!linkElm.disabled);if(linkElm.disabled){cookie.set('wf_visualblocks_state',0);}else{cookie.set('wf_visualblocks_state',1);}});ed.onSetContent.add(function(){var dom=ed.dom,linkElm;if(cssId){linkElm=dom.get(cssId);ed.controlManager.setActive('visualblocks',!linkElm.disabled);}});ed.addButton('visualblocks',{title:'visualblocks.desc',cmd:'mceVisualBlocks'});ed.onInit.add(function(){if(state){ed.execCommand('mceVisualBlocks',false,null,{skip_focus:true});}});},getInfo:function(){return{longname:'Visual blocks',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualblocks',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('visualblocks',tinymce.plugins.VisualBlocks);})();
(function(){var each=tinymce.each;tinymce.create('tinymce.plugins.XHTMLXtrasPlugin',{init:function(ed,url){ed.addCommand('mceCite',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=cite',width:440+parseInt(ed.getLang('xhtmlxtras.cite_delta_width',0)),height:380+parseInt(ed.getLang('xhtmlxtras.cite_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,element:'cite'});});ed.addCommand('mceAcronym',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=acronym',width:440+parseInt(ed.getLang('xhtmlxtras.acronym_delta_width',0)),height:380+parseInt(ed.getLang('xhtmlxtras.acronym_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,element:'acronym'});});ed.addCommand('mceAbbr',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=abbr',width:440+parseInt(ed.getLang('xhtmlxtras.abbr_delta_width',0)),height:380+parseInt(ed.getLang('xhtmlxtras.abbr_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,element:'abbr'});});ed.addCommand('mceDel',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=del',width:440+parseInt(ed.getLang('xhtmlxtras.del_delta_width',0)),height:440+parseInt(ed.getLang('xhtmlxtras.del_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,element:'del'});});ed.addCommand('mceIns',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=ins',width:440+parseInt(ed.getLang('xhtmlxtras.ins_delta_width',0)),height:440+parseInt(ed.getLang('xhtmlxtras.ins_delta_height',0)),inline:1,popup_css:false},{plugin_url:url,element:'ins'});});ed.addCommand('mceAttributes',function(){ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=xhtmlxtras&element=attributes',width:440,height:420,inline:1,popup_css:false},{plugin_url:url});});ed.addButton('cite',{title:'xhtmlxtras.cite_desc',cmd:'mceCite'});ed.addButton('acronym',{title:'xhtmlxtras.acronym_desc',cmd:'mceAcronym'});ed.addButton('abbr',{title:'xhtmlxtras.abbr_desc',cmd:'mceAbbr'});ed.addButton('del',{title:'xhtmlxtras.del_desc',cmd:'mceDel'});ed.addButton('ins',{title:'xhtmlxtras.ins_desc',cmd:'mceIns'});ed.addButton('attribs',{title:'xhtmlxtras.attribs_desc',cmd:'mceAttributes'});ed.onNodeChange.add(function(ed,cm,n,co){n=ed.dom.getParent(n,'CITE,ACRONYM,ABBR,DEL,INS');cm.setDisabled('cite',co);cm.setDisabled('acronym',co);cm.setDisabled('abbr',co);cm.setDisabled('del',co);cm.setDisabled('ins',co);cm.setDisabled('attribs',n&&n.nodeName=='BODY');cm.setActive('cite',0);cm.setActive('acronym',0);cm.setActive('abbr',0);cm.setActive('del',0);cm.setActive('ins',0);if(n){do{cm.setDisabled(n.nodeName.toLowerCase(),0);cm.setActive(n.nodeName.toLowerCase(),1);}while(n=n.parentNode);}});ed.onPreInit.add(function(){ed.dom.create('abbr');ed.formatter.register({cite:{inline:'cite',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}},acronym:{inline:'acronym',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}},abbr:{inline:'abbr',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}},del:{inline:'del',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}},ins:{inline:'ins',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}},attributes:{inline:'span',remove:'all',onformat:function(elm,fmt,vars){each(vars,function(value,key){ed.dom.setAttrib(elm,key,value);});}}});});},getInfo:function(){return{longname:'XHTML Xtras Plugin',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('xhtmlxtras',tinymce.plugins.XHTMLXtrasPlugin);})();
(function(){tinymce.create('tinymce.plugins.ImageManager',{init:function(ed,url){this.editor=ed;function isMceItem(n){return/mceItem/.test(n.className);}
ed.addCommand('mceImageManager',function(){var n=ed.selection.getNode();if(n.nodeName=='IMG'&&isMceItem(n)){return;}
ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=imgmanager',width:780+ed.getLang('imgmanager.delta_width',0),height:640+ed.getLang('imgmanager.delta_height',0),inline:1,popup_css:false,size:'large-landscape'},{plugin_url:url});});ed.addButton('imgmanager',{title:'imgmanager.desc',cmd:'mceImageManager'});ed.onNodeChange.add(function(ed,cm,n){cm.setActive('imgmanager',n.nodeName=='IMG'&&!isMceItem(n));});ed.onInit.add(function(){if(ed&&ed.plugins.contextmenu){ed.plugins.contextmenu.onContextMenu.add(function(th,m,e){m.add({title:'imgmanager.desc',icon:'imgmanager',cmd:'mceImageManager'});});}});},insertUploadedFile:function(o){var ed=this.editor,data=this.getUploadConfig();if(data&&data.filetypes){if(new RegExp('\.('+data.filetypes.join('|')+')$','i').test(o.file)){var args={'src':o.file,'alt':o.alt||o.name,'style':{}};var attribs=['alt','title','id','dir','class','usemap','style','longdesc'];if(o.styles){var s=ed.dom.parseStyle(ed.dom.serializeStyle(o.styles));tinymce.extend(args.style,s);delete o.styles;}
if(o.style){var s=ed.dom.parseStyle(o.style);tinymce.extend(args.style,s);delete o.style;}
tinymce.each(attribs,function(k){if(typeof o[k]!=='undefined'){args[k]=o[k];}});return ed.dom.create('img',args);}}
return false;},getUploadURL:function(file){var ed=this.editor,data=this.getUploadConfig();if(data&&data.filetypes){if(new RegExp('\.('+data.filetypes.join('|')+')$','i').test(file.name)){return ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=imgmanager';}}
return false;},getUploadConfig:function(){var ed=this.editor,data=ed.getParam('imgmanager_upload');return data;},getInfo:function(){return{longname:'Image Manager',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net/index2.php?option=com_content&amp;task=findkey&amp;pop=1&amp;lang=en&amp;keyref=imgmanager.about',version:'2.5.4'};}});tinymce.PluginManager.add('imgmanager',tinymce.plugins.ImageManager);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,is=tinymce.is,each=tinymce.each;var Node=tinymce.html.Node;var VK=tinymce.VK,BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE;tinymce.create('tinymce.plugins.AnchorPlugin',{init:function(ed,url){this.editor=ed;this.url=url;var self=this;function isAnchor(n){return ed.dom.getParent(n,'a.mceItemAnchor');}
ed.settings.allow_html_in_named_anchor=true;ed.addCommand('mceInsertAnchor',function(ui,value){return self._insertAnchor(value);});ed.onNodeChange.add(function(ed,cm,n,co){var s=isAnchor(n);ed.dom.removeClass(ed.dom.select('.mceItemAnchor.mceItemSelected'),'mceItemSelected');cm.setActive('anchor',s);if(s){ed.dom.addClass(ed.dom.select('.mceItemAnchor'),'mceItemSelected');}});ed.onKeyDown.add(function(ed,e){if(e.keyCode===VK.BACKSPACE||e.keyCode===VK.DELETE){self._removeAnchor(e);}});ed.onInit.add(function(){if(ed.theme&&ed.theme.onResolveName){ed.theme.onResolveName.add(function(theme,o){var n=o.node,v,href=n.href;if(o.name==='a'&&(!href||href.charAt(0)=='#')&&(n.name||n.id)){v=n.name||n.id;}
if(v){o.name='a#'+v;}});}
if(!ed.settings.compress.css)
ed.dom.loadCSS(url+"/css/content.css");});ed.onPreInit.add(function(){ed.parser.addNodeFilter('a',function(nodes){for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i],href=node.attr('href'),cls=node.attr('class')||'',name=node.attr('name')||node.attr('id');if((!href||href.charAt(0)=='#')&&name){if(!cls||/mceItemAnchor/.test(cls)===false){cls+=' mceItemAnchor';node.attr('class',tinymce.trim(cls));}}}});});ed.onBeforeSetContent.add(function(ed,o){o.content=o.content.replace(/<a id="([^"]+)"><\/a>/gi,'<a id="$1">\uFEFF</a>');});},_removeAnchor:function(e){var ed=this.editor,s=ed.selection,n=s.getNode();if(!s.isCollapsed()&&ed.dom.getParent(n,'a.mceItemAnchor')){ed.undoManager.add();ed.formatter.remove('link');if(e){e.preventDefault();}}},_getAnchor:function(){var ed=this.editor,n=ed.selection.getNode(),v;n=ed.dom.getParent(n,'a.mceItemAnchor');v=ed.dom.getAttrib(n,'name')||ed.dom.getAttrib(n,'id');return v;},_insertAnchor:function(v){var ed=this.editor,attrib;if(!v){ed.windowManager.alert('anchor.invalid');return false;}
if(!/^[a-z][a-z0-9\-\_:\.]*$/i.test(v)){ed.windowManager.alert('anchor.invalid');return false;}
attrib='name';if(ed.settings.schema!=='html4'){attrib='id';}
var n=ed.selection.getNode();var at={'class':'mceItemAnchor'};if(n=ed.dom.getParent(n,'A')){at[attrib]=v;ed.dom.setAttribs(n,at);}else{if(ed.dom.select('a['+attrib+'="'+v+'"], img[data-mce-name="'+v+'"], img[id="'+v+'"]',ed.getBody()).length){ed.windowManager.alert('anchor.exists');return false;}
if(ed.selection.isCollapsed()){at[attrib]=v;ed.execCommand('mceInsertContent',0,ed.dom.createHTML('a',{id:'__mce_tmp'},'\uFEFF'));n=ed.dom.get('__mce_tmp');at.id=at.id||null;ed.dom.setAttribs(n,at);ed.selection.select(n);}else{at[attrib]=v;ed.execCommand('mceInsertLink',false,'#mce_temp_url#',{skip_undo:1});at.href=at['data-mce-href']=null;each(ed.dom.select('a[href="#mce_temp_url#"]'),function(link){ed.dom.setAttribs(link,at);});}}
ed.execCommand("mceEndUndoLevel");ed.nodeChanged();return true;},createControl:function(n,cm){var self=this,ed=this.editor;switch(n){case'anchor':var content=DOM.create('div');var fieldset=DOM.add(content,'fieldset',{},'<legend>'+ed.getLang('anchor.desc','Insert / Edit Anchor')+'</legend>');DOM.add(fieldset,'label',{'for':ed.id+'_anchor'},ed.getLang('anchor.name','Name'));var input=DOM.add(fieldset,'input',{type:'text',id:ed.id+'_anchor'});var c=new tinymce.ui.ButtonDialog(cm.prefix+'anchor',{title:ed.getLang('anchor.desc','Inserts an Anchor'),'class':'mce_anchor','content':content,'width':250,'buttons':[{title:ed.getLang('insert','Insert'),id:'insert',click:function(e){return self._insertAnchor(input.value);},scope:self},{title:ed.getLang('anchor.remove','Remove'),id:'remove',click:function(e){if(!DOM.hasClass(e.target,'disabled')){self._removeAnchor();}
return true;},scope:self}]},ed);c.onShowDialog.add(function(){input.value='';var label=ed.getLang('insert','Insert');var v=self._getAnchor();if(v){input.value=v;label=ed.getLang('update','Update');}
c.setActive(!!v);c.setButtonDisabled('remove',!v);c.setButtonLabel('insert',label);input.focus();});c.onHideDialog.add(function(){input.value='';});ed.onRemove.add(function(){c.destroy();});return cm.add(c);break;}
return null;},getInfo:function(){return{longname:'Anchor',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('anchor',tinymce.plugins.AnchorPlugin);})();
(function(){var each=tinymce.each,extend=tinymce.extend,JSON=tinymce.util.JSON;var Node=tinymce.html.Node;tinymce.create('tinymce.plugins.LinkPlugin',{init:function(ed,url){this.editor=ed;this.url=url;var self=this;function isLink(n){if(!n){return false;}
n=ed.dom.getParent(n,'A');return n&&isAnchor(n)===false;}
function isAnchor(n){return ed.dom.hasClass(n,'mceItemAnchor');}
ed.addCommand('mceLink',function(){var se=ed.selection,n=se.getNode();if(n.nodeName=='A'&&!isAnchor(n)){se.select(n);}
ed.windowManager.open({file:ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=link',width:500+ed.getLang('link.delta_width',0),height:515+ed.getLang('link.delta_height',0),inline:1,popup_css:false},{plugin_url:url});});ed.addButton('link',{title:'link.desc',cmd:'mceLink'});ed.addShortcut('ctrl+k','link.desc','mceLink');ed.onInit.add(function(){if(ed&&ed.plugins.contextmenu){ed.plugins.contextmenu.onContextMenu.add(function(th,m,e){m.addSeparator();m.add({title:'link.desc',icon:'link',cmd:'mceLink',ui:true});if((e.nodeName=='A'&&!ed.dom.getAttrib(e,'name'))){m.add({title:'advanced.unlink_desc',icon:'unlink',cmd:'UnLink'});}});}});ed.onNodeChange.add(function(ed,cm,n,co){cm.setActive('link',isLink(n));cm.setDisabled('link',isAnchor(n));});},getInfo:function(){return{longname:'Link',author:'Moxiecode Systems AB / Ryan Demmer',authorurl:'http://tinymce.moxiecode.com / http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('link',tinymce.plugins.LinkPlugin);})();
(function(){var JSON=tinymce.util.JSON,each=tinymce.each,DOM=tinymce.DOM;tinymce.create('tinymce.plugins.SpellcheckerPlugin',{getInfo:function(){return{longname:'Spellchecker',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker',version:tinymce.majorVersion+"."+tinymce.minorVersion};},init:function(ed,url){var t=this,cm;t.url=url;t.editor=ed;t.rpcUrl=ed.getParam('site_url')+'index.php?option=com_jce&view=editor&layout=plugin&plugin=spellchecker'
t.native_spellchecker=(t.rpcUrl==''||ed.getParam("spellchecker_engine","browser")=='browser');if(t.native_spellchecker){if(tinymce.isIE&&/MSIE [56789]/.test(navigator.userAgent)){if(t.rpcUrl==''){return;}
t.native_spellchecker=false;}
t.hasSupport=true;if(ed.getParam("spellchecker_suggestions",true)){ed.onContextMenu.addToTop(function(ed,e){if(t.active)
return false;});}}
ed.addCommand('mceSpellCheck',function(){if(t.native_spellchecker){var body=ed.getBody();body.spellcheck=t.active=!t.active;ed.focus();return;}
if(!t.active){ed.setProgressState(1);t._sendRPC('checkWords',[t.selectedLang,t._getWords()],function(r){if(r.length>0){t.active=1;t._markWords(r);ed.setProgressState(0);ed.nodeChanged();}else{ed.setProgressState(0);if(ed.getParam('spellchecker_report_no_misspellings',true))
ed.windowManager.alert('spellchecker.no_mpell');}});}else
t._done();});if(ed.settings.content_css!==false)
ed.contentCSS.push(url+'/css/content.css');if(ed.getParam("spellchecker_suggestions",true)){ed.onClick.add(t._showMenu,t);ed.onContextMenu.add(t._showMenu,t);}
ed.onBeforeGetContent.add(function(){if(t.active)
t._removeWords();});ed.onNodeChange.add(function(ed,cm){cm.setActive('spellchecker',!!t.active);});ed.onSetContent.add(function(){t._done();});ed.onBeforeGetContent.add(function(){t._done();});ed.onBeforeExecCommand.add(function(ed,cmd){if(cmd=='mceFullScreen')
t._done();});t.languages={};each(ed.getParam('spellchecker_languages','+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv','hash'),function(v,k){if(k.indexOf('+')===0){k=k.substring(1);t.selectedLang=v;}
t.languages[k]=v;});ed.onInit.add(function(){if(t.native_spellchecker&&ed.getParam('spellchecker_browser_state',0)){ed.execCommand('mceSpellCheck',false);}});},createControl:function(n,cm){var t=this,c,ed=t.editor;if(n=='spellchecker'){if(t.native_spellchecker){if(t.hasSupport)
c=cm.createButton(n,{title:'spellchecker.desc',cmd:'mceSpellCheck',scope:t});return c;}
c=cm.createSplitButton(n,{title:'spellchecker.desc',cmd:'mceSpellCheck',scope:t});c.onRenderMenu.add(function(c,m){m.add({title:'spellchecker.langs','class':'mceMenuItemTitle'}).setDisabled(1);t.menuItems={};each(t.languages,function(v,k){var o={icon:1},mi;o.onclick=function(){if(v==t.selectedLang){return;}
t._updateMenu(mi);t.selectedLang=v;};o.title=k;mi=m.add(o);mi.setSelected(v==t.selectedLang);t.menuItems[v]=mi;if(v==t.selectedLang){t.selectedItem=mi;}});});return c;}},setLanguage:function(lang){var t=this;if(lang==t.selectedLang){return;}
if(tinymce.grep(t.languages,function(v){return v===lang;}).length===0){throw"Unknown language: "+lang;}
t.selectedLang=lang;if(t.menuItems){t._updateMenu(t.menuItems[lang]);}
if(t.active){t._done();}},_updateMenu:function(mi){mi.setSelected(1);this.selectedItem.setSelected(0);this.selectedItem=mi;},_walk:function(n,f){var d=this.editor.getDoc(),w;if(d.createTreeWalker){w=d.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,false);while((n=w.nextNode())!=null)
f.call(this,n);}else
tinymce.walk(n,f,'childNodes');},_getSeparators:function(){var re='',i,str=this.editor.getParam('spellchecker_word_separator_chars','\\s!"#$%&()*+,-./:;<=>?@[\]^_{|}\u201d\u201c');for(i=0;i<str.length;i++)
re+='\\'+str.charAt(i);return re;},_getWords:function(){var ed=this.editor,wl=[],tx='',lo={},rawWords=[];this._walk(ed.getBody(),function(n){if(n.nodeType==3)
tx+=n.nodeValue+' ';});if(ed.getParam('spellchecker_word_pattern')){rawWords=tx.match('('+ed.getParam('spellchecker_word_pattern')+')','gi');}else{tx=tx.replace(new RegExp('([0-9]|['+this._getSeparators()+'])','g'),' ');tx=tinymce.trim(tx.replace(/(\s+)/g,' '));rawWords=tx.split(' ');}
each(rawWords,function(v){if(!lo[v]){wl.push(v);lo[v]=1;}});return wl;},_removeWords:function(w){var ed=this.editor,dom=ed.dom,se=ed.selection,r=se.getRng(true);each(dom.select('span').reverse(),function(n){if(n&&(dom.hasClass(n,'mceItemHiddenSpellWord')||dom.hasClass(n,'mceItemHidden'))){if(!w||dom.decode(n.innerHTML)==w)
dom.remove(n,1);}});se.setRng(r);},_markWords:function(wl){var ed=this.editor,dom=ed.dom,doc=ed.getDoc(),se=ed.selection,r=se.getRng(true),nl=[],w=wl.join('|'),re=this._getSeparators(),rx=new RegExp('(^|['+re+'])('+w+')(?=['+re+']|$)','g');this._walk(ed.getBody(),function(n){if(n.nodeType==3){nl.push(n);}});each(nl,function(n){var node,elem,txt,pos,v=n.nodeValue;rx.lastIndex=0;if(rx.test(v)){v=dom.encode(v);elem=dom.create('span',{'class':'mceItemHidden'});if(tinymce.isIE){v=v.replace(rx,'$1<mcespell>$2</mcespell>');while((pos=v.indexOf('<mcespell>'))!=-1){txt=v.substring(0,pos);if(txt.length){node=doc.createTextNode(dom.decode(txt));elem.appendChild(node);}
v=v.substring(pos+10);pos=v.indexOf('</mcespell>');txt=v.substring(0,pos);v=v.substring(pos+11);elem.appendChild(dom.create('span',{'class':'mceItemHiddenSpellWord'},txt));}
if(v.length){node=doc.createTextNode(dom.decode(v));elem.appendChild(node);}}else{elem.innerHTML=v.replace(rx,'$1<span class="mceItemHiddenSpellWord">$2</span>');}
dom.replace(elem,n);}});se.setRng(r);},_showMenu:function(ed,e){var t=this,ed=t.editor,m=t._menu,p1,dom=ed.dom,vp=dom.getViewPort(ed.getWin()),wordSpan=e.target;e=0;if(!m){m=ed.controlManager.createDropMenu('spellcheckermenu',{'class':'mceNoIcons'});t._menu=m;}
if(dom.hasClass(wordSpan,'mceItemHiddenSpellWord')){m.removeAll();m.add({title:'spellchecker.wait','class':'mceMenuItemTitle'}).setDisabled(1);t._sendRPC('getSuggestions',[t.selectedLang,dom.decode(wordSpan.innerHTML)],function(r){var ignoreRpc;m.removeAll();if(r.length>0){m.add({title:'spellchecker.sug','class':'mceMenuItemTitle'}).setDisabled(1);each(r,function(v){m.add({title:v,onclick:function(){dom.replace(ed.getDoc().createTextNode(v),wordSpan);t._checkDone();}});});m.addSeparator();}else
m.add({title:'spellchecker.no_sug','class':'mceMenuItemTitle'}).setDisabled(1);if(ed.getParam('show_ignore_words',true)){ignoreRpc=t.editor.getParam("spellchecker_enable_ignore_rpc",'');m.add({title:'spellchecker.ignore_word',onclick:function(){var word=wordSpan.innerHTML;dom.remove(wordSpan,1);t._checkDone();if(ignoreRpc){ed.setProgressState(1);t._sendRPC('ignoreWord',[t.selectedLang,word],function(r){ed.setProgressState(0);});}}});m.add({title:'spellchecker.ignore_words',onclick:function(){var word=wordSpan.innerHTML;t._removeWords(dom.decode(word));t._checkDone();if(ignoreRpc){ed.setProgressState(1);t._sendRPC('ignoreWords',[t.selectedLang,word],function(r){ed.setProgressState(0);});}}});}
if(t.editor.getParam("spellchecker_enable_learn_rpc")){m.add({title:'spellchecker.learn_word',onclick:function(){var word=wordSpan.innerHTML;dom.remove(wordSpan,1);t._checkDone();ed.setProgressState(1);t._sendRPC('learnWord',[t.selectedLang,word],function(r){ed.setProgressState(0);});}});}
m.update();});p1=DOM.getPos(ed.getContentAreaContainer());m.settings.offset_x=p1.x;m.settings.offset_y=p1.y;ed.selection.select(wordSpan);p1=dom.getPos(wordSpan);m.showMenu(p1.x,p1.y+wordSpan.offsetHeight-vp.y);return tinymce.dom.Event.cancel(e);}else
m.hideMenu();},_checkDone:function(){var t=this,ed=t.editor,dom=ed.dom,o;each(dom.select('span'),function(n){if(n&&dom.hasClass(n,'mceItemHiddenSpellWord')){o=true;return false;}});if(!o)
t._done();},_done:function(){var t=this,la=t.active;if(t.active){t.active=!!t.native_spellchecker;t._removeWords();if(t._menu)
t._menu.hideMenu();if(la)
t.editor.nodeChanged();}},_sendRPC:function(m,p,cb){var t=this,ed=t.editor;var query='',args={'format':'raw'};args[ed.settings.token]=1;for(k in args){query+='&'+k+'='+encodeURIComponent(args[k]);}
tinymce.util.XHR.send({url:t.rpcUrl,content_type:'application/x-www-form-urlencoded',data:'json='+JSON.serialize({'fn':m,'args':p})+query,success:function(o){var c=JSON.parse(o);if(typeof(c)=='undefined'){c={error:'JSON Parse error.'};}
if(c.error){ed.setProgressState(0);var e=c.error;ed.windowManager.alert(e.errstr||('Error response: '+e));}else{cb.call(t,c.result||'');}},error:function(x){ed.setProgressState(0);ed.windowManager.alert('Error response: '+x);}});}});tinymce.PluginManager.add('spellchecker',tinymce.plugins.SpellcheckerPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,each=tinymce.each,Node=tinymce.html.Node;var VK=tinymce.VK,BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE;tinymce.create('tinymce.plugins.ArticlePlugin',{init:function(ed,url){var t=this;t.editor=ed;t.url=url;function isReadMore(n){return ed.dom.is(n,'hr.mceItemReadMore');};function isPageBreak(n){return ed.dom.is(n,'hr.mceItemPageBreak');};ed.addCommand('mceReadMore',function(){if(ed.dom.get('system-readmore')){alert(ed.getLang('article.readmore_alert','There is already a Read More break inserted in this article. Only one such break is permitted. Use a Pagebreak to split the page up further.'));return false;}
t._insertBreak('readmore',{id:'system-readmore'});});ed.addCommand('mcePageBreak',function(ui,v){var n=ed.selection.getNode();if(isPageBreak(n)){t._updatePageBreak(n,v);}else{t._insertBreak('pagebreak',v);}});if(ed.getParam('article_show_readmore',true)){ed.addButton('readmore',{title:'article.readmore',cmd:'mceReadMore'});}
ed.onInit.add(function(){if(!ed.settings.compress.css)
ed.dom.loadCSS(url+"/css/content.css");if(ed.theme&&ed.theme.onResolveName){ed.theme.onResolveName.add(function(theme,o){var n=o.node,v;if(o.name==='hr'&&/mceItemPageBreak/.test(n.className)){v='pagebreak';}
if(o.name==='hr'&&/mceItemReadMore/.test(n.className)){v='readmore';}
if(v){o.name=v;}});}});ed.onNodeChange.add(function(ed,cm,n){cm.setActive('readmore',isReadMore(n));cm.setActive('pagebreak',isPageBreak(n));ed.dom.removeClass(ed.dom.select('hr.mceItemPageBreak.mceItemSelected, hr.mceItemReadMore.mceItemSelected'),'mceItemSelected');if(isPageBreak(n)||isReadMore(n)){ed.dom.addClass(n,'mceItemSelected');}});function _cancelResize(){each(ed.dom.select('hr.mceItemPageBreak, hr.mceItemReadMore'),function(n){n.onresizestart=function(){return false;};n.onbeforeeditfocus=function(){return false;};});};ed.onBeforeSetContent.add(function(ed,o){o.content=o.content.replace(/<hr([^>]*)alt="([^"]+)"([^>]+)>/gi,'<hr$1data-mce-alt="$2"$3>');});ed.onSetContent.add(function(){if(tinymce.isIE){_cancelResize();}});ed.onGetContent.add(function(){if(tinymce.isIE){_cancelResize();}});ed.onKeyDown.add(function(ed,e){if(e.keyCode==BACKSPACE||e.keyCode==DELETE){var s=ed.selection,n=s.getNode();if(ed.dom.is(n,'hr.mceItemPageBreak, hr.mceItemReadMore')){ed.dom.remove(n);e.preventDefault();}}});ed.onPreInit.add(function(){ed.parser.addNodeFilter('hr',function(nodes){for(var i=0;i<nodes.length;i++){var node=nodes[i],id=node.attr('id')||'',cls=node.attr('class')||'';if(id=='system-readmore'||/system-pagebreak/.test(cls)){var cls=/system-pagebreak/.test(cls)?'mceItemPageBreak':'mceItemReadMore';node.attr('class',cls);if(node.attr('alt')){node.attr('data-mce-alt',node.attr('alt'));node.attr('alt',null);}}}});ed.serializer.addNodeFilter('hr',function(nodes,name,args){for(var i=0;i<nodes.length;i++){var node=nodes[i];if(/mceItem(PageBreak|ReadMore)/.test(node.attr('class')||'')){if(/mceItemPageBreak/.test(node.attr('class'))){node.attr('class','system-pagebreak');}else{node.attr('class',null);node.attr('id','system-readmore');}
if(node.attr('data-mce-alt')){node.attr('alt',node.attr('data-mce-alt'));node.attr('data-mce-alt',null);}}}});});},_getPageBreak:function(){var t=this,ed=this.editor,dom=ed.dom,n=ed.selection.getNode(),o;if(ed.dom.is(n,'hr.mceItemPageBreak')){o={title:ed.dom.getAttrib(n,'title',''),alt:ed.dom.getAttrib(n,'data-mce-alt','')}}
return o;},_updatePageBreak:function(n,v){var t=this,ed=this.editor;tinymce.extend(v,{'data-mce-alt':v.alt||''});v.alt=null;ed.dom.setAttribs(n,v);},_insertBreak:function(s,args){var t=this,ed=this.editor,dom=ed.dom,n=ed.selection.getNode(),ns,h,c,re,isBlock=false,hr,p,desc='',bElm=[];var blocks='H1,H2,H3,H4,H5,H6,P,DIV,ADDRESS,PRE,FORM,TABLE,OL,UL,CAPTION,BLOCKQUOTE,CENTER,DL,DIR,FIELDSET,NOSCRIPT,NOFRAMES,MENU,ISINDEX,SAMP,SECTION,ARTICLE,HGROUP,ASIDE,FIGURE';n=dom.getParent(n,blocks,'BODY')||n;tinymce.extend(args,{'class':s=='pagebreak'?'mceItemPageBreak':'mceItemReadMore','data-mce-alt':args.alt||null});args.alt=null;if(s=='readmore'){args.id='system-readmore';}
ed.execCommand('mceInsertContent',false,'<span id="mce_hr_marker" data-mce-type="bookmark">\uFEFF</span>',{skip_undo:1});var marker=dom.get('mce_hr_marker');var hr=dom.create('hr',args);if(dom.isBlock(n)){p=dom.getParent(marker,blocks,'BODY');if(p.nodeName=='P'||p.nodeName=='DIV'){dom.split(p,marker);ns=marker.nextSibling;if(ns&&ns.nodeName==p.nodeName){if(/^(\s|&nbsp;|\u00a00)*?$/.test(h)||h=='<br>'){dom.remove(ns);}}}else{if(p){if(p.parentNode.nodeName=='BODY'){dom.insertAfter(marker,p);}else{p.parentNode.insertBefore(marker,p);}}else{if(n.parentNode.nodeName=='BODY'){dom.insertAfter(marker,n);}else{n.parentNode.insertBefore(marker,n);}}
p=marker.parentNode;while(/^(H[1-6]|ADDRESS|PRE|FORM|TABLE|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(p.nodeName)){p.parentNode.insertBefore(marker,p);p=marker.parentNode;}}
ns=marker.nextSibling;if(!ns){var el=ed.getParam('forced_root_block')||'br';ns=ed.dom.create(el);if(el!='br'){ns.innerHTML='\u00a0';}
ed.dom.insertAfter(ns,marker);s=ed.selection.select(ns);ed.selection.collapse(1);}}
ed.dom.replace(hr,marker);ed.undoManager.add();},createControl:function(n,cm){var self=this,ed=this.editor;switch(n){case'pagebreak':if(ed.getParam('article_show_pagebreak',true)){var content=DOM.create('div');var fieldset=DOM.add(content,'fieldset',{},'<legend>'+ed.getLang('article.pagebreak','Insert / Edit Pagebreak')+'</legend>');var n=DOM.add(fieldset,'div');DOM.add(n,'label',{'for':ed.id+'_title'},ed.getLang('article.title','Title'));var title=DOM.add(n,'input',{type:'text',id:ed.id+'_title',style:{'width':180}});n=DOM.add(fieldset,'div');DOM.add(n,'label',{'for':ed.id+'_alt'},ed.getLang('article.alias','Alias'));var alt=DOM.add(n,'input',{type:'text',id:ed.id+'_alt',style:{'width':180}});var c=new tinymce.ui.ButtonDialog(cm.prefix+'pagebreak',{title:ed.getLang('article.pagebreak','Insert / Edit Pagebreak'),'class':'mce_pagebreak','dialog_class':ed.getParam('skin')+'Skin','content':content,'width':250,buttons:[{title:ed.getLang('common.insert','Insert'),id:'insert',click:function(e){ed.execCommand('mcePageBreak',false,{title:title.value,alt:alt.value});return true;},scope:self}]},ed);c.onShowDialog.add(function(){title.value=alt.value='';var label=ed.getLang('common.insert','Insert');var o=self._getPageBreak(),active=false;if(o){title.value=o.title||'';alt.value=o.alt||'';label=ed.getLang('common.update','Update');active=true;}
c.setActive(active);c.setButtonLabel('insert',label);title.focus();});c.onHideDialog.add(function(){title.value=alt.value='';});ed.onRemove.add(function(){c.destroy();});return cm.add(c);break;}}
return null;},getInfo:function(){return{longname:'Article',author:'Ryan Demmer',authorurl:'http://www.joomlacontenteditor.net',infourl:'http://www.joomlacontenteditor.net',version:'2.5.4'};}});tinymce.PluginManager.add('article',tinymce.plugins.ArticlePlugin);})();
(function(){var e=tinymce.each,r=tinymce.dom.Event,g;function p(t,s){while(t&&(t.nodeType===8||(t.nodeType===3&&/^[ \t\n\r]*$/.test(t.nodeValue)))){t=s(t)}return t}function b(s){return p(s,function(t){return t.previousSibling})}function i(s){return p(s,function(t){return t.nextSibling})}function d(s,u,t){return s.dom.getParent(u,function(v){return tinymce.inArray(t,v)!==-1})}function n(s){return s&&(s.tagName==="OL"||s.tagName==="UL")}function c(u,v){var t,w,s;t=b(u.lastChild);while(n(t)){w=t;t=b(w.previousSibling)}if(w){s=v.create("li",{style:"list-style-type: none;"});v.split(u,w);v.insertAfter(s,w);s.appendChild(w);s.appendChild(w);u=s.previousSibling}return u}function m(t,s,u){t=a(t,s,u);return o(t,s,u)}function a(u,s,v){var t=b(u.previousSibling);if(t){return h(t,u,s?t:false,v)}else{return u}}function o(u,t,v){var s=i(u.nextSibling);if(s){return h(u,s,t?s:false,v)}else{return u}}function h(u,s,t,v){if(l(u,s,!!t,v)){return f(u,s,t)}else{if(u&&u.tagName==="LI"&&n(s)){u.appendChild(s)}}return s}function l(u,t,s,v){if(!u||!t){return false}else{if(u.tagName==="LI"&&t.tagName==="LI"){return t.style.listStyleType==="none"||j(t)}else{if(n(u)){return(u.tagName===t.tagName&&(s||u.style.listStyleType===t.style.listStyleType))||q(t)}else{return v&&u.tagName==="P"&&t.tagName==="P"}}}}function q(t){var s=i(t.firstChild),u=b(t.lastChild);return s&&u&&n(t)&&s===u&&(n(s)||s.style.listStyleType==="none"||j(s))}function j(u){var t=i(u.firstChild),s=b(u.lastChild);return t&&s&&t===s&&n(t)}function f(w,v,s){var u=b(w.lastChild),t=i(v.firstChild);if(w.tagName==="P"){w.appendChild(w.ownerDocument.createElement("br"))}while(v.firstChild){w.appendChild(v.firstChild)}if(s){w.style.listStyleType=s.style.listStyleType}v.parentNode.removeChild(v);h(u,t,false);return w}function k(t,u){var s;if(!u.is(t,"li,ol,ul")){s=u.getParent(t,"li");if(s){t=s}}return t}tinymce.create("tinymce.plugins.Lists",{init:function(y){var v="TABBING";var s="EMPTY";var J="ESCAPE";var z="PARAGRAPH";var N="UNKNOWN";var x=N;function E(U){return U.keyCode===tinymce.VK.TAB&&!(U.altKey||U.ctrlKey)&&(y.queryCommandState("InsertUnorderedList")||y.queryCommandState("InsertOrderedList"))}function w(){var U=B();var W=U.parentNode.parentNode;var V=U.parentNode.lastChild===U;return V&&!t(W)&&P(U)}function t(U){if(n(U)){return U.parentNode&&U.parentNode.tagName==="LI"}else{return U.tagName==="LI"}}function F(){return y.selection.isCollapsed()&&P(B())}function B(){var U=y.selection.getStart();return((U.tagName=="BR"||U.tagName=="")&&U.parentNode.tagName=="LI")?U.parentNode:U}function P(U){var V=U.childNodes.length;if(U.tagName==="LI"){return V==0?true:V==1&&(U.firstChild.tagName==""||U.firstChild.tagName=="BR"||H(U))}return false}function H(U){var V=tinymce.grep(U.parentNode.childNodes,function(Y){return Y.tagName=="LI"});var W=U==V[V.length-1];var X=U.firstChild;return tinymce.isIE9&&W&&(X.nodeValue==String.fromCharCode(160)||X.nodeValue==String.fromCharCode(32))}function T(U){return U.keyCode===tinymce.VK.ENTER}function A(U){return T(U)&&!U.shiftKey}function M(U){if(E(U)){return v}else{if(A(U)&&w()){return N}else{if(A(U)&&F()){return s}else{return N}}}}function D(U,V){if(x==v||x==s||tinymce.isGecko&&x==J){r.cancel(V)}}function C(){var U=y.selection.getRng(true);var V=U.startContainer;if(V.nodeType==3){var W=V.nodeValue;if(tinymce.isIE9&&W.length>1&&W.charCodeAt(W.length-1)==32){return(U.endOffset==W.length-1)}else{return(U.endOffset==W.length)}}else{if(V.nodeType==1){return U.endOffset==V.childNodes.length}}return false}function I(){var W=y.selection.getNode();var V="h1,h2,h3,h4,h5,h6,p,div";var U=y.dom.is(W,V)&&W.parentNode.tagName==="LI"&&W.parentNode.lastChild===W;return y.selection.isCollapsed()&&U&&C()}function K(W,Y){if(A(Y)&&I()){var X=W.selection.getNode();var V=W.dom.create("li");var U=W.dom.getParent(X,"li");W.dom.insertAfter(V,U);if(tinymce.isIE6||tinymce.isIE7||tinyMCE.isIE8){W.selection.setCursorLocation(V,1)}else{W.selection.setCursorLocation(V,0)}Y.preventDefault()}}function u(X,Z){var ac;if(!tinymce.isGecko){return}var V=X.selection.getStart();if(Z.keyCode!=tinymce.VK.BACKSPACE||V.tagName!=="IMG"){return}function W(ag){var ah=ag.firstChild;var af=null;do{if(!ah){break}if(ah.tagName==="LI"){af=ah}}while(ah=ah.nextSibling);return af}function ae(ag,af){while(ag.childNodes.length>0){af.appendChild(ag.childNodes[0])}}ac=V.parentNode.previousSibling;if(!ac){return}var aa;if(ac.tagName==="UL"||ac.tagName==="OL"){aa=ac}else{if(ac.previousSibling&&(ac.previousSibling.tagName==="UL"||ac.previousSibling.tagName==="OL")){aa=ac.previousSibling}else{return}}var ad=W(aa);var U=X.dom.createRng();U.setStart(ad,1);U.setEnd(ad,1);X.selection.setRng(U);X.selection.collapse(true);var Y=X.selection.getBookmark();var ab=V.parentNode.cloneNode(true);if(ab.tagName==="P"||ab.tagName==="DIV"){ae(ab,ad)}else{ad.appendChild(ab)}V.parentNode.parentNode.removeChild(V.parentNode);X.selection.moveToBookmark(Y)}function G(U){var V=y.dom.getParent(U,"ol,ul");if(V!=null){var W=V.lastChild;y.selection.setCursorLocation(W,0)}}this.ed=y;y.addCommand("Indent",this.indent,this);y.addCommand("Outdent",this.outdent,this);y.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);y.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);y.onInit.add(function(){y.editorCommands.addCommands({outdent:function(){var V=y.selection,W=y.dom;function U(X){X=W.getParent(X,W.isBlock);return X&&(parseInt(y.dom.getStyle(X,"margin-left")||0,10)+parseInt(y.dom.getStyle(X,"padding-left")||0,10))>0}return U(V.getStart())||U(V.getEnd())||y.queryCommandState("InsertOrderedList")||y.queryCommandState("InsertUnorderedList")}},"state")});y.onKeyUp.add(function(V,W){if(x==v){V.execCommand(W.shiftKey?"Outdent":"Indent",true,null);x=N;return r.cancel(W)}else{if(x==s){var U=B();var Y=V.settings.list_outdent_on_enter===true||W.shiftKey;V.execCommand(Y?"Outdent":"Indent",true,null);if(tinymce.isIE){G(U)}return r.cancel(W)}else{if(x==J){if(tinymce.isIE6||tinymce.isIE7||tinymce.isIE8){var X=V.getDoc().createTextNode("\uFEFF");V.selection.getNode().appendChild(X)}else{if(tinymce.isIE9||tinymce.isGecko){V.execCommand("Outdent");return r.cancel(W)}}}}}});function L(V,U){var W=y.getDoc().createTextNode("\uFEFF");V.insertBefore(W,U);y.selection.setCursorLocation(W,0);y.execCommand("mceRepaint")}function R(V,X){if(T(X)){var U=B();if(U){var W=U.parentNode;var Y=W&&W.parentNode;if(Y&&Y.nodeName=="LI"&&Y.firstChild==W&&U==W.firstChild){L(Y,W)}}}}function S(V,X){if(T(X)){var U=B();if(V.dom.select("ul li",U).length===1){var W=U.firstChild;L(U,W)}}}function Q(W,aa){function X(ab){var ad=[];var ae=new tinymce.dom.TreeWalker(ab.firstChild,ab);for(var ac=ae.current();ac;ac=ae.next()){if(W.dom.is(ac,"ol,ul,li")){ad.push(ac)}}return ad}if(aa.keyCode==tinymce.VK.BACKSPACE){var U=B();if(U){var Z=W.dom.getParent(U,"ol,ul"),V=W.selection.getRng();if(Z&&Z.firstChild===U&&V.startOffset==0){var Y=X(U);Y.unshift(U);W.execCommand("Outdent",false,Y);W.undoManager.add();return r.cancel(aa)}}}}function O(V,X){var U=B();if(X.keyCode===tinymce.VK.BACKSPACE&&V.dom.is(U,"li")&&U.parentNode.firstChild!==U){if(V.dom.select("ul,ol",U).length===1){var Z=U.previousSibling;V.dom.remove(V.dom.select("br",U));V.dom.remove(U,true);var W=tinymce.grep(Z.childNodes,function(aa){return aa.nodeType===3});if(W.length===1){var Y=W[0];V.selection.setCursorLocation(Y,Y.length)}V.undoManager.add();return r.cancel(X)}}}y.onKeyDown.add(function(U,V){x=M(V)});y.onKeyDown.add(D);y.onKeyDown.add(u);y.onKeyDown.add(K);if(tinymce.isGecko){y.onKeyUp.add(R)}if(tinymce.isIE8){y.onKeyUp.add(S)}if(tinymce.isGecko||tinymce.isWebKit){y.onKeyDown.add(Q)}if(tinymce.isWebKit){y.onKeyDown.add(O)}},applyList:function(y,v){var C=this,z=C.ed,I=z.dom,s=[],H=false,u=false,w=false,B,G=z.selection.getSelectedBlocks();function E(t){if(t&&t.tagName==="BR"){I.remove(t)}}function F(M){var N=I.create(y),t;function L(O){if(O.style.marginLeft||O.style.paddingLeft){C.adjustPaddingFunction(false)(O)}}if(M.tagName==="LI"){}else{if(M.tagName==="P"||M.tagName==="DIV"||M.tagName==="BODY"){K(M,function(P,O){J(P,O,M.tagName==="BODY"?null:P.parentNode);t=P.parentNode;L(t);E(O)});if(t){if(t.tagName==="LI"&&(M.tagName==="P"||G.length>1)){I.split(t.parentNode.parentNode,t.parentNode)}m(t.parentNode,true)}return}else{t=I.create("li");I.insertAfter(t,M);t.appendChild(M);L(M);M=t}}I.insertAfter(N,M);N.appendChild(M);m(N,true);s.push(M)}function J(P,L,N){var t,O=P,M;while(!I.isBlock(P.parentNode)&&P.parentNode!==I.getRoot()){P=I.split(P.parentNode,P.previousSibling);P=P.nextSibling;O=P}if(N){t=N.cloneNode(true);P.parentNode.insertBefore(t,P);while(t.firstChild){I.remove(t.firstChild)}t=I.rename(t,"li")}else{t=I.create("li");P.parentNode.insertBefore(t,P)}while(O&&O!=L){M=O.nextSibling;t.appendChild(O);O=M}if(t.childNodes.length===0){t.innerHTML='<br _mce_bogus="1" />'}F(t)}function K(Q,T){var N,R,O=3,L=1,t="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";function P(X,U){var V=I.createRng(),W;g.keep=true;z.selection.moveToBookmark(g);g.keep=false;W=z.selection.getRng(true);if(!U){U=X.parentNode.lastChild}V.setStartBefore(X);V.setEndAfter(U);return!(V.compareBoundaryPoints(O,W)>0||V.compareBoundaryPoints(L,W)<=0)}function S(U){if(U.nextSibling){return U.nextSibling}if(!I.isBlock(U.parentNode)&&U.parentNode!==I.getRoot()){return S(U.parentNode)}}N=Q.firstChild;var M=false;e(I.select(t,Q),function(U){if(U.hasAttribute&&U.hasAttribute("_mce_bogus")){return true}if(P(N,U)){I.addClass(U,"_mce_tagged_br");N=S(U)}});M=(N&&P(N,undefined));N=Q.firstChild;e(I.select(t,Q),function(V){var U=S(V);if(V.hasAttribute&&V.hasAttribute("_mce_bogus")){return true}if(I.hasClass(V,"_mce_tagged_br")){T(N,V,R);R=null}else{R=V}N=U});if(M){T(N,undefined,R)}}function D(t){K(t,function(M,L,N){J(M,L);E(L);E(N)})}function A(t){if(tinymce.inArray(s,t)!==-1){return}if(t.parentNode.tagName===v){I.split(t.parentNode,t);F(t);o(t.parentNode,false)}s.push(t)}function x(M){var O,N,L,t;if(tinymce.inArray(s,M)!==-1){return}M=c(M,I);while(I.is(M.parentNode,"ol,ul,li")){I.split(M.parentNode,M)}s.push(M);M=I.rename(M,"p");L=m(M,false,z.settings.force_br_newlines);if(L===M){O=M.firstChild;while(O){if(I.isBlock(O)){O=I.split(O.parentNode,O);t=true;N=O.nextSibling&&O.nextSibling.firstChild}else{N=O.nextSibling;if(t&&O.tagName==="BR"){I.remove(O)}t=false}O=N}}}e(G,function(t){t=k(t,I);if(t.tagName===v||(t.tagName==="LI"&&t.parentNode.tagName===v)){u=true}else{if(t.tagName===y||(t.tagName==="LI"&&t.parentNode.tagName===y)){H=true}else{w=true}}});if(w&&!H||u||G.length===0){B={LI:A,H1:F,H2:F,H3:F,H4:F,H5:F,H6:F,P:F,BODY:F,DIV:G.length>1?F:D,defaultAction:D,elements:this.selectedBlocks()}}else{B={defaultAction:x,elements:this.selectedBlocks(),processEvenIfEmpty:true}}this.process(B)},indent:function(){var u=this.ed,w=u.dom,x=[];function s(z){var y=w.create("li",{style:"list-style-type: none;"});w.insertAfter(y,z);return y}function t(B){var y=s(B),D=w.getParent(B,"ol,ul"),C=D.tagName,E=w.getStyle(D,"list-style-type"),A={},z;if(E!==""){A.style="list-style-type: "+E+";"}z=w.create(C,A);y.appendChild(z);return z}function v(z){if(!d(u,z,x)){z=c(z,w);var y=t(z);y.appendChild(z);m(y.parentNode,false);m(y,false);x.push(z)}}this.process({LI:v,defaultAction:this.adjustPaddingFunction(true),elements:this.selectedBlocks()})},outdent:function(y,x){var w=this,u=w.ed,z=u.dom,s=[];function A(t){var C,B,D;if(!d(u,t,s)){if(z.getStyle(t,"margin-left")!==""||z.getStyle(t,"padding-left")!==""){return w.adjustPaddingFunction(false)(t)}D=z.getStyle(t,"text-align",true);if(D==="center"||D==="right"){z.setStyle(t,"text-align","left");return}t=c(t,z);C=t.parentNode;B=t.parentNode.parentNode;if(B.tagName==="P"){z.split(B,t.parentNode)}else{z.split(C,t);if(B.tagName==="LI"){z.split(B,t)}else{if(!z.is(B,"ol,ul")){z.rename(t,"p")}}}s.push(t)}}var v=x&&tinymce.is(x,"array")?x:this.selectedBlocks();this.process({LI:A,defaultAction:this.adjustPaddingFunction(false),elements:v});e(s,m)},process:function(y){var F=this,w=F.ed.selection,z=F.ed.dom,E,u;function B(t){var s=tinymce.grep(t.childNodes,function(H){return!(H.nodeName==="BR"||H.nodeName==="SPAN"&&z.getAttrib(H,"data-mce-type")=="bookmark"||H.nodeType==3&&(H.nodeValue==String.fromCharCode(160)||H.nodeValue==""))});return s.length===0}function x(s){z.removeClass(s,"_mce_act_on");if(!s||s.nodeType!==1||!y.processEvenIfEmpty&&E.length>1&&B(s)){return}s=k(s,z);var t=y[s.tagName];if(!t){t=y.defaultAction}t(s)}function v(s){F.splitSafeEach(s.childNodes,x,true)}function C(s,t){return t>=0&&s.hasChildNodes()&&t<s.childNodes.length&&s.childNodes[t].tagName==="BR"}function D(){var t=w.getNode();var s=z.getParent(t,"td");return s!==null}E=y.elements;u=w.getRng(true);if(!u.collapsed){if(C(u.endContainer,u.endOffset-1)){u.setEnd(u.endContainer,u.endOffset-1);w.setRng(u)}if(C(u.startContainer,u.startOffset)){u.setStart(u.startContainer,u.startOffset+1);w.setRng(u)}}if(tinymce.isIE8){var G=F.ed.selection.getNode();if(G.tagName==="LI"&&!(G.parentNode.lastChild===G)){var A=F.ed.getDoc().createTextNode("\uFEFF");G.appendChild(A)}}g=w.getBookmark();y.OL=y.UL=v;F.splitSafeEach(E,x);w.moveToBookmark(g);g=null;if(!D()){F.ed.execCommand("mceRepaint")}},splitSafeEach:function(u,t,s){if(s||(tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent)))){this.classBasedEach(u,t)}else{e(u,t)}},classBasedEach:function(v,u){var w=this.ed.dom,s,t;e(v,function(x){w.addClass(x,"_mce_act_on")});s=w.select("._mce_act_on");while(s.length>0){t=s.shift();w.removeClass(t,"_mce_act_on");u(t);s=w.select("._mce_act_on")}},adjustPaddingFunction:function(u){var s,v,t=this.ed;s=t.settings.indentation;v=/[a-z%]+/i.exec(s);s=parseInt(s,10);return function(w){var y,x;y=parseInt(t.dom.getStyle(w,"margin-left")||0,10)+parseInt(t.dom.getStyle(w,"padding-left")||0,10);if(u){x=y+s}else{x=y-s}t.dom.setStyle(w,"padding-left","");t.dom.setStyle(w,"margin-left",x>0?x+v:"")}},selectedBlocks:function(){var s=this.ed,t=s.selection.getSelectedBlocks();return t.length==0?[s.dom.getRoot()]:t},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}());
(function(){var each=tinymce.each;tinymce.create('tinymce.plugins.FormatSelectPlugin',{init:function(ed,url){var self=this;this.editor=ed;ed.onNodeChange.add(function(ed,cm,n){var c=cm.get('formatselect'),p;if(c){p=ed.dom.getParent(n,ed.dom.isBlock);if(p){c.select(p.nodeName.toLowerCase());}}});},createControl:function(n,cf){var ed=this.editor;switch(n){case"formatselect":if(ed.getParam('formatselect_blockformats')){return this._createBlockFormats();}
break;}},_createBlockFormats:function(){var self=this,ed=this.editor,PreviewCss=tinymce.util.PreviewCss;var c,fmts={'p':'advanced.paragraph','address':'advanced.address','pre':'advanced.pre','h1':'advanced.h1','h2':'advanced.h2','h3':'advanced.h3','h4':'advanced.h4','h5':'advanced.h5','h6':'advanced.h6','div':'advanced.div','div_container':'advanced.div_container','blockquote':'advanced.blockquote','code':'advanced.code','samp':'advanced.samp','span':'advanced.span','section':'advanced.section','article':'advanced.article','aside':'advanced.aside','figure':'advanced.figure','dt':'advanced.dt','dd':'advanced.dd'};c=ed.controlManager.createListBox('formatselect',{title:'advanced.block',onselect:function(v){ed.execCommand('FormatBlock',false,v);return false;}});if(c){each(ed.getParam('formatselect_blockformats','','hash'),function(v,k){c.add(ed.translate(k!=v?k:fmts[v]),v,{'class':'mce_formatPreview mce_'+v,style:function(){return PreviewCss(ed,{'block':v});}});});}
return c;}});tinymce.PluginManager.add('formatselect',tinymce.plugins.FormatSelectPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,Cookie=tinymce.util.Cookie,explode=tinymce.explode;tinymce.create('tinymce.plugins.StyleSelectPlugin',{init:function(ed,url){var self=this;this.editor=ed;ed.onNodeChange.add(function(ed,cm){var c=cm.get('styleselect'),formatNames=[],matches;if(c){formatNames=[];each(c.items,function(item){formatNames.push(item.value);});matches=ed.formatter.matchAll(formatNames);c.select(matches[0]);tinymce.each(matches,function(match,index){if(index>0){c.mark(match);}});}});},createControl:function(n,cf){var ed=this.editor;switch(n){case"styleselect":if(ed.getParam('styleselect_stylesheet')!==false||ed.getParam('style_formats')||ed.getParam('theme_advanced_styles')){return this._createStyleSelect();}
break;}},_createStyleSelect:function(n){var self=this,ed=this.editor,ctrlMan=ed.controlManager,ctrl,PreviewCss=tinymce.util.PreviewCss;ctrl=ctrlMan.createListBox('styleselect',{title:'advanced.style_select',onselect:function(name){var matches,formatNames=[],removedFormat;each(ctrl.items,function(item){formatNames.push(item.value);});ed.focus();ed.undoManager.add();matches=ed.formatter.matchAll(formatNames);tinymce.each(matches,function(match){if(!name||match===name){if(match){ed.formatter.remove(match);}
removedFormat=true;}});if(!removedFormat){ed.formatter.apply(name);}
ed.undoManager.add();ed.nodeChanged();return false;}});ed.onPreInit.add(function(){var counter=0,formats=ed.getParam('style_formats'),styles=ed.getParam('theme_advanced_styles','','hash');if(formats){each(formats,function(fmt){var name,keys=0;each(fmt,function(){keys++;});if(keys>1){name=fmt.name=fmt.name||'style_'+(counter++);ed.formatter.register(name,fmt);ctrl.add(fmt.title,name,{style:function(){return new PreviewCss(ed,fmt);}});}else{ctrl.add(fmt.title);}});}
if(styles){each(styles,function(val,key){var name,fmt;if(val){name='style_'+(counter++);fmt={classes:val,selector:'*'};ed.formatter.register(name,fmt);ctrl.add(ed.translate(key),name,{style:function(){return new PreviewCss(ed,fmt);}});}});}});return ctrl;}});tinymce.PluginManager.add('styleselect',tinymce.plugins.StyleSelectPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,Cookie=tinymce.util.Cookie,explode=tinymce.explode;tinymce.create('tinymce.plugins.FontSelectPlugin',{fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",init:function(ed,url){var self=this;this.editor=ed;ed.onNodeChange.add(function(ed,cm,n){var c=cm.get('fontselect'),fn;if(c&&n.style){if(!fn&&n.style.fontFamily){fn=n.style.fontFamily.replace(/[\"\']+/g,'').replace(/^([^,]+).*/,'$1').toLowerCase();}
c.select(function(v){return v.replace(/^([^,]+).*/,'$1').toLowerCase()==fn;});}});},createControl:function(n,cf){var ed=this.editor;switch(n){case"fontselect":if(ed.getParam('fontselect_fonts')){return this._createFontSelect();}
break;}},_createFontSelect:function(){var c,self=this,ed=self.editor;c=ed.controlManager.createListBox('fontselect',{title:'advanced.fontdefault',onselect:function(v){var cur=c.items[c.selectedIndex];if(!v&&cur){ed.execCommand('FontName',false,cur.value);return;}
ed.execCommand('FontName',false,v);c.select(function(sv){return v==sv;});if(cur&&cur.value==v){c.select(null);}
return false;}});if(c){each(ed.getParam('fontselect_fonts','','hash'),function(v,k){if(/\d/.test(v)){v="'"+v+"'";}
c.add(ed.translate(k),v,{style:v.indexOf('dings')==-1?'font-family:'+v:''});});}
return c;}});tinymce.PluginManager.add('fontselect',tinymce.plugins.FontSelectPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,Cookie=tinymce.util.Cookie,explode=tinymce.explode;tinymce.create('tinymce.plugins.FontSizeSelectPlugin',{sizes:[8,10,12,14,18,24,36],init:function(ed,url){var self=this;this.editor=ed;var s=ed.settings;if(!s.font_size_style_values){s.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt";}
s.theme_advanced_font_sizes=ed.getParam('fontsizeselect_font_sizes','8pt,10pt,12pt,14pt,18pt,24pt,36pt');if(tinymce.is(s.theme_advanced_font_sizes,'string')){s.font_size_style_values=tinymce.explode(s.font_size_style_values);s.font_size_classes=tinymce.explode(s.font_size_classes||'');var o={};ed.settings.theme_advanced_font_sizes=s.theme_advanced_font_sizes;each(ed.getParam('theme_advanced_font_sizes','','hash'),function(v,k){var cl;if(k==v&&v>=1&&v<=7){k=v+' ('+self.sizes[v-1]+'pt)';cl=s.font_size_classes[v-1];v=s.font_size_style_values[v-1]||(t.sizes[v-1]+'pt');}
if(/^\s*\./.test(v))
cl=v.replace(/\./g,'');o[k]=cl?{'class':cl}:{fontSize:v};});s.theme_advanced_font_sizes=o;}
ed.onNodeChange.add(function(ed,cm,n){var c=cm.get('fontsizeselect'),fn,s=ed.settings;if(c&&n.style){var fz=n.style.fontSize,cl=n.className;if(s.theme_advanced_runtime_fontsize&&!fz&&!cl)
fz=ed.dom.getStyle(n,'fontSize',true);c.select(function(v){if(v.fontSize&&v.fontSize===fz)
return true;if(v['class']&&v['class']===cl)
return true;});}});},createControl:function(n,cf){switch(n){case"fontsizeselect":return this._createSizeFontSelect();break;}},_createSizeFontSelect:function(){var self=this,ed=self.editor,c,i=0,cl=[];c=ed.controlManager.createListBox('fontsizeselect',{title:'advanced.font_size',onselect:function(v){var cur=c.items[c.selectedIndex];if(!v&&cur){cur=cur.value;if(cur['class']){ed.formatter.toggle('fontsize_class',{value:cur['class']});ed.undoManager.add();ed.nodeChanged();}else{ed.execCommand('FontSize',false,cur.fontSize);}
return;}
if(v['class']){ed.focus();ed.undoManager.add();ed.formatter.toggle('fontsize_class',{value:v['class']});ed.undoManager.add();ed.nodeChanged();}else
ed.execCommand('FontSize',false,v.fontSize);c.select(function(sv){return v==sv;});if(cur&&(cur.value.fontSize==v.fontSize||cur.value['class']&&cur.value['class']==v['class'])){c.select(null);}
return false;}});if(c){each(ed.settings.theme_advanced_font_sizes,function(v,k){var fz=v.fontSize;if(fz>=1&&fz<=7)
fz=self.sizes[parseInt(fz)-1]+'pt';c.add(k,v,{'style':'font-size:'+fz,'class':'mceFontSize'+(i++)+(' '+(v['class']||''))});});}
return c;}});tinymce.PluginManager.add('fontsizeselect',tinymce.plugins.FontSizeSelectPlugin);})();
(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,each=tinymce.each,explode=tinymce.explode;tinymce.create('tinymce.plugins.FontColorPlugin',{init:function(ed,url){var self=this;this.editor=ed;ed.onNodeChange.add(function(ed,cm,n){var s=ed.settings,c;function updateColor(controlId,color){if(c=cm.get(controlId)){if(!color)
color=s.default_color;if(color!==c.value){c.displayColor(color);}}}
if(s.theme_advanced_show_current_color){updateColor('forecolor',n.style.color);updateColor('backcolor',n.style.backgroundColor);}});},createControl:function(n,cf){switch(n){case"forecolor":return this._createForeColorMenu();break;case"backcolor":return this._createBackColorMenu();break;}},_createForeColorMenu:function(){var c,self=this,ed=self.editor,s=ed.settings,o={},v;o.more_colors_func=function(){ed.execCommand('mceColorPicker',false,{color:c.value,func:function(co){c.setColor(co);}});};if(v=s.theme_advanced_text_colors)
o.colors=v;o.default_color=s.fontcolor_foreground_color||'#000000';o.title='advanced.forecolor_desc';o.cmd='ForeColor';o.scope=this;c=ed.controlManager.createColorSplitButton('forecolor',o);return c;},_createBackColorMenu:function(){var c,self=this,ed=self.editor,s=ed.settings,o={},v;o.more_colors_func=function(){ed.execCommand('mceColorPicker',false,{color:c.value,func:function(co){c.setColor(co);}});};if(v=s.theme_advanced_background_colors)
o.colors=v;o.default_color=s.fontcolor_background_color||'#FFFF00';o.title='advanced.backcolor_desc';o.cmd='HiliteColor';o.scope=this;c=ed.controlManager.createColorSplitButton('backcolor',o);return c;}});tinymce.PluginManager.add('fontcolor',tinymce.plugins.FontColorPlugin);})();
(function(){var each=tinymce.each,PreviewCss=tinymce.util.PreviewCss,DOM=tinymce.DOM;function toAbsolute(u,p){return u.replace(/url\(["']?(.+?)["']?\)/gi,function(a,b){if(b.indexOf('://')<0){return'url("'+p+b+'")';}
return a;});}
tinymce.create('tinymce.plugins.ImportCSS',{convertSelectorToFormat:function(selectorText){var format,ed=this.editor;var selector=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(selectorText);if(!selector){return;}
var elementName=selector[1];if(elementName==="body"){return;}
var classes=selector[2].substr(1).split('.').join(' ');var inlineSelectorElements=tinymce.makeMap('a,img');if(selector[1]){format={title:selectorText};if(ed.schema.getTextBlockElements()[elementName]){format.block=elementName;}else if(ed.schema.getBlockElements()[elementName]||inlineSelectorElements[elementName.toLowerCase()]){format.selector=elementName;}else{format.inline=elementName;}}else if(selector[2]){format={inline:"span",selector:'*',title:selectorText.substr(1),classes:classes};}
if(ed.settings.importcss_merge_classes!==false){format.classes=classes;}else{format.attributes={"class":classes};}
return format;},populateStyleSelect:function(){var ed=this.editor;var self=this,styleselect=ed.controlManager.get('styleselect');if(!styleselect||styleselect.hasClasses){return;}
var counter=styleselect.getLength(),selectors=this._import();if(selectors.length===0){return;}
each(selectors,function(s,idx){var name='style_'+(counter+idx);var fmt=self.convertSelectorToFormat(s);if(fmt){ed.formatter.register(name,fmt);styleselect.add(fmt.title,name,{style:function(){return PreviewCss(ed,fmt);}});}});styleselect.hasClasses=true;},init:function(ed,url){this.editor=ed;var self=this;this.classes=[];this.fontface=[];ed.onPreInit.add(function(editor){var styleselect=ed.controlManager.get('styleselect');if(styleselect&&!styleselect.hasClasses&&ed.getParam('styleselect_stylesheet',true)){styleselect.onPostRender.add(function(ed,n){if(!styleselect.NativeListBox){DOM.bind(DOM.get(n.id+'_text'),'focus mousedown',self.populateStyleSelect,self);DOM.bind(DOM.get(n.id+'_open'),'focus mousedown',self.populateStyleSelect,self);}else{DOM.bind(DOM.get(n.id,'focus'),self.populateStyleSelect,self);}});}
var fontselect=ed.controlManager.get('fontselect');if(fontselect){fontselect.onPostRender.add(function(){if(!self.fontface){self._import();}});}});ed.onNodeChange.add(function(){var styleselect=ed.controlManager.get('styleselect');if(styleselect&&!styleselect.hasClasses&&ed.getParam('styleselect_stylesheet',true)){return self.populateStyleSelect();}});},_import:function(){var self=this,ed=this.editor,doc=ed.getDoc(),i,lo={},f=ed.settings.class_filter,ov,href='',rules=[],fontface=false,classes=false;function parseCSS(stylesheet){each(stylesheet.imports,function(r){if(r.href.indexOf('://fonts.googleapis.com')>0){var v='@import url('+r.href+');';if(tinymce.inArray(self.fontface,v)===-1){self.fontface.unshift(v);}
return;}
parseCSS(r);});try{rules=stylesheet.cssRules||stylesheet.rules;if(stylesheet.href){href=stylesheet.href.substr(0,stylesheet.href.lastIndexOf('/')+1);}}catch(e){}
each(rules,function(r){switch(r.type||1){case 1:if(!r.type){}
if(r.selectorText){each(r.selectorText.split(','),function(v){v=v.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(v)||!/\.[\w\-]+$/.test(v))
return;self.classes.push(v);});}
break;case 3:if(r.href.indexOf('//fonts.googleapis.com')>0){var v='@import url('+r.href+');';if(tinymce.inArray(self.fontface,v)===-1){self.fontface.unshift(v);}}
if(tinymce.isGecko&&r.href.indexOf('//')!=-1){return;}
parseCSS(r.styleSheet);break;case 5:if(r.cssText&&/(fontawesome|glyphicons|icomoon)/i.test(r.cssText)===false){var v=toAbsolute(r.cssText,href);if(tinymce.inArray(self.fontface,v)===-1){self.fontface.push(v);}}
break;}});classes=true;}
if((self.classes.length===0&&classes===false)||(self.fontface.length===0&&fontface===false)){try{each(doc.styleSheets,function(styleSheet){parseCSS(styleSheet);});}catch(ex){}}
if(self.fontface.length&&fontface===false){try{var head=DOM.doc.getElementsByTagName('head')[0];var style=DOM.create('style',{type:'text/css'});var css=self.fontface.join("\n");if(style.styleSheet){var setCss=function(){try{style.styleSheet.cssText=css;}catch(e){}};if(style.styleSheet.disabled){setTimeout(setCss,10);}else{setCss();}}else{style.appendChild(DOM.doc.createTextNode(css));}
head.appendChild(style);fontface=true;}catch(e){}}
return self.classes;}});tinymce.PluginManager.add('importcss',tinymce.plugins.ImportCSS);})();
(function(){var each=tinymce.each,undef;tinymce.create('tinymce.plugins.AdvListPlugin',{init:function(ed,url){var t=this;t.editor=ed;function buildFormats(str){var formats=[];each(str.split(/,/),function(type){var title=type.replace(/-/g,'_');if(type==='default'){title='def';}
formats.push({title:'advlist.'+title,styles:{listStyleType:type==='default'?'':type}});});return formats;}
var numlist=ed.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");if(numlist){t.numlist=buildFormats(numlist);}
var bullist=ed.getParam("advlist_bullet_styles","default,circle,disc,square");if(bullist){t.bullist=buildFormats(bullist);}
if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)){t.isIE7=true;}},createControl:function(name,cm){var t=this,btn,format,editor=t.editor;if(name=='numlist'||name=='bullist'){if(t[name]&&t[name][0].title==='advlist.def'){format=t[name][0];}
function hasFormat(node,format){var state=true;each(format.styles,function(value,name){if(editor.dom.getStyle(node,name)!=value){state=false;return false;}});return state;}
function applyListFormat(){var list,dom=editor.dom,sel=editor.selection;list=dom.getParent(sel.getNode(),'ol,ul');if(!list||list.nodeName==(name=='bullist'?'OL':'UL')||!format||hasFormat(list,format)){editor.execCommand(name=='bullist'?'InsertUnorderedList':'InsertOrderedList');}
if(format){list=dom.getParent(sel.getNode(),'ol,ul');if(list){dom.setStyles(list,format.styles);list.removeAttribute('data-mce-style');}}
editor.focus();}
if(!t[name]){btn=cm.createButton(name,{title:'advanced.'+name+'_desc','class':'mce_'+name,onclick:function(){applyListFormat();}});return btn;}
btn=cm.createSplitButton(name,{title:'advanced.'+name+'_desc','class':'mce_'+name,onclick:function(){applyListFormat();}});btn.onRenderMenu.add(function(btn,menu){menu.onHideMenu.add(function(){if(t.bookmark){editor.selection.moveToBookmark(t.bookmark);t.bookmark=0;}});menu.onShowMenu.add(function(){var dom=editor.dom,list=dom.getParent(editor.selection.getNode(),'ol,ul'),fmtList;if(list||format){fmtList=t[name];each(menu.items,function(item){var state=true;item.setSelected(0);if(list&&!item.isDisabled()){each(fmtList,function(fmt){if(fmt.id==item.id){if(!hasFormat(list,fmt)){state=false;return false;}}});if(state)
item.setSelected(1);}});if(!list)
menu.items[format.id].setSelected(1);}
editor.focus();if(tinymce.isIE){t.bookmark=editor.selection.getBookmark(1);}});menu.add({id:editor.dom.uniqueId(),title:'advlist.types','class':'mceMenuItemTitle',titleItem:true}).setDisabled(1);each(t[name],function(item){if(t.isIE7&&item.styles.listStyleType=='lower-greek')
return;item.id=editor.dom.uniqueId();menu.add({id:item.id,title:item.title,onclick:function(){format=item;applyListFormat();}});});});return btn;}},getInfo:function(){return{longname:'Advanced lists',author:'Moxiecode Systems AB',authorurl:'http://tinymce.moxiecode.com',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist',version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add('advlist',tinymce.plugins.AdvListPlugin);})();
(function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(c,d){var e=this,f=0,g=tinymce.VK;e.countre=c.getParam("wordcount_countregex",/[\w\u2019\'-]+/g);e.cleanre=c.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\'\"_+=\\\/-]*/g);e.update_rate=c.getParam("wordcount_update_rate",2000);e.update_on_delete=c.getParam("wordcount_update_on_delete",false);e.id=c.id+"-word-count";c.onPostRender.add(function(i,h){var j,k;k=i.getParam("wordcount_target_id");if(!k){j=tinymce.DOM.get(i.id+"_path_row");if(j){tinymce.DOM.add(j.parentNode,"div",{style:"float: right"},i.getLang("wordcount.words","Words: ")+'<span id="'+e.id+'">0</span>')}}else{tinymce.DOM.add(k,"span",{},'<span id="'+e.id+'">0</span>')}});c.onInit.add(function(h){h.selection.onSetContent.add(function(){e._count(h)});e._count(h)});c.onSetContent.add(function(h){e._count(h)});function b(h){return h!==f&&(h===g.ENTER||f===g.SPACEBAR||a(f))}function a(h){return h===g.DELETE||h===g.BACKSPACE}c.onKeyUp.add(function(h,i){if(b(i.keyCode)||e.update_on_delete&&a(i.keyCode)){e._count(h)}f=i.keyCode})},_getCount:function(c){var a=0;var b=c.getContent({format:"raw"});if(b){b=b.replace(/\.\.\./g," ");b=b.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ");b=b.replace(/(\w+)(&.+?;)+(\w+)/,"$1$3").replace(/&.+?;/g," ");b=b.replace(this.cleanre,"");var d=b.match(this.countre);if(d){a=d.length}}return a},_count:function(a){var b=this;if(b.block){return}b.block=1;setTimeout(function(){if(!a.destroyed){var c=b._getCount(a);tinymce.DOM.setHTML(b.id,c.toString());setTimeout(function(){b.block=0},b.update_rate)}},1)},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)})();
function IeCursorFix(){return true;}
function jInsertEditorText(text,editor){WFEditor.insert(editor,text);}
(function(){var winLoaded=false,each=tinymce.each,explode=tinymce.explode;var VERSION="2.5.4";var WFEditor={_bookmark:{},getSite:function(base){var site,host;var u=document.location.href;if(base.indexOf('http')!==-1){host=base.substr(base.indexOf('://')+3);site=host.substr(host.indexOf('/'));}else{site=u.substr(0,u.indexOf(base)+base.length);}
if(u.indexOf('/administrator/')!==-1){site=site+'administrator/';}
return site;},init:function(settings){var self=this;var base=settings.base_url;var site=this.getSite(base);if(/https:\/\//.test(document.location.href)){base=base.replace(/http:/,'https:');}
settings.token=settings.token||0;settings.component_id=settings.component_id||0;window.tinyMCEPreInit={};tinymce.extend(tinymce,{baseURL:base+'components/com_jce/editor/tiny_mce',suffix:'',query:settings.token+'=1&component_id='+settings.component_id});var indent='p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,object,video,audio';this.settings=tinymce.extend({document_base_url:base,site_url:site,mode:'textareas',schema:"mixed",editor_selector:'wfEditor',editor_deselector:'wfNoEditor',urlconverter_callback:'WFEditor.convertURL',add_form_submit_trigger:false,submit_patch:false,theme:'none',invalid_elements:'applet,iframe,object,embed,script,style,body,bgsound,base,basefont,frame,frameset,head,html,id,ilayer,layer,link,meta,name,title,xml',plugins:'',whitespace_elements:'pre,script,style,textarea,code',fix_list_elements:true,keep_styles:false,indent_before:indent,indent_after:indent,popup_css:false,compress:{'css':true,'javascript':true}},settings);if(this.settings){try{var s=this.settings;if(s.compress.css){tinymce.extend(this.settings,{content_css:false,editor_css:false});}
this._markLoaded();if(s.skip_plugin_languages){var sl=tinymce.ScriptLoader,URI=tinyMCE.baseURI;each(s.skip_plugin_languages.split(','),function(n){if(n){sl.markDone(URI.toAbsolute('plugins/'+n+'/langs/'+s.language+'.js'));sl.add(URI.toAbsolute('plugins/'+n+'/langs/en.js'));}});}
WFEditor.load();}catch(e){}}},_markLoaded:function(){var self=this,s=this.settings,each=tinymce.each,ln=s.language.split(',');var suffix=s.suffix||'';function load(u){tinymce.ScriptLoader.markDone(tinyMCE.baseURL+'/'+u);}
if(s.compress.javascript==0){if(VERSION.indexOf('@@')!=-1){return;}
each(['autolink','cleanup','core','code','colorpicker','upload','format'],function(n){load('plugins/'+n+'/editor_plugin'+suffix+'.js');});}
load('themes/advanced/editor_template'+suffix+'.js');load('themes/none/editor_template'+suffix+'.js');if(s.compress.javascript==1){each(s.plugins.split(','),function(n){if(n){load('plugins/'+n+'/editor_plugin'+suffix+'.js');each(ln,function(c){if(c){load('plugins/'+n+'/langs/'+c+'.js');}});}});}},setBookmark:function(ed){var self=this,DOM=tinymce.DOM,Event=tinymce.dom.Event;function isHidden(ed){return ed.isHidden()||DOM.getStyle(ed.id+'_ifr','visibility')=='hidden';}
function isEditor(el){return DOM.getParent(el,'div.mceEditor, div.mceSplitButtonMenu, div.mceListBoxMenu, div.mceDropDown');}
Event.add(document.body,'mousedown',function(e){var el=e.target;if(isEditor(el)){return;}
if(!isHidden(ed)&&ed.selection){var n=ed.selection.getNode();if(DOM.getParent(n,'body#tinymce')){ed.lastSelectionBookmark=ed.selection.getBookmark(1);}}});},load:function(){var self=this,Event=tinymce.dom.Event,each=tinymce.each,explode=tinymce.explode,loaded;var s=this.settings;tinymce.settings=s;tinyMCE.onAddEditor.add(function(mgr,ed){if(s.compress.css){ed.onPreInit.add(function(){ed.dom.loadCSS(s.site_url+'index.php?option=com_jce&view=editor&layout=editor&task=pack&type=css&context=content&component_id='+s.component_id+'&'+s.token+'=1');});}
WFEditor.hideLoader(ed.getElement());self.setBookmark(ed);var plugins=s.plugins.split(','),lookup=tinymce.PluginManager.lookup;each(lookup,function(o,k){if(tinymce.inArray(plugins,k)===-1){delete lookup[k];}});ed.onInit.add(function(){ed.onSubmit.addToTop(function(){if(ed.initialized&&!ed.isHidden()){ed.save();ed.isNotDirty=1;}});});ed.onBeforeRenderUI.add(function(){var n=ed.getElement().form;if(!n||n._mceOldSubmit){return;}
if(!n.submit.nodeType&&!n.submit.length){ed.formElement=n;n._mceOldSubmit=n.submit;n.submit=function(){tinymce.each(tinymce.editors,function(e){if(e.initialized&&!e.isHidden()){e.save();}});ed.isNotDirty=1;return ed.formElement._mceOldSubmit(ed.formElement);};}
n=null;});ed.onBeforeExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode();if(cmd=='mceInsertLink'){if(tinymce.isWebKit&&n&&n.nodeName=='IMG'){ed.dom.setAttrib(n,'data-mce-style',n.style.cssText);n.style.cssText=null;}}});ed.onExecCommand.add(function(ed,cmd,ui,v,o){var se=ed.selection,n=se.getNode();if(cmd=='mceInsertLink'){tinymce.each(ed.dom.select('img[data-mce-style]',n),function(el){if(el.parentNode.nodeName=='A'&&!el.style.cssText){el.style.cssText=ed.dom.getAttrib(el,'data-mce-style');}});}});});function _load(){if(!loaded){loaded=true;return self.create();}}
Event.add(window,'load',function(){_load();});Event.add(document,'init',function(){window.setTimeout(function(){_load();},1000);});},create:function(elements){var self=this,Event=tinymce.dom.Event,s=this.settings;WFEditor.showLoader();if(elements){s.mode='exact';s.elements=elements;}
try{if(s.theme=='advanced'&&(typeof s.toggle=='undefined'?1:s.toggle)){this._createToggle(elements);}
tinyMCE.init(s);}catch(e){alert(e);}},_createToggle:function(elements){var self=this,DOM=tinymce.DOM,Event=tinymce.dom.Event,s=this.settings;function getVar(s,dv){return(typeof s=='undefined'||s===null)?dv:s;}
var use_cookies=getVar(s.use_cookies,true);elements=elements||DOM.select('.wfEditor');tinymce.each(elements,function(el){var state=getVar(s.toggle_state,1);var cookie=getVar(tinymce.util.Cookie.get('wf_editor_'+el.id+'_state'),1);var label=getVar(s.toggle_label,'[Toggle Editor]');var div=DOM.create('span',{'role':'button','class':'wf_editor_toggle','aria-labelledby':'wf_editor_'+el.id+'_toggle'},'<span id="wf_editor_'+el.id+'_toggle">'+label+'</span>');DOM.setStyle(div,'cursor','pointer');el.parentNode.insertBefore(div,el);Event.add(div,'click',function(e){self.toggle(el,use_cookies);});if(!state){DOM.removeClass(el,'wfEditor');DOM.addClass(el,'wfNoEditor');self._wrapText(el,true);}else{if(parseInt(cookie)==0){DOM.removeClass(el,'wfEditor');DOM.addClass(el,'wfNoEditor');self._wrapText(el,true);}else{DOM.removeClass(el,'wfNoEditor');DOM.addClass(el,'wfEditor');}}});},toggle:function(el,use_cookies){var self=this,ed=tinyMCE.get(el.id),DOM=tinymce.DOM;var state=!ed||ed.isHidden()?1:0
if(use_cookies){tinymce.util.Cookie.set('wf_editor_'+el.id+'_state',state);}
if(!ed){DOM.removeClass(el,'wfNoEditor');DOM.addClass(el,'wfEditor');}else{self._wrapText(ed.getElement(),true);if(ed.isHidden()){DOM.removeClass(el,'wfNoEditor');DOM.addClass(el,'wfEditor');}else{DOM.removeClass(el,'wfEditor');DOM.addClass(el,'wfNoEditor');}}
tinymce.execCommand('mceToggleEditor',false,el.id);},_wrapText:function(el,s){if(s){el.setAttribute("wrap","soft");}else{el.removeAttribute("wrap");}},showLoader:function(el){tinymce.DOM.addClass('.wfEditor','loading');},hideLoader:function(el){tinymce.DOM.removeClass(el,'loading');},setContent:function(id,html){var ed=tinyMCE.get(id);if(ed){ed.setContent(html);}else{document.getElementById(id).value=html;}},getContent:function(id){var ed=tinyMCE.get(id);if(ed&&!ed.isHidden()){return ed.save();}
return document.getElementById(id).value;},insert:function(el,v){var ed,win=window;if(window.parent.tinymce){win=window.parent;}
if(el){if(typeof el==='string'){el=document.getElementById(el);}
if(el&&el.id){ed=win.tinyMCE.get(el.id);}}
if(!ed){ed=win.tinyMCE.activeEditor;}
if(!ed||ed.isHidden()){this.insertIntoTextarea(el,v);return true;}
if(ed){if(ed.lastSelectionBookmark){ed.selection.moveToBookmark(ed.lastSelectionBookmark);}
ed.execCommand('mceInsertContent',false,v);}},insertIntoTextarea:function(el,v){if(document.selection){el.focus();var s=document.selection.createRange();s.text=v;}else{if(el.selectionStart||el.selectionStart=='0'){var startPos=el.selectionStart;var endPos=el.selectionEnd;el.value=el.value.substring(0,startPos)+v+el.value.substring(endPos,el.value.length);}else{el.value+=v;}}},convertURL:function(url,elm,save,name){var ed=tinymce.EditorManager.activeEditor,s=tinymce.settings,base=s.document_base_url;if(!url){return url;}
if(!s.convert_urls||(elm&&elm.nodeName==='LINK')||url.indexOf('file:')===0){return url;}
if(url===base||url===base.substring(0,base.length-1)||url.charAt(0)==='/'){return url;}
if(s.relative_urls){return ed.documentBaseURI.toRelative(url);}
return ed.documentBaseURI.toAbsolute(url,s.remove_script_host);},indent:function(h){h=h.replace(/\n+/g,'\n');return tinymce.trim(h);}};window.WFEditor=WFEditor;}());tinyMCE.addI18n({"en":{"common":{"edit_confirm":"Do you want to use the WYSIWYG mode for this textarea?","apply":"Apply","insert":"Insert","update":"Update","cancel":"Cancel","close":"Close","browse":"Browse","class_name":"Class","not_set":"-- Not set --","clipboard_msg":"Cut and Copy are not available in Mozilla and Firefox. \nPlease use keyboard shortcuts %s+C and %s+X instead.\n\nDo you want more information about this issue?","clipboard_no_support":"Currently not supported by your browser, use keyboard shortcuts instead.","popup_blocked":"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.","invalid_data":"{#field} is invalid","invalid_data_number":"{#field} must be a number","invalid_data_min":"{#field} must be a number greater than {#min}","invalid_data_size":"{#field} must be a number or percentage","more_colors":"More colors"},"colorpicker":{"F0F8FF":"AliceBlue","FAEBD7":"AntiqueWhite","00FFFF":"Cyan","7FFFD4":"Aquamarine","F0FFFF":"Azure","F5F5DC":"Beige","FFE4C4":"Bisque","000000":"Black","FFEBCD":"BlanchedAlmond","0000FF":"Blue","8A2BE2":"BlueViolet","A52A2A":"Brown","DEB887":"BurlyWood","5F9EA0":"CadetBlue","7FFF00":"Chartreuse","D2691E":"Chocolate","FF7F50":"Coral","6495ED":"CornflowerBlue","FFF8DC":"Cornsilk","DC143C":"Crimson","00008B":"DarkBlue","008B8B":"DarkCyan","B8860B":"DarkGoldenRod","A9A9A9":"DarkGray","006400":"DarkGreen","BDB76B":"DarkKhaki","8B008B":"DarkMagenta","556B2F":"DarkOliveGreen","FF8C00":"Darkorange","9932CC":"DarkOrchid","8B0000":"DarkRed","E9967A":"DarkSalmon","8FBC8F":"DarkSeaGreen","483D8B":"DarkSlateBlue","2F4F4F":"DarkSlateGrey","00CED1":"DarkTurquoise","9400D3":"DarkViolet","FF1493":"DeepPink","00BFFF":"DeepSkyBlue","696969":"DimGrey","1E90FF":"DodgerBlue","B22222":"FireBrick","FFFAF0":"FloralWhite","228B22":"ForestGreen","FF00FF":"Magenta","DCDCDC":"Gainsboro","F8F8FF":"GhostWhite","FFD700":"Gold","DAA520":"GoldenRod","808080":"Grey","008000":"Green","ADFF2F":"GreenYellow","F0FFF0":"HoneyDew","FF69B4":"HotPink","CD5C5C":"IndianRed","4B0082":"Indigo","FFFFF0":"Ivory","F0E68C":"Khaki","E6E6FA":"Lavender","FFF0F5":"LavenderBlush","7CFC00":"LawnGreen","FFFACD":"LemonChiffon","ADD8E6":"LightBlue","F08080":"LightCoral","E0FFFF":"LightCyan","FAFAD2":"LightGoldenRodYellow","D3D3D3":"LightGrey","90EE90":"LightGreen","FFB6C1":"LightPink","FFA07A":"LightSalmon","20B2AA":"LightSeaGreen","87CEFA":"LightSkyBlue","778899":"LightSlateGrey","B0C4DE":"LightSteelBlue","FFFFE0":"LightYellow","00FF00":"Lime","32CD32":"LimeGreen","FAF0E6":"Linen","800000":"Maroon","66CDAA":"MediumAquaMarine","0000CD":"MediumBlue","BA55D3":"MediumOrchid","9370D8":"MediumPurple","3CB371":"MediumSeaGreen","7B68EE":"MediumSlateBlue","00FA9A":"MediumSpringGreen","48D1CC":"MediumTurquoise","C71585":"MediumVioletRed","191970":"MidnightBlue","F5FFFA":"MintCream","FFE4E1":"MistyRose","FFE4B5":"Moccasin","FFDEAD":"NavajoWhite","000080":"Navy","FDF5E6":"OldLace","808000":"Olive","6B8E23":"OliveDrab","FFA500":"Orange","FF4500":"OrangeRed","DA70D6":"Orchid","EEE8AA":"PaleGoldenRod","98FB98":"PaleGreen","AFEEEE":"PaleTurquoise","D87093":"PaleVioletRed","FFEFD5":"PapayaWhip","FFDAB9":"PeachPuff","CD853F":"Peru","FFC0CB":"Pink","DDA0DD":"Plum","B0E0E6":"PowderBlue","800080":"Purple","FF0000":"Red","BC8F8F":"RosyBrown","4169E1":"RoyalBlue","8B4513":"SaddleBrown","FA8072":"Salmon","F4A460":"SandyBrown","2E8B57":"SeaGreen","FFF5EE":"SeaShell","A0522D":"Sienna","C0C0C0":"Silver","87CEEB":"SkyBlue","6A5ACD":"SlateBlue","708090":"SlateGrey","FFFAFA":"Snow","00FF7F":"SpringGreen","4682B4":"SteelBlue","D2B48C":"Tan","008080":"Teal","D8BFD8":"Thistle","FF6347":"Tomato","40E0D0":"Turquoise","EE82EE":"Violet","F5DEB3":"Wheat","FFFFFF":"White","F5F5F5":"WhiteSmoke","FFFF00":"Yellow","9ACD32":"YellowGreen","picker":"Picker","colorpicker":"Colour Picker","template_desc":"The following colours have been retrieved from your template stylesheets","palette":"Web","named":"Named","template":"Template","custom":"Custom","color":"Colour","apply":"Apply","name":"Name"},"contextmenu":{"align":"Alignment","left":"Left","center":"Center","right":"Right","full":"Full"},"print":{"desc":"Print"},"preview":{"desc":"Preview"},"directionality":{"ltr_desc":"Direction left to right","rtl_desc":"Direction right to left"},"layer":{"insertlayer_desc":"Insert new layer","forward_desc":"Move forward","backward_desc":"Move backward","absolute_desc":"Toggle absolute positioning","content":"New layer..."},"nonbreaking":{"desc":"Insert non-breaking space character"},"emotions":{"desc":"Emotions"},"searchreplace":{"search_desc":"Find","replace_desc":"Find/Replace"},"xhtmlxtras":{"cite_desc":"Citation","abbr_desc":"Abbreviation","acronym_desc":"Acronym","del_desc":"Deletion","ins_desc":"Insertion","attribs_desc":"Insert/Edit Attributes"},"style":{"desc":"Edit CSS Style"},"clipboard":{"paste_desc":"Paste","paste_text_desc":"Paste as Plain Text","paste_word_desc":"Paste from Word","selectall_desc":"Select All","paste_dlg_title":"Use %s+V on your keyboard to paste text into the window."},"table":{"desc":"Inserts a new table","row_before_desc":"Insert row before","row_after_desc":"Insert row after","delete_row_desc":"Delete row","col_before_desc":"Insert column before","col_after_desc":"Insert column after","delete_col_desc":"Remove column","split_cells_desc":"Split merged table cells","merge_cells_desc":"Merge table cells","row_desc":"Table row properties","cell_desc":"Table cell properties","props_desc":"Table properties","paste_row_before_desc":"Paste table row before","paste_row_after_desc":"Paste table row after","cut_row_desc":"Cut table row","copy_row_desc":"Copy table row","del":"Delete table","row":"Row","col":"Column","cell":"Cell"},"autosave":{"unload_msg":"The changes you made will be lost if you navigate away from this page.","restore_content":"Restore auto-saved content.","warning_message":"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?."},"fullscreen":{"desc":"Toggle fullscreen mode"},"visualchars":{"desc":"Visual control characters on/off."},"spellchecker":{"desc":"Toggle spellchecker","menu":"Spellchecker settings","ignore_word":"Ignore word","ignore_words":"Ignore all","langs":"Languages","wait":"Please wait...","sug":"Suggestions","no_sug":"No suggestions","no_mpell":"No misspellings found.","learn_word":"Learn word"},"advlist":{"types":"Types","def":"Default","lower_alpha":"Lower alpha","lower_greek":"Lower greek","lower_roman":"Lower roman","upper_alpha":"Upper alpha","upper_roman":"Upper roman","circle":"Circle","disc":"Disc","square":"Square"},"aria":{"rich_text_area":"Rich Text Area"},"wordcount":{"words":"Words: "},"iframe":{"desc":"Insert/Edit IFrame"},"imgmanager":{"desc":"Insert/Edit image","delta_width":0,"delta_height":0},"imgmanager_ext":{"desc":"Insert/Edit image","delta_width":0,"delta_height":0},"link":{"desc":"Insert/Edit link","delta_width":0,"delta_height":0},"filemanager":{"desc":"Insert/Edit file","delta_width":0,"delta_height":0},"mediamanager":{"desc":"Insert/Edit Media","delta_width":0,"delta_height":0},"caption":{"desc":"Insert/Edit Caption","delta_width":0,"delta_height":0,"delete":"Delete Caption"},"templatemanager":{"desc":"Insert predefined template content","delta_width":0,"delta_height":0},"article":{"pagebreak":"Insert / Edit Pagebreak","readmore":"Insert Read More","readmore_title":"Read More","readmore_alert":"There is already a Read More break inserted in this article. Only one such break is permitted. Use a Pagebreak to split the page up further.","title":"Page Title","alias":"Table of Contents Alias"},"source":{"desc":"Source Code Editor","wrap":"Toggle Word Wrap","linenumbers":"Toggle Line Numbers","highlight":"Toggle Code Highlighting","replace":"Replace","replace_all":"Replace All","search":"Find","search_prev":"Find Previous","regex":"Regular Expression","format":"Format HTML"},"textcase":{"uppercase":"Uppercase","lowercase":"Lowercase","sentencecase":"Sentence Case","camelcase":"Camel Case"},"visualblocks":{"desc":"Show/hide block elements"},"kitchensink":{"desc":"Toggle Toolbars"},"anchor":{"desc":"Insert/edit anchor","name":"Name","invalid":"Please specify a valid anchor Name or ID. The value must start with a letter.","exists":"An anchor with that name or id already exists"},"upload":{"response_error":"Invalid Upload Response","http_error":"HTTP Error","button_description":"Click to upload a file","label":"Upload"},"advanced":{"style_select":"Styles","font_size":"Font size","fontdefault":"Font family","block":"Format","paragraph":"Paragraph","div":"Div","div_container":"Div Container","address":"Address","pre":"Preformatted","h1":"Heading 1","h2":"Heading 2","h3":"Heading 3","h4":"Heading 4","h5":"Heading 5","h6":"Heading 6","blockquote":"Blockquote","code":"Code","samp":"Code Sample","dt":"Definition Term ","dd":"Definition Description","span":"Span","section":"Section","article":"Article","hgroup":"HGroup","aside":"Aside","figure":"Figure","bold_desc":"Bold (Ctrl+B)","italic_desc":"Italic (Ctrl+I)","underline_desc":"Underline (Ctrl+U)","striketrough_desc":"Strikethrough","justifyleft_desc":"Align left","justifycenter_desc":"Align center","justifyright_desc":"Align right","justifyfull_desc":"Align full","bullist_desc":"Unordered list","numlist_desc":"Ordered list","outdent_desc":"Outdent","indent_desc":"Indent","undo_desc":"Undo (Ctrl+Z)","redo_desc":"Redo (Ctrl+Y)","link_desc":"Insert/edit link","unlink_desc":"Unlink","image_desc":"Insert/edit image","cleanup_desc":"Cleanup HTML","code_desc":"Edit HTML Source","sub_desc":"Subscript","sup_desc":"Superscript","hr_desc":"Insert horizontal ruler","removeformat_desc":"Remove formatting","custom1_desc":"Your custom description here","forecolor_desc":"Select text color","backcolor_desc":"Select background color","charmap_desc":"Insert custom character","visualaid_desc":"Toggle guidelines/invisible elements","cut_desc":"Cut","copy_desc":"Copy","paste_desc":"Paste","image_props_desc":"Image properties","newdocument_desc":"New document","help_desc":"Help","blockquote_desc":"Blockquote","clipboard_msg":"Copy/Cut/Paste is not available in Mozilla and Firefox.\r\nDo you want more information about this issue?","path":"Path","newdocument":"Are you sure you want clear all contents?","toolbar_focus":"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X","more_colors":"More colors","shortcuts_desc":"Accessibility Help","help_shortcut":"Press ALT F10 for toolbar. Press ALT 0 for help.","rich_text_area":"Rich Text Area","toolbar":"Toolbar"}}});